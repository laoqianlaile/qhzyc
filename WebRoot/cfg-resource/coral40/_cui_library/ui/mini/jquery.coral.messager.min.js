/*!
 * 组件库4.0： 消息提示窗
 *
 * 依赖JS文件:
 *	jquery.coral.core.js
 *	jquery.coral.component.js
 *	jquery.coral.mouse.js
 *  jquery.coral.button.js
 *	jquery.coral.draggable.js
 *	jquery.coral.position.js
 *	jquery.coral.resizable.js
 *	jquery.coral.dailog.js
 */
(function(a,b){a.messager={loading:{show:function(g){if(!g instanceof jQuery){g=a(g)}var f=g.attr("data-loading-id");if(!f){f=new Date().getTime();g.attr("data-loading-id","loading_"+f)}var h=a("<div id='loading_"+f+"' class='coral-loading'><div class='coral-loading-zone'></div><span class='coral-loading-text'>加载中，请稍后...</span></div>");var d=h.find(".coral-loading-zone");var c=h.find(".coral-loading-text");h.outerWidth(g.outerWidth());h.outerHeight(g.outerHeight());d.outerWidth(g.outerWidth());d.outerHeight(g.outerHeight());h.position({my:"left top",at:"left top",of:g});a(document.body).append(h);var e=(h.outerWidth()-c.outerWidth())/2;c.css({left:e})},hide:function(d){if(!d instanceof jQuery){d=a(d)}var c=d.attr("data-loading-id");if(!c){return}a("#"+c).remove();d.removeAttr("data-loading-id")}},_init:function(e,c){if(c.queue==true){if(!a("#coral-msgBox").length){a("<div id='coral-msgBox' class='queueMessage'></div>").appendTo("body")}c.appendTo="#coral-msgBox"}var d="";if(c.wtype=="messageBox"){e=a("<div class='coral-messagerBox'>"+(c.icons||"")+"<span class='coral-messagerBox-content'>"+c.message+"</span></div>").appendTo("body")}else{if(c.wtype=="message"){if(c.cls.indexOf("warning")>-1){c.icons="icon-warning2";d="<span class='icon icon-control coral-control-warning "+c.icons+"'></span>"}else{if(c.cls.indexOf("success")>-1){c.icons="icon-checkmark-circle2";d="<span class='icon icon-control coral-control-success "+c.icons+"'></span>"}else{if(c.cls.indexOf("danger")>-1){c.icons="icon-close3";d="<span class='icon icon-control coral-control-danger "+c.icons+"'></span>"}else{if(c.cls.indexOf("info")>-1){c.icons="icon-notification2";d="<span class='icon icon-control coral-control-info "+c.icons+"'></span>"}}}}e=a("<div class='hasIcon "+c.cls+"' role='alert'>"+d+"<span class='coral-alert-content'>"+c.message+"</span></div>").appendTo("body")
}else{if(typeof c.message!=="undefined"&&c.wtype!="message"){if(c.type="question"){c.icons="icon-info";d="<span class='icon icon-control coral-control-info "+c.icons+"'></span>"}else{if(c.type="alert"){c.icons="icon-info";d="<span class='icon icon-control coral-control-info "+c.icons+"'></span>"}}e=a("<div class='coral-messager-body'><span class='coral-messager-box'><span class='hasIcon coral-messager-box-content'>"+d+"<span class='coral-messager-content'>"+c.message+"</span></span></span></div>").appendTo("body")}}}return e},message:function(d,c,f){if(typeof d==="string"||typeof d==="boolean"||typeof d==="number"){d={message:d.toString(),wtype:"message"}}if(!f&&typeof c==="function"){f=c;c="info"}if(!c||a.inArray(c,["info","success","warning","error","question","danger","alert"])<0){c="info"}d=d||{};d.type=c;if(!d.cls){d.cls=c}d=a.extend(true,{autoOpen:true,title:"消息提示",isMessage:true,show:"slideDown",hide:"slideUp",cls:"info",modal:false,queue:false,onClose:f,draggable:false,resizable:false,width:"auto",maxWidth:600,wtype:"message",timeOut:2999},a.message.defaults,a.messageQueue.defaults,d);var e=a.messager._init(e,d);e.css("max-width",d.maxWidth+"px");e.dialog(d);if(d.wtype==="message"){a.messager.messageInstances++;a.messager.messageHeights.push(e.outerHeight())}},messageQueue:function(c){c.queue=true;a.messager.message(c)},messageBox:function(c,e){if(typeof c==="string"||typeof c==="boolean"||typeof c==="number"){c={message:c.toString(),wtype:"messageBox"}}c=c||{};c=a.extend(true,{autoOpen:true,title:"消息提示",show:"slideDown",hide:"slideUp",isMessage:true,modal:false,draggable:false,resizable:false,width:250,wtype:"messageBox",timeOut:2999},a.messageBox.defaults,c);var d=a.messager._init(d,c);d.dialog(c);return d},alert:function(c,e){if(typeof c==="string"||typeof c==="boolean"||typeof c==="number"){c={message:c.toString()}}c=a.extend(true,{modal:true,timeOut:0,title:"信息提示",isMessage:true,width:300,icons:"icon-notification2",wtype:"alert"},a.alert.defaults,c);if((c.timeOut<=0||isNaN(c.timeOut))&&!c.buttons){c.buttons={"确定":function(){a(this).dialog("close");
if(typeof e==="function"){e(true)}return true}}}c.wtype="alert";c.type="alert";var d=a.messager._init(d,c);d.dialog(c);return d},confirm:function(d,g){var c="确定",f="取消",h={};if(typeof d==="string"||typeof d==="boolean"||typeof d==="number"){d={message:d}}c=d.okText?d.okText:c;f=d.cancelText?d.cancelText:f;h[c]=function(){a(this).dialog("close");if(typeof g==="function"){g(true)}return false};h[f]=function(){a(this).dialog("close");if(typeof g==="function"){g(false)}return false};d.type="question";d.wtype="confirm";d=a.extend(true,{autoOpen:true,title:"确认提示",isMessage:true,width:300,show:"slideDown",modal:true,icons:"icon-question",buttons:h},a.confirm.defaults,d);var e=a.messager._init(e,d);e.dialog(d);return e},progress:function(d,g){var c="确定",f="取消",h={};if(typeof d==="string"||typeof d==="boolean"||typeof d==="number"){d={message:d}}c=d.okText?d.okText:c;f=d.cancelText?d.cancelText:f;h[c]=function(){a(this).dialog("close");if(typeof g==="function"){g(true)}return false};h[f]=function(){a(this).dialog("close");if(typeof g==="function"){g(false)}return false};d.type="question";d.wtype="confirm";d=a.extend(true,{autoOpen:true,title:"确认提示",isMessage:true,width:300,show:"slideDown",modal:true,icons:"icon-question",buttons:h},a.confirm.defaults,d);var e=a.messager._init(e,d);e.dialog(d);return e}};a.messager.messageInstances=0;a.messager.messageHeights=[];a.message=a.messager.message;a.messageQueue=a.messager.messageQueue;a.messageBox=a.messager.messageBox;a.alert=a.messager.alert;a.confirm=a.messager.confirm;a.message.defaults={position:{my:"top",at:"top top+50",of:window}};a.messageQueue.defaults={position:{my:"top",at:"top top+50",of:window}};a.messageBox.defaults={position:{my:"right bottom",at:"right bottom",of:window}};a.alert.defaults={position:{my:"center",at:"center top+200",of:window}};a.confirm.defaults={position:{my:"center",at:"center top+200",of:window}}}(jQuery));