/*!
 * jQuery JavaScript Library v1.11.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:19Z
 */
(function(b,a){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=b.document?a(b,true):function(c){if(!c.document){throw new Error("jQuery requires a window with a document")}return a(c)}}else{a(b)}}(typeof window!=="undefined"?window:this,function(a4,au){var aO=[];var O=aO.slice;var ay=aO.concat;var w=aO.push;var bT=aO.indexOf;var ab={};var x=ab.toString;var J=ab.hasOwnProperty;var C={};var ah="1.11.3",bH=function(e,i){return new bH.fn.init(e,i)},D=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bR=/^-ms-/,aV=/-([\da-z])/gi,N=function(e,i){return i.toUpperCase()};bH.fn=bH.prototype={jquery:ah,constructor:bH,selector:"",length:0,toArray:function(){return O.call(this)},get:function(e){return e!=null?(e<0?this[e+this.length]:this[e]):O.call(this)},pushStack:function(e){var i=bH.merge(this.constructor(),e);i.prevObject=this;i.context=this.context;return i},each:function(i,e){return bH.each(this,i,e)},map:function(e){return this.pushStack(bH.map(this,function(b6,b5){return e.call(b6,b5,b6)}))},slice:function(){return this.pushStack(O.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b6){var e=this.length,b5=+b6+(b6<0?e:0);return this.pushStack(b5>=0&&b5<e?[this[b5]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:w,sort:aO.sort,splice:aO.splice};bH.extend=bH.fn.extend=function(){var e,ca,b5,b6,cd,cb,b9=arguments[0]||{},b8=1,b7=arguments.length,cc=false;if(typeof b9==="boolean"){cc=b9;b9=arguments[b8]||{};b8++}if(typeof b9!=="object"&&!bH.isFunction(b9)){b9={}}if(b8===b7){b9=this;b8--}for(;b8<b7;b8++){if((cd=arguments[b8])!=null){for(b6 in cd){e=b9[b6];b5=cd[b6];if(b9===b5){continue}if(cc&&b5&&(bH.isPlainObject(b5)||(ca=bH.isArray(b5)))){if(ca){ca=false;
cb=e&&bH.isArray(e)?e:[]}else{cb=e&&bH.isPlainObject(e)?e:{}}b9[b6]=bH.extend(cc,cb,b5)}else{if(b5!==undefined){b9[b6]=b5}}}}}return b9};bH.extend({expando:"jQuery"+(ah+Math.random()).replace(/\D/g,""),isReady:true,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return bH.type(e)==="function"},isArray:Array.isArray||function(e){return bH.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return !bH.isArray(e)&&(e-parseFloat(e)+1)>=0},isEmptyObject:function(i){var e;for(e in i){return false}return true},isPlainObject:function(b6){var i;if(!b6||bH.type(b6)!=="object"||b6.nodeType||bH.isWindow(b6)){return false}try{if(b6.constructor&&!J.call(b6,"constructor")&&!J.call(b6.constructor.prototype,"isPrototypeOf")){return false}}catch(b5){return false}if(C.ownLast){for(i in b6){return J.call(b6,i)}}for(i in b6){}return i===undefined||J.call(b6,i)},type:function(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?ab[x.call(e)]||"object":typeof e},globalEval:function(e){if(e&&bH.trim(e)){(a4.execScript||function(i){a4["eval"].call(a4,i)})(e)}},camelCase:function(e){return e.replace(bR,"ms-").replace(aV,N)},nodeName:function(i,e){return i.nodeName&&i.nodeName.toLowerCase()===e.toLowerCase()},each:function(b9,ca,b5){var b8,b6=0,b7=b9.length,e=ac(b9);if(b5){if(e){for(;b6<b7;b6++){b8=ca.apply(b9[b6],b5);if(b8===false){break}}}else{for(b6 in b9){b8=ca.apply(b9[b6],b5);if(b8===false){break}}}}else{if(e){for(;b6<b7;b6++){b8=ca.call(b9[b6],b6,b9[b6]);if(b8===false){break}}}else{for(b6 in b9){b8=ca.call(b9[b6],b6,b9[b6]);if(b8===false){break}}}}return b9},trim:function(e){return e==null?"":(e+"").replace(D,"")},makeArray:function(e,b5){var i=b5||[];if(e!=null){if(ac(Object(e))){bH.merge(i,typeof e==="string"?[e]:e)}else{w.call(i,e)}}return i},inArray:function(b7,b5,b6){var e;if(b5){if(bT){return bT.call(b5,b7,b6)}e=b5.length;b6=b6?b6<0?Math.max(0,e+b6):b6:0;for(;b6<e;b6++){if(b6 in b5&&b5[b6]===b7){return b6
}}}return -1},merge:function(b8,b6){var e=+b6.length,b5=0,b7=b8.length;while(b5<e){b8[b7++]=b6[b5++]}if(e!==e){while(b6[b5]!==undefined){b8[b7++]=b6[b5++]}}b8.length=b7;return b8},grep:function(e,cb,b8){var ca,b7=[],b5=0,b6=e.length,b9=!b8;for(;b5<b6;b5++){ca=!cb(e[b5],b5);if(ca!==b9){b7.push(e[b5])}}return b7},map:function(b6,cb,e){var ca,b8=0,b9=b6.length,b5=ac(b6),b7=[];if(b5){for(;b8<b9;b8++){ca=cb(b6[b8],b8,e);if(ca!=null){b7.push(ca)}}}else{for(b8 in b6){ca=cb(b6[b8],b8,e);if(ca!=null){b7.push(ca)}}}return ay.apply([],b7)},guid:1,proxy:function(b7,b6){var e,b5,i;if(typeof b6==="string"){i=b7[b6];b6=b7;b7=i}if(!bH.isFunction(b7)){return undefined}e=O.call(arguments,2);b5=function(){return b7.apply(b6||this,e.concat(O.call(arguments)))};b5.guid=b7.guid=b7.guid||bH.guid++;return b5},now:function(){return +(new Date())},support:C});bH.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(b5,e){ab["[object "+e+"]"]=e.toLowerCase()});function ac(b5){var i="length" in b5&&b5.length,e=bH.type(b5);if(e==="function"||bH.isWindow(b5)){return false}if(b5.nodeType===1&&i){return true}return e==="array"||i===0||typeof i==="number"&&i>0&&(i-1) in b5}var m=
/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
(function(dd){var cx,dg,cm,cG,cJ,ch,cV,df,dl,cH,cW,cY,cB,cn,c7,c2,de,cd,cE,c9="sizzle"+1*new Date(),cI=dd.document,dh=0,c3=0,b8=cz(),c8=cz(),cF=cz(),cD=function(i,e){if(i===e){cW=true}return 0},cP=1<<31,cN=({}).hasOwnProperty,db=[],dc=db.pop,cL=db.push,b6=db.push,cl=db.slice,cc=function(dp,dn){var dm=0,e=dp.length;for(;dm<e;dm++){if(dp[dm]===dn){return dm}}return -1},b7="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",co="[\\x20\\t\\r\\n\\f]",b5="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",cK=b5.replace("w","w#"),c5="\\["+co+"*("+b5+")(?:"+co+"*([*^$|!~]?=)"+co+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+cK+"))|)"+co+"*\\]",cj=":("+b5+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+c5+")*)|.*)\\)|)",ct=new RegExp(co+"+","g"),cq=new RegExp("^"+co+"+|((?:^|[^\\\\])(?:\\\\.)*)"+co+"+$","g"),cu=new RegExp("^"+co+"*,"+co+"*"),cA=new RegExp("^"+co+"*([>+~]|"+co+")"+co+"*"),cs=new RegExp("="+co+"*([^\\]'\"]*?)"+co+"*\\]","g"),cR=new RegExp(cj),cT=new RegExp("^"+cK+"$"),c1={ID:new RegExp("^#("+b5+")"),CLASS:new RegExp("^\\.("+b5+")"),TAG:new RegExp("^("+b5.replace("w","w*")+")"),ATTR:new RegExp("^"+c5),PSEUDO:new RegExp("^"+cj),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+co+"*(even|odd|(([+-]|)(\\d*)n|)"+co+"*(?:([+-]|)"+co+"*(\\d+)|))"+co+"*\\)|)","i"),bool:new RegExp("^(?:"+b7+")$","i"),needsContext:new RegExp("^"+co+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+co+"*((?:-\\d)?\\d*)"+co+"*\\)|)(?=[^-]|$)","i")},cb=/^(?:input|select|textarea|button)$/i,ck=/^h\d$/i,cO=/^[^{]+\{\s*\[native \w/,cQ=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,c0=/[+~]/,cM=/'|\\/g,cr=new RegExp("\\\\([\\da-f]{1,6}"+co+"?|("+co+")|.)","ig"),c4=function(e,dn,i){var dm="0x"+dn-65536;
return dm!==dm||i?dn:dm<0?String.fromCharCode(dm+65536):String.fromCharCode(dm>>10|55296,dm&1023|56320)},dk=function(){cY()};try{b6.apply((db=cl.call(cI.childNodes)),cI.childNodes);db[cI.childNodes.length].nodeType}catch(cC){b6={apply:db.length?function(i,e){cL.apply(i,cl.call(e))}:function(dp,dn){var e=dp.length,dm=0;while((dp[e++]=dn[dm++])){}dp.length=e-1}}}function cv(du,dm,dy,dA){var dz,dr,ds,dw,dx,dq,dp,e,dn,dv;if((dm?dm.ownerDocument||dm:cI)!==cB){cY(dm)}dm=dm||cB;dy=dy||[];dw=dm.nodeType;if(typeof du!=="string"||!du||dw!==1&&dw!==9&&dw!==11){return dy}if(!dA&&c7){if(dw!==11&&(dz=cQ.exec(du))){if((ds=dz[1])){if(dw===9){dr=dm.getElementById(ds);if(dr&&dr.parentNode){if(dr.id===ds){dy.push(dr);return dy}}else{return dy}}else{if(dm.ownerDocument&&(dr=dm.ownerDocument.getElementById(ds))&&cE(dm,dr)&&dr.id===ds){dy.push(dr);return dy}}}else{if(dz[2]){b6.apply(dy,dm.getElementsByTagName(du));return dy}else{if((ds=dz[3])&&dg.getElementsByClassName){b6.apply(dy,dm.getElementsByClassName(ds));return dy}}}}if(dg.qsa&&(!c2||!c2.test(du))){e=dp=c9;dn=dm;dv=dw!==1&&du;if(dw===1&&dm.nodeName.toLowerCase()!=="object"){dq=ch(du);if((dp=dm.getAttribute("id"))){e=dp.replace(cM,"\\$&")}else{dm.setAttribute("id",e)}e="[id='"+e+"'] ";dx=dq.length;while(dx--){dq[dx]=e+cg(dq[dx])}dn=c0.test(du)&&cS(dm.parentNode)||dm;dv=dq.join(",")}if(dv){try{b6.apply(dy,dn.querySelectorAll(dv));return dy}catch(dt){}finally{if(!dp){dm.removeAttribute("id")}}}}}return df(du.replace(cq,"$1"),dm,dy,dA)}function cz(){var i=[];function e(dm,dn){if(i.push(dm+" ")>cm.cacheLength){delete e[i.shift()]}return(e[dm+" "]=dn)}return e}function ci(e){e[c9]=true;return e}function ce(i){var dn=cB.createElement("div");try{return !!i(dn)}catch(dm){return false}finally{if(dn.parentNode){dn.parentNode.removeChild(dn)}dn=null}}function di(dm,dp){var e=dm.split("|"),dn=dm.length;while(dn--){cm.attrHandle[e[dn]]=dp}}function b9(i,e){var dn=e&&i,dm=dn&&i.nodeType===1&&e.nodeType===1&&(~e.sourceIndex||cP)-(~i.sourceIndex||cP);
if(dm){return dm}if(dn){while((dn=dn.nextSibling)){if(dn===e){return -1}}}return i?1:-1}function cw(e){return function(dm){var i=dm.nodeName.toLowerCase();return i==="input"&&dm.type===e}}function ca(e){return function(dm){var i=dm.nodeName.toLowerCase();return(i==="input"||i==="button")&&dm.type===e}}function c6(e){return ci(function(i){i=+i;return ci(function(dm,dr){var dp,dn=e([],dm.length,i),dq=dn.length;while(dq--){if(dm[(dp=dn[dq])]){dm[dp]=!(dr[dp]=dm[dp])}}})})}function cS(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}dg=cv.support={};cJ=cv.isXML=function(e){var i=e&&(e.ownerDocument||e).documentElement;return i?i.nodeName!=="HTML":false};cY=cv.setDocument=function(dm){var e,i,dn=dm?dm.ownerDocument||dm:cI;if(dn===cB||dn.nodeType!==9||!dn.documentElement){return cB}cB=dn;cn=dn.documentElement;i=dn.defaultView;if(i&&i!==i.top){if(i.addEventListener){i.addEventListener("unload",dk,false)}else{if(i.attachEvent){i.attachEvent("onunload",dk)}}}c7=!cJ(dn);dg.attributes=ce(function(dp){dp.className="i";return !dp.getAttribute("className")});dg.getElementsByTagName=ce(function(dp){dp.appendChild(dn.createComment(""));return !dp.getElementsByTagName("*").length});dg.getElementsByClassName=cO.test(dn.getElementsByClassName);dg.getById=ce(function(dp){cn.appendChild(dp).id=c9;return !dn.getElementsByName||!dn.getElementsByName(c9).length});if(dg.getById){cm.find.ID=function(dr,dq){if(typeof dq.getElementById!=="undefined"&&c7){var dp=dq.getElementById(dr);return dp&&dp.parentNode?[dp]:[]}};cm.filter.ID=function(dq){var dp=dq.replace(cr,c4);return function(dr){return dr.getAttribute("id")===dp}}}else{delete cm.find.ID;cm.filter.ID=function(dq){var dp=dq.replace(cr,c4);return function(ds){var dr=typeof ds.getAttributeNode!=="undefined"&&ds.getAttributeNode("id");return dr&&dr.value===dp}}}cm.find.TAG=dg.getElementsByTagName?function(dp,dq){if(typeof dq.getElementsByTagName!=="undefined"){return dq.getElementsByTagName(dp)}else{if(dg.qsa){return dq.querySelectorAll(dp)
}}}:function(dp,dt){var du,ds=[],dr=0,dq=dt.getElementsByTagName(dp);if(dp==="*"){while((du=dq[dr++])){if(du.nodeType===1){ds.push(du)}}return ds}return dq};cm.find.CLASS=dg.getElementsByClassName&&function(dq,dp){if(c7){return dp.getElementsByClassName(dq)}};de=[];c2=[];if((dg.qsa=cO.test(dn.querySelectorAll))){ce(function(dp){cn.appendChild(dp).innerHTML="<a id='"+c9+"'></a><select id='"+c9+"-\f]' msallowcapture=''><option selected=''></option></select>";if(dp.querySelectorAll("[msallowcapture^='']").length){c2.push("[*^$]="+co+"*(?:''|\"\")")}if(!dp.querySelectorAll("[selected]").length){c2.push("\\["+co+"*(?:value|"+b7+")")}if(!dp.querySelectorAll("[id~="+c9+"-]").length){c2.push("~=")}if(!dp.querySelectorAll(":checked").length){c2.push(":checked")}if(!dp.querySelectorAll("a#"+c9+"+*").length){c2.push(".#.+[+~]")}});ce(function(dq){var dp=dn.createElement("input");dp.setAttribute("type","hidden");dq.appendChild(dp).setAttribute("name","D");if(dq.querySelectorAll("[name=d]").length){c2.push("name"+co+"*[*^$|!~]?=")}if(!dq.querySelectorAll(":enabled").length){c2.push(":enabled",":disabled")}dq.querySelectorAll("*,:x");c2.push(",.*:")})}if((dg.matchesSelector=cO.test((cd=cn.matches||cn.webkitMatchesSelector||cn.mozMatchesSelector||cn.oMatchesSelector||cn.msMatchesSelector)))){ce(function(dp){dg.disconnectedMatch=cd.call(dp,"div");cd.call(dp,"[s!='']:x");de.push("!=",cj)})}c2=c2.length&&new RegExp(c2.join("|"));de=de.length&&new RegExp(de.join("|"));e=cO.test(cn.compareDocumentPosition);cE=e||cO.test(cn.contains)?function(dq,dp){var ds=dq.nodeType===9?dq.documentElement:dq,dr=dp&&dp.parentNode;return dq===dr||!!(dr&&dr.nodeType===1&&(ds.contains?ds.contains(dr):dq.compareDocumentPosition&&dq.compareDocumentPosition(dr)&16))}:function(dq,dp){if(dp){while((dp=dp.parentNode)){if(dp===dq){return true}}}return false};cD=e?function(dq,dp){if(dq===dp){cW=true;return 0}var dr=!dq.compareDocumentPosition-!dp.compareDocumentPosition;if(dr){return dr}dr=(dq.ownerDocument||dq)===(dp.ownerDocument||dp)?dq.compareDocumentPosition(dp):1;
if(dr&1||(!dg.sortDetached&&dp.compareDocumentPosition(dq)===dr)){if(dq===dn||dq.ownerDocument===cI&&cE(cI,dq)){return -1}if(dp===dn||dp.ownerDocument===cI&&cE(cI,dp)){return 1}return cH?(cc(cH,dq)-cc(cH,dp)):0}return dr&4?-1:1}:function(dq,dp){if(dq===dp){cW=true;return 0}var dw,dt=0,dv=dq.parentNode,ds=dp.parentNode,dr=[dq],du=[dp];if(!dv||!ds){return dq===dn?-1:dp===dn?1:dv?-1:ds?1:cH?(cc(cH,dq)-cc(cH,dp)):0}else{if(dv===ds){return b9(dq,dp)}}dw=dq;while((dw=dw.parentNode)){dr.unshift(dw)}dw=dp;while((dw=dw.parentNode)){du.unshift(dw)}while(dr[dt]===du[dt]){dt++}return dt?b9(dr[dt],du[dt]):dr[dt]===cI?-1:du[dt]===cI?1:0};return dn};cv.matches=function(i,e){return cv(i,null,null,e)};cv.matchesSelector=function(dm,dp){if((dm.ownerDocument||dm)!==cB){cY(dm)}dp=dp.replace(cs,"='$1']");if(dg.matchesSelector&&c7&&(!de||!de.test(dp))&&(!c2||!c2.test(dp))){try{var i=cd.call(dm,dp);if(i||dg.disconnectedMatch||dm.document&&dm.document.nodeType!==11){return i}}catch(dn){}}return cv(dp,cB,null,[dm]).length>0};cv.contains=function(e,i){if((e.ownerDocument||e)!==cB){cY(e)}return cE(e,i)};cv.attr=function(dm,e){if((dm.ownerDocument||dm)!==cB){cY(dm)}var i=cm.attrHandle[e.toLowerCase()],dn=i&&cN.call(cm.attrHandle,e.toLowerCase())?i(dm,e,!c7):undefined;return dn!==undefined?dn:dg.attributes||!c7?dm.getAttribute(e):(dn=dm.getAttributeNode(e))&&dn.specified?dn.value:null};cv.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};cv.uniqueSort=function(dn){var dp,dq=[],e=0,dm=0;cW=!dg.detectDuplicates;cH=!dg.sortStable&&dn.slice(0);dn.sort(cD);if(cW){while((dp=dn[dm++])){if(dp===dn[dm]){e=dq.push(dm)}}while(e--){dn.splice(dq[e],1)}}cH=null;return dn};cG=cv.getText=function(dq){var dp,dm="",dn=0,e=dq.nodeType;if(!e){while((dp=dq[dn++])){dm+=cG(dp)}}else{if(e===1||e===9||e===11){if(typeof dq.textContent==="string"){return dq.textContent}else{for(dq=dq.firstChild;dq;dq=dq.nextSibling){dm+=cG(dq)}}}else{if(e===3||e===4){return dq.nodeValue}}}return dm};cm=cv.selectors={cacheLength:50,createPseudo:ci,match:c1,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(cr,c4);
e[3]=(e[3]||e[4]||e[5]||"").replace(cr,c4);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){cv.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+((e[7]+e[8])||e[3]==="odd")}else{if(e[3]){cv.error(e[0])}}return e},PSEUDO:function(i){var e,dm=!i[6]&&i[2];if(c1.CHILD.test(i[0])){return null}if(i[3]){i[2]=i[4]||i[5]||""}else{if(dm&&cR.test(dm)&&(e=ch(dm,true))&&(e=dm.indexOf(")",dm.length-e)-dm.length)){i[0]=i[0].slice(0,e);i[2]=dm.slice(0,e)}}return i.slice(0,3)}},filter:{TAG:function(i){var e=i.replace(cr,c4).toLowerCase();return i==="*"?function(){return true}:function(dm){return dm.nodeName&&dm.nodeName.toLowerCase()===e}},CLASS:function(e){var i=b8[e+" "];return i||(i=new RegExp("(^|"+co+")"+e+"("+co+"|$)"))&&b8(e,function(dm){return i.test(typeof dm.className==="string"&&dm.className||typeof dm.getAttribute!=="undefined"&&dm.getAttribute("class")||"")})},ATTR:function(dm,i,e){return function(dp){var dn=cv.attr(dp,dm);if(dn==null){return i==="!="}if(!i){return true}dn+="";return i==="="?dn===e:i==="!="?dn!==e:i==="^="?e&&dn.indexOf(e)===0:i==="*="?e&&dn.indexOf(e)>-1:i==="$="?e&&dn.slice(-e.length)===e:i==="~="?(" "+dn.replace(ct," ")+" ").indexOf(e)>-1:i==="|="?dn===e||dn.slice(0,e.length+1)===e+"-":false}},CHILD:function(i,dp,dn,dq,dm){var ds=i.slice(0,3)!=="nth",e=i.slice(-4)!=="last",dr=dp==="of-type";return dq===1&&dm===0?function(dt){return !!dt.parentNode}:function(dz,dx,dC){var dt,dF,dA,dE,dB,dw,dy=ds!==e?"nextSibling":"previousSibling",dD=dz.parentNode,dv=dr&&dz.nodeName.toLowerCase(),du=!dC&&!dr;if(dD){if(ds){while(dy){dA=dz;while((dA=dA[dy])){if(dr?dA.nodeName.toLowerCase()===dv:dA.nodeType===1){return false}}dw=dy=i==="only"&&!dw&&"nextSibling"}return true}dw=[e?dD.firstChild:dD.lastChild];if(e&&du){dF=dD[c9]||(dD[c9]={});dt=dF[i]||[];dB=dt[0]===dh&&dt[1];dE=dt[0]===dh&&dt[2];dA=dB&&dD.childNodes[dB];while((dA=++dB&&dA&&dA[dy]||(dE=dB=0)||dw.pop())){if(dA.nodeType===1&&++dE&&dA===dz){dF[i]=[dh,dB,dE];
break}}}else{if(du&&(dt=(dz[c9]||(dz[c9]={}))[i])&&dt[0]===dh){dE=dt[1]}else{while((dA=++dB&&dA&&dA[dy]||(dE=dB=0)||dw.pop())){if((dr?dA.nodeName.toLowerCase()===dv:dA.nodeType===1)&&++dE){if(du){(dA[c9]||(dA[c9]={}))[i]=[dh,dE]}if(dA===dz){break}}}}}dE-=dm;return dE===dq||(dE%dq===0&&dE/dq>=0)}}},PSEUDO:function(dn,dm){var e,i=cm.pseudos[dn]||cm.setFilters[dn.toLowerCase()]||cv.error("unsupported pseudo: "+dn);if(i[c9]){return i(dm)}if(i.length>1){e=[dn,dn,"",dm];return cm.setFilters.hasOwnProperty(dn.toLowerCase())?ci(function(dr,dt){var dq,dp=i(dr,dm),ds=dp.length;while(ds--){dq=cc(dr,dp[ds]);dr[dq]=!(dt[dq]=dp[ds])}}):function(dp){return i(dp,0,e)}}return i}},pseudos:{not:ci(function(e){var i=[],dm=[],dn=cV(e.replace(cq,"$1"));return dn[c9]?ci(function(dq,dv,dt,dr){var du,dp=dn(dq,null,dr,[]),ds=dq.length;while(ds--){if((du=dp[ds])){dq[ds]=!(dv[ds]=du)}}}):function(dr,dq,dp){i[0]=dr;dn(i,null,dp,dm);i[0]=null;return !dm.pop()}}),has:ci(function(e){return function(i){return cv(e,i).length>0}}),contains:ci(function(e){e=e.replace(cr,c4);return function(i){return(i.textContent||i.innerText||cG(i)).indexOf(e)>-1}}),lang:ci(function(e){if(!cT.test(e||"")){cv.error("unsupported lang: "+e)}e=e.replace(cr,c4).toLowerCase();return function(dm){var i;do{if((i=c7?dm.lang:dm.getAttribute("xml:lang")||dm.getAttribute("lang"))){i=i.toLowerCase();return i===e||i.indexOf(e+"-")===0}}while((dm=dm.parentNode)&&dm.nodeType===1);return false}}),target:function(e){var i=dd.location&&dd.location.hash;return i&&i.slice(1)===e.id},root:function(e){return e===cn},focus:function(e){return e===cB.activeElement&&(!cB.hasFocus||cB.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var i=e.nodeName.toLowerCase();return(i==="input"&&!!e.checked)||(i==="option"&&!!e.selected)},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;
e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return !cm.pseudos.empty(e)},header:function(e){return ck.test(e.nodeName)},input:function(e){return cb.test(e.nodeName)},button:function(i){var e=i.nodeName.toLowerCase();return e==="input"&&i.type==="button"||e==="button"},text:function(i){var e;return i.nodeName.toLowerCase()==="input"&&i.type==="text"&&((e=i.getAttribute("type"))==null||e.toLowerCase()==="text")},first:c6(function(){return[0]}),last:c6(function(e,i){return[i-1]}),eq:c6(function(e,dm,i){return[i<0?i+dm:i]}),even:c6(function(e,dn){var dm=0;for(;dm<dn;dm+=2){e.push(dm)}return e}),odd:c6(function(e,dn){var dm=1;for(;dm<dn;dm+=2){e.push(dm)}return e}),lt:c6(function(e,dp,dn){var dm=dn<0?dn+dp:dn;for(;--dm>=0;){e.push(dm)}return e}),gt:c6(function(e,dp,dn){var dm=dn<0?dn+dp:dn;for(;++dm<dp;){e.push(dm)}return e})}};cm.pseudos.nth=cm.pseudos.eq;for(cx in {radio:true,checkbox:true,file:true,password:true,image:true}){cm.pseudos[cx]=cw(cx)}for(cx in {submit:true,reset:true}){cm.pseudos[cx]=ca(cx)}function cU(){}cU.prototype=cm.filters=cm.pseudos;cm.setFilters=new cU();ch=cv.tokenize=function(dp,du){var i,dq,ds,dt,dr,dm,e,dn=c8[dp+" "];if(dn){return du?0:dn.slice(0)}dr=dp;dm=[];e=cm.preFilter;while(dr){if(!i||(dq=cu.exec(dr))){if(dq){dr=dr.slice(dq[0].length)||dr}dm.push((ds=[]))}i=false;if((dq=cA.exec(dr))){i=dq.shift();ds.push({value:i,type:dq[0].replace(cq," ")});dr=dr.slice(i.length)}for(dt in cm.filter){if((dq=c1[dt].exec(dr))&&(!e[dt]||(dq=e[dt](dq)))){i=dq.shift();ds.push({value:i,type:dt,matches:dq});dr=dr.slice(i.length)}}if(!i){break}}return du?dr.length:dr?cv.error(dp):c8(dp,dm).slice(0)};function cg(dp){var dn=0,dm=dp.length,e="";for(;dn<dm;dn++){e+=dp[dn].value}return e}function cp(dp,dm,dn){var e=dm.dir,dq=dn&&e==="parentNode",i=c3++;return dm.first?function(dt,ds,dr){while((dt=dt[e])){if(dt.nodeType===1||dq){return dp(dt,ds,dr)}}}:function(dv,dt,ds){var dw,du,dr=[dh,i];if(ds){while((dv=dv[e])){if(dv.nodeType===1||dq){if(dp(dv,dt,ds)){return true
}}}}else{while((dv=dv[e])){if(dv.nodeType===1||dq){du=dv[c9]||(dv[c9]={});if((dw=du[e])&&dw[0]===dh&&dw[1]===i){return(dr[2]=dw[2])}else{du[e]=dr;if((dr[2]=dp(dv,dt,ds))){return true}}}}}}}function dj(e){return e.length>1?function(dq,dp,dm){var dn=e.length;while(dn--){if(!e[dn](dq,dp,dm)){return false}}return true}:e[0]}function cy(dm,dq,dp){var dn=0,e=dq.length;for(;dn<e;dn++){cv(dm,dq[dn],dp)}return dp}function cZ(e,dm,dn,dp,ds){var dq,dv=[],dr=0,dt=e.length,du=dm!=null;for(;dr<dt;dr++){if((dq=e[dr])){if(!dn||dn(dq,dp,ds)){dv.push(dq);if(du){dm.push(dr)}}}}return dv}function cf(dm,i,dp,dn,dq,e){if(dn&&!dn[c9]){dn=cf(dn)}if(dq&&!dq[c9]){dq=cf(dq,e)}return ci(function(dB,dy,dt,dA){var dD,dz,dv,du=[],dC=[],ds=dy.length,dr=dB||cy(i||"*",dt.nodeType?[dt]:dt,[]),dw=dm&&(dB||!i)?cZ(dr,du,dm,dt,dA):dr,dx=dp?dq||(dB?dm:ds||dn)?[]:dy:dw;if(dp){dp(dw,dx,dt,dA)}if(dn){dD=cZ(dx,dC);dn(dD,[],dt,dA);dz=dD.length;while(dz--){if((dv=dD[dz])){dx[dC[dz]]=!(dw[dC[dz]]=dv)}}}if(dB){if(dq||dm){if(dq){dD=[];dz=dx.length;while(dz--){if((dv=dx[dz])){dD.push((dw[dz]=dv))}}dq(null,(dx=[]),dD,dA)}dz=dx.length;while(dz--){if((dv=dx[dz])&&(dD=dq?cc(dB,dv):du[dz])>-1){dB[dD]=!(dy[dD]=dv)}}}}else{dx=cZ(dx===dy?dx.splice(ds,dx.length):dx);if(dq){dq(null,dy,dx,dA)}else{b6.apply(dy,dx)}}})}function da(ds){var dm,dq,dn,dr=ds.length,dv=cm.relative[ds[0].type],dw=dv||cm.relative[" "],dp=dv?1:0,dt=cp(function(i){return i===dm},dw,true),du=cp(function(i){return cc(dm,i)>-1},dw,true),e=[function(dz,dy,dx){var i=(!dv&&(dx||dy!==dl))||((dm=dy).nodeType?dt(dz,dy,dx):du(dz,dy,dx));dm=null;return i}];for(;dp<dr;dp++){if((dq=cm.relative[ds[dp].type])){e=[cp(dj(e),dq)]}else{dq=cm.filter[ds[dp].type].apply(null,ds[dp].matches);if(dq[c9]){dn=++dp;for(;dn<dr;dn++){if(cm.relative[ds[dn].type]){break}}return cf(dp>1&&dj(e),dp>1&&cg(ds.slice(0,dp-1).concat({value:ds[dp-2].type===" "?"*":""})).replace(cq,"$1"),dq,dp<dn&&da(ds.slice(dp,dn)),dn<dr&&da((ds=ds.slice(dn))),dn<dr&&cg(ds))}e.push(dq)}}return dj(e)}function cX(dn,dm){var e=dm.length>0,dp=dn.length>0,i=function(dz,dt,dy,dx,dC){var du,dv,dA,dE=0,dw="0",dq=dz&&[],dF=[],dD=dl,ds=dz||dp&&cm.find.TAG("*",dC),dr=(dh+=dD==null?1:Math.random()||0.1),dB=ds.length;
if(dC){dl=dt!==cB&&dt}for(;dw!==dB&&(du=ds[dw])!=null;dw++){if(dp&&du){dv=0;while((dA=dn[dv++])){if(dA(du,dt,dy)){dx.push(du);break}}if(dC){dh=dr}}if(e){if((du=!dA&&du)){dE--}if(dz){dq.push(du)}}}dE+=dw;if(e&&dw!==dE){dv=0;while((dA=dm[dv++])){dA(dq,dF,dt,dy)}if(dz){if(dE>0){while(dw--){if(!(dq[dw]||dF[dw])){dF[dw]=dc.call(dx)}}}dF=cZ(dF)}b6.apply(dx,dF);if(dC&&!dz&&dF.length>0&&(dE+dm.length)>1){cv.uniqueSort(dx)}}if(dC){dh=dr;dl=dD}return dq};return e?ci(i):i}cV=cv.compile=function(e,dn){var dp,dm=[],dr=[],dq=cF[e+" "];if(!dq){if(!dn){dn=ch(e)}dp=dn.length;while(dp--){dq=da(dn[dp]);if(dq[c9]){dm.push(dq)}else{dr.push(dq)}}dq=cF(e,cX(dr,dm));dq.selector=e}return dq};df=cv.select=function(dn,e,dp,ds){var dq,dv,dm,dw,dt,du=typeof dn==="function"&&dn,dr=!ds&&ch((dn=du.selector||dn));dp=dp||[];if(dr.length===1){dv=dr[0]=dr[0].slice(0);if(dv.length>2&&(dm=dv[0]).type==="ID"&&dg.getById&&e.nodeType===9&&c7&&cm.relative[dv[1].type]){e=(cm.find.ID(dm.matches[0].replace(cr,c4),e)||[])[0];if(!e){return dp}else{if(du){e=e.parentNode}}dn=dn.slice(dv.shift().value.length)}dq=c1.needsContext.test(dn)?0:dv.length;while(dq--){dm=dv[dq];if(cm.relative[(dw=dm.type)]){break}if((dt=cm.find[dw])){if((ds=dt(dm.matches[0].replace(cr,c4),c0.test(dv[0].type)&&cS(e.parentNode)||e))){dv.splice(dq,1);dn=ds.length&&cg(dv);if(!dn){b6.apply(dp,ds);return dp}break}}}}(du||cV(dn,dr))(ds,e,!c7,dp,c0.test(dn)&&cS(e.parentNode)||e);return dp};dg.sortStable=c9.split("").sort(cD).join("")===c9;dg.detectDuplicates=!!cW;cY();dg.sortDetached=ce(function(e){return e.compareDocumentPosition(cB.createElement("div"))&1});if(!ce(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){di("type|href|height|width",function(i,e,dm){if(!dm){return i.getAttribute(e,e.toLowerCase()==="type"?1:2)}})}if(!dg.attributes||!ce(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){di("value",function(i,e,dm){if(!dm&&i.nodeName.toLowerCase()==="input"){return i.defaultValue
}})}if(!ce(function(e){return e.getAttribute("disabled")==null})){di(b7,function(i,e,dn){var dm;if(!dn){return i[e]===true?e.toLowerCase():(dm=i.getAttributeNode(e))&&dm.specified?dm.value:null}})}return cv})(a4);bH.find=m;bH.expr=m.selectors;bH.expr[":"]=bH.expr.pseudos;bH.unique=m.uniqueSort;bH.text=m.getText;bH.isXMLDoc=m.isXML;bH.contains=m.contains;var z=bH.expr.match.needsContext;var a=(/^<(\w+)\s*\/?>(?:<\/\1>|)$/);var aK=/^.[^:#\[\.,]*$/;function aQ(b5,e,i){if(bH.isFunction(e)){return bH.grep(b5,function(b7,b6){return !!e.call(b7,b6,b7)!==i})}if(e.nodeType){return bH.grep(b5,function(b6){return(b6===e)!==i})}if(typeof e==="string"){if(aK.test(e)){return bH.filter(e,b5,i)}e=bH.filter(e,b5)}return bH.grep(b5,function(b6){return(bH.inArray(b6,e)>=0)!==i})}bH.filter=function(b6,e,b5){var i=e[0];if(b5){b6=":not("+b6+")"}return e.length===1&&i.nodeType===1?bH.find.matchesSelector(i,b6)?[i]:[]:bH.find.matches(b6,bH.grep(e,function(b7){return b7.nodeType===1}))};bH.fn.extend({find:function(b5){var b8,b7=[],b6=this,e=b6.length;if(typeof b5!=="string"){return this.pushStack(bH(b5).filter(function(){for(b8=0;b8<e;b8++){if(bH.contains(b6[b8],this)){return true}}}))}for(b8=0;b8<e;b8++){bH.find(b5,b6[b8],b7)}b7=this.pushStack(e>1?bH.unique(b7):b7);b7.selector=this.selector?this.selector+" "+b5:b5;return b7},filter:function(e){return this.pushStack(aQ(this,e||[],false))},not:function(e){return this.pushStack(aQ(this,e||[],true))},is:function(e){return !!aQ(this,typeof e==="string"&&z.test(e)?bH(e):e||[],false).length}});var y,n=a4.document,bs=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,bU=bH.fn.init=function(e,b5){var i,b6;if(!e){return this}if(typeof e==="string"){if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){i=[null,e,null]}else{i=bs.exec(e)}if(i&&(i[1]||!b5)){if(i[1]){b5=b5 instanceof bH?b5[0]:b5;bH.merge(this,bH.parseHTML(i[1],b5&&b5.nodeType?b5.ownerDocument||b5:n,true));if(a.test(i[1])&&bH.isPlainObject(b5)){for(i in b5){if(bH.isFunction(this[i])){this[i](b5[i])
}else{this.attr(i,b5[i])}}}return this}else{b6=n.getElementById(i[2]);if(b6&&b6.parentNode){if(b6.id!==i[2]){return y.find(e)}this.length=1;this[0]=b6}this.context=n;this.selector=e;return this}}else{if(!b5||b5.jquery){return(b5||y).find(e)}else{return this.constructor(b5).find(e)}}}else{if(e.nodeType){this.context=this[0]=e;this.length=1;return this}else{if(bH.isFunction(e)){return typeof y.ready!=="undefined"?y.ready(e):e(bH)}}}if(e.selector!==undefined){this.selector=e.selector;this.context=e.context}return bH.makeArray(e,this)};bU.prototype=bH.fn;y=bH(n);var bu=/^(?:parents|prev(?:Until|All))/,by={children:true,contents:true,next:true,prev:true};bH.extend({dir:function(b5,i,b7){var e=[],b6=b5[i];while(b6&&b6.nodeType!==9&&(b7===undefined||b6.nodeType!==1||!bH(b6).is(b7))){if(b6.nodeType===1){e.push(b6)}b6=b6[i]}return e},sibling:function(b5,i){var e=[];for(;b5;b5=b5.nextSibling){if(b5.nodeType===1&&b5!==i){e.push(b5)}}return e}});bH.fn.extend({has:function(b7){var b6,b5=bH(b7,this),e=b5.length;return this.filter(function(){for(b6=0;b6<e;b6++){if(bH.contains(this,b5[b6])){return true}}})},closest:function(b8,b7){var b9,b6=0,b5=this.length,e=[],ca=z.test(b8)||typeof b8!=="string"?bH(b8,b7||this.context):0;for(;b6<b5;b6++){for(b9=this[b6];b9&&b9!==b7;b9=b9.parentNode){if(b9.nodeType<11&&(ca?ca.index(b9)>-1:b9.nodeType===1&&bH.find.matchesSelector(b9,b8))){e.push(b9);break}}}return this.pushStack(e.length>1?bH.unique(e):e)},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1}if(typeof e==="string"){return bH.inArray(this[0],bH(e))}return bH.inArray(e.jquery?e[0]:e,this)},add:function(e,i){return this.pushStack(bH.unique(bH.merge(this.get(),bH(e,i))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function aX(i,e){do{i=i[e]}while(i&&i.nodeType!==1);return i}bH.each({parent:function(i){var e=i.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return bH.dir(e,"parentNode")
},parentsUntil:function(b5,e,b6){return bH.dir(b5,"parentNode",b6)},next:function(e){return aX(e,"nextSibling")},prev:function(e){return aX(e,"previousSibling")},nextAll:function(e){return bH.dir(e,"nextSibling")},prevAll:function(e){return bH.dir(e,"previousSibling")},nextUntil:function(b5,e,b6){return bH.dir(b5,"nextSibling",b6)},prevUntil:function(b5,e,b6){return bH.dir(b5,"previousSibling",b6)},siblings:function(e){return bH.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return bH.sibling(e.firstChild)},contents:function(e){return bH.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:bH.merge([],e.childNodes)}},function(e,i){bH.fn[e]=function(b7,b5){var b6=bH.map(this,i,b7);if(e.slice(-5)!=="Until"){b5=b7}if(b5&&typeof b5==="string"){b6=bH.filter(b5,b6)}if(this.length>1){if(!by[e]){b6=bH.unique(b6)}if(bu.test(e)){b6=b6.reverse()}}return this.pushStack(b6)}});var aE=(/\S+/g);var b1={};function ae(i){var e=b1[i]={};bH.each(i.match(aE)||[],function(b6,b5){e[b5]=true});return e}bH.Callbacks=function(cd){cd=typeof cd==="string"?(b1[cd]||ae(cd)):bH.extend({},cd);var b7,b6,e,b8,b9,b5,ca=[],cb=!cd.once&&[],i=function(ce){b6=cd.memory&&ce;e=true;b9=b5||0;b5=0;b8=ca.length;b7=true;for(;ca&&b9<b8;b9++){if(ca[b9].apply(ce[0],ce[1])===false&&cd.stopOnFalse){b6=false;break}}b7=false;if(ca){if(cb){if(cb.length){i(cb.shift())}}else{if(b6){ca=[]}else{cc.disable()}}}},cc={add:function(){if(ca){var cf=ca.length;(function ce(cg){bH.each(cg,function(ci,ch){var cj=bH.type(ch);if(cj==="function"){if(!cd.unique||!cc.has(ch)){ca.push(ch)}}else{if(ch&&ch.length&&cj!=="string"){ce(ch)}}})})(arguments);if(b7){b8=ca.length}else{if(b6){b5=cf;i(b6)}}}return this},remove:function(){if(ca){bH.each(arguments,function(cg,ce){var cf;while((cf=bH.inArray(ce,ca,cf))>-1){ca.splice(cf,1);if(b7){if(cf<=b8){b8--}if(cf<=b9){b9--}}}})}return this},has:function(ce){return ce?bH.inArray(ce,ca)>-1:!!(ca&&ca.length)},empty:function(){ca=[];b8=0;return this},disable:function(){ca=cb=b6=undefined;
return this},disabled:function(){return !ca},lock:function(){cb=undefined;if(!b6){cc.disable()}return this},locked:function(){return !cb},fireWith:function(cf,ce){if(ca&&(!e||cb)){ce=ce||[];ce=[cf,ce.slice?ce.slice():ce];if(b7){cb.push(ce)}else{i(ce)}}return this},fire:function(){cc.fireWith(this,arguments);return this},fired:function(){return !!e}};return cc};bH.extend({Deferred:function(b5){var i=[["resolve","done",bH.Callbacks("once memory"),"resolved"],["reject","fail",bH.Callbacks("once memory"),"rejected"],["notify","progress",bH.Callbacks("memory")]],b6="pending",b7={state:function(){return b6},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var b8=arguments;return bH.Deferred(function(b9){bH.each(i,function(cb,ca){var cc=bH.isFunction(b8[cb])&&b8[cb];e[ca[1]](function(){var cd=cc&&cc.apply(this,arguments);if(cd&&bH.isFunction(cd.promise)){cd.promise().done(b9.resolve).fail(b9.reject).progress(b9.notify)}else{b9[ca[0]+"With"](this===b7?b9.promise():this,cc?[cd]:arguments)}})});b8=null}).promise()},promise:function(b8){return b8!=null?bH.extend(b8,b7):b7}},e={};b7.pipe=b7.then;bH.each(i,function(b9,b8){var cb=b8[2],ca=b8[3];b7[b8[1]]=cb.add;if(ca){cb.add(function(){b6=ca},i[b9^1][2].disable,i[2][2].lock)}e[b8[0]]=function(){e[b8[0]+"With"](this===e?b7:this,arguments);return this};e[b8[0]+"With"]=cb.fireWith});b7.promise(e);if(b5){b5.call(e,e)}return e},when:function(b8){var b6=0,ca=O.call(arguments),e=ca.length,b5=e!==1||(b8&&bH.isFunction(b8.promise))?e:0,cd=b5===1?b8:bH.Deferred(),b7=function(cf,cg,ce){return function(i){cg[cf]=this;ce[cf]=arguments.length>1?O.call(arguments):i;if(ce===cc){cd.notifyWith(cg,ce)}else{if(!(--b5)){cd.resolveWith(cg,ce)}}}},cc,b9,cb;if(e>1){cc=new Array(e);b9=new Array(e);cb=new Array(e);for(;b6<e;b6++){if(ca[b6]&&bH.isFunction(ca[b6].promise)){ca[b6].promise().done(b7(b6,cb,ca)).fail(cd.reject).progress(b7(b6,b9,cc))}else{--b5}}}if(!b5){cd.resolveWith(cb,ca)}return cd.promise()}});var aj;bH.fn.ready=function(e){bH.ready.promise().done(e);
return this};bH.extend({isReady:false,readyWait:1,holdReady:function(e){if(e){bH.readyWait++}else{bH.ready(true)}},ready:function(e){if(e===true?--bH.readyWait:bH.isReady){return}if(!n.body){return setTimeout(bH.ready)}bH.isReady=true;if(e!==true&&--bH.readyWait>0){return}aj.resolveWith(n,[bH]);if(bH.fn.triggerHandler){bH(n).triggerHandler("ready");bH(n).off("ready")}}});function bl(){if(n.addEventListener){n.removeEventListener("DOMContentLoaded",bY,false);a4.removeEventListener("load",bY,false)}else{n.detachEvent("onreadystatechange",bY);a4.detachEvent("onload",bY)}}function bY(){if(n.addEventListener||event.type==="load"||n.readyState==="complete"){bl();bH.ready()}}bH.ready.promise=function(b7){if(!aj){aj=bH.Deferred();if(n.readyState==="complete"){setTimeout(bH.ready)}else{if(n.addEventListener){n.addEventListener("DOMContentLoaded",bY,false);a4.addEventListener("load",bY,false)}else{n.attachEvent("onreadystatechange",bY);a4.attachEvent("onload",bY);var b6=false;try{b6=a4.frameElement==null&&n.documentElement}catch(b5){}if(b6&&b6.doScroll){(function i(){if(!bH.isReady){try{b6.doScroll("left")}catch(b8){return setTimeout(i,50)}bl();bH.ready()}})()}}}}return aj.promise(b7)};var aB=typeof undefined;var bg;for(bg in bH(C)){break}C.ownLast=bg!=="0";C.inlineBlockNeedsLayout=false;bH(function(){var b5,b6,e,i;e=n.getElementsByTagName("body")[0];if(!e||!e.style){return}b6=n.createElement("div");i=n.createElement("div");i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";e.appendChild(i).appendChild(b6);if(typeof b6.style.zoom!==aB){b6.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1";C.inlineBlockNeedsLayout=b5=b6.offsetWidth===3;if(b5){e.style.zoom=1}}e.removeChild(i)});(function(){var b5=n.createElement("div");if(C.deleteExpando==null){C.deleteExpando=true;try{delete b5.test}catch(i){C.deleteExpando=false}}b5=null})();bH.acceptData=function(b5){var i=bH.noData[(b5.nodeName+" ").toLowerCase()],e=+b5.nodeType||1;return e!==1&&e!==9?false:!i||i!==true&&b5.getAttribute("classid")===i
};var bx=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,aP=/([A-Z])/g;function bz(b6,b5,b7){if(b7===undefined&&b6.nodeType===1){var i="data-"+b5.replace(aP,"-$1").toLowerCase();b7=b6.getAttribute(i);if(typeof b7==="string"){try{b7=b7==="true"?true:b7==="false"?false:b7==="null"?null:+b7+""===b7?+b7:bx.test(b7)?bH.parseJSON(b7):b7}catch(b8){}bH.data(b6,b5,b7)}else{b7=undefined}}return b7}function P(i){var e;for(e in i){if(e==="data"&&bH.isEmptyObject(i[e])){continue}if(e!=="toJSON"){return false}}return true}function bb(b6,i,b8,b7){if(!bH.acceptData(b6)){return}var ca,b9,cb=bH.expando,cc=b6.nodeType,e=cc?bH.cache:b6,b5=cc?b6[cb]:b6[cb]&&cb;if((!b5||!e[b5]||(!b7&&!e[b5].data))&&b8===undefined&&typeof i==="string"){return}if(!b5){if(cc){b5=b6[cb]=aO.pop()||bH.guid++}else{b5=cb}}if(!e[b5]){e[b5]=cc?{}:{toJSON:bH.noop}}if(typeof i==="object"||typeof i==="function"){if(b7){e[b5]=bH.extend(e[b5],i)}else{e[b5].data=bH.extend(e[b5].data,i)}}b9=e[b5];if(!b7){if(!b9.data){b9.data={}}b9=b9.data}if(b8!==undefined){b9[bH.camelCase(i)]=b8}if(typeof i==="string"){ca=b9[i];if(ca==null){ca=b9[bH.camelCase(i)]}}else{ca=b9}return ca}function aa(b8,b6,e){if(!bH.acceptData(b8)){return}var ca,b7,b9=b8.nodeType,b5=b9?bH.cache:b8,cb=b9?b8[bH.expando]:bH.expando;if(!b5[cb]){return}if(b6){ca=e?b5[cb]:b5[cb].data;if(ca){if(!bH.isArray(b6)){if(b6 in ca){b6=[b6]}else{b6=bH.camelCase(b6);if(b6 in ca){b6=[b6]}else{b6=b6.split(" ")}}}else{b6=b6.concat(bH.map(b6,bH.camelCase))}b7=b6.length;while(b7--){delete ca[b6[b7]]}if(e?!P(ca):!bH.isEmptyObject(ca)){return}}}if(!e){delete b5[cb].data;if(!P(b5[cb])){return}}if(b9){bH.cleanData([b8],true)}else{if(C.deleteExpando||b5!=b5.window){delete b5[cb]}else{b5[cb]=null}}}bH.extend({cache:{},noData:{"applet ":true,"embed ":true,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){e=e.nodeType?bH.cache[e[bH.expando]]:e[bH.expando];return !!e&&!P(e)},data:function(i,e,b5){return bb(i,e,b5)},removeData:function(i,e){return aa(i,e)},_data:function(i,e,b5){return bb(i,e,b5,true)
},_removeData:function(i,e){return aa(i,e,true)}});bH.fn.extend({data:function(b7,ca){var b6,b5,b9,b8=this[0],e=b8&&b8.attributes;if(b7===undefined){if(this.length){b9=bH.data(b8);if(b8.nodeType===1&&!bH._data(b8,"parsedAttrs")){b6=e.length;while(b6--){if(e[b6]){b5=e[b6].name;if(b5.indexOf("data-")===0){b5=bH.camelCase(b5.slice(5));bz(b8,b5,b9[b5])}}}bH._data(b8,"parsedAttrs",true)}}return b9}if(typeof b7==="object"){return this.each(function(){bH.data(this,b7)})}return arguments.length>1?this.each(function(){bH.data(this,b7,ca)}):b8?bz(b8,b7,bH.data(b8,b7)):undefined},removeData:function(e){return this.each(function(){bH.removeData(this,e)})}});bH.extend({queue:function(b5,i,b6){var e;if(b5){i=(i||"fx")+"queue";e=bH._data(b5,i);if(b6){if(!e||bH.isArray(b6)){e=bH._data(b5,i,bH.makeArray(b6))}else{e.push(b6)}}return e||[]}},dequeue:function(b8,b7){b7=b7||"fx";var i=bH.queue(b8,b7),b9=i.length,b6=i.shift(),e=bH._queueHooks(b8,b7),b5=function(){bH.dequeue(b8,b7)};if(b6==="inprogress"){b6=i.shift();b9--}if(b6){if(b7==="fx"){i.unshift("inprogress")}delete e.stop;b6.call(b8,b5,e)}if(!b9&&e){e.empty.fire()}},_queueHooks:function(b5,i){var e=i+"queueHooks";return bH._data(b5,e)||bH._data(b5,e,{empty:bH.Callbacks("once memory").add(function(){bH._removeData(b5,i+"queue");bH._removeData(b5,e)})})}});bH.fn.extend({queue:function(e,i){var b5=2;if(typeof e!=="string"){i=e;e="fx";b5--}if(arguments.length<b5){return bH.queue(this[0],e)}return i===undefined?this:this.each(function(){var b6=bH.queue(this,e,i);bH._queueHooks(this,e);if(e==="fx"&&b6[0]!=="inprogress"){bH.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){bH.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(b6,ca){var b5,b7=1,cb=bH.Deferred(),b9=this,e=this.length,b8=function(){if(!(--b7)){cb.resolveWith(b9,[b9])}};if(typeof b6!=="string"){ca=b6;b6=undefined}b6=b6||"fx";while(e--){b5=bH._data(b9[e],b6+"queueHooks");if(b5&&b5.empty){b7++;b5.empty.add(b8)}}b8();return cb.promise(ca)
}});var aD=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;var bS=["Top","Right","Bottom","Left"];var R=function(i,e){i=e||i;return bH.css(i,"display")==="none"||!bH.contains(i.ownerDocument,i)};var aA=bH.access=function(e,b9,cb,ca,b7,cd,cc){var b6=0,b5=e.length,b8=cb==null;if(bH.type(cb)==="object"){b7=true;for(b6 in cb){bH.access(e,b9,b6,cb[b6],true,cd,cc)}}else{if(ca!==undefined){b7=true;if(!bH.isFunction(ca)){cc=true}if(b8){if(cc){b9.call(e,ca);b9=null}else{b8=b9;b9=function(ce,i,cf){return b8.call(bH(ce),cf)}}}if(b9){for(;b6<b5;b6++){b9(e[b6],cb,cc?ca:ca.call(e[b6],b6,b9(e[b6],cb)))}}}}return b7?e:b8?b9.call(e):b5?b9(e[0],cb):cd};var aL=(/^(?:checkbox|radio)$/i);(function(){var i=n.createElement("input"),b7=n.createElement("div"),b5=n.createDocumentFragment();b7.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";C.leadingWhitespace=b7.firstChild.nodeType===3;C.tbody=!b7.getElementsByTagName("tbody").length;C.htmlSerialize=!!b7.getElementsByTagName("link").length;C.html5Clone=n.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>";i.type="checkbox";i.checked=true;b5.appendChild(i);C.appendChecked=i.checked;b7.innerHTML="<textarea>x</textarea>";C.noCloneChecked=!!b7.cloneNode(true).lastChild.defaultValue;b5.appendChild(b7);b7.innerHTML="<input type='radio' checked='checked' name='t'/>";C.checkClone=b7.cloneNode(true).cloneNode(true).lastChild.checked;C.noCloneEvent=true;if(b7.attachEvent){b7.attachEvent("onclick",function(){C.noCloneEvent=false});b7.cloneNode(true).click()}if(C.deleteExpando==null){C.deleteExpando=true;try{delete b7.test}catch(b6){C.deleteExpando=false}}})();(function(){var b5,e,b6=n.createElement("div");for(b5 in {submit:true,change:true,focusin:true}){e="on"+b5;if(!(C[b5+"Bubbles"]=e in a4)){b6.setAttribute(e,"t");C[b5+"Bubbles"]=b6.attributes[e].expando===false}}b6=null})();var bF=/^(?:input|select|textarea)$/i,a5=/^key/,bL=/^(?:mouse|pointer|contextmenu)|click/,bB=/^(?:focusinfocus|focusoutblur)$/,bw=/^([^.]*)(?:\.(.+)|)$/;
function T(){return true}function Y(){return false}function al(){try{return n.activeElement}catch(e){}}bH.event={global:{},add:function(b7,cc,ch,b9,b8){var ca,ci,cj,b5,ce,cb,cg,b6,cf,e,i,cd=bH._data(b7);if(!cd){return}if(ch.handler){b5=ch;ch=b5.handler;b8=b5.selector}if(!ch.guid){ch.guid=bH.guid++}if(!(ci=cd.events)){ci=cd.events={}}if(!(cb=cd.handle)){cb=cd.handle=function(ck){return typeof bH!==aB&&(!ck||bH.event.triggered!==ck.type)?bH.event.dispatch.apply(cb.elem,arguments):undefined};cb.elem=b7}cc=(cc||"").match(aE)||[""];cj=cc.length;while(cj--){ca=bw.exec(cc[cj])||[];cf=i=ca[1];e=(ca[2]||"").split(".").sort();if(!cf){continue}ce=bH.event.special[cf]||{};cf=(b8?ce.delegateType:ce.bindType)||cf;ce=bH.event.special[cf]||{};cg=bH.extend({type:cf,origType:i,data:b9,handler:ch,guid:ch.guid,selector:b8,needsContext:b8&&bH.expr.match.needsContext.test(b8),namespace:e.join(".")},b5);if(!(b6=ci[cf])){b6=ci[cf]=[];b6.delegateCount=0;if(!ce.setup||ce.setup.call(b7,b9,e,cb)===false){if(b7.addEventListener){b7.addEventListener(cf,cb,false)}else{if(b7.attachEvent){b7.attachEvent("on"+cf,cb)}}}}if(ce.add){ce.add.call(b7,cg);if(!cg.handler.guid){cg.handler.guid=ch.guid}}if(b8){b6.splice(b6.delegateCount++,0,cg)}else{b6.push(cg)}bH.event.global[cf]=true}b7=null},remove:function(b6,cc,cj,b7,cb){var b9,cg,ca,b8,ci,ch,ce,b5,cf,e,i,cd=bH.hasData(b6)&&bH._data(b6);if(!cd||!(ch=cd.events)){return}cc=(cc||"").match(aE)||[""];ci=cc.length;while(ci--){ca=bw.exec(cc[ci])||[];cf=i=ca[1];e=(ca[2]||"").split(".").sort();if(!cf){for(cf in ch){bH.event.remove(b6,cf+cc[ci],cj,b7,true)}continue}ce=bH.event.special[cf]||{};cf=(b7?ce.delegateType:ce.bindType)||cf;b5=ch[cf]||[];ca=ca[2]&&new RegExp("(^|\\.)"+e.join("\\.(?:.*\\.|)")+"(\\.|$)");b8=b9=b5.length;while(b9--){cg=b5[b9];if((cb||i===cg.origType)&&(!cj||cj.guid===cg.guid)&&(!ca||ca.test(cg.namespace))&&(!b7||b7===cg.selector||b7==="**"&&cg.selector)){b5.splice(b9,1);if(cg.selector){b5.delegateCount--}if(ce.remove){ce.remove.call(b6,cg)}}}if(b8&&!b5.length){if(!ce.teardown||ce.teardown.call(b6,e,cd.handle)===false){bH.removeEvent(b6,cf,cd.handle)
}delete ch[cf]}}if(bH.isEmptyObject(ch)){delete cd.handle;bH._removeData(b6,"events")}},trigger:function(b5,cc,b8,cj){var cd,b7,ch,ci,cf,cb,ca,b9=[b8||n],cg=J.call(b5,"type")?b5.type:b5,b6=J.call(b5,"namespace")?b5.namespace.split("."):[];ch=cb=b8=b8||n;if(b8.nodeType===3||b8.nodeType===8){return}if(bB.test(cg+bH.event.triggered)){return}if(cg.indexOf(".")>=0){b6=cg.split(".");cg=b6.shift();b6.sort()}b7=cg.indexOf(":")<0&&"on"+cg;b5=b5[bH.expando]?b5:new bH.Event(cg,typeof b5==="object"&&b5);b5.isTrigger=cj?2:3;b5.namespace=b6.join(".");b5.namespace_re=b5.namespace?new RegExp("(^|\\.)"+b6.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b5.result=undefined;if(!b5.target){b5.target=b8}cc=cc==null?[b5]:bH.makeArray(cc,[b5]);cf=bH.event.special[cg]||{};if(!cj&&cf.trigger&&cf.trigger.apply(b8,cc)===false){return}if(!cj&&!cf.noBubble&&!bH.isWindow(b8)){ci=cf.delegateType||cg;if(!bB.test(ci+cg)){ch=ch.parentNode}for(;ch;ch=ch.parentNode){b9.push(ch);cb=ch}if(cb===(b8.ownerDocument||n)){b9.push(cb.defaultView||cb.parentWindow||a4)}}ca=0;while((ch=b9[ca++])&&!b5.isPropagationStopped()){b5.type=ca>1?ci:cf.bindType||cg;cd=(bH._data(ch,"events")||{})[b5.type]&&bH._data(ch,"handle");if(cd){cd.apply(ch,cc)}cd=b7&&ch[b7];if(cd&&cd.apply&&bH.acceptData(ch)){b5.result=cd.apply(ch,cc);if(b5.result===false){b5.preventDefault()}}}b5.type=cg;if(!cj&&!b5.isDefaultPrevented()){if((!cf._default||cf._default.apply(b9.pop(),cc)===false)&&bH.acceptData(b8)){if(b7&&b8[cg]&&!bH.isWindow(b8)){cb=b8[b7];if(cb){b8[b7]=null}bH.event.triggered=cg;try{b8[cg]()}catch(ce){}bH.event.triggered=undefined;if(cb){b8[b7]=cb}}}}return b5.result},dispatch:function(e){e=bH.event.fix(e);var b8,b9,cd,b5,b7,cc=[],cb=O.call(arguments),b6=(bH._data(this,"events")||{})[e.type]||[],ca=bH.event.special[e.type]||{};cb[0]=e;e.delegateTarget=this;if(ca.preDispatch&&ca.preDispatch.call(this,e)===false){return}cc=bH.event.handlers.call(this,e,b6);b8=0;while((b5=cc[b8++])&&!e.isPropagationStopped()){e.currentTarget=b5.elem;b7=0;while((cd=b5.handlers[b7++])&&!e.isImmediatePropagationStopped()){if(!e.namespace_re||e.namespace_re.test(cd.namespace)){e.handleObj=cd;
e.data=cd.data;b9=((bH.event.special[cd.origType]||{}).handle||cd.handler).apply(b5.elem,cb);if(b9!==undefined){if((e.result=b9)===false){e.preventDefault();e.stopPropagation()}}}}}if(ca.postDispatch){ca.postDispatch.call(this,e)}return e.result},handlers:function(e,b6){var b5,cb,b9,b8,ca=[],b7=b6.delegateCount,cc=e.target;if(b7&&cc.nodeType&&(!e.button||e.type!=="click")){for(;cc!=this;cc=cc.parentNode||this){if(cc.nodeType===1&&(cc.disabled!==true||e.type!=="click")){b9=[];for(b8=0;b8<b7;b8++){cb=b6[b8];b5=cb.selector+" ";if(b9[b5]===undefined){b9[b5]=cb.needsContext?bH(b5,this).index(cc)>=0:bH.find(b5,this,null,[cc]).length}if(b9[b5]){b9.push(cb)}}if(b9.length){ca.push({elem:cc,handlers:b9})}}}}if(b7<b6.length){ca.push({elem:this,handlers:b6.slice(b7)})}return ca},fix:function(b7){if(b7[bH.expando]){return b7}var b5,ca,b9,b6=b7.type,e=b7,b8=this.fixHooks[b6];if(!b8){this.fixHooks[b6]=b8=bL.test(b6)?this.mouseHooks:a5.test(b6)?this.keyHooks:{}}b9=b8.props?this.props.concat(b8.props):this.props;b7=new bH.Event(e);b5=b9.length;while(b5--){ca=b9[b5];b7[ca]=e[ca]}if(!b7.target){b7.target=e.srcElement||n}if(b7.target.nodeType===3){b7.target=b7.target.parentNode}b7.metaKey=!!b7.metaKey;return b8.filter?b8.filter(b7,e):b7},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(i,e){if(i.which==null){i.which=e.charCode!=null?e.charCode:e.keyCode}return i}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b6,b5){var e,b7,b8,i=b5.button,b9=b5.fromElement;if(b6.pageX==null&&b5.clientX!=null){b7=b6.target.ownerDocument||n;b8=b7.documentElement;e=b7.body;b6.pageX=b5.clientX+(b8&&b8.scrollLeft||e&&e.scrollLeft||0)-(b8&&b8.clientLeft||e&&e.clientLeft||0);b6.pageY=b5.clientY+(b8&&b8.scrollTop||e&&e.scrollTop||0)-(b8&&b8.clientTop||e&&e.clientTop||0)
}if(!b6.relatedTarget&&b9){b6.relatedTarget=b9===b6.target?b5.toElement:b9}if(!b6.which&&i!==undefined){b6.which=(i&1?1:(i&2?3:(i&4?2:0)))}return b6}},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==al()&&this.focus){try{this.focus();return false}catch(i){}}},delegateType:"focusin"},blur:{trigger:function(){if(this===al()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(bH.nodeName(this,"input")&&this.type==="checkbox"&&this.click){this.click();return false}},_default:function(e){return bH.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}},simulate:function(b5,b7,b6,i){var b8=bH.extend(new bH.Event(),b6,{type:b5,isSimulated:true,originalEvent:{}});if(i){bH.event.trigger(b8,null,b7)}else{bH.event.dispatch.call(b7,b8)}if(b8.isDefaultPrevented()){b6.preventDefault()}}};bH.removeEvent=n.removeEventListener?function(i,e,b5){if(i.removeEventListener){i.removeEventListener(e,b5,false)}}:function(b5,i,b6){var e="on"+i;if(b5.detachEvent){if(typeof b5[e]===aB){b5[e]=null}b5.detachEvent(e,b6)}};bH.Event=function(i,e){if(!(this instanceof bH.Event)){return new bH.Event(i,e)}if(i&&i.type){this.originalEvent=i;this.type=i.type;this.isDefaultPrevented=i.defaultPrevented||i.defaultPrevented===undefined&&i.returnValue===false?T:Y}else{this.type=i}if(e){bH.extend(this,e)}this.timeStamp=i&&i.timeStamp||bH.now();this[bH.expando]=true};bH.Event.prototype={isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y,preventDefault:function(){var i=this.originalEvent;this.isDefaultPrevented=T;if(!i){return}if(i.preventDefault){i.preventDefault()}else{i.returnValue=false}},stopPropagation:function(){var i=this.originalEvent;this.isPropagationStopped=T;if(!i){return}if(i.stopPropagation){i.stopPropagation()}i.cancelBubble=true},stopImmediatePropagation:function(){var i=this.originalEvent;this.isImmediatePropagationStopped=T;
if(i&&i.stopImmediatePropagation){i.stopImmediatePropagation()}this.stopPropagation()}};bH.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(i,e){bH.event.special[i]={delegateType:e,bindType:e,handle:function(b7){var b5,b9=this,b8=b7.relatedTarget,b6=b7.handleObj;if(!b8||(b8!==b9&&!bH.contains(b9,b8))){b7.type=b6.origType;b5=b6.handler.apply(this,arguments);b7.type=e}return b5}}});if(!C.submitBubbles){bH.event.special.submit={setup:function(){if(bH.nodeName(this,"form")){return false}bH.event.add(this,"click._submit keypress._submit",function(b6){var b5=b6.target,i=bH.nodeName(b5,"input")||bH.nodeName(b5,"button")?b5.form:undefined;if(i&&!bH._data(i,"submitBubbles")){bH.event.add(i,"submit._submit",function(e){e._submit_bubble=true});bH._data(i,"submitBubbles",true)}})},postDispatch:function(e){if(e._submit_bubble){delete e._submit_bubble;if(this.parentNode&&!e.isTrigger){bH.event.simulate("submit",this.parentNode,e,true)}}},teardown:function(){if(bH.nodeName(this,"form")){return false}bH.event.remove(this,"._submit")}}}if(!C.changeBubbles){bH.event.special.change={setup:function(){if(bF.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){bH.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true}});bH.event.add(this,"click._change",function(e){if(this._just_changed&&!e.isTrigger){this._just_changed=false}bH.event.simulate("change",this,e,true)})}return false}bH.event.add(this,"beforeactivate._change",function(b5){var i=b5.target;if(bF.test(i.nodeName)&&!bH._data(i,"changeBubbles")){bH.event.add(i,"change._change",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger){bH.event.simulate("change",this.parentNode,e,true)}});bH._data(i,"changeBubbles",true)}})},handle:function(i){var e=i.target;if(this!==e||i.isSimulated||i.isTrigger||(e.type!=="radio"&&e.type!=="checkbox")){return i.handleObj.handler.apply(this,arguments)
}},teardown:function(){bH.event.remove(this,"._change");return !bF.test(this.nodeName)}}}if(!C.focusinBubbles){bH.each({focus:"focusin",blur:"focusout"},function(b5,e){var i=function(b6){bH.event.simulate(e,b6.target,bH.event.fix(b6),true)};bH.event.special[e]={setup:function(){var b7=this.ownerDocument||this,b6=bH._data(b7,e);if(!b6){b7.addEventListener(b5,i,true)}bH._data(b7,e,(b6||0)+1)},teardown:function(){var b7=this.ownerDocument||this,b6=bH._data(b7,e)-1;if(!b6){b7.removeEventListener(b5,i,true);bH._removeData(b7,e)}else{bH._data(b7,e,b6)}}}})}bH.fn.extend({on:function(b5,e,b8,b7,i){var b6,b9;if(typeof b5==="object"){if(typeof e!=="string"){b8=b8||e;e=undefined}for(b6 in b5){this.on(b6,e,b8,b5[b6],i)}return this}if(b8==null&&b7==null){b7=e;b8=e=undefined}else{if(b7==null){if(typeof e==="string"){b7=b8;b8=undefined}else{b7=b8;b8=e;e=undefined}}}if(b7===false){b7=Y}else{if(!b7){return this}}if(i===1){b9=b7;b7=function(ca){bH().off(ca);return b9.apply(this,arguments)};b7.guid=b9.guid||(b9.guid=bH.guid++)}return this.each(function(){bH.event.add(this,b5,b7,b8,e)})},one:function(i,e,b6,b5){return this.on(i,e,b6,b5,1)},off:function(b5,e,b7){var i,b6;if(b5&&b5.preventDefault&&b5.handleObj){i=b5.handleObj;bH(b5.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler);return this}if(typeof b5==="object"){for(b6 in b5){this.off(b6,e,b5[b6])}return this}if(e===false||typeof e==="function"){b7=e;e=undefined}if(b7===false){b7=Y}return this.each(function(){bH.event.remove(this,b5,b7,e)})},trigger:function(e,i){return this.each(function(){bH.event.trigger(e,i,this)})},triggerHandler:function(e,b5){var i=this[0];if(i){return bH.event.trigger(e,b5,i,true)}}});function A(e){var b5=d.split("|"),i=e.createDocumentFragment();if(i.createElement){while(b5.length){i.createElement(b5.pop())}}return i}var d="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",aC=/ jQuery\d+="(?:null|\d+)"/g,L=new RegExp("<(?:"+d+")[\\s/>]","i"),b4=/^\s+/,aG=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,o=/<([\w:]+)/,bZ=/<tbody/i,K=/<|&#?\w+;/,am=/<(?:script|style|link)/i,bV=/checked\s*(?:[^=]|=\s*.checked.)/i,bA=/^$|\/(?:java|ecma)script/i,aq=/^true\/(.*)/,aN=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,V={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:C.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},aS=A(n),k=aS.appendChild(n.createElement("div"));
V.optgroup=V.option;V.tbody=V.tfoot=V.colgroup=V.caption=V.thead;V.th=V.td;function l(b7,e){var b5,b8,b6=0,b9=typeof b7.getElementsByTagName!==aB?b7.getElementsByTagName(e||"*"):typeof b7.querySelectorAll!==aB?b7.querySelectorAll(e||"*"):undefined;if(!b9){for(b9=[],b5=b7.childNodes||b7;(b8=b5[b6])!=null;b6++){if(!e||bH.nodeName(b8,e)){b9.push(b8)}else{bH.merge(b9,l(b8,e))}}}return e===undefined||e&&bH.nodeName(b7,e)?bH.merge([b7],b9):b9}function bX(e){if(aL.test(e.type)){e.defaultChecked=e.checked}}function a2(i,e){return bH.nodeName(i,"table")&&bH.nodeName(e.nodeType!==11?e:e.firstChild,"tr")?i.getElementsByTagName("tbody")[0]||i.appendChild(i.ownerDocument.createElement("tbody")):i}function t(e){e.type=(bH.find.attr(e,"type")!==null)+"/"+e.type;return e}function be(i){var e=aq.exec(i.type);if(e){i.type=e[1]}else{i.removeAttribute("type")}return i}function bt(e,b6){var b7,b5=0;for(;(b7=e[b5])!=null;b5++){bH._data(b7,"globalEval",!b6||bH._data(b6[b5],"globalEval"))}}function ar(cb,b5){if(b5.nodeType!==1||!bH.hasData(cb)){return}var b8,b7,e,ca=bH._data(cb),b9=bH._data(b5,ca),b6=ca.events;if(b6){delete b9.handle;b9.events={};for(b8 in b6){for(b7=0,e=b6[b8].length;b7<e;b7++){bH.event.add(b5,b8,b6[b8][b7])}}}if(b9.data){b9.data=bH.extend({},b9.data)}}function S(b7,i){var b8,b6,b5;if(i.nodeType!==1){return}b8=i.nodeName.toLowerCase();if(!C.noCloneEvent&&i[bH.expando]){b5=bH._data(i);for(b6 in b5.events){bH.removeEvent(i,b6,b5.handle)}i.removeAttribute(bH.expando)}if(b8==="script"&&i.text!==b7.text){t(i).text=b7.text;be(i)}else{if(b8==="object"){if(i.parentNode){i.outerHTML=b7.outerHTML}if(C.html5Clone&&(b7.innerHTML&&!bH.trim(i.innerHTML))){i.innerHTML=b7.innerHTML}}else{if(b8==="input"&&aL.test(b7.type)){i.defaultChecked=i.checked=b7.checked;if(i.value!==b7.value){i.value=b7.value}}else{if(b8==="option"){i.defaultSelected=i.selected=b7.defaultSelected}else{if(b8==="input"||b8==="textarea"){i.defaultValue=b7.defaultValue}}}}}}bH.extend({clone:function(b5,b7,e){var b9,b6,cc,b8,ca,cb=bH.contains(b5.ownerDocument,b5);
if(C.html5Clone||bH.isXMLDoc(b5)||!L.test("<"+b5.nodeName+">")){cc=b5.cloneNode(true)}else{k.innerHTML=b5.outerHTML;k.removeChild(cc=k.firstChild)}if((!C.noCloneEvent||!C.noCloneChecked)&&(b5.nodeType===1||b5.nodeType===11)&&!bH.isXMLDoc(b5)){b9=l(cc);ca=l(b5);for(b8=0;(b6=ca[b8])!=null;++b8){if(b9[b8]){S(b6,b9[b8])}}}if(b7){if(e){ca=ca||l(b5);b9=b9||l(cc);for(b8=0;(b6=ca[b8])!=null;b8++){ar(b6,b9[b8])}}else{ar(b5,cc)}}b9=l(cc,"script");if(b9.length>0){bt(b9,!cb&&l(b5,"script"))}b9=ca=b6=null;return cc},buildFragment:function(b5,b7,cc,ch){var cd,b9,cb,cg,ci,cf,b6,ca=b5.length,b8=A(b7),e=[],ce=0;for(;ce<ca;ce++){b9=b5[ce];if(b9||b9===0){if(bH.type(b9)==="object"){bH.merge(e,b9.nodeType?[b9]:b9)}else{if(!K.test(b9)){e.push(b7.createTextNode(b9))}else{cg=cg||b8.appendChild(b7.createElement("div"));ci=(o.exec(b9)||["",""])[1].toLowerCase();b6=V[ci]||V._default;cg.innerHTML=b6[1]+b9.replace(aG,"<$1></$2>")+b6[2];cd=b6[0];while(cd--){cg=cg.lastChild}if(!C.leadingWhitespace&&b4.test(b9)){e.push(b7.createTextNode(b4.exec(b9)[0]))}if(!C.tbody){b9=ci==="table"&&!bZ.test(b9)?cg.firstChild:b6[1]==="<table>"&&!bZ.test(b9)?cg:0;cd=b9&&b9.childNodes.length;while(cd--){if(bH.nodeName((cf=b9.childNodes[cd]),"tbody")&&!cf.childNodes.length){b9.removeChild(cf)}}}bH.merge(e,cg.childNodes);cg.textContent="";while(cg.firstChild){cg.removeChild(cg.firstChild)}cg=b8.lastChild}}}}if(cg){b8.removeChild(cg)}if(!C.appendChecked){bH.grep(l(e,"input"),bX)}ce=0;while((b9=e[ce++])){if(ch&&bH.inArray(b9,ch)!==-1){continue}cb=bH.contains(b9.ownerDocument,b9);cg=l(b8.appendChild(b9),"script");if(cb){bt(cg)}if(cc){cd=0;while((b9=cg[cd++])){if(bA.test(b9.type||"")){cc.push(b9)}}}}cg=null;return b8},cleanData:function(b5,cd){var b7,cc,b6,b8,b9=0,ce=bH.expando,e=bH.cache,ca=C.deleteExpando,cb=bH.event.special;for(;(b7=b5[b9])!=null;b9++){if(cd||bH.acceptData(b7)){b6=b7[ce];b8=b6&&e[b6];if(b8){if(b8.events){for(cc in b8.events){if(cb[cc]){bH.event.remove(b7,cc)}else{bH.removeEvent(b7,cc,b8.handle)}}}if(e[b6]){delete e[b6];
if(ca){delete b7[ce]}else{if(typeof b7.removeAttribute!==aB){b7.removeAttribute(ce)}else{b7[ce]=null}}aO.push(b6)}}}}}});bH.fn.extend({text:function(e){return aA(this,function(i){return i===undefined?bH.text(this):this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(i))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var i=a2(this,e);i.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var i=a2(this,e);i.insertBefore(e,i.firstChild)}})},before:function(){return this.domManip(arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return this.domManip(arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},remove:function(e,b8){var b7,b5=e?bH.filter(e,this):this,b6=0;for(;(b7=b5[b6])!=null;b6++){if(!b8&&b7.nodeType===1){bH.cleanData(l(b7))}if(b7.parentNode){if(b8&&bH.contains(b7.ownerDocument,b7)){bt(l(b7,"script"))}b7.parentNode.removeChild(b7)}}return this},empty:function(){var b5,e=0;for(;(b5=this[e])!=null;e++){if(b5.nodeType===1){bH.cleanData(l(b5,false))}while(b5.firstChild){b5.removeChild(b5.firstChild)}if(b5.options&&bH.nodeName(b5,"select")){b5.options.length=0}}return this},clone:function(i,e){i=i==null?false:i;e=e==null?i:e;return this.map(function(){return bH.clone(this,i,e)})},html:function(e){return aA(this,function(b8){var b7=this[0]||{},b6=0,b5=this.length;if(b8===undefined){return b7.nodeType===1?b7.innerHTML.replace(aC,""):undefined}if(typeof b8==="string"&&!am.test(b8)&&(C.htmlSerialize||!L.test(b8))&&(C.leadingWhitespace||!b4.test(b8))&&!V[(o.exec(b8)||["",""])[1].toLowerCase()]){b8=b8.replace(aG,"<$1></$2>");try{for(;b6<b5;b6++){b7=this[b6]||{};if(b7.nodeType===1){bH.cleanData(l(b7,false));b7.innerHTML=b8}}b7=0}catch(b9){}}if(b7){this.empty().append(b8)}},null,e,arguments.length)
},replaceWith:function(){var e=arguments[0];this.domManip(arguments,function(i){e=this.parentNode;bH.cleanData(l(this));if(e){e.replaceChild(i,this)}});return e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,true)},domManip:function(cc,ch){cc=ay.apply([],cc);var ca,b6,e,b8,cf,cb,b9=0,b7=this.length,ce=this,cg=b7-1,cd=cc[0],b5=bH.isFunction(cd);if(b5||(b7>1&&typeof cd==="string"&&!C.checkClone&&bV.test(cd))){return this.each(function(ci){var i=ce.eq(ci);if(b5){cc[0]=cd.call(this,ci,i.html())}i.domManip(cc,ch)})}if(b7){cb=bH.buildFragment(cc,this[0].ownerDocument,false,this);ca=cb.firstChild;if(cb.childNodes.length===1){cb=ca}if(ca){b8=bH.map(l(cb,"script"),t);e=b8.length;for(;b9<b7;b9++){b6=cb;if(b9!==cg){b6=bH.clone(b6,true,true);if(e){bH.merge(b8,l(b6,"script"))}}ch.call(this[b9],b6,b9)}if(e){cf=b8[b8.length-1].ownerDocument;bH.map(b8,be);for(b9=0;b9<e;b9++){b6=b8[b9];if(bA.test(b6.type||"")&&!bH._data(b6,"globalEval")&&bH.contains(cf,b6)){if(b6.src){if(bH._evalUrl){bH._evalUrl(b6.src)}}else{bH.globalEval((b6.text||b6.textContent||b6.innerHTML||"").replace(aN,""))}}}}cb=ca=null}}return this}});bH.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,i){bH.fn[e]=function(b5){var b6,b8=0,b7=[],ca=bH(b5),b9=ca.length-1;for(;b8<=b9;b8++){b6=b8===b9?this:this.clone(true);bH(ca[b8])[i](b6);w.apply(b7,b6.get())}return this.pushStack(b7)}});var aH,bk={};function a3(e,b7){var i,b5=bH(b7.createElement(e)).appendTo(b7.body),b6=a4.getDefaultComputedStyle&&(i=a4.getDefaultComputedStyle(b5[0]))?i.display:bH.css(b5[0],"display");b5.detach();return b6}function aZ(b5){var i=n,e=bk[b5];if(!e){e=a3(b5,i);if(e==="none"||!e){aH=(aH||bH("<iframe frameborder='0' width='0' height='0'/>")).appendTo(i.documentElement);i=(aH[0].contentWindow||aH[0].contentDocument).document;i.write();i.close();e=a3(b5,i);aH.detach()}bk[b5]=e}return e}(function(){var e;C.shrinkWrapBlocks=function(){if(e!=null){return e
}e=false;var b6,i,b5;i=n.getElementsByTagName("body")[0];if(!i||!i.style){return}b6=n.createElement("div");b5=n.createElement("div");b5.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";i.appendChild(b5).appendChild(b6);if(typeof b6.style.zoom!==aB){b6.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1";b6.appendChild(n.createElement("div")).style.width="5px";e=b6.offsetWidth!==3}i.removeChild(b5);return e}})();var aY=(/^margin/);var X=new RegExp("^("+aD+")(?!px)[a-z%]+$","i");var bp,F,bn=/^(top|right|bottom|left)$/;if(a4.getComputedStyle){bp=function(e){if(e.ownerDocument.defaultView.opener){return e.ownerDocument.defaultView.getComputedStyle(e,null)}return a4.getComputedStyle(e,null)};F=function(ca,i,b9){var b7,b6,b8,e,b5=ca.style;b9=b9||bp(ca);e=b9?b9.getPropertyValue(i)||b9[i]:undefined;if(b9){if(e===""&&!bH.contains(ca.ownerDocument,ca)){e=bH.style(ca,i)}if(X.test(e)&&aY.test(i)){b7=b5.width;b6=b5.minWidth;b8=b5.maxWidth;b5.minWidth=b5.maxWidth=b5.width=e;e=b9.width;b5.width=b7;b5.minWidth=b6;b5.maxWidth=b8}}return e===undefined?e:e+""}}else{if(n.documentElement.currentStyle){bp=function(e){return e.currentStyle};F=function(b9,b6,b8){var ca,i,e,b5,b7=b9.style;b8=b8||bp(b9);b5=b8?b8[b6]:undefined;if(b5==null&&b7&&b7[b6]){b5=b7[b6]}if(X.test(b5)&&!bn.test(b6)){ca=b7.left;i=b9.runtimeStyle;e=i&&i.left;if(e){i.left=b9.currentStyle.left}b7.left=b6==="fontSize"?"1em":b5;b5=b7.pixelLeft+"px";b7.left=ca;if(e){i.left=e}}return b5===undefined?b5:b5+""||"auto"}}}function a6(e,i){return{get:function(){var b5=e();if(b5==null){return}if(b5){delete this.get;return}return(this.get=i).apply(this,arguments)}}}(function(){var ca,b8,b6,b9,b5,b7,i;ca=n.createElement("div");ca.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";b6=ca.getElementsByTagName("a")[0];b8=b6&&b6.style;if(!b8){return}b8.cssText="float:left;opacity:.5";
C.opacity=b8.opacity==="0.5";C.cssFloat=!!b8.cssFloat;ca.style.backgroundClip="content-box";ca.cloneNode(true).style.backgroundClip="";C.clearCloneStyle=ca.style.backgroundClip==="content-box";C.boxSizing=b8.boxSizing===""||b8.MozBoxSizing===""||b8.WebkitBoxSizing==="";bH.extend(C,{reliableHiddenOffsets:function(){if(b7==null){e()}return b7},boxSizingReliable:function(){if(b5==null){e()}return b5},pixelPosition:function(){if(b9==null){e()}return b9},reliableMarginRight:function(){if(i==null){e()}return i}});function e(){var ce,cb,cc,cd;cb=n.getElementsByTagName("body")[0];if(!cb||!cb.style){return}ce=n.createElement("div");cc=n.createElement("div");cc.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";cb.appendChild(cc).appendChild(ce);ce.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";b9=b5=false;i=true;if(a4.getComputedStyle){b9=(a4.getComputedStyle(ce,null)||{}).top!=="1%";b5=(a4.getComputedStyle(ce,null)||{width:"4px"}).width==="4px";cd=ce.appendChild(n.createElement("div"));cd.style.cssText=ce.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";cd.style.marginRight=cd.style.width="0";ce.style.width="1px";i=!parseFloat((a4.getComputedStyle(cd,null)||{}).marginRight);ce.removeChild(cd)}ce.innerHTML="<table><tr><td></td><td>t</td></tr></table>";cd=ce.getElementsByTagName("td");cd[0].style.cssText="margin:0;border:0;padding:0;display:none";b7=cd[0].offsetHeight===0;if(b7){cd[0].style.display="";cd[1].style.display="none";b7=cd[0].offsetHeight===0}cb.removeChild(cc)}})();bH.swap=function(b8,b7,b9,b6){var b5,i,e={};for(i in b7){e[i]=b8.style[i];b8.style[i]=b7[i]}b5=b9.apply(b8,b6||[]);for(i in b7){b8.style[i]=e[i]}return b5};var bi=/alpha\([^)]*\)/i,aT=/opacity\s*=\s*([^)]*)/,G=/^(none|table(?!-c[ea]).+)/,ba=new RegExp("^("+aD+")(.*)$","i"),U=new RegExp("^([+-])=("+aD+")","i"),bd={position:"absolute",visibility:"hidden",display:"block"},bC={letterSpacing:"0",fontWeight:"400"},av=["Webkit","O","Moz","ms"];
function c(b7,b5){if(b5 in b7){return b5}var b8=b5.charAt(0).toUpperCase()+b5.slice(1),e=b5,b6=av.length;while(b6--){b5=av[b6]+b8;if(b5 in b7){return b5}}return e}function r(b9,e){var ca,b7,b8,i=[],b5=0,b6=b9.length;for(;b5<b6;b5++){b7=b9[b5];if(!b7.style){continue}i[b5]=bH._data(b7,"olddisplay");ca=b7.style.display;if(e){if(!i[b5]&&ca==="none"){b7.style.display=""}if(b7.style.display===""&&R(b7)){i[b5]=bH._data(b7,"olddisplay",aZ(b7.nodeName))}}else{b8=R(b7);if(ca&&ca!=="none"||!b8){bH._data(b7,"olddisplay",b8?ca:bH.css(b7,"display"))}}}for(b5=0;b5<b6;b5++){b7=b9[b5];if(!b7.style){continue}if(!e||b7.style.display==="none"||b7.style.display===""){b7.style.display=e?i[b5]||"":"none"}}return b9}function aM(e,b5,b6){var i=ba.exec(b5);return i?Math.max(0,i[1]-(b6||0))+(i[2]||"px"):b5}function aw(b8,b5,e,ca,b7){var b6=e===(ca?"border":"content")?4:b5==="width"?1:0,b9=0;for(;b6<4;b6+=2){if(e==="margin"){b9+=bH.css(b8,e+bS[b6],true,b7)}if(ca){if(e==="content"){b9-=bH.css(b8,"padding"+bS[b6],true,b7)}if(e!=="margin"){b9-=bH.css(b8,"border"+bS[b6]+"Width",true,b7)}}else{b9+=bH.css(b8,"padding"+bS[b6],true,b7);if(e!=="padding"){b9+=bH.css(b8,"border"+bS[b6]+"Width",true,b7)}}}return b9}function u(b7,i,e){var b6=true,b8=i==="width"?b7.offsetWidth:b7.offsetHeight,b5=bp(b7),b9=C.boxSizing&&bH.css(b7,"boxSizing",false,b5)==="border-box";if(b8<=0||b8==null){b8=F(b7,i,b5);if(b8<0||b8==null){b8=b7.style[i]}if(X.test(b8)){return b8}b6=b9&&(C.boxSizingReliable()||b8===b7.style[i]);b8=parseFloat(b8)||0}return(b8+aw(b7,i,e||(b9?"border":"content"),b6,b5))+"px"}bH.extend({cssHooks:{opacity:{get:function(b5,i){if(i){var e=F(b5,"opacity");return e===""?"1":e}}}},cssNumber:{columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":C.cssFloat?"cssFloat":"styleFloat"},style:function(b6,b5,cc,b7){if(!b6||b6.nodeType===3||b6.nodeType===8||!b6.style){return}var ca,cb,cd,b8=bH.camelCase(b5),i=b6.style;
b5=bH.cssProps[b8]||(bH.cssProps[b8]=c(i,b8));cd=bH.cssHooks[b5]||bH.cssHooks[b8];if(cc!==undefined){cb=typeof cc;if(cb==="string"&&(ca=U.exec(cc))){cc=(ca[1]+1)*ca[2]+parseFloat(bH.css(b6,b5));cb="number"}if(cc==null||cc!==cc){return}if(cb==="number"&&!bH.cssNumber[b8]){cc+="px"}if(!C.clearCloneStyle&&cc===""&&b5.indexOf("background")===0){i[b5]="inherit"}if(!cd||!("set" in cd)||(cc=cd.set(b6,cc,b7))!==undefined){try{i[b5]=cc}catch(b9){}}}else{if(cd&&"get" in cd&&(ca=cd.get(b6,false,b7))!==undefined){return ca}return i[b5]}},css:function(b9,b7,i,b8){var b6,ca,e,b5=bH.camelCase(b7);b7=bH.cssProps[b5]||(bH.cssProps[b5]=c(b9.style,b5));e=bH.cssHooks[b7]||bH.cssHooks[b5];if(e&&"get" in e){ca=e.get(b9,true,i)}if(ca===undefined){ca=F(b9,b7,b8)}if(ca==="normal"&&b7 in bC){ca=bC[b7]}if(i===""||i){b6=parseFloat(ca);return i===true||bH.isNumeric(b6)?b6||0:ca}return ca}});bH.each(["height","width"],function(b5,e){bH.cssHooks[e]={get:function(b7,b6,i){if(b6){return G.test(bH.css(b7,"display"))&&b7.offsetWidth===0?bH.swap(b7,bd,function(){return u(b7,e,i)}):u(b7,e,i)}},set:function(b7,b8,i){var b6=i&&bp(b7);return aM(b7,b8,i?aw(b7,e,i,C.boxSizing&&bH.css(b7,"boxSizing",false,b6)==="border-box",b6):0)}}});if(!C.opacity){bH.cssHooks.opacity={get:function(i,e){return aT.test((e&&i.currentStyle?i.currentStyle.filter:i.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":e?"1":""},set:function(b7,b8){var b6=b7.style,i=b7.currentStyle,e=bH.isNumeric(b8)?"alpha(opacity="+b8*100+")":"",b5=i&&i.filter||b6.filter||"";b6.zoom=1;if((b8>=1||b8==="")&&bH.trim(b5.replace(bi,""))===""&&b6.removeAttribute){b6.removeAttribute("filter");if(b8===""||i&&!i.filter){return}}b6.filter=bi.test(b5)?b5.replace(bi,e):b5+" "+e}}}bH.cssHooks.marginRight=a6(C.reliableMarginRight,function(i,e){if(e){return bH.swap(i,{display:"inline-block"},F,[i,"marginRight"])}});bH.each({margin:"",padding:"",border:"Width"},function(e,i){bH.cssHooks[e+i]={expand:function(b7){var b6=0,b5={},b8=typeof b7==="string"?b7.split(" "):[b7];
for(;b6<4;b6++){b5[e+bS[b6]+i]=b8[b6]||b8[b6-2]||b8[0]}return b5}};if(!aY.test(e)){bH.cssHooks[e+i].set=aM}});bH.fn.extend({css:function(e,i){return aA(this,function(b9,b6,ca){var b8,b5,cb={},b7=0;if(bH.isArray(b6)){b8=bp(b9);b5=b6.length;for(;b7<b5;b7++){cb[b6[b7]]=bH.css(b9,b6[b7],false,b8)}return cb}return ca!==undefined?bH.style(b9,b6,ca):bH.css(b9,b6)},e,i,arguments.length>1)},show:function(){return r(this,true)},hide:function(){return r(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(R(this)){bH(this).show()}else{bH(this).hide()}})}});function I(b5,i,b7,e,b6){return new I.prototype.init(b5,i,b7,e,b6)}bH.Tween=I;I.prototype={constructor:I,init:function(b6,i,b8,e,b7,b5){this.elem=b6;this.prop=b8;this.easing=b7||"swing";this.options=i;this.start=this.now=this.cur();this.end=e;this.unit=b5||(bH.cssNumber[b8]?"":"px")},cur:function(){var e=I.propHooks[this.prop];return e&&e.get?e.get(this):I.propHooks._default.get(this)},run:function(b5){var i,e=I.propHooks[this.prop];if(this.options.duration){this.pos=i=bH.easing[this.easing](b5,this.options.duration*b5,0,1,this.options.duration)}else{this.pos=i=b5}this.now=(this.end-this.start)*i+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(e&&e.set){e.set(this)}else{I.propHooks._default.set(this)}return this}};I.prototype.init.prototype=I.prototype;I.propHooks={_default:{get:function(i){var e;if(i.elem[i.prop]!=null&&(!i.elem.style||i.elem.style[i.prop]==null)){return i.elem[i.prop]}e=bH.css(i.elem,i.prop,"");return !e||e==="auto"?0:e},set:function(e){if(bH.fx.step[e.prop]){bH.fx.step[e.prop](e)}else{if(e.elem.style&&(e.elem.style[bH.cssProps[e.prop]]!=null||bH.cssHooks[e.prop])){bH.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}}};I.propHooks.scrollTop=I.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};bH.easing={linear:function(e){return e},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2
}};bH.fx=I.prototype.init;bH.fx.step={};var M,ad,bQ=/^(?:toggle|show|hide)$/,bI=new RegExp("^(?:([+-])=|)("+aD+")([a-z%]*)$","i"),bO=/queueHooks$/,aF=[h],a1={"*":[function(e,b9){var cb=this.createTween(e,b9),b7=cb.cur(),b6=bI.exec(b9),ca=b6&&b6[3]||(bH.cssNumber[e]?"":"px"),i=(bH.cssNumber[e]||ca!=="px"&&+b7)&&bI.exec(bH.css(cb.elem,e)),b5=1,b8=20;if(i&&i[3]!==ca){ca=ca||i[3];b6=b6||[];i=+b7||1;do{b5=b5||".5";i=i/b5;bH.style(cb.elem,e,i+ca)}while(b5!==(b5=cb.cur()/b7)&&b5!==1&&--b8)}if(b6){i=cb.start=+i||+b7||0;cb.unit=ca;cb.end=b6[1]?i+(b6[1]+1)*b6[2]:+b6[2]}return cb}]};function bm(){setTimeout(function(){M=undefined});return(M=bH.now())}function bG(b6,b8){var b7,e={height:b6},b5=0;b8=b8?1:0;for(;b5<4;b5+=2-b8){b7=bS[b5];e["margin"+b7]=e["padding"+b7]=b6}if(b8){e.opacity=e.width=b6}return e}function bc(b7,b9,b6){var i,b8=(a1[b9]||[]).concat(a1["*"]),e=0,b5=b8.length;for(;e<b5;e++){if((i=b8[e].call(b6,b9,b7))){return i}}}function h(b6,cb,e){var b5,ce,b8,ch,ci,cf,ca,cd,b7=this,cc={},i=b6.style,b9=b6.nodeType&&R(b6),cg=bH._data(b6,"fxshow");if(!e.queue){ci=bH._queueHooks(b6,"fx");if(ci.unqueued==null){ci.unqueued=0;cf=ci.empty.fire;ci.empty.fire=function(){if(!ci.unqueued){cf()}}}ci.unqueued++;b7.always(function(){b7.always(function(){ci.unqueued--;if(!bH.queue(b6,"fx").length){ci.empty.fire()}})})}if(b6.nodeType===1&&("height" in cb||"width" in cb)){e.overflow=[i.overflow,i.overflowX,i.overflowY];ca=bH.css(b6,"display");cd=ca==="none"?bH._data(b6,"olddisplay")||aZ(b6.nodeName):ca;if(cd==="inline"&&bH.css(b6,"float")==="none"){if(!C.inlineBlockNeedsLayout||aZ(b6.nodeName)==="inline"){i.display="inline-block"}else{i.zoom=1}}}if(e.overflow){i.overflow="hidden";if(!C.shrinkWrapBlocks()){b7.always(function(){i.overflow=e.overflow[0];i.overflowX=e.overflow[1];i.overflowY=e.overflow[2]})}}for(b5 in cb){ce=cb[b5];if(bQ.exec(ce)){delete cb[b5];b8=b8||ce==="toggle";if(ce===(b9?"hide":"show")){if(ce==="show"&&cg&&cg[b5]!==undefined){b9=true}else{continue}}cc[b5]=cg&&cg[b5]||bH.style(b6,b5)
}else{ca=undefined}}if(!bH.isEmptyObject(cc)){if(cg){if("hidden" in cg){b9=cg.hidden}}else{cg=bH._data(b6,"fxshow",{})}if(b8){cg.hidden=!b9}if(b9){bH(b6).show()}else{b7.done(function(){bH(b6).hide()})}b7.done(function(){var cj;bH._removeData(b6,"fxshow");for(cj in cc){bH.style(b6,cj,cc[cj])}});for(b5 in cc){ch=bc(b9?cg[b5]:0,b5,b7);if(!(b5 in cg)){cg[b5]=ch.start;if(b9){ch.end=ch.start;ch.start=b5==="width"||b5==="height"?1:0}}}}else{if((ca==="none"?aZ(b6.nodeName):ca)==="inline"){i.display=ca}}}function an(b6,b8){var b5,i,b9,b7,e;for(b5 in b6){i=bH.camelCase(b5);b9=b8[i];b7=b6[b5];if(bH.isArray(b7)){b9=b7[1];b7=b6[b5]=b7[0]}if(b5!==i){b6[i]=b7;delete b6[b5]}e=bH.cssHooks[i];if(e&&"expand" in e){b7=e.expand(b7);delete b6[i];for(b5 in b7){if(!(b5 in b6)){b6[b5]=b7[b5];b8[b5]=b9}}}else{b8[i]=b9}}}function f(b5,b9,cc){var cd,e,b8=0,i=aF.length,cb=bH.Deferred().always(function(){delete b7.elem}),b7=function(){if(e){return false}var cj=M||bm(),cg=Math.max(0,b6.startTime+b6.duration-cj),ce=cg/b6.duration||0,ci=1-ce,cf=0,ch=b6.tweens.length;for(;cf<ch;cf++){b6.tweens[cf].run(ci)}cb.notifyWith(b5,[b6,ci,cg]);if(ci<1&&ch){return cg}else{cb.resolveWith(b5,[b6]);return false}},b6=cb.promise({elem:b5,props:bH.extend({},b9),opts:bH.extend(true,{specialEasing:{}},cc),originalProperties:b9,originalOptions:cc,startTime:M||bm(),duration:cc.duration,tweens:[],createTween:function(cg,ce){var cf=bH.Tween(b5,b6.opts,cg,ce,b6.opts.specialEasing[cg]||b6.opts.easing);b6.tweens.push(cf);return cf},stop:function(cf){var ce=0,cg=cf?b6.tweens.length:0;if(e){return this}e=true;for(;ce<cg;ce++){b6.tweens[ce].run(1)}if(cf){cb.resolveWith(b5,[b6,cf])}else{cb.rejectWith(b5,[b6,cf])}return this}}),ca=b6.props;an(ca,b6.opts.specialEasing);for(;b8<i;b8++){cd=aF[b8].call(b6,b5,ca,b6.opts);if(cd){return cd}}bH.map(ca,bc,b6);if(bH.isFunction(b6.opts.start)){b6.opts.start.call(b5,b6)}bH.fx.timer(bH.extend(b7,{elem:b5,anim:b6,queue:b6.opts.queue}));return b6.progress(b6.opts.progress).done(b6.opts.done,b6.opts.complete).fail(b6.opts.fail).always(b6.opts.always)
}bH.Animation=bH.extend(f,{tweener:function(i,b7){if(bH.isFunction(i)){b7=i;i=["*"]}else{i=i.split(" ")}var b6,e=0,b5=i.length;for(;e<b5;e++){b6=i[e];a1[b6]=a1[b6]||[];a1[b6].unshift(b7)}},prefilter:function(i,e){if(e){aF.unshift(i)}else{aF.push(i)}}});bH.speed=function(b5,b6,i){var e=b5&&typeof b5==="object"?bH.extend({},b5):{complete:i||!i&&b6||bH.isFunction(b5)&&b5,duration:b5,easing:i&&b6||b6&&!bH.isFunction(b6)&&b6};e.duration=bH.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in bH.fx.speeds?bH.fx.speeds[e.duration]:bH.fx.speeds._default;if(e.queue==null||e.queue===true){e.queue="fx"}e.old=e.complete;e.complete=function(){if(bH.isFunction(e.old)){e.old.call(this)}if(e.queue){bH.dequeue(this,e.queue)}};return e};bH.fn.extend({fadeTo:function(e,b6,b5,i){return this.filter(R).css("opacity",0).show().end().animate({opacity:b6},e,b5,i)},animate:function(b9,b6,b8,b7){var b5=bH.isEmptyObject(b9),e=bH.speed(b6,b8,b7),i=function(){var ca=f(this,bH.extend({},b9),e);if(b5||bH._data(this,"finish")){ca.stop(true)}};i.finish=i;return b5||e.queue===false?this.each(i):this.queue(e.queue,i)},stop:function(b5,i,e){var b6=function(b7){var b8=b7.stop;delete b7.stop;b8(e)};if(typeof b5!=="string"){e=i;i=b5;b5=undefined}if(i&&b5!==false){this.queue(b5||"fx",[])}return this.each(function(){var ca=true,b7=b5!=null&&b5+"queueHooks",b9=bH.timers,b8=bH._data(this);if(b7){if(b8[b7]&&b8[b7].stop){b6(b8[b7])}}else{for(b7 in b8){if(b8[b7]&&b8[b7].stop&&bO.test(b7)){b6(b8[b7])}}}for(b7=b9.length;b7--;){if(b9[b7].elem===this&&(b5==null||b9[b7].queue===b5)){b9[b7].anim.stop(e);ca=false;b9.splice(b7,1)}}if(ca||!e){bH.dequeue(this,b5)}})},finish:function(e){if(e!==false){e=e||"fx"}return this.each(function(){var b6,b9=bH._data(this),b5=b9[e+"queue"],i=b9[e+"queueHooks"],b8=bH.timers,b7=b5?b5.length:0;b9.finish=true;bH.queue(this,e,[]);if(i&&i.stop){i.stop.call(this,true)}for(b6=b8.length;b6--;){if(b8[b6].elem===this&&b8[b6].queue===e){b8[b6].anim.stop(true);b8.splice(b6,1)}}for(b6=0;b6<b7;
b6++){if(b5[b6]&&b5[b6].finish){b5[b6].finish.call(this)}}delete b9.finish})}});bH.each(["toggle","show","hide"],function(b5,e){var b6=bH.fn[e];bH.fn[e]=function(i,b8,b7){return i==null||typeof i==="boolean"?b6.apply(this,arguments):this.animate(bG(e,true),i,b8,b7)}});bH.each({slideDown:bG("show"),slideUp:bG("hide"),slideToggle:bG("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){bH.fn[e]=function(b5,b7,b6){return this.animate(i,b5,b7,b6)}});bH.timers=[];bH.fx.tick=function(){var b6,b5=bH.timers,e=0;M=bH.now();for(;e<b5.length;e++){b6=b5[e];if(!b6()&&b5[e]===b6){b5.splice(e--,1)}}if(!b5.length){bH.fx.stop()}M=undefined};bH.fx.timer=function(e){bH.timers.push(e);if(e()){bH.fx.start()}else{bH.timers.pop()}};bH.fx.interval=13;bH.fx.start=function(){if(!ad){ad=setInterval(bH.fx.tick,bH.fx.interval)}};bH.fx.stop=function(){clearInterval(ad);ad=null};bH.fx.speeds={slow:600,fast:200,_default:400};bH.fn.delay=function(i,e){i=bH.fx?bH.fx.speeds[i]||i:i;e=e||"fx";return this.queue(e,function(b6,b5){var b7=setTimeout(b6,i);b5.stop=function(){clearTimeout(b7)}})};(function(){var b5,b7,e,i,b6;b7=n.createElement("div");b7.setAttribute("className","t");b7.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";i=b7.getElementsByTagName("a")[0];e=n.createElement("select");b6=e.appendChild(n.createElement("option"));b5=b7.getElementsByTagName("input")[0];i.style.cssText="top:1px";C.getSetAttribute=b7.className!=="t";C.style=/top/.test(i.getAttribute("style"));C.hrefNormalized=i.getAttribute("href")==="/a";C.checkOn=!!b5.value;C.optSelected=b6.selected;C.enctype=!!n.createElement("form").enctype;e.disabled=true;C.optDisabled=!b6.disabled;b5=n.createElement("input");b5.setAttribute("value","");C.input=b5.getAttribute("value")==="";b5.value="t";b5.setAttribute("type","radio");C.radioValue=b5.value==="t"})();var ak=/\r/g;bH.fn.extend({val:function(b6){var e,i,b7,b5=this[0];if(!arguments.length){if(b5){e=bH.valHooks[b5.type]||bH.valHooks[b5.nodeName.toLowerCase()];
if(e&&"get" in e&&(i=e.get(b5,"value"))!==undefined){return i}i=b5.value;return typeof i==="string"?i.replace(ak,""):i==null?"":i}return}b7=bH.isFunction(b6);return this.each(function(b8){var b9;if(this.nodeType!==1){return}if(b7){b9=b6.call(this,b8,bH(this).val())}else{b9=b6}if(b9==null){b9=""}else{if(typeof b9==="number"){b9+=""}else{if(bH.isArray(b9)){b9=bH.map(b9,function(ca){return ca==null?"":ca+""})}}}e=bH.valHooks[this.type]||bH.valHooks[this.nodeName.toLowerCase()];if(!e||!("set" in e)||e.set(this,b9,"value")===undefined){this.value=b9}})}});bH.extend({valHooks:{option:{get:function(e){var i=bH.find.attr(e,"value");return i!=null?i:bH.trim(bH.text(e))}},select:{get:function(e){var ca,b6,cc=e.options,b8=e.selectedIndex,b7=e.type==="select-one"||b8<0,cb=b7?null:[],b9=b7?b8+1:cc.length,b5=b8<0?b9:b7?b8:0;for(;b5<b9;b5++){b6=cc[b5];if((b6.selected||b5===b8)&&(C.optDisabled?!b6.disabled:b6.getAttribute("disabled")===null)&&(!b6.parentNode.disabled||!bH.nodeName(b6.parentNode,"optgroup"))){ca=bH(b6).val();if(b7){return ca}cb.push(ca)}}return cb},set:function(b9,ca){var cb,b8,b6=b9.options,e=bH.makeArray(ca),b7=b6.length;while(b7--){b8=b6[b7];if(bH.inArray(bH.valHooks.option.get(b8),e)>=0){try{b8.selected=cb=true}catch(b5){b8.scrollHeight}}else{b8.selected=false}}if(!cb){b9.selectedIndex=-1}return b6}}}});bH.each(["radio","checkbox"],function(){bH.valHooks[this]={set:function(e,i){if(bH.isArray(i)){return(e.checked=bH.inArray(bH(e).val(),i)>=0)}}};if(!C.checkOn){bH.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});var a9,b2,bN=bH.expr.attrHandle,ap=/^(?:checked|selected)$/i,bM=C.getSetAttribute,bE=C.input;bH.fn.extend({attr:function(e,i){return aA(this,bH.attr,e,i,arguments.length>1)},removeAttr:function(e){return this.each(function(){bH.removeAttr(this,e)})}});bH.extend({attr:function(b7,b6,b8){var e,b5,i=b7.nodeType;if(!b7||i===3||i===8||i===2){return}if(typeof b7.getAttribute===aB){return bH.prop(b7,b6,b8)}if(i!==1||!bH.isXMLDoc(b7)){b6=b6.toLowerCase();
e=bH.attrHooks[b6]||(bH.expr.match.bool.test(b6)?b2:a9)}if(b8!==undefined){if(b8===null){bH.removeAttr(b7,b6)}else{if(e&&"set" in e&&(b5=e.set(b7,b8,b6))!==undefined){return b5}else{b7.setAttribute(b6,b8+"");return b8}}}else{if(e&&"get" in e&&(b5=e.get(b7,b6))!==null){return b5}else{b5=bH.find.attr(b7,b6);return b5==null?undefined:b5}}},removeAttr:function(b6,b8){var e,b7,b5=0,b9=b8&&b8.match(aE);if(b9&&b6.nodeType===1){while((e=b9[b5++])){b7=bH.propFix[e]||e;if(bH.expr.match.bool.test(e)){if(bE&&bM||!ap.test(e)){b6[b7]=false}else{b6[bH.camelCase("default-"+e)]=b6[b7]=false}}else{bH.attr(b6,e,"")}b6.removeAttribute(bM?e:b7)}}},attrHooks:{type:{set:function(e,i){if(!C.radioValue&&i==="radio"&&bH.nodeName(e,"input")){var b5=e.value;e.setAttribute("type",i);if(b5){e.value=b5}return i}}}}});b2={set:function(i,b5,e){if(b5===false){bH.removeAttr(i,e)}else{if(bE&&bM||!ap.test(e)){i.setAttribute(!bM&&bH.propFix[e]||e,e)}else{i[bH.camelCase("default-"+e)]=i[e]=true}}return e}};bH.each(bH.expr.match.bool.source.match(/\w+/g),function(b6,b5){var e=bN[b5]||bH.find.attr;bN[b5]=bE&&bM||!ap.test(b5)?function(b8,b7,ca){var i,b9;if(!ca){b9=bN[b7];bN[b7]=i;i=e(b8,b7,ca)!=null?b7.toLowerCase():null;bN[b7]=b9}return i}:function(b7,i,b8){if(!b8){return b7[bH.camelCase("default-"+i)]?i.toLowerCase():null}}});if(!bE||!bM){bH.attrHooks.value={set:function(i,b5,e){if(bH.nodeName(i,"input")){i.defaultValue=b5}else{return a9&&a9.set(i,b5,e)}}}}if(!bM){a9={set:function(b5,b6,i){var e=b5.getAttributeNode(i);if(!e){b5.setAttributeNode((e=b5.ownerDocument.createAttribute(i)))}e.value=b6+="";if(i==="value"||b6===b5.getAttribute(i)){return b6}}};bN.id=bN.name=bN.coords=function(b5,i,b6){var e;if(!b6){return(e=b5.getAttributeNode(i))&&e.value!==""?e.value:null}};bH.valHooks.button={get:function(b5,i){var e=b5.getAttributeNode(i);if(e&&e.specified){return e.value}},set:a9.set};bH.attrHooks.contenteditable={set:function(i,b5,e){a9.set(i,b5===""?false:b5,e)}};bH.each(["width","height"],function(b5,e){bH.attrHooks[e]={set:function(i,b6){if(b6===""){i.setAttribute(e,"auto");
return b6}}}})}if(!C.style){bH.attrHooks.style={get:function(e){return e.style.cssText||undefined},set:function(e,i){return(e.style.cssText=i+"")}}}var aI=/^(?:input|select|textarea|button|object)$/i,E=/^(?:a|area)$/i;bH.fn.extend({prop:function(e,i){return aA(this,bH.prop,e,i,arguments.length>1)},removeProp:function(e){e=bH.propFix[e]||e;return this.each(function(){try{this[e]=undefined;delete this[e]}catch(i){}})}});bH.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(b8,b6,b9){var b5,e,b7,i=b8.nodeType;if(!b8||i===3||i===8||i===2){return}b7=i!==1||!bH.isXMLDoc(b8);if(b7){b6=bH.propFix[b6]||b6;e=bH.propHooks[b6]}if(b9!==undefined){return e&&"set" in e&&(b5=e.set(b8,b9,b6))!==undefined?b5:(b8[b6]=b9)}else{return e&&"get" in e&&(b5=e.get(b8,b6))!==null?b5:b8[b6]}},propHooks:{tabIndex:{get:function(i){var e=bH.find.attr(i,"tabindex");return e?parseInt(e,10):aI.test(i.nodeName)||E.test(i.nodeName)&&i.href?0:-1}}}});if(!C.hrefNormalized){bH.each(["href","src"],function(b5,e){bH.propHooks[e]={get:function(i){return i.getAttribute(e,4)}}})}if(!C.optSelected){bH.propHooks.selected={get:function(i){var e=i.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}return null}}}bH.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){bH.propFix[this.toLowerCase()]=this});if(!C.enctype){bH.propFix.enctype="encoding"}var bK=/[\t\r\n\f]/g;bH.fn.extend({addClass:function(cc){var b6,b5,cd,ca,b7,e,b8=0,b9=this.length,cb=typeof cc==="string"&&cc;if(bH.isFunction(cc)){return this.each(function(i){bH(this).addClass(cc.call(this,i,this.className))})}if(cb){b6=(cc||"").match(aE)||[];for(;b8<b9;b8++){b5=this[b8];cd=b5.nodeType===1&&(b5.className?(" "+b5.className+" ").replace(bK," "):" ");if(cd){b7=0;while((ca=b6[b7++])){if(cd.indexOf(" "+ca+" ")<0){cd+=ca+" "}}e=bH.trim(cd);if(b5.className!==e){b5.className=e}}}}return this},removeClass:function(cc){var b6,b5,cd,ca,b7,e,b8=0,b9=this.length,cb=arguments.length===0||typeof cc==="string"&&cc;
if(bH.isFunction(cc)){return this.each(function(i){bH(this).removeClass(cc.call(this,i,this.className))})}if(cb){b6=(cc||"").match(aE)||[];for(;b8<b9;b8++){b5=this[b8];cd=b5.nodeType===1&&(b5.className?(" "+b5.className+" ").replace(bK," "):"");if(cd){b7=0;while((ca=b6[b7++])){while(cd.indexOf(" "+ca+" ")>=0){cd=cd.replace(" "+ca+" "," ")}}e=cc?bH.trim(cd):"";if(b5.className!==e){b5.className=e}}}}return this},toggleClass:function(b5,e){var i=typeof b5;if(typeof e==="boolean"&&i==="string"){return e?this.addClass(b5):this.removeClass(b5)}if(bH.isFunction(b5)){return this.each(function(b6){bH(this).toggleClass(b5.call(this,b6,this.className,e),e)})}return this.each(function(){if(i==="string"){var b8,b7=0,b6=bH(this),b9=b5.match(aE)||[];while((b8=b9[b7++])){if(b6.hasClass(b8)){b6.removeClass(b8)}else{b6.addClass(b8)}}}else{if(i===aB||i==="boolean"){if(this.className){bH._data(this,"__className__",this.className)}this.className=this.className||b5===false?"":bH._data(this,"__className__")||""}}})},hasClass:function(e){var b7=" "+e+" ",b6=0,b5=this.length;for(;b6<b5;b6++){if(this[b6].nodeType===1&&(" "+this[b6].className+" ").replace(bK," ").indexOf(b7)>=0){return true}}return false}});bH.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(b5,e){bH.fn[e]=function(b6,i){return arguments.length>0?this.on(e,null,b6,i):this.trigger(e)}});bH.fn.extend({hover:function(e,i){return this.mouseenter(e).mouseleave(i||e)},bind:function(e,b5,i){return this.on(e,null,b5,i)},unbind:function(e,i){return this.off(e,null,i)},delegate:function(e,i,b6,b5){return this.on(i,e,b6,b5)},undelegate:function(e,i,b5){return arguments.length===1?this.off(e,"**"):this.off(i,e||"**",b5)}});var bo=bH.now();var bP=(/\?/);var a0=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
bH.parseJSON=function(e){if(a4.JSON&&a4.JSON.parse){return a4.JSON.parse(e+"")}var b6,b5=null,i=bH.trim(e+"");return i&&!bH.trim(i.replace(a0,function(b9,b7,b8,ca){if(b6&&b7){b5=0}if(b5===0){return b9}b6=b8||b7;b5+=!ca-!b8;return""}))?(Function("return "+i))():bH.error("Invalid JSON: "+e)};bH.parseXML=function(b6){var i,b5;if(!b6||typeof b6!=="string"){return null}try{if(a4.DOMParser){b5=new DOMParser();i=b5.parseFromString(b6,"text/xml")}else{i=new ActiveXObject("Microsoft.XMLDOM");i.async="false";i.loadXML(b6)}}catch(b7){i=undefined}if(!i||!i.documentElement||i.getElementsByTagName("parsererror").length){bH.error("Invalid XML: "+b6)}return i};var b3,Z,ao=/#.*$/,Q=/([?&])_=[^&]*/,ag=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,B=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,q=/^(?:GET|HEAD)$/,aJ=/^\/\//,aU=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,v={},a8={},aW="*/".concat("*");try{Z=location.href}catch(bh){Z=n.createElement("a");Z.href="";Z=Z.href}b3=aU.exec(Z.toLowerCase())||[];function bJ(e){return function(b8,b9){if(typeof b8!=="string"){b9=b8;b8="*"}var b5,b6=0,b7=b8.toLowerCase().match(aE)||[];if(bH.isFunction(b9)){while((b5=b7[b6++])){if(b5.charAt(0)==="+"){b5=b5.slice(1)||"*";(e[b5]=e[b5]||[]).unshift(b9)}else{(e[b5]=e[b5]||[]).push(b9)}}}}}function p(e,b5,b9,b6){var i={},b7=(e===a8);function b8(ca){var cb;i[ca]=true;bH.each(e[ca]||[],function(cd,cc){var ce=cc(b5,b9,b6);if(typeof ce==="string"&&!b7&&!i[ce]){b5.dataTypes.unshift(ce);b8(ce);return false}else{if(b7){return !(cb=ce)}}});return cb}return b8(b5.dataTypes[0])||!i["*"]&&b8("*")}function s(b5,b6){var e,i,b7=bH.ajaxSettings.flatOptions||{};for(i in b6){if(b6[i]!==undefined){(b7[i]?b5:(e||(e={})))[i]=b6[i]}}if(e){bH.extend(true,b5,e)}return b5}function g(cb,ca,b7){var e,b6,b5,b8,i=cb.contents,b9=cb.dataTypes;while(b9[0]==="*"){b9.shift();if(b6===undefined){b6=cb.mimeType||ca.getResponseHeader("Content-Type")}}if(b6){for(b8 in i){if(i[b8]&&i[b8].test(b6)){b9.unshift(b8);break}}}if(b9[0] in b7){b5=b9[0]
}else{for(b8 in b7){if(!b9[0]||cb.converters[b8+" "+b9[0]]){b5=b8;break}if(!e){e=b8}}b5=b5||e}if(b5){if(b5!==b9[0]){b9.unshift(b5)}return b7[b5]}}function af(cf,b7,cc,b5){var i,ca,cd,b8,b6,ce={},cb=cf.dataTypes.slice();if(cb[1]){for(cd in cf.converters){ce[cd.toLowerCase()]=cf.converters[cd]}}ca=cb.shift();while(ca){if(cf.responseFields[ca]){cc[cf.responseFields[ca]]=b7}if(!b6&&b5&&cf.dataFilter){b7=cf.dataFilter(b7,cf.dataType)}b6=ca;ca=cb.shift();if(ca){if(ca==="*"){ca=b6}else{if(b6!=="*"&&b6!==ca){cd=ce[b6+" "+ca]||ce["* "+ca];if(!cd){for(i in ce){b8=i.split(" ");if(b8[1]===ca){cd=ce[b6+" "+b8[0]]||ce["* "+b8[0]];if(cd){if(cd===true){cd=ce[i]}else{if(ce[i]!==true){ca=b8[0];cb.unshift(b8[1])}}break}}}}if(cd!==true){if(cd&&cf["throws"]){b7=cd(b7)}else{try{b7=cd(b7)}catch(b9){return{state:"parsererror",error:cd?b9:"No conversion from "+b6+" to "+ca}}}}}}}}return{state:"success",data:b7}}bH.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Z,type:"GET",isLocal:B.test(b3[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":aW,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":bH.parseJSON,"text xml":bH.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(i,e){return e?s(s(i,bH.ajaxSettings),e):s(bH.ajaxSettings,i)},ajaxPrefilter:bJ(v),ajaxTransport:bJ(a8),ajax:function(b9,b6){if(typeof b9==="object"){b6=b9;b9=undefined}b6=b6||{};var ci,ck,ca,cp,ce,b5,cl,b7,cd=bH.ajaxSetup({},b6),cr=cd.context||cd,cg=cd.context&&(cr.nodeType||cr.jquery)?bH(cr):bH.event,cq=bH.Deferred(),cn=bH.Callbacks("once memory"),cb=cd.statusCode||{},ch={},co={},b8=0,cc="canceled",cj={readyState:0,getResponseHeader:function(i){var e;if(b8===2){if(!b7){b7={};while((e=ag.exec(cp))){b7[e[1].toLowerCase()]=e[2]
}}e=b7[i.toLowerCase()]}return e==null?null:e},getAllResponseHeaders:function(){return b8===2?cp:null},setRequestHeader:function(i,cs){var e=i.toLowerCase();if(!b8){i=co[e]=co[e]||i;ch[i]=cs}return this},overrideMimeType:function(e){if(!b8){cd.mimeType=e}return this},statusCode:function(i){var e;if(i){if(b8<2){for(e in i){cb[e]=[cb[e],i[e]]}}else{cj.always(i[cj.status])}}return this},abort:function(i){var e=i||cc;if(cl){cl.abort(e)}cf(0,e);return this}};cq.promise(cj).complete=cn.add;cj.success=cj.done;cj.error=cj.fail;cd.url=((b9||cd.url||Z)+"").replace(ao,"").replace(aJ,b3[1]+"//");cd.type=b6.method||b6.type||cd.method||cd.type;cd.dataTypes=bH.trim(cd.dataType||"*").toLowerCase().match(aE)||[""];if(cd.crossDomain==null){ci=aU.exec(cd.url.toLowerCase());cd.crossDomain=!!(ci&&(ci[1]!==b3[1]||ci[2]!==b3[2]||(ci[3]||(ci[1]==="http:"?"80":"443"))!==(b3[3]||(b3[1]==="http:"?"80":"443"))))}if(cd.data&&cd.processData&&typeof cd.data!=="string"){cd.data=bH.param(cd.data,cd.traditional)}p(v,cd,b6,cj);if(b8===2){return cj}b5=bH.event&&cd.global;if(b5&&bH.active++===0){bH.event.trigger("ajaxStart")}cd.type=cd.type.toUpperCase();cd.hasContent=!q.test(cd.type);ca=cd.url;if(!cd.hasContent){if(cd.data){ca=(cd.url+=(bP.test(ca)?"&":"?")+cd.data);delete cd.data}if(cd.cache===false){cd.url=Q.test(ca)?ca.replace(Q,"$1_="+bo++):ca+(bP.test(ca)?"&":"?")+"_="+bo++}}if(cd.ifModified){if(bH.lastModified[ca]){cj.setRequestHeader("If-Modified-Since",bH.lastModified[ca])}if(bH.etag[ca]){cj.setRequestHeader("If-None-Match",bH.etag[ca])}}if(cd.data&&cd.hasContent&&cd.contentType!==false||b6.contentType){cj.setRequestHeader("Content-Type",cd.contentType)}cj.setRequestHeader("Accept",cd.dataTypes[0]&&cd.accepts[cd.dataTypes[0]]?cd.accepts[cd.dataTypes[0]]+(cd.dataTypes[0]!=="*"?", "+aW+"; q=0.01":""):cd.accepts["*"]);for(ck in cd.headers){cj.setRequestHeader(ck,cd.headers[ck])}if(cd.beforeSend&&(cd.beforeSend.call(cr,cj,cd)===false||b8===2)){return cj.abort()}cc="abort";for(ck in {success:1,error:1,complete:1}){cj[ck](cd[ck])
}cl=p(a8,cd,b6,cj);if(!cl){cf(-1,"No Transport")}else{cj.readyState=1;if(b5){cg.trigger("ajaxSend",[cj,cd])}if(cd.async&&cd.timeout>0){ce=setTimeout(function(){cj.abort("timeout")},cd.timeout)}try{b8=1;cl.send(ch,cf)}catch(cm){if(b8<2){cf(-1,cm)}else{throw cm}}}function cf(cv,i,cw,ct){var e,cz,cx,cu,cy,cs=i;if(b8===2){return}b8=2;if(ce){clearTimeout(ce)}cl=undefined;cp=ct||"";cj.readyState=cv>0?4:0;e=cv>=200&&cv<300||cv===304;if(cw){cu=g(cd,cj,cw)}cu=af(cd,cu,cj,e);if(e){if(cd.ifModified){cy=cj.getResponseHeader("Last-Modified");if(cy){bH.lastModified[ca]=cy}cy=cj.getResponseHeader("etag");if(cy){bH.etag[ca]=cy}}if(cv===204||cd.type==="HEAD"){cs="nocontent"}else{if(cv===304){cs="notmodified"}else{cs=cu.state;cz=cu.data;cx=cu.error;e=!cx}}}else{cx=cs;if(cv||!cs){cs="error";if(cv<0){cv=0}}}cj.status=cv;cj.statusText=(i||cs)+"";if(e){cq.resolveWith(cr,[cz,cs,cj])}else{cq.rejectWith(cr,[cj,cs,cx])}cj.statusCode(cb);cb=undefined;if(b5){cg.trigger(e?"ajaxSuccess":"ajaxError",[cj,cd,e?cz:cx])}cn.fireWith(cr,[cj,cs]);if(b5){cg.trigger("ajaxComplete",[cj,cd]);if(!(--bH.active)){bH.event.trigger("ajaxStop")}}}return cj},getJSON:function(e,i,b5){return bH.get(e,i,b5,"json")},getScript:function(e,i){return bH.get(e,undefined,i,"script")}});bH.each(["get","post"],function(e,b5){bH[b5]=function(i,b7,b8,b6){if(bH.isFunction(b7)){b6=b6||b8;b8=b7;b7=undefined}return bH.ajax({url:i,type:b5,dataType:b6,data:b7,success:b8})}});bH._evalUrl=function(e){return bH.ajax({url:e,type:"GET",dataType:"script",async:false,global:false,"throws":true})};bH.fn.extend({wrapAll:function(e){if(bH.isFunction(e)){return this.each(function(b5){bH(this).wrapAll(e.call(this,b5))})}if(this[0]){var i=bH(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){i.insertBefore(this[0])}i.map(function(){var b5=this;while(b5.firstChild&&b5.firstChild.nodeType===1){b5=b5.firstChild}return b5}).append(this)}return this},wrapInner:function(e){if(bH.isFunction(e)){return this.each(function(b5){bH(this).wrapInner(e.call(this,b5))
})}return this.each(function(){var i=bH(this),b5=i.contents();if(b5.length){b5.wrapAll(e)}else{i.append(e)}})},wrap:function(e){var i=bH.isFunction(e);return this.each(function(b5){bH(this).wrapAll(i?e.call(this,b5):e)})},unwrap:function(){return this.parent().each(function(){if(!bH.nodeName(this,"body")){bH(this).replaceWith(this.childNodes)}}).end()}});bH.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||(!C.reliableHiddenOffsets()&&((e.style&&e.style.display)||bH.css(e,"display"))==="none")};bH.expr.filters.visible=function(e){return !bH.expr.filters.hidden(e)};var bv=/%20/g,aR=/\[\]$/,W=/\r?\n/g,b=/^(?:submit|button|image|reset|file)$/i,at=/^(?:input|select|textarea|keygen)/i;function j(b5,b7,i,b6){var e;if(bH.isArray(b7)){bH.each(b7,function(b9,b8){if(i||aR.test(b5)){b6(b5,b8)}else{j(b5+"["+(typeof b8==="object"?b9:"")+"]",b8,i,b6)}})}else{if(!i&&bH.type(b7)==="object"){for(e in b7){j(b5+"["+e+"]",b7[e],i,b6)}}else{b6(b5,b7)}}}bH.param=function(e,b5){var b6,i=[],b7=function(b8,b9){b9=bH.isFunction(b9)?b9():(b9==null?"":b9);i[i.length]=encodeURIComponent(b8)+"="+encodeURIComponent(b9)};if(b5===undefined){b5=bH.ajaxSettings&&bH.ajaxSettings.traditional}if(bH.isArray(e)||(e.jquery&&!bH.isPlainObject(e))){bH.each(e,function(){b7(this.name,this.value)})}else{for(b6 in e){j(b6,e[b6],b5,b7)}}return i.join("&").replace(bv,"+")};bH.fn.extend({serialize:function(){return bH.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=bH.prop(this,"elements");return e?bH.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!bH(this).is(":disabled")&&at.test(this.nodeName)&&!b.test(e)&&(this.checked||!aL.test(e))}).map(function(e,b5){var b6=bH(this).val();return b6==null?null:bH.isArray(b6)?bH.map(b6,function(i){return{name:b5.name,value:i.replace(W,"\r\n")}}):{name:b5.name,value:b6.replace(W,"\r\n")}}).get()}});bH.ajaxSettings.xhr=a4.ActiveXObject!==undefined?function(){return !this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&bD()||bf()
}:bD;var az=0,ai={},ax=bH.ajaxSettings.xhr();if(a4.attachEvent){a4.attachEvent("onunload",function(){for(var e in ai){ai[e](undefined,true)}})}C.cors=!!ax&&("withCredentials" in ax);ax=C.ajax=!!ax;if(ax){bH.ajaxTransport(function(e){if(!e.crossDomain||C.cors){var i;return{send:function(b8,b5){var b6,b7=e.xhr(),b9=++az;b7.open(e.type,e.url,e.async,e.username,e.password);if(e.xhrFields){for(b6 in e.xhrFields){b7[b6]=e.xhrFields[b6]}}if(e.mimeType&&b7.overrideMimeType){b7.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!b8["X-Requested-With"]){b8["X-Requested-With"]="XMLHttpRequest"}for(b6 in b8){if(b8[b6]!==undefined){b7.setRequestHeader(b6,b8[b6]+"")}}b7.send((e.hasContent&&e.data)||null);i=function(cc,cb){var ca,cf,cd;if(i&&(cb||b7.readyState===4)){delete ai[b9];i=undefined;b7.onreadystatechange=bH.noop;if(cb){if(b7.readyState!==4){b7.abort()}}else{cd={};ca=b7.status;if(typeof b7.responseText==="string"){cd.text=b7.responseText}try{cf=b7.statusText}catch(ce){cf=""}if(!ca&&e.isLocal&&!e.crossDomain){ca=cd.text?200:404}else{if(ca===1223){ca=204}}}}if(cd){b5(ca,cf,cd,b7.getAllResponseHeaders())}};if(!e.async){i()}else{if(b7.readyState===4){setTimeout(i)}else{b7.onreadystatechange=ai[b9]=i}}},abort:function(){if(i){i(undefined,true)}}}}})}function bD(){try{return new a4.XMLHttpRequest()}catch(i){}}function bf(){try{return new a4.ActiveXObject("Microsoft.XMLHTTP")}catch(i){}}bH.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){bH.globalEval(e);return e}}});bH.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});bH.ajaxTransport("script",function(b5){if(b5.crossDomain){var e,i=n.head||bH("head")[0]||n.documentElement;return{send:function(b6,b7){e=n.createElement("script");e.async=true;if(b5.scriptCharset){e.charset=b5.scriptCharset}e.src=b5.url;e.onload=e.onreadystatechange=function(b9,b8){if(b8||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;
if(e.parentNode){e.parentNode.removeChild(e)}e=null;if(!b8){b7(200,"success")}}};i.insertBefore(e,i.firstChild)},abort:function(){if(e){e.onload(undefined,true)}}}}});var br=[],a7=/(=)\?(?=&|$)|\?\?/;bH.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=br.pop()||(bH.expando+"_"+(bo++));this[e]=true;return e}});bH.ajaxPrefilter("json jsonp",function(b6,e,b7){var b9,i,b5,b8=b6.jsonp!==false&&(a7.test(b6.url)?"url":typeof b6.data==="string"&&!(b6.contentType||"").indexOf("application/x-www-form-urlencoded")&&a7.test(b6.data)&&"data");if(b8||b6.dataTypes[0]==="jsonp"){b9=b6.jsonpCallback=bH.isFunction(b6.jsonpCallback)?b6.jsonpCallback():b6.jsonpCallback;if(b8){b6[b8]=b6[b8].replace(a7,"$1"+b9)}else{if(b6.jsonp!==false){b6.url+=(bP.test(b6.url)?"&":"?")+b6.jsonp+"="+b9}}b6.converters["script json"]=function(){if(!b5){bH.error(b9+" was not called")}return b5[0]};b6.dataTypes[0]="json";i=a4[b9];a4[b9]=function(){b5=arguments};b7.always(function(){a4[b9]=i;if(b6[b9]){b6.jsonpCallback=e.jsonpCallback;br.push(b9)}if(b5&&bH.isFunction(i)){i(b5[0])}b5=i=undefined});return"script"}});bH.parseHTML=function(b7,b5,b6){if(!b7||typeof b7!=="string"){return null}if(typeof b5==="boolean"){b6=b5;b5=false}b5=b5||n;var i=a.exec(b7),e=!b6&&[];if(i){return[b5.createElement(i[1])]}i=bH.buildFragment([b7],b5,e);if(e&&e.length){bH(e).remove()}return bH.merge([],i.childNodes)};var b0=bH.fn.load;bH.fn.load=function(b6,b9,ca){if(typeof b6!=="string"&&b0){return b0.apply(this,arguments)}var e,b5,b7,i=this,b8=b6.indexOf(" ");if(b8>=0){e=bH.trim(b6.slice(b8,b6.length));b6=b6.slice(0,b8)}if(bH.isFunction(b9)){ca=b9;b9=undefined}else{if(b9&&typeof b9==="object"){b7="POST"}}if(i.length>0){bH.ajax({url:b6,type:b7,dataType:"html",data:b9}).done(function(cb){b5=arguments;i.html(e?bH("<div>").append(bH.parseHTML(cb)).find(e):cb)}).complete(ca&&function(cc,cb){i.each(ca,b5||[cc.responseText,cb,cc])})}return this};bH.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,b5){bH.fn[b5]=function(i){return this.on(b5,i)
}});bH.expr.filters.animated=function(e){return bH.grep(bH.timers,function(i){return e===i.elem}).length};var bW=a4.document.documentElement;function bq(e){return bH.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}bH.offset={setOffset:function(b6,cg,ca){var cc,b9,e,b7,b5,ce,cf,cb=bH.css(b6,"position"),b8=bH(b6),cd={};if(cb==="static"){b6.style.position="relative"}b5=b8.offset();e=bH.css(b6,"top");ce=bH.css(b6,"left");cf=(cb==="absolute"||cb==="fixed")&&bH.inArray("auto",[e,ce])>-1;if(cf){cc=b8.position();b7=cc.top;b9=cc.left}else{b7=parseFloat(e)||0;b9=parseFloat(ce)||0}if(bH.isFunction(cg)){cg=cg.call(b6,ca,b5)}if(cg.top!=null){cd.top=(cg.top-b5.top)+b7}if(cg.left!=null){cd.left=(cg.left-b5.left)+b9}if("using" in cg){cg.using.call(b6,cd)}else{b8.css(cd)}}};bH.fn.extend({offset:function(i){if(arguments.length){return i===undefined?this:this.each(function(b9){bH.offset.setOffset(this,i,b9)})}var e,b8,b6={top:0,left:0},b5=this[0],b7=b5&&b5.ownerDocument;if(!b7){return}e=b7.documentElement;if(!bH.contains(e,b5)){return b6}if(typeof b5.getBoundingClientRect!==aB){b6=b5.getBoundingClientRect()}b8=bq(b7);return{top:b6.top+(b8.pageYOffset||e.scrollTop)-(e.clientTop||0),left:b6.left+(b8.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}},position:function(){if(!this[0]){return}var b5,b6,e={top:0,left:0},i=this[0];if(bH.css(i,"position")==="fixed"){b6=i.getBoundingClientRect()}else{b5=this.offsetParent();b6=this.offset();if(!bH.nodeName(b5[0],"html")){e=b5.offset()}e.top+=bH.css(b5[0],"borderTopWidth",true);e.left+=bH.css(b5[0],"borderLeftWidth",true)}return{top:b6.top-e.top-bH.css(i,"marginTop",true),left:b6.left-e.left-bH.css(i,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||bW;while(e&&(!bH.nodeName(e,"html")&&bH.css(e,"position")==="static")){e=e.offsetParent}return e||bW})}});bH.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b5,i){var e=/Y/.test(i);bH.fn[b5]=function(b6){return aA(this,function(b7,ca,b9){var b8=bq(b7);
if(b9===undefined){return b8?(i in b8)?b8[i]:b8.document.documentElement[ca]:b7[ca]}if(b8){b8.scrollTo(!e?b9:bH(b8).scrollLeft(),e?b9:bH(b8).scrollTop())}else{b7[ca]=b9}},b5,b6,arguments.length,null)}});bH.each(["top","left"],function(e,b5){bH.cssHooks[b5]=a6(C.pixelPosition,function(b6,i){if(i){i=F(b6,b5);return X.test(i)?bH(b6).position()[b5]+"px":i}})});bH.each({Height:"height",Width:"width"},function(e,i){bH.each({padding:"inner"+e,content:i,"":"outer"+e},function(b5,b6){bH.fn[b6]=function(ca,b9){var b8=arguments.length&&(b5||typeof ca!=="boolean"),b7=b5||(ca===true||b9===true?"margin":"border");return aA(this,function(cc,cb,cd){var ce;if(bH.isWindow(cc)){return cc.document.documentElement["client"+e]}if(cc.nodeType===9){ce=cc.documentElement;return Math.max(cc.body["scroll"+e],ce["scroll"+e],cc.body["offset"+e],ce["offset"+e],ce["client"+e])}return cd===undefined?bH.css(cc,cb,b7):bH.style(cc,cb,cd,b7)},i,b8?ca:undefined,b8,null)}})});bH.fn.size=function(){return this.length};bH.fn.andSelf=bH.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return bH})}var bj=a4.jQuery,H=a4.$;bH.noConflict=function(e){if(a4.$===bH){a4.$=H}if(e&&a4.jQuery===bH){a4.jQuery=bj}return bH};if(typeof au===aB){a4.jQuery=a4.$=bH}return bH}));

;(function($){
/**
 * jqGrid Chinese Translation for v3.6
 * waiting 2010.01.18
 * http://waiting.javaeye.com/
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * 
 * update 2010.05.04
 *		add double u3000 SPACE for search:odata to fix SEARCH box display err when narrow width from only use of eq/ne/cn/in/lt/gt operator under IE6/7
**/
$.grid = {
	defaults : {
		recordtext: "{0} - {1}\u3000共 {2} 条",	// 共字前是全角空格
		pagetext:"共 {0} 页",
		emptyrecords: "无数据显示",
		loadtext: "数据加载中...",
		pgtext : " {0} 共 {1} 页"
	},
	search : {
		caption: "搜索...",
		Find: "查找",
		Reset: "重置",
		odata : ['等于\u3000\u3000', '不等\u3000\u3000', '小于\u3000\u3000', '小于等于','大于\u3000\u3000','大于等于', 
			'开始于','不开始于','属于\u3000\u3000','不属于','结束于','不结束于','包含\u3000\u3000','不包含'],
		groupOps: [	{ op: "AND", text: "所有" },	{ op: "OR",  text: "任一" }	],
		matchText: " 匹配",
		rulesText: " 规则"
	},
	edit : {
		bUpdate:'更新',
		addCaption: "添加记录",
		editCaption: "编辑记录",
		bSubmit: "提交",
		bCancel: "取消",
		bClose: "关闭",
		saveData: "数据已改变，是否保存？",
		bYes : "是",
		bNo : "否",
		bExit : "取消",
		msg: {
			required:"此字段必需",
			number:"请输入有效数字",
			minValue:"输值必须大于等于 ",
			maxValue:"输值必须小于等于 ",
			email: "这不是有效的e-mail地址",
			integer: "请输入有效整数",
			date: "请输入有效时间",
			url: "无效网址。前缀必须为 ('http://' 或 'https://')",
			nodefined : " 未定义！",
			novalue : " 需要返回值！",
			customarray : "自定义函数需要返回数组！",
			customfcheck : "Custom function should be present in case of custom checking!"
			
		}
	},
	view : {
		caption: "查看记录",
		bClose: "关闭"
	},
	del : {
		caption: "删除",
		msg: "删除所选记录？",
		bSubmit: "删除",
		bCancel: "取消"
	},
	nav : {
		edittext: "",
		edittitle: "编辑所选记录",
		addtext:"",
		addtitle: "添加新记录",
		deltext: "",
		deltitle: "删除所选记录",
		searchtext: "",
		searchtitle: "查找",
		refreshtext: "",
		refreshtitle: "刷新表格",
		alertcap: "注意",
		alerttext: "请选择记录",
		viewtext: "",
		viewtitle: "查看所选记录"
	},
	col : {
		caption: "选择列",
		bSubmit: "确定",
		bCancel: "取消"
	},
	errors : {
		errcap : "错误",
		nourl : "没有设置url",
		norecords: "没有要处理的记录",
		model : "colNames 和 colModel 长度不等！"
	},
	formatter : {
		integer : {thousandsSeparator: ",", defaultValue: '0'},
		number : {decimalSeparator:".", thousandsSeparator: " ", decimalPlaces: 2, defaultValue: '0.00'},
		currency : {decimalSeparator:".", thousandsSeparator: " ", decimalPlaces: 2, prefix: "", suffix:"", defaultValue: '0.00'},
		date : {
			dayNames:   [
				"Sun", "Mon", "Tue", "Wed", "Thr", "Fri", "Sat",
		         "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"
			],
			monthNames: [
				"Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec",
				"January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"
			],
			AmPm : ["am","pm","AM","PM"],
			S: function (j) {return j < 11 || j > 13 ? ['st', 'nd', 'rd', 'th'][Math.min((j - 1) % 10, 3)] : 'th'},
			srcformat: 'Y-m-d',
			newformat: 'm-d-Y',
			masks : {
				ISO8601Long:"Y-m-d H:i:s",
				ISO8601Short:"Y-m-d",
				ShortDate: "Y/j/n",
				LongDate: "l, F d, Y",
				FullDateTime: "l, F d, Y g:i:s A",
				MonthDay: "F d",
				ShortTime: "g:i A",
				LongTime: "g:i:s A",
				SortableDateTime: "Y-m-d\\TH:i:s",
				UniversalSortableDateTime: "Y-m-d H:i:sO",
				YearMonth: "F, Y"
			},
			reformatAfterEdit : false
		},
		baseLinkUrl: '',
		showAction: '',
		target: '',
		checkbox : {/*disabled:true*/},
		idName : 'id'
	}
};
})(jQuery);

/*!
 * jQuery coral Core 4.0.1
 */
if(document.documentMode!==undefined){if(document.documentMode<=5){alert("CoralUI can not be used in this ('quirks') mode!")}}var CoralUIVersion="4.1.5";var Coral={cc:function(a,b){$.parser.component.push({componentName:a,id:b})}};var validAction=false,timer=false,resizable=true;(function($,undefined){$.coral=$.coral||{};$.coral.openTag=true;$.coral.strictLayout=false;$(document).unbind(".clearTips").bind("click.clearTips",function(e){if(validAction){validAction=false;e.stopPropagation();return}$(".coral-validate-state-error").slideUp(100,function(e){$(this).remove()});validAction=false});$(document).unbind("mousewheel").bind("mousewheel",function(e){var validateSuffix=$.validate.validateSuffix();setTimeout(function(){$.each($(".coral-validate-state-error"),function(idx,item){var className=$(item).attr("class");var componentId=className.substring(0,className.indexOf(validateSuffix));var $field=$("#"+componentId).find(".ctrl-init");var $validator=$field.parents(".coral-validate");$(item).remove();$validator.validate("validItem",$field,null,true)})},0)});$.coral.getStyles=function(el){if(window.getComputedStyle){var styles=window.getComputedStyle(el,null);return styles}else{if(document.documentElement.currentStyle){var styles=el.currentStyle;return styles}}};$.coral.fitParent=function($ele,fit){fit=(fit==undefined?true:fit);var parent=$ele.parent().closest(".ctrl-fit-element")[0];parent=$(parent);if(fit){if(!parent.hasClass("coral-noscroll")){parent.addClass("coral-noscroll");if(parent.attr("tagName")=="BODY"){$("html").addClass("coral-panel-fit")}}}else{if(parent.hasClass("coral-noscroll")){parent.removeClass("coral-noscroll");if(parent.attr("tagName")=="BODY"){$("html").removeClass("coral-panel-fit")}}}return{width:parent.width(),height:parent.height()}};$.coral.getLeft=function(my,of){var left=of.offset().left;if(left+my.outerWidth()>$(window).outerWidth()+$(document).scrollLeft()){left=$(window).outerWidth()+$(document).scrollLeft()-my.outerWidth()
}if(left<0){left=0}return left};$.coral.getTop=function(my,of,direction){var top=of.offset().top+of.outerHeight();if(direction=="up"){top=of.offset().top-my.outerHeight()}else{if(top+my.outerHeight()>$(window).outerHeight()+$(document).scrollTop()){top=of.offset().top-my.outerHeight()}if(top<$(document).scrollTop()){top=of.offset().top+of.outerHeight()}}return top};$.coral.findComponent=function(selector,context){var component=[];if(!selector){selector=".ctrl-init"}var init=$(selector,context);var rclass=/[\t\r\n]/g;if(init.length){$.each(init,function(){var name="",className=this.className.replace(rclass," ").split(" "),i=0,l=className.length;for(;i<l;i++){name=$(this).attr("component-role");if(name=="datepicker"){component.push([{element:$(this),name:name}])}else{component.push($(this)[name]("instance"))}break}})}return component};$.coral.setIsLabel=function(isSet,context){var fields=$.coral.findComponent(".ctrl-form-element",context),i=0,l=fields.length;for(i;i<l;i++){var c=fields[i];if(c instanceof Array){$(c[0].element)[c[0].name]("option","isLabel",isSet)}else{c._setOption("isLabel",isSet);if(c.element.hasClass("hasTooltip")){if(isSet==false){c.element.tooltip("enable")}else{c.element.tooltip("disable")}}}}};$.coral.setReadOnly=function(isSet,context){var fields=$.coral.findComponent(".ctrl-form-element",context),i=0,l=fields.length;for(i;i<l;i++){var c=fields[i];if(c instanceof Array){$(c[0].element)[c[0].name]("option","readonly",isSet)}else{c._setOption("readonly",isSet);if(c.element.hasClass("hasTooltip")){if(isSet==false){c.element.tooltip("enable")}else{c.element.tooltip("disable")}}}}};$.coral.renderComponent=function(context){var component=[];var selector=".coral-no-rendered";if(!context){context="body"}var init=$(selector,context);var rclass=/[\t\r\n]/g;if(init.length){$.each(init,function(){var name="",className=this.className.replace(rclass," ").split(" "),i=0,l=className.length;for(;i<l;i++){name=$(this).attr("component-role");rendered=$(this).prop("rendered");
if(!rendered){$(this).removeClass("coral-no-rendered");var ins=$(this)[name]("instance");$(this).addClass("ctrl-init ctrl-init-"+this.componentName);ins._create();ins._renderComponent()}break}})}return component};$.coral.valid={};$.coral.valid=function(element){validAction=true;var count=0,excluded=$.data(element,"excluded"),validElements=element.find($("[class*='coral-validation-']")),errTipsType=null,hasErrorTips=true;if(excluded&&"string"===typeof excluded){excluded=$.map(excluded.split(","),function(item){return $.trim(item)})}if("form"===element[0].tagName.toLowerCase()){errTipsType=element.form("option","errTipsType")}validElements.each(function(){var className=this.className,coralType="",clsArray=className.split(" ");for(var item in clsArray){if(clsArray[item].indexOf("coral-validation-")>=0){coralType=clsArray[item].substr(clsArray[item].indexOf("coral-validation-")+17);break}}if(_isExclud($(this)[coralType]("component"),excluded)){return}if("none"===errTipsType){hasErrorTips=false}if(!_valid($(this),coralType,hasErrorTips)){if("first"===errTipsType){hasErrorTips=false}++count}});if(count>0){return false}else{return true}function _isExclud($component,excluded){if(!excluded){return false}var length=excluded.length;for(var i=0;i<length;i++){if("string"===typeof excluded[i]&&$component.is(excluded[i])){return true}}return false}function _valid($element,coralType,hasErrorTips){if("datepicker"==coralType){return $element[coralType]("valid",$element,hasErrorTips)}if($.inArray(coralType,["textbox","combobox","combotree","radio","radiolist","checkbox","checkboxlist"])>-1){return $element[coralType]("valid",hasErrorTips)}}};jQuery.support.placeholder=(function(){var i=document.createElement("input");return"placeholder" in i})();var uuid=0,runiqueId=/^coral-id-\d+$/;$.extend($.coral,{version:"4.0.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},zindex:1000});var timer=false;
$.fn.extend({scrollParent:function(includeHidden){var position=this.css("position"),excludeStaticParent=position==="absolute",overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);if(excludeStaticParent&&parent.css("position")==="static"){return false}return overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"))}).eq(0);return position==="fixed"||!scrollParent.length?$(this[0].ownerDocument||document):scrollParent},uniqueId:function(prefix){return this.each(function(){if(!this.id){if(prefix){prefix+="-"}else{prefix=""}this.id=prefix+"coral-id-"+(++uuid)}})},removeUniqueId:function(){return this.each(function(){if(runiqueId.test(this.id)){$(this).removeAttr("id")}})},closestComponent:function(selector){return this.each(function(){$(this).closest(".ctrl-init-"+selector)})}});function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false}img=$("img[usemap='#"+mapName+"']")[0];return !!img&&visible(img)}return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden"}).length}$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return !!$.data(elem,dataName)}}):function(elem,i,match){return !!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}});if(!$("<a>").outerWidth(1).jquery){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};
function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0}if(margin){size-=parseFloat($.css(elem,"margin"+this))||0}});return size}$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this)}return this.each(function(){$(this).css(type,reduce(this,size)+"px")})};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size)}return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px")})}})}if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}}if($("<a>").data("a-b","a").removeData("a-b").data("a-b")){$.fn.removeData=(function(removeData){return function(key){if(arguments.length){return removeData.call(this,$.camelCase(key))}else{return removeData.call(this)}}})($.fn.removeData)}$.coral.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.fn.extend({focus:(function(orig){return function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem)}},delay)}):orig.apply(this,arguments)}})($.fn.focus),disableSelection:(function(){var eventType="onselectstart" in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(eventType+".coral-disableSelection",function(event){event.preventDefault()})}})(),enableSelection:function(){return this.unbind(".coral-disableSelection")},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex)}if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value}}elem=elem.parent()}}return 0}});$.extend($.coral,{plugin:{add:function(module,option,set){var i,proto=$.coral[module].prototype;
for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]])}},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(!set){return}if(!allowDisconnected&&(!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11)){return}for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args)}}}},toFunction:function(fn){var ns=null,i=0,_fn=null;if($.isFunction(fn)){return fn}if(typeof fn==="string"){if($.isFunction(window[fn])){return window[fn]}try{_fn=eval("("+fn+")");if($.isFunction(_fn)){return _fn}}catch(e){}if(fn.indexOf(".")>0){ns=fn.split(".");_fn=window[ns[0]];if(!_fn){return null}for(i=1;i<ns.length;i++){_fn=_fn[ns[i]];if(!_fn){return null}}}return _fn}return fn}});$.extend({loadJson:function(url,params){var data=null;$.ajax({url:url,type:"get",dataType:"json",async:false,data:params,success:function(rlt){data=rlt},error:function(req,error,errThrow){$.error("function load json error: "+error)}});return data},isCoral:function(elem,type){if(arguments.length<2||!elem){return false}if(elem.jquery){elem=elem.get(0)}return !!$.data(elem,"coral-"+type)}});$.extend($.coral,{scriptPath:function(){var scripts=document.getElementsByTagName("script");var script=scripts[scripts.length-1];var path=script.src.substring(0,script.src.lastIndexOf("/")+1);return path}(),contextPathFun:function(){var curWwwPath=window.document.location.href;var pathName=window.document.location.pathname;var pos=curWwwPath.indexOf(pathName);var localhostPaht=curWwwPath.substring(0,pos);var projectName=pathName.substring(0,pathName.substr(1).indexOf("/")+1);return projectName},adjusted:function(element){var maxHeight,$element=$(element),parent=$element.parent();maxHeight=parent.height();$element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return}maxHeight-=elem.outerHeight(true)});$element.height(Math.max(0,maxHeight-$element.innerHeight()+$element.height())).addClass("coral-scroll");
$.coral.refreshAllComponent(element);$.coral.fitParent(parent,true)},beforeDoOverflow:function(element){},doOverflow:function(element){},isFit:function(com,pCom){var closestPCom=$(com).parent().closest(".ctrl-fit-element");if(!closestPCom.length){closestPCom=$("body")}var isBestFit=closestPCom.length&&(closestPCom[0]===$(pCom)[0]||closestPCom.find(pCom).length);return isBestFit},refreshAllComponent:function(parentComponent){$.coral.beforeDoOverflow();if(typeof(parentComponent)=="undefined"){parentComponent="body"}var layoutSet=null;if($.coral.strictLayout){layoutSet=$(parentComponent).children(".fill:visible, .ctrl-fit-element:visible, .coral-adjusted:visible")}else{layoutSet=$(parentComponent).find(".ctrl-fit-element:visible, .fill:visible, .coral-adjusted:visible")}layoutSet.each(function(){if($(this).hasClass("coral-adjusted")||$(this).hasClass("fill")){$(this).addClass("ctrl-fit-element coral-scroll")}var componentId=$(this).attr("component-id"),$ele=$("#"+componentId),type=$ele.attr("component-role");if(!type){if($(this).hasClass("coral-adjusted")||$(this).hasClass("fill")){$.coral.adjusted(this)}}else{if($.coral.isFit($ele[type]("component"),parentComponent)){if(type=="panel"){$ele[type]("resizePanel")}else{$ele[type]("refresh")}}}});$.coral.doOverflow()}});$.coral.contextPath=$.coral.contextPathFun.apply()})(jQuery);(function(a){a.fn.caret=function(h){var g=this[0];var d=g.contentEditable==="true";if(arguments.length==0){if(window.getSelection){if(d){g.focus();var c=window.getSelection().getRangeAt(0),b=c.cloneRange();b.selectNodeContents(g);b.setEnd(c.endContainer,c.endOffset);return b.toString().length}return g.selectionStart}if(document.selection){g.focus();if(d){var c=document.selection.createRange(),b=document.body.createTextRange();b.moveToElementText(g);b.setEndPoint("EndToEnd",c);return b.text.length}var h=0,e=g.createTextRange(),b=document.selection.createRange().duplicate(),f=b.getBookmark();e.moveToBookmark(f);while(e.moveStart("character",-1)!==0){h++
}return h}if(g.selectionStart){return g.selectionStart}return 0}if(h==-1){h=this[d?"text":"val"]().length}if(window.getSelection){if(d){g.focus();window.getSelection().collapse(g.firstChild,h)}else{g.setSelectionRange(h,h)}}else{if(document.body.createTextRange){if(d){var e=document.body.createTextRange();e.moveToElementText(g);e.moveStart("character",h);e.collapse(true);e.select()}else{var e=g.createTextRange();e.move("character",h);e.select()}}}if(!d){g.focus()}return h}})(jQuery);

/*!
 * jQuery coral component 4.0.1
 */
(function(b,d){var a=0,c=Array.prototype.slice;b.cleanData=(function(e){return function(f){var h,j,g;for(g=0;(j=f[g])!=null;g++){try{h=b._data(j,"events");if(h&&h.remove){b(j).triggerHandler("remove")}}catch(k){}}e(f)}})(b.cleanData);b.component=function(e,f,m){var j,k,h,l,g={},i=e.split(".")[0];e=e.split(".")[1];j=i+"-"+e;if(!m){m=f;f=b.Component}b.expr[":"][j.toLowerCase()]=function(n){return !!b.data(n,j)};b[i]=b[i]||{};k=b[i][e];h=b[i][e]=function(n,o){if(!this._createComponent){return new h(n,o)}if(arguments.length){n=b.component.extend({},b.fn[e].defaults||{},this._parseOptions(o),n);this._createComponent(n,o)}};b.extend(h,k,{version:m.version,_proto:b.extend({},m),_childConstructors:[]});l=new f();l.options=b.component.extend({},l.options);b.each(m,function(o,n){if(!b.isFunction(n)){g[o]=n;return}g[o]=(function(){var p=function(){return f.prototype[o].apply(this,arguments)},q=function(r){return f.prototype[o].apply(this,r)};return function(){var t=this._super,r=this._superApply,s;this._super=p;this._superApply=q;s=n.apply(this,arguments);this._super=t;this._superApply=r;return s}})()});h.prototype=b.component.extend(l,{componentEventPrefix:k?(l.componentEventPrefix||e):e},g,{constructor:h,namespace:i,componentName:e,componentFullName:j});if(k){b.each(k._childConstructors,function(o,p){var n=p.prototype;b.component(n.namespace+"."+n.componentName,h,p._proto)});delete k._childConstructors}else{f._childConstructors.push(h)}b.component.bridge(e,h);return h};b.component.extend=function(j){var f=c.call(arguments,1),i=0,e=f.length,g,h;for(;i<e;i++){for(g in f[i]){h=f[i][g];if(f[i].hasOwnProperty(g)&&h!==d){if(b.isPlainObject(h)){j[g]=b.isPlainObject(j[g])?b.component.extend({},j[g],h):b.component.extend({},h)}else{j[g]=h}}}}return j};b.component.bridge=function(f,e){var g=e.prototype.componentFullName||f;b.fn[f]=function(j){var h=typeof j==="string",i=c.call(arguments,1),k=this;j=!h&&i.length?b.component.extend.apply(null,[j].concat(i)):j;
if(h){this.each(function(){var m,l=b.data(this,g);if(!l){return b.error("cannot call methods on "+f+" prior to initialization; attempted to call method '"+j+"'")}if(j==="instance"){k=l;return false}if(!b.isFunction(l[j])||j.charAt(0)==="_"){return b.error("no such method '"+j+"' for "+f+" component instance")}m=l[j].apply(l,i);if(m!==l&&m!==d){k=m&&m.jquery?k.pushStack(m.get()):m;return false}})}else{this.each(function(){var l=b.data(this,g);if(l){l.option(j||{});if(l._init){l._init()}}else{b.data(this,g,new e(j,this))}})}return k}};b.Component=function(){};b.Component._childConstructors=[];b.Component.prototype={componentName:"component",componentEventPrefix:"",defaultElement:"<div>",castProperties:null,options:{disabled:false,authorized:true,rendered:true,onCreate:null},formFieldArray:["autocomplete","autocompletetree","combobox","combotree","combogrid","checkbox","checkboxlist","datepicker","radio","radiolist","spinner","textbox","fileuploader"],panelArray:["accordion","dialog","form","grid","layout","panel","tabs","toolbar"],_createComponent:function(e,f){var g=this;f=b(f||this.defaultElement||this)[0];this.element=b(f);this.uuid=a++;this.eventNamespace="."+this.componentName+this.uuid;if(!this.element.attr("component-role")){this.element.attr("component-role",this.componentName)}this.options=b.component.extend({},this.options,this._getCreateOptions(),e);if(!this.options.authorized||this.options.authorized==="false"){this.element.remove()}this.bindings=b();this.hoverable=b();this.focusable=b();if(f!==this){b.data(f,this.componentFullName,this);this._on(true,this.element,{remove:function(h){if(h.target===f){this.destroy()}}});this.document=b(f.style?f.ownerDocument:f.document||f);this.window=b(this.document[0].defaultView||this.document[0].parentWindow)}this.element.prop("rendered",!!this.options.rendered);if(!this.options.rendered){this.element.addClass("coral-no-rendered");return}else{this.element.addClass("ctrl-init ctrl-init-"+this.componentName);this._create()
}this._renderComponent()},_renderComponent:function(){if(this.options.componentCls){this.component().addClass(this.options.componentCls)}if(this.options.cls){this.element.addClass(this.options.cls)}if(b.inArray(this.componentName,this.formFieldArray)>-1){this.element.addClass("ctrl-form-element coral-validation-"+this.componentName);b.validate.addField(this.element,this.options)}if(b.inArray(this.componentName,this.panelArray)>-1){this.component().addClass("ctrl-fit-element")}if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)}else{this.options.id=this.element.uniqueId(this.componentName).attr("id")}}this.component().attr("component-id",this.options.id);this._trigger("onCreate",null,this._getCreateEventData());this._init()},_parseOptions:function(f){var e=b(f);return b.extend({},b.parser.parseOptions(f,[],this.castProperties))},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,valid:function(){var e={hasTips:false,element:this.element};return(b.validate.validateField(null,e).length>0?false:true)},isValid:function(){},destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.componentName).removeData(this.componentFullName).removeData(b.camelCase(this.componentFullName));this.element.removeClass("ctrl-form-element ctrl-init ctrl-init-"+this.componentName);this.component().unbind(this.eventNamespace).removeAttr("aria-disabled").removeAttr("component-role").removeClass(this.componentFullName+"-disabled coral-state-disabled");this.element.removeAttr("component-role");this.element.removeAttr("data-options");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("coral-state-hover");this.focusable.removeClass("coral-state-focus")},_destroy:b.noop,component:function(){return this.element},option:function(h,j){var e=h,k,g,f;if(arguments.length===0){return b.component.extend({},this.options)}if(typeof h==="string"){e={};
k=h.split(".");h=k.shift();if(k.length){g=e[h]=b.component.extend({},this.options[h]);for(f=0;f<k.length-1;f++){g[k[f]]=g[k[f]]||{};g=g[k[f]]}h=k.pop();if(arguments.length===1){return g[h]===d?null:g[h]}g[h]=j}else{if(arguments.length===1){return this.options[h]===d?null:this.options[h]}e[h]=j}}this._setOptions(e);return this},_setOptions:function(e){var f;for(f in e){this._setOption(f,e[f]);this.element.trigger("onOptionChange",{key:f,value:e[f]})}return this},_setOption:function(e,f){this.options[e]=f;if(e==="disabled"){this.component().toggleClass(this.componentFullName+"-disabled coral-state-disabled",!!f).attr("aria-disabled",f);if(f){this.hoverable.removeClass("coral-state-hover");this.focusable.removeClass("coral-state-focus")}}return this},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},show:function(){this.component().removeClass("coral-state-hidden").show()},hide:function(){this.component().addClass("coral-state-hidden").hide()},_pinyinEngine:function(){return new pinyinEngine()},_pinyinSetCache:function(h,f,g){for(var e in g){h.setCache([g[e][f]],g[e])}return h},_pinyinSearch:function(g,f,h){var e=[];g.search(f,function(i){e.push(i)});h(e)},_on:function(h,g,f){var i,e=this;if(typeof h!=="boolean"){f=g;g=h;h=false}if(!f){f=g;g=this.element;i=this.component()}else{g=i=b(g);this.bindings=this.bindings.add(g)}b.each(f,function(o,n){function l(){if(!h&&(e.options.disabled===true||b(this).hasClass("coral-state-disabled"))){return}return(typeof n==="string"?e[n]:n).apply(e,arguments)}if(typeof n!=="string"){l.guid=n.guid=n.guid||l.guid||b.guid++}var m=o.match(/^([\w:-]*)\s*(.*)$/),k=m[1]+e.eventNamespace,j=m[2];if(j){i.delegate(j,k,l)}else{g.bind(k,l)}})},_off:function(f,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;f.unbind(e).undelegate(e)},_delay:function(h,g){function f(){return(typeof h==="string"?e[h]:h).apply(e,arguments)}var e=this;return setTimeout(f,g||0)
},_hoverable:function(e){this.hoverable=this.hoverable.add(e);this._on(e,{mouseenter:function(f){b(f.currentTarget).addClass("coral-state-hover")},mouseleave:function(f){b(f.currentTarget).removeClass("coral-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e);this._on(e,{focusin:function(f){b(f.currentTarget).addClass("coral-state-focus")},focusout:function(f){b(f.currentTarget).removeClass("coral-state-focus")}})},addNoTrigger:function(e){this.options.noTriggerEvent.push(e)},_trigger:function(k,f,g){var h=this.options.noTriggerEvent||[];if(h.length){for(var j=0;j<h.length;j++){if(k==h[j]){h.splice(j,1);return}}}var e,m,l=b.isFunction(k)?k:b.coral.toFunction(this.options[k]),n={};g=g||{};f=b.Event(f);f.type=(k===this.componentEventPrefix?k:this.componentEventPrefix+k).toLowerCase();f.target=this.element[0];m=f.originalEvent;if(m){for(e in m){if(!(e in f)){f[e]=m[e]}}}this.element.trigger(f,g);f.data=f.data||{};b.extend(f.data,this.options.dataCustom);return !(b.isFunction(l)&&l.apply(this.element[0],[f].concat(g))===false||f.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(f,e){b.Component.prototype["_"+f]=function(i,h,k){if(typeof h==="string"){h={effect:h}}var j,g=!h?f:h===true||typeof h==="number"?e:h.effect||e;h=h||{};if(typeof h==="number"){h={duration:h}}j=!b.isEmptyObject(h);h.complete=k;if(h.delay){i.delay(h.delay)}if(j&&b.effects&&b.effects.effect[g]){i[f](h)}else{if(g!==f&&i[g]){i[g](h.duration,h.easing,k)}else{i.queue(function(l){b(this)[f]();if(k){k.call(i[0])}l()})}}}})})(jQuery);

(function(a){a.component("coral.formelement",{version:"4.0.2",options:{},getValidateValue:function(){return this.getValue()},clearError:function(){this.component().removeClass("hasErrorIcon coral-validate-error");this.component().find(".coral-errorIcon").remove();this.element.prop("isError",false)}})})(jQuery);

(function(a){a.component("coral.inputbase",a.coral.formelement,{version:"4.0.2",options:{inputButtonGutter:5},_setOption:function(b,d){var c=this;this._super(b,d);this.component().find(".button").each(function(){var h=a(this).attr("data-pos");var e=h.split("_");if(b==="isLabel"){if(d){a(this).hide();if(e[0]=="outer"){c.component().css("padding-"+e[1],0)}else{c.component().find(".coral-textbox-border").css("padding-"+e[1],0)}}else{a(this).show();var g=a(this).outerWidth();if(e[0]=="outer"){c.component().css("padding-"+e[1],g+c.options.inputButtonGutter)}else{c.component().find(".coral-textbox-border").css("padding-"+e[1],g)}}}if(b==="readonly"||b==="disable"||b==="isLabel"){var f=a(this).find(".ctrl-init-button");if(d){f.button("disable")}else{f.button("enable")}}})},_outerButtons:function(){this.uiDialogOuterButtonPanel=a("<span/>",{className:"coral-outerbuttonset coral-corner-all"});this.component().append(this.uiDialogOuterButtonPanel);this._createtoolPanelItems(this.options.buttonOptions,null,this.uiDialogOuterButtonPanel,"button");this.component().css("padding-right",this.uiDialogOuterButtonPanel.outerWidth()+8)},_createButtonPanel:function(){var g=false,e,h="right",j="inner",d="innerRight",b="prepend",f=this.options.buttons;for(e=0;e<this.options.buttons.length;e++){if(f[e]["innerLeft"]){d="innerLeft";h="left";g=true}if(f[e]["innerRight"]){d="innerRight";h="right";b="append";g=true}if(f[e]["outerRight"]){d="outerRight";h="right";j="outer";b="append";g=true}if(f[e]["outerLeft"]){d="outerLeft";h="left";j="outer";g=true}if(f[e]["floatRight"]){d="floatRight";j="float";b="append";g=true}if(f[e]["floatLeft"]){d="floatLeft";h="left";j="float";g=true}var c=f[e][d]?f[e][d][0]:f[e];if(c.type&&c.type=="combobox"){this._initToolPanel(j,d,h,b,e,"combobox")}else{this._initToolPanel(j,d,h,b,e,"button")}}if(!g){this.uiDialogButtonPanel=a("<span class='"+d+" coral-textbox-btn-icons coral-buttonset coral-corner-"+h+" '></span>");this._createtoolPanelItems(this.options.buttons,h,this.uiDialogButtonPanel,j,"button");
this.elementBorder.append(this.uiDialogButtonPanel);this.elementBorder.css("padding-right",this.uiDialogButtonPanel.outerWidth());this.uiDialogButtonPanel.css("right",0);this.rightPos=this.uiDialogButtonPanel.outerWidth()}},_initToolPanel:function(h,d,g,b,c,f){var e=this;if(h=="inner"){this.uiButtonPanel=a("<span class='button "+d+" coral-buttonset coral-inner coral-corner-"+g+"' data-pos="+h+"_"+g+"></span>");this.buttonPanelWraper=this.elementBorder}else{this.uiButtonPanel=a("<span class='button "+d+" coral-outerbuttonset coral-outer coral-corner-all' data-pos="+h+"_"+g+"></span>");this.buttonPanelWraper=this.component()}this.buttonPanelWraper[b](this.uiButtonPanel);this._createtoolPanelItems(this.options.buttons[c][d],g,this.uiButtonPanel,h,f);this._positionToolPanel(h,g)},_positionToolPanel:function(d,c){var b=this.uiButtonPanel.outerWidth()+1;if(d==="inner"){this.elementBorder.css("padding-"+c,b);this.uiButtonPanel.css(c,0)}else{if(d==="float"){this.uiButtonPanel.css(c,-(b+this.options.inputButtonGutter))}else{if(d==="outer"){this.component().css("padding-"+c,b+this.options.inputButtonGutter);this.uiButtonPanel.css(c,0)}}}if(c==="left"){this.uiButtonPanel.css("width",b)}if(d+c==="innerright"){this.rightPos=this.uiButtonPanel.outerWidth()}},_createtoolPanelItems:function(b,e,c,g,f){var d=this;if(a.isEmptyObject(b)){b={}}if(b instanceof Array==false){b=[b]}a.each(b,function(m){var l="",j="coral-corner-all";if(g=="inner"&&e=="left"){if(m==0){l="coral-corner-left"}}else{if(g=="inner"&&e=="right"){if(m==(b.length-1)){l="coral-corner-right"}}else{j=""}}if(f==="button"){var o,n=a.extend({type:"button"},{click:this.click});this.click=this.onClick||this.click;delete this.onClick;o=this.click||a.noop;n.click=function(){o.apply(d.element[0],arguments)};delete this.click;var k=a("<button></button>",n).button(this);k.button("component").addClass(l).removeClass(j).appendTo(c);this.click=o}else{if(f==="combobox"){delete this.type;this.width="item";var h=a("<input type='text'/>").appendTo("body");
h.off(".changeLength").on("comboboxonload.changeLength",{target:h},function(i){d.resizeCombo.apply(i.data.target.combobox("instance"))}).on("comboboxonchange.changeLength",{target:h},function(i){d.resizeCombo.apply(i.data.target.combobox("instance"))}).combobox(this);h.combobox("component").addClass(l).removeClass(j).appendTo(c).addClass("coral-DropDownButton")}}})},resizeCombo:function(){var e=this,d=this.options,b=0;function f(j,i){var h=e.options.inputButtonGutter,g=0;if(j==="outer"){a(".coral-outer").children(".coral-DropDownButton").each(function(){g+=a(this).width()});e.component().closest(".coral-outer").css("width",g);e.component().closest(".coral-outer").closest(".coral-textbox").css("padding-"+i,g+h)}if(j==="inner"){if(e.component().hasClass("coral-inner-left")){a(".coral-inner").find(".coral-inner-left").each(function(){g+=a(this).width()});e.component().closest(".coral-textbox-border").css("padding-left",g)}}}if(this.component().closest(".coral-inner").length){f("inner","left")}var c=this.component().closest(".coral-outer");if(c.length){if(c.attr("data-pos")=="outer_right"){f("outer","right")}if(c.attr("data-pos")=="outer_left"){f("outer","left")}}}})})(jQuery);

(function(b){b.parser={auto:true,doneArr:[],component:[],onComplete:function(c){},onInit:function(c){},plugins:["tabs","layout","grid","panel","button","menubutton","treebutton","splitbutton","accordion","textbox","autocomplete","uploader","radio","radiolist","checkbox","checkboxlist","spinner","slider","combo","combobox","combotree","combogrid","datepicker","form","picgrid","tree","toolbar","progressbar","menu","menubar","contextmenu","slidemenu","tieredmenu","navigatemenu","dialog","subfield"],parse:function(e){b.parser.onInit.call(b.parser,e);var h=[];b.each(b.parser.component,function(k){var m=b.parser.component.shift();if(m){var l=b("#"+m.id);if(l.length){if(l[m.componentName]){l[m.componentName]()}else{h.push({name:m.componentName,jq:l})}if(m.id&&typeof(m.id)=="string"){var j=b("#"+m.id+"_s");if(j.length>0){j.remove()}}}}});for(var d=0;d<b.parser.plugins.length;d++){var c=b.parser.plugins[d];var f=b(".coralui-"+c,e);f.removeClass("coralui-"+c);if(f.length){if(f[c]){f[c]()}else{h.push({name:c,jq:f})}}}if(h.length){var g=[];for(var d=0;d<h.length;d++){g.push(h[d].name)}easyloader.load(g,function(){for(var k=0;k<h.length;k++){var j=h[k].name;var l=h[k].jq;l[j]()}b.parser.onComplete.call(b.parser,e);b.each(b.parser.doneArr,function(n){var m=b.parser.doneArr.shift();if(b.isFunction(m)){m.call(b.parser,e)}});b.coral.refreshAllComponent(e);b.parser.onComplete.call(b.parser,e);bb={}})}else{b.parser.onComplete.call(b.parser,e);b.each(b.parser.doneArr,function(k){var j=b.parser.doneArr.shift();if(b.isFunction(j)){j.call(b.parser,e)}});b.coral.refreshAllComponent(e);b.parser.onComplete.call(b.parser,e);bb={}}},parseOptions:function(h,j,e){var n=b(h),p=b.trim(n.attr("data-options")),g=null,m=null,c=null,f=0,d=null,l=null,k=null,o={};if(p){g=p.substring(0,1);m=p.substring(p.length-1,1);if(g!="{"){p="{"+p}if(m!="}"){p=p+"}"}o=(new Function("return "+p))()}if(j){c={};for(var f=0;f<j.length;f++){l=j[f];if(typeof l=="string"){if(l=="width"||l=="height"||l=="left"||l=="top"){c[l]=parseInt(h.style[l])||undefined
}else{c[l]=n.attr(l)}}else{for(d in l){k=l[d];if(k=="boolean"){c[d]=n.attr(d)?(n.attr(d)=="true"):undefined}else{if(k=="number"){c[d]=n.attr(d)=="0"?0:parseFloat(n.attr(d))||undefined}}}}}b.extend(o,c);c=null}if(e instanceof Array){for(f=0;f<e.length;f++){d=e[f];a(o,d.split("."))}}return o}};b(function(){if(!window.easyloader&&b.parser.auto){b.parser.parse()}});function a(g,d){var c=d.shift();if(d.length==0){if(g&&g[c]&&typeof g[c]==="string"){try{g[c]=(new Function("return "+g[c]))()}catch(f){}}}else{a(g[c],d)}}b.parseDone=function(c){b.parser.doneArr.push(c)}})(jQuery);

(function($,undefined){var uuid=0,validateSuffix="coralForm",validatePrefix="validate";$.validate={options:{onStatus:"onstatus",errorMode:1,errMsgPosition:"leftBottom",requiredMsg:"*必输项",triggers:{textbox:["onchange","onblur","onkeyup"],radio:["onchange","onblur"],checkbox:["onchange","onblur"],radiolist:["onchange","onblur"],checkboxlist:["onchange","onblur"],combobox:["onchange","onblur"],combotree:["onchange","onblur"],combogrid:["onchange","onblur"],datepicker:["onchange","onblur"],autocomplete:["onchange","onblur"],spinner:["onchange","onblur"],textboxlist:["onchange","onblur"],autocompletetree:["onchange","onblur"],fileuploader:["onchange"]}},validateSuffix:function(){return validateSuffix},_validate:function(json){var validType=json.validType,validValue=json.validValue,elementValue=json.elementValue,optionValue=json.optionValue,field=json.field,requiredMsg=json.requiredMsg,errMsg=json.errMsg;if(typeof validValue=="undefined"){return""}switch(validType){case"required":return this._checkRequired(validValue,elementValue,requiredMsg);case"minlength":return this._checkMinlength(validValue,elementValue,errMsg);case"maxlength":return this._checkMaxlength(validValue,elementValue,errMsg);case"pattern":return this._checkPattern(validValue,elementValue,errMsg);case"validType":return this._checkValidType(validValue,elementValue,optionValue,errMsg);case"valid":return this._checkValid(validValue,elementValue,errMsg,field);default:return""}},getFieldType:function(el){return $(el).attr("component-role")},validTypeNames:["required","minlength","maxlength","pattern","validType","valid"],validTypeOptions:{maxlength:{restrictInput:false,showTooltip:false},number:{restrictInput:false},naturalnumber:{restrictInput:false},integer:{restrictInput:false},"float":{restrictInput:false},zh:{restrictInput:false},letter:{restrictInput:false},uppercase:{restrictInput:false},lowercase:{restrictInput:false},zhOrNumOrLett:{restrictInput:false},ip:{restrictInput:false},port:{restrictInput:false},url:{restrictInput:false},email:{restrictInput:false},mobile:{restrictInput:false},idno:{restrictInput:false},zipcode:{restrictInput:false}},validateField:function(event,data){validAction=true;
data.validoptions=data.validoptions||{};var el=data.element,type=$.validate.getFieldType(el),component=data.notComponent?data.component:el[type]("component"),options=data.notComponent?data.validoptions:el[type]("option"),val=null,hasTips=data.hasTips,errorArrayOriginal=[],errorResults=[],errorMode=options.errorMode||data.validoptions.errorMode||$.validate.options.errorMode,errMsgPosition=options.errMsgPosition||data.validoptions.errMsgPosition||$.validate.options.errMsgPosition,readonly=options.readonly,disabled=options.disabled,isLabel=options.isLabel;if(!component.is(":visible")){hasTips=false}hasTips=false;if("hidden"==el.attr("type")){el.prop("isError",false);return errorResults}if(isLabel||disabled){el.prop("isError",false);return errorResults}if(data.notComponent){val=data.value}else{if("radio"===type||"checkbox"===type){val=el.prop("checked")?el[type]("getValue"):""}else{if("datepicker"===type){val=el[type]("option","value")}else{try{val=el[type]("getValidateValue")}catch(e){$.error("cannot call methods on "+type+" , please achieve the getValue method !")}}}}for(var i=0;i<this.validTypeNames.length;i++){var vt=this.validTypeNames[i],vo={optionValue:options.validType,requiredMsg:options.requiredMsg,elementValue:val,field:el,errMsg:options.errMsg,validValue:options[vt],validType:vt};if(options[vt]&&(vt=="required")?true:(val!="")){var error=$.validate._validate(vo);error==""||errorResults.push(error)}}if(errorResults.length>0){$.validate.hideErrors(component);if(!data.notComponent){if(errorMode==0){$(component).attr("data-errors",errorResults.toString())}else{var paddingRight=component.css("padding-right");component.append("<span class='cui-icon-notification2 coral-errorIcon' style='right:"+paddingRight+"' data-errors = '"+errorResults.toString()+"' ></span>");component.addClass("hasErrorIcon ")}}component.addClass("coral-validate-error ");var eventData=errorResults;$.validate._apply(options.onValidError,el,event,eventData);$(el).prop("isError",true);return errorResults
}else{$.validate._apply(options.onValidSuccess,el,event,{});component.removeClass("coral-validate-error");$.validate.hideErrors(component);$(el).prop("isError",false);$(component).removeAttr("data-errors");return errorResults}},_apply:function(callback,el,event,data){var fun=$.coral.toFunction(callback);if($.isFunction(fun)){return fun.apply(el,[event,data])}},_checkValid:function(validValue,elementValue,errMsg,field){var errMsgResult="";if(!!errMsg){errMsgResult=errMsg}var validResult=null;if(validValue){validResult=$.coral.toFunction(validValue).apply(field&&field[0],[{value:elementValue}]);if(typeof validResult=="object"&&typeof validResult.isValid=="boolean"){if(validResult.isValid){return""}else{if(!!validResult.errMsg){return validResult.errMsg}return errMsgResult==""?validResult.errMsg:errMsgResult}}if(typeof validResult=="boolean"){if(validResult){return errMsgResult}else{return errMsgResult}}}return""},_checkRequired:function(validValue,elementValue,requiredMsg){var errMsgResult=$.validate.options.requiredMsg;if(requiredMsg){errMsgResult=requiredMsg}if(typeof validValue=="boolean"&&validValue&&(""==$.trim(elementValue))){return errMsgResult}else{return""}},_checkMinlength:function(validValue,elementValue,errMsg){var errMsgResult="最少输入"+validValue+"个字符！";if(typeof errMsg!="undefined"&&errMsg!=null&&errMsg!=""){errMsgResult=errMsg}if(validValue&&this._isPositiveInteger(validValue)){var minLength=parseInt(validValue),nowLength=this._getByteLength(elementValue);if(nowLength<minLength){return errMsgResult}else{return""}}},_checkMaxlength:function(validValue,elementValue,errMsg){var errMsgResult="最多输入"+validValue+"个字符！";if(typeof errMsg!="undefined"&&errMsg!=null&&errMsg!=""){errMsgResult=errMsg}if(validValue&&this._isPositiveInteger(validValue)){var maxLength=parseInt(validValue),nowLength=this._getByteLength(elementValue);if(nowLength>maxLength){return errMsgResult}else{return""}}},_checkPattern:function(validValue,elementValue,errMsg){var errMsgResult="请输入匹配的字符串！";
if(typeof errMsg!="undefined"&&errMsg!=null&&errMsg!=""){errMsgResult=errMsg}if(validValue){var reg=eval(validValue.replace(/\/\//g,"/"));if(!reg.test($.trim(elementValue))){return errMsgResult}else{return""}}else{return""}},_checkValidType:function(validValue,elementValue,optionValue,errMsg){var errMsgResult="";if(typeof errMsg!="undefined"&&errMsg!=null&&errMsg!=""){errMsgResult=errMsg}var val=elementValue;switch(validValue){case"number":if(""==errMsgResult){errMsgResult="请输入数字！"}return this._isNumber(val)?"":errMsgResult;case"naturalnumber":if(""==errMsgResult){errMsgResult="请输入自然数！"}return this._isNaturalnumber(val)?"":errMsgResult;case"integer":if(""==errMsgResult){errMsgResult="请输入整数！"}return this._isInteger(val)?"":errMsgResult;case"float":if(""==errMsgResult){errMsgResult="请输入实数！"}return this._isFloat(val)?"":errMsgResult;case"zh":if(""==errMsgResult){errMsgResult="请输入汉字！"}return this._isZh(val)?"":errMsgResult;case"letter":if(""==errMsgResult){errMsgResult="请输入英文字母！"}return this._isLetter(val)?"":errMsgResult;case"uppercase":if(""==errMsgResult){errMsgResult="请输入大写英文字母！"}return this._isUppercase(val)?"":errMsgResult;case"lowercase":if(""==errMsgResult){errMsgResult="请输入小写英文字母！"}return this._isLowercase(val)?"":errMsgResult;case"zhOrNumOrLett":if(""==errMsgResult){errMsgResult="请输入汉字、数字、英文字母！"}return this._isZhOrNumOrLett(val)?"":errMsgResult;case"ip":if(""==errMsgResult){errMsgResult="请输入合法的计算机IP地址！"}return this._isIp(val)?"":errMsgResult;case"port":if(""==errMsgResult){errMsgResult="请输入合法的计算机IP地址端口号！"}return this._isPort(val)?"":errMsgResult;case"url":if(""==errMsgResult){errMsgResult="请输入合法的网页地址！"}return this._isUrl(val)?"":errMsgResult;case"email":if(""==errMsgResult){errMsgResult="请输入合法的电子邮件地址！"}return this._isEmail(val)?"":errMsgResult;case"mobile":if(""==errMsgResult){errMsgResult="请输入合法的手机号码！"}return this._isMobile(val)?"":errMsgResult;case"idno":if(""==errMsgResult){errMsgResult="请输入合法的身份证号码！"}return this._isIDNo(val)?"":errMsgResult;case"zipcode":if(""==errMsgResult){errMsgResult="请输入合法邮政编码！"
}return this._isZipcode(val)?"":errMsgResult;default:return""}},_isNumber:function(val){if(!isNaN(val)){return true}else{return false}},_isNaturalnumber:function(val){if(/^[0-9]+$/.test(val)){return true}else{return false}},_isInteger:function(val){if(/^(\+|-)?\d+$/.test(val)){return true}else{return false}},_isFloat:function(val){if(/^(\+|-)?\d+($|\.\d+$)/.test(val)){return true}else{return false}},_isZh:function(val){if(/^[\u4e00-\u9fa5]+$/.test(val)){return true}else{return false}},_isLetter:function(val){if(/^[A-Za-z]+$/.test(val)){return true}else{return false}},_isUppercase:function(val){if(/^[A-Z]+$/.test(val)){return true}else{return false}},_isLowercase:function(val){if(/^[a-z]+$/.test(val)){return true}else{return false}},_isZhOrNumOrLett:function(val){if(/^[0-9a-zA-Z\u4e00-\u9fa5]+$/.test(val)){return true}else{return false}},_isIp:function(val){if(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.test(val)){if(RegExp.$1<256&&RegExp.$2<256&&RegExp.$3<256&&RegExp.$4<256){return true}}else{return false}},_isPort:function(val){if(this._isNaturalnumber(val)&&val<65536){return true}else{return false}},_isUrl:function(val){if(/^http:\/\/(www\.)?.+.?$/.test(val)){return true}else{return false}},_isEmail:function(val){if(/^([-_A-Za-z0-9\.]+)@([_A-Za-z0-9]+\.)+[A-Za-z0-9]{2,3}$/.test(val)){return true}else{return false}},_isMobile:function(val){if(/^0?(13[0-9]|15[012356789]|18[0-9]|14[57])[0-9]{8}$/.test(val)){return true}else{return false}},_isIDNo:function(val){var aCity={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"};var iSum=0;var info="";var strIDno=val;var idCardLength=strIDno.length;if(!/^\d{17}(\d|x)$/i.test(strIDno)&&!/^\d{15}$/i.test(strIDno)){return false}strIDno=strIDno.replace(/x$/i,"a");if(aCity[parseInt(strIDno.substr(0,2))]==null){return false
}if(idCardLength==18){var sBirthday=strIDno.substr(6,4)+"-"+Number(strIDno.substr(10,2))+"-"+Number(strIDno.substr(12,2));var d=new Date(sBirthday.replace(/-/g,"/"));if(sBirthday!=(d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate())){return false}for(var i=17;i>=0;i--){iSum+=(Math.pow(2,i)%11)*parseInt(strIDno.charAt(17-i),11)}if(iSum%11!=1){return false}}else{if(idCardLength==15){sBirthday="19"+strIDno.substr(6,2)+"-"+Number(strIDno.substr(8,2))+"-"+Number(strIDno.substr(10,2));var d=new Date(sBirthday.replace(/-/g,"/"));var dd=d.getFullYear().toString()+"-"+(d.getMonth()+1)+"-"+d.getDate();if(sBirthday!=dd){return false}}}return true},_isZipcode:function(val){if(this._isNaturalnumber(val)&&val.length==6){return true}else{return false}},_isDate:function(val,format){var date=$.trim(val);var year,month,day,datePat,matchArray;if(/^(y{4})(-|\/)(M{1,2})\2(d{1,2})$/.test(format)){datePat=/^(\d{4})(-|\/)(\d{1,2})\2(\d{1,2})$/}else{if(/^(y{4})(年)(M{1,2})(月)(d{1,2})(日)$/.test(format)){datePat=/^(\d{4})年(\d{1,2})月(\d{1,2})日$/}else{if(format=="yyyyMMdd"){datePat=/^(\d{4})(\d{2})(\d{2})$/}else{return false}}}matchArray=date.match(datePat);if(matchArray==null){return false}if(/^(y{4})(-|\/)(M{1,2})\2(d{1,2})$/.test(format)){year=matchArray[1];month=matchArray[3];day=matchArray[4]}else{year=matchArray[1];month=matchArray[2];day=matchArray[3]}if(month<1||month>12){return false}if(day<1||day>31){return false}if((month==4||month==6||month==9||month==11)&&day==31){return false}if(month==2){var isleap=(year%4==0&&(year%100!=0||year%400==0));if(day>29){return false}if((day==29)&&(!isleap)){return false}}return true},showRequiredMark:function(ui){var $component=ui.component;$component.find("span.coral-validate-required:first").remove();$component.append("<span class='coral-validate-required'>*</span>")},hideRequiredMark:function(ui){var $component=ui.component;$component.find("span.coral-validate-required:first").remove()},showErrors:function(element,errorArray,tipsPosition,noDelay){var $component=element;
if(element.hasClass("coral-hasLabel")||element.hasClass("coral-validate-starBefore")){if(element.find(".coral-radio-label").length){element=element.find(".coral-radio-label")}else{if(element.find(".coral-checkbox-label").length){element=element.find(".coral-checkbox-label")}else{if(element.find(".coral-label").next().length){element=element.find(".coral-label").next()}else{if(element.find(".coral-validate-required").next().length){element=element.find(".coral-validate-required").next()}}}}}var hasForm=true,$form=$(element).parents("form"),container="tooltip",errorContent=errorArray.join("<br />"),$message,position,$element=$(element);var id=$element.attr("id"),$message=$("."+id+validateSuffix);var errorArrowClass="coral-validate-errorArrow-top";if($(element).parents("form").length!=0){container=$($form).form("option","container")}switch(tipsPosition){case"leftTop":errorArrowClass="coral-validate-errorArrow-top";break;case"leftBottom":errorArrowClass="coral-validate-errorArrow-bottom";break;case"rightTop":errorArrowClass="coral-validate-errorArrow-top";break;case"rightBottom":errorArrowClass="coral-validate-errorArrow-bottom";break;case"right":errorArrowClass="coral-validate-errorArrow-right";break;default:break}var arrow='<div class="'+errorArrowClass+'"></div>';if(id==null){id=$element.attr("id",validatePrefix+uuid++).attr("id")}if($("."+id+validateSuffix).length>0){$("."+id+validateSuffix).find(".error-content").html(errorContent)}else{$message=$("<div class='"+id+validateSuffix+" coral-validate-state-error'><div class='error-content'>"+errorContent+"</div>"+arrow+"</div>");var formContext=$(element).parents("form").attr("context");if($(formContext).length>0){$(formContext).append($message)}else{$(document.body).append($message)}position=$element.position()}var my="left top",at="right-20 top-"+($message.outerHeight()+8);switch(tipsPosition){case"leftTop":my="right top";at="left+"+$message.outerWidth()+" top-"+($message.outerHeight()+8);break;case"leftBottom":my="right bottom";
at="left+"+$message.outerWidth()+" bottom+"+($message.outerHeight()+8);break;case"rightTop":my="left top";at="right-20 top-"+($message.outerHeight()+8);break;case"rightBottom":my="left bottom";at="right-20 bottom+"+($message.outerHeight()+8);break;case"right":my="left middle";at="right+15 middle";break;default:break}$message.position({my:my,at:at,of:$element});$component.addClass("coral-validate-error");var that=this;setTimeout(function(){},2000)},clearErrors:function(context){var fields=$.coral.findComponent(".ctrl-form-element",context),i=0,l=fields.length;for(i;i<l;i++){var c=fields[i];if(c instanceof Array){$(c[0].element)[c[0].name]("clearError")}else{c.clearError()}}},clear:function(){$(".coral-validate-state-error").remove();$(".coral-errorIcon").remove();$(".coral-validate-error").removeClass("coral-validate-error")},hideErrors:function(element){var $element=$(element);var id=$element.attr("id");$("."+id+validateSuffix).remove();$(".coral-errorIcon",$element).remove();$element.removeClass("coral-validate-error hasErrorIcon ")},hideErrorsTip:function(element){var $element=$(element);var id=$element.attr("id");$("."+id+validateSuffix).remove()},_showTooltip:function(element,tips){var $element=$(element);var $message=$("<div class='coral-validate-tooltip'>"+tips+"</div>");$(document.body).after($message);var position=$element.position();$message.position({my:"left top",at:"right+20 top+"+($(element).height()/2-$message.outerHeight()/2),of:$element})},_hideTooltip:function(element){var $element=$(element);$(".coral-validate-tooltip").remove()},_getSubString:function(str,n){var r=/[^\x00-\xff]/g;if(str.replace(r,"mm").length<=n){return str}var m=Math.floor(n/2);for(var i=m;i<str.length;i++){if(str.substr(0,i).replace(r,"mm").length>=n){return str.substr(0,i)}}return str},_getByteLength:function(str){var length=0;for(var i=0;i<str.length;i++){var item=str.charAt(i);if(item.match(/[^\x00-\xff]/ig)!=null){length+=2}else{length+=1}}return length},_isPositiveInteger:function(str){return parseInt(str).toString()==="NaN"?false:(parseInt(str)>0?true:false)
},addField:function(fields,options){var that=this;fields.each(function(index,field){var $field=$(field),form=$field.closest(".coral-form-default"),formOptions=form.length>0?$.extend({},$.validate.options,form.form("option")):$.extend({},$.validate.options);if($field.closest(".coral-form-default").length===0&&$field.closest("form").length>0){return}var type=$.validate.getFieldType($field),component=$field[type]("component"),opts=$field[type]("option"),required=$field[type]("option","required"),name=$field[type]("option","name"),showStar=$field[type]("option","showStar"),starBefore=$field[type]("option","starBefore"),validTypeOptions=$field[type]("option","validTypeOptions"),triggers=$field[type]("option","triggers")||formOptions.triggers[type]||$.validate.options.triggers[type];if(!$.data($field[0],"inited")){$.data($field[0],"inited",true)}var events=$.map(triggers,function(item){return type+item+".field"}).join(" ");$field.off(".field").on(events,function(event,ui){$.validate.validItem($(this),event,true)});$field.off(".restrictInput").on(type+"onkeydown.restrictInput",function(event,ui){return $.validate.restrictInput($(this),event)});$field.off(".restrictInputup").on(type+"onkeyup.restrictInputup",function(event,ui){return $.validate.restrictInput($(this),event)});if($field[type]("option","maxlength")){$.validate.showTooltip($(this),validTypeOptions)}$field.off(".validate").on(type+formOptions.onStatus+".validate",function(event,ui){$.validate.validItem($(this),event,ui.hasTips)});$field.off(".prop").on("onOptionChange.prop",function(event,ui){$.validate._onFieldOptionChange($(this),event,ui)});if(typeof required==="boolean"&&required){$field.trigger("onOptionChange",{key:"required",value:required})}})},showTooltip:function(el,validTypeOptions){validTypeOptions=$.extend(true,{},$.validate.validTypeOptions,validTypeOptions);var showTooltip=validTypeOptions.maxlength.showTooltip;if(!showTooltip){return}$(el).attr("tooltips","tooltips");$(el).tooltip({items:"[tooltips]"}).addClass("hasTooltip");
$.validate.getMaxLength(el);$(el).on({keyup:function(e){$.validate.getMaxLength(el)}})},getMaxLength:function(el){var number=0,val=$(el).val(),type=$(el).attr("component-role"),isLabel=$(el)[type]("option","isLabel"),readonly=$(el)[type]("option","readonly"),readonlyInput=$(el)[type]("option","readonlyInput"),length=$.validate._getByteLength(val),maxlength=$(el)[type]("option","maxlength"),number=maxlength-length;if(isLabel==false&&readonly==false&&readonlyInput==false){$(el).tooltip("option","content","还可以输入"+number+"个字符")}},restrictInput:function(el,event,hasTips){var type=$(el).attr("component-role"),opts=$(el)[type]("option"),result=null;$.each($.validate.validTypeNames,function(i,d){var opt=opts[d],arg1=$.validate.validTypeOptions[d],arg2=$.validate.validTypeOptions[opt],argKey=null,argValue=null;if(opt&&arg1){argKey=d;argValue=arg1}else{if(opt&&arg2){argKey=opt;argValue=arg2}}if(argKey&&argValue){if(argValue.restrictInput){result=$.validate.forbiddenInput(argKey,event,el)}}});return result},forbiddenInput:function(arg,event,el){var type=$(el).attr("component-role"),opts=$(el)[type]("option"),result=null;var val=el.val();switch(arg){case"maxlength":if((!event.ctrlKey&&-1==$.inArray(event.keyCode,[8,46,9,37,39,35,36]))&&(""!==$.validate._checkMaxlength(opts[arg],val+String.fromCharCode(event.keyCode)))){var length=0,string=[];for(var i=0;i<val.length;i++){var item=val.charAt(i);if(item.match(/[^\x00-\xff]/ig)!==null){length+=2;if(length<=opts[arg]){string.push(item)}}else{length+=1;if(length<=opts[arg]){string.push(item)}}}el.val(string.join(""));result=false}break;case"number":if((!event.ctrlKey&&-1==$.inArray(event.keyCode,[8,46,9,37,39,35,36]))&&(event.keyCode<48||(event.keyCode>57&&event.keyCode<96)||event.keyCode>105)){result=false}var re=/^[0-9]+.?[0-9]*$/;if(!re.test(val)){$(el).val("")}break;default:break}return result},_changeRequiredMark:function($field,ui){var type=$field.attr("component-role");var form=$field.closest(".ctrl-init-form"),formOptions;if(form.length>0){formOptions=form.form("option")
}var showRequiredMark=$field[type]("option","showRequiredMark")||(formOptions&&formOptions.showRequiredMark)||$.validate.showRequiredMark;var hideRequiredMark=$field[type]("option","hideRequiredMark")||(formOptions&&formOptions.hideRequiredMark)||$.validate.hideRequiredMark;showRequiredMark=$.coral.toFunction(showRequiredMark);hideRequiredMark=$.coral.toFunction(hideRequiredMark);if(ui.value===true){showRequiredMark&&showRequiredMark.apply($field[0],[{component:$field[type]("component")}])}else{hideRequiredMark&&hideRequiredMark.apply($field[0],[{component:$field[type]("component")}])}},_onFieldOptionChange:function($field,e,ui){var type=$field.attr("component-role"),key=ui.key;switch(key){case"required":$.validate._changeRequiredMark($field,ui);$field[type]("clearError");case"isLabel":case"readonly":case"readonlyInput":$field[type]("clearError")}},validItem:function(el,event,hasTips){var options=this.options;var data={validoptions:options,hasTips:hasTips,element:el};var type=$(el).attr("component-role"),opts=$(el)[type]("option"),excluded=opts.excluded;if(excluded){return}$.validate.validateField(event,data)},setExcluded:function(isSet,context){var fields=$.coral.findComponent(".ctrl-form-element",$(context)),i=0,l=fields.length;for(i;i<l;i++){var c=fields[i];if(c instanceof Array){$(c[0].element)[c[0].name]("option","excluded",isSet);$(c[0].element)[c[0].name]("component").removeClass("coral-validate-error");$(c[0].element)[c[0].name]("component").removeAttr("data-errors");$(".coral-errorIcon",$(c[0].element)[c[0].name]("component")).remove();$(c[0].element).prop("isError",false)}else{c._setOption("excluded",isSet);c.component().removeClass("coral-validate-error");c.component().removeAttr("data-errors");$(".coral-errorIcon",c.component()).remove();c.element.prop("isError",false)}}}};$.component("coral.validate",{version:$.coral.version,options:{onStatus:"onstatus",showStar:true,errMessages:{required:"* 必输项",minLength:"{0}",maxLength:"{0}",pattern:"",validType:{number:""},valid:""},fields:{},errMsgPosition:"leftBottom",excluded:[":disabled",":hidden",":not(:visible)"]},_isExclud:function($field,excluded){if(!excluded){return false
}var length=excluded.length;var type=$field.attr("component-role"),opts=$field[type]("option"),isExcluded=opts.excluded,$component=$field[type]("component");for(var i=0;i<length;i++){if(("string"===typeof excluded[i]&&$component.is(excluded[i]))||isExcluded){return true}}return false},_create:function(){var that=this;this.element.addClass("coral-validate ctrl-init ctrl-init-validate");that._initField();this.element.addClass("inited-validate")},_destroy:function(){this.element.removeClass("coral-validate ctrl-init ctrl-init-validate");this._super()},_setOption:function(key,value){if(key=="id"||key=="name"){return}this._super(key,value);return},removeField:function(){},updateField:function(){},_initField:function(){var fields=$(this.element).find(".ctrl-form-element");$.validate.addField(fields,this.options)},valid:function(el){if(!el){el=this.element}var that=this,fields=null,errCount=0,excluded=this.options.excluded,errTipsType=null,hasTips=true;if(excluded&&"string"===typeof excluded){excluded=$.map(excluded.split(","),function(item){return $.trim(item)})}if(el.is($("[class*='coral-validation-']"))){fields=$(el)}else{fields=$(el).parent().find($("[class*='coral-validation-']"))}if("form"===$(el)[0].tagName.toLowerCase()){errTipsType=$(el).form("option","errTipsType")}errTipsType="none";fields.each(function(index){var $field=$(this),type=$.validate.getFieldType($field);if(that._isExclud($field,excluded)){return}if("none"===errTipsType){hasTips=false}$field.trigger(type+that.options.onStatus+".validate",{hasTips:hasTips});if($field.prop("isError")){if("first"===errTipsType){hasTips=false}if(errCount==0){$field[type]("focus")}++errCount}});return(errCount>0?false:true)}})})(jQuery);

/*!
 * 组件库 4.0：鼠标辅助工具
 *
 * 依赖JS文件:
 *	jquery.coral.component.js
 */
(function(b,c){var a=false;b(document).mouseup(function(){a=false});b.component("coral.mouse",{version:"4.0.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.componentName,function(e){return d._mouseDown(e)}).bind("click."+this.componentName,function(e){if(true===b.data(e.target,d.componentName+".preventClickEvent")){b.removeData(e.target,d.componentName+".preventClickEvent");e.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.componentName);if(this._mouseMoveDelegate){this.document.unbind("mousemove."+this.componentName,this._mouseMoveDelegate).unbind("mouseup."+this.componentName,this._mouseUpDelegate)}},_mouseDown:function(f){if(a){return}(this._mouseStarted&&this._mouseUp(f));this._mouseDownEvent=f;var e=this,g=(f.which===1),d=(typeof this.options.cancel==="string"&&f.target.nodeName?b(f.target).closest(this.options.cancel).length:false);if(!g||d||!this._mouseCapture(f)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=(this._mouseStart(f)!==false);if(!this._mouseStarted){f.preventDefault();return true}}if(true===b.data(f.target,this.componentName+".preventClickEvent")){b.removeData(f.target,this.componentName+".preventClickEvent")}this._mouseMoveDelegate=function(h){return e._mouseMove(h)};this._mouseUpDelegate=function(h){return e._mouseUp(h)};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);f.preventDefault();a=true;return true},_mouseMove:function(d){if(b.coral.ie&&(!document.documentMode||document.documentMode<9)&&!d.button){return this._mouseUp(d)}else{if(!d.which){return this._mouseUp(d)
}}if(this._mouseStarted){this._mouseDrag(d);return d.preventDefault()}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,d)!==false);(this._mouseStarted?this._mouseDrag(d):this._mouseUp(d))}return !this._mouseStarted},_mouseUp:function(d){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(d.target===this._mouseDownEvent.target){b.data(d.target,this.componentName+".preventClickEvent",true)}this._mouseStop(d)}a=false;return false},_mouseDistanceMet:function(d){return(Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance)},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);

/*!
 * jQuery coral Sortable 4.0.1
 *
 * Depends:
 *	jquery.coral.core.js
 *	jquery.coral.component.js
 *	jquery.coral.mouse.js
 */
(function(b,d){function a(f,e,g){return(f>=e)&&(f<(e+g))}function c(e){return(/left|right/).test(e.css("float"))||(/inline|table-cell/).test(e.css("display"))}b.component("coral.sortable",b.coral.mouse,{version:"4.0.1",componentEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={};this.element.addClass("coral-sortable");this.refresh();this.floating=this.items.length?e.axis==="x"||c(this.items[0].item):false;this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(e,f){this._super(e,f);if(e==="handle"){this._setHandleClassName()}},_setHandleClassName:function(){this.element.find(".coral-sortable-handle").removeClass("coral-sortable-handle");b.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("coral-sortable-handle")})},_destroy:function(){this.element.removeClass("coral-sortable coral-sortable-disabled").find(".coral-sortable-handle").removeClass("coral-sortable-handle");this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--){this.items[e].item.removeData(this.componentName+"-item")}return this},_mouseCapture:function(g,h){var e=null,i=false,f=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(g);
b(g.target).parents().each(function(){if(b.data(this,f.componentName+"-item")===f){e=b(this);return false}});if(b.data(g.target,f.componentName+"-item")===f){e=b(g.target)}if(!e){return false}if(this.options.handle&&!h){b(this.options.handle,e).find("*").addBack().each(function(){if(this===g.target){i=true}});if(!i){return false}}this.currentItem=e;this._removeCurrentsFromItems();return true},_mouseStart:function(h,j,f){var g,e,k=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(h);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(h);this.originalPageX=h.pageX;this.originalPageY=h.pageY;(k.cursorAt&&this._adjustOffsetFromHelper(k.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(k.containment){this._setContainment()}if(k.cursor&&k.cursor!=="auto"){e=this.document.find("body");this.storedCursor=e.css("cursor");e.css("cursor",k.cursor);this.storedStylesheet=b("<style>*{ cursor: "+k.cursor+" !important; }</style>").appendTo(e)}if(k.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",k.opacity)}if(k.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",k.zIndex)}if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",h,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()
}if(!f){for(g=this.containers.length-1;g>=0;g--){this.containers[g]._trigger("activate",h,this._uiHash(this))}}if(b.coral.ddmanager){b.coral.ddmanager.current=this}if(b.coral.ddmanager&&!k.dropBehaviour){b.coral.ddmanager.prepareOffsets(this,h)}this.dragging=true;this.helper.addClass("coral-sortable-helper");this._mouseDrag(h);return true},_mouseDrag:function(j){var g,h,f,l,k=this.options,e=false;this.position=this._generatePosition(j);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-j.pageY<k.scrollSensitivity){this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop+k.scrollSpeed}else{if(j.pageY-this.overflowOffset.top<k.scrollSensitivity){this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop-k.scrollSpeed}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-j.pageX<k.scrollSensitivity){this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft+k.scrollSpeed}else{if(j.pageX-this.overflowOffset.left<k.scrollSensitivity){this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft-k.scrollSpeed}}}else{if(j.pageY-b(document).scrollTop()<k.scrollSensitivity){e=b(document).scrollTop(b(document).scrollTop()-k.scrollSpeed)}else{if(b(window).height()-(j.pageY-b(document).scrollTop())<k.scrollSensitivity){e=b(document).scrollTop(b(document).scrollTop()+k.scrollSpeed)}}if(j.pageX-b(document).scrollLeft()<k.scrollSensitivity){e=b(document).scrollLeft(b(document).scrollLeft()-k.scrollSpeed)}else{if(b(window).width()-(j.pageX-b(document).scrollLeft())<k.scrollSensitivity){e=b(document).scrollLeft(b(document).scrollLeft()+k.scrollSpeed)}}}if(e!==false&&b.coral.ddmanager&&!k.dropBehaviour){b.coral.ddmanager.prepareOffsets(this,j)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"
}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(g=this.items.length-1;g>=0;g--){h=this.items[g];f=h.item[0];l=this._intersectsWithPointer(h);if(!l){continue}if(h.instance!==this.currentContainer){continue}if(f!==this.currentItem[0]&&this.placeholder[l===1?"next":"prev"]()[0]!==f&&!b.contains(this.placeholder[0],f)&&(this.options.type==="semi-dynamic"?!b.contains(this.element[0],f):true)){this.direction=l===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(h)){this._rearrange(j,h)}else{break}this._trigger("change",j,this._uiHash());break}}this._contactContainers(j);if(b.coral.ddmanager){b.coral.ddmanager.drag(this,j)}this._trigger("sort",j,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(g,i){if(!g){return}if(b.coral.ddmanager&&!this.options.dropBehaviour){b.coral.ddmanager.drop(this,g)}if(this.options.revert){var f=this,j=this.placeholder.offset(),e=this.options.axis,h={};if(!e||e==="x"){h.left=j.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)}if(!e||e==="y"){h.top=j.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)}this.reverting=true;b(this.helper).animate(h,parseInt(this.options.revert,10)||500,function(){f._clear(g)})}else{this._clear(g,i)}return false},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper==="original"){this.currentItem.css(this._storedCSS).removeClass("coral-sortable-helper")}else{this.currentItem.show()}for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("deactivate",null,this._uiHash(this));if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",null,this._uiHash(this));this.containers[e].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])
}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}b.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){b(this.domPosition.prev).after(this.currentItem)}else{b(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(g){var e=this._getItemsAsjQuery(g&&g.connected),f=[];g=g||{};b(e).each(function(){var h=(b(g.item||this).attr(g.attribute||"id")||"").match(g.expression||(/(.+)[\-=_](.+)/));if(h){f.push((g.key||h[1]+"[]")+"="+(g.key&&g.expression?h[1]:h[2]))}});if(!f.length&&g.key){f.push(g.key+"=")}return f.join("&")},toArray:function(g){var e=this._getItemsAsjQuery(g&&g.connected),f=[];g=g||{};e.each(function(){f.push(b(g.item||this).attr(g.attribute||"id")||"")});return f},_intersectsWith:function(q){var g=this.positionAbs.left,f=g+this.helperProportions.width,o=this.positionAbs.top,n=o+this.helperProportions.height,h=q.left,e=h+q.width,s=q.top,m=s+q.height,u=this.offset.click.top,k=this.offset.click.left,j=(this.options.axis==="x")||((o+u)>s&&(o+u)<m),p=(this.options.axis==="y")||((g+k)>h&&(g+k)<e),i=j&&p;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>q[this.floating?"width":"height"])){return i}else{return(h<g+(this.helperProportions.width/2)&&f-(this.helperProportions.width/2)<e&&s<o+(this.helperProportions.height/2)&&n-(this.helperProportions.height/2)<m)}},_intersectsWithPointer:function(g){var h=(this.options.axis==="x")||a(this.positionAbs.top+this.offset.click.top,g.top,g.height),f=(this.options.axis==="y")||a(this.positionAbs.left+this.offset.click.left,g.left,g.width),j=h&&f,e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();if(!j){return false}return this.floating?(((i&&i==="right")||e==="down")?2:1):(e&&(e==="down"?2:1))},_intersectsWithSides:function(h){var f=a(this.positionAbs.top+this.offset.click.top,h.top+(h.height/2),h.height),g=a(this.positionAbs.left+this.offset.click.left,h.left+(h.width/2),h.width),e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();
if(this.floating&&i){return((i==="right"&&g)||(i==="left"&&!g))}else{return e&&((e==="down"&&f)||(e==="up"&&!f))}},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){this._refreshItems(e);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(l){var h,g,n,m,e=[],f=[],k=this._connectWith();if(k&&l){for(h=k.length-1;h>=0;h--){n=b(k[h]);for(g=n.length-1;g>=0;g--){m=b.data(n[g],this.componentFullName);if(m&&m!==this&&!m.options.disabled){f.push([b.isFunction(m.options.items)?m.options.items.call(m.element):b(m.options.items,m.element).not(".coral-sortable-helper").not(".coral-sortable-placeholder"),m])}}}}f.push([b.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):b(this.options.items,this.element).not(".coral-sortable-helper").not(".coral-sortable-placeholder"),this]);for(h=f.length-1;h>=0;h--){f[h][0].each(function(){e.push(this)})}return b(e)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.componentName+"-item)");this.items=b.grep(this.items,function(g){for(var f=0;f<e.length;f++){if(e[f]===g.item[0]){return false}}return true})},_refreshItems:function(e){this.items=[];this.containers=[this];var k,g,p,l,o,f,r,q,m=this.items,h=[[b.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):b(this.options.items,this.element),this]],n=this._connectWith();if(n&&this.ready){for(k=n.length-1;k>=0;k--){p=b(n[k]);for(g=p.length-1;g>=0;g--){l=b.data(p[g],this.componentFullName);if(l&&l!==this&&!l.options.disabled){h.push([b.isFunction(l.options.items)?l.options.items.call(l.element[0],e,{item:this.currentItem}):b(l.options.items,l.element),l]);
this.containers.push(l)}}}}for(k=h.length-1;k>=0;k--){o=h[k][1];f=h[k][0];for(g=0,q=f.length;g<q;g++){r=b(f[g]);r.data(this.componentName+"-item",o);m.push({item:r,instance:o,width:0,height:0,left:0,top:0})}}},refreshPositions:function(e){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var g,h,f,j;for(g=this.items.length-1;g>=0;g--){h=this.items[g];if(h.instance!==this.currentContainer&&this.currentContainer&&h.item[0]!==this.currentItem[0]){continue}f=this.options.toleranceElement?b(this.options.toleranceElement,h.item):h.item;if(!e){h.width=f.outerWidth();h.height=f.outerHeight()}j=f.offset();h.left=j.left;h.top=j.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(g=this.containers.length-1;g>=0;g--){j=this.containers[g].element.offset();this.containers[g].containerCache.left=j.left;this.containers[g].containerCache.top=j.top;this.containers[g].containerCache.width=this.containers[g].element.outerWidth();this.containers[g].containerCache.height=this.containers[g].element.outerHeight()}}return this},_createPlaceholder:function(f){f=f||this;var e,g=f.options;if(!g.placeholder||g.placeholder.constructor===String){e=g.placeholder;g.placeholder={element:function(){var i=f.currentItem[0].nodeName.toLowerCase(),h=b("<"+i+">",f.document[0]).addClass(e||f.currentItem[0].className+" coral-sortable-placeholder").removeClass("coral-sortable-helper");if(i==="tr"){f.currentItem.children().each(function(){b("<td>&#160;</td>",f.document[0]).attr("colspan",b(this).attr("colspan")||1).appendTo(h)})}else{if(i==="img"){h.attr("src",f.currentItem.attr("src"))}}if(!e){h.css("visibility","hidden")}return h},update:function(h,i){if(e&&!g.forcePlaceholderSize){return}if(!i.height()){i.height(f.currentItem.innerHeight()-parseInt(f.currentItem.css("paddingTop")||0,10)-parseInt(f.currentItem.css("paddingBottom")||0,10))}if(!i.width()){i.width(f.currentItem.innerWidth()-parseInt(f.currentItem.css("paddingLeft")||0,10)-parseInt(f.currentItem.css("paddingRight")||0,10))
}}}}f.placeholder=b(g.placeholder.element.call(f.element,f.currentItem));f.currentItem.after(f.placeholder);g.placeholder.update(f,f.placeholder)},_contactContainers:function(e){var l,h,p,m,n,r,s,k,o,g,f=null,q=null;for(l=this.containers.length-1;l>=0;l--){if(b.contains(this.currentItem[0],this.containers[l].element[0])){continue}if(this._intersectsWith(this.containers[l].containerCache)){if(f&&b.contains(this.containers[l].element[0],f.element[0])){continue}f=this.containers[l];q=l}else{if(this.containers[l].containerCache.over){this.containers[l]._trigger("out",e,this._uiHash(this));this.containers[l].containerCache.over=0}}}if(!f){return}if(this.containers.length===1){if(!this.containers[q].containerCache.over){this.containers[q]._trigger("over",e,this._uiHash(this));this.containers[q].containerCache.over=1}}else{p=10000;m=null;o=f.floating||c(this.currentItem);n=o?"left":"top";r=o?"width":"height";g=o?"clientX":"clientY";for(h=this.items.length-1;h>=0;h--){if(!b.contains(this.containers[q].element[0],this.items[h].item[0])){continue}if(this.items[h].item[0]===this.currentItem[0]){continue}s=this.items[h].item.offset()[n];k=false;if(e[g]-s>this.items[h][r]/2){k=true}if(Math.abs(e[g]-s)<p){p=Math.abs(e[g]-s);m=this.items[h];this.direction=k?"up":"down"}}if(!m&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[q]){return}m?this._rearrange(e,m,null,true):this._rearrange(e,null,this.containers[q].element,true);this._trigger("change",e,this._uiHash());this.containers[q]._trigger("change",e,this._uiHash(this));this.currentContainer=this.containers[q];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[q]._trigger("over",e,this._uiHash(this));this.containers[q].containerCache.over=1}},_createHelper:function(f){var g=this.options,e=b.isFunction(g.helper)?b(g.helper.apply(this.element[0],[f,this.currentItem])):(g.helper==="clone"?this.currentItem.clone():this.currentItem);if(!e.parents("body").length){b(g.appendTo!=="parent"?g.appendTo:this.currentItem[0].parentNode)[0].appendChild(e[0])
}if(e[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!e[0].style.width||g.forceHelperSize){e.width(this.currentItem.width())}if(!e[0].style.height||g.forceHelperSize){e.height(this.currentItem.height())}return e},_adjustOffsetFromHelper:function(e){if(typeof e==="string"){e=e.split(" ")}if(b.isArray(e)){e={left:+e[0],top:+e[1]||0}}if("left" in e){this.offset.click.left=e.left+this.margins.left}if("right" in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left}if("top" in e){this.offset.click.top=e.top+this.margins.top}if("bottom" in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])){e.left+=this.scrollParent.scrollLeft();e.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===document.body||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&b.coral.ie)){e={top:0,left:0}}return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}
},_setContainment:function(){var f,h,e,g=this.options;if(g.containment==="parent"){g.containment=this.helper[0].parentNode}if(g.containment==="document"||g.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,b(g.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b(g.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(g.containment)){f=b(g.containment)[0];h=b(g.containment).offset();e=(b(f).css("overflow")!=="hidden");this.containment=[h.left+(parseInt(b(f).css("borderLeftWidth"),10)||0)+(parseInt(b(f).css("paddingLeft"),10)||0)-this.margins.left,h.top+(parseInt(b(f).css("borderTopWidth"),10)||0)+(parseInt(b(f).css("paddingTop"),10)||0)-this.margins.top,h.left+(e?Math.max(f.scrollWidth,f.offsetWidth):f.offsetWidth)-(parseInt(b(f).css("borderLeftWidth"),10)||0)-(parseInt(b(f).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,h.top+(e?Math.max(f.scrollHeight,f.offsetHeight):f.offsetHeight)-(parseInt(b(f).css("borderTopWidth"),10)||0)-(parseInt(b(f).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(g,i){if(!i){i=this.position}var f=g==="absolute"?1:-1,e=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=(/(html|body)/i).test(e[0].tagName);return{top:(i.top+this.offset.relative.top*f+this.offset.parent.top*f-((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(h?0:e.scrollTop()))*f)),left:(i.left+this.offset.relative.left*f+this.offset.parent.left*f-((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():h?0:e.scrollLeft())*f))}},_generatePosition:function(h){var j,i,k=this.options,g=h.pageX,f=h.pageY,e=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=(/(html|body)/i).test(e[0].tagName);
if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(h.pageX-this.offset.click.left<this.containment[0]){g=this.containment[0]+this.offset.click.left}if(h.pageY-this.offset.click.top<this.containment[1]){f=this.containment[1]+this.offset.click.top}if(h.pageX-this.offset.click.left>this.containment[2]){g=this.containment[2]+this.offset.click.left}if(h.pageY-this.offset.click.top>this.containment[3]){f=this.containment[3]+this.offset.click.top}}if(k.grid){j=this.originalPageY+Math.round((f-this.originalPageY)/k.grid[1])*k.grid[1];f=this.containment?((j-this.offset.click.top>=this.containment[1]&&j-this.offset.click.top<=this.containment[3])?j:((j-this.offset.click.top>=this.containment[1])?j-k.grid[1]:j+k.grid[1])):j;i=this.originalPageX+Math.round((g-this.originalPageX)/k.grid[0])*k.grid[0];g=this.containment?((i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2])?i:((i-this.offset.click.left>=this.containment[0])?i-k.grid[0]:i+k.grid[0])):i}}return{top:(f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(l?0:e.scrollTop())))),left:(g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():l?0:e.scrollLeft())))}},_rearrange:function(j,h,f,g){f?f[0].appendChild(this.placeholder[0]):h.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction==="down"?h.item[0]:h.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){if(e===this.counter){this.refreshPositions(!g)}})},_clear:function(f,g){this.reverting=false;var e,h=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(e in this._storedCSS){if(this._storedCSS[e]==="auto"||this._storedCSS[e]==="static"){this._storedCSS[e]=""
}}this.currentItem.css(this._storedCSS).removeClass("coral-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!g){h.push(function(i){this._trigger("receive",i,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".coral-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!g){h.push(function(i){this._trigger("update",i,this._uiHash())})}if(this!==this.currentContainer){if(!g){h.push(function(i){this._trigger("remove",i,this._uiHash())});h.push((function(i){return function(j){i._trigger("receive",j,this._uiHash(this))}}).call(this,this.currentContainer));h.push((function(i){return function(j){i._trigger("update",j,this._uiHash(this))}}).call(this,this.currentContainer))}}for(e=this.containers.length-1;e>=0;e--){if(!g){h.push((function(i){return function(j){i._trigger("deactivate",j,this._uiHash(this))}}).call(this,this.containers[e]))}if(this.containers[e].containerCache.over){h.push((function(i){return function(j){i._trigger("out",j,this._uiHash(this))}}).call(this,this.containers[e]));this.containers[e].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(this.cancelHelperRemoval){if(!g){this._trigger("beforeStop",f,this._uiHash());for(e=0;e<h.length;e++){h[e].call(this,f)}this._trigger("stop",f,this._uiHash())}this.fromOutside=false;return false}if(!g){this._trigger("beforeStop",f,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null;if(!g){for(e=0;e<h.length;e++){h[e].call(this,f)}this._trigger("stop",f,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){if(b.Component.prototype._trigger.apply(this,arguments)===false){this.cancel()
}},_uiHash:function(e){var f=e||this;return{helper:f.helper,placeholder:f.placeholder||b([]),position:f.position,originalPosition:f.originalPosition,offset:f.positionAbs,item:f.currentItem,sender:e?e.element:null}}})})(jQuery);

/*!
 * 组件库4.0：拖动辅助工具
 *
 * 依赖JS文件:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.component.js
 */
(function(a,b){a.component("coral.draggable",a.coral.mouse,{version:"4.0.1",componentEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}if(this.options.addClasses){this.element.addClass("coral-draggable")}if(this.options.disabled){this.element.addClass("coral-draggable-disabled")}this._setHandleClassName();this._mouseInit()},_setOption:function(c,d){this._super(c,d);if(c==="handle"){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".coral-draggable-dragging")){this.destroyOnClear=true;return}this.element.removeClass("coral-draggable coral-draggable-dragging coral-draggable-disabled");this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(e){var c=this.document[0],f=this.options;try{if(c.activeElement&&c.activeElement.nodeName.toLowerCase()!=="body"){a(c.activeElement).blur()}}catch(d){}if(this.helper||f.disabled||a(e.target).closest(".coral-resizable-handle").length>0){return false}this.handle=this._getHandle(e);if(!this.handle){return false}a(f.iframeFix===true?"iframe":f.iframeFix).each(function(){a("<div class='coral-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")});return true},_mouseStart:function(c){var d=this.options;
this.helper=this._createHelper(c);this.helper.addClass("coral-draggable-dragging");this._cacheHelperProportions();if(a.coral.ddmanager){a.coral.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.offsetParentCssPosition=this.offsetParent.css("position");this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.offset.scroll=false;a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(c,false);this.originalPageX=c.pageX;this.originalPageY=c.pageY;(d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt));this._setContainment();if(this._trigger("start",c)===false){this._clear();return false}this._cacheHelperProportions();if(a.coral.ddmanager&&!d.dropBehaviour){a.coral.ddmanager.prepareOffsets(this,c)}this._mouseDrag(c,true);if(a.coral.ddmanager){a.coral.ddmanager.dragStart(this,c)}return true},_mouseDrag:function(c,e){if(this.offsetParentCssPosition==="fixed"){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(c,true);this.positionAbs=this._convertPositionTo("absolute");if(!e){var d=this._uiHash();if(this._trigger("drag",c,d)===false){this._mouseUp({});return false}this.position=d.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if(a.coral.ddmanager){a.coral.ddmanager.drag(this,c)}return false},_mouseStop:function(d){var c=this,e=false;if(a.coral.ddmanager&&!this.options.dropBehaviour){e=a.coral.ddmanager.drop(this,d)}if(this.dropped){e=this.dropped;this.dropped=false}if(this.options.helper==="original"&&!a.contains(this.element[0].ownerDocument,this.element[0])){return false}if((this.options.revert==="invalid"&&!e)||(this.options.revert==="valid"&&e)||this.options.revert===true||(a.isFunction(this.options.revert)&&this.options.revert.call(this.element,e))){a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(c._trigger("stop",d)!==false){c._clear()
}})}else{if(this._trigger("stop",d)!==false){this._clear()}}return false},_mouseUp:function(c){a("div.coral-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});if(a.coral.ddmanager){a.coral.ddmanager.dragStop(this,c)}this.element.focus();return a.coral.mouse.prototype._mouseUp.call(this,c)},cancel:function(){if(this.helper.is(".coral-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(c){return this.options.handle?!!a(c.target).closest(this.element.find(this.options.handle)).length:true},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("coral-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("coral-draggable-handle")},_createHelper:function(d){var e=this.options,c=a.isFunction(e.helper)?a(e.helper.apply(this.element[0],[d])):(e.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!c.parents("body").length){c.appendTo((e.appendTo==="parent"?this.element[0].parentNode:e.appendTo))}if(c[0]!==this.element[0]&&!(/(fixed|absolute)/).test(c.css("position"))){c.css("position","absolute")}return c},_adjustOffsetFromHelper:function(c){if(typeof c==="string"){c=c.split(" ")}if(a.isArray(c)){c={left:+c[0],top:+c[1]||0}}if("left" in c){this.offset.click.left=c.left+this.margins.left}if("right" in c){this.offset.click.left=this.helperProportions.width-c.right+this.margins.left}if("top" in c){this.offset.click.top=c.top+this.margins.top}if("bottom" in c){this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top}},_isRootNode:function(c){return(/(html|body)/i).test(c.tagName)||c===this.document[0]},_getParentOffset:function(){var d=this.offsetParent.offset(),c=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])){d.left+=this.scrollParent.scrollLeft();d.top+=this.scrollParent.scrollTop()
}if(this._isRootNode(this.offsetParent[0])){d={top:0,left:0}}return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0}}var c=this.element.position(),d=this._isRootNode(this.scrollParent[0]);return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+(!d?this.scrollParent.scrollTop():0),left:c.left-(parseInt(this.helper.css("left"),10)||0)+(!d?this.scrollParent.scrollLeft():0)}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f,h,e,g=this.options,d=this.document[0];this.relativeContainer=null;if(!g.containment){this.containment=null;return}if(g.containment==="window"){this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||d.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(g.containment==="document"){this.containment=[0,0,a(d).width()-this.helperProportions.width-this.margins.left,(a(d).height()||d.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(g.containment.constructor===Array){this.containment=g.containment;return}if(g.containment==="parent"){g.containment=this.helper[0].parentNode}h=a(g.containment);e=h[0];if(!e){return}f=h.css("overflow")!=="hidden";this.containment=[(parseInt(h.css("borderLeftWidth"),10)||0)+(parseInt(h.css("paddingLeft"),10)||0),(parseInt(h.css("borderTopWidth"),10)||0)+(parseInt(h.css("paddingTop"),10)||0),(f?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(h.css("borderRightWidth"),10)||0)-(parseInt(h.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(h.css("borderBottomWidth"),10)||0)-(parseInt(h.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relativeContainer=h},_convertPositionTo:function(e,g){if(!g){g=this.position}var c=e==="absolute"?1:-1,f=this._isRootNode(this.scrollParent[0]);return{top:(g.top+this.offset.relative.top*c+this.offset.parent.top*c-((this.cssPosition==="fixed"?-this.offset.scroll.top:(f?0:this.offset.scroll.top))*c)),left:(g.left+this.offset.relative.left*c+this.offset.parent.left*c-((this.cssPosition==="fixed"?-this.offset.scroll.left:(f?0:this.offset.scroll.left))*c))}},_generatePosition:function(d,j){var c,k,l,f,e=this.options,i=this._isRootNode(this.scrollParent[0]),h=d.pageX,g=d.pageY;if(!i||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}}if(j){if(this.containment){if(this.relativeContainer){k=this.relativeContainer.offset();c=[this.containment[0]+k.left,this.containment[1]+k.top,this.containment[2]+k.left,this.containment[3]+k.top]}else{c=this.containment}if(d.pageX-this.offset.click.left<c[0]){h=c[0]+this.offset.click.left}if(d.pageY-this.offset.click.top<c[1]){g=c[1]+this.offset.click.top}if(d.pageX-this.offset.click.left>c[2]){h=c[2]+this.offset.click.left}if(d.pageY-this.offset.click.top>c[3]){g=c[3]+this.offset.click.top}}if(e.grid){l=e.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1]:this.originalPageY;g=c?((l-this.offset.click.top>=c[1]||l-this.offset.click.top>c[3])?l:((l-this.offset.click.top>=c[1])?l-e.grid[1]:l+e.grid[1])):l;f=e.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/e.grid[0])*e.grid[0]:this.originalPageX;h=c?((f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2])?f:((f-this.offset.click.left>=c[0])?f-e.grid[0]:f+e.grid[0])):f}if(e.axis==="y"){h=this.originalPageX}if(e.axis==="x"){g=this.originalPageY}}return{top:(g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:(i?0:this.offset.scroll.top))),left:(h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:(i?0:this.offset.scroll.left)))}
},_clear:function(){this.helper.removeClass("coral-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy()}},_trigger:function(c,d,e){e=e||this._uiHash();a.coral.plugin.call(this,c,[d,e,this],true);if(c==="drag"){this.positionAbs=this._convertPositionTo("absolute")}return a.Component.prototype._trigger.call(this,c,d,e)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.coral.plugin.add("draggable","connectToSortable",{start:function(d,f,e){var g=e.options,c=a.extend({},f,{item:e.element});e.sortables=[];a(g.connectToSortable).each(function(){var h=a.data(this,"coral-sortable");if(h&&!h.options.disabled){e.sortables.push({instance:h,shouldRevert:h.options.revert});h.refreshPositions();h._trigger("activate",d,c)}})},stop:function(d,f,e){var c=a.extend({},f,{item:e.element});a.each(e.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;e.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=this.shouldRevert}this.instance._mouseStop(d);this.instance.options.helper=this.instance.options._helper;if(e.options.helper==="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",d,c)}})},drag:function(d,f,e){var c=this;a.each(e.sortables,function(){var g=false,h=this;this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){g=true;a.each(e.sortables,function(){this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;if(this!==h&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(h.instance.element[0],this.instance.element[0])){g=false
}return g})}if(g){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(c).clone().removeAttr("id").appendTo(this.instance.element).data("coral-sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return f.helper[0]};d.target=this.instance.currentItem[0];this.instance._mouseCapture(d,true);this.instance._mouseStart(d,true,true);this.instance.offset.click.top=e.offset.click.top;this.instance.offset.click.left=e.offset.click.left;this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top;e._trigger("toSortable",d);e.dropped=this.instance.element;e.currentItem=e.element;this.instance.fromOutside=e}if(this.instance.currentItem){this.instance._mouseDrag(d)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",d,this.instance._uiHash(this.instance));this.instance._mouseStop(d,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}e._trigger("fromSortable",d);e.dropped=false}}})}});a.coral.plugin.add("draggable","cursor",{start:function(e,f,c){var d=a("body"),g=c.options;if(d.css("cursor")){g._cursor=d.css("cursor")}d.css("cursor",g.cursor)},stop:function(d,e,c){var f=c.options;if(f._cursor){a("body").css("cursor",f._cursor)}}});a.coral.plugin.add("draggable","opacity",{start:function(e,f,c){var d=a(f.helper),g=c.options;if(d.css("opacity")){g._opacity=d.css("opacity")}d.css("opacity",g.opacity)},stop:function(d,e,c){var f=c.options;if(f._opacity){a(e.helper).css("opacity",f._opacity)}}});a.coral.plugin.add("draggable","scroll",{start:function(d,e,c){if(!c.scrollParentNotHidden){c.scrollParentNotHidden=c.helper.scrollParent(false)}if(c.scrollParentNotHidden[0]!==c.document[0]&&c.scrollParentNotHidden[0].tagName!=="HTML"){c.overflowOffset=c.scrollParentNotHidden.offset()
}},drag:function(f,g,e){var h=e.options,d=false,j=e.scrollParentNotHidden[0],c=e.document[0];if(j!==c&&j.tagName!=="HTML"){if(!h.axis||h.axis!=="x"){if((e.overflowOffset.top+j.offsetHeight)-f.pageY<h.scrollSensitivity){j.scrollTop=d=j.scrollTop+h.scrollSpeed}else{if(f.pageY-e.overflowOffset.top<h.scrollSensitivity){j.scrollTop=d=j.scrollTop-h.scrollSpeed}}}if(!h.axis||h.axis!=="y"){if((e.overflowOffset.left+j.offsetWidth)-f.pageX<h.scrollSensitivity){j.scrollLeft=d=j.scrollLeft+h.scrollSpeed}else{if(f.pageX-e.overflowOffset.left<h.scrollSensitivity){j.scrollLeft=d=j.scrollLeft-h.scrollSpeed}}}}else{if(!h.axis||h.axis!=="x"){if(f.pageY-a(c).scrollTop()<h.scrollSensitivity){d=a(c).scrollTop(a(c).scrollTop()-h.scrollSpeed)}else{if(a(window).height()-(f.pageY-a(c).scrollTop())<h.scrollSensitivity){d=a(c).scrollTop(a(c).scrollTop()+h.scrollSpeed)}}}if(!h.axis||h.axis!=="y"){if(f.pageX-a(c).scrollLeft()<h.scrollSensitivity){d=a(c).scrollLeft(a(c).scrollLeft()-h.scrollSpeed)}else{if(a(window).width()-(f.pageX-a(c).scrollLeft())<h.scrollSensitivity){d=a(c).scrollLeft(a(c).scrollLeft()+h.scrollSpeed)}}}}if(d!==false&&a.coral.ddmanager&&!h.dropBehaviour){a.coral.ddmanager.prepareOffsets(e,f)}}});a.coral.plugin.add("draggable","snap",{start:function(d,e,c){var f=c.options;c.snapElements=[];a(f.snap.constructor!==String?(f.snap.items||":data(coral-draggable)"):f.snap).each(function(){var h=a(this),g=h.offset();if(this!==c.element[0]){c.snapElements.push({item:this,width:h.outerWidth(),height:h.outerHeight(),top:g.top,left:g.left})}})},drag:function(u,p,g){var c,z,j,k,s,n,m,A,v,h,q=g.options,y=q.snapTolerance,x=p.offset.left,w=x+g.helperProportions.width,f=p.offset.top,e=f+g.helperProportions.height;for(v=g.snapElements.length-1;v>=0;v--){s=g.snapElements[v].left;n=s+g.snapElements[v].width;m=g.snapElements[v].top;A=m+g.snapElements[v].height;if(w<s-y||x>n+y||e<m-y||f>A+y||!a.contains(g.snapElements[v].item.ownerDocument,g.snapElements[v].item)){if(g.snapElements[v].snapping){(g.options.snap.release&&g.options.snap.release.call(g.element,u,a.extend(g._uiHash(),{snapItem:g.snapElements[v].item})))
}g.snapElements[v].snapping=false;continue}if(q.snapMode!=="inner"){c=Math.abs(m-e)<=y;z=Math.abs(A-f)<=y;j=Math.abs(s-w)<=y;k=Math.abs(n-x)<=y;if(c){p.position.top=g._convertPositionTo("relative",{top:m-g.helperProportions.height,left:0}).top-g.margins.top}if(z){p.position.top=g._convertPositionTo("relative",{top:A,left:0}).top-g.margins.top}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:s-g.helperProportions.width}).left-g.margins.left}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n}).left-g.margins.left}}h=(c||z||j||k);if(q.snapMode!=="outer"){c=Math.abs(m-f)<=y;z=Math.abs(A-e)<=y;j=Math.abs(s-x)<=y;k=Math.abs(n-w)<=y;if(c){p.position.top=g._convertPositionTo("relative",{top:m,left:0}).top-g.margins.top}if(z){p.position.top=g._convertPositionTo("relative",{top:A-g.helperProportions.height,left:0}).top-g.margins.top}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:s}).left-g.margins.left}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n-g.helperProportions.width}).left-g.margins.left}}if(!g.snapElements[v].snapping&&(c||z||j||k||h)){(g.options.snap.snap&&g.options.snap.snap.call(g.element,u,a.extend(g._uiHash(),{snapItem:g.snapElements[v].item})))}g.snapElements[v].snapping=(c||z||j||k||h)}}});a.coral.plugin.add("draggable","stack",{start:function(e,f,c){var d,h=c.options,g=a.makeArray(a(h.stack)).sort(function(j,i){return(parseInt(a(j).css("zIndex"),10)||0)-(parseInt(a(i).css("zIndex"),10)||0)});if(!g.length){return}d=parseInt(a(g[0]).css("zIndex"),10)||0;a(g).each(function(j){a(this).css("zIndex",d+j)});this.css("zIndex",(d+g.length))}});a.coral.plugin.add("draggable","zIndex",{start:function(e,f,c){var d=a(f.helper),g=c.options;if(d.css("zIndex")){g._zIndex=d.css("zIndex")}d.css("zIndex",g.zIndex)},stop:function(d,e,c){var f=c.options;if(f._zIndex){a(e.helper).css("zIndex",f._zIndex)}}})})(jQuery);

/*!
 * jQuery coral Droppable 4.0.1
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.component.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
(function(b,c){function a(e,d,f){return(e>=d)&&(e<(d+f))}b.component("coral.droppable",{version:"4.0.1",componentEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,f=this.options,d=f.accept;this.isover=false;this.isout=true;this.accept=b.isFunction(d)?d:function(g){return g.is(d)};this.proportions=function(){if(arguments.length){e=arguments[0]}else{return e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}}};this._addToManager(f.scope);(f.addClasses&&this.element.addClass("coral-droppable"))},_addToManager:function(d){b.coral.ddmanager.droppables[d]=b.coral.ddmanager.droppables[d]||[];b.coral.ddmanager.droppables[d].push(this)},_splice:function(d){var e=0;for(;e<d.length;e++){if(d[e]===this){d.splice(e,1)}}},_destroy:function(){var d=b.coral.ddmanager.droppables[this.options.scope];this._splice(d);this.element.removeClass("coral-droppable coral-droppable-disabled")},_setOption:function(e,f){if(e==="accept"){this.accept=b.isFunction(f)?f:function(g){return g.is(f)}}else{if(e==="scope"){var d=b.coral.ddmanager.droppables[this.options.scope];this._splice(d);this._addToManager(f)}}this._super(e,f)},_activate:function(e){var d=b.coral.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}if(d){this._trigger("activate",e,this.ui(d))}},_deactivate:function(e){var d=b.coral.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(d){this._trigger("deactivate",e,this.ui(d))}},_over:function(e){var d=b.coral.ddmanager.current;if(!d||(d.currentItem||d.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],(d.currentItem||d.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)
}this._trigger("over",e,this.ui(d))}},_out:function(e){var d=b.coral.ddmanager.current;if(!d||(d.currentItem||d.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],(d.currentItem||d.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",e,this.ui(d))}},_drop:function(e,f){var d=f||b.coral.ddmanager.current,g=false;if(!d||(d.currentItem||d.element)[0]===this.element[0]){return false}this.element.find(":data(coral-droppable)").not(".coral-draggable-dragging").each(function(){var h=b.data(this,"coral-droppable");if(h.options.greedy&&!h.options.disabled&&h.options.scope===d.options.scope&&h.accept.call(h.element[0],(d.currentItem||d.element))&&b.coral.intersect(d,b.extend(h,{offset:h.element.offset()}),h.options.tolerance,e)){g=true;return false}});if(g){return false}if(this.accept.call(this.element[0],(d.currentItem||d.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",e,this.ui(d));return this.element}return false},ui:function(d){return{draggable:(d.currentItem||d.element),helper:d.helper,position:d.position,offset:d.positionAbs}}});b.coral.intersect=(function(){function d(f,e,g){return(f>=e)&&(f<(e+g))}return function(q,j,o,f){if(!j.offset){return false}var h=(q.positionAbs||q.position.absolute).left,n=(q.positionAbs||q.position.absolute).top,g=h+q.helperProportions.width,m=n+q.helperProportions.height,i=j.offset.left,p=j.offset.top,e=i+j.proportions().width,k=p+j.proportions().height;switch(o){case"fit":return(i<=h&&g<=e&&p<=n&&m<=k);case"intersect":return(i<h+(q.helperProportions.width/2)&&g-(q.helperProportions.width/2)<e&&p<n+(q.helperProportions.height/2)&&m-(q.helperProportions.height/2)<k);case"pointer":return d(f.pageY,p,j.proportions().height)&&d(f.pageX,i,j.proportions().width);case"touch":return((n>=p&&n<=k)||(m>=p&&m<=k)||(n<p&&m>k))&&((h>=i&&h<=e)||(g>=i&&g<=e)||(h<i&&g>e));
default:return false}}})();b.coral.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(g,k){var f,e,d=b.coral.ddmanager.droppables[g.options.scope]||[],h=k?k.type:null,l=(g.currentItem||g.element).find(":data(coral-droppable)").addBack();droppablesLoop:for(f=0;f<d.length;f++){if(d[f].options.disabled||(g&&!d[f].accept.call(d[f].element[0],(g.currentItem||g.element)))){continue}for(e=0;e<l.length;e++){if(l[e]===d[f].element[0]){d[f].proportions().height=0;continue droppablesLoop}}d[f].visible=d[f].element.css("display")!=="none";if(!d[f].visible){continue}if(h==="mousedown"){d[f]._activate.call(d[f],k)}d[f].offset=d[f].element.offset();d[f].proportions({width:d[f].element[0].offsetWidth,height:d[f].element[0].offsetHeight})}},drop:function(d,e){var f=false;b.each((b.coral.ddmanager.droppables[d.options.scope]||[]).slice(),function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&b.coral.intersect(d,this,this.options.tolerance,e)){f=this._drop.call(this,e)||f}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(d.currentItem||d.element))){this.isout=true;this.isover=false;this._deactivate.call(this,e)}});return f},dragStart:function(d,e){d.element.parentsUntil("body").bind("scroll.droppable",function(){if(!d.options.refreshPositions){b.coral.ddmanager.prepareOffsets(d,e)}})},drag:function(d,e){if(d.options.refreshPositions){b.coral.ddmanager.prepareOffsets(d,e)}b.each(b.coral.ddmanager.droppables[d.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var i,g,f,h=b.coral.intersect(d,this,this.options.tolerance,e),j=!h&&this.isover?"isout":(h&&!this.isover?"isover":null);if(!j){return}if(this.options.greedy){g=this.options.scope;f=this.element.parents(":data(coral-droppable)").filter(function(){return b.data(this,"coral-droppable").options.scope===g});if(f.length){i=b.data(f[0],"coral-droppable");i.greedyChild=(j==="isover")}}if(i&&j==="isover"){i.isover=false;i.isout=true;
i._out.call(i,e)}this[j]=true;this[j==="isout"?"isover":"isout"]=false;this[j==="isover"?"_over":"_out"].call(this,e);if(i&&j==="isout"){i.isout=false;i.isover=true;i._over.call(i,e)}})},dragStop:function(d,e){d.element.parentsUntil("body").unbind("scroll.droppable");if(!d.options.refreshPositions){b.coral.ddmanager.prepareOffsets(d,e)}}}})(jQuery);

/*!
 * jQuery coral Resizable 4.0.1
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.component.js
 */
(function(d,e){function b(f){return parseInt(f,10)||0}function a(f){return !isNaN(parseInt(f,10))}function c(i,g){if(d(i).css("overflow")==="hidden"){return false}var f=(g&&g==="left")?"scrollLeft":"scrollTop",h=false;if(i[f]>0){return true}i[f]=1;h=(i[f]>0);i[f]=0;return h}d.component("coral.resizable",d.coral.mouse,{version:"4.0.1",componentEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,layout:false,helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var m,g,k,h,f,j=this,l=this.options;this.element.addClass("coral-resizable");d.extend(this,{_aspectRatio:!!(l.aspectRatio),aspectRatio:l.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:l.helper||l.ghost||l.animate?l.helper||"coral-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap(d("<div class='coral-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("coral-resizable",this.element.data("coral-resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));
this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=l.handles||(!d(".coral-resizable-handle",this.element).length?"e,s,se":{n:".coral-resizable-n",e:".coral-resizable-e",s:".coral-resizable-s",w:".coral-resizable-w",se:".coral-resizable-se",sw:".coral-resizable-sw",ne:".coral-resizable-ne",nw:".coral-resizable-nw"});if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}m=this.handles.split(",");this.handles={};for(g=0;g<m.length;g++){k=d.trim(m[g]);f="coral-resizable-"+k;h=d("<div class='coral-resizable-handle "+f+"'></div>");h.css({zIndex:l.zIndex});if("se"===k){h.addClass("coral-icon coral-icon-gripsmall-diagonal-se")}this.handles[k]=".coral-resizable-"+k;this.element.append(h)}}this._renderAxis=function(r){var o,p,n,q;r=r||this.element;for(o in this.handles){if(this.handles[o].constructor===String){this.handles[o]=this.element.children(this.handles[o]).first().show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){p=d(this.handles[o],this.element);q=/sw|ne|nw|se|n|s/.test(o)?p.outerHeight():p.outerWidth();n=["padding",/ne|nw|n/.test(o)?"Top":/se|sw|s/.test(o)?"Bottom":/^e$/.test(o)?"Right":"Left"].join("");r.css(n,q);this._proportionallyResize()}if(!d(this.handles[o]).length){continue}}};this._renderAxis(this.element);this._handles=d(".coral-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!j.resizing){if(this.className){h=this.className.match(/coral-resizable-(se|sw|ne|nw|n|e|s|w)/i)}j.axis=h&&h[1]?h[1]:"se"}});if(l.autoHide){this._handles.hide();d(this.element).addClass("coral-resizable-autohide").mouseenter(function(){if(l.disabled){return}d(this).removeClass("coral-resizable-autohide");j._handles.show()}).mouseleave(function(){if(l.disabled){return}if(!j.resizing){d(this).addClass("coral-resizable-autohide");j._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();
var g,f=function(h){d(h).removeClass("coral-resizable coral-resizable-disabled coral-resizable-resizing").removeData("resizable").removeData("coral-resizable").unbind(".resizable").find(".coral-resizable-handle").remove()};if(this.elementIsWrapper){f(this.element);g=this.element;this.originalElement.css({position:g.css("position"),width:g.outerWidth(),height:g.outerHeight(),top:g.css("top"),left:g.css("left")}).insertAfter(g);g.remove()}this.originalElement.css("resize",this.originalResizeStyle);f(this.originalElement);return this},_mouseCapture:function(h){var g,j,f=false;for(g in this.handles){j=d(this.handles[g])[0];if(j===h.target||d.contains(j,h.target)){f=true}}return !this.options.disabled&&f},_mouseStart:function(g){var k,h,j,i=this.options,f=this.element;this.resizing=true;this._renderProxy();k=b(this.helper.css("left"));h=b(this.helper.css("top"));if(i.containment){k+=d(i.containment).scrollLeft()||0;h+=d(i.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:k,top:h};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:f.width(),height:f.height()};this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()};this.originalPosition={left:k,top:h};this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()};this.originalMousePosition={left:g.pageX,top:g.pageY};this.aspectRatio=(typeof i.aspectRatio==="number")?i.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);j=d(".coral-resizable-"+this.axis).css("cursor");d("body").css("cursor",j==="auto"?this.axis+"-resize":j);f.addClass("coral-resizable-resizing");this._propagate("start",g);return true},_mouseDrag:function(k){var l,j,m=this.originalMousePosition,g=this.axis,h=(k.pageX-m.left)||0,f=(k.pageY-m.top)||0,i=this._change[g];this._updatePrevProperties();if(!i){return false}l=i.apply(this,[k,h,f]);this._updateVirtualBoundaries(k.shiftKey);if(this._aspectRatio||k.shiftKey){l=this._updateRatio(l,k)
}l=this._respectSize(l,k);this._updateCache(l);this._propagate("resize",k);j=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!d.isEmptyObject(j)){this._updatePrevProperties();this._trigger("resize",k,this.ui());this._applyChanges()}return false},_mouseStop:function(i){this.resizing=false;var h,f,g,l,p,k,n,j=this.options,m=this;if(this._helper){h=this._proportionallyResizeElements;f=h.length&&(/textarea/i).test(h[0].nodeName);g=f&&c(h[0],"left")?0:m.sizeDiff.height;l=f?0:m.sizeDiff.width;p={width:(m.helper.width()-l),height:(m.helper.height()-g)};k=(parseInt(m.element.css("left"),10)+(m.position.left-m.originalPosition.left))||null;n=(parseInt(m.element.css("top"),10)+(m.position.top-m.originalPosition.top))||null;if(!j.animate){this.element.css(d.extend(p,{top:n,left:k}))}m.helper.height(m.size.height);m.helper.width(m.size.width);if(this._helper&&!j.animate){this._proportionallyResize()}}d("body").css("cursor","auto");this.element.removeClass("coral-resizable-resizing");this._propagate("stop",i,this.ui());if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var f={};if(this.position.top!==this.prevPosition.top){f.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){f.left=this.position.left+"px"}if(this.size.width!==this.prevSize.width){f.width=this.size.width+"px"}if(this.size.height!==this.prevSize.height){f.height=this.size.height+"px"}this.helper.css(f);return f},_updateVirtualBoundaries:function(h){var j,i,g,l,f,k=this.options;f={minWidth:a(k.minWidth)?k.minWidth:0,maxWidth:a(k.maxWidth)?k.maxWidth:Infinity,minHeight:a(k.minHeight)?k.minHeight:0,maxHeight:a(k.maxHeight)?k.maxHeight:Infinity};if(this._aspectRatio||h){j=f.minHeight*this.aspectRatio;g=f.minWidth/this.aspectRatio;i=f.maxHeight*this.aspectRatio;
l=f.maxWidth/this.aspectRatio;if(j>f.minWidth){f.minWidth=j}if(g>f.minHeight){f.minHeight=g}if(i<f.maxWidth){f.maxWidth=i}if(l<f.maxHeight){f.maxHeight=l}}this._vBoundaries=f},_updateCache:function(f){this.offset=this.helper.offset();if(a(f.left)){this.position.left=f.left}if(a(f.top)){this.position.top=f.top}if(a(f.height)){this.size.height=f.height}if(a(f.width)){this.size.width=f.width}},_updateRatio:function(h){var i=this.position,g=this.size,f=this.axis;if(a(h.height)){h.width=(h.height*this.aspectRatio)}else{if(a(h.width)){h.height=(h.width/this.aspectRatio)}}if(f==="sw"){h.left=i.left+(g.width-h.width);h.top=null}if(f==="nw"){h.top=i.top+(g.height-h.height);h.left=i.left+(g.width-h.width)}return h},_respectSize:function(k){var h=this._vBoundaries,n=this.axis,q=a(k.width)&&h.maxWidth&&(h.maxWidth<k.width),l=a(k.height)&&h.maxHeight&&(h.maxHeight<k.height),i=a(k.width)&&h.minWidth&&(h.minWidth>k.width),p=a(k.height)&&h.minHeight&&(h.minHeight>k.height),g=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,j=/sw|nw|w/.test(n),f=/nw|ne|n/.test(n);if(i){k.width=h.minWidth}if(p){k.height=h.minHeight}if(q){k.width=h.maxWidth}if(l){k.height=h.maxHeight}if(i&&j){k.left=g-h.minWidth}if(q&&j){k.left=g-h.maxWidth}if(p&&f){k.top=m-h.minHeight}if(l&&f){k.top=m-h.maxHeight}if(!k.width&&!k.height&&!k.left&&k.top){k.top=null}else{if(!k.width&&!k.height&&!k.top&&k.left){k.left=null}}return k},_getPaddingPlusBorderDimensions:function(h){var g=0,j=[],k=[h.css("borderTopWidth"),h.css("borderRightWidth"),h.css("borderBottomWidth"),h.css("borderLeftWidth")],f=[h.css("paddingTop"),h.css("paddingRight"),h.css("paddingBottom"),h.css("paddingLeft")];for(;g<4;g++){j[g]=(parseInt(k[g],10)||0);j[g]+=(parseInt(f[g],10)||0)}return{height:j[0]+j[2],width:j[1]+j[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var h,g=0,f=this.helper||this.element;for(;g<this._proportionallyResizeElements.length;g++){h=this._proportionallyResizeElements[g];
if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(h)}h.css({height:(f.height()-this.outerDimensions.height)||0,width:(f.width()-this.outerDimensions.width)||0})}},_renderProxy:function(){var f=this.element,g=this.options;this.elementOffset=f.offset();if(this._helper){this.helper=this.helper||d("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++g.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(g,f){return{width:this.originalSize.width+f}},w:function(h,f){var g=this.originalSize,i=this.originalPosition;return{left:i.left+f,width:g.width-f}},n:function(i,g,f){var h=this.originalSize,j=this.originalPosition;return{top:j.top+f,height:h.height-f}},s:function(h,g,f){return{height:this.originalSize.height+f}},se:function(h,g,f){return d.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[h,g,f]))},sw:function(h,g,f){return d.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[h,g,f]))},ne:function(h,g,f){return d.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[h,g,f]))},nw:function(h,g,f){return d.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[h,g,f]))}},_propagate:function(g,f){d.coral.plugin.call(this,g,[f,this.ui()]);(g!=="resize"&&this._trigger(g,f,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});d.coral.plugin.add("resizable","animate",{stop:function(i){var n=d(this).data("coral-resizable"),k=n.options,h=n._proportionallyResizeElements,f=h.length&&(/textarea/i).test(h[0].nodeName),g=f&&c(h[0],"left")?0:n.sizeDiff.height,m=f?0:n.sizeDiff.width,j={width:(n.size.width-m),height:(n.size.height-g)},l=(parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left))||null,p=(parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top))||null;
n.element.animate(d.extend(j,p&&l?{top:p,left:l}:{}),{duration:k.animateDuration,easing:k.animateEasing,step:function(){var o={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};if(h&&h.length){d(h[0]).css({width:o.width,height:o.height})}n._updateCache(o);n._propagate("resize",i)}})}});d.coral.plugin.add("resizable","containment",{start:function(){var n,h,r,f,m,i,s,q=d(this).data("coral-resizable"),l=q.options,k=q.element,g=l.containment,j=(g instanceof d)?g.get(0):(/parent/.test(g))?k.parent().get(0):g;if(!j){return}q.containerElement=d(j);if(/document/.test(g)||g===document){q.containerOffset={left:0,top:0};q.containerPosition={left:0,top:0};q.parentData={element:d(document),left:0,top:0,width:d(document).width(),height:d(document).height()||document.body.parentNode.scrollHeight}}else{n=d(j);h=[];d(["Top","Right","Left","Bottom"]).each(function(p,o){h[p]=b(n.css("padding"+o))});q.containerOffset=n.offset();q.containerPosition=n.position();q.containerSize={height:(n.innerHeight()-h[3]),width:(n.innerWidth()-h[1])};r=q.containerOffset;f=q.containerSize.height;m=q.containerSize.width;i=(c(j,"left")?j.scrollWidth:m);s=(c(j)?j.scrollHeight:f);q.parentData={element:j,left:r.left,top:r.top,width:i,height:s}}},resize:function(g){var m,s,l,j,n=d(this).resizable("instance"),i=n.options,q=n.containerOffset,p=n.position,r=n._aspectRatio||g.shiftKey,f={top:0,left:0},h=n.containerElement,k=true;if(h[0]!==document&&(/static/).test(h.css("position"))){f=q}if(p.left<(n._helper?q.left:0)){n.size.width=n.size.width+(n._helper?(n.position.left-q.left):(n.position.left-f.left));if(r){n.size.height=n.size.width/n.aspectRatio;k=false}n.position.left=i.helper?q.left:0}if(p.top<(n._helper?q.top:0)){n.size.height=n.size.height+(n._helper?(n.position.top-q.top):n.position.top);if(r){n.size.width=n.size.height*n.aspectRatio;k=false}n.position.top=n._helper?q.top:0}l=n.containerElement.get(0)===n.element.parent().get(0);
j=/relative|absolute/.test(n.containerElement.css("position"));if(l&&j){n.offset.left=n.parentData.left+n.position.left;n.offset.top=n.parentData.top+n.position.top}else{n.offset.left=n.element.offset().left;n.offset.top=n.element.offset().top}m=Math.abs(n.sizeDiff.width+(n._helper?n.offset.left-f.left:(n.offset.left-q.left)));s=Math.abs(n.sizeDiff.height+(n._helper?n.offset.top-f.top:(n.offset.top-q.top)));if(m+n.size.width>=n.parentData.width){n.size.width=n.parentData.width-m;if(r){n.size.height=n.size.width/n.aspectRatio;k=false}}if(s+n.size.height>=n.parentData.height){n.size.height=n.parentData.height-s;if(r){n.size.width=n.size.height*n.aspectRatio;k=false}}if(!k){n.position.left=n.prevPosition.left;n.position.top=n.prevPosition.top;n.size.width=n.prevSize.width;n.size.height=n.prevSize.height}},stop:function(){var l=d(this).resizable("instance"),g=l.options,m=l.containerOffset,f=l.containerPosition,i=l.containerElement,j=d(l.helper),p=j.offset(),n=j.outerWidth()-l.sizeDiff.width,k=j.outerHeight()-l.sizeDiff.height;if(l._helper&&!g.animate&&(/relative/).test(i.css("position"))){d(this).css({left:p.left-f.left-m.left,width:n,height:k})}if(l._helper&&!g.animate&&(/static/).test(i.css("position"))){d(this).css({left:p.left-f.left-m.left,width:n,height:k})}}});d.coral.plugin.add("resizable","alsoResize",{start:function(){var f=d(this).data("coral-resizable"),h=f.options,g=function(i){d(i).each(function(){var j=d(this);j.data("coral-resizable-alsoresize",{width:parseInt(j.width(),10),height:parseInt(j.height(),10),left:parseInt(j.css("left"),10),top:parseInt(j.css("top"),10)})})};if(typeof(h.alsoResize)==="object"&&!h.alsoResize.parentNode){if(h.alsoResize.length){h.alsoResize=h.alsoResize[0];g(h.alsoResize)}else{d.each(h.alsoResize,function(i){g(i)})}}else{g(h.alsoResize)}},resize:function(h,j){var g=d(this).data("coral-resizable"),k=g.options,i=g.originalSize,m=g.originalPosition,l={height:(g.size.height-i.height)||0,width:(g.size.width-i.width)||0,top:(g.position.top-m.top)||0,left:(g.position.left-m.left)||0},f=function(n,o){d(n).each(function(){var r=d(this),u=d(this).data("coral-resizable-alsoresize"),q={},p=o&&o.length?o:r.parents(j.originalElement[0]).length?["width","height"]:["width","height","top","left"];
var s=d.coral.getStyles(r[0]);var t=jQuery.support.boxSizing&&jQuery.css(r,"boxSizing",false,s)==="border-box";d.each(p,function(v,x){var w=(u[x]||0)+(l[x]||0);if(w&&w>=0){if(t){if(d.inArray(x,["width","height"])>=0){r[x](w)}else{r.css(x,w)}}else{q[x]=w||null}}});r.css(q)})};if(typeof(k.alsoResize)==="object"&&!k.alsoResize.nodeType){d.each(k.alsoResize,function(n,o){f(n,o)})}else{f(k.alsoResize)}},stop:function(){d(this).removeData("resizable-alsoresize")}});d.coral.plugin.add("resizable","ghost",{start:function(){var g=d(this).data("coral-resizable"),h=g.options,f=g.size;g.ghost=g.originalElement.clone();g.ghost.css({opacity:0.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("coral-resizable-ghost").addClass(typeof h.ghost==="string"?h.ghost:"");g.ghost.appendTo(g.helper)},resize:function(){var f=d(this).data("coral-resizable");if(f.ghost){f.ghost.css({position:"relative",height:f.size.height,width:f.size.width})}},stop:function(){var f=d(this).data("coral-resizable");if(f.ghost&&f.helper){f.helper.get(0).removeChild(f.ghost.get(0))}}});d.coral.plugin.add("resizable","grid",{resize:function(){var i,n=d(this).resizable("instance"),s=n.options,l=n.size,m=n.originalSize,p=n.originalPosition,x=n.axis,f=typeof s.grid==="number"?[s.grid,s.grid]:s.grid,v=(f[0]||1),u=(f[1]||1),k=Math.round((l.width-m.width)/v)*v,j=Math.round((l.height-m.height)/u)*u,q=m.width+k,t=m.height+j,h=s.maxWidth&&(s.maxWidth<q),r=s.maxHeight&&(s.maxHeight<t),w=s.minWidth&&(s.minWidth>q),g=s.minHeight&&(s.minHeight>t);s.grid=f;if(w){q+=v}if(g){t+=u}if(h){q-=v}if(r){t-=u}if(/^(se|s|e)$/.test(x)){n.size.width=q;n.size.height=t}else{if(/^(ne)$/.test(x)){n.size.width=q;n.size.height=t;n.position.top=p.top-j}else{if(/^(sw)$/.test(x)){n.size.width=q;n.size.height=t;n.position.left=p.left-k}else{if(t-u<=0||q-v<=0){i=n._getPaddingPlusBorderDimensions(this)}if(t-u>0){n.size.height=t;n.position.top=p.top-j}else{t=u-i.height;n.size.height=t;n.position.top=p.top+m.height-t
}if(q-v>0){n.size.width=q;n.position.left=p.left-k}else{q=u-i.height;n.size.width=q;n.position.left=p.left+m.width-q}}}}}})})(jQuery);

/*!
 * jQuery coral Selectable 4.0.1
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.component.js
 */
(function(a,b){a.component("coral.selectable",a.coral.mouse,{version:"4.0.1",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var d,c=this;this.element.addClass("coral-selectable");this.dragged=false;this.refresh=function(){d=a(c.options.filter,c.element[0]);d.addClass("coral-selectee");d.each(function(){var e=a(this),f=e.offset();a.data(this,"selectable-item",{element:this,$element:e,left:f.left,top:f.top,right:f.left+e.outerWidth(),bottom:f.top+e.outerHeight(),startselected:false,selected:e.hasClass("coral-selected"),selecting:e.hasClass("coral-selecting"),unselecting:e.hasClass("coral-unselecting")})})};this.refresh();this.selectees=d.addClass("coral-selectee");this._mouseInit();this.helper=a("<div class='coral-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("coral-selectee").removeData("selectable-item");this.element.removeClass("coral-selectable coral-selectable-disabled");this._mouseDestroy()},_mouseStart:function(e){var d=this,c=this.options;this.opos=[e.pageX,e.pageY];if(this.options.disabled){return}this.selectees=a(c.filter,this.element[0]);this._trigger("start",e);a(c.appendTo).append(this.helper);this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0});if(c.autoRefresh){this.refresh()}this.selectees.filter(".coral-selected").each(function(){var f=a.data(this,"selectable-item");f.startselected=true;if(!e.metaKey&&!e.ctrlKey){f.$element.removeClass("coral-selected");f.selected=false;f.$element.addClass("coral-unselecting");f.unselecting=true;d._trigger("unselecting",e,{unselecting:f.element})}});a(e.target).parents().addBack().each(function(){var f,g=a.data(this,"selectable-item");if(g){f=(!e.metaKey&&!e.ctrlKey)||!g.$element.hasClass("coral-selected");g.$element.removeClass(f?"coral-unselecting":"coral-selected").addClass(f?"coral-selecting":"coral-unselecting");
g.unselecting=!f;g.selecting=f;g.selected=f;if(f){d._trigger("selecting",e,{selecting:g.element})}else{d._trigger("unselecting",e,{unselecting:g.element})}return false}})},_mouseDrag:function(j){this.dragged=true;if(this.options.disabled){return}var g,i=this,e=this.options,d=this.opos[0],h=this.opos[1],c=j.pageX,f=j.pageY;if(d>c){g=c;c=d;d=g}if(h>f){g=f;f=h;h=g}this.helper.css({left:d,top:h,width:c-d,height:f-h});this.selectees.each(function(){var k=a.data(this,"selectable-item"),l=false;if(!k||k.element===i.element[0]){return}if(e.tolerance==="touch"){l=(!(k.left>c||k.right<d||k.top>f||k.bottom<h))}else{if(e.tolerance==="fit"){l=(k.left>d&&k.right<c&&k.top>h&&k.bottom<f)}}if(l){if(k.selected){k.$element.removeClass("coral-selected");k.selected=false}if(k.unselecting){k.$element.removeClass("coral-unselecting");k.unselecting=false}if(!k.selecting){k.$element.addClass("coral-selecting");k.selecting=true;i._trigger("selecting",j,{selecting:k.element})}}else{if(k.selecting){if((j.metaKey||j.ctrlKey)&&k.startselected){k.$element.removeClass("coral-selecting");k.selecting=false;k.$element.addClass("coral-selected");k.selected=true}else{k.$element.removeClass("coral-selecting");k.selecting=false;if(k.startselected){k.$element.addClass("coral-unselecting");k.unselecting=true}i._trigger("unselecting",j,{unselecting:k.element})}}if(k.selected){if(!j.metaKey&&!j.ctrlKey&&!k.startselected){k.$element.removeClass("coral-selected");k.selected=false;k.$element.addClass("coral-unselecting");k.unselecting=true;i._trigger("unselecting",j,{unselecting:k.element})}}}});return false},_mouseStop:function(d){var c=this;this.dragged=false;a(".coral-unselecting",this.element[0]).each(function(){var e=a.data(this,"selectable-item");e.$element.removeClass("coral-unselecting");e.unselecting=false;e.startselected=false;c._trigger("unselected",d,{unselected:e.element})});a(".coral-selecting",this.element[0]).each(function(){var e=a.data(this,"selectable-item");e.$element.removeClass("coral-selecting").addClass("coral-selected");
e.selecting=false;e.selected=true;e.startselected=true;c._trigger("selected",d,{selected:e.element})});this._trigger("stop",d);this.helper.remove();return false}})})(jQuery);

/*!
 * 组件库4.0：元素位置辅助工具
 */
(function(e,c){e.coral=e.coral||{};var j,m,k=Math.max,p=Math.abs,n=Math.round,d=/left|center|right/,h=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,b=/%$/,g=e.fn.position;function o(s,r,q){return[parseFloat(s[0])*(b.test(s[0])?r/100:1),parseFloat(s[1])*(b.test(s[1])?q/100:1)]}function i(q,r){return parseInt(e.css(q,r),10)||0}function f(r){var q=r[0];if(q.nodeType===9){return{width:r.width(),height:r.height(),offset:{top:0,left:0}}}if(e.isWindow(q)){return{width:r.width(),height:r.height(),offset:{top:r.scrollTop(),left:r.scrollLeft()}}}if(q.preventDefault){return{width:0,height:0,offset:{top:q.pageY,left:q.pageX}}}return{width:r.outerWidth(),height:r.outerHeight(),offset:r.offset()}}e.position={scrollbarWidth:function(){if(j!==c){return j}var r,q,t=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=t.children()[0];e("body").append(t);r=s.offsetWidth;t.css("overflow","scroll");q=s.offsetWidth;if(r===q){q=t[0].clientWidth}t.remove();return(j=r-q)},getScrollInfo:function(u){var t=u.isWindow||u.isDocument?"":u.element.css("overflow-x"),s=u.isWindow||u.isDocument?"":u.element.css("overflow-y"),r=t==="scroll"||(t==="auto"&&u.width<u.element[0].scrollWidth),q=s==="scroll"||(s==="auto"&&u.height<u.element[0].scrollHeight);return{width:q?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(r){var s=e(r||window),q=e.isWindow(s[0]),t=!!s[0]&&s[0].nodeType===9;return{element:s,isWindow:q,isDocument:t,offset:s.offset()||{left:0,top:0},scrollLeft:s.scrollLeft(),scrollTop:s.scrollTop(),width:q||t?s.width():s.outerWidth(),height:q||t?s.height():s.outerHeight()}}};e.fn.position=function(A){if(!A||!A.of){return g.apply(this,arguments)}A=e.extend({},A);var B,x,v,z,u,q,w=e(A.of),t=e.position.getWithinInfo(A.within),r=e.position.getScrollInfo(t),y=(A.collision||"flip").split(" "),s={};q=f(w);if(w[0].preventDefault){A.at="left top"
}x=q.width;v=q.height;z=q.offset;u=e.extend({},z);e.each(["my","at"],function(){var E=(A[this]||"").split(" "),D,C;if(E.length===1){E=d.test(E[0])?E.concat(["center"]):h.test(E[0])?["center"].concat(E):["center","center"]}E[0]=d.test(E[0])?E[0]:"center";E[1]=h.test(E[1])?E[1]:"center";D=a.exec(E[0]);C=a.exec(E[1]);s[this]=[D?D[0]:0,C?C[0]:0];A[this]=[l.exec(E[0])[0],l.exec(E[1])[0]]});if(y.length===1){y[1]=y[0]}if(A.at[0]==="right"){u.left+=x}else{if(A.at[0]==="center"){u.left+=x/2}}if(A.at[1]==="bottom"){u.top+=v}else{if(A.at[1]==="center"){u.top+=v/2}}B=o(s.at,x,v);u.left+=B[0];u.top+=B[1];return this.each(function(){var D,M,F=e(this),H=F.outerWidth(),E=F.outerHeight(),G=i(this,"marginLeft"),C=i(this,"marginTop"),L=H+G+i(this,"marginRight")+r.width,K=E+C+i(this,"marginBottom")+r.height,I=e.extend({},u),J=o(s.my,F.outerWidth(),F.outerHeight());if(A.my[0]==="right"){I.left-=H}else{if(A.my[0]==="center"){I.left-=H/2}}if(A.my[1]==="bottom"){I.top-=E}else{if(A.my[1]==="center"){I.top-=E/2}}I.left+=J[0];I.top+=J[1];if(!m){I.left=n(I.left);I.top=n(I.top)}D={marginLeft:G,marginTop:C};e.each(["left","top"],function(O,N){if(e.coral.position[y[O]]){e.coral.position[y[O]][N](I,{targetWidth:x,targetHeight:v,elemWidth:H,elemHeight:E,collisionPosition:D,collisionWidth:L,collisionHeight:K,offset:[B[0]+J[0],B[1]+J[1]],my:A.my,at:A.at,within:t,elem:F})}});if(A.using){M=function(Q){var S=z.left-I.left,P=S+x-H,R=z.top-I.top,O=R+v-E,N={target:{element:w,left:z.left,top:z.top,width:x,height:v},element:{element:F,left:I.left,top:I.top,width:H,height:E},horizontal:P<0?"left":S>0?"right":"center",vertical:O<0?"top":R>0?"bottom":"middle"};if(x<H&&p(S+P)<x){N.horizontal="center"}if(v<E&&p(R+O)<v){N.vertical="middle"}if(k(p(S),p(P))>k(p(R),p(O))){N.important="horizontal"}else{N.important="vertical"}A.using.call(this,Q,N)}}F.offset(e.extend(I,{using:M}))})};e.coral.position={fit:{left:function(u,t){var s=t.within,w=s.isWindow?s.scrollLeft:s.offset.left,y=s.width,v=u.left-t.collisionPosition.marginLeft,x=w-v,r=v+t.collisionWidth-y-w,q;
if(t.collisionWidth>y){if(x>0&&r<=0){q=u.left+x+t.collisionWidth-y-w;u.left+=x-q}else{if(r>0&&x<=0){u.left=w}else{if(x>r){u.left=w+y-t.collisionWidth}else{u.left=w}}}}else{if(x>0){u.left+=x}else{if(r>0){u.left-=r}else{u.left=k(u.left-v,u.left)}}}},top:function(t,s){var r=s.within,x=r.isWindow?r.scrollTop:r.offset.top,y=s.within.height,v=t.top-s.collisionPosition.marginTop,w=x-v,u=v+s.collisionHeight-y-x,q;if(s.collisionHeight>y){if(w>0&&u<=0){q=t.top+w+s.collisionHeight-y-x;t.top+=w-q}else{if(u>0&&w<=0){t.top=x}else{if(w>u){t.top=x+y-s.collisionHeight}else{t.top=x}}}}else{if(w>0){t.top+=w}else{if(u>0){t.top-=u}else{t.top=k(t.top-v,t.top)}}}}},flip:{left:function(w,v){var u=v.within,A=u.offset.left+u.scrollLeft,D=u.width,s=u.isWindow?u.scrollLeft:u.offset.left,x=w.left-v.collisionPosition.marginLeft,B=x-s,r=x+v.collisionWidth-D-s,z=v.my[0]==="left"?-v.elemWidth:v.my[0]==="right"?v.elemWidth:0,C=v.at[0]==="left"?v.targetWidth:v.at[0]==="right"?-v.targetWidth:0,t=-2*v.offset[0],q,y;if(B<0){q=w.left+z+C+t+v.collisionWidth-D-A;if(q<0||q<p(B)){w.left+=z+C+t}}else{if(r>0){y=w.left-v.collisionPosition.marginLeft+z+C+t-s;if(y>0||p(y)<r){w.left+=z+C+t}}}},top:function(v,u){var t=u.within,C=t.offset.top+t.scrollTop,D=t.height,q=t.isWindow?t.scrollTop:t.offset.top,x=v.top-u.collisionPosition.marginTop,z=x-q,w=x+u.collisionHeight-D-q,A=u.my[1]==="top",y=A?-u.elemHeight:u.my[1]==="bottom"?u.elemHeight:0,E=u.at[1]==="top"?u.targetHeight:u.at[1]==="bottom"?-u.targetHeight:0,s=-2*u.offset[1],B,r;if(z<0){r=v.top+y+E+s+u.collisionHeight-D-C;if((v.top+y+E+s)>z&&(r<0||r<p(z))){v.top+=y+E+s}}else{if(w>0){B=v.top-u.collisionPosition.marginTop+y+E+s-q;if((v.top+y+E+s)>w&&(B>0||p(B)<w)){v.top+=y+E+s}}}}},flipfit:{left:function(){e.coral.position.flip.left.apply(this,arguments);e.coral.position.fit.left.apply(this,arguments)},top:function(){e.coral.position.flip.top.apply(this,arguments);e.coral.position.fit.top.apply(this,arguments)}}};(function(){var u,w,r,t,s,q=document.getElementsByTagName("body")[0],v=document.createElement("div");
u=document.createElement(q?"div":"body");r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(q){e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"})}for(s in r){u.style[s]=r[s]}u.appendChild(v);w=q||document.documentElement;w.insertBefore(u,w.firstChild);v.style.cssText="position: absolute; left: 10.7432222px;";t=e(v).offset().left;m=t>10&&t<11;u.innerHTML="";w.removeChild(u)})()}(jQuery));

(function(){var a={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(c,b){a[b]=function(d){return Math.pow(d,c+2)}});$.extend(a,{Sine:function(b){return 1-Math.cos(b*Math.PI/2)},Circ:function(b){return 1-Math.sqrt(1-b*b)},Elastic:function(b){return b===0||b===1?b:-Math.pow(2,8*(b-1))*Math.sin(((b-1)*80-7.5)*Math.PI/15)},Back:function(b){return b*b*(3*b-2)},Bounce:function(d){var b,c=4;while(d<((b=Math.pow(2,--c))-1)/11){}return 1/Math.pow(4,3-c)-7.5625*Math.pow((b*3-2)/22-d,2)}});$.each(a,function(c,b){$.easing["easeIn"+c]=b;$.easing["easeOut"+c]=function(d){return 1-b(1-d)};$.easing["easeInOut"+c]=function(d){return d<0.5?b(d*2)/2:1-b(d*-2+2)/2}})})();

(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./core","./component","./grid.common","./mousewheel","./locale-cn","./fmatter"],a)}else{a(jQuery)}}(function($,undefined){$.grid=$.grid||{};var grid=$.component("coral.grid",{version:"4.0.1",castProperties:["rowEditButtons","data","initData","rowList","pagerTemplate","celloptions"],options:{},grid:{},diff:2,getScrollBarWidth:function(){var inner=document.createElement("p");inner.style.width="100%";inner.style.height="200px";var outer=document.createElement("div");outer.style.position="absolute";outer.style.top="0px";outer.style.left="0px";outer.style.visibility="hidden";outer.style.width="200px";outer.style.height="150px";outer.style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth}document.body.removeChild(outer);return(w1-w2)+this.diff},_destroy:function(){var destroyPag="",elementId=$(this.element).attr("id");if(this.pagers){destroyPag=$(this.pagers).empty().addClass(elementId)}$(this.element).empty();this.element.removeClass("ctrl-init ctrl-init-grid");this.element.removeClass("coral-grid");this.element.removeClass(this.options.cls);this.component().replaceWith(this.element).append(destroyPag)},_create:function(){var options=this.options,that=this,activeClass="coral-state-active",focusClass="coral-state-focus",id=this.element.uniqueId().attr("id");options.id=id;var p={_index:{},altRows:false,altclass:" coral-priority-secondary ",ajaxGridOptions:{},asyncType:"post",autoSave:false,autoValid:true,autoWidth:true,allowSaveOnError:true,cls:"",caption:"",colModel:[],colNames:[],cellLayout:1,cellEdit:false,cellsubmit:"clientArray",clicksToEdit:2,data:[],datatype:"json",direction:"ltr",deselectAfterSort:true,emptyrecords:"无数据",ExpandColumn:null,height:150,idPrefix:"",initData:false,customPicgrid:$.noop(),gridview:false,grouping:false,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:false,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"cui-icon-plus3",minusicon:"cui-icon-minus3",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:false},groupHeaders:[],groupHeader:false,fitStyle:"auto",forceFit:false,hoverrows:true,lastsort:0,loadonce:true,loadui:"enable",loadtext:"加载中，请耐心等候 ...",minWidth:false,multiselect:false,multiselectWidth:30,multikey:"",model:"grid",page:1,pager:"",pagerStyle:"flex",pginput:true,records:0,rninput:true,rowEditButtons:[],pgbuttons:true,picTemplate:"picTemplate",postData:{},prmNames:{page:"P_pageNumber",rows:"P_pagesize",sort:"P_orders",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},rowNum:20,rowNumMax:200,rownumbers:false,rownumWidth:35,rownumName:"",rowList:[10,20,30],savedRow:[],scrollOffset:this.getScrollBarWidth(),selarrrow:[],singleselect:false,sortorder:"asc",treeGrid:false,treeGridModel:"adjacency",treeReader:{},treeANode:-1,tree_root_level:0,onSortableColumns:false,sortableColumnsOptions:{},onSortableRows:false,beforeSortableRows:false,afterSortableRows:false,editableRows:false,containSortOrder:false,sortSeparator:" ",shrinkToFit:true,toppager:false,toolbar:[false,""],url:"",useProp:true,viewsortcols:[false,"vertical",true],viewrecords:true,minIndex:null,maxIndex:null,preIndex:null,beforePopulate:null};
options=$.extend(true,{},p,$.grid.defaults,this.options);if(options.model=="pic"){options.model="card"}this.options=options;this.options.isValid=true;options.postData=$.coral.toFunction(options.postData);options.localReader=$.extend(true,{root:"data",page:"pageNumber",total:"totalPages",records:"total",repeatitems:false,cell:"cell",id:"id",userData:"userData",subgrid:{root:"data",repeatitems:true,cell:"cell"}},options.localReader);options.jsonReader=$.extend(true,{root:"data",page:"pageNumber",total:"totalPages",records:"total",repeatitems:false,cell:"cell",id:"id",userData:"userData"},options.jsonReader);if(this.options.pivotData&&this.options.pivotData.length){this.jqPivot(this.options.pivotData,this.options.pivotOption,this.options.gridOption,this.options.ajaxOption)}if(this.options.data.length){this.normalizeData();this.refreshIndex()}this.id=id;var grid={groupHeader:[],headers:[],cols:[],footers:[],dragStart:function(i,x,y){var grid=this;this.resizing={idx:i,startX:x.clientX,sOL:y[0]};grid.columnsView.style.cursor="col-resize";this.curGbox=$("#rs_m"+$.grid.coralID(that.options.id),"#"+$.grid.coralID(that.options.id));this.curGbox.css({display:"block",left:y[0],top:y[1],height:y[2]});that._trigger("onResizeStart",x,[{index:i}]);document.onselectstart=function(){return false}},dragMove:function(x){if(this.resizing){var diff=x.clientX-this.resizing.startX,h=this.headers[this.resizing.idx],newWidth=that.options.direction==="ltr"?h.width+diff:h.width-diff,hn,nWn;$("#test").html(diff);if(newWidth>33){this.curGbox.css({left:this.resizing.sOL+diff});if(that.options.forceFit===true){hn=this.headers[this.resizing.idx+options.nv];nWn=that.options.direction==="ltr"?hn.width-diff:hn.width+diff;if(nWn>33){h.newWidth=newWidth;hn.newWidth=nWn}}else{this.newWidth=that.options.direction==="ltr"?that.options.tblwidth+diff:that.options.tblwidth-diff;h.newWidth=newWidth}}}},dragEnd:function(){this.columnsView.style.cursor="default";if(this.resizing){var idx=this.resizing.idx,nw=this.headers[idx].newWidth||this.headers[idx].width;
nw=parseInt(nw,10);this.resizing=false;$("#rs_m"+$.grid.coralID(that.options.id)).css("display","none");that.options.colModel[idx].width=nw;this.headers[idx].width=nw;this.headers[idx].el.style.width=nw+"px";this.cols[idx].style.width=nw+"px";if($("table:first",this.rowsView).hasClass("coral-grid-btable-frozen")){$("tr.jqgfirstrow>td:eq("+idx+")",$("table:first",this.rowsView))[0].style.width=nw+"px"}var groupHeader=$("tr.jqg-first-row-header>th:eq("+idx+")",$("table:first",this.columnsView));if(groupHeader.length>0){groupHeader[0].style.width=nw+"px"}if(this.footers.length>0){this.footers[idx].style.width=nw+"px"}if(that.options.forceFit===true){nw=this.headers[idx+options.nv].newWidth||this.headers[idx+options.nv].width;this.headers[idx+options.nv].width=nw;this.headers[idx+options.nv].el.style.width=nw+"px";this.cols[idx+options.nv].style.width=nw+"px";if(this.footers.length>0){this.footers[idx+options.nv].style.width=nw+"px"}that.options.colModel[idx+options.nv].width=nw;groupHeader=$("tr.jqg-first-row-header>th:eq("+(idx+options.nv)+")",$("table:first",this.columnsView));if(groupHeader.length>0){groupHeader[0].style.width=nw+"px"}}else{that.options.tblwidth=this.newWidth||that.options.tblwidth;$("table",this.rowsView).css("width",that.options.tblwidth+"px");$("table:first",this.columnsView).css("width",that.options.tblwidth+"px");this.columnsView.scrollLeft=this.rowsView.scrollLeft;if(that.options.footerrow){$("table:first",this.sDiv).css("width",p.tblwidth+"px");this.sDiv.scrollLeft=this.rowsView.scrollLeft}}that._trigger("onResizeStop",null,[{newWidth:nw,index:idx,headers:this.headers}])}this.curGbox=null;document.onselectstart=function(){return true}},selectionPreserver:function(that){var opts=that.options,sr=opts.selrow,sra=opts.selarrrow?$.makeArray(opts.selarrrow):null,left=that.grid.rowsView.scrollLeft,restoreSelection=function(){var i;opts.selrow=null;opts.selarrrow=[];if(opts.multiselect&&sra&&sra.length>0){for(i=0;i<sra.length;i++){if(sra[i]!=sr){$(that.element).grid("setSelection",sra[i],false,null)
}}}if(sr){$(that.element).grid("setSelection",sr,false,null)}that.grid.rowsView.scrollLeft=left;$(that.element).unbind(".selectionPreserver",restoreSelection)};$(that.element).bind("gridoncomplete.selectionPreserver",restoreSelection)}};this.grid=grid;var gridColumns=this.element.find(">div").filter(function(){if($(this).hasClass(that.options.id)){return false}return true}),gridRows=$("<div class='coral-grid-rows'></div>");if(gridColumns.length==0){this.element.prepend("<div></div>");gridColumns=this.element.find(">div").filter(function(){if($(this).hasClass(that.id)){return false}return true})}that.gridRows=gridRows;that.gridColumns=gridColumns;that._analyzeColumns(gridColumns);gridColumns.addClass("coral-grid-columns").after(gridRows);grid.rowsView=document.createElement("div");$(grid.rowsView).addClass("coral-grid-rows-view").appendTo(gridRows);$("<span class='coral-grid-noRecordsTips' id='noRecordsTips_"+$.grid.coralID(that.options.id)+"'>"+that.options.emptyrecords+"</span>").appendTo($(grid.rowsView));grid.columnsView=document.createElement("div");$(grid.columnsView).addClass("coral-state-default coral-grid-columns-view").appendTo(gridColumns).append("<div class='coral-grid-topRightCell'></div>");that.pic=$("<ul class='coral-pic'></ul>");gridColumns.addClass("coral-grid-columns").after(that.pic);if(that.options.grouping===true){that.options.scroll=false;that.options.rownumbers=false;that.options.treeGrid=false;that.options.gridview=true}if(this.options.treeGrid===true){try{$(that.element).grid("setTreeGrid")}catch(_){}if(that.options.datatype!="local"){that.options.localReader={id:"_id_"}}}if(this.options.subGrid){try{$(that.element).grid("setSubGrid")}catch(s){}}if(this.options.multiselect){this.options.singleselect=false}if(!this.options.keyName){this.options.keyName=false}for(var i=0;i<this.options.colModel.length;i++){this.options.colModel[i]=$.extend(true,{},this.options.cmTemplate,this.options.colModel[i].template||{},this.options.colModel[i]);if(this.options.keyName===false&&this.options.colModel[i].key===true){this.options.keyName=this.options.colModel[i].name
}}if(this.options.multiselect){this.options.colNames.unshift("<input role='checkbox' id='cb_"+this.options.id+"' class='cbox' type='checkbox'/>");this.options.colModel.unshift({name:"cb",width:that.options.multiselectWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}else{if(this.options.singleselect){this.options.colNames.unshift("");this.options.colModel.unshift({name:"cb",width:that.options.multiselectWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}}if(this.options.rownumbers){this.options.colNames.unshift(that.options.rownumName);this.options.colModel.unshift({name:"rn",width:that.options.rownumWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}that._transToGrid();that._transToPicgrid();that._transPagers();that._cvH=$(grid.columnsView).height();if("fill"!==options.fitStyle){}that._setGridHeight(that.options.height);if(options.model=="grid"){that.pic.hide()}else{if(options.model=="card"){that.gridRows.hide();that.gridColumns.hide()}}that.setFrozenColumns();this.component().addClass(options.componentCls);this._populate();that._setUpEvent();$(window).unload(function(){that=null});this._on(this.document,{mousedown:function(event){if(this.options.autoSave&&this._closeOnDocumentClick(event)){this.restoreAll(event)}}})},_closeOnDocumentClick:function(event){return !$(event.target).closest(".coral-grid").length},_transPagers:function(){var that=this;this.pagers=$("."+this.id);this.pagers.each(function(ind){$(this).addClass("coral-grid-pager").removeClass(that.id).attr("id","pager_"+ind+++"_"+that.id)});if(this.pagers){this.pagers.each(function(i){that._setPager(that.pagers[i].id,"")});that.options.pager="."+that.id}},toolbar:function(){return $(".pager-toolbar",this.element)},_transToPicgrid:function(){var that=this;that.pic.css({height:230,overflow:"auto"})},_transToGrid:function(){var that=this,options=this.options;if($.inArray(that.options.multikey,that._sortkeys)==-1){that.options.multikey=false
}that.options.sortorder=that.options.sortorder.toLowerCase();this.element.addClass("coral-grid");this.element.addClass(that.options.cls);that._transGridView()},_transGridView:function(){var that=this,options=this.options,grid=this.grid,ni=options.rownumbers===true?1:0,gi=options.multiselect===true?1:(options.singleselect===true?1:0),si=options.subGrid===true?1:0;var dir=options.direction,i;var thead="<thead><tr class='coral-grid-labels' role='rowheader'>",tdc,idn,w,res,sort,td,ptr,tbody,imgs,iac="",idc="";if(options.shrinkToFit===true&&options.forceFit===true){for(i=options.colModel.length-1;i>=0;i--){if(!options.colModel[i].hidden){options.colModel[i].resizable=false;break}}}$.each(this.options.colModel,function(){if(typeof this.hidden==="undefined"){this.hidden=false}});imgs="<span class='s-ico' style='display:none'><span sort='asc' class='coral-grid-ico-sort coral-icon-asc"+iac+" coral-state-disabled cui-icon-arrow-up5 coral-sort-"+dir+"'></span>";imgs+="<span sort='desc' class='coral-grid-ico-sort coral-icon-desc"+idc+" coral-state-disabled cui-icon-arrow-down5 coral-sort-"+dir+"'></span></span>";for(i=0;i<options.colNames.length;i++){var tooltip=that.options.headertitles?(' title="'+$.grid.stripHtml(that.options.colNames[i])+'"'):"";var coralColumnSortableDisabledClass=options.colModel[i].columnSortable?"coral-columnSortable-disabled":"";thead+="<th id='"+options.id+"_"+options.colModel[i].name+"' role='columnheader' class='coral-state-default "+coralColumnSortableDisabledClass+" coral-th-column coral-th-"+dir+"'"+tooltip+">";idn=options.colModel[i].index||options.colModel[i].name;if(i<ni+si+gi){thead+="<div id='jqgh_"+options.id+"_"+options.colModel[i].name+"' "+tdc+">"+options.colNames[i]}else{thead+="<div id='jqgh_"+options.id+"_"+options.colModel[i].name+"'  title='"+options.colNames[i]+"'"+tdc+">"+options.colNames[i]}if(!options.colModel[i].width){options.colModel[i].width=150}else{options.colModel[i].width=parseInt(options.colModel[i].width,10)}if(typeof(options.colModel[i].title)!=="boolean"){options.colModel[i].title=true
}if(idn==options.sortname){options.lastsort=i}thead+=imgs+"</div></th>"}thead+="</tr></thead>";imgs=null;var hTable=$("<table class='coral-grid-htable' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(thead);that.gridColumns.find(".coral-grid-columns-view").append(hTable);$("thead tr:first th",grid.columnsView).hover(function(){$(this).addClass("coral-state-hover")},function(){$(this).removeClass("coral-state-hover")});that._setMultiselect();var ww;if(typeof(options.width)!=="undefined"){if(typeof(options.width)=="string"&&options.width=="auto"){var pw=$(that.element).innerWidth();that.options.width=pw>0?pw:"nw";ww=pw}else{ww=options.width}}that._trigger("beforePopulate",null,[]);this._setColWidth();$(that.element).append("<div class='coral-grid-resize-mark' id='rs_m"+that.options.id+"'>&#160;</div>");thead=$("thead:first",that.element).get(0);var tfoot="";if(that.options.footerrow){tfoot+="<table role='grid' style='width:"+that.options.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow'>"}var thr=$("tr:first",thead),firstr="<tr class='jqgfirstrow' role='row' style='height:auto'>";$("th",thr).each(function(j){w=options.colModel[j].width;if(typeof options.colModel[j].resizable==="undefined"){options.colModel[j].resizable=true}if(options.colModel[j].resizable){res=document.createElement("span");$(res).html("&#160;").addClass("coral-grid-resize coral-grid-resize-"+dir);$(res).css("cursor","col-resize");$(this).addClass(options.resizeclass)}else{res=""}$(this).css("width",w+"px").prepend(res);var hdcol="";if(options.colModel[j].hidden){$(this).css("display","none");hdcol="display:none;"}firstr+="<td role='gridcell' style='height:0px;width:"+w+"px;"+hdcol+"'></td>";grid.headers[j]={width:w,el:this};sort=options.colModel[j].sortable;if(typeof sort!=="boolean"){options.colModel[j].sortable=true;sort=true}var nm=options.colModel[j].name;
if(!(nm=="cb"||nm=="subgrid"||nm=="rn")){if(options.viewsortcols[2]){$(">div",this).addClass("coral-grid-sortable")}}if(sort){if(options.viewsortcols[0]){$("div span.s-ico",this).show();if(j==options.lastsort){$("div span.coral-icon-"+options.sortorder,this).removeClass("coral-state-disabled")}}else{if(j==options.lastsort){$("div span.s-ico",this).show();$("div span.coral-icon-"+options.sortorder,this).removeClass("coral-state-disabled")}}}if(options.footerrow){tfoot+="<td role='gridcell' "+that._formatCol(j,0,"",null,"",false)+">&#160;</td>"}}).mousedown(function(e){if($(e.target).closest("th>span.coral-grid-resize").length!=1){return}var ci=that._getColumnHeaderIndex(this);if(options.forceFit===true){options.nv=that._nextVisible(ci)}grid.dragStart(ci,e,that._getOffset(ci));return false}).click(function(e){if(options.disableClick){options.disableClick=false;return false}var s="th>div.coral-grid-sortable",r,d;if(!options.viewsortcols[2]){s="th>div>span>span.coral-grid-ico-sort"}var t=$(e.target).closest(s);if(t.length!=1){return}var ci=that._getColumnHeaderIndex(this);if(!options.viewsortcols[2]){r=true;d=t.attr("sort")}that._sortData($("div",this)[0].id,ci,r,d,this);return false});if(that.options.onSortableColumns&&$.fn.sortable){try{$(that.element).grid("sortableColumns",thr)}catch(e){}}if(that.options.footerrow){tfoot+="</tr></tbody></table>"}firstr+="</tr>";var bTable=$("<table id='"+that.options.id+"_table' class='coral-grid-btable' role='grid' cellspacing='0' cellpadding='0' border='0'></table>").append(firstr);that.gridRows.find(".coral-grid-rows-view").append(bTable);this.rows=that.gridRows.find(".coral-grid-btable")[0].rows;this.element.prepend("<div class='coral-grid-view'></div>");var hb;if(that.options.footerrow){grid.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0];hb=$("<div class='ui-jqgrid-hbox'></div>");$(grid.sDiv).append(hb).width(grid.width).insertAfter(that.gridColumns);$(hb).append(tfoot);grid.footers=$(".ui-jqgrid-ftable",grid.sDiv)[0].rows[0].cells;
if(that.options.rownumbers){grid.footers[0].className="ui-state-default jqgrid-rownum"}}hb=null;if(that.options.caption.length>0){grid.caption=document.createElement("div");grid.caption.className="coral-grid-caption";$(grid.caption).html(that.options.caption);this.element.prepend(grid.caption)}$(grid.columnsView).add(grid.rowsView).parent().appendTo(this.element.find(".coral-grid-view"));if(options.shrinkToFit===true&&options.forceFit===true){$("table:first",grid.rowsView).css("width",that.grid.width+"px");$("table:first",grid.columnsView).css("width",that.grid.width+"px")}else{if(options.shrinkToFit===false){$("table:first",grid.rowsView).css("width",that.options.tblwidth+"px");$("table:first",grid.columnsView).css("width",that.options.tblwidth+"px")}}that._setOption("width",ww);this.grid.cols=this.rows[0].cells;if(options.groupHeader){this.setGroupHeaders({useColSpanStyle:true,groupHeaders:options.groupHeaders});var thrThird=$("tr.jqg-third-row-header",thead);if(that.options.sortable&&$.fn.sortable){try{$(that.element).grid("sortableColumns",thrThird)}catch(e){}}}thead=null;hTable=null;bTable=null},_sortkeys:["shiftKey","altKey","ctrlKey"],_getColumnHeaderIndex:function(th){var that=this;var i,headers=that.grid.headers,ci=$.grid.getCellIndex(th);if(this.grid.rightfhDiv){ci=headers.length-ci-1}for(i=0;i<headers.length;i++){if(th===headers[i].el){ci=i;break}}return ci},_analyzeColumns:function(columns){var that=this,i=0,options=this.options;columns.children().each(function(i){var opts=$.parser.parseOptions(this,null,["data"]);if(typeof(opts.name)!="undefined"){options.colModel.push(opts);options.colNames.push(opts.label||$(this).html())}else{if(typeof(opts.header)!="undefined"){var len=0;var inOption;$(this).children().each(function(i){var opts=$.parser.parseOptions(this,null,["data"]);options.colModel.push(opts);options.colNames.push(opts.label||$(this).html());len++;i==0&&(inOption=opts)});options.groupHeaders.push({startColumnName:inOption.name,numberOfColumns:len,titleText:opts.header})
}}});for(i=0;i<this.options.colModel.length;i++){var model=this.options.colModel[i];if(model.formatter=="combobox"||model.formatter=="combotree"||model.formatter=="combogrid"){if(model.revertCode!=false){model.revertCode=true}}model.postMode=model.postMode||"value";if(model.edittype=="combobox"||model.edittype=="combotree"||model.edittype=="autocomplete"||model.edittype=="combogrid"){(model.edittype=="combotree")&&(model.dataStructure="tree");model.formatter=model.formatter||"convertCode"}}if(this.options.colNames.length===0){for(i=0;i<this.options.colModel.length;i++){this.options.colNames[i]=this.options.colModel[i].label||this.options.colModel[i].name}}if(this.options.colNames.length!==this.options.colModel.length){alert("errors! colNames not equals to colModel!");return}columns.children().not(".coral-grid-columns-view").remove()},_updateMultiSelectIndexsOption:function(options){var min_index=options.minIndex,max_index=options.maxIndex,pre_index=options.preIndex,cur_index=options.curIndex;if(null==min_index){min_index=max_index=pre_index=(null==pre_index?cur_index:pre_index)}if(cur_index<=min_index){min_index=cur_index}else{if(cur_index>min_index&&cur_index<max_index){if(pre_index==max_index&&pre_index!=min_index){max_index=cur_index}else{if(pre_index==min_index&&pre_index!=max_index){min_index=cur_index}else{min_index=Math.min(cur_index,pre_index);max_index=Math.max(cur_index,pre_index)}}}else{if(cur_index>max_index){max_index=cur_index}}}return{minIndex:min_index,maxIndex:max_index,preIndex:pre_index}},_addShiftKeySelect:function(e,ui){var that=this,opts=that.options;if(!ui.rowId){return}var $this=$(that.element),rows=$this.find(".coral-grid-btable")[0].rows,curIndex=rows.namedItem(ui.rowId).rowIndex;if(e.shiftKey){var indexsOption=that._updateMultiSelectIndexsOption({maxIndex:opts.maxIndex,minIndex:opts.minIndex,preIndex:opts.preIndex,curIndex:curIndex});opts.minIndex=indexsOption.minIndex;opts.maxIndex=indexsOption.maxIndex;opts.preIndex=indexsOption.preIndex;
$this.grid("resetSelection");for(var i=opts.minIndex;i<=opts.maxIndex;i++){if(i!=curIndex||opts.multikey){$this.grid("setSelection",rows[i].id,false)}}if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){window.getSelection().removeAllRanges()}}}else{opts.minIndex=opts.maxIndex=null}opts.preIndex=curIndex},_setUpEvent:function(){var that=this,grid=this.grid,options=this.options;var ri,ci,tdHtml,td,ptr;if(that.options.cellEdit===false&&that.options.hoverrows===true){$(that.element).bind("mouseover",function(e){var isPicgrid=!!(that.options.model=="card");if(isPicgrid){ptr=$(e.target,that.pic).closest("li.gridPanel").find(".rowgrid");if($(ptr).attr("class")!=="coral-subgrid"){$(ptr).addClass("coral-state-hover")}}else{ptr=$(e.target,that.rows).closest("tr.jqgrow");if($(ptr).attr("class")!=="coral-subgrid"){$(ptr).addClass("coral-state-hover")}}}).bind("mouseout",function(e){var isPicgrid=!!(that.options.model=="card");if(isPicgrid){ptr=$(e.target,that.pic).closest("li.gridPanel ").find(".rowgrid")}else{ptr=$(e.target,that.rows).closest("tr.jqgrow")}$(ptr).removeClass("coral-state-hover")})}$(grid.rowsView).scroll(function(e){if(options.scroll){var scrollTop=$(grid.rowsView)[0].scrollTop;if(grid.scrollTop===undefined){grid.scrollTop=0}if(scrollTop!=grid.scrollTop){grid.scrollTop=scrollTop;if(grid.timer){clearTimeout(grid.timer)}grid.timer=setTimeout(grid.populateVisible,options.scrollTimeout)}}$(grid.columnsView)[0].scrollLeft=$(grid.rowsView)[0].scrollLeft;var top=$(grid.rowsView)[0].scrollTop;$(".coral-grid-btable-frozen").css("left",-$(grid.rowsView)[0].scrollLeft+"px");var b=$(".row-editable",that.element),editRow=$(that.element).grid("getInd",that.editRowIndex,true);if(b.length>0){that.editButtonsPos(that.editRowIndex,b)}if(options.footerrow){grid.sDiv.scrollLeft=$(grid.rowsView)[0].scrollLeft}});$(".coral-grid-btable",that.element).add(that.pic).click(function(e){var isPicgrid=!!(that.options.model=="card");var rowId;
td=e.target;if(isPicgrid){ptr=$(td,that.pic).closest("li.gridPanel")}else{ptr=$(td,that.rows).closest("tr.jqgrow")}if($(ptr).length===0||ptr[0].className.indexOf("coral-state-disabled")>-1||$(td,that.element).closest("table.coral-grid-btable").length<0){return this}var scb=$(td).hasClass("cbox"),cSel=that._trigger("beforeSelectRow",e,[{rowId:ptr[0].id}]);cSel=(cSel===false||cSel==="stop")?false:true;if(td.tagName=="A"||((td.tagName=="INPUT"||td.tagName=="TEXTAREA"||td.tagName=="OPTION"||td.tagName=="SELECT")&&!scb)){return}if(cSel===true){rowId=ptr[0].id;tdHtml=$(td).closest("td,th").html();if(!isPicgrid){ci=$.grid.getCellIndex(td);that._addShiftKeySelect(e,{rowId:ptr[0].id});that._trigger("onSelectCell",e,[{rowId:rowId,rowIndex:ptr[0].rowIndex,cellIndex:ci,cellHtml:tdHtml}])}if(that.options.editableRows&&that.options.clicksToEdit==1&&options.editrow!=rowId){that.restoreRow(options.editrow);if(that.rowEditButtons){that.rowEditButtons.remove()}}if(that.options.editableRows&&that.options.clicksToEdit==1&&!scb){options.editrow=ptr[0].id;that.editRow(ptr[0].id,true)}if(that.options.cellEdit===true&&that.options.clicksToEdit==1){var editable=that.options.colModel[ci].editable;var mul=that.options.multiselect||that.options.singleselect;if((mul&&scb)||(mul&&!editable&&!that.options.multikey)){$(that.element).grid("setSelection",rowId,true,e)}else{if(!isPicgrid){try{$(that.element).grid("editCell",ptr[0].rowIndex,ci,true)}catch(_){}}}}else{if(!that.options.multikey){if(that.options.multiselect&&that.options.multiboxonly){if(scb){$(that.element).grid("setSelection",rowId,true,e)}else{var frz=that.options.frozenColumns?that.options.id+"_frozen":"";$(that.options.selarrrow).each(function(i,n){var ind=that.rows.namedItem(n);$(ind).removeClass("coral-state-highlight");$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(n))[that.options.useProp?"prop":"attr"]("checked",false);if(frz){$("#"+$.grid.coralID(n),"#"+$.grid.coralID(frz)).removeClass("coral-state-highlight");$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(n),"#"+$.grid.coralID(frz))[that.options.useProp?"prop":"attr"]("checked",false)
}});that.options.selarrrow=[];$(that.element).grid("setSelection",rowId,true,e)}}else{if(scb||typeof(that.editRowIndex)!="undefiend"&&that.editRowIndex!=rowId){$(that.element).grid("setSelection",rowId,true,e)}}}else{if(e[that.options.multikey]){$(that.element).grid("setSelection",rowId,true,e)}else{if((that.options.multiselect||that.options.singleselect)&&scb){$(that.element).grid("setSelection",rowId,true,e);if(!scb){that._cancelCheckAll()}}}}}}});$(that.element).dblclick(function(e){td=e.target;ptr=$(td,that.rows).closest("tr.jqgrow");if($(ptr).length===0){return}if(that.options.editableRows&&options.editrow!=ptr[0].id){that.restoreRow(options.editrow);if(that.rowEditButtons){that.rowEditButtons.remove()}}var ri=ptr[0].rowIndex;var ci=$.grid.getCellIndex(td);if(that.options.editableRows&&that.options.clicksToEdit==2){options.editrow=ptr[0].id;that.editRow(ptr[0].id,true)}if(that.options.cellEdit===true&&that.options.clicksToEdit==2){ri=ptr[0].rowIndex;try{$(that.element).grid("editCell",ri,ci,true)}catch(_){}}that._trigger("onDblClickRow",null,[{rowId:ptr[0].id,rowIndex:ri,cellIndex:ci}])}).bind("contextmenu",function(e){td=e.target;ptr=$(td,that.rows).closest("tr.jqgrow");if($(ptr).length===0){return}if(!that.options.multiselect){$(that.element).grid("setSelection",ptr[0].id,true,e)}ri=ptr[0].rowIndex;ci=$.grid.getCellIndex(td);that._trigger("onRightClickRow",null,[{rowId:ptr[0].id,rowIndex:ri,cellIndex:ci}])});$(grid.columnsView).mousemove(function(e){if(grid.resizing){grid.dragMove(e);return false}});$(".coral-grid-labels",grid.columnsView).bind("selectstart",function(){return false});$(document).mouseup(function(){if(grid.resizing){grid.dragEnd();return false}return true});this._off($(".coral-paginator-page"));this._on({"click.coral-paginator-page":function(e){var cp=that._intNum($(e.target).html(),1);that.options.page=cp;if(!that._clearVals(this.id)){return false}that._populate();return false}})},restoreAll:function(){if(this.options.editableRows){this.restoreRow(this.options.editrow);
if(this.rowEditButtons){this.rowEditButtons.remove()}}if(this.options.savedRow.length>0){if(!$(this.element).grid("saveCell",this.options.savedRow[0].id,this.options.savedRow[0].ic)){return}}},_setMultiselect:function(){var that=this;if(this.options.multiselect){var emp=[],chk;$("#cb_"+$.grid.coralID(that.options.id),this.grid.columnsView).bind("click",function(e){var froz=that.options.frozenColumns===true?that.options.id+"_frozen":"";if(this.checked){$(that.rows).each(function(i){if(i>0){if(!$(this).hasClass("coral-subgrid")&&!$(this).hasClass("jqgroup")&&!$(this).hasClass("coral-state-disabled")){var ia=$.inArray(this.id,that.options.selarrrow);if(ia===-1){$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(this.id))[that.options.useProp?"prop":"attr"]("checked",true);$(this).addClass("coral-state-highlight").attr("aria-selected","true");that.options.selarrrow.push(this.id);that.options.selrow=this.id;if(froz){$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(that.rows[i].id),that.grid.fbDiv)[that.options.useProp?"prop":"attr"]("checked",true);$("#"+$.grid.coralID(that.rows[i].id),that.grid.fbDiv).addClass("coral-state-highlight");if(that.grid.fhDiv){$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(that.rows[i].id),that.grid.fbDiv)[that.options.useProp?"prop":"attr"]("checked",true);$("#"+$.grid.coralID(that.rows[i].id),that.grid.fbDiv).addClass("coral-state-highlight")}else{if(that.grid.rightfhDiv){$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(that.rows[i].id),that.grid.rightfbDiv)[that.options.useProp?"prop":"attr"]("checked",true);$("#"+$.grid.coralID(that.rows[i].id),that.grid.rightfbDiv).addClass("coral-state-highlight")}}}}}}});chk=true;emp=[]}else{that.options.selarrrow=[];$(that.rows).each(function(i){if(i>0){if(!$(this).hasClass("coral-subgrid")&&!$(this).hasClass("coral-state-disabled")){$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(this.id))[that.options.useProp?"prop":"attr"]("checked",false);
$(this).removeClass("coral-state-highlight").attr("aria-selected","false");emp.push(this.id);if(froz){if(that.grid.fhDiv){$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(that.rows[i].id),that.grid.fbDiv)[that.options.useProp?"prop":"attr"]("checked",false);$("#"+$.grid.coralID(that.rows[i].id),that.grid.fbDiv).removeClass("coral-state-highlight")}else{if(that.grid.rightfhDiv){$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(that.rows[i].id),that.grid.rightfbDiv)[that.options.useProp?"prop":"attr"]("checked",false);$("#"+$.grid.coralID(that.rows[i].id),that.grid.rightfbDiv).removeClass("coral-state-highlight")}}}}}});that.options.selrow=null;chk=false}that._trigger("onSelectAll",null,[{aRowIds:chk?that.options.selarrrow:emp,status:chk}])})}},_refresh:function(key,value){},reload:function(url){var that=this,grid=this.grid,opts={},isUrl=false,data=[];if(typeof(url)==="undefined"){url=this.options.orgdatatype==="json"?this.options.url:this.options.data}if(!url&&!this.options.url){url=[]}else{if(!url&&this.options.url){url=this.options.url}}if(typeof(url)!=="string"){opts=url;if(opts.data){data=opts.data}else{if(opts.url){url=opts.url;isUrl=true}else{if(url instanceof Array){data=url}else{if(!opts.url&&!opts.data&&!this.options.url){data=this.options.data}else{if(!opts.url&&!opts.data&&this.options.url){url=this.options.url;isUrl=true}}}}}}else{isUrl=true}if(that.options.treeGrid===true){that.options.datatype=that.options.treedatatype}if(opts&&opts.current){that.grid.selectionPreserver(that)}if(that.options.datatype=="local"){$(that.element).grid("resetSelection");if(that.options.data.length){that.normalizeData();that.refreshIndex()}}else{if(!that.options.treeGrid){that.options.selrow=null;if(that.options.multiselect){that.options.selarrrow=[];that._setHeadCheckBox(false)}that.options.savedRow=[]}}if(that.options.scroll){emptyRows(that.grid.rowsView,true,false)}if(opts&&opts.page){var page=opts.page;if(page>that.options.lastpage){page=that.options.lastpage
}if(page<1){page=1}that.options.page=page;if(that.grid.prevRowHeight){that.grid.rowsView.scrollTop=(page-1)*that.grid.prevRowHeight*that.options.rowNum}else{that.grid.rowsView.scrollTop=0}}if(that.grid.prevRowHeight&&that.options.scroll){delete that.options.lastpage;that._populateVisible()}else{if(that.options.localonce==true){that.options.search=true}else{that.options.search=false;if(!isUrl){that.options.datatype="local";delete that.options.orgdatatype;that.options.data=data}else{that.options.datatype="json";delete that.options.orgdatatype;that.options.url=url}}that._populate();that.options.localonce=false}return false},resetFrozen:function(){if(!this._hasHorizontalScrollBar()){$(this.grid.rightfbDiv).hide();$(this.grid.rightfhDiv).hide()}else{$(this.grid.rightfbDiv).show();$(this.grid.rightfhDiv).show()}},refresh:function(opts){var maxHeight,that=this,options=this.options,fitStyle=options.fitStyle,parent=this.element.parent();maxHeight=parent.height();that.resetFrozen();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return}maxHeight-=elem.outerHeight(true)});if(!$("#"+that.element[0].id).length){return}if(fitStyle==="fill"){$.coral.fitParent(this.component(),true);$(that.element).grid("option","height",maxHeight);$(that.element).grid("option","width",that.element.innerWidth()>0?that.element.innerWidth():0)}else{if(fitStyle==="width"){$(that.element).grid("option","width",that.element.innerWidth()>0?that.element.innerWidth():0);$(that.element).grid("option","height",that.options.height)}else{if(fitStyle==="height"){$.coral.fitParent(this.component(),true);$(that.element).grid("option","height",maxHeight)}else{if(fitStyle==="auto"){$(that.element).grid("option","height",that.options.height)}}}}that.refreshPager();that._noRecordsTipsPositon();if(that.options.frozenColumns===true){that.resizeFrozen()}if(this.element.find(".loading-overlay").length){switch(this.options.loadui){case"disable":break;
case"enable":case"block":$(this.element).loading("refresh");break}}$.coral.refreshAllComponent(this.element)},refreshPager:function(){var that=this;if(this.pagers){this.pagers.each(function(i){var pagerleftwidth=$(".paginator-left",that.element).outerWidth()+5;var pagerwidth=$("#"+that.pagers[i].id).width();$(".toolbarpanel",that.element).css({left:pagerleftwidth+"px",position:"absolute",top:0,width:(pagerwidth-pagerleftwidth)+"px"})});that.options.pager="."+that.id;if($(".ctrl-init-toolbar",that.element).length){$(".ctrl-init-toolbar",that.element).toolbar("refresh")}}},setSelectionAll:function(){if(!$("#cb_"+this.options.id).prop("checked")){$("#cb_"+this.options.id).trigger("click")}},setSelection:function(selection,onsr,e){var that=this,stat,isPicgrid=(this.options.model==="card"),pt,ner,ia,tpsr,fid;if(selection===undefined){return}onsr=onsr===false?false:true;if(isPicgrid){pt=this.element.find(".coral-pic #"+selection)[0]}else{pt=this.rows.namedItem(selection+"")}if(!pt||!pt.className||pt.className.indexOf("coral-state-disabled")>-1){return}function scrGrid(iR){var ch=$(that.grid.rowsView)[0].clientHeight,st=$(that.grid.rowsView)[0].scrollTop,rpos=that.rows[iR].offsetTop,rh=that.rows[iR].clientHeight;if(rpos+rh>=ch+st){$(that.grid.rowsView)[0].scrollTop=rpos-(ch+st)+rh+st}else{if(rpos<ch+st){if(rpos<st){$(that.grid.rowsView)[0].scrollTop=rpos}}}}if(this.options.scrollrows===true){ner=this.rows.namedItem(selection).rowIndex;if(ner>=0){scrGrid(ner)}}if(this.options.frozenColumns===true){fid=this.options.id+"_frozen"}if(!this.options.multiselect){if(pt.className!=="coral-subgrid"){if(this.options.selrow!=pt.id){if(isPicgrid){this.element.find("#"+this.options.selrow+">ul").removeClass("coral-state-highlight").attr({"aria-selected":"false",tabindex:"-1"});$(pt).find(".rowgrid").addClass("coral-state-highlight").attr({"aria-selected":"true",tabindex:"0"});if(fid){$("#"+$.grid.coralID(this.options.selrow),"#"+$.grid.coralID(fid)).find(".rowgrid").removeClass("coral-state-highlight");
$("#"+$.grid.coralID(selection),"#"+$.grid.coralID(fid)).find(".rowgrid").addClass("coral-state-highlight")}}else{$(this.rows.namedItem(this.options.selrow)).removeClass("coral-state-highlight").attr({"aria-selected":"false",tabindex:"-1"});$(pt).addClass("coral-state-highlight").attr({"aria-selected":"true",tabindex:"0"});if(fid){$("#"+$.grid.coralID(this.options.selrow),"#"+$.grid.coralID(fid)).removeClass("coral-state-highlight");$("#"+$.grid.coralID(selection),"#"+$.grid.coralID(fid)).addClass("coral-state-highlight")}}stat=true;$("#jqg_"+$.grid.coralID(this.options.id)+"_"+$.grid.coralID(pt.id),$(pt))[this.options.useProp?"prop":"attr"]("checked",stat);if(fid){$("#jqg_"+$.grid.coralID(this.options.id)+"_"+$.grid.coralID(selection),"#"+$.grid.coralID(fid))[this.options.useProp?"prop":"attr"]("checked",stat)}}else{stat=false}this.options.selrow=pt.id;if(onsr){this._trigger("onSelectRow",e,[{rowId:pt.id,status:stat}])}}}else{this._setHeadCheckBox(false);this.options.selrow=pt.id;ia=$.inArray(this.options.selrow,this.options.selarrrow);if(ia===-1){if(isPicgrid){if(pt.className!=="coral-subgrid"){$(pt).find(".rowgrid").addClass("coral-state-highlight").attr("aria-selected","true")}}else{if(pt.className!=="coral-subgrid"){$(pt).addClass("coral-state-highlight").attr("aria-selected","true")}}stat=true;this.options.selarrrow.push(this.options.selrow)}else{if(isPicgrid){if(pt.className!=="coral-subgrid"){$(pt).find(".rowgrid").removeClass("coral-state-highlight").attr("aria-selected","false")}}else{if(pt.className!=="coral-subgrid"){$(pt).removeClass("coral-state-highlight").attr("aria-selected","false")}}stat=false;this.options.selarrrow.splice(ia,1);tpsr=this.options.selarrrow[0];this.options.selrow=(tpsr===undefined)?null:tpsr}if(this.rows.length-1===this.options.selarrrow.length){this._setHeadCheckBox(true)}$("#jqg_"+$.grid.coralID(this.options.id)+"_"+$.grid.coralID(pt.id),$(pt))[this.options.useProp?"prop":"attr"]("checked",stat);if(fid){if(isPicgrid){if(ia===-1){$("#"+$.grid.coralID(selection),"#"+$.grid.coralID(fid)).find(".rowgrid").addClass("coral-state-highlight")
}else{$("#"+$.grid.coralID(selection),"#"+$.grid.coralID(fid)).find(".rowgrid").removeClass("coral-state-highlight")}}else{if(ia===-1){$("#"+$.grid.coralID(selection),"#"+$.grid.coralID(fid)).addClass("coral-state-highlight")}else{$("#"+$.grid.coralID(selection),"#"+$.grid.coralID(fid)).removeClass("coral-state-highlight")}}$("#jqg_"+$.grid.coralID(this.options.id)+"_"+$.grid.coralID(selection),"#"+$.grid.coralID(fid))[this.options.useProp?"prop":"attr"]("checked",stat)}if(onsr){this._trigger("onSelectRow",e,[{rowId:pt.id,status:stat}])}}},_setHeadCheckBox:function(checked){var that=this;$("#cb_"+$.grid.coralID(that.options.id),that.grid.columnsView)[that.options.useProp?"prop":"attr"]("checked",checked);var fid=that.options.frozenColumns?that.options.id+"_frozen":"";if(fid){$("#cb_"+$.grid.coralID(that.options.id),that.grid.fcolumnsView)[that.options.useProp?"prop":"attr"]("checked",checked)}},setFrozenRows:function(rowNum){var that=this,grid=that.grid;that.destroyFrozenRows();that.rowsView2=$(grid.rowsView);if(!that.rowsView2.children("table.coral-grid-btable-frozen").length){$(that.rowsView2).prepend('<table class="coral-grid-btable-frozen" cellspacing="0" cellpadding="0"></table>');that.rowsView2.children("table.coral-grid-btable-frozen").css({position:"absolute",left:0,top:$(grid.columnsView).height()+"px"})}var vh=that.element.find(".coral-grid-rows-view").height();doWithFirstRow(false);doWithFrozen(false);var fh=that.rowsView2.find("table.coral-grid-btable-frozen").outerHeight();that.rowsView2.css({"margin-top":fh+"px",height:(vh-fh)+"px"});that.rowsView2.find(".coral-grid-btable-frozen").css({left:-$(grid.rowsView)[0].scrollLeft+"px",width:that.rowsView2.find(".coral-grid-btable").width()+"px","table-layout":"fixed"});function doWithFirstRow(isFirst){var tr=that.rowsView2.find(".coral-grid-btable")[0].rows[0];(isFirst?that.rowsView1:that.rowsView2).children("table.coral-grid-btable-frozen").append($(tr).clone())}function doWithFrozen(isFirst){var trs=that.rowsView2.find(".coral-grid-btable tr").filter(function(i){if(i==0){return false
}if(i<=rowNum){return true}});var tr=that.rowsView2.find(".coral-grid-btable")[0].rows[1];(isFirst?that.rowsView1:that.rowsView2).children("table.coral-grid-btable-frozen").append(trs)}},destroyFrozenRows:function(){var that=this,grid=that.grid;that.rowsView2=$(grid.rowsView);if(!that.rowsView2.children("table.coral-grid-btable-frozen").length){$(that.rowsView2).prepend('<table class="coral-grid-btable-frozen" cellspacing="0" cellpadding="0"></table>');that.rowsView2.children("table.coral-grid-btable-frozen").css({position:"absolute",left:0,top:0})}var vh=that.element.find(".coral-grid-rows-view").height();var fh=that.rowsView2.find("table.coral-grid-btable-frozen").outerHeight();doWidthFrozen(false);doWidthFirstRow(false);that.rowsView2.css({"margin-top":0,height:(vh+fh)+"px"});function doWidthFrozen(isFirst){var rows=that.rowsView2.find("table.coral-grid-btable-frozen tr").filter(function(i){if(i==0){return false}return true});var row1=(isFirst?that.rowsView1:that.rowsView2).children("table.coral-grid-btable-frozen")[0].rows[1];$(that.rowsView2.find(".coral-grid-btable tbody:first tr:first")[0]).after(rows)}function doWidthFirstRow(isFirst){(isFirst?that.rowsView1:that.rowsView2).children("table.coral-grid-btable-frozen").remove()}},showHideCol:function(colname,show){var that=this,fndh=false,brd=$.support.boxSizing?0:this._intNum(this.options.cellLayout,0),cw;if(!that.grid){return}if(typeof colname==="string"){colname=[colname]}show=show!="none"?"":"none";var sw=show===""?true:false,gh=that.options.groupHeader&&(typeof that.options.groupHeader==="object"||$.isFunction(that.options.groupHeader));if(gh){$(that.element).grid("destroyGroupHeader",false)}$(this.options.colModel).each(function(i){if($.inArray(this.name,colname)!==-1&&this.hidden===sw){if(that.options.frozenColumns===true&&this.frozen===true){}$("tr",that.grid.columnsView).each(function(){$(this.cells[i]).css("display",show)});$(that.rows).each(function(){if(!$(this).hasClass("jqgroup")){$(this.cells[i]).css("display",show)
}});if(that.options.footerrow){$("tr.footrow td:eq("+i+")",that.grid.sDiv).css("display",show)}cw=this.widthOrg?this.widthOrg:parseInt(this.width,10);if(show==="none"){that.options.tblwidth-=cw+brd}else{that.options.tblwidth+=cw+brd}this.hidden=!sw;fndh=true;that._trigger("onShowHideCol",null,[{show:sw,name:this.name,index:i}])}});if(fndh===true){if(that.options.shrinkToFit===true&&!isNaN(that.options.height)){that.options.tblwidth+=parseInt(that.options.scrollOffset,10)}that._setGridWidth(that.options.shrinkToFit===true?that.options.tblwidth:that.options.width)}if(gh){$(that.element).grid("setGroupHeaders",that.options.groupHeader)}},hideCol:function(colname){return $(this.element).grid("showHideCol",colname,"none")},showCol:function(colname){return $(this.element).grid("showHideCol",colname,"")},remapColumns:function(permutation,updateCells,keepHeader){function resortArray(a){var ac;if(a.length){ac=$.makeArray(a)}else{ac=$.extend({},a)}$.each(permutation,function(i){a[i]=ac[this]})}var that=this;function resortRows(parent,clobj){$(">tr"+(clobj||""),parent).each(function(){var row=this;var elems=$.makeArray(row.cells);$.each(permutation,function(){var e=elems[this];if(e){row.appendChild(e)}})})}resortArray(that.options.colModel);resortArray(that.options.colNames);resortArray(that.grid.headers);resortRows($("thead:first",that.grid.columnsView),keepHeader&&":not(.coral-grid-labels)");if(updateCells){resortRows($("#"+$.grid.coralID(that.options.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot")}if(that.options.footerrow){resortRows($("tbody:first",that.grid.sDiv))}if(that.options.remapColumns){if(!that.options.remapColumns.length){that.options.remapColumns=$.makeArray(permutation)}else{resortArray(that.options.remapColumns)}}that.options.lastsort=$.inArray(that.options.lastsort,permutation);if(that.options.treeGrid){that.options.expColInd=$.inArray(that.options.expColInd,permutation)}$(that).triggerHandler("gridRemapColumns",[permutation,updateCells,keepHeader])
},sortableColumns:function(tblrow){var that=this,tid=$.grid.coralID(that.options.id);function start(){that.options.disableClick=true}var sortable_opts={tolerance:"pointer",axis:"x",cancel:".coral-columnSortable-disabled",scrollSensitivity:"1",helper:function(event,currentItem){return currentItem.clone()},items:">th:not(:has(#jqgh_"+tid+"_cb,#jqgh_"+tid+"_rn,#jqgh_"+tid+"_subgrid),:hidden, .coral-columnSortable-disabled)",placeholder:{element:function(item){var rowspan=typeof(item.attr("rowspan"))=="undefined"?"1":"2",colspan=typeof(item.attr("colspan"))=="undefined"?"1":"2";var el=$(document.createElement(item[0].nodeName)).addClass(item[0].className+" coral-sortable-placeholder coral-state-highlight").removeClass("coral-sortable-helper").attr("rowspan",rowspan).attr("colspan",colspan)[0];return el},update:function(self,options){options.height(self.currentItem.innerHeight()-parseInt(self.currentItem.css("paddingTop")||0,10)-parseInt(self.currentItem.css("paddingBottom")||0,10));options.width(self.currentItem.innerWidth()-parseInt(self.currentItem.css("paddingLeft")||0,10)-parseInt(self.currentItem.css("paddingRight")||0,10))}},update:function(event,ui){var p=$(ui.item).parent(),th=$(">th",p),colModel=that.options.colModel,cmMap={},tid=that.options.id+"_";ui.itemId=[];$.each(colModel,function(i){cmMap[this.name]=i});var permutation=[];var permutationId=[];th.each(function(){var id=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(tid,"");if(id in cmMap){permutation.push(cmMap[id]);permutationId.push(id)}});$.each(ui.item,function(i){ui.itemId.push(ui.item[i].id.replace(/^jqgh_/,"").replace(tid,""))});ui.prevItemId=$(ui.item[0]).prev("th").attr("id").replace(/^jqgh_/,"").replace(tid,"");ui.nextItemId=$(ui.item[0]).next("th").attr("id").replace(/^jqgh_/,"").replace(tid,"");ui.targetId=ui.position.left>ui.originalPosition.left?ui.prevItemId:ui.nextItemId;$(that.element).grid("remapColumns",permutation,true,true);ui.permutation=permutation;ui.permutationOfId=permutationId;
that._trigger("onSortableColumns",event,[ui]);setTimeout(function(){that.options.disableClick=false},50)}};$.extend(sortable_opts,that.options.sortableColumnsOptions);if(sortable_opts.beforesortablecolumns){var s=sortable_opts.beforesortablecolumns;sortable_opts.start=function(e,ui){start();s.call(this,e,ui)}}else{sortable_opts.start=start}if(that.options.sortableColumnsOptions.exclude){sortable_opts.items+=":not("+that.options.sortableColumnsOptions.exclude+")"}tblrow.sortable(sortable_opts).data("sortable").floating=true},setCaption:function(newcap){this.options.caption=newcap;$("span.coral-grid-title, span.coral-grid-title-rtl",this.grid.caption).html(newcap);$(this.grid.cDiv).show()},setLabel:function(colname,nData,prop,attrp){var that=this,pos=-1;if(!that.grid){return}if(typeof(colname)!="undefined"){$(that.options.colModel).each(function(i){if(this.name==colname){pos=i;return false}})}else{return}if(pos>=0){var thecol=$("tr.coral-grid-labels th:eq("+pos+")",that.grid.columnsViews);if(nData){var ico=$(".s-ico",thecol);$("[id^=jqgh_]",thecol).empty().html(nData).append(ico);that.options.colNames[pos]=nData}if(prop){if(typeof prop==="string"){$(thecol).addClass(prop)}else{$(thecol).css(prop)}}if(typeof attrp==="object"){$(thecol).attr(attrp)}}},setCell:function(rowid,colname,nData,cssp,attrp,forceupd){var that=this,pos=-1,v,title;if(!that.grid){return}if(isNaN(colname)){$(that.options.colModel).each(function(i){if(this.name==colname){pos=i;return false}})}else{pos=parseInt(colname,10)}if(pos>=0){var ind=that.rows.namedItem(rowid);var rwd=$(that.element).grid("getRowData",rowid);if(ind){var tcell=$("td:eq("+pos+")",ind);if(nData!==""||forceupd===true){v=that._formatter(rowid,nData,pos,rwd,"edit");title=that.options.colModel[pos].title?{title:$.grid.stripHtml(v)}:{};if(that.options.treeGrid&&$(".tree-wrap",$(tcell)).length>0){$("span",$(tcell)).html(v).attr(title)}else{$(tcell).html(v).attr(title)}$.fn.afterFmatter.call(that);if(that.options.datatype=="local"){var cm=that.options.colModel[pos],index;
var _fn=$.coral.toFunction(cm.formatter);if($.isFunction(_fn)){nData=_fn.apply(this.element[0])}else{nData=cm.formatter&&typeof(cm.formatter)==="string"&&cm.formatter=="date"?$.unformat.date.call(that,nData,cm):nData}index=that.options._index[rowid];if(typeof index!="undefined"){that.options.data[index][cm.name]=nData}}}if(typeof cssp==="string"){$(tcell).addClass(cssp)}else{if(cssp){$(tcell).css(cssp)}}if(typeof attrp==="object"){$(tcell).attr(attrp)}}}},getCell:function(rowid,col){var ret=false;var $t=this,pos=-1;if(!$t.grid){return}if(isNaN(col)){$($t.options.colModel).each(function(i){if(this.name===col){pos=i;return false}})}else{pos=parseInt(col,10)}if(pos>=0){var ind=$t.rows.namedItem(rowid);if(ind){try{ret=$.unformat.call($t,$("td:eq("+pos+")",ind),{rowId:ind.id,colModel:$t.options.colModel[pos]},pos)}catch(e){ret=$.grid.htmlDecode($("td:eq("+pos+")",ind).html())}}}return ret},getCol:function(col,obj,mathopr){var ret=[],val,sum=0,min,max,v;obj=typeof(obj)!="boolean"?false:obj;if(typeof mathopr=="undefined"){mathopr=false}var $t=this,pos=-1;if(!$t.grid){return}if(isNaN(col)){$($t.options.colModel).each(function(i){if($t.options.colModel[i].name===col){pos=i;return false}})}else{pos=parseInt(col,10)}if(pos>=0){var ln=$t.rows.length,i=0;if(ln&&ln>0){while(i<ln){if($($t.rows[i]).hasClass("jqgrow")){try{val=$.unformat.call($t,$($t.rows[i].cells[pos]),{rowId:$t.rows[i].id,colModel:$t.options.colModel[pos]},pos)}catch(e){val=$.grid.htmlDecode($t.rows[i].cells[pos].innerHTML)}if(mathopr){v=parseFloat(val);sum+=v;if(i===0){min=v;max=v}else{min=Math.min(min,v);max=Math.max(max,v)}}else{if(obj){ret.push({id:$t.rows[i].id,value:val})}else{ret.push(val)}}}i++}if(mathopr){switch(mathopr.toLowerCase()){case"sum":ret=sum;break;case"avg":ret=sum/ln;break;case"count":ret=ln;break;case"min":ret=min;break;case"max":ret=max;break}}}}return ret},getCellComponent:function(rowid,colname,nData,cssp,attrp,forceupd){var that=this,pos=-1,v,title;if(!that.grid){return}return $("#"+rowid).find("[aria-describedby$="+colname+"]").find(".ctrl-init")
},_formatter:function(rowId,_cellVal,colpos,rwdat,_act){var cm=this.options.colModel[colpos],v;if(typeof cm.formatter!=="undefined"){var opts={rowId:rowId,colModel:cm,gid:this.options.id,pos:colpos,model:this.options.model};var _fn=$.coral.toFunction(cm.formatter);if($.isFunction(_fn)){v=_fn.apply(this.element[0],[_cellVal,opts,rwdat,_act])}else{if($.fmatter){v=$.fn.fmatter.call(this,cm.formatter,_cellVal,opts,rwdat,_act)}else{v=this._cellVal(_cellVal)}}}else{v=this._cellVal(_cellVal)}return v},_getOffset:function(iCol){var that=this;var i,ret={},brd1=$.support.boxSizing?0:that.options.cellLayout;ret[0]=ret[1]=ret[2]=0;for(i=0;i<=iCol;i++){if(that.options.colModel[i].hidden===false||typeof(that.options.colModel[i].hidden)=="undefined"){ret[0]+=that.options.colModel[i].width+brd1}}ret[0]=ret[0]-that.grid.rowsView.scrollLeft;ret[2]+=$(that.grid.rowsView).height()+$(that.grid.columnsView).height();return ret},_sortData:function(index,idxcol,reload,sor,obj){var that=this;if(!this.options.colModel[idxcol].sortable){return}that.options.b_sortdata=true;var so;if(this.options.savedRow.length>0){return}if(!reload){if(this.options.lastsort==idxcol){if(this.options.sortorder=="asc"){this.options.sortorder="desc"}else{if(this.options.sortorder=="desc"){this.options.sortorder="asc"}}}else{this.options.sortorder=this.options.colModel[idxcol].firstsortorder||"asc"}this.options.page=1}if(sor){if(this.options.lastsort==idxcol&&this.options.sortorder==sor&&!reload){return}else{that.options.sortorder=sor}}var previousSelectedTh=this.grid.headers[this.options.lastsort].el,newSelectedTh=this.options.frozenColumns?obj:this.grid.headers[idxcol].el;$("span.coral-grid-ico-sort",previousSelectedTh).addClass("coral-state-disabled");$(previousSelectedTh).attr("aria-selected","false");if(this.options.frozenColumns){if(this.grid.fhDiv){this.grid.fhDiv.find("span.coral-grid-ico-sort").addClass("coral-state-disabled");this.grid.fhDiv.find("th").attr("aria-selected","false")}else{if(this.grid.rightfhDiv){this.grid.rightfhDiv.find("span.coral-grid-ico-sort").addClass("coral-state-disabled");
this.grid.rightfhDiv.find("th").attr("aria-selected","false")}}}$("span.coral-icon-"+this.options.sortorder,newSelectedTh).removeClass("coral-state-disabled");$(newSelectedTh).attr("aria-selected","true");if(!this.options.viewsortcols[0]){if(this.options.lastsort!=idxcol){if(this.options.frozenColumns){if(this.grid.fhDiv){this.grid.fhDiv.find("span.s-ico").hide()}else{if(this.grid.rightfhDiv){this.grid.rightfhDiv.find("span.s-ico").hide()}}}$("span.s-ico",previousSelectedTh).hide();$("span.s-ico",newSelectedTh).show()}else{if(this.options.sortname===""){$("span.s-ico",newSelectedTh).show()}}}index=index.substring(5+this.options.id.length+1);this.options.sortname=this.options.colModel[idxcol].index||index;so=this.options.sortorder;if(that._trigger("onSortCol",null,[{id:index,colIndex:idxcol,sortorder:so}])==="stop"){this.options.lastsort=idxcol;return}if(this.options.datatype=="local"){if(this.options.deselectAfterSort){$(this.element).grid("resetSelection")}}else{this.options.selrow=null;if(this.options.multiselect){that._setHeadCheckBox(false)}this.options.selarrrow=[];this.options.savedRow=[]}if(this.options.scroll){var sscroll=this.grid.rowsView.scrollLeft;emptyRows(this.grid.rowsView,true,false);this.grid.columnsView.scrollLeft=sscroll}if(this.options.subGrid&&this.options.datatype=="local"){$("td.sgexpanded","#"+$.grid.coralID(this.options.id)).each(function(){$(this).trigger("click")})}this._populate();this.options.lastsort=idxcol;if(this.options.sortname!=index&&idxcol){this.options.lastsort=idxcol}that.options.b_sortdata=false},_intNum:function(val,defval){val=parseInt(val,10);if(isNaN(val)){return defval?defval:0}else{return val}},_beginReq:function(){var tipsDom=$("#noRecordsTips_"+$.grid.coralID(this.options.id));if(tipsDom.is(":visible")){tipsDom.hide()}this.refresh();this.grid.columnsView.loading=true;if(this.options.hiddengrid){return}switch(this.options.loadui){case"disable":break;case"enable":$(this.element).loading({position:"overlay",text:this.options.loadtext});
break;case"block":$("#lui_"+$.grid.coralID(this.options.id)).show();$(this.element).loading({position:"overlay",text:this.options.loadtext});break}},_endReq:function(){var that=this;this._delay(function(){that.refreshPager()},300);this.grid.columnsView.loading=false;switch(this.options.loadui){case"disable":break;case"enable":$(this.element).loading("hide");break;case"block":$("#lui_"+$.grid.coralID(this.options.id)).hide();$(this.element).loading("hide");break}this.element.find(".coral-grid-htable,.coral-grid-btable").css({"table-layout":"fixed"});if($(that.grid.rowsView).find(".jqgrow").length==0){that._noRecordsTipsPositon();$("#noRecordsTips_"+$.grid.coralID(that.options.id)).css("display","inline-block")}else{$("#noRecordsTips_"+$.grid.coralID(that.options.id)).css("display","none")}},_noRecordsTipsPositon:function(){var that=this;var gridWidth=this.element.width(),gridHeight=this.gridRows.height(),tipsWidth=$("#noRecordsTips_"+$.grid.coralID(that.options.id)).width(),tipsHeight=$("#noRecordsTips_"+$.grid.coralID(that.options.id)).height();$("#noRecordsTips_"+$.grid.coralID(that.options.id)).css({"margin-top":(gridHeight-tipsHeight)/2+"px","margin-left":gridWidth/2+"px"})},_setColWidth:function(){var that=this;var grid=this.grid;var initwidth=0,brd=$.support.boxSizing?0:this._intNum(this.options.cellLayout,0),vc=0,lvc,scw=this._intNum(this.options.scrollOffset,0),cw,hs=false,aw,gw=0,cl=0,cr;$.each(this.options.colModel,function(){if(that.options.grouping&&that.options.autowidth){var ind=$.inArray(this.name,that.options.groupingView.groupField);if(ind>=0&&that.options.groupingView.groupColumnShow.length>ind){this.hidden=!that.options.groupingView.groupColumnShow[ind]}}this.widthOrg=cw=that._intNum(this.width,0);if((this.hidden===false||typeof(this.hidden)=="undefined")){initwidth+=cw+brd;if(this.fixed){gw+=cw+brd}else{vc++}cl++}});if(isNaN(that.options.width)){that.options.width=grid.width=initwidth}else{grid.width=that.options.width}that.options.tblwidth=initwidth;
if(that.options.shrinkToFit===false&&that.options.forceFit===true){that.options.forceFit=false}if(that.options.shrinkToFit===true&&vc>0){aw=grid.width-brd*vc-gw;if(!isNaN(this.options.height)){aw-=scw;hs=true}initwidth=0;$.each(that.options.colModel,function(i){if((this.hidden===false||typeof(this.hidden)=="undefined")&&!this.fixed){cw=Math.round(aw*this.width/(that.options.tblwidth-brd*vc-gw));this.width=cw;initwidth+=cw;lvc=i}});cr=0;if(hs){if(grid.width-gw-(initwidth+brd*vc)!==scw){cr=grid.width-gw-(initwidth+brd*vc)-scw}}else{if(!hs&&Math.abs(grid.width-gw-(initwidth+brd*vc))!==1){cr=grid.width-gw-(initwidth+brd*vc)-1}}that.options.colModel[lvc].width+=cr;that.options.tblwidth=initwidth+cr+brd*vc+gw;if(that.options.tblwidth>that.options.width){that.options.colModel[lvc].width-=(that.options.tblwidth-parseInt(that.options.width,10));that.options.tblwidth=that.options.width}that.options.tblwidth}},_nextVisible:function(iCol){var ret=iCol,j=iCol,i;for(i=iCol+1;i<this.options.colModel.length;i++){if(this.options.colModel[i].hidden!==true){j=i;break}}return j-ret},_formatCol:function(pos,rowInd,tv,rawObject,rowId,rdata){var that=this;if(that.options.model=="card"){return""}var grid=that.grid;var cm=that.options.colModel[pos],ral=cm.align,result='style="',clas=cm.cls,nm=cm.name,celp,acp=[],dataOrg="";if(ral){result+="text-align:"+ral+";"}if(cm.hidden===true){result+="display:none;"}var _fn=$.coral.toFunction(cm.cellattr);if(rowInd===0){result+="width: "+grid.headers[pos].width+"px;"}else{if($.isFunction(_fn)){celp=_fn.apply(that.element[0],[{rowId:rowId,value:tv,rawObject:rawObject,colModel:cm,rowData:rdata}]);if(celp&&typeof(celp)==="string"){celp=celp.replace(/style/i,"style").replace(/title/i,"title");if(celp.indexOf("title")>-1){cm.title=false}if(celp.indexOf("class")>-1){clas=undefined}acp=celp.split("style");if(acp.length===2){acp[1]=$.trim(acp[1].replace("=",""));if(acp[1].indexOf("'")===0||acp[1].indexOf('"')===0){acp[1]=acp[1].substring(1)}result+=acp[1].replace(/'/gi,'"')
}else{result+='"'}}}}if(rawObject){var rawObjectV=rawObject[nm]||"";rawObjectV=$.grid.htmlEncode(rawObjectV);dataOrg+="data-org='"+rawObjectV+"'"}if(!acp.length){acp[0]="";result+='"'}result+=(clas!==undefined?(' class="'+clas+'"'):"")+((cm.title&&tv)?(' title="'+$.grid.stripHtml(tv)+'"'):"");result+=' aria-describedby="'+that.options.id+"_"+nm+'"';return result+acp[0]+dataOrg},findTextByValue:function(cval,opts){var code=opts.colModel.editoptions.data;if(!code){return cval}for(var i=0;i<code.length;i++){if(code[i].text==cval){return code[i].value}else{}}return cval},_cellVal:function(val){return val===undefined||val===null||val===""?"&#160;":(this.options.autoencode?$.grid.htmlEncode(val):val+"")},_addCell:function(rowId,cell,pos,irow,srvr,rdata){if(this.options.model=="card"){var v,prp;v=this._formatter(rowId,cell,pos,srvr,"add");prp=this._formatCol(pos,irow,v,srvr,rowId,rdata);return'<div role="gridcell" '+prp+">"+v+"</div>"}var v,prp;v=this._formatter(rowId,cell,pos,srvr,"add");prp=this._formatCol(pos,irow,v,srvr,rowId,rdata);return'<td role="gridcell" '+prp+">"+v+"</td>"},_orderedCols:function(offset){var that=this;var order=that.options.remapColumns;if(!order||!order.length){order=$.map(that.options.colModel,function(v,i){return i})}if(offset){order=$.map(order,function(v){return v<offset?null:v-offset})}return order},emptyRows:function(parent,scroll,locdata){var that=this,isPicgrid=!!(that.options.model=="card");if(isPicgrid){$("#"+$.grid.coralID(that.options.id)+" .coral-pic").children().remove()}else{if(that.options.deepempty){$("#"+$.grid.coralID(that.options.id)+" tbody:first tr:gt(0)").remove()}else{var trf=$("#"+$.grid.coralID(that.options.id)+" tbody:first tr:first")[0];$("#"+$.grid.coralID(that.options.id)+" tbody:first").empty().append(trf)}if(scroll&&that.options.scroll){$(">div:first",parent).css({height:"auto"}).children("div:first").css({height:0,display:"none"});parent.scrollTop=0}if(locdata===true){if(that.options.treeGrid===true){that.options.data=[];
that.options._index={}}}}},normalizeData:function(){var p=this.options,data=p.data,dataLength=data.length,i,j,cur,idn,idr,ccur,v,rd,localReader=p.localReader,colModel=p.colModel,cellName=localReader.cell,iOffset=(p.multiselect===true?1:0)+(p.subGrid===true?1:0)+(p.rownumbers===true?1:0),br=p.scroll?$.jgrid.randId():1,arrayReader,objectReader,rowReader;if(p.datatype!=="local"||localReader.repeatitems!==true){return}arrayReader=this._orderedCols(iOffset);objectReader=this._reader("local");idn=p.keyName===false?($.isFunction(localReader.id)?localReader.id.call(ts,data):localReader.id):p.keyName;for(i=0;i<dataLength;i++){cur=data[i];idr=$.grid.getAccessor(cur,idn);if(idr===undefined){if(typeof idn==="number"&&colModel[idn+iOffset]!=null){idr=$.grid.getAccessor(cur,colModel[idn+iOffset].name)}if(idr===undefined){idr=br+i;if(cellName){ccur=$.grid.getAccessor(cur,cellName)||cur;idr=ccur!=null&&ccur[idn]!==undefined?ccur[idn]:idr;ccur=null}}}rd={};rd[localReader.id]=idr;if(cellName){cur=$.grid.getAccessor(cur,cellName)||cur}rowReader=$.isArray(cur)?arrayReader:objectReader;for(j=0;j<rowReader.length;j++){v=$.grid.getAccessor(cur,rowReader[j]);rd[colModel[j+iOffset].name]=v}$.extend(true,data[i],rd)}},refreshIndex:function(){var that=this;var datalen=that.options.data.length,idname,i,val;if(that.options.keyName===false||that.options.loadonce===true){idname=that.options.localReader.id}else{idname=that.options.keyName}for(i=0;i<datalen;i++){val=$.grid.getAccessor(that.options.data[i],idname);that.options._index[val]=i}},constructPanel:function(id,hide,altClass,rd,cur){var tabindex="-1",restAttr="",attrName,style=hide?"display:none;":"",classes="gridPanel coral-row-"+this.options.direction+altClass;return'<li role="row" id="'+id+'" tabindex="'+tabindex+'" class="'+classes+'"'+(style===""?"":' style="'+style+'"')+restAttr+">"},constructTr:function(id,hide,altClass,rd,cur,selected){var tabindex="-1",restAttr="",attrName,style=hide?"display:none;":"",rowAttrObj,classes="coral-component-content jqgrow coral-row-"+this.options.direction+altClass+(selected?" coral-state-highlight":"");
if(this.options.treeGrid){var parent_id=this.options.treeReader.parent_id_field;if(cur[parent_id]!==null&&String(cur[parent_id]).toLowerCase()!="null"){classes+=" treeGridRow "}}var rowattrFun=$.coral.toFunction(this.options.rowattr);rowAttrObj=$.isFunction(rowattrFun)?rowattrFun.apply(this.element[0],[{rowId:id,rowData:rd,currentObj:cur}]):{};if(!$.isEmptyObject(rowAttrObj)){if(rowAttrObj.hasOwnProperty("id")){id=rowAttrObj.id;delete rowAttrObj.id}if(rowAttrObj.hasOwnProperty("tabindex")){tabindex=rowAttrObj.tabindex;delete rowAttrObj.tabindex}if(rowAttrObj.hasOwnProperty("style")){style+=rowAttrObj.style;delete rowAttrObj.style}if(rowAttrObj.hasOwnProperty("class")){classes+=" "+rowAttrObj["class"];delete rowAttrObj["class"]}try{delete rowAttrObj.role}catch(ra){}for(attrName in rowAttrObj){if(rowAttrObj.hasOwnProperty(attrName)){restAttr+=" "+attrName+"="+rowAttrObj[attrName]}}}return'<tr role="row" id="'+id+'" tabindex="'+tabindex+'" class="'+classes+'"'+(style===""?"":' style="'+style+'"')+restAttr+">"},_clearVals:function(onPaging){var that=this,ret;ret=that._trigger("onPaging",null,[{pgButton:onPaging}]);if(!ret){return false}that.options.selrow=null;that.options.editrow=null;if(that.options.multiselect){that.options.selarrrow=[];that._setHeadCheckBox(false)}that.options.savedRow=[];return true},_getPagination:function(){},_setPager:function(pgid,tp){var that=this,pagerTemplate1="<span class='paginator-left'>{viewrecords}</span><span class='paginator-center'>{prev}{links}{next}{pginput}{navbar}{description}</span><span class='paginator-right'><em>每页</em>{rninput}<em>条</em></span>",pagerTemplate2="<div class='paginator-left'>{viewrecords}{rowlist}{first}{prev}{pginput}{next}{last}{navbar}{description}</div><div class='toolbarpanel'>{toolbar}</div>";tp+="_"+pgid;var pagerTemplate=false;if($.isFunction(that.options.pagerTemplate)){pagerTemplate=that.options.pagerTemplate.call(that)}var dir=this.options.direction;var po=["first"+tp,"prev"+tp,"next"+tp,"last"+tp];if(dir=="rtl"){po.reverse()
}var pginp="",str="",rninput="",rowlist="",viewrecords="",totalPage="",pagers="",pagination="",links="<span class='coral-paginator-pages'></span>",pginput="<em>第</em><input type='text' class='coral-pg-input'/><em>页</em>",reload="<button class='reload-button' id='_reloadGrid' type='button' data-options='customData:{gridId:\""+that.options.id+'"},label:"刷新",text: false,icons: "cui-icon-loop3",onClick: function( e, ui ){$( "#'+that.options.id+'" ).grid( "reload" );}\'>reload</button>',first="<span id='"+po[0]+"' class='coral-paginator-first coral-state-default coral-corner-all' tabindex='0'><span class='cui-icon-first2' title='第一页'></span></span>",last="<span id='"+po[3]+"' class='coral-paginator-last coral-state-default coral-corner-all' tabindex='0'><span class='cui-icon-last2' title='最后一页'></span></span>",next="<span id='"+po[2]+"' class='coral-paginator-next coral-corner-all' tabindex='0'><span class='cui-icon-arrow-right3' title='下一页'></span></span>",prev="<span id='"+po[1]+"' class='coral-paginator-prev coral-corner-all' tabindex='0'><span class='cui-icon-arrow-left3' title='前一页'></span></span>",sep="<span>|</span>",navbar="<span class='pager-navbar'></span>",toolbar="<span class='pager-toolbar'></span>",description="<span class='pager-description'></span>",paginator,lft,cent,rgt,twd,tdw,i;paginator="pg_"+pgid;lft=pgid+"_left";cent=pgid+"_center";rgt=pgid+"_right";rninput+="<input type='text' class='coral-rn-input' val=''/>";if(!that.options.rninput){}else{if(that.options.rowList.length>0){}}rowlist+="<span class='coral-paginator-combobox'><select class='coral-pg-selbox' role='listbox'>";for(i=0;i<that.options.rowList.length;i++){rowlist+='<option role="option" value="'+that.options.rowList[i]+'"'+((that.options.rowNum==that.options.rowList[i])?' selected="selected"':"")+">"+that.options.rowList[i]+"</option>"}rowlist+="</select></span>";if(that.options.viewrecords){viewrecords+="<span class='coral-paging-info'></span>";totalPage+="<span class='coral-paging-totalpage'></span>"
}if(that.options.pginput===true){pginp="<td dir='"+dir+"'>"+$.grid.format(that.options.pgtext||"","<input class='coral-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.grid.coralID(pgid)+"'></span>")+"</td>"}if(that.options.pagerStyle=="flex"){if(pagerTemplate){pagerTemplate1=pagerTemplate}pagination="<span id='"+po[1]+"' class='coral-paginator-prev coral-corner-all' tabindex='0'><span class='cui-icon-arrow-left3'>p</span></span><span class='coral-paginator-pages'></span><span id='"+po[2]+"' class='coral-paginator-next coral-corner-all' tabindex='0'><span class='cui-icon-arrow-right3'>p</span></span><em>第</em><input type='text' class='coral-pg-input'/><em>页</em>";pagers=pagerTemplate1.replace(/\{viewrecords\}/g,viewrecords).replace(/\{navbar\}/g,navbar).replace(/\{reload\}/g,reload).replace(/\{-\}/g,sep).replace(/\{first\}/g,first).replace(/\{last\}/g,last).replace(/\{next\}/g,next).replace(/\{totalPage\}/g,totalPage).replace(/\{prev\}/g,prev).replace(/\{links\}/g,links).replace(/\{pginput\}/g,pginput).replace(/\{toolbar\}/g,toolbar).replace(/\{description\}/g,description).replace(/\{rowlist\}/g,rowlist).replace(/\{rninput\}/g,rninput);$("#"+$.grid.coralID(pgid)).addClass("coral-pager-flex");$("#"+$.grid.coralID(pgid)).append("<div id='"+paginator+"' class='coral-paginator' role='group'>"+pagers+"</div>");that._bindpager(pgid,tp)}else{if(that.options.pagerStyle=="tradition"){if(pagerTemplate){pagerTemplate2=pagerTemplate}pagination="<span id='"+po[0]+"' class='coral-paginator-first coral-state-default coral-corner-all' tabindex='0'><span class='cui-icon-first2'></span></span><span id='"+po[1]+"' class='coral-paginator-prev coral-corner-all' tabindex='0'><span class='cui-icon-arrow-left3'></span></span><em>第</em><input type='text' class='coral-pg-input'/><em>页</em><span id='"+po[2]+"' class='coral-paginator-next coral-corner-all' tabindex='0'><span class='cui-icon-arrow-right3'></span></span><span id='"+po[3]+"' class='coral-paginator-last coral-state-default coral-corner-all' tabindex='0'><span class='cui-icon-last2'></span></span>";
pagers=pagerTemplate2.replace(/\{viewrecords\}/g,viewrecords).replace(/\{navbar\}/g,navbar).replace(/\{reload\}/g,reload).replace(/\{-\}/g,sep).replace(/\{first\}/g,first).replace(/\{last\}/g,last).replace(/\{next\}/g,next).replace(/\{prev\}/g,prev).replace(/\{links\}/g,links).replace(/\{totalPage\}/g,totalPage).replace(/\{pginput\}/g,pginput).replace(/\{toolbar\}/g,toolbar).replace(/\{description\}/g,description).replace(/\{rowlist\}/g,rowlist).replace(/\{rninput\}/g,rninput);$("#"+$.grid.coralID(pgid)).addClass("coral-pager-tradition");$("#"+$.grid.coralID(pgid)).append("<div id='"+paginator+"' class='coral-paginator' role='group'>"+pagers+"</div>");that._bindpagerTradition(pgid,tp)}else{}}var pagerOpts=$.parser.parseOptions($("#"+$.grid.coralID(pgid))[0],null);that.options.toolbarOptions=pagerOpts.toolbarOptions;that.options.description=pagerOpts.description;var navbarOptions=that.options.navbarOptions||{};pagerOpts.toolbarOptions=pagerOpts.toolbarOptions||{};$(".reload-button",that.element).button();if($(".pager-toolbar",that.element).length){$(".pager-toolbar",that.element).toolbar(pagerOpts.toolbarOptions)}if(that.options.description){$(".pager-description",that.element).html(that.options.description)}},_bindpagerTradition:function(pgid,tp){var that=this;$("input.coral-pg-input",$("#"+$.grid.coralID(pgid))).textbox({componentCls:"pg",onKeyPress:function(e,ui){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13){var last=that._intNum(that.options.lastpage,1);var cp=that._intNum(ui.text,1);if(cp>last){that.options.page=last;$(this).textbox("setValue",that.options.page)}else{that.options.page=(ui.text>0)?ui.text:that.options.page}if(!that._clearVals("user")){return false}that._populate();return false}return this},onBlur:function(){var last=that._intNum(that.options.lastpage,1);var cp=$(this).textbox("getValue");if(cp!==that.options.page){$(this).textbox("setValue",that.options.page)}}});$("input.coral-rn-input",$("#"+$.grid.coralID(pgid))).textbox({componentCls:"rn",onKeyPress:function(e,ui){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;
if(key==13){that.options.rowNum=(ui.text>0)?(ui.text<that.options.rowNumMax?ui.text:that.options.rowNumMax):that.options.rowNum;if(!that._clearVals("records")){return false}that._populate();return false}return this}});$(".coral-pg-selbox",$("#"+$.grid.coralID(pgid))).combobox({componentCls:"rn",panelHeight:"auto",onChange:function(event,ui){that.options.page=Math.round(that.options.rowNum*(that.options.page-1)/ui.value-0.5)+1;that.options.rowNum=ui.value;if(!that._clearVals("records")){return false}that._populate();return false}});$("#first"+$.grid.coralID(tp)+", #prev"+$.grid.coralID(tp)+", #next"+$.grid.coralID(tp)+", #last"+$.grid.coralID(tp)).click(function(){var cp=that._intNum(that.options.page,1),last=that._intNum(that.options.lastpage,1),selclick=false,fp=true,pp=true,np=true,lp=true;if(last===0||last===1){fp=false;pp=false;np=false;lp=false}else{if(last>1&&cp>=1){if(cp===1){fp=false;pp=false}else{if(cp===last){np=false;lp=false}}}else{if(last>1&&cp===0){np=false;lp=false;cp=last-1}}}if(this.id==="first"+tp&&fp){that.options.page=1;selclick=true}if(this.id==="prev"+tp&&pp){that.options.page=(cp-1);selclick=true}if(this.id==="next"+tp&&np){that.options.page=(cp+1);selclick=true}if(this.id==="last"+tp&&lp){that.options.page=last;selclick=true}if(selclick){if(!that._clearVals(this.id)){return false}that._populate()}return false})},_bindpager:function(pgid,tp){var that=this;$("input.coral-pg-input",$("#"+$.grid.coralID(pgid))).textbox({componentCls:"pg",onKeyPress:function(e,ui){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13){var last=that._intNum(that.options.lastpage,1);var cp=that._intNum(ui.text,1);if(cp>last){that.options.page=last;$(this).textbox("setValue",that.options.page)}else{that.options.page=(ui.text>0)?ui.text:that.options.page}if(!that._clearVals("user")){return false}that._populate();return false}return this},onBlur:function(){var last=that._intNum(that.options.lastpage,1);var cp=$(this).textbox("getValue");if(cp!==that.options.page){$(this).textbox("setValue",that.options.page)
}}});$("input.coral-rn-input",$("#"+$.grid.coralID(pgid))).textbox({componentCls:"rn",onKeyPress:function(e,ui){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13){that.options.rowNum=(ui.text>0)?(ui.text<that.options.rowNumMax?ui.text:that.options.rowNumMax):that.options.rowNum;if(!that._clearVals("records")){return false}that._populate();return false}return this}});$(".coral-pg-selbox",$("#"+$.grid.coralID(pgid))).combobox({componentCls:"rn",panelHeight:"auto",onChange:function(event,ui){that.options.page=Math.round(that.options.rowNum*(that.options.page-1)/ui.newValue-0.5)+1;that.options.rowNum=ui.newValue;if(!that._clearVals("records")){return false}that._populate();return false}});$(".coral-textbox-btn-ico-search",$("#"+$.grid.coralID(pgid))).click(function(e){that.options.page=($(this).prev().val()>0)?$(this).prev().val():that.options.page;if(!that._clearVals("user")){return false}that._populate();return false});this._off($(".coral-paginator-page"));this._on({"click.coral-paginator-page":function(e){var _this=e.target;if($(_this).hasClass("coral-state-disabled")){_this.style.cursor="default"}else{$(_this).addClass("coral-state-hover");_this.style.cursor="pointer"}}});this._on({"mouseenter.coral-paginator-page":function(e){var _this=e.target;if($(_this).hasClass("coral-state-disabled")){_this.style.cursor="default"}else{$(_this).addClass("coral-state-hover");_this.style.cursor="pointer"}},"mouseleave.coral-paginator-page":function(e){var _this=e.target;if(!$(_this).hasClass("coral-state-disabled")){$(_this).removeClass("coral-state-hover");_this.style.cursor="default"}}});$("#first"+$.grid.coralID(tp)+", #prev"+$.grid.coralID(tp)+", #next"+$.grid.coralID(tp)+", #last"+$.grid.coralID(tp)).click(function(){var cp=that._intNum(that.options.page,1),last=that._intNum(that.options.lastpage,1),selclick=false,fp=true,pp=true,np=true,lp=true;if(last===0||last===1){fp=false;pp=false;np=false;lp=false}else{if(last>1&&cp>=1){if(cp===1){fp=false;pp=false}else{if(cp===last){np=false;
lp=false}}}else{if(last>1&&cp===0){np=false;lp=false;cp=last-1}}}if(this.id==="first"+tp&&fp){that.options.page=1;selclick=true}if(this.id==="prev"+tp&&pp){that.options.page=(cp-1);selclick=true}if(this.id==="next"+tp&&np){that.options.page=(cp+1);selclick=true}if(this.id==="last"+tp&&lp){that.options.page=last;selclick=true}if(selclick){if(!that._clearVals(this.id)){return false}that._populate()}return false})},_updatepager:function(rn,dnd){var that=this;var cp,last,base,from,to,tot,fmt,pgboxes="",sppg,topa,totalp,tspg=that.options.pager?"_"+$.grid.coralID(that.options.pager.substr(1)):"",tspg_t=that.options.toppager?"_"+that.options.toppager.substr(1):"";base=parseInt(that.options.page,10)-1;if(base<0){base=0}base=base*parseInt(that.options.rowNum,10);to=base+that.options.reccount;if(that.options.scroll){var rows=$("tbody:first > tr:gt(0)",that.grid.rowsView);base=to-rows.length;that.options.reccount=rows.length;var rh=rows.outerHeight()||that.grid.prevRowHeight;if(rh){var top=base*rh;var height=parseInt(that.options.records,10)*rh;$(">div:first",that.grid.rowsView).css({height:height}).children("div:first").css({height:top,display:top?"":"none"})}that.grid.rowsView.scrollLeft=that.grid.columnsView.scrollLeft}if(that.options.treeGrid){var rows=$("tbody:first > tr:not(.treeGridRow,.jqgfirstrow)",that.grid.rowsView);that.options.reccount=rows.length;to=base+that.options.reccount}pgboxes=$(that.element).find(".coral-grid-pager");if(pgboxes.length>0){fmt=$.grid.formatter.integer||{};cp=that._intNum(that.options.page);last=that._intNum(that.options.lastpage);$(".selbox",pgboxes)[this.options.useProp?"prop":"attr"]("disabled",false);if($(".coral-pg-input",pgboxes).length>0){$(".coral-pg-input",pgboxes).val(that.options.page);sppg=that.options.toppager?"#sp_1"+tspg+",#sp_1"+tspg_t:"#sp_1"+tspg;$(sppg).html($.fmatter?$.fmatter.util.NumberFormat(that.options.lastpage,fmt):that.options.lastpage)}if(that.options.rninput===true){$(".coral-rn-input",pgboxes).val(that.options.rowNum)
}if(that.options.viewrecords){if(that.options.reccount===0){$(".coral-paging-info",pgboxes).html("");$(".coral-paging-totalpage",pgboxes).html("")}else{from=base+1;tot=that.options.records;topa=that.options.reccount;if(tot%topa==0){totalp=parseInt(tot/topa)}else{totalp=parseInt(tot/topa)+1}if($.fmatter){from=$.fmatter.util.NumberFormat(from,fmt);to=$.fmatter.util.NumberFormat(to,fmt);tot=$.fmatter.util.NumberFormat(tot,fmt);topa=$.fmatter.util.NumberFormat(topa,fmt);totalp=$.fmatter.util.NumberFormat(totalp,fmt)}$(".coral-paging-info",pgboxes).html($.grid.format(that.options.recordtext,from,to,tot));$(".coral-paging-totalpage",pgboxes).html($.grid.format(that.options.pagetext,totalp))}}if(that.options.pgbuttons===true){var pre=[],next=[];that.pagers.each(function(){pre.push("#first_"+this.id);pre.push("#prev_"+this.id);next.push("#next_"+this.id);next.push("#last_"+this.id)});if(cp<=0){cp=last=0}if(cp==1||cp===0){$(pre.join(",")).addClass("coral-state-disabled").removeClass("coral-state-hover");if(that.options.toppager){$("#first_t"+tspg_t+", #prev_t"+tspg_t).addClass("coral-state-disabled").removeClass("coral-state-hover")}}else{$(pre.join(",")).removeClass("coral-state-disabled");if(that.options.toppager){$("#first_t"+tspg_t+", #prev_t"+tspg_t).removeClass("coral-state-disabled")}}if(cp==last||cp===0){$(next.join(",")).addClass("coral-state-disabled").removeClass("coral-state-hover");if(that.options.toppager){$("#next_t"+tspg_t+", #last_t"+tspg_t).addClass("coral-state-disabled").removeClass("coral-state-hover")}}else{$(next.join(",")).removeClass("coral-state-disabled");if(that.options.toppager){$("#next_t"+tspg_t+", #last_t"+tspg_t).removeClass("coral-state-disabled")}}if(0==last){$(next.join(",")).addClass("coral-state-disabled").removeClass("coral-state-hover")}}that._paginators()}if(rn===true&&that.options.rownumbers===true){$("td.grid-rownum",that.rows).each(function(i){$(this).html(base+1+i)})}if(dnd&&that.options.jqgdnd){$(that.element).grid("gridDnD","updateDnD")
}that._trigger("onComplete",null,[]);that._trigger("afterComplete",null,[])},_paginators:function(){var that=this;var cp=that._intNum(that.options.page,1),last=that._intNum(that.options.lastpage,1),selclick=false;var le=3,begin=cp>2?cp+2-le:1,end,pages="";end=le+begin>last?last+1:le+begin;if(begin>3&&end<=last+2){begin=end-le}if(cp>2&&last>le){if(begin>=2){pages+="<span class='coral-paginator-page coral-state-default coral-corner-all'  tabindex='0'>1</span>"}if(begin>=3){pages+="<span class='coral-paginator-page coral-state-default coral-corner-all'  tabindex='0'>2</span>"}if(begin!=3&&begin!=1&&begin!=2){pages+="<span class='coral-page-pointer'>...</span>"}}for(var i=begin;i<end;i++){if(cp==i){pages+="<span class='coral-paginator-page coral-state-default coral-state-active coral-corner-all'  tabindex='0'>"+i+"</span>"}else{pages+="<span class='coral-paginator-page coral-state-default coral-corner-all'  tabindex='0'>"+i+"</span>"}}if(end==last){pages+="<span class='coral-paginator-page coral-state-default coral-corner-all'>"+last+"</span>"}else{if(end<=last){pages+="<span class='coral-page-pointer'>...</span><span class='coral-paginator-page coral-state-default coral-corner-all'>"+last+"</span>"}}$(".coral-paginator-pages",that.element).html(pages)},_populate:function(npage){var that=this,isPicgrid=!!(that.options.model=="card");var grid=that.grid;if(true){var pvis=that.options.scroll&&npage===false,prm={},dt,dstr,pN=that.options.prmNames;if(that.options.page<=0){that.options.page=1}if(pN.search!==null){prm[pN.search]=that.options.search}if(pN.nd!==null){prm[pN.nd]=new Date().getTime()}if(pN.rows!==null){prm[pN.rows]=that.options.rowNum}if(pN.page!==null){prm[pN.page]=that.options.page}if(pN.sort!==null){prm[pN.sort]=that.options.sortname}if(pN.order!==null){prm[pN.order]=that.options.sortorder}if(that.options.rowTotal!==null&&pN.totalrows!==null){prm[pN.totalrows]=that.options.rowTotal}var lc=function(req){that._trigger("onLoad",null,[req]);if(that.options.afterSortableRows&&$.fn.sortable){try{$(that.element).grid("sortableRows")
}catch(e){}}};var adjust=0;npage=npage||1;if(npage>1){if(pN.npage!==null){prm[pN.npage]=npage;adjust=npage-1;npage=1}else{lc=function(req){that.options.page++;grid.columnsView.loading=false;that._trigger("onLoad",null,[req]);that._populate(npage-1)}}}else{if(pN.npage!==null){delete that.options.postData[pN.npage]}}if(that.options.grouping){this.groupingSetup();var grp=that.options.groupingView,gi,gs="";for(gi=0;gi<grp.groupField.length;gi++){var index=grp.groupField[gi];$.each(that.options.colModel,function(cmIndex,cmValue){if(cmValue.name===index&&cmValue.index){index=cmValue.index}});gs+=index+" "+grp.groupOrder[gi]+", "}prm[pN.sort]=gs+prm[pN.sort]}if(that.options.containSortOrder&&prm[pN.sort]&&prm[pN.order]){prm[pN.sort]=prm[pN.sort]+that.options.sortSeparator+prm[pN.order]}$.extend(that.options.postData,prm);var rcnt=!that.options.scroll?1:that.rows.length-1;var bfr=that._trigger("beforeRequest",null,[]);if(bfr===false||bfr==="stop"){return}if($.isFunction(that.options.datatype)){that.options.datatype.call(that,that.options.postData,"load_"+that.options.id);return}dt=that.options.datatype.toLowerCase();if(!(that.options.b_sortdata&&that.options.b_sortdata===true)&&that.options.orgdatatype){dt=that.options.orgdatatype;that.options.datatype=dt}if(that.options.localonce){dt="local"}if(that.options.initData){dt="initinlocal"}var success=function(content,st,xhr){if(that.options.loadonce){that.options.orgdatatype=dt}if(!that._trigger("beforeProcessing",null,[{content:content,state:st,xhr:xhr}])){that._endReq();return}else{that._addJSONData(content,grid.rowsView,rcnt,npage>1,adjust)}if(!isPicgrid){that._hasScrollOffset()}if(lc){lc.call(that,content)}that._trigger("afterLoad",null,[{content:content}]);if(pvis){grid.populateVisible()}if(that.options.loadonce||that.options.treeGrid){that.options.datatype="local";that.options.orgpage=that.options.page}if(npage===1){that._endReq()}var dReader,drows;if(that.options.orgdatatype=="local"){dReader=that.options.localReader}else{dReader=that.options.jsonReader
}drows=$.grid.getAccessor(content,dReader.root);if(drows.length==0&&parseInt(that.options.page)!=1&&parseInt(that.options.lastpage)<parseInt(that.options.page)){$(that.element).grid("reload",{page:that.options.lastpage})}content=null;that.refresh()};switch(dt){case"initinlocal":dt="json";success(that.options.initData,null,null);this.options.initData=false;break;case"json":case"jsonp":if(this.xhr){this.xhr.abort()}this.xhr=$.ajax(this._ajaxSettings());this.xhr.success(function(content,st,xhr){success(content,st,xhr)}).error(function(xhr,st,err){that._trigger("onLoadError",null,[{xhr:xhr,st:st,err:err}]);if(npage===1){that._endReq()}xhr=null;that.refresh()}).complete(function(jqXHR,status){if(jqXHR===that.xhr){that.xhr=null}});break;case"local":case"clientside":that._beginReq();that.options.datatype="local";var req=that._addLocalData();this._addJSONData(req,grid.rowsView,rcnt,npage>1,adjust);if(!that.options.b_sortdata){that.refresh();if(lc){lc.call(that,req)}that._trigger("AfterLoad",null,[req]);if(pvis){grid.populateVisible()}}that._endReq();if(that.options.frozenColumns){that._setFrozenHeight()}break}}},_setFrozenHeight:function(){var that=this,rowId="",headHeight=0,frozenHeight=0,normalHeight=0;if(this.grid.fhDiv){headHeight=this.grid.fhDiv.height();this.grid.fbDiv.css("top",headHeight);$("tr",that.grid.fbDiv).slice(1).each(function(){rowId=$(this).attr("id");frozenHeight=parseFloat($("td:first",this).height());normalHeight=parseFloat($("#"+rowId,that.gridRows).find("td:first").height());if(frozenHeight<normalHeight){$("td",this).each(function(){$(this).height(normalHeight)})}else{if(frozenHeight>normalHeight){$("td",$("#"+rowId,that.gridRows)).each(function(){$(this).height(frozenHeight)})}}})}if(this.grid.rightfhDiv){headHeight=this.grid.rightfhDiv.height();this.grid.rightfbDiv.css("top",headHeight);$("tr",that.grid.rightfbDiv).slice(1).each(function(){rowId=$(this).attr("id");frozenHeight=parseFloat($("td:first",this).height());normalHeight=parseFloat($("#"+rowId,that.gridRows).find("td:first").height());
if(frozenHeight<normalHeight){$("td",this).each(function(){$(this).height(normalHeight)})}else{if(frozenHeight>normalHeight){$("td",$("#"+rowId,that.gridRows)).each(function(){$(this).height(frozenHeight)})}}})}},_ajaxSettings:function(){var that=this,opts=this.options;return $.extend({url:opts.url,type:opts.asyncType,beforeSend:function(xhr,settings){var gotoreq=true;gotoreq=that._trigger("beforeSend",null,{xhr:xhr,settings:settings});if(gotoreq===undefined){gotoreq=true}if(gotoreq===false){return false}else{that._beginReq()}},data:$.isFunction(opts.serializeGridData)?opts.serializeGridData.call(this,opts.postData):opts.postData,dataType:"json"},$.grid.ajaxOptions,opts.ajaxGridOptions)},_reader:function(datatype){var that=this;var field,f=[],j=0,i;for(i=0;i<this.options.colModel.length;i++){field=this.options.colModel[i];if(field.name!=="cb"&&field.name!=="subgrid"&&field.name!=="rn"){f[j]=datatype=="local"?field.name:((datatype=="xml"||datatype==="xmlstring")?field.xmlmap||field.name:field.jsonmap||field.name);if(that.options.keyName!==false&&field.key===true){that.options.keyName=f[j]}j++}}return f},_addMulti:function(rowid,pos,irow,checked){var that=this,isPicgrid=!!(that.options.model=="card"),v='<input role="checkbox" type="checkbox" id="jqg_'+that.options.id+"_"+rowid+'" class="cbox" name="jqg_'+that.options.id+"_"+rowid+'"'+(checked?'checked="checked"':"")+"/>",prp=that._formatCol(pos,irow,"",null,rowid,true);if(isPicgrid){return v}return'<td role="gridcell" '+prp+">"+v+"</td>"},_addSingle:function(rowid,pos,irow){var that=this,isPicgrid=!!(that.options.model=="card"),v='<input role="radio" type="radio" id="jqg_'+that.options.id+"_"+rowid+'" class="cbox" name="jqg_'+that.options.id+'"/>',prp=that._formatCol(pos,irow,"",null,rowid,true);if(isPicgrid){return v}return'<td role="gridcell" '+prp+">"+v+"</td>"},_addRowNum:function(pos,irow,pG,rN){var v=(parseInt(pG,10)-1)*parseInt(rN,10)+1+irow,prp=this._formatCol(pos,irow,v,null,irow,true);return'<td role="gridcell" class="coral-state-default grid-rownum" '+prp+">"+v+"</td>"
},_customPanel:function(rd,ni,muti){var that=this,itemJson={},coreData="",itemData="",toolbarsData="",buttonsData="";var fun=$.coral.toFunction(that.options.picTemplate);if($.isFunction(fun)){itemJson=fun.apply("picTemplate",[{rowData:rd,ni:ni,muti:muti,getData:true}])}if(typeof(itemJson)=="undefined"){return""}var src=itemJson.src;if(!src){src="src"}coreData=itemJson.coreData||"<img src='"+rd.src+"'/>";itemData=itemJson.itemData||"";toolbarsData=itemJson.toolbarsData||"";buttonsData=itemJson.buttonsData||"";var ui=[];ui.push("<ul class='rowgrid coral-component-content coral-corner-all'>");ui.push("<li class='gridModel1 gridModel'>");if(coreData.length>0){ui.push(coreData)}ui.push("<div class='valigh-fix'></div>");if(toolbarsData.length>0){ui.push("<div class='gridtoolbars'><div class='bgopacity'>&#160;</div>"+toolbarsData+"</div>")}ui.push("</li>");if(itemData.length>0){ui.push("<li class='gridModel2 gridModel'>");ui.push("<div class='griditem'>"+itemData+"</div>");ui.push("</li>")}if(muti.length>0||buttonsData.length>0){ui.push("<li class='gridModel3 gridModel'>");if(itemData.length>0||buttonsData.length>0){ui.push("<ul class='griditem'>");if(muti.length>0){ui.push("<li class='gridCheckbox'>"+muti+"</li>")}if(buttonsData.length>0){ui.push("<li class='gridbuttons'>"+buttonsData+"</li>")}ui.push("</ul>")}ui.push("</li>")}ui.push("</ul>");return ui.join("")},_addJSONData:function(data,t,rcnt,more,adjust){var that=this,isPicgrid=!!(that.options.model=="card");var startReq=new Date();if(data){if(that.options.treeANode===-1&&!that.options.scroll){that.emptyRows(t,false,true);rcnt=1}else{rcnt=rcnt>1?rcnt:1}}else{return}var dReader,locid="_id_",frd,locdata=(that.options.datatype!="local"&&that.options.loadonce)||that.options.datatype=="jsonstring";if(locdata){that.options.data=[];that.options._index={};that.options.localReader.id=locid}that.options.reccount=0;if(that.options.datatype=="local"){dReader=that.options.localReader;frd="local"}else{dReader=that.options.jsonReader;
frd="json"}var self=this,ir=0,v,i,j,f=[],F,cur,gi=that.options.multiselect?1:0,si=that.options.subGrid?1:0,ni=that.options.rownumbers===true?1:0,len,drows,idn,rd={},fpos,idr,rowData=[],orgRowData=[],buttonsData=[],cn=(that.options.altRows===true)?" "+that.options.altclass:"",cn1,lp;if(gi==0){gi=that.options.singleselect?1:0}that.options.page=$.grid.getAccessor(data,dReader.page)||0;lp=$.grid.getAccessor(data,dReader.total);that.options.lastpage=lp===undefined?1:lp;that.options.records=$.grid.getAccessor(data,dReader.records)||0;that.options.total=$.grid.getAccessor(data,dReader.total)||0;that.options.userData=$.grid.getAccessor(data,dReader.userData)||{};if(!dReader.repeatitems){F=f=that._reader(frd)}if(that.options.keyName===false){idn=$.isFunction(dReader.id)?dReader.id.call(that,data):dReader.id}else{idn=that.options.keyName}if(f.length>0&&!isNaN(idn)){if(that.options.remapColumns&&that.options.remapColumns.length){idn=$.inArray(idn,that.options.remapColumns)}idn=f[idn]}drows=$.grid.getAccessor(data,dReader.root);if(!drows){drows=[]}len=drows.length;i=0;if(len>0&&that.options.page<=0){that.options.page=1}var rn=parseInt(that.options.rowNum,10),br=that.options.scroll?$.grid.randId():1,altr,selected=false,selr;if(adjust){rn*=adjust+1}if(that.options.datatype==="local"&&!that.options.deselectAfterSort){selected=true}var afterInsRow=$.isFunction(that.options.afterInsertRow),grpdata=[],hiderow=false,groupingPrepare;if(that.options.grouping){hiderow=that.options.groupingView.groupCollapse===true;groupingPrepare=this.groupingPrepare}while(i<len){cur=drows[i];idr=$.grid.getAccessor(cur,idn);if(idr===undefined){idr=br+i;if(f.length===0){if(dReader.cell){var ccur=$.grid.getAccessor(cur,dReader.cell);idr=ccur!==undefined?ccur[idn]||idr:idr;ccur=null}}}idr=that.options.idPrefix+idr;altr=rcnt===1?0:rcnt;cn1=(altr+i)%2==1?cn:"";if(selected){if(that.options.multiselect){selr=($.inArray(idr,that.options.selarrrow)!==-1)}else{selr=(idr===that.options.selrow)}}var iStartTrTag=rowData.length;
var iStartPicTag=orgRowData.length;rowData.push("");if(ni){rowData.push(that._addRowNum(0,i,that.options.page,that.options.rowNum))}if(gi){if(that.options.singleselect){rowData.push(that._addSingle(idr,ni,i,selr));buttonsData.push(that._addSingle(idr,ni,i,selr))}else{rowData.push(that._addMulti(idr,ni,i,selr));buttonsData.push(that._addMulti(idr,ni,i,selr))}}if(si){rowData.push($(that.element).grid("addSubGridCell",gi+ni,i+rcnt))}if(dReader.repeatitems){if(dReader.cell){cur=$.grid.getAccessor(cur,dReader.cell)}if(!F){F=this._orderedCols(gi+si+ni)}}for(j=0;j<F.length;j++){v=$.grid.getAccessor(cur,F[j]);rd[that.options.colModel[j+gi+si+ni].name]=v;rowData.push(this._addCell(idr,v,j+gi+si+ni,i+rcnt,cur,rd))}if(that.options.model=="card"){orgRowData[iStartTrTag]=that.constructPanel(idr,hiderow,cn1,rd,cur);orgRowData.push(that._customPanel(rd,ni,buttonsData));orgRowData.push("</li>")}else{rowData[iStartTrTag]=that.constructTr(idr,hiderow,cn1,rd,cur,selr);rowData.push("</tr>")}if(that.options.grouping){grpdata.push(rowData);if(!that.options.groupingView._locgr){groupingPrepare.call(self,rd,i)}rowData=[]}if(locdata||that.options.treeGrid===true){rd[locid]=idr;that.options.data.push(rd);that.options._index[idr]=that.options.data.length-1}if(that.options.gridview===false){if(isPicgrid){$("#"+$.grid.coralID(that.options.id)+" .coral-pic").append(orgRowData.join(""))}else{$("#"+$.grid.coralID(that.options.id)+" .coral-grid-btable tbody:first").append(rowData.join(""))}$(that).triggerHandler("gridAfterInsertRow",[idr,rd,cur]);if(afterInsRow){that.options.afterInsertRow.call(that,idr,rd,cur)}rowData=[];orgRowData=[];buttonsData=[]}$.fn.afterFmatter.call(that);rd={};ir++;i++;if(ir==rn){break}}if(that.options.gridview===true){fpos=that.options.treeANode>-1?that.options.treeANode:0;if(that.options.grouping){if(!locdata){this.groupingRender(grpdata,that.options.colModel.length,that.options.page,rn);grpdata=null}}else{if(that.options.treeGrid===true&&fpos>0){$(that.rows[fpos]).after(rowData.join(""))
}else{$("#"+$.grid.coralID(that.options.id)+" tbody:first").append(rowData.join(""))}}}if(that.options.subGrid===true){try{$(that.element).grid("addSubGrid",gi+ni)}catch(_){}}that.options.totaltime=new Date()-startReq;if(ir>0){if(that.options.records===0){that.options.records=len}}rowData=null;if(that.options.treeGrid===true){try{$(that.element).grid("setTreeNode",fpos+1,ir+fpos+1)}catch(e){}}if(!that.options.treeGrid&&!that.options.scroll&&!isPicgrid){that.grid.rowsView.scrollTop=0}that.options.reccount=ir;that.options.treeANode=-1;if(that.options.userDataOnFooter){$(that.element).grid("footerData",that.options.userData,true)}if(locdata&&!that.options.orgdatatype){that.options.records=len;that.options.lastpage=Math.ceil(len/rn)}if(!more){that._updatepager(false,true)}if(locdata){while(ir<len&&drows[ir]){cur=drows[ir];idr=$.grid.getAccessor(cur,idn);if(idr===undefined){idr=br+ir;if(f.length===0){if(dReader.cell){var ccur2=$.grid.getAccessor(cur,dReader.cell);idr=ccur2[idn]||idr;ccur2=null}}}if(cur){idr=that.options.idPrefix+idr;if(dReader.repeatitems){if(dReader.cell){cur=$.grid.getAccessor(cur,dReader.cell)}if(!F){F=that._orderedCols(gi+si+ni)}}for(j=0;j<F.length;j++){v=$.grid.getAccessor(cur,F[j]);rd[that.options.colModel[j+gi+si+ni].name]=v}rd[locid]=idr;if(that.options.grouping){groupingPrepare.call(self,rd,ir)}that.options.data.push(rd);that.options._index[idr]=that.options.data.length-1;rd={}}ir++}if(that.options.grouping){that.options.groupingView._locgr=true;this.groupingRender(grpdata,that.options.colModel.length,that.options.page,rn);grpdata=null}}},_addLocalData:function(){var that=this;var st,fndsort=false,cmtypes={},grtypes=[],grindexes=[],srcformat,sorttype,newformat;if(!$.isArray(that.options.data)){return}var grpview=that.options.grouping?that.options.groupingView:false,lengrp,gin;$.each(that.options.colModel,function(){sorttype=this.sorttype||"text";if(sorttype=="date"||sorttype=="datetime"){if(this.formatter&&typeof(this.formatter)==="string"&&this.formatter=="date"){if(this.formatoptions&&this.formatoptions.srcformat){srcformat=this.formatoptions.srcformat
}else{srcformat=$.grid.formatter.date.srcformat}if(this.formatoptions&&this.formatoptions.newformat){newformat=this.formatoptions.newformat}else{newformat=$.grid.formatter.date.newformat}}else{srcformat=newformat=this.datefmt||"Y-m-d"}cmtypes[this.name]={stype:sorttype,srcfmt:srcformat,newfmt:newformat}}else{cmtypes[this.name]={stype:sorttype,srcfmt:"",newfmt:""}}if(that.options.grouping){for(gin=0,lengrp=grpview.groupField.length;gin<lengrp;gin++){if(this.name===grpview.groupField[gin]){var grindex=this.name;if(this.index){grindex=this.index}grtypes[gin]=cmtypes[grindex];grindexes[gin]=grindex}}}if(!fndsort&&(this.index==that.options.sortname||this.name==that.options.sortname)){st=this.name;fndsort=true}});if(that.options.treeGrid){$(that.element).grid("sortTree",st,that.options.sortorder,cmtypes[st].stype,cmtypes[st].srcfmt);return}var compareFnMap={eq:function(queryObj){return queryObj.equals},ne:function(queryObj){return queryObj.notEquals},lt:function(queryObj){return queryObj.less},le:function(queryObj){return queryObj.lessOrEquals},gt:function(queryObj){return queryObj.greater},ge:function(queryObj){return queryObj.greaterOrEquals},cn:function(queryObj){return queryObj.contains},nc:function(queryObj,op){return op==="OR"?queryObj.orNot().contains:queryObj.andNot().contains},bw:function(queryObj){return queryObj.startsWith},bn:function(queryObj,op){return op==="OR"?queryObj.orNot().startsWith:queryObj.andNot().startsWith},en:function(queryObj,op){return op==="OR"?queryObj.orNot().endsWith:queryObj.andNot().endsWith},ew:function(queryObj){return queryObj.endsWith},ni:function(queryObj,op){return op==="OR"?queryObj.orNot().equals:queryObj.andNot().equals},"in":function(queryObj){return queryObj.equals},nu:function(queryObj){return queryObj.isNull},nn:function(queryObj,op){return op==="OR"?queryObj.orNot().isNull:queryObj.andNot().isNull}},query=$.grid.from(that.options.data);if(that.options.ignoreCase){query=query.ignoreCase()}function tojLinq(group){var s=0,index,gor,ror,opr,rule;
if(group.groups!==undefined){gor=group.groups.length&&group.groupOp.toString().toUpperCase()==="OR";if(gor){query.orBegin()}for(index=0;index<group.groups.length;index++){if(s>0&&gor){query.or()}try{tojLinq(group.groups[index])}catch(e){alert(e)}s++}if(gor){query.orEnd()}}if(group.rules!==undefined){if(s>0){var result=query.select();query=$.grid.from(result);if(that.options.ignoreCase){query=query.ignoreCase()}}try{ror=group.rules.length&&group.groupOp.toString().toUpperCase()==="OR";if(ror){query.orBegin()}for(index=0;index<group.rules.length;index++){rule=group.rules[index];opr=group.groupOp.toString().toUpperCase();if(compareFnMap[rule.op]&&rule.field){if(s>0&&opr&&opr==="OR"){query=query.or()}query=compareFnMap[rule.op](query,opr)(rule.field,rule.data,cmtypes[rule.field])}s++}if(ror){query.orEnd()}}catch(g){alert(g)}}}if(that.options.search===true){var srules=that.options.postData.filters;if(srules){if(typeof srules=="string"){srules=$.grid.parse(srules)}tojLinq(srules)}else{try{query=compareFnMap[that.options.postData.searchOper](query)(that.options.postData.searchField,that.options.postData.searchString,cmtypes[that.options.postData.searchField])}catch(se){}}}if(that.options.grouping){for(gin=0;gin<lengrp;gin++){query.orderBy(grindexes[gin],grpview.groupOrder[gin],grtypes[gin].stype,grtypes[gin].srcfmt)}}if(st&&that.options.sortorder&&fndsort){if(that.options.sortorder.toUpperCase()=="DESC"){query.orderBy(that.options.sortname,"d",cmtypes[st].stype,cmtypes[st].srcfmt)}else{query.orderBy(that.options.sortname,"a",cmtypes[st].stype,cmtypes[st].srcfmt)}}var queryResults=query.select(),ret=that._trigger("afterFilter",null,[{queryResults:query.select(),getData:true}])["result"];if(ret){queryResults=ret}var recordsperpage=parseInt(that.options.rowNum,10),total=queryResults.length,page=parseInt(that.options.page,10),totalpages=Math.ceil(total/recordsperpage),retresult={};if((that.options.search||that.options.resetsearch)&&that.options.grouping&&that.options.groupingView._locgr){that.options.groupingView.groups=[];
var j,grPrepare=that.groupingPrepare,key,udc;if(that.options.footerrow&&that.options.userDataOnFooter){for(key in that.options.userData){if(that.options.userData.hasOwnProperty(key)){that.options.userData[key]=0}}udc=true}for(j=0;j<total;j++){if(udc){for(key in that.options.userData){that.options.userData[key]+=parseFloat(queryResults[j][key]||0)}}grPrepare.call($(this),queryResults[j],j,recordsperpage)}}queryResults=queryResults.slice((page-1)*recordsperpage,page*recordsperpage);query=null;cmtypes=null;if(that.options.orgdatatype){retresult[that.options.localReader.total]=that.options.lastpage;retresult[that.options.localReader.page]=that.options.orgpage;retresult[that.options.localReader.records]=that.options.records}else{retresult[that.options.localReader.total]=totalpages;retresult[that.options.localReader.page]=page;retresult[that.options.localReader.records]=total}retresult[that.options.localReader.root]=queryResults;retresult[that.options.localReader.userData]=that.options.userData;queryResults=null;return retresult},getColProp:function(colname){var ret={},that=this;if(!that.grid){return false}var cM=that.options.colModel;for(var i=0;i<cM.length;i++){if(cM[i].name==colname){ret=cM[i];break}}return ret},setColProp:function(colname,obj){if(this.grid){if(obj){var cM=this.options.colModel;for(var i=0;i<cM.length;i++){if(cM[i].name==colname){$.extend(this.options.colModel[i],obj);break}}}}},destroyGroupHeader:function(nullHeader){if(typeof(nullHeader)=="undefined"){nullHeader=true}var that=this,$tr,i,l,headers,$th,$resizing,grid=that.grid,thead=$("table.coral-grid-htable thead",grid.columnsView),cm=that.options.colModel,hc;if(!grid){return}$(this.element).unbind(".setGroupHeaders");$tr=$("<tr>",{role:"rowheader"}).addClass("coral-grid-labels");headers=grid.headers;for(i=0,l=headers.length;i<l;i++){hc=cm[i].hidden?"none":"";$th=$(headers[i].el).width(headers[i].width).css("display",hc);try{$th.removeAttr("rowSpan")}catch(rs){$th.attr("rowSpan",1)}$tr.append($th);$resizing=$th.children("span.coral-grid-resize");
if($resizing.length>0){$resizing[0].style.height=""}$th.children("div")[0].style.top=""}$(thead).children("tr.coral-grid-labels").remove();$(thead).prepend($tr);if(nullHeader===true){$(that.element).grid("option",{groupHeader:null})}},setGroupHeaders:function(o){o=$.extend({useColSpanStyle:false,groupHeaders:[]},o||{});this.options.groupHeader=o;var that=this,i,cmi,skip=0,$tr,$colHeader,th,$th,thStyle,iCol,cghi,numberOfColumns,titleText,cVisibleColumns,colModel=that.options.colModel,cml=colModel.length,ths=that.grid.headers,$htable=$("table.coral-grid-htable",that.grid.columnsView),$trLabels=$htable.children("thead").children("tr.coral-grid-labels:last").addClass("jqg-second-row-header"),$thead=$htable.children("thead"),$theadInTable,$firstHeaderRow=$htable.find(".jqg-first-row-header");if($firstHeaderRow[0]===undefined){$firstHeaderRow=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto")}else{$firstHeaderRow.empty()}var $firstRow,inColumnHeader=function(text,columnHeaders){var i=0,length=columnHeaders.length;for(;i<length;i++){if(columnHeaders[i].startColumnName===text){return i}}return -1};that.element.find(".coral-grid-columns-view>table").prepend($thead);$tr=$("<tr>",{role:"rowheader"}).addClass("coral-gird-labels jqg-third-row-header");for(i=0;i<cml;i++){th=ths[i].el;$th=$(th);cmi=colModel[i];thStyle={height:"0px",width:ths[i].width+"px",display:(cmi.hidden?"none":"")};$("<th>",{role:"gridcell"}).css(thStyle).addClass("coral-first-th-"+that.options.direction).appendTo($firstHeaderRow);th.style.width="";iCol=inColumnHeader(cmi.name,o.groupHeaders);if(iCol>=0){cghi=o.groupHeaders[iCol];numberOfColumns=cghi.numberOfColumns;titleText=cghi.titleText;for(cVisibleColumns=0,iCol=0;iCol<numberOfColumns&&(i+iCol<cml);iCol++){if(!colModel[i+iCol].hidden){cVisibleColumns++}}$colHeader=$("<th>").attr({role:"columnheader"}).addClass("coral-state-default coral-th-column-header coral-th-"+that.options.direction).css({"border-top":"0px none"}).html(titleText);
if(cVisibleColumns>0){$colHeader.attr("colspan",String(cVisibleColumns))}if(that.options.headertitles){$colHeader.attr("title",$colHeader.text())}if(cVisibleColumns===0){$colHeader.hide()}$th.before($colHeader);$tr.append(th);skip=numberOfColumns-1}else{if(skip===0){if(o.useColSpanStyle){$th.attr("rowspan","2")}else{$("<th>",{role:"columnheader"}).addClass("coral-state-default coral-th-column-header coral-th-"+that.options.direction).css({display:cmi.hidden?"none":"","border-top":"0px none"}).insertBefore($th);$tr.append(th)}}else{$tr.append(th);skip--}}}$theadInTable=$(that.element).find(".coral-grid-htable").children("thead");$theadInTable.prepend($firstHeaderRow);$tr.insertAfter($trLabels);$htable.append($theadInTable);if(o.useColSpanStyle){$htable.find("span.coral-gird-resize").each(function(){var $parent=$(this).parent();if($parent.is(":visible")){this.style.cssText="height: "+$parent.height()+"px !important; cursor: col-resize;"}});$htable.find("div.coral-gird-sortable").each(function(){var $that=$(this),$parent=$that.parent();if($parent.is(":visible")&&$parent.is(":has(span.coral-gird-resize)")){$that.css("top",($parent.height()-$that.outerHeight())/2+"px")}})}$firstRow=$theadInTable.find("tr.jqg-first-row-header");$(that.element).bind("gridonresizestop.setGroupHeaders",function(e,nw,idx){$firstRow.find("th").eq(idx).width(nw)})},getGridParam:function(pName){var that=this;if(!that||!that.grid){return}if(!pName){return that.p}else{return typeof(that.options[pName])!="undefined"?that.options[pName]:null}},setGridParam:function(newParams){if(this.grid&&typeof(newParams)==="object"){$.extend(true,this.options,newParams)}},_setOption:function(key,value){var that=this,options=this.options;if(this.grid){$.extend(true,options[key],value)}if(key=="height"){that._setGridHeight(value);that._hasScrollOffset()}if(key=="width"){that._setGridWidth(value);that._hasScrollOffset()}if(key=="model"){if(value=="grid"){that.pic.hide();that.gridRows.show();that.gridColumns.show()}else{if(value=="card"){that.gridRows.hide();
that.gridColumns.hide();that.pic.show()}}}if(key=="datatype"){this.options.orgdatatype=value}this._super(key,value)},_hasScrollOffset:function(){var that=this,grid=this.grid;if(grid.rowsView.style.overflow!="hidden"&&grid.rowsView.scroll!="no"&&grid.rowsView.scrollHeight>grid.rowsView.offsetHeight){$(grid.columnsView).css("padding-right",that.options.scrollOffset+"px");return true}else{$(grid.columnsView).css("padding-right","");$(grid.rowsView).css("padding-right","");return false}},_hasHorizontalScrollBar:function(){var that=this,grid=this.grid;var fw=that.rightFrozenWidth;if(grid.rowsView.style.overflow!="hidden"&&grid.rowsView.scroll!="no"&&(grid.rowsView.scrollWidth-grid.rowsView.clientWidth)>0){return true}else{return false}},_setGridWidth:function(nwidth,shrink){if(!this.grid||nwidth==0||!this.rows){return}var that=this,grid=this.grid,cw,initwidth=0,brd=$.support.boxSizing?0:that.options.cellLayout,lvc,vc=0,hs=false,scw=that.options.scrollOffset,aw,gw=0,cl=0,cr;if(typeof shrink!="boolean"){shrink=that.options.shrinkToFit}if(isNaN(nwidth)){return}else{nwidth=parseInt(nwidth,10);that.grid.width=that.options.width=nwidth}if(that.options.footerrow){$(that.grid.sDiv).css("width",nwidth+"px")}if(shrink===false&&that.options.forceFit===true){that.options.forceFit=false}$.each(that.options.colModel,function(){if((this.hidden===false||typeof(this.hidden)=="undefined")){cw=this.widthOrg?this.widthOrg:parseInt(this.width,10);initwidth+=cw+brd;if(this.fixed){gw+=cw+brd}else{vc++}cl++}});var useMinWidth=false;if(that.options.minWidth&&initwidth>$(that.element).width()){useMinWidth=true}if(shrink===true||useMinWidth){if(vc===0){return}that.options.tblwidth=initwidth;aw=nwidth-brd*vc-gw;if(!isNaN(that.options.height)){if($(that.grid.rowsView)[0].clientHeight<$(that.grid.rowsView)[0].scrollHeight||that.rows.length===1){hs=true;aw-=scw}}initwidth=0;var cle=that.grid.cols.length>0;$.each(that.options.colModel,function(i){if((this.hidden===false||typeof(this.hidden)=="undefined")&&!this.fixed){cw=this.widthOrg?this.widthOrg:parseInt(this.width,10);
if(!useMinWidth){cw=Math.round(aw*cw/(that.options.tblwidth-brd*vc-gw))}if(cw<0){return}this.width=cw;initwidth+=cw;that.grid.headers[i].width=cw;that.grid.headers[i].el.style.width=cw+"px";var groupHeader=$("tr.jqg-first-row-header>th:eq("+i+")",$("table:first",that.grid.columnsView));if(groupHeader.length>0){groupHeader[0].style.width=cw+"px"}if(that.options.footerrow){that.grid.footers[i].style.width=cw+"px"}if(cle){that.grid.cols[i].style.width=(cw)+"px"}lvc=i}});if(!lvc){return}cr=0;if(!useMinWidth){if(hs){if(nwidth-gw-(initwidth+brd*vc)!==scw){cr=nwidth-gw-(initwidth+brd*vc)-scw}}else{if(Math.abs(nwidth-gw-(initwidth+brd*vc))!==1){cr=nwidth-gw-(initwidth+brd*vc)}}that.options.colModel[lvc].width+=(cr-1)}else{cr=that.options.colModel[lvc].width}that.options.tblwidth=initwidth+cr+brd*vc+gw;if(that.options.tblwidth>nwidth){var delta=that.options.tblwidth-parseInt(nwidth,10);that.options.tblwidth=nwidth;cw=that.options.colModel[lvc].width=that.options.colModel[lvc].width-delta}else{cw=that.options.colModel[lvc].width}that.grid.headers[lvc].width=cw;that.grid.headers[lvc].el.style.width=cw+"px";if(cle){that.grid.cols[lvc].style.width=cw+"px"}if(that.options.footerrow){that.grid.footers[lvc].style.width=cw+"px"}}$(grid.rowsView).width(nwidth);$(grid.columnsView).width(nwidth);if(that.options.tblwidth){$("table:first",grid.rowsView).css("width",that.options.tblwidth+"px");$("table:first",grid.columnsView).css("width",that.options.tblwidth+"px");that.grid.columnsView.scrollLeft=that.grid.rowsView.scrollLeft;if(that.options.footerrow){$("table:first",that.grid.sDiv).css("width",that.options.tblwidth+"px")}}},_setGridHeight:function(nh){var that=this,grid=that.grid,isPicgrid=!!(that.options.model=="card");if(!that.grid){return}var rowsView=$(that.grid.rowsView);if(that.options.frozenColumns===true){$("#"+$.grid.coralID(that.options.id)+"_frozen").parent().height(rowsView.height()-16)}var tblHeight="auto";if(String(nh).toLowerCase()==="auto"){nh="auto";tblHeight="auto";that.pic.css({height:"auto"});
rowsView.css({height:"auto"})}else{tblHeight=nh-that.element.find(".coral-grid-pager").height()-$(grid.caption).height();that.pic.css({height:tblHeight+(isNaN(tblHeight)?"":"px")});tblHeight=nh-$(grid.columnsView).outerHeight(true)-that.element.find(".coral-grid-pager").outerHeight(true)-$(grid.caption).height();rowsView.css({height:tblHeight+(isNaN(tblHeight)?"":"px")})}that.options.height=nh;if(that.options.scroll){that.grid.populateVisible()}},getDataIDs:function(){var ids=[],i=0,len,j=0;len=this.rows.length;if(len&&len>0){while(i<len){if($(this.rows[i]).hasClass("jqgrow")){ids[j]=this.rows[i].id;j++}i++}}return ids},setRowData:function(rowid,data,cssp){var that=this,nm,success=true,title;if(!this.grid){return false}var t=this,vl,ind,cp=typeof cssp,lcdata={};ind=t.rows.namedItem(rowid);if(!ind){return false}if(data){try{$(this.options.colModel).each(function(i){nm=this.name;if(data[nm]!==undefined){lcdata[nm]=this.formatter&&typeof(this.formatter)==="string"&&this.formatter=="date"?$.unformat.date.call(t,data[nm],this):data[nm];vl=t._formatter(rowid,data[nm],i,data,"edit");title=this.title?{title:$.grid.stripHtml(vl)}:{};if(t.options.treeGrid===true&&nm==t.options.ExpandColumn){$("td:eq("+i+") > span:first",ind).html(vl).attr(title)}else{$("td:eq("+i+")",ind).html(vl).attr(title)}$.fn.afterFmatter.call(that)}});if(t.options.datatype=="local"){var id=$.grid.stripPref(t.options.idPrefix,rowid),pos=t.options._index[id];if(t.options.treeGrid){for(var key in t.options.treeReader){if(lcdata.hasOwnProperty(t.options.treeReader[key])){delete lcdata[t.options.treeReader[key]]}}}if(typeof(pos)!="undefined"){t.options.data[pos]=$.extend(true,t.options.data[pos],lcdata)}lcdata=null}}catch(e){success=false}}if(success){if(cp==="string"){$(ind).addClass(cssp)}else{if(cp==="object"){$(ind).css(cssp)}}t._trigger("aftercomplete")}return success},delRowData:function(rowid){var success=false,rowInd,ia,ri;var that=this;var isPicgrid=!!(that.options.model=="card");if(isPicgrid){rowInd=that.pic.children("#"+rowid)[0];
if(!rowInd){return false}else{$(rowInd).remove();that.options.records--;that.options.reccount--;that._updatepager(true,false);success=true;if(that.options.multiselect){ia=$.inArray(rowid,that.options.selarrrow);if(ia!=-1){that.options.selarrrow.splice(ia,1)}}if(rowid==that.options.selrow){that.options.selrow=null}}if(that.options.datatype=="local"){var id=$.grid.stripPref(that.options.idPrefix,rowid),pos=that.options._index[id];if(typeof(pos)!="undefined"){that.options.data.splice(pos,1);that.refreshIndex()}}}else{rowInd=that.rows.namedItem(rowid);if(!rowInd){return false}else{ri=rowInd.rowIndex;$(rowInd).remove();that.options.records--;that.options.reccount--;that._updatepager(true,false);success=true;if(that.options.multiselect){ia=$.inArray(rowid,that.options.selarrrow);if(ia!=-1){that.options.selarrrow.splice(ia,1)}}if(rowid==that.options.selrow){that.options.selrow=null}if(rowid==that.options.editrow){that.options.editrow=null;that.rowEditButtons.remove()}var sRowArr=$.each(that.options.savedRow,function(i,sRow){if(sRow.id==rowid){ia=i;return true}});if(sRowArr.length){if(ia!=-1){that.options.savedRow.splice(ia,1)}}}if(that.options.datatype=="local"){var id=$.grid.stripPref(that.options.idPrefix,rowid),pos=that.options._index[id];if(typeof(pos)!="undefined"){that.options.data.splice(pos,1);that.refreshIndex()}}if(that.options.altRows===true&&success){var cn=that.options.altclass;$(that.rows).each(function(i){if(i%2==1){$(this).addClass(cn)}else{$(this).removeClass(cn)}})}if(!that.getDataIDs().length){that._cancelCheckAll()}if(this.options.frozenColumns){this._setFrozenHeight()}return success}},_cancelCheckAll:function(){var that=this;if(that.options.multiselect){$("#cb_"+$.grid.coralID(that.options.id),that.grid.columnsView)[that.options.useProp?"prop":"attr"]("checked",false)}},resetSelection:function(rowid){var t=this,ind,sr,fid;if(t.options.frozenColumns===true){fid=t.options.id+"_frozen"}if(typeof(rowid)!=="undefined"){sr=rowid===t.options.selrow?t.options.selrow:rowid;
$("#"+$.grid.coralID(t.options.id)+" tbody:first tr#"+$.grid.coralID(sr)).removeClass("coral-state-highlight").attr("aria-selected","false");if(fid){$("#"+$.grid.coralID(sr),"#"+$.grid.coralID(fid)).removeClass("coral-state-highlight")}if(t.options.multiselect){$("#jqg_"+$.grid.coralID(t.options.id)+"_"+$.grid.coralID(sr),"#"+$.grid.coralID(t.options.id))[t.options.useProp?"prop":"attr"]("checked",false);if(fid){$("#jqg_"+$.grid.coralID(t.options.id)+"_"+$.grid.coralID(sr),"#"+$.grid.coralID(fid))[t.options.useProp?"prop":"attr"]("checked",false)}t._setHeadCheckBox(false)}sr=null}else{if(!t.options.multiselect){if(t.options.selrow){$("#"+$.grid.coralID(t.options.id)+" tbody:first tr#"+$.grid.coralID(t.options.selrow)).removeClass("coral-state-highlight").attr("aria-selected","false");if(fid){$("#"+$.grid.coralID(t.options.selrow),"#"+$.grid.coralID(fid)).removeClass("coral-state-highlight")}t.options.selrow=null}}else{$(t.options.selarrrow).each(function(i,n){ind=t.rows.namedItem(n);$(ind).removeClass("coral-state-highlight").attr("aria-selected","false");$("#jqg_"+$.grid.coralID(t.options.id)+"_"+$.grid.coralID(n))[t.options.useProp?"prop":"attr"]("checked",false);if(fid){$("#"+$.grid.coralID(n),"#"+$.grid.coralID(fid)).removeClass("coral-state-highlight");$("#jqg_"+$.grid.coralID(t.options.id)+"_"+$.grid.coralID(n),"#"+$.grid.coralID(fid))[t.options.useProp?"prop":"attr"]("checked",false)}});t._setHeadCheckBox(false);t.options.selarrrow=[]}}if(t.options.cellEdit===true){if(parseInt(t.options.iCol,10)>=0&&parseInt(t.options.iRow,10)>=0){$("td:eq("+t.options.iCol+")",t.rows[t.options.iRow]).removeClass("edit-cell coral-state-highlight");$(t.rows[t.options.iRow]).removeClass("selected-row coral-state-hover")}}t.options.savedRow=[]},getRowData:function(rowid){var res={},resall,getall=false,len,j=0;var that=this,nm,ind;var isPicgrid=!!(that.options.model=="card");if(isPicgrid){if(typeof(rowid)=="undefined"){getall=true;resall=[];len=that.pic.children("li").length}else{ind=that.pic.children("#"+rowid)[0];
if(!ind){return res}len=2}var localKey="_id_";while(j<len){if(getall){ind=that.pic.children("li")[j]}if($(ind).hasClass("gridPanel")){for(var k=0;k<that.options.data.length;k++){if(that.options.data[k][localKey]==ind.id){res=that.options.data[k]}}if(getall){resall.push(res);res={}}}j++}}else{if(typeof(rowid)=="undefined"){getall=true;resall=[];len=that.rows.length}else{ind=that.rows.namedItem(rowid);if(!ind){return res}len=2}while(j<len){if(getall){ind=that.rows[j]}if($(ind).hasClass("jqgrow")){$('td[role="gridcell"]',ind).each(function(i){nm=that.options.colModel[i].name;if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"){if(that.options.treeGrid===true&&nm==that.options.ExpandColumn){res[nm]=$.grid.htmlDecode($("span:first",this).html())}else{try{res[nm]=$.unformat.call(that,this,{rowId:ind.id,colModel:that.options.colModel[i]},i,"get")}catch(e){res[nm]=$.grid.htmlDecode($(this).html())}}}});if(getall){resall.push(res);res={}}}j++}}return resall?resall:res},addRowData:function(rowid,rdata,pos,src){if(!pos){pos="last"}var success=false,nm,row,picRow,buttonsData,gi,si,ni,sind,i,v,prp="",aradd,cnm,cn,data,cm,id;if(rdata){if($.isArray(rdata)){aradd=true;cnm=rowid}else{rdata=[rdata];aradd=false}var t=this,datalen=rdata.length;var isPicgrid=!!(t.options.model=="card");ni=t.options.rownumbers===true?1:0;gi=t.options.multiselect===true?1:(t.options.singleselect===true?1:0);si=t.options.subGrid===true?1:0;if(!aradd){if(typeof(rowid)!="undefined"){rowid=rowid+""}else{rowid=$.grid.randId();if(t.options.keyName!==false){cnm=t.options.keyName;if(typeof rdata[0][cnm]!="undefined"){rowid=rdata[0][cnm]}}}}cn=t.options.altclass;var k=0,cna="",lcdata={},air=$.isFunction(t.options.afterInsertRow)?true:false;while(k<datalen){data=rdata[k];row=[];buttonsData=[];picRow=[];if(aradd){try{rowid=data[cnm]}catch(e){rowid=$.grid.randId()}cna=t.options.altRows===true?(t.rows.length-1)%2===0?cn:"":""}cna+=" new-row ";id=rowid;rowid=t.options.idPrefix+rowid;if(ni){prp=t._formatCol(0,1,"",null,rowid,true);row[row.length]='<td role="gridcell" aria-describedby="'+t.options.id+'_rn" class="coral-state-default grid-rownum" '+prp+">0</td>"
}if(gi){if(this.options.singleselect){v='<input role="radio" type="radio" id="jqg_'+t.options.id+"_"+rowid+'" name="jqg_'+t.options.id+'" class="cbox"/>'}else{v='<input role="checkbox" type="checkbox" id="jqg_'+t.options.id+"_"+rowid+'" name="jqg_'+t.options.id+"_"+rowid+'" class="cbox"/>'}prp=t._formatCol(ni,1,"",null,rowid,true);row[row.length]='<td role="gridcell" aria-describedby="'+t.options.id+'_cb" '+prp+">"+v+"</td>";buttonsData.push(v)}if(si){row[row.length]=$(t).grid("addSubGridCell",gi+ni,1)}for(i=gi+si+ni;i<t.options.colModel.length;i++){cm=t.options.colModel[i];nm=cm.name;lcdata[nm]=cm.formatter&&typeof(cm.formatter)==="string"&&cm.formatter=="date"?$.unformat.date.call(t,data[nm],cm):data[nm];v=t._formatter(rowid,$.grid.getAccessor(data,nm),i,data);prp=t._formatCol(i,1,v,data,rowid,true);row[row.length]='<td role="gridcell" aria-describedby="'+t.options.id+"_"+nm+'" '+prp+">"+v+"</td>"}if(isPicgrid){picRow.unshift(t.constructPanel(rowid,false,cna,lcdata,lcdata));picRow.push(t._customPanel(lcdata,ni,buttonsData));picRow.push("</li>")}else{row.unshift(t.constructTr(rowid,false,cna,lcdata,lcdata,false));row[row.length]="</tr>"}if(isPicgrid){$("#"+$.grid.coralID(t.options.id)+" .coral-pic").append(picRow.join(""))}else{if(t.rows.length===0){$("table:first",t.grid.rowsView).append(row.join(""))}else{switch(pos){case"last":$(t.rows[t.rows.length-1]).after(row.join(""));sind=t.rows.length-1;break;case"first":$(t.rows[0]).after(row.join(""));sind=1;break;case"after":sind=t.rows.namedItem(src);if(sind){if($(t.rows[sind.rowIndex+1]).hasClass("coral-subgrid")){$(t.rows[sind.rowIndex+1]).after(row)}else{$(sind).after(row.join(""))}}sind++;break;case"before":sind=t.rows.namedItem(src);if(sind){$(sind).before(row.join(""));sind=sind.rowIndex}sind--;break}}}if(t.options.subGrid===true){$(t).grid("addSubGrid",gi+ni,sind)}t.options.records++;t.options.reccount++;$(t).triggerHandler("gridAfterInsertRow",[rowid,data,data]);if(air){t.options.afterInsertRow.call(t,rowid,data,data)
}k++;if(t.options.datatype=="local"){lcdata[t.options.localReader.id]=id;t.options._index[id]=t.options.data.length;t.options.data.push(lcdata);lcdata={}}}if(t.options.altRows===true&&!aradd){if(pos=="last"){if((t.rows.length-1)%2==1){$(t.rows[t.rows.length-1]).addClass(cn)}}else{$(t.rows).each(function(i){if(i%2==1){$(this).addClass(cn)}else{$(this).removeClass(cn)}})}}t._updatepager(true,true);success=true;$("#noRecordsTips_"+$.grid.coralID(t.options.id)).hide();$.fn.afterFmatter.call(t)}if(this.options.frozenColumns){this._setFrozenHeight()}return success},footerData:function(data,format){var nm,action="set",success=false,res={},title;function isEmpty(obj){var i;for(i in obj){if(obj.hasOwnProperty(i)){return false}}return true}if(data==undefined){action="get"}if(typeof format!=="boolean"){format=true}action=action.toLowerCase();var t=this,vl;if(!t.grid||!t.options.footerrow){return false}if(action==="set"){if(isEmpty(data)){return false}}success=true;$(this.options.colModel).each(function(i){nm=this.name;if(action==="set"){if(data[nm]!==undefined){vl=format?t._formatter("",data[nm],i,data,"edit"):data[nm];title=this.title?{title:$.grid.stripHtml(vl)}:{};$("tr.footrow td:eq("+i+")",t.grid.sDiv).html(vl).attr(title);success=true}}else{if(action==="get"){res[nm]=$("tr.footrow td:eq("+i+")",t.grid.sDiv).html()}}});$.fn.afterFmatter.call(t);return action==="get"?res:success},clearGridData:function(clearfooter){var that=this;var isPicgrid=!!(that.options.model=="card");if(!that.grid){return}if(typeof clearfooter!="boolean"){clearfooter=false}if(isPicgrid){$("#"+$.grid.coralID(that.options.id)+" .coral-pic").empty()}else{if(that.options.deepempty){$("#"+$.grid.coralID(that.options.id)+" tbody:first tr:gt(0)").remove()}else{var trf=$(" tbody:first tr:first",that.element)[0];$(" tbody:first",that.element).empty().append(trf)}}if(that.options.footerrow&&clearfooter){$(".coral-grid-ftable td",that.grid.sDiv).html("&#160;")}that.options.selrow=null;that.options.selarrrow=[];that.options.savedRow=[];
that.options.records=0;that.options.page=1;that.options.lastpage=0;that.options.reccount=0;that.options.data=[];that.options._index={};that._updatepager(true,false);that._cancelCheckAll()},sortableRows:function(){var opts={},t=0;if(opts.sortableRowsOptions){$.extend(opts,opts.sortableRowsOptions)}var that=this;if(!that.grid){return}if(that.options.treeGrid){return}if($.fn.sortable){opts=$.extend({cursor:"move",axis:"y",items:".jqgrow"},opts||{});opts.change=function(e,ui){ui.prevItemId=$(ui.placeholder[0]).prev("tr").attr("id");ui.nextItemId=$(ui.placeholder[0]).next("tr").attr("id");ui.targetId=ui.position.top>ui.originalPosition.top?ui.prevItemId:ui.nextItemId;$("#"+that.id+" #"+ui.targetId).siblings().removeClass("coral-state-target");$("#"+that.id+" #"+ui.targetId).addClass("coral-state-target");that._trigger("onSortableRows",e,[ui])};opts.start=function(e,ui){$(ui.item).css("border-width","0px");ui.originalPermutation=[];if(ui.item.is("tr")){$("td",ui.item).each(function(i){this.style.width=that.grid.cols[i].style.width})}else{$("td",ui.item.find("tr:first")).each(function(i){this.style.width=that.grid.cols[i].style.width})}if(that.options.subGrid){var subgid=$(ui.item).attr("id");try{$(that).grid("collapseSubGridRow",subgid)}catch(e){}}$("tr.jqgrow",that.element.find(".coral-grid-btable")).each(function(){this.id!==""&&ui.originalPermutation.push(this.id)});that.sortableRowOriginalPermutation=ui.originalPermutation;that._trigger("beforeSortableRows",e,[ui])};opts.update=function(e,ui){$(ui.item).css("border-width","");ui.itemId=[];ui.permutation=[];ui.originalPermutation=that.sortableRowOriginalPermutation||[];if(that.options.rownumbers===true){$("td.grid-rownum",that.rows).each(function(i){$(this).html(i+1+(parseInt(that.options.page,10)-1)*parseInt(that.options.rowNum,10));ui.permutation.push(that.rows[i+1].id)})}else{$("tr.jqgrow",that.grid.rowsView).each(function(i){ui.permutation.push(this.id)})}$.each(ui.item,function(i){ui.itemId.push(ui.item[i].id)});ui.prevItemId=$(ui.item[0]).prev("tr").attr("id");
ui.nextItemId=$(ui.item[0]).next("tr").attr("id");ui.targetId=ui.position.top>ui.originalPosition.top?ui.prevItemId:ui.nextItemId;var dr=$.data(that.element[0],"dns-ref");if(dr){var opts=$.data(dr,"dns");if(opts.dragToSort){ui.item.remove();opts.dragToSort=false;var i=0;if(ui.targetId){for(;i<opts.dataItems.length;i++){$(dr).grid("delRowData",opts.dataItems[i].id)}that.element.grid("addRowData",opts.rowid,opts.dataItems,"after",ui.targetId)}}}$("#"+that.id+" #"+ui.targetId).removeClass("coral-state-target");that._trigger("afterSortableRows",e,[ui])};$("tbody:first",that.grid.rowsView).sortable(opts)}},destroySortableRows:function(opts){var that=this;if(!that.grid){return}if($.fn.sortable){$("tbody:first",that.grid.rowsView).sortable("destroy")}},gridDnS:function(opts){var that=this,t=0,items=[];if(!that.grid){return}if(that.options.treeGrid){return}if(!$.fn.draggable||!$.fn.droppable){return}var appender="<table id='grid_dns' class='coral-grid-dns'></table>";if($("#grid_dns")[0]===undefined){$("body").append(appender)}if(!opts.connectWith){return}opts.connectWith=opts.connectWith.split(",");opts.connectWith=$.map(opts.connectWith,function(n){return $.trim(n)});var connectToSortableOpts=opts.connectWith.join(" .coral-grid-btable>tbody, ")+" .coral-grid-btable>tbody";opts=$.extend({onstart:null,onstop:null,beforedrop:null,ondrop:null,dragcopy:false,dropbyname:false,droppos:"first",autoid:true,rowid:"id",dataItems:[],autoidprefix:"dns_"},opts||{});$.data(that.element[0],"dns",opts);if(that.options.reccount!="0"&&!that.options.jqgdns){var datadns=$.data(that.element,"dns");$("tr.jqgrow:not(.coral-draggable)",that.element).draggable({revert:"invalid",helper:function(e,ui){var tId=$(e.target).parent("tr")[0].id,i=0,html=$("<div></div>"),sel=that.element.grid("option","selarrrow").concat();$.data(that.element[0],"dns").dataItems=[];if($.inArray(tId,sel)>-1){for(i;i<sel.length;i++){$.data(that.element[0],"dns").dataItems.push($(that.element).grid("getRowData",sel[i]));html.append($(".coral-grid-btable>tbody #"+sel[i],that.element).clone())
}return html}else{$.data(that.element[0],"dns").dataItems.push(that.element.grid("getRowData",tId));html.append($(e.target).parent("tr").clone());return html}},connectToSortable:connectToSortableOpts,cursor:"move",appendTo:"#grid_dns",zIndex:5000,start:function(ev,ui){if(that.options.subGrid){var subgid=$(ui.helper).attr("id");try{$(that.element).grid("collapseSubGridRow",subgid)}catch(e){}}$.data(that.element[0],"dns").dragToSort=true;for(var i=0;i<$.data(that.element[0],"dns").connectWith.length;i++){if($($.data(that.element[0],"dns").connectWith[i]).grid("option","reccount")=="0"){$($.data(that.element[0],"dns").connectWith[i]).grid("addRowData","jqg_empty_row",{})}}ui.helper.addClass("coral-state-highlight");$("td",ui.helper.find("tr:first")).each(function(i){this.style.width=that.grid.headers[i].width+"px"});if(opts.onstart&&$.isFunction(opts.onstart)){opts.onstart.call($($t),ev,ui)}},stop:function(ev,ui){if(ui.helper.dropped&&!opts.dragcopy){var ids=$(ui.helper).attr("id");if(ids===undefined){ids=$(this).attr("id")}$(that.element).grid("delRowData",ids)}for(var i=0;i<$.data(that.element[0],"dns").connectWith.length;i++){$($.data(that.element[0],"dns").connectWith[i]).grid("delRowData","jqg_empty_row")}if(opts.onstop&&$.isFunction(opts.onstop)){opts.onstop.call($($t),ev,ui)}}})}that.options.jqgdns=true;for(var i=0;i<opts.connectWith.length;i++){var cn=opts.connectWith[i];$.data($(cn)[0],"dns-ref",that.element[0])}},gridDnD:function(opts){var that=this;if(!that.grid){return}if(that.options.treeGrid){return}if(!$.fn.draggable||!$.fn.droppable){return}function updateDnD(){var datadnd=$.data(that.element,"dnd");$("tr.jqgrow:not(.coral-draggable)",that.element).draggable($.isFunction(datadnd.drag)?datadnd.drag.call($(that.element),datadnd):datadnd.drag)}var appender="<table id='jqgrid_dnd' class='coral-grid-dnd'></table>";if($("#jqgrid_dnd")[0]===undefined){$("body").append(appender)}if(typeof opts=="string"&&opts=="updateDnD"&&that.options.jqgdnd===true){updateDnD();
return}if(!opts.connectWith){return}opts.connectWith=opts.connectWith.split(",");opts.connectWith=$.map(opts.connectWith,function(n){return $.trim(n)});var connectToSortableOpts=opts.connectWith.join(" .coral-grid-btable>tbody, ")+" .coral-grid-btable>tbody";opts=$.extend({drag:function(opts){return $.extend({start:function(ev,ui){if(that.options.subGrid){var subgid=$(ui.helper).attr("id");try{$(that.element).grid("collapseSubGridRow",subgid)}catch(e){}}for(var i=0;i<$.data(that.element,"dnd").connectWith.length;i++){if($($.data(that.element,"dnd").connectWith[i]).grid("option","reccount")=="0"){$($.data(that.element,"dnd").connectWith[i]).grid("addRowData","jqg_empty_row",{})}}ui.helper.addClass("coral-state-highlight");$("td",ui.helper).each(function(i){this.style.width=that.grid.headers[i].width+"px"});if(opts.onstart&&$.isFunction(opts.onstart)){opts.onstart.call($($t),ev,ui)}},stop:function(ev,ui){if(ui.helper.dropped&&!opts.dragcopy){var ids=$(ui.helper).attr("id");if(ids===undefined){ids=$(this).attr("id")}$(that.element).grid("delRowData",ids)}for(var i=0;i<$.data(that.element,"dnd").connectWith.length;i++){$($.data(that.element,"dnd").connectWith[i]).grid("delRowData","jqg_empty_row")}if(opts.onstop&&$.isFunction(opts.onstop)){opts.onstop.call($($t),ev,ui)}}},opts.drag_opts||{})},drop:function(opts){return $.extend({accept:function(d){if(!$(d).hasClass("jqgrow")){return d}var tid=$(d).closest("table.coral-grid-btable");if(tid.length>0&&$.data(that.element,"dnd")!==undefined){var cn=$.data(that.element,"dnd").connectWith;return $.inArray("#"+$.grid.coralID(this.id),cn)!=-1?true:false}return false},drop:function(ev,ui){if(!$(ui.draggable).hasClass("jqgrow")){return}var accept=$(ui.draggable).attr("id");var getdata=ui.draggable.parents(".coral-grid").grid("getRowData",accept);if(!opts.dropbyname){var j=0,tmpdata={},nm;var dropmodel=$("#"+$.grid.coralID(this.id)).grid("option","colModel");try{for(var key in getdata){if(getdata.hasOwnProperty(key)){nm=dropmodel[j].name;
if(!(nm=="cb"||nm=="rn"||nm=="subgrid")){if(getdata.hasOwnProperty(key)&&dropmodel[j]){tmpdata[nm]=getdata[key]}}else{j++}j++}}getdata=tmpdata}catch(e){}}ui.helper.dropped=true;if(opts.beforedrop&&$.isFunction(opts.beforedrop)){var datatoinsert=opts.beforedrop.call(this,ev,ui,getdata,$("#"+$.grid.coralID(that.options.id)),$(this));if(typeof datatoinsert!="undefined"&&datatoinsert!==null&&typeof datatoinsert=="object"){getdata=datatoinsert}}if(ui.helper.dropped){var grid;if(opts.autoid){if($.isFunction(opts.autoid)){grid=opts.autoid.call(this,getdata)}else{grid=Math.ceil(Math.random()*1000);grid=opts.autoidprefix+grid}}$("#"+$.grid.coralID(this.id)).grid("addRowData",grid,getdata,opts.droppos)}if(opts.ondrop&&$.isFunction(opts.ondrop)){opts.ondrop.call(this,ev,ui,getdata)}}},opts.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"coral-state-active",hoverClass:"coral-state-hover"},drag_opts:{revert:"invalid",helper:"clone",connectToSortable:connectToSortableOpts,cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5000},dragcopy:false,dropbyname:false,droppos:"first",autoid:true,autoidprefix:"dnd_"},opts||{});$.data(that.element,"dnd",opts);if(that.options.reccount!="0"&&!that.options.jqgdnd){updateDnD()}that.options.jqgdnd=true;for(var i=0;i<opts.connectWith.length;i++){var cn=opts.connectWith[i];$(cn).droppable($.isFunction(opts.drop)?opts.drop.call($(that),opts):opts.drop)}},getInd:function(rowid,rc){var ret=false,rw;rw=this.rows.namedItem(rowid);if(rw){ret=rc===true?rw:rw.rowIndex}return ret}});$.extend($.grid,{htmlDecode:function(value){if(value&&(value=="&nbsp;"||value=="&#160;"||(value.length===1&&value.charCodeAt(0)===160))){return""}return !value?value:String(value).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/\'/g,"&acute;")},htmlEncode:function(value){return !value?value:String(value).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&acute;")
},format:function(format){var args=$.makeArray(arguments).slice(1);if(format===undefined){format=""}return format.replace(/\{(\d+)\}/g,function(m,i){return args[i]})},getCellIndex:function(cell){var c=$(cell);if(c.is("tr")){return -1}c=(!c.is("td")&&!c.is("th")?c.closest("td,th"):c)[0];return c.cellIndex},stripHtml:function(v){v=v+"";var regexp=/<("[^"]*"|'[^']*'|[^'">])*>/gi;if(v){v=v.replace(regexp,"");return(v&&v!=="&nbsp;"&&v!=="&#160;")?v.replace(/\"/g,"'"):""}else{return v}},stripPref:function(pref,id){var obj=$.type(pref);if(obj=="string"||obj=="number"){pref=String(pref);id=pref!==""?String(id).replace(String(pref),""):id}return id},stringToDoc:function(xmlString){var xmlDoc;if(typeof xmlString!=="string"){return xmlString}try{var parser=new DOMParser();xmlDoc=parser.parseFromString(xmlString,"text/xml")}catch(e){xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async=false;xmlDoc.loadXML(xmlString)}return(xmlDoc&&xmlDoc.documentElement&&xmlDoc.documentElement.tagName!="parsererror")?xmlDoc:null},parse:function(jsonString){var js=jsonString;if(js.substr(0,9)=="while(1);"){js=js.substr(9)}if(js.substr(0,2)=="/*"){js=js.substr(2,js.length-4)}if(!js){js="{}"}return($.grid.useJSON===true&&typeof(JSON)==="object"&&typeof(JSON.parse)==="function")?JSON.parse(js):eval("("+js+")")},parseDate:function(format,date){var tsp={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},k,hl,dM,regdate=/[\\\/:_;.,\t\T\s-]/;if(date&&date!==null&&date!==undefined){date=$.trim(date);date=date.split(regdate);if($.grid.formatter.date.masks[format]!==undefined){format=$.grid.formatter.date.masks[format]}format=format.split(regdate);var dfmt=$.grid.formatter.date.monthNames;var afmt=$.grid.formatter.date.AmPm;var h12to24=function(ampm,h){if(ampm===0){if(h===12){h=0}}else{if(h!==12){h+=12}}return h};for(k=0,hl=format.length;k<hl;k++){if(format[k]=="M"){dM=$.inArray(date[k],dfmt);if(dM!==-1&&dM<12){date[k]=dM+1;tsp.m=date[k]}}if(format[k]=="F"){dM=$.inArray(date[k],dfmt);if(dM!==-1&&dM>11){date[k]=dM+1-12;tsp.m=date[k]
}}if(format[k]=="a"){dM=$.inArray(date[k],afmt);if(dM!==-1&&dM<2&&date[k]==afmt[dM]){date[k]=dM;tsp.h=h12to24(date[k],tsp.h)}}if(format[k]=="A"){dM=$.inArray(date[k],afmt);if(dM!==-1&&dM>1&&date[k]==afmt[dM]){date[k]=dM-2;tsp.h=h12to24(date[k],tsp.h)}}if(date[k]!==undefined){tsp[format[k].toLowerCase()]=parseInt(date[k],10)}}tsp.m=parseInt(tsp.m,10)-1;var ty=tsp.y;if(ty>=70&&ty<=99){tsp.y=1900+tsp.y}else{if(ty>=0&&ty<=69){tsp.y=2000+tsp.y}}if(tsp.j!==undefined){tsp.d=tsp.j}if(tsp.n!==undefined){tsp.m=parseInt(tsp.n,10)-1}}return new Date(tsp.y,tsp.m,tsp.d,tsp.h,tsp.i,tsp.s,tsp.u)},coralID:function(sid){return String(sid).replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"coralg",randId:function(prefix){return(prefix?prefix:$.grid.uidPref)+($.grid.guid++)},getAccessor:function(obj,expr){var ret,p,prm=[],i;if(typeof expr==="function"){return expr(obj)}ret=obj[expr];if(ret===undefined){try{if(typeof expr==="string"){prm=expr.split(".")}i=prm.length;if(i){ret=obj;while(ret&&i--){p=prm.shift();ret=ret[p]}}}catch(e){}}return ret},ajaxOptions:{},from:function(source){var QueryObject=function(d,q){if(typeof(d)=="string"){d=$.data(d)}var self=this,_data=d,_usecase=true,_trim=false,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=false,_queuedOperator="",_sorting=[],_useProperties=true,_usePinyin=true;if(typeof(d)=="object"&&d.push){if(d.length>0){if(typeof(d[0])!="object"){_useProperties=false}else{_useProperties=true}}}else{throw"data provides is not an array"}this._hasData=function(){return _data===null?false:_data.length===0?false:true};this._getStr=function(s){var phrase=[];if(_trim){phrase.push("jQuery.trim(")}phrase.push("String("+s+")");if(_trim){phrase.push(")")}if(!_usecase){phrase.push(".toLowerCase()")}return phrase.join("")};this._strComp=function(val){if(typeof(val)=="string"){return".toString()"}else{return""}};this._group=function(f,u){return({field:f.toString(),unique:u,items:[]})};this._toStr=function(phrase){if(_trim){phrase=$.trim(phrase)
}phrase=phrase.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return _usecase?phrase:phrase.toLowerCase()};this._funcLoop=function(func){var results=[];$.each(_data,function(i,v){results.push(func(v))});return results};this._append=function(s){var i;if(_query===null){_query=""}else{_query+=_queuedOperator===""?" && ":_queuedOperator}for(i=0;i<_orDepth;i++){_query+="("}if(_negate){_query+="!"}_query+="("+s+")";_negate=false;_queuedOperator="";_orDepth=0};this._setCommand=function(f,c){_lastCommand=f;_lastField=c};this._resetNegate=function(){_negate=false};this._repeatCommand=function(f,v){if(_lastCommand===null){return self}if(f!==null&&v!==null){return _lastCommand(f,v)}if(_lastField===null){return _lastCommand(f)}if(!_useProperties){return _lastCommand(f)}return _lastCommand(_lastField,f)};this._equals=function(a,b){return(self._compare(a,b,1)===0)};this._compare=function(a,b,d){var toString=Object.prototype.toString;if(d===undefined){d=1}if(a===undefined){a=null}if(b===undefined){b=null}if(a===null&&b===null){return 0}if(a===null&&b!==null){return 1}if(a!==null&&b===null){return -1}if(toString.call(a)==="[object Date]"&&toString.call(b)==="[object Date]"){if(a<b){return -d}if(a>b){return d}return 0}if(!_usecase&&typeof(a)!=="number"&&typeof(b)!=="number"){a=String(a).toLowerCase();b=String(b).toLowerCase()}if(a<b){return -d}if(a>b){return d}return 0};this._performSort=function(){if(_sorting.length===0){return}_data=self._doSort(_data,0)};this._doSort=function(d,q){var by=_sorting[q].by,dir=_sorting[q].dir,type=_sorting[q].type,dfmt=_sorting[q].datefmt;if(q==_sorting.length-1){return self._getOrder(d,by,dir,type,dfmt)}q++;var values=self._getGroup(d,by,dir,type,dfmt);var results=[];for(var i=0;i<values.length;i++){var sorted=self._doSort(values[i].items,q);for(var j=0;j<sorted.length;j++){results.push(sorted[j])}}return results};this._getOrder=function(data,by,dir,type,dfmt){var sortData=[],_sortData=[],newDir=dir=="a"?1:-1,i,ab,j,findSortKey;if(type===undefined){type="text"
}if(type=="float"||type=="number"||type=="currency"||type=="numeric"){findSortKey=function($cell){var key=parseFloat(String($cell).replace(_stripNum,""));return isNaN(key)?0:key}}else{if(type=="int"||type=="integer"){findSortKey=function($cell){return $cell?parseFloat(String($cell).replace(_stripNum,"")):0}}else{if(type=="date"||type=="datetime"){findSortKey=function($cell){return $.grid.parseDate(dfmt,$cell).getTime()}}else{if($.isFunction(type)){findSortKey=type}else{findSortKey=function($cell){if(!$cell){$cell=""}return $.trim(String($cell).toUpperCase())}}}}}$.each(data,function(i,v){ab=by!==""?$.grid.getAccessor(v,by):v;if(ab===undefined){ab=""}ab=findSortKey(ab,v);_sortData.push({vSort:ab,index:i})});_sortData.sort(function(a,b){a=a.vSort;b=b.vSort;return self._compare(a,b,newDir)});j=0;var nrec=data.length;while(j<nrec){i=_sortData[j].index;sortData.push(data[i]);j++}return sortData};this._getGroup=function(data,by,dir,type,dfmt){var results=[],group=null,last=null,val;$.each(self._getOrder(data,by,dir,type,dfmt),function(i,v){val=$.grid.getAccessor(v,by);if(val===undefined){val=""}if(!self._equals(last,val)){last=val;if(group!==null){results.push(group)}group=self._group(by,val)}group.items.push(v)});if(group!==null){results.push(group)}return results};this.ignoreCase=function(){_usecase=false;return self};this.useCase=function(){_usecase=true;return self};this.trim=function(){_trim=true;return self};this.noTrim=function(){_trim=false;return self};this.execute=function(){var match=_query,results=[];if(match===null){return self}$.each(_data,function(){if(eval(match)){results.push(this)}});_data=results;return self};this.data=function(){return _data};this.select=function(f){self._performSort();if(!self._hasData()){return[]}self.execute();if($.isFunction(f)){var results=[];$.each(_data,function(i,v){results.push(f(v))});return results}return _data};this.hasMatch=function(){if(!self._hasData()){return false}self.execute();return _data.length>0};this.andNot=function(f,v,x){_negate=!_negate;
return self.and(f,v,x)};this.orNot=function(f,v,x){_negate=!_negate;return self.or(f,v,x)};this.not=function(f,v,x){return self.andNot(f,v,x)};this.and=function(f,v,x){_queuedOperator=" && ";if(f===undefined){return self}return self._repeatCommand(f,v,x)};this.or=function(f,v,x){_queuedOperator=" || ";if(f===undefined){return self}return self._repeatCommand(f,v,x)};this.orBegin=function(){_orDepth++;return self};this.orEnd=function(){if(_query!==null){_query+=")"}return self};this.isNot=function(f){_negate=!_negate;return self.is(f)};this.is=function(f){self._append("this."+f);self._resetNegate();return self};this._compareValues=function(func,f,v,how,t){var fld;if(_useProperties){fld="jQuery.grid.getAccessor(this,'"+f+"')"}else{fld="this"}if(v===undefined){v=null}var val=v,swst=t.stype===undefined?"text":t.stype;if(v!==null){switch(swst){case"int":case"integer":val=(isNaN(Number(val))||val==="")?"0":val;fld="parseInt("+fld+",10)";val="parseInt("+val+",10)";break;case"float":case"number":case"numeric":val=String(val).replace(_stripNum,"");val=(isNaN(Number(val))||val==="")?"0":val;fld="parseFloat("+fld+")";val="parseFloat("+val+")";break;case"date":case"datetime":val=String($.grid.parseDate(t.newfmt||"Y-m-d",val).getTime());fld='jQuery.grid.parseDate("'+t.srcfmt+'",'+fld+").getTime()";break;default:fld=self._getStr(fld);val=self._getStr('"'+self._toStr(val)+'"')}}self._append(fld+" "+how+" "+val+" || pinyinEngine.toPinyin("+fld+', false, "") '+how+" "+val);self._setCommand(func,f);self._resetNegate();return self};this.equals=function(f,v,t){return self._compareValues(self.equals,f,v,"==",t)};this.notEquals=function(f,v,t){return self._compareValues(self.equals,f,v,"!==",t)};this.isNull=function(f,v,t){return self._compareValues(self.equals,f,null,"===",t)};this.greater=function(f,v,t){return self._compareValues(self.greater,f,v,">",t)};this.less=function(f,v,t){return self._compareValues(self.less,f,v,"<",t)};this.greaterOrEquals=function(f,v,t){return self._compareValues(self.greaterOrEquals,f,v,">=",t)
};this.lessOrEquals=function(f,v,t){return self._compareValues(self.lessOrEquals,f,v,"<=",t)};this.startsWith=function(f,v){var val=(v===undefined||v===null)?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;if(_useProperties){self._append(self._getStr("jQuery.grid.getAccessor(this,'"+f+"')")+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(v)+'"'))}else{length=_trim?$.trim(v.toString()).length:v.toString().length;self._append(self._getStr("this")+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(f)+'"'))}self._setCommand(self.startsWith,f);self._resetNegate();return self};this.endsWith=function(f,v){var val=(v===undefined||v===null)?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;if(_useProperties){self._append(self._getStr("jQuery.grid.getAccessor(this,'"+f+"')")+".substr("+self._getStr("jQuery.grid.getAccessor(this,'"+f+"')")+".length-"+length+","+length+') == "'+self._toStr(v)+'"')}else{self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(f)+'".length,"'+self._toStr(f)+'".length) == "'+self._toStr(f)+'"')}self._setCommand(self.endsWith,f);self._resetNegate();return self};this.contains=function(f,v){if(_useProperties){if(_usePinyin){self._append(self._getStr("jQuery.grid.getAccessor(this,'"+f+"')")+'.indexOf("'+self._toStr(v)+'",0) > -1 || '+self._getStr("pinyinEngine.toPinyin(jQuery.grid.getAccessor(this,'"+f+'\'), false, "")')+'.indexOf("'+self._toStr(v)+'",0) > -1')}else{self._append(self._getStr("jQuery.grid.getAccessor(this,'"+f+"')")+'.indexOf("'+self._toStr(v)+'",0) > -1')}}else{if(_usePinyin){self._append(self._getStr("this")+'.indexOf("'+self._toStr(f)+'",0) > -1 || '+pinyinEngine.toPinyin(self._getStr("this"),false,"")+'.indexOf("'+self._toStr(v)+'",0) > -1')}else{self._append(self._getStr("this")+'.indexOf("'+self._toStr(f)+'",0) > -1')}}self._setCommand(self.contains,f);self._resetNegate();return self};this.groupBy=function(by,dir,type,datefmt){if(!self._hasData()){return null
}return self._getGroup(_data,by,dir,type,datefmt)};this.orderBy=function(by,dir,stype,dfmt){dir=dir===undefined||dir===null?"a":$.trim(dir.toString().toLowerCase());if(stype===null||stype===undefined){stype="text"}if(dfmt===null||dfmt===undefined){dfmt="Y-m-d"}if(dir=="desc"||dir=="descending"){dir="d"}if(dir=="asc"||dir=="ascending"){dir="a"}_sorting.push({by:by,dir:dir,type:stype,datefmt:dfmt});return self};return self};return new QueryObject(source,null)},getMethod:function(name){return this.getAccessor($.fn.grid,name)},extend:function(methods){$.extend($.fn.grid,methods);if(!this.no_legacy_api){$.fn.extend(methods)}}});grid=$.component("coral.grid",$.coral.grid,{setTreeNode:function(i,len){var that=this;if(!that.grid||!that.options.treeGrid){return}var expCol=that.options.expColInd,expanded=that.options.treeReader.expanded_field,isLeaf=that.options.treeReader.leaf_field,level=that.options.treeReader.level_field,icon=that.options.treeReader.icon_field,loaded=that.options.treeReader.loaded,lft,rgt,curLevel,ident,lftpos,twrap,ldat,lf;while(i<len){var ind=that.rows[i].id,dind=that.options._index[ind],expan;ldat=that.options.data[dind];if(that.options.treeGridModel=="nested"){if(!ldat[isLeaf]){lft=parseInt(ldat[that.options.treeReader.left_field],10);rgt=parseInt(ldat[that.options.treeReader.right_field],10);ldat[isLeaf]=(rgt===lft+1)?"true":"false";that.rows[i].cells[that.options._treeleafpos].innerHTML=ldat[isLeaf]}}curLevel=parseInt(ldat[level],10);if(that.options.tree_root_level===0){ident=curLevel+1;lftpos=curLevel}else{ident=curLevel;lftpos=curLevel-1}twrap="<div class='tree-wrap tree-wrap-"+that.options.direction+"' style='width:"+(ident*18)+"px;'>";twrap+="<div style='"+(that.options.direction=="rtl"?"right:":"left:")+(lftpos*18)+"px;' class=' ";if(ldat[loaded]!==undefined){if(ldat[loaded]=="true"||ldat[loaded]===true){ldat[loaded]=true}else{ldat[loaded]=false}}if(ldat[isLeaf]=="true"||ldat[isLeaf]===true){twrap+=((ldat[icon]!==undefined&&ldat[icon]!=="")?ldat[icon]:that.options.treeIcons.leaf)+" tree-leaf treeclick";
ldat[isLeaf]=true;lf="leaf"}else{ldat[isLeaf]=false;lf=""}ldat[expanded]=((ldat[expanded]=="true"||ldat[expanded]===true)?true:false)&&ldat[loaded];if(ldat[expanded]===false){twrap+=((ldat[isLeaf]===true)?"'":that.options.treeIcons.plus+" tree-plus treeclick'")}else{twrap+=((ldat[isLeaf]===true)?"'":that.options.treeIcons.minus+" tree-minus treeclick'")}twrap+="></div></div>";$(that.rows[i].cells[expCol]).wrapInner("<span class='cell-wrapper"+lf+"'></span>").prepend(twrap);if(curLevel!==parseInt(that.options.tree_root_level,10)){var pn=$(that.element).grid("getNodeParent",ldat);expan=pn&&pn.hasOwnProperty(expanded)?pn[expanded]:true;if(!expan){$(that.rows[i]).css("display","none")}}$(that.rows[i].cells[expCol]).find("div.treeclick").bind("click",function(e){var target=e.target||e.srcElement,ind2=$(target,that.rows).closest("tr.jqgrow")[0].id,pos=that.options._index[ind2];if(!that.options.data[pos][isLeaf]){if(that.options.data[pos][expanded]){$(that.element).grid("collapseRow",that.options.data[pos]);$(that.element).grid("collapseNode",that.options.data[pos])}else{$(that.element).grid("expandRow",that.options.data[pos]);$(that.element).grid("expandNode",that.options.data[pos])}}return false});if(that.options.ExpandColClick===true){$(that.rows[i].cells[expCol]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(e){var target=e.target||e.srcElement,ind2=$(target,that.rows).closest("tr.jqgrow")[0].id,pos=that.options._index[ind2];if(!that.options.data[pos][isLeaf]){if(that.options.data[pos][expanded]){$(that.element).grid("collapseRow",that.options.data[pos]);$(that.element).grid("collapseNode",that.options.data[pos])}else{$(that.element).grid("expandRow",that.options.data[pos]);$(that.element).grid("expandNode",that.options.data[pos])}}$(that.element).grid("setSelection",ind2);return false})}i++}},setTreeGrid:function(){var that=this,i=0,pico,ecol=false,nm,key,dupcols=[];if(!that.options.treeGrid){return}if(!that.options.treedatatype){$.extend(that.options,{treedatatype:that.options.datatype})
}that.options.subGrid=false;that.options.altRows=false;that.options.gridview=true;if(that.options.rowTotal===null){that.options.rowNum=10000}that.options.multiselect=false;that.options.rowList=[];that.options.expColInd=0;pico="coral-icon-triangle-1-"+(that.options.direction=="rtl"?"w":"e");that.options.treeIcons=$.extend({plus:"cui-icon-arrow-right3",minus:"cui-icon-arrow-down3",leaf:"cui-icon-file-empty2"},that.options.treeIcons||{});if(that.options.treeGridModel=="nested"){that.options.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},that.options.treeReader)}else{if(that.options.treeGridModel=="adjacency"){that.options.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},that.options.treeReader)}}for(key in that.options.colModel){if(that.options.colModel.hasOwnProperty(key)){nm=that.options.colModel[key].name;if(nm==that.options.ExpandColumn&&!ecol){ecol=true;that.options.expColInd=i}i++;for(var tkey in that.options.treeReader){if(that.options.treeReader[tkey]==nm){dupcols.push(nm)}}}}$.each(that.options.treeReader,function(j,n){if(n&&$.inArray(n,dupcols)===-1){if(j==="leaf_field"){that.options._treeleafpos=i}i++;that.options.colNames.push(n);that.options.colModel.push({name:n,width:1,hidden:true,sortable:false,resizable:false,hidedlg:true,editable:true,search:false})}})},expandRow:function(record){var that=this;if(!that.grid||!that.options.treeGrid){return}var childern=$(that.element).grid("getNodeChildren",record),expanded=that.options.treeReader.expanded_field,rows=that.rows;$(childern).each(function(){var id=$.grid.getAccessor(this,that.options.localReader.id);$(rows.namedItem(id)).css("display","");if(this[expanded]){$(that.element).grid("expandRow",this)}})},collapseRow:function(record){var that=this;if(!that.grid||!that.options.treeGrid){return}var childern=$(that.element).grid("getNodeChildren",record),expanded=that.options.treeReader.expanded_field,rows=that.rows;
$(childern).each(function(){var id=$.grid.getAccessor(this,that.options.localReader.id);$(rows.namedItem(id)).css("display","none");if(this[expanded]){$(that.element).grid("collapseRow",this)}})},getRootNodes:function(){var result=[];var that=this;if(!that.grid||!that.options.treeGrid){return}switch(that.options.treeGridModel){case"nested":var level=that.options.treeReader.level_field;$(that.options.data).each(function(){if(parseInt(this[level],10)===parseInt(that.options.tree_root_level,10)){result.push(this)}});break;case"adjacency":var parent_id=that.options.treeReader.parent_id_field;$(that.options.data).each(function(){if(this[parent_id]===null||String(this[parent_id]).toLowerCase()=="null"){result.push(this)}});break}return result},getNodeDepth:function(rc){var ret=null;this.each(function(){if(!this.grid||!this.options.treeGrid){return}var $t=this;switch(that.options.treeGridModel){case"nested":var level=that.options.treeReader.level_field;ret=parseInt(rc[level],10)-parseInt(that.options.tree_root_level,10);break;case"adjacency":ret=$($t).grid("getNodeAncestors",rc).length;break}});return ret},getNodeParent:function(rc){var result=null;var that=this;if(!that.grid||!that.options.treeGrid){return}switch(that.options.treeGridModel){case"nested":var lftc=that.options.treeReader.left_field,rgtc=that.options.treeReader.right_field,levelc=that.options.treeReader.level_field,lft=parseInt(rc[lftc],10),rgt=parseInt(rc[rgtc],10),level=parseInt(rc[levelc],10);$(that.options.data).each(function(){if(parseInt(this[levelc],10)===level-1&&parseInt(this[lftc],10)<lft&&parseInt(this[rgtc],10)>rgt){result=this;return false}});break;case"adjacency":var parent_id=that.options.treeReader.parent_id_field,dtid=that.options.localReader.id;$(that.options.data).each(function(){if(this[dtid]==rc[parent_id]){result=this;return false}});break}return result},getNodeChildren:function(rc){var result=[];var that=this;if(!that.grid||!that.options.treeGrid){return}switch(that.options.treeGridModel){case"nested":var lftc=that.options.treeReader.left_field,rgtc=that.options.treeReader.right_field,levelc=that.options.treeReader.level_field,lft=parseInt(rc[lftc],10),rgt=parseInt(rc[rgtc],10),level=parseInt(rc[levelc],10);
$(this.options.data).each(function(){if(parseInt(this[levelc],10)===level+1&&parseInt(this[lftc],10)>lft&&parseInt(this[rgtc],10)<rgt){result.push(this)}});break;case"adjacency":var parent_id=that.options.treeReader.parent_id_field,dtid=that.options.localReader.id;$(this.options.data).each(function(){if(this[parent_id]==rc[dtid]){result.push(this)}});break}return result},getFullTreeNode:function(rc){var result=[];this.each(function(){var $t=this,len;if(!$t.grid||!that.options.treeGrid){return}switch(that.options.treeGridModel){case"nested":var lftc=that.options.treeReader.left_field,rgtc=that.options.treeReader.right_field,levelc=that.options.treeReader.level_field,lft=parseInt(rc[lftc],10),rgt=parseInt(rc[rgtc],10),level=parseInt(rc[levelc],10);$(this.options.data).each(function(){if(parseInt(this[levelc],10)>=level&&parseInt(this[lftc],10)>=lft&&parseInt(this[lftc],10)<=rgt){result.push(this)}});break;case"adjacency":if(rc){result.push(rc);var parent_id=that.options.treeReader.parent_id_field,dtid=that.options.localReader.id;$(this.options.data).each(function(i){len=result.length;for(i=0;i<len;i++){if(result[i][dtid]==this[parent_id]){result.push(this);break}}})}break}});return result},getNodeAncestors:function(rc){var ancestors=[];this.each(function(){if(!this.grid||!this.options.treeGrid){return}var parent=$(this).grid("getNodeParent",rc);while(parent){ancestors.push(parent);parent=$(this).grid("getNodeParent",parent)}});return ancestors},isVisibleNode:function(rc){var result=true;this.each(function(){var $t=this;if(!$t.grid||!that.options.treeGrid){return}var ancestors=$($t).grid("getNodeAncestors",rc),expanded=that.options.treeReader.expanded_field;$(ancestors).each(function(){result=result&&this[expanded];if(!result){return false}})});return result},isNodeLoaded:function(rc){var result;var that=this;if(!that.grid||!that.options.treeGrid){return}var isLeaf=that.options.treeReader.leaf_field;if(rc!==undefined){if(rc.loaded!==undefined){result=rc.loaded}else{if(rc[isLeaf]||$(that.element).grid("getNodeChildren",rc).length>0){result=true
}else{result=false}}}else{result=false}return result},expandNode:function(rc){if(!this.grid||!this.options.treeGrid){return}var expanded=this.options.treeReader.expanded_field,parent=this.options.treeReader.parent_id_field,loaded=this.options.treeReader.loaded,level=this.options.treeReader.level_field,lft=this.options.treeReader.left_field,rgt=this.options.treeReader.right_field;if(!rc[expanded]){var id=$.grid.getAccessor(rc,this.options.localReader.id);var rc1=$("#"+$.grid.coralID(id),this.grid.rowsView)[0];var position=this.options._index[id];if($(this.element).grid("isNodeLoaded",this.options.data[position])){rc[expanded]=true;$("div.treeclick",rc1).removeClass(this.options.treeIcons.plus+" tree-plus").addClass(this.options.treeIcons.minus+" tree-minus")}else{if(!this.grid.columnsView.loading){rc[expanded]=true;$("div.treeclick",rc1).removeClass(this.options.treeIcons.plus+" tree-plus").addClass(this.options.treeIcons.minus+" tree-minus");this.options.treeANode=rc1.rowIndex;this.options.datatype=this.options.treedatatype;if(this.options.treeGridModel=="nested"){$(this.element).grid("option",{postData:{nodeid:id,n_left:rc[lft],n_right:rc[rgt],n_level:rc[level]}})}else{$(this.element).grid("option",{postData:{nodeid:id,parentid:rc[parent],n_level:rc[level]}})}$(this.element).grid("reload");rc[loaded]=true;if(this.options.treeGridModel=="nested"){$(this.element).grid("option",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}})}else{$(this.element).grid("option",{postData:{nodeid:"",parentid:"",n_level:""}})}}}}},collapseNode:function(rc){if(!this.grid||!this.options.treeGrid){return}var expanded=this.options.treeReader.expanded_field;if(rc[expanded]){rc[expanded]=false;var id=$.grid.getAccessor(rc,this.options.localReader.id);var rc1=$("#"+$.grid.coralID(id),this.grid.rowsView)[0];$("div.treeclick",rc1).removeClass(this.options.treeIcons.minus+" tree-minus").addClass(this.options.treeIcons.plus+" tree-plus")}},sortTree:function(sortname,newDir,st,datefmt){if(!this.grid||!this.options.treeGrid){return
}var i,len,rec,records=[],that=this,query,roots,rt=$(that.element).grid("getRootNodes");query=$.grid.from(rt);query.orderBy(sortname,newDir,st,datefmt);roots=query.select();for(i=0,len=roots.length;i<len;i++){rec=roots[i];records.push(rec);$(that.element).grid("collectChildrenSortTree",records,rec,sortname,newDir,st,datefmt)}$.each(records,function(index){var id=$.grid.getAccessor(this,that.options.localReader.id);$("#"+$.grid.coralID(that.options.id)+" tbody tr:eq("+index+")").after($("tr#"+$.grid.coralID(id),that.grid.rowsView))});query=null;roots=null;records=null},collectChildrenSortTree:function(records,rec,sortname,newDir,st,datefmt){if(!this.grid||!this.options.treeGrid){return}var i,len,child,ch,query,children;ch=$(this.element).grid("getNodeChildren",rec);query=$.grid.from(ch);query.orderBy(sortname,newDir,st,datefmt);children=query.select();for(i=0,len=children.length;i<len;i++){child=children[i];records.push(child);$(this.element).grid("collectChildrenSortTree",records,child,sortname,newDir,st,datefmt)}},setTreeRow:function(rowid,data){var success=false;this.each(function(){var t=this;if(!t.grid||!t.options.treeGrid){return}success=$(t).grid("setRowData",rowid,data)});return success},delTreeNode:function(rowid){return this.each(function(){var $t=this,rid=that.options.localReader.id,left=that.options.treeReader.left_field,right=that.options.treeReader.right_field,myright,width,res,key;if(!$t.grid||!that.options.treeGrid){return}var rc=that.options._index[rowid];if(rc!==undefined){myright=parseInt(that.options.data[rc][right],10);width=myright-parseInt(that.options.data[rc][left],10)+1;var dr=$($t).grid("getFullTreeNode",that.options.data[rc]);if(dr.length>0){for(var i=0;i<dr.length;i++){$($t).grid("delRowData",dr[i][rid])}}if(that.options.treeGridModel==="nested"){res=$.grid.from(that.options.data).greater(left,myright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][left]=parseInt(res[key][left],10)-width}}}res=$.grid.from(that.options.data).greater(right,myright,{stype:"integer"}).select();
if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][right]=parseInt(res[key][right],10)-width}}}}}})},addChildNode:function(nodeid,parentid,data){var $t=this[0];if(data){var expanded=that.options.treeReader.expanded_field,isLeaf=that.options.treeReader.leaf_field,level=that.options.treeReader.level_field,parent=that.options.treeReader.parent_id_field,left=that.options.treeReader.left_field,right=that.options.treeReader.right_field,loaded=that.options.treeReader.loaded,method,parentindex,parentdata,parentlevel,i,len,max=0,rowind=parentid,leaf,maxright;if(typeof nodeid==="undefined"||nodeid===null){i=that.options.data.length-1;if(i>=0){while(i>=0){max=Math.max(max,parseInt(that.options.data[i][that.options.localReader.id],10));i--}}nodeid=max+1}var prow=$($t).grid("getInd",parentid);leaf=false;if(parentid===undefined||parentid===null||parentid===""){parentid=null;rowind=null;method="last";parentlevel=that.options.tree_root_level;i=that.options.data.length+1}else{method="after";parentindex=that.options._index[parentid];parentdata=that.options.data[parentindex];parentid=parentdata[that.options.localReader.id];parentlevel=parseInt(parentdata[level],10)+1;var childs=$($t).grid("getFullTreeNode",parentdata);if(childs.length){i=childs[childs.length-1][that.options.localReader.id];rowind=i;i=$($t).grid("getInd",rowind)+1}else{i=$($t).grid("getInd",parentid)+1}if(parentdata[isLeaf]){leaf=true;parentdata[expanded]=true;$($t.rows[prow]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(that.options.treeIcons.leaf+" tree-leaf").addClass(that.options.treeIcons.minus+" tree-minus");that.options.data[parentindex][isLeaf]=false;parentdata[loaded]=true}}len=i+1;data[expanded]=false;data[loaded]=true;data[level]=parentlevel;data[isLeaf]=true;if(that.options.treeGridModel==="adjacency"){data[parent]=parentid}if(that.options.treeGridModel==="nested"){var query,res,key;if(parentid!==null){maxright=parseInt(parentdata[right],10);
query=$.grid.from(that.options.data);query=query.greaterOrEquals(right,maxright,{stype:"integer"});res=query.select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][left]=res[key][left]>maxright?parseInt(res[key][left],10)+2:res[key][left];res[key][right]=res[key][right]>=maxright?parseInt(res[key][right],10)+2:res[key][right]}}}data[left]=maxright;data[right]=maxright+1}else{maxright=parseInt($($t).grid("getCol",right,false,"max"),10);res=$.grid.from(that.options.data).greater(left,maxright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][left]=parseInt(res[key][left],10)+2}}}res=$.grid.from(that.options.data).greater(right,maxright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][right]=parseInt(res[key][right],10)+2}}}data[left]=maxright+1;data[right]=maxright+2}}if(parentid===null||$($t).grid("isNodeLoaded",parentdata)||leaf){$($t).grid("addRowData",nodeid,data,method,rowind);$($t).grid("setTreeNode",i,len)}if(parentdata&&!parentdata[expanded]){$($t.rows[prow]).find("div.treeclick").click()}}},refreshDescription:function(html){if(this.options.toolbarOptions){if(this.options.description){$(".pager-description",this.element).html(html)}}},hideGridHeader:function(){this.element.find(".coral-grid-columns").hide()},showGridHeader:function(){this.element.find(".coral-grid-columns").show()},valid:function(rowid,colname){var res={},resall,getall=false,len,j=0;var that=this,nm,editable,ind;that.errorResults=[];var state;if(typeof(rowid)=="undefined"||!rowid){getall=true;resall=[];len=that.rows.length}else{ind=that.rows.namedItem(rowid);if(!ind){return res}len=2}while(j<len){if(getall){ind=that.rows[j]}if($(ind).hasClass("jqgrow")){$('td[role="gridcell"]',ind).each(function(i){nm=that.options.colModel[i].name;editable=that.options.colModel[i].editable;if(!colname||(colname&&nm==colname)){if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"){if(that.options.treeGrid===true&&nm==that.options.ExpandColumn){res[nm]=$.grid.htmlDecode($("span:first",this).html())
}else{try{var sRowArr=$.grep(that.options.savedRow,function(sRow){return sRow.id==ind.id||that.rows[sRow.id].id==ind.id});if(that.options.savedRow.length&&sRowArr.length&&editable){state="edittype"}else{state=null}res[nm]=$.unformat.call(that,this,{rowId:ind.id,colModel:that.options.colModel[i]},i,"get",state)}catch(e){res[nm]=$.grid.htmlDecode($(this).html())}}var validateopitons=$.extend(that.options.colModel[i].formatoptions||{},that.options.colModel[i].editoptions||{});var event=$.Event();event.target=this;var data={validoptions:validateopitons,notComponent:!(state=="edittype"),showRequiredMark:$.noop,hasTips:false,component:(state=="edittype")?that.getCellComponent(ind.id,nm):$(this),element:$(this).find(".ctrl-init").length>0?$(this).find(".ctrl-init"):$(this),value:res[nm]};var error=$.validate.validateField(event,data);if(error.length){if(that.options.allowSaveOnError){$(this).addClass("coral-gridcell-error").attr("data-errors",error)}else{$(this).addClass("coral-gridcell-error")}that.errorResults.push({rowId:ind.id,rowIndex:j,cellIndex:i,errors:error})}else{$(this).removeClass("coral-gridcell-error").removeAttr("data-errors")}}}});if(getall){resall.push(res);res={}}}j++}this.options.isValid=!(this.errorResults.length>0);return this.options.isValid},clearErrors:function(rowid,colname){var res={},resall,getall=false,len,j=0;var that=this,nm,editable,ind;this.errorResults=this.errorResults||[];if(typeof(rowid)=="undefined"||!rowid){getall=true;resall=[];len=that.rows.length;that.errorResults=[]}else{ind=that.rows.namedItem(rowid);if(!ind){return res}len=2;var k=that.errorResults.length;for(k;k>0;k--){if(that.errorResults[k-1].rowId==ind.id){that.errorResults.splice(k-1,1)}}}while(j<len){if(getall){ind=that.rows[j]}if($(ind).hasClass("jqgrow")){$('td[role="gridcell"]',ind).each(function(i){$(this).removeClass("coral-gridcell-error coral-validate-error").removeAttr("data-errors")})}j++}this.options.isValid=!(this.errorResults.length>0)},getCellErrors:function(){return that.errorResults
},resizeFrozen:function(){var top=this.options.caption?$(this.grid.cDiv).outerHeight():0,hth=$(".coral-grid-htable","#"+$.grid.coralID(this.options.id)).outerHeight();if(this.options.toppager){top=top+$($t.grid.topDiv).outerHeight()}if(this.options.toolbar[0]===true){if(this.options.toolbar[1]!="bottom"){top=top+$(this.grid.uDiv).outerHeight()}}if(this.grid.fhDiv){var columsHeight=$("th",this.grid.columnsView).height();$(this.grid.fhDiv).css({top:top});$("th",this.grid.fhDiv).each(function(){$(this).height(columsHeight)});$(this.grid.fbDiv).css({top:(parseInt(top,10)+parseInt(hth,10))});$(this.grid.fbDiv).height($(this.grid.rowsView).height()-this.getScrollBarWidth()+2)}if(this.grid.rightfhDiv){var columsHeight=$("th",this.grid.columnsView).height();$("th",this.grid.rightfhDiv).each(function(){$(this).height(columsHeight)});$(this.grid.rightfhDiv).css({top:top});$(this.grid.rightfbDiv).css({top:(parseInt(top,10)+parseInt(hth,10))});$(this.grid.rightfbDiv).height($(this.grid.rowsView).height()-this.getScrollBarWidth()+2)}},setFrozenColumns:function(){if(!this.grid){return}var $t=this,cm=$t.options.colModel,i=0,len=cm.length,j=len-1,rightmaxfrozen=-1,maxfrozen=-1,frozen=false;if($t.options.subGrid===true||$t.options.treeGrid===true||$t.options.cellEdit===true||$t.options.sortable||$t.options.scroll||$t.options.grouping){return}if($t.options.rownumbers){i++}if($t.options.multiselect||$t.options.singleselect){i++}while(i<len){if(cm[i].frozen===true){frozen=true;maxfrozen=i}else{break}i++}while(j>0){if(cm[j].frozen===true){frozen=true;rightmaxfrozen=j}else{break}j--}if(rightmaxfrozen>0){maxfrozen=-1}if(frozen){var top=$t.options.caption?$($t.grid.cDiv).outerHeight():0,hth=$(".coral-grid-htable","#"+$.grid.coralID($t.options.id)).outerHeight();if($t.options.toppager){top=top+$($t.grid.topDiv).outerHeight()}if($t.options.toolbar[0]===true){if($t.options.toolbar[1]!="bottom"){top=top+$($t.grid.uDiv).outerHeight()}}if(maxfrozen>=0){$t.grid.fhDiv=$('<div style="position:absolute;left:0px;top:'+top+'px;" class="frozen-div coral-state-default coral-grid-columns coral-grid-columns-view"></div>');
$t.grid.fbDiv=$('<div style="position:absolute;left:0px;top:'+(parseInt(top,10)+parseInt(hth,10))+'px;overflow-y:hidden" class="frozen-bdiv coral-grid-rows coral-grid-rows-view"></div>');$("#"+$.grid.coralID($t.options.id)).append($t.grid.fhDiv)}if(rightmaxfrozen>=0){$t.grid.rightfhDiv=$('<div style="position:absolute;right:0;top:'+top+'px;" class="frozen-div coral-state-default coral-grid-columns coral-grid-columns-view"></div>');$t.grid.rightfbDiv=$('<div style="position:absolute;right:0;top:'+(parseInt(top,10)+parseInt(hth,10))+'px;overflow-y:hidden" class="frozen-bdiv coral-grid-rows coral-grid-rows-view"></div>');$("#"+$.grid.coralID($t.options.id)).append($t.grid.rightfhDiv)}var htbl=$(".coral-grid-htable","#"+$.grid.coralID($t.options.id)).clone(true);var righthtbl=$(".coral-grid-htable","#"+$.grid.coralID($t.options.id)).clone(true);$t.rightFrozenWidth=0;if($t.options.groupHeader){if(maxfrozen>=0){$("tr.jqg-first-row-header, tr.jqg-third-row-header",htbl).each(function(){$("th:gt("+maxfrozen+")",this).remove()})}if(rightmaxfrozen>=0){$("tr.jqg-first-row-header, tr.jqg-third-row-header",righthtbl).each(function(){$("th:lt("+rightmaxfrozen+")",this).remove()})}var swapfroz=-1,fdel=-1;$("tr.jqg-second-row-header th",htbl).each(function(){var cs=parseInt($(this).attr("colspan"),10);if(cs){swapfroz=swapfroz+cs;fdel++}if(swapfroz===maxfrozen){return false}});if(swapfroz!==maxfrozen){fdel=maxfrozen}$("tr.jqg-second-row-header",htbl).each(function(){$("th:gt("+fdel+")",this).remove()})}else{if(maxfrozen>=0){$("tr",htbl).each(function(){$("th:gt("+maxfrozen+")",this).remove()})}if(rightmaxfrozen>=0){$("tr",righthtbl).each(function(){$("th:lt("+rightmaxfrozen+")",this).remove();var scrollWidth=$t.getScrollBarWidth()-2;$(this).append("<th style='width:"+scrollWidth+"px;' class='coral-state-default'>&nbsp;</th>")})}}$(htbl).width(1);$(righthtbl).width(1);if(maxfrozen>=0){$($t.grid.fhDiv).append(htbl).mousemove(function(e){if($t.grid.resizing){$t.grid.dragMove(e);return false
}})}if(rightmaxfrozen>=0){$($t.grid.rightfhDiv).append(righthtbl).mousemove(function(e){if($t.grid.resizing){$t.grid.dragMove(e);return false}})}$($t.element).bind("gridonresizestop.setFrozenColumns",function(e,ui){var index=ui.index,w=ui.newWidth;if(maxfrozen>=0){var rhth=$(".coral-grid-htable",$t.grid.fhDiv);$("th:eq("+index+")",rhth).width(w);var btd=$(".coral-grid-btable",$t.grid.fbDiv);$("tr:first td:eq("+index+")",btd).width(w)}if(rightmaxfrozen>=0){var rhth=$(".coral-grid-htable",$t.grid.rightfhDiv);$("th:eq("+(len-index-1)+")",rhth).width(w);var btd=$(".coral-grid-btable",$t.grid.rightfbDiv);$("tr:first td:eq("+(len-index-1)+")",btd).width(w);$t.resetFrozen()}});$($t.element).bind("gridonsortcol.setFrozenColumns",function(event,ui){var index=ui.id,idxcol=ui.colIndex;if(maxfrozen>=0){var previousSelectedTh=$("tr.coral-grid-labels:last th:eq("+$t.options.lastsort+")",$t.grid.fhDiv),newSelectedTh=$("tr.coral-grid-labels:last th:eq("+idxcol+")",$t.grid.fhDiv);$("span.coral-grid-ico-sort",previousSelectedTh).addClass("coral-state-disabled");$(previousSelectedTh).attr("aria-selected","false");$("span.coral-icon-"+$t.options.sortorder,newSelectedTh).removeClass("coral-state-disabled");$(newSelectedTh).attr("aria-selected","true");if(!$t.options.viewsortcols[0]){if($t.options.lastsort!=idxcol){$("span.s-ico",previousSelectedTh).hide();$("span.s-ico",newSelectedTh).show()}}}if(rightmaxfrozen>=0){idxcol=$t.grid.headers.length-idxcol-1;var previousSelectedTh=$("tr.coral-grid-labels:last th:eq("+$t.options.lastsort+")",$t.grid.rightfhDiv),newSelectedTh=$("tr.coral-grid-labels:last th:eq("+idxcol+")",$t.grid.rightfhDiv);$("span.coral-grid-ico-sort",previousSelectedTh).addClass("coral-state-disabled");$(previousSelectedTh).attr("aria-selected","false");$("span.coral-icon-"+$t.options.sortorder,newSelectedTh).removeClass("coral-state-disabled");$(newSelectedTh).attr("aria-selected","true");if(!$t.options.viewsortcols[0]){if($t.options.lastsort!=idxcol){$("span.s-ico",previousSelectedTh).hide();
$("span.s-ico",newSelectedTh).show()}}}});if(maxfrozen>=0){$("#"+$.grid.coralID($t.options.id)).append($t.grid.fbDiv)}if(rightmaxfrozen>=0){$("#"+$.grid.coralID($t.options.id)).append($t.grid.rightfbDiv)}jQuery($t.grid.rowsView).scroll(function(){if(maxfrozen>=0){jQuery($t.grid.fbDiv).scrollTop(jQuery(this).scrollTop())}if(rightmaxfrozen>=0){jQuery($t.grid.rightfbDiv).scrollTop(jQuery(this).scrollTop())}});var tlength=0,bscrolltop=0,ascrolltop=0;if(maxfrozen>=0){$($t.grid.fbDiv).mousewheel(function(event,delta){var length=-(event.deltaY*event.deltaFactor);bscrolltop=$($t.grid.rowsView).scrollTop();tlength=bscrolltop;tlength=tlength+length;$($t.grid.rowsView).scrollTop(tlength);ascrolltop=$($t.grid.rowsView).scrollTop();if(ascrolltop==bscrolltop){tlength=tlength-length}else{event.preventDefault()}})}if(rightmaxfrozen>=0){$($t.grid.rightfbDiv).mousewheel(function(event,delta){var length=-(event.deltaY*event.deltaFactor);bscrolltop=$($t.grid.rowsView).scrollTop();tlength=bscrolltop;tlength=tlength+length;$($t.grid.rowsView).scrollTop(tlength);ascrolltop=$($t.grid.rowsView).scrollTop();if(ascrolltop==bscrolltop){tlength=tlength-length}else{event.preventDefault()}})}if($t.options.hoverrows===true){$("#"+$.grid.coralID($t.options.id)).unbind("mouseover").unbind("mouseout")}$($t.element).bind("gridaftercomplete.setFrozenColumns",function(){$("#"+$.grid.coralID($t.options.id)+"_frozen").remove();var btbl,rightbtbl;if(maxfrozen>=0){btbl=$("#"+$.grid.coralID($t.options.id)+"_table").clone(true);jQuery($t.grid.fbDiv).height(jQuery($t.grid.rowsView).height()-$t.getScrollBarWidth()+2);$("tr",btbl).each(function(){$("td:gt("+maxfrozen+")",this).remove();!$t.options.singleselect||$("td:eq(0)>input",this).attr("name",$("td:eq(0)>input",this).attr("name")+"_forzen")});$(btbl).width(1).attr("id",$t.options.id+"_frozen");$($t.grid.fbDiv).append(btbl);if($t.options.hoverrows===true){$("tr.jqgrow",btbl).hover(function(){$(this).addClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)).addClass("coral-state-hover")
},function(){$(this).removeClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)).removeClass("coral-state-hover")});$("tr.jqgrow","#"+$.grid.coralID($t.options.id)).hover(function(){$(this).addClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)+"_frozen").addClass("coral-state-hover")},function(){$(this).removeClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)+"_frozen").removeClass("coral-state-hover")})}btbl=null}if(rightmaxfrozen>=0){if(($($t.grid.rowsView)[0].scrollHeight-$($t.grid.rowsView)[0].clientHeight)>0){$t.grid.rightfbDiv.css({right:($t.getScrollBarWidth()-2)+"px"})}rightbtbl=$("#"+$.grid.coralID($t.options.id)+"_table").clone(true);jQuery($t.grid.rightfbDiv).height(jQuery($t.grid.rowsView).height()-$t.getScrollBarWidth()+2);$("tr",rightbtbl).each(function(){$("td:lt("+rightmaxfrozen+")",this).remove();!$t.options.singleselect||$("td:eq(0)>input",this).attr("name",$("td:eq(0)>input",this).attr("name")+"_forzen")});$(rightbtbl).width(1).attr("id",$t.options.id+"_frozen");$($t.grid.rightfbDiv).append(rightbtbl);if($t.options.hoverrows===true){$("tr.jqgrow",rightbtbl).hover(function(){$(this).addClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)).addClass("coral-state-hover")},function(){$(this).removeClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)).removeClass("coral-state-hover")});$("tr.jqgrow","#"+$.grid.coralID($t.options.id)).hover(function(){$(this).addClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)+"_frozen").addClass("coral-state-hover")},function(){$(this).removeClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)+"_frozen").removeClass("coral-state-hover")})}rightbtbl=null}});$t.options.frozenColumns=true}},destroyFrozenColumns:function(){if(!this.grid){return}if(this.options.frozenColumns===true){var $t=this;
$($t.grid.fhDiv).remove();$($t.grid.fbDiv).remove();$($t.grid.rightfhDiv).remove();$($t.grid.rightfbDiv).remove();$t.grid.fhDiv=null;$t.grid.fbDiv=null;$t.grid.rightfhDiv=null;$t.grid.rightfbDiv=null;$(this.element).unbind(".setFrozenColumns");if($t.options.hoverrows===true){var ptr;$("#"+$.grid.coralID($t.options.id)).bind("mouseover",function(e){ptr=$(e.target).closest("tr.jqgrow");if($(ptr).attr("class")!=="coral-subgrid"){$(ptr).addClass("coral-state-hover")}}).bind("mouseout",function(e){ptr=$(e.target).closest("tr.jqgrow");$(ptr).removeClass("coral-state-hover")})}this.options.frozenColumns=false}}});$.extend($.grid,{template:function(format){var args=$.makeArray(arguments).slice(1),j,al=args.length;if(format==null){format=""}return format.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(m,i){if(!isNaN(parseInt(i,10))){return args[parseInt(i,10)]}for(j=0;j<al;j++){if($.isArray(args[j])){var nmarr=args[j],k=nmarr.length;while(k--){if(i===nmarr[k].nm){return nmarr[k].v}}}}})}});grid=$.component("coral.grid",$.coral.grid,{groupingSetup:function(){var that=this,i,j,cml,cm=that.options.colModel,grp=that.options.groupingView;if(grp!==null&&((typeof grp==="object")||$.isFunction(grp))){if(!grp.groupField.length){that.options.grouping=false}else{if(grp.visibiltyOnNextGrouping===undefined){grp.visibiltyOnNextGrouping=[]}grp.lastvalues=[];if(!grp._locgr){grp.groups=[]}grp.counters=[];for(i=0;i<grp.groupField.length;i++){if(!grp.groupOrder[i]){grp.groupOrder[i]="asc"}if(!grp.groupText[i]){grp.groupText[i]="{0}"}if(typeof grp.groupColumnShow[i]!=="boolean"){grp.groupColumnShow[i]=true}if(typeof grp.groupSummary[i]!=="boolean"){grp.groupSummary[i]=false}if(!grp.groupSummaryPos[i]){grp.groupSummaryPos[i]="footer"}if(grp.groupColumnShow[i]===true){grp.visibiltyOnNextGrouping[i]=true;$(this.element).grid("showCol",grp.groupField[i])}else{grp.visibiltyOnNextGrouping[i]=$("#"+$.grid.coralID(that.options.id+"_"+grp.groupField[i])).is(":visible");$(this.element).grid("hideCol",grp.groupField[i])
}}grp.summary=[];if(grp.hideFirstGroupCol){grp.formatDisplayField[0]=function(v){return v}}for(j=0,cml=cm.length;j<cml;j++){if(grp.hideFirstGroupCol){if(!cm[j].hidden&&grp.groupField[0]===cm[j].name){cm[j].formatter=function(){return""}}}if(cm[j].summaryType){if(cm[j].summaryDivider){grp.summary.push({nm:cm[j].name,st:cm[j].summaryType,v:"",sd:cm[j].summaryDivider,vd:"",sr:cm[j].summaryRound,srt:cm[j].summaryRoundType||"round"})}else{grp.summary.push({nm:cm[j].name,st:cm[j].summaryType,v:"",sr:cm[j].summaryRound,srt:cm[j].summaryRoundType||"round"})}}}}}else{this.options.grouping=false}},groupingPrepare:function(record,irow){var that=this,grp=this.options.groupingView,i,grlen=grp.groupField.length,fieldName,v,displayName,displayValue,changed=0;for(i=0;i<grlen;i++){fieldName=grp.groupField[i];displayName=grp.displayField[i];v=record[fieldName];displayValue=displayName==null?null:record[displayName];if(displayValue==null){displayValue=v}if(v!==undefined){if(irow===0){grp.groups.push({idx:i,dataIndex:fieldName,value:v,displayValue:displayValue,startRow:irow,cnt:1,summary:[]});grp.lastvalues[i]=v;grp.counters[i]={cnt:1,pos:grp.groups.length-1,summary:$.extend(true,[],grp.summary)};$.each(grp.counters[i].summary,function(){if($.isFunction(this.st)){this.v=this.st.call(this,this.v,this.nm,record)}else{this.v=that.groupingCalculations.handler(this.st,this.v,this.nm,this.sr,this.srt,record);if(this.st.toLowerCase()==="avg"&&this.sd){this.vd=that.groupingCalculations.handler(this.st,this.vd,this.sd,this.sr,this.srt,record)}}});grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary}else{if(typeof v!=="object"&&($.isArray(grp.isInTheSameGroup)&&$.isFunction(grp.isInTheSameGroup[i])?!grp.isInTheSameGroup[i].call(this,grp.lastvalues[i],v,i,grp):grp.lastvalues[i]!==v)){grp.groups.push({idx:i,dataIndex:fieldName,value:v,displayValue:displayValue,startRow:irow,cnt:1,summary:[]});grp.lastvalues[i]=v;changed=1;grp.counters[i]={cnt:1,pos:grp.groups.length-1,summary:$.extend(true,[],grp.summary)};
$.each(grp.counters[i].summary,function(){if($.isFunction(this.st)){this.v=this.st.call(this,this.v,this.nm,record)}else{this.v=that.groupingCalculations.handler(this.st,this.v,this.nm,this.sr,this.srt,record);if(this.st.toLowerCase()==="avg"&&this.sd){this.vd=that.groupingCalculations.handler(this.st,this.vd,this.sd,this.sr,this.srt,record)}}});grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary}else{if(changed===1){grp.groups.push({idx:i,dataIndex:fieldName,value:v,displayValue:displayValue,startRow:irow,cnt:1,summary:[]});grp.lastvalues[i]=v;grp.counters[i]={cnt:1,pos:grp.groups.length-1,summary:$.extend(true,[],grp.summary)};$.each(grp.counters[i].summary,function(){if($.isFunction(this.st)){this.v=this.st.call(this,this.v,this.nm,record)}else{this.v=that.groupingCalculations.handler(this.st,this.v,this.nm,this.sr,this.srt,record);if(this.st.toLowerCase()==="avg"&&this.sd){this.vd=that.groupingCalculations.handler(this.st,this.vd,this.sd,this.sr,this.srt,record)}}});grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary}else{grp.counters[i].cnt+=1;grp.groups[grp.counters[i].pos].cnt=grp.counters[i].cnt;$.each(grp.counters[i].summary,function(){if($.isFunction(this.st)){this.v=this.st.call(this,this.v,this.nm,record)}else{this.v=that.groupingCalculations.handler(this.st,this.v,this.nm,this.sr,this.srt,record);if(this.st.toLowerCase()==="avg"&&this.sd){this.vd=that.groupingCalculations.handler(this.st,this.vd,this.sd,this.sr,this.srt,record)}}});grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary}}}}}return this},groupingToggle:function(hid){var that=this,grp=that.options.groupingView,strpos=hid.split("_"),num=parseInt(strpos[strpos.length-2],10);strpos.splice(strpos.length-2,2);var uid=strpos.join("_"),minus=grp.minusicon,plus=grp.plusicon,tar=$("#"+$.grid.coralID(hid)),r=tar.length?tar[0].nextSibling:null,tarspan=$("#"+$.grid.coralID(hid)+" span.tree-wrap-"+that.options.direction),getGroupingLevelFromClass=function(className){var nums=$.map(className.split(" "),function(item){if(item.substring(0,uid.length+1)===uid+"_"){return parseInt(item.substring(uid.length+1),10)
}});return nums.length>0?nums[0]:undefined},itemGroupingLevel,showData,collapsed=false,frz=that.options.frozenColumns?that.options.id+"_frozen":false,tar2=frz?$("#"+$.grid.coralID(hid),"#"+$.grid.coralID(frz)):false,r2=(tar2&&tar2.length)?tar2[0].nextSibling:null;if(tarspan.hasClass(minus)){if(grp.showSummaryOnHide){if(r){while(r){itemGroupingLevel=getGroupingLevelFromClass(r.className);if(itemGroupingLevel!==undefined&&itemGroupingLevel<=num){break}$(r).hide();r=r.nextSibling;if(frz){$(r2).hide();r2=r2.nextSibling}}}}else{if(r){while(r){itemGroupingLevel=getGroupingLevelFromClass(r.className);if(itemGroupingLevel!==undefined&&itemGroupingLevel<=num){break}$(r).hide();r=r.nextSibling;if(frz){$(r2).hide();r2=r2.nextSibling}}}}tarspan.removeClass(minus).addClass(plus);collapsed=true}else{if(r){showData=undefined;while(r){itemGroupingLevel=getGroupingLevelFromClass(r.className);if(showData===undefined){showData=itemGroupingLevel===undefined}if(itemGroupingLevel!==undefined){if(itemGroupingLevel<=num){break}if(itemGroupingLevel===num+1){$(r).show().find(">td>span.tree-wrap-"+that.options.direction).removeClass(minus).addClass(plus);if(frz){$(r2).show().find(">td>span.tree-wrap-"+that.options.direction).removeClass(minus).addClass(plus)}}}else{if(showData){$(r).show();if(frz){$(r2).show()}}}r=r.nextSibling;if(frz){r2=r2.nextSibling}}}tarspan.removeClass(plus).addClass(minus)}this._trigger("onClickGroup",null,[{headId:hid,collapsed:collapsed}]);return false},groupingRender:function(grdata,colspans,page,rn){var that=this,grp=that.options.groupingView,str="",icon="",hid,clid,pmrtl=grp.groupCollapse?grp.plusicon:grp.minusicon,gv,cp=[],len=grp.groupField.length;pmrtl+=" tree-wrap-"+that.options.direction;$.each(that.options.colModel,function(i,n){var ii;for(ii=0;ii<len;ii++){if(grp.groupField[ii]===n.name){cp[ii]=i;break}}});var toEnd=0;function findGroupIdx(ind,offset,grp){var ret=false,i;if(offset===0){ret=grp[ind]}else{var id=grp[ind].idx;if(id===0){ret=grp[ind]}else{for(i=ind;
i>=0;i--){if(grp[i].idx===id-offset){ret=grp[i];break}}}}return ret}function buildSummaryTd(i,ik,grp,foffset){var fdata=findGroupIdx(i,ik,grp),cm=that.options.colModel,vv,grlen=fdata.cnt,str="",k;for(k=foffset;k<colspans;k++){var tmpdata="<td "+that._formatCol(k,1,"")+">&#160;</td>",tplfld="{0}";$.each(fdata.summary,function(){if(this.nm===cm[k].name){if(cm[k].summaryTpl){tplfld=cm[k].summaryTpl}if(typeof this.st==="string"&&this.st.toLowerCase()==="avg"){if(this.sd&&this.vd){this.v=(this.v/this.vd)}else{if(this.v&&grlen>0){this.v=(this.v/grlen)}}}try{this.groupCount=fdata.cnt;this.groupIndex=fdata.dataIndex;this.groupValue=fdata.value;vv=this.formatter("",this.v,k,this)}catch(ef){vv=this.v}tmpdata="<td "+that._formatCol(k,1,"")+">"+$.grid.format(tplfld,vv)+"</td>";return false}});str+=tmpdata}return str}var sumreverse=$.makeArray(grp.groupSummary),mul;sumreverse.reverse();mul=that.options.multiselect?' colspan="2"':"";$.each(grp.groups,function(i,n){if(grp._locgr){if(!(n.startRow+n.cnt>(page-1)*rn&&n.startRow<page*rn)){return true}}toEnd++;clid=that.options.id+"ghead_"+n.idx;hid=clid+"_"+i;icon="<span style='cursor:pointer;' class='icon "+pmrtl+"' onclick=\"jQuery('#"+$.grid.coralID(that.options.id)+"').grid('groupingToggle','"+hid+"');return false;\"></span>";try{if($.isArray(grp.formatDisplayField)&&$.isFunction(grp.formatDisplayField[n.idx])){n.displayValue=grp.formatDisplayField[n.idx].call(this,n.displayValue,n.value,that.options.colModel[cp[n.idx]],n.idx,grp);gv=n.displayValue}else{gv=this.formatter(hid,n.displayValue,cp[n.idx],n.value)}}catch(egv){gv=n.displayValue}if(grp.groupSummaryPos[n.idx]==="header"){str+='<tr id="'+hid+'"'+(grp.groupCollapse&&n.idx>0?' style="display:none;" ':" ")+'role="row" class= "coral-component-content jqgroup coral-row-'+that.options.direction+" "+clid+'"><td style="padding-left:'+(n.idx*12)+'px;"'+mul+">"+icon+$.grid.template(grp.groupText[n.idx],gv,n.cnt,n.summary)+"</td>";str+=buildSummaryTd(i,0,grp.groups,grp.groupColumnShow[n.idx]===false?(mul===""?2:3):((mul==="")?1:2));
str+="</tr>"}else{str+='<tr id="'+hid+'"'+(grp.groupCollapse&&n.idx>0?' style="display:none;" ':" ")+'role="row" class= "coral-component-content jqgroup coral-row-'+that.options.direction+" "+clid+'"><td style="padding-left:'+(n.idx*12)+'px;" colspan="'+(grp.groupColumnShow[n.idx]===false?colspans-1:colspans)+'">'+icon+$.grid.template(grp.groupText[n.idx],gv,n.cnt,n.summary)+"</td></tr>"}var leaf=len-1===n.idx;if(leaf){var gg=grp.groups[i+1],kk,ik,offset=0,sgr=n.startRow,end=gg!==undefined?gg.startRow:grp.groups[i].startRow+grp.groups[i].cnt;if(grp._locgr){offset=(page-1)*rn;if(offset>n.startRow){sgr=offset}}for(kk=sgr;kk<end;kk++){if(!grdata[kk-offset]){break}str+=grdata[kk-offset].join("")}if(grp.groupSummaryPos[n.idx]!=="header"){var jj;if(gg!==undefined){for(jj=0;jj<grp.groupField.length;jj++){if(gg.dataIndex===grp.groupField[jj]){break}}toEnd=grp.groupField.length-jj}for(ik=0;ik<toEnd;ik++){if(!sumreverse[ik]){continue}var hhdr="";if(grp.groupCollapse&&!grp.showSummaryOnHide){hhdr=' style="display:none;"'}str+="<tr"+hhdr+' jqfootlevel="'+(n.idx-ik)+'" role="row" class="coral-component-content jqfoot coral-row-'+that.options.direction+'">';str+=buildSummaryTd(i,ik,grp.groups,0);str+="</tr>"}toEnd=jj}}});$("#"+$.grid.coralID(that.options.id)+" tbody:first").append(str);str=null},groupingGroupBy:function(name,options){var that=this;if(typeof name==="string"){name=[name]}var grp=that.options.groupingView;that.options.grouping=true;if(grp.visibiltyOnNextGrouping===undefined){grp.visibiltyOnNextGrouping=[]}var i;for(i=0;i<grp.groupField.length;i++){if(!grp.groupColumnShow[i]&&grp.visibiltyOnNextGrouping[i]){$(this).grid("showCol",grp.groupField[i])}}for(i=0;i<name.length;i++){grp.visibiltyOnNextGrouping[i]=$("#"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(name[i])).is(":visible")}that.options.groupingView=$.extend(that.options.groupingView,options||{});grp.groupField=name;$(this).trigger("reloadGrid")},groupingRemove:function(current){var that=this;if(current===undefined){current=true
}that.options.grouping=false;if(current===true){var grp=that.options.groupingView,i;for(i=0;i<grp.groupField.length;i++){if(!grp.groupColumnShow[i]&&grp.visibiltyOnNextGrouping[i]){$(this).grid("showCol",grp.groupField)}}$("tr.jqgroup, tr.jqfoot","#"+$.grid.coralID(that.options.id)+" tbody:first").remove();$("tr.jqgrow:hidden","#"+$.grid.coralID(that.options.id)+" tbody:first").show()}else{$(this).trigger("reloadGrid")}},groupingCalculations:{handler:function(fn,v,field,round,roundType,rc){var funcs={sum:function(){return parseFloat(v||0)+parseFloat((rc[field]||0))},min:function(){if(v===""){return parseFloat(rc[field]||0)}return Math.min(parseFloat(v),parseFloat(rc[field]||0))},max:function(){if(v===""){return parseFloat(rc[field]||0)}return Math.max(parseFloat(v),parseFloat(rc[field]||0))},count:function(){if(v===""){v=0}if(rc.hasOwnProperty(field)){return v+1}return 0},avg:function(){return funcs.sum()}};if(!funcs[fn]){throw ("grid Grouping No such method: "+fn)}var res=funcs[fn]();if(round!=null){if(roundType==="fixed"){res=res.toFixed(round)}else{var mul=Math.pow(10,round);res=Math.round(res*mul)/mul}}return res}}})}));

(function(a){a.extend(a.grid,{showModal:function(b){b.w.show()},closeModal:function(b){b.w.hide().attr("aria-hidden","true");if(b.o){b.o.remove()}},hideModal:function(b,f){f=a.extend({jqm:true,gb:""},f||{});if(f.onClose){var c=f.onClose(b);if(typeof c=="boolean"&&!c){return}}if(a.fn.jqm&&f.jqm===true){a(b).attr("aria-hidden","true").jqmHide()}else{if(f.gb!==""){try{a(".jqgrid-overlay:first",f.gb).hide()}catch(d){}}a(b).hide().attr("aria-hidden","true")}},findPos:function(c){var d=0,b=0;if(c.offsetParent){do{d+=c.offsetLeft;b+=c.offsetTop}while(c=c.offsetParent)}return[d,b]},createModal:function(i,q,m,b,v,c,h){var k=document.createElement("div"),s,l=this;h=a.extend({},h||{});s=a(m.gbox).attr("dir")=="rtl"?true:false;k.className="coral-component coral-component-content coral-corner-all coral-jqdialog";k.id=i.themodal;var u=document.createElement("div");u.className="coral-jqdialog-titlebar coral-component-header coral-corner-all coral-helper-clearfix";u.id=i.modalhead;a(u).append("<span class='coral-jqdialog-title'>"+m.caption+"</span>");var n=a("<a href='javascript:void(0)' class='coral-jqdialog-titlebar-close coral-corner-all'></a>").hover(function(){n.addClass("coral-state-hover")},function(){n.removeClass("coral-state-hover")}).append("<span class='coral-icon coral-icon-closethick'></span>");a(u).append(n);if(s){k.dir="rtl";a(".coral-jqdialog-title",u).css("float","right");a(".coral-jqdialog-titlebar-close",u).css("left",0.3+"em")}else{k.dir="ltr";a(".coral-jqdialog-title",u).css("float","left");a(".coral-jqdialog-titlebar-close",u).css("right",0.3+"em")}var w=document.createElement("div");a(w).addClass("coral-jqdialog-content coral-component-content").attr("id",i.modalcontent);a(w).append(q);k.appendChild(w);a(k).prepend(u);if(c===true){a("body").append(k)}else{if(typeof c=="string"){a(c).append(k)}else{a(k).insertBefore(b)}}a(k).css(h);if(typeof m.jqModal==="undefined"){m.jqModal=true}var o={};if(a.fn.jqm&&m.jqModal===true){if(m.left===0&&m.top===0&&m.overlay){var d=[];
d=this.findPos(v);m.left=d[0]+4;m.top=d[1]+4}o.top=m.top+"px";o.left=m.left}else{if(m.left!==0||m.top!==0){o.left=m.left;o.top=m.top+"px"}}a("a.coral-jqdialog-titlebar-close",u).click(function(){var e=a("#"+a.grid.jqID(i.themodal)).data("onClose")||m.onClose;var p=a("#"+a.grid.jqID(i.themodal)).data("gbox")||m.gbox;l.hideModal("#"+a.grid.jqID(i.themodal),{gb:p,jqm:m.jqModal,onClose:e});return false});if(m.width===0||!m.width){m.width=300}if(m.height===0||!m.height){m.height=200}if(!m.zIndex){var f=a(b).parents("*[role=dialog]").filter(":first").css("z-index");if(f){m.zIndex=parseInt(f,10)+2}else{m.zIndex=950}}var g=0;if(s&&o.left&&!c){g=a(m.gbox).width()-(!isNaN(m.width)?parseInt(m.width,10):0)-8;o.left=parseInt(o.left,10)+parseInt(g,10)}if(o.left){o.left+="px"}a(k).css(a.extend({width:isNaN(m.width)?"auto":m.width+"px",height:isNaN(m.height)?"auto":m.height+"px",zIndex:m.zIndex,overflow:"hidden"},o)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":i.modalhead,"aria-hidden":"true"});if(typeof m.drag=="undefined"){m.drag=true}if(typeof m.resize=="undefined"){m.resize=true}if(m.drag){a(u).css("cursor","move");if(a.fn.jqDrag){a(k).jqDrag(u)}else{try{a(k).draggable({handle:a("#"+a.grid.jqID(u.id))})}catch(t){}}}if(m.resize){if(a.fn.jqResize){a(k).append("<div class='jqResize coral-resizable-handle coral-resizable-se coral-icon coral-icon-gripsmall-diagonal-se coral-icon-grip-diagonal-se'></div>");a("#"+a.grid.jqID(i.themodal)).jqResize(".jqResize",i.scrollelm?"#"+a.grid.jqID(i.scrollelm):false)}else{try{a(k).resizable({handles:"se, sw",alsoResize:i.scrollelm?"#"+a.grid.jqID(i.scrollelm):false})}catch(j){}}}if(m.closeOnEscape===true){a(k).keydown(function(r){if(r.which==27){var p=a("#"+a.grid.jqID(i.themodal)).data("onClose")||m.onClose;l.hideModal(this,{gb:m.gbox,jqm:m.jqModal,onClose:p})}})}},viewModal:function(b,d){d=a.extend({toTop:true,overlay:10,modal:false,overlayClass:"coral-component-overlay",onShow:this.showModal,onHide:this.closeModal,gbox:"",jqm:true,jqM:true},d||{});
if(a.fn.jqm&&d.jqm===true){if(d.jqM){a(b).attr("aria-hidden","false").jqm(d).jqmShow()}else{a(b).attr("aria-hidden","false").jqmShow()}}else{if(d.gbox!==""){a(".jqgrid-overlay:first",d.gbox).show();a(b).data("gbox",d.gbox)}a(b).show().attr("aria-hidden","false");try{a(":input:visible",b)[0].focus()}catch(c){}}},info_dialog:function(q,k,c,p){var n={width:290,height:"auto",dataheight:"auto",drag:true,resize:false,caption:"<b>"+q+"</b>",left:250,top:170,zIndex:1000,jqModal:true,modal:false,closeOnEscape:true,align:"center",buttonalign:"center",buttons:[]};a.extend(n,p||{});var f=n.jqModal,r=this;if(a.fn.jqm&&!f){f=false}var h="";if(n.buttons.length>0){for(var g=0;g<n.buttons.length;g++){if(typeof n.buttons[g].id=="undefined"){n.buttons[g].id="info_button_"+g}h+="<a href='javascript:void(0)' id='"+n.buttons[g].id+"' class='fm-button coral-state-default coral-corner-all'>"+n.buttons[g].text+"</a>"}}var l=isNaN(n.dataheight)?n.dataheight:n.dataheight+"px",o="text-align:"+n.align+";";var b="<div id='info_id'>";b+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+l+";"+o+"'>"+k+"</div>";b+=c?"<div class='coral-component-content coral-helper-clearfix' style='text-align:"+n.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button coral-state-default coral-corner-all'>"+c+"</a>"+h+"</div>":h!==""?"<div class='coral-component-content coral-helper-clearfix' style='text-align:"+n.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+h+"</div>":"";b+="</div>";try{if(a("#info_dialog").attr("aria-hidden")=="false"){this.hideModal("#info_dialog",{jqm:f})}a("#info_dialog").remove()}catch(j){}this.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},b,n,"","",true);if(h){a.each(n.buttons,function(e){a("#"+a.grid.jqID(this.id),"#info_id").bind("click",function(){n.buttons[e].onClick.call(a("#info_dialog"));
return false})})}a("#closedialog","#info_id").click(function(){r.hideModal("#info_dialog",{jqm:f});return false});a(".fm-button","#info_dialog").hover(function(){a(this).addClass("coral-state-hover")},function(){a(this).removeClass("coral-state-hover")});if(a.isFunction(n.beforeOpen)){n.beforeOpen()}this.viewModal("#info_dialog",{onHide:function(e){e.w.hide().remove();if(e.o){e.o.remove()}},modal:n.modal,jqm:f});if(a.isFunction(n.afterOpen)){n.afterOpen()}try{a("#info_dialog").focus()}catch(d){}},createEl:function(f,g,v,k,t){var u="",p=this;function l(i,e){if(a.isFunction(e.dataInit)){e.dataInit.call(p,i)}if(e.dataEvents){a.each(e.dataEvents,function(){if(this.data!==undefined){a(i).bind(this.type,this.data,this.fn)}else{a(i).bind(this.type,this.fn)}})}return e}function r(z,i,e){if(!i.hasOwnProperty("id")){a(z).attr("id",a.grid.randId())}}switch(f){case"textarea":u=document.createElement("textarea");if(k){if(!g.cols){a(u).css({width:"98%"})}}else{if(!g.cols){g.cols=20}}if(!g.rows){g.rows=2}if(v=="&nbsp;"||v=="&#160;"||(v.length==1&&v.charCodeAt(0)==160)){v=""}u.value=v;r(u,g);a(u).attr({role:"textbox",multiline:"true"});break;case"select":u=document.createElement("select");u.setAttribute("role","select");var d,h=[];if(g.multiple===true){d=true;u.multiple="multiple";a(u).attr("aria-multiselectable","true")}else{d=false}if(typeof(g.dataUrl)!="undefined"){a.ajax(a.extend({url:g.dataUrl,type:"GET",dataType:"html",context:{elem:u,options:g,vl:v},success:function(E){var z,i=[],D=this.elem,C=this.vl,A=a.extend({},this.options),B=A.multiple===true;if(a.isFunction(A.buildSelect)){var e=A.buildSelect.call(p,E);z=a(e).html()}else{z=a(E).html()}if(z){a(D).append(z);r(D,A);if(typeof A.size==="undefined"){A.size=B?3:1}if(B){i=C.split(",");i=a.map(i,function(F){return a.trim(F)})}else{i[0]=a.trim(C)}setTimeout(function(){a("option",D).each(function(F){if(F===0&&D.multiple){this.selected=false}a(this).attr("role","option");if(a.inArray(a.trim(a(this).text()),i)>-1||a.inArray(a.trim(a(this).val()),i)>-1){this.selected="selected"
}})},0)}}},t||{}))}else{if(g.value){var o;if(typeof g.size==="undefined"){g.size=d?3:1}if(d){h=v.split(",");h=a.map(h,function(e){return a.trim(e)})}if(typeof g.value==="function"){g.value=g.value()}var q,n,j,m=g.separator===undefined?":":g.separator,w=g.delimiter===undefined?";":g.delimiter;if(typeof g.value==="string"){q=g.value.split(w);for(o=0;o<q.length;o++){n=q[o].split(m);if(n.length>2){n[1]=a.map(n,function(i,e){if(e>0){return i}}).join(m)}j=document.createElement("option");j.setAttribute("role","option");j.value=n[0];j.innerHTML=n[1];u.appendChild(j);if(!d&&(a.trim(n[0])==a.trim(v)||a.trim(n[1])==a.trim(v))){j.selected="selected"}if(d&&(a.inArray(a.trim(n[1]),h)>-1||a.inArray(a.trim(n[0]),h)>-1)){j.selected="selected"}}}else{if(typeof g.value==="object"){var c=g.value;for(var y in c){if(c.hasOwnProperty(y)){j=document.createElement("option");j.setAttribute("role","option");j.value=y;j.innerHTML=c[y];u.appendChild(j);if(!d&&(a.trim(y)==a.trim(v)||a.trim(c[y])==a.trim(v))){j.selected="selected"}if(d&&(a.inArray(a.trim(c[y]),h)>-1||a.inArray(a.trim(y),h)>-1)){j.selected="selected"}}}}}r(u,g,["value"])}}break;case"datepicker":case"autocomplete":case"autocompletetree":case"text":case"password":case"button":var x;if(f=="button"){x="button"}else{x="textbox"}u=document.createElement("input");if(f=="datepicker"){u.type="text"}else{if(f=="autocomplete"){u.type="text"}else{u.type=f}}u.value=v;r(u,g);if(f!="button"){if(k){if(!g.size){a(u).css({width:"98%"})}}else{if(!g.size){g.size=20}}}a(u).attr("role",x);break;case"image":case"file":u=document.createElement("input");u.type=f;r(u,g);break;case"custom":u=document.createElement("span");try{if(a.isFunction(g.custom_element)){var b=g.custom_element.call(p,v,g);if(b){b=a(b).addClass("customelement").attr({id:g.id,name:g.name});a(u).empty().append(b)}else{throw"e2"}}else{throw"e1"}}catch(s){if(s=="e1"){this.info_dialog(a.grid.errors.errcap,"function 'custom_element' "+a.grid.edit.msg.nodefined,a.grid.edit.bClose)}if(s=="e2"){this.info_dialog(a.grid.errors.errcap,"function 'custom_element' "+a.grid.edit.msg.novalue,a.grid.edit.bClose)
}else{this.info_dialog(a.grid.errors.errcap,typeof(s)==="string"?s:s.message,a.grid.edit.bClose)}}break;case"checkbox":u=document.createElement("input");u.type=f;u.value=v;r(u,g);break;case"combobox":case"combotree":case"combogrid":u=document.createElement("input");u.type="text";u.value=v;r(u,g);break;default:break}return u},checkDate:function(o,d){var m=function(i){return(((i%4===0)&&(i%100!==0||(i%400===0)))?29:28)},l=function(r){for(var j=1;j<=r;j++){this[j]=31;if(j==4||j==6||j==9||j==11){this[j]=30}if(j==2){this[j]=29}}return this};var f={},q;o=o.toLowerCase();if(o.indexOf("/")!=-1){q="/"}else{if(o.indexOf("-")!=-1){q="-"}else{if(o.indexOf(".")!=-1){q="."}else{q="/"}}}o=o.split(q);d=d.split(q);if(d.length!=3){return false}var h=-1,p,g=-1,e=-1;for(var k=0;k<o.length;k++){var c=isNaN(d[k])?0:parseInt(d[k],10);f[o[k]]=c;p=o[k];if(p.indexOf("y")!=-1){h=k}if(p.indexOf("m")!=-1){e=k}if(p.indexOf("d")!=-1){g=k}}if(o[h]=="y"||o[h]=="yyyy"){p=4}else{if(o[h]=="yy"){p=2}else{p=-1}}var b=l(12),n;if(h===-1){return false}else{n=f[o[h]].toString();if(p==2&&n.length==1){p=1}if(n.length!=p||(f[o[h]]===0&&d[h]!="00")){return false}}if(e===-1){return false}else{n=f[o[e]].toString();if(n.length<1||f[o[e]]<1||f[o[e]]>12){return false}}if(g===-1){return false}else{n=f[o[g]].toString();if(n.length<1||f[o[g]]<1||f[o[g]]>31||(f[o[e]]==2&&f[o[g]]>m(f[o[h]]))||f[o[g]]>b[f[o[e]]]){return false}}return true},isEmpty:function(b){if(b.match(/^\s+$/)||b===""){return true}else{return false}},checkTime:function(d){var c=/^(\d{1,2}):(\d{2})([ap]m)?$/,b;if(!this.isEmpty(d)){b=d.match(c);if(b){if(b[3]){if(b[1]<1||b[1]>12){return false}}else{if(b[1]>23){return false}}if(b[2]>59){return false}}else{return false}}return true},checkValues:function(d,p,l,q,j){var h,k,r,c,m;if(typeof(q)==="undefined"){if(typeof(p)=="string"){for(k=0,m=l.options.colModel.length;k<m;k++){if(l.options.colModel[k].name==p){h=l.options.colModel[k].editrules;p=k;try{r=l.options.colModel[k].formoptions.label}catch(o){}break}}}else{if(p>=0){h=l.options.colModel[p].editrules
}}}else{h=q;r=j===undefined?"_":j}if(h){if(!r){r=l.options.colNames[p]}if(h.required===true){if(this.isEmpty(d)){return[false,r+": "+a.grid.edit.msg.required,""]}}var f=h.required===false?false:true;if(h.number===true){if(!(f===false&&this.isEmpty(d))){if(isNaN(d)){return[false,r+": "+a.grid.edit.msg.number,""]}}}if(typeof h.minValue!="undefined"&&!isNaN(h.minValue)){if(parseFloat(d)<parseFloat(h.minValue)){return[false,r+": "+a.grid.edit.msg.minValue+" "+h.minValue,""]}}if(typeof h.maxValue!="undefined"&&!isNaN(h.maxValue)){if(parseFloat(d)>parseFloat(h.maxValue)){return[false,r+": "+a.grid.edit.msg.maxValue+" "+h.maxValue,""]}}var b;if(h.email===true){if(!(f===false&&this.isEmpty(d))){b=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(!b.test(d)){return[false,r+": "+a.grid.edit.msg.email,""]}}}if(h.integer===true){if(!(f===false&&this.isEmpty(d))){if(isNaN(d)){return[false,r+": "+a.grid.edit.msg.integer,""]}if((d%1!==0)||(d.indexOf(".")!=-1)){return[false,r+": "+a.grid.edit.msg.integer,""]}}}if(h.date===true){if(!(f===false&&this.isEmpty(d))){if(l.options.colModel[p].formatoptions&&l.options.colModel[p].formatoptions.newformat){c=l.options.colModel[p].formatoptions.newformat
}else{c=l.options.colModel[p].datefmt||"Y-m-d"}if(!this.checkDate(c,d)){return[false,r+": "+a.grid.edit.msg.date+" - "+c,""]}}}if(h.time===true){if(!(f===false&&this.isEmpty(d))){if(!this.checkTime(d)){return[false,r+": "+a.grid.edit.msg.date+" - hh:mm (am/pm)",""]}}}if(h.url===true){if(!(f===false&&this.isEmpty(d))){b=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;if(!b.test(d)){return[false,r+": "+a.grid.edit.msg.url,""]}}}if(h.custom===true){if(!(f===false&&this.isEmpty(d))){if(a.isFunction(h.custom_func)){var n=h.custom_func.call(l,d,r);if(a.isArray(n)){return n}else{return[false,a.grid.edit.msg.customarray,""]}}else{return[false,a.grid.edit.msg.customfcheck,""]}}}}return[true,"",""]}})})(jQuery);

(function(a){a.component("coral.grid",a.coral.grid,{editCell:function(f,d,g){var i=this,c,t,o,j;if(!i.grid||i.options.cellEdit!==true){return}d=parseInt(d,10);if(!i.options.knv){a(i.element).grid("GridNav")}if(i.options.savedRow.length>0){if(g===true){if(f==i.options.iRow&&d==i.options.iCol){return}}if(i.rows[i.options.savedRow[0].id]){if(!a(i.element).grid("saveCell",i.options.savedRow[0].id,i.options.savedRow[0].ic)){return}}}else{window.setTimeout(function(){a("#"+a.grid.coralID(i.options.knv)).attr("tabindex","-1").focus()},0)}j=i.options.colModel[d];c=j.name;if(c=="subgrid"||c=="cb"||c=="rn"){return}o=a("td:eq("+d+")",i.rows[f]);if(j.editable===true&&g===true&&!o.hasClass("not-editable-cell")){if(parseInt(i.options.iCol,10)>=0&&parseInt(i.options.iRow,10)>=0){a("td:eq("+i.options.iCol+")",i.rows[i.options.iRow]).removeClass("edit-cell coral-state-highlight");a(i.rows[i.options.iRow]).removeClass("selected-row coral-state-hover")}a(o).addClass("edit-cell coral-state-highlight");a(i.rows[f]).addClass("selected-row coral-state-hover");try{t=a.unformat.call(i,o,{rowId:i.rows[f].id,colModel:j},d)}catch(u){t=(j.edittype&&j.edittype=="textarea")?a(o).text():a(o).html()}if(i.options.autoencode){t=a.grid.htmlDecode(t)}if(!i._trigger("beforeEditCell",null,[{rowId:i.rows[f].id,name:c,cellValue:t,rowIndex:f,cellIndex:d}])){return}i.options.savedRow.push({id:f,ic:d,name:c,value:t});if(t==="&nbsp;"||t==="&#160;"||(t.length===1&&t.charCodeAt(0)===160)){t=""}if(a.isFunction(i.options.formatCell)){var p=i.options.formatCell.call(i,i.rows[f].id,c,t,f,d);if(p!==undefined){t=p}}var v=j.editoptions,r={id:f+"_"+c,name:c};v=a.extend({},v||{},r);var n=a.grid.createEl.call(i,j.edittype,v,t,true,a.extend({},a.grid.ajaxOptions,i.options.ajaxSelectOptions||{}));a(o).html("").append(n).attr("tabindex","0");var b=function(w){if(w.keyCode===27){if(a("input.hasDatepicker",o).length>0){if(a(".coral-datepicker").is(":hidden")){a(i.element).grid("restoreCell",f,d)}else{a("input.hasDatepicker",o).datepicker("hide")
}}else{a(i.element).grid("restoreCell",f,d)}}if(w.keyCode===13){a(i.element).grid("saveCell",f,d);return false}if(w.keyCode===9){if(!i.grid.columnsView.loading){if(w.shiftKey){a(i.element).grid("prevCell",f,d)}else{a(i.element).grid("nextCell",f,d)}}else{return false}}w.stopPropagation()};var h={onKeyDown:b,value:a(n).val()},e=j.edittype,l=a(i.element).grid("getRowData",i.rows[f].id);switch(j.edittype){case"text":case"textarea":v=a.extend({},v,h);a(n).textbox(v);break;case"datepicker":v=a.extend({},v,h);a(n).datepicker(v);break;case"radio":v=a.extend({},v,h);a(n).radio(v);if(a(n).val()=="Yes"){a(n).radio("check")}else{a(n).radio("uncheck")}break;case"checkbox":v=a.extend({},v,h);a(n).checkbox(v);if(a(n).val()=="Yes"){a(n).checkbox("check")}else{a(n).checkbox("uncheck")}break;case"autocomplete":var q=a(n).val();var k=typeof(v.source)=="string";v=a.extend({},v,h);var s=v.postMode||"value";v.postMode=s;v=a.extend({},v,{onKeyDown:b});a(n).autocomplete(v);if(k){v.postMode="text";a(n).autocomplete(v);a(n).autocomplete("setValue",q)}else{if(s=="value"){a(n).autocomplete("setValue",q)}else{a(n).autocomplete("setValue",q);a(n).autocomplete("setText",q)}}break;case"combobox":case"combotree":case"combogrid":v=a.extend({},v,h);if(j.cellEditoptions){var m=i.getCellEditOptions(j,a(n).val(),v,l,r,h)}e=m&&m.type?m.type:j.edittype;v=m&&m.cOpts?m.cOpts:v;e=e=="text"?"textbox":e;a(n)[e](v);break}window.setTimeout(function(){a(n).focus()},0);i._trigger("afterEditCell",null,[{rowId:i.rows[f].id,name:c,cellValue:t,rowIndex:f,celIndex:d}])}else{if(parseInt(i.options.iCol,10)>=0&&parseInt(i.options.iRow,10)>=0){a("td:eq("+i.options.iCol+")",i.rows[i.options.iRow]).removeClass("edit-cell coral-state-highlight");a(i.rows[i.options.iRow]).removeClass("selected-row coral-state-hover")}o.addClass("edit-cell coral-state-highlight");a(i.rows[f]).addClass("selected-row coral-state-hover");t=o.html().replace(/\&#160\;/ig,"");a(i.element).triggerHandler("jqGridSelectCell",[i.rows[f].id,c,t,f,d]);if(a.isFunction(i.options.onSelectCell)){i.options.onSelectCell.call(i,i.rows[f].id,c,t,f,d)
}}i.options.iCol=d;i.options.iRow=f},getCellEditOptions:function(d,g,h,c,b,i){var e=a.coral.toFunction(d.cellEditoptions).call(this,g,h,c);var f=e&&e.type?e.type:d.edittype;e=e&&e.cellEditoptions?a.extend({},e.cellEditoptions,b,i):h;h=e||h;return{cOpts:e,type:f}},GridNav:function(){var g=this;if(!g.grid||g.options.cellEdit!==true){return}g.options.knv=g.options.id+"_kn";var f=a("<span style='width:0px;height:0px;background-color:black;' tabindex='0'><span tabindex='-1' style='width:0px;height:0px;background-color:grey' id='"+g.options.knv+"'></span></span>"),d,c;function e(p,n,o){if(o.substr(0,1)=="v"){var h=a(g.grid.rowsView)[0].clientHeight,q=a(g.grid.rowsView)[0].scrollTop,r=g.rows[p].offsetTop+g.rows[p].clientHeight,l=g.rows[p].offsetTop;if(o=="vd"){if(r>=h){a(g.grid.rowsView)[0].scrollTop=a(g.grid.rowsView)[0].scrollTop+g.rows[p].clientHeight}}if(o=="vu"){if(l<q){a(g.grid.rowsView)[0].scrollTop=a(g.grid.rowsView)[0].scrollTop-g.rows[p].clientHeight}}}if(o=="h"){var k=a(g.grid.rowsView)[0].clientWidth,j=a(g.grid.rowsView)[0].scrollLeft,i=g.rows[p].cells[n].offsetLeft+g.rows[p].cells[n].clientWidth,m=g.rows[p].cells[n].offsetLeft;if(i>=k+parseInt(j,10)){a(g.grid.rowsView)[0].scrollLeft=a(g.grid.rowsView)[0].scrollLeft+g.rows[p].cells[n].clientWidth}else{if(m<j){a(g.grid.rowsView)[0].scrollLeft=a(g.grid.rowsView)[0].scrollLeft-g.rows[p].cells[n].clientWidth}}}}function b(l,h){var k,j;if(h=="lft"){k=l+1;for(j=l;j>=0;j--){if(g.options.colModel[j].hidden!==true){k=j;break}}}if(h=="rgt"){k=l-1;for(j=l;j<g.options.colModel.length;j++){if(g.options.colModel[j].hidden!==true){k=j;break}}}return k}a(f).insertBefore(g.grid.columnsView);a("#"+g.options.knv).focus().keydown(function(h){c=h.keyCode;if(g.options.direction=="rtl"){if(c===37){c=39}else{if(c===39){c=37}}}switch(c){case 38:if(g.options.iRow-1>0){e(g.options.iRow-1,g.options.iCol,"vu");a(g.element).grid("editCell",g.options.iRow-1,g.options.iCol,false)}break;case 40:if(g.options.iRow+1<=g.rows.length-1){e(g.options.iRow+1,g.options.iCol,"vd");
a(g.element).grid("editCell",g.options.iRow+1,g.options.iCol,false)}break;case 37:if(g.options.iCol-1>=0){d=b(g.options.iCol-1,"lft");e(g.options.iRow,d,"h");a(g.element).grid("editCell",g.options.iRow,d,false)}break;case 39:if(g.options.iCol+1<=g.options.colModel.length-1){d=b(g.options.iCol+1,"rgt");e(g.options.iRow,d,"h");a(g.element).grid("editCell",g.options.iRow,d,false)}break;case 13:if(parseInt(g.options.iCol,10)>=0&&parseInt(g.options.iRow,10)>=0){a(g.element).grid("editCell",g.options.iRow,g.options.iCol,true)}break;default:return true}return false})},saveCell:function(g,f){var i=this,h;if(!i.grid||i.options.cellEdit!==true){return}if(i.options.savedRow.length>=1){h=0}else{h=null}if(h!==null){var r=a("td:eq("+f+")",i.rows[g]),p,b,k=i.options.colModel[f],c=k.name,j=a.grid.coralID(c);if(this.options.autoValid){var y=this.valid(i.rows[g].id,k.name);if(!this.options.allowSaveOnError&&!y){a.message("请确认是否输入正确！");return y}}var s=k.edittype;if(k.cellEditoptions){var o=a(i.element).grid("getRowData",i.rows[g].id),x=a("#"+g+"_"+j,i.rows[g]),A=a.coral.toFunction(k.cellEditoptions).call(this,a(x).val(),k.editoptions,o);s=A&&A.type?A.type:s}switch(s){case"select":if(!k.editoptions.multiple){p=a("#"+g+"_"+j+" option:selected",i.rows[g]).val();b=a("#"+g+"_"+j+" option:selected",i.rows[g]).text()}else{var x=a("#"+g+"_"+j,i.rows[g]),w=[];p=a(x).val();if(p){p.join(",")}else{p=""}a("option:selected",x).each(function(e,v){w[e]=a(v).text()});b=w.join(",")}if(k.formatter){b=p}break;case"checkbox":var t=["Yes","No"];if(k.editoptions){t=k.editoptions.value.split(":")}p=a("#"+g+"_"+j,i.rows[g]).is(":checked")?t[0]:t[1];b=p;break;case"password":case"text":case"textarea":p=a("#"+g+"_"+j,i.rows[g]).val();b=p;break;case"button":p=a("#"+g+"_"+j,i.rows[g]).val();b=p;break;case"custom":try{if(k.editoptions&&a.isFunction(k.editoptions.custom_value)){p=k.editoptions.custom_value.call(i,a(".customelement",r),"get");if(p===undefined){throw"e2"}else{b=p}}else{throw"e1"}}catch(z){if(z=="e1"){a.grid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.grid.edit.msg.nodefined,jQuery.jgrid.edit.bClose)
}if(z=="e2"){a.grid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.grid.edit.msg.novalue,jQuery.jgrid.edit.bClose)}else{a.grid.info_dialog(jQuery.jgrid.errors.errcap,z.message,jQuery.jgrid.edit.bClose)}}break;case"datepicker":p=a("#"+g+"_"+j,i.rows[g]).val();b=p;var D=a("#"+g+"_"+j,i.rows[g]);break;case"combobox":case"combogrid":case"combotree":p=a("#"+g+"_"+j,i.rows[g])[s]("getValues").toString();b=a("#"+g+"_"+j,i.rows[g])[s]("getText");if(k.formatter){b=p}break;case"autocomplete":b=a("#"+g+"_"+j,i.rows[g])[s]("getText");if(typeof(k.editoptions.source)=="string"){p=b}else{p=a("#"+g+"_"+j,i.rows[g])[s]("getValue")}if(k.formatter&&k.postMode=="value"){b=p}break}if(b!==i.options.savedRow[h].value){var C=a(i).triggerHandler("jqGridBeforeSaveCell",[i.rows[g].id,c,p,g,f]);if(C){p=C;b=C}if(a.isFunction(i.options.beforeSaveCell)){var u=i.options.beforeSaveCell.call(i,i.rows[g].id,c,p,g,f);if(u){p=u;b=u}}var d=a.grid.checkValues(p,f,i);if(d[0]===true){var m=a(i).triggerHandler("jqGridBeforeSubmitCell",[i.rows[g].id,c,p,g,f])||{};if(a.isFunction(i.options.beforeSubmitCell)){m=i.options.beforeSubmitCell.call(i,i.rows[g].id,c,p,g,f);if(!m){m={}}}if(a("input.hasDatepicker",r).length>0){a("input.hasDatepicker",r).datepicker("hide")}if(i.options.cellsubmit=="remote"){if(i.options.cellurl){var B={};if(i.options.autoencode){p=a.grid.htmlEncode(p)}B[c]=p;var q,n,l;l=i.options.prmNames;q=l.id;n=l.oper;B[q]=a.grid.stripPref(i.options.idPrefix,i.rows[g].id);B[n]=l.editoper;B=a.extend(m,B);a("#lui_"+a.grid.coralID(i.options.id)).show();i.grid.columnsView.loading=true;a.ajax(a.extend({url:i.options.cellurl,data:a.isFunction(i.options.serializeCellData)?i.options.serializeCellData.call(i,B):B,type:"POST",complete:function(e,E){a("#lui_"+i.options.id).hide();i.grid.columnsView.loading=false;if(E=="success"){var v=a(i).triggerHandler("jqGridAfterSubmitCell",[i,e,B.id,c,p,g,f])||[true,""];if(v[0]===true&&a.isFunction(i.options.afterSubmitCell)){v=i.options.afterSubmitCell.call(i,e,B.id,c,p,g,f)
}if(v[0]===true){a(r).empty();a(i.element).grid("setCell",i.rows[g].id,f,b,false,false,true);a(r).addClass("dirty-cell");a(i.rows[g]).addClass("edited");a(i).triggerHandler("jqGridAfterSaveCell",[i.rows[g].id,c,p,g,f]);if(a.isFunction(i.options.afterSaveCell)){i.options.afterSaveCell.call(i,i.rows[g].id,c,p,g,f)}i.options.savedRow.splice(0,1)}else{a.grid.info_dialog(a.grid.errors.errcap,v[1],a.grid.edit.bClose);a(i.element).grid("restoreCell",g,f)}}},error:function(e,v,E){a("#lui_"+a.grid.coralID(i.options.id)).hide();i.grid.columnsView.loading=false;a(i).triggerHandler("jqGridErrorCell",[e,v,E]);if(a.isFunction(i.options.errorCell)){i.options.errorCell.call(i,e,v,E);a(i.element).grid("restoreCell",g,f)}else{a.grid.info_dialog(a.grid.errors.errcap,e.status+" : "+e.statusText+"<br/>"+v,a.grid.edit.bClose);a(i.element).grid("restoreCell",g,f)}}},a.grid.ajaxOptions,i.options.ajaxCellOptions||{}))}else{try{a.grid.info_dialog(a.grid.errors.errcap,a.grid.errors.nourl,a.grid.edit.bClose);a(i.element).grid("restoreCell",g,f)}catch(z){}}}if(i.options.cellsubmit=="clientArray"){a(r).empty();a(i.element).grid("setCell",i.rows[g].id,f,b,false,false,true);a(r).addClass("dirty-cell");a(i.rows[g]).addClass("edited");i._trigger("afterSaveCell",null,[{rowId:i.rows[g].id,name:c,cellValue:p,rowIndex:g,celIndex:f}]);i.options.savedRow.splice(0,1)}}else{try{window.setTimeout(function(){a.grid.info_dialog(a.grid.errors.errcap,p+" "+d[1],a.grid.edit.bClose)},100);a(i.element).grid("restoreCell",g,f)}catch(z){}}}else{a(i.element).grid("restoreCell",g,f)}}if(false){a("#"+a.grid.coralID(i.options.knv)).attr("tabindex","-1").focus()}else{window.setTimeout(function(){a("#"+a.grid.coralID(i.options.knv)).attr("tabindex","-1").focus()},0)}},restoreCell:function(e,c){var d=this,b;if(!d.grid||d.options.cellEdit!==true){return}if(d.options.savedRow.length>=1){b=0}else{b=null}if(b!==null){var f=a("td:eq("+c+")",d.rows[e]);a(f).empty().attr("tabindex","-1");a(d.element).grid("setCell",d.rows[e].id,c,d.options.savedRow[b].value,false,false,true);
a(d).triggerHandler("jqGridAfterRestoreCell",[d.rows[e].id,d.options.savedRow[b].value,e,c]);if(a.isFunction(d.options.afterRestoreCell)){d.options.afterRestoreCell.call(d,d.rows[e].id,d.options.savedRow[b].value,e,c)}d.options.savedRow.splice(0,1)}window.setTimeout(function(){a("#"+d.options.knv).attr("tabindex","-1").focus()},0)},nextCell:function(e,b){var d=this,f=false;if(!d.grid||d.options.cellEdit!==true){return}for(var c=b+1;c<d.options.colModel.length;c++){if(d.options.colModel[c].editable===true){f=c;break}}if(f!==false){a(d.element).grid("editCell",e,f,true)}else{if(d.options.savedRow.length>0){a(d.element).grid("saveCell",e,b)}}},prevCell:function(e,b){var d=this,f=false;if(!d.grid||d.options.cellEdit!==true){return}for(var c=b-1;c>=0;c--){if(d.options.colModel[c].editable===true){f=c;break}}if(f!==false){a(d.element).grid("editCell",e,f,true)}else{if(d.options.savedRow.length>0){a(d.element).grid("saveCell",e,b)}}},getChangedCells:function(f){var c=[];if(!f){f="all"}var d=this,b,e=true;if(!d.grid||d.options.cellEdit!==true){return}a(d.rows).each(function(g){var h={};if(a(this).hasClass("edited")){a("td",this).each(function(j){b=d.options.colModel[j].name;if(b!=="cb"&&b!=="subgrid"){if(a(this).hasClass("coral-gridcell-error")){e=false;return false}if(f=="dirty"){if(a(this).hasClass("dirty-cell")){try{h[b]=a.unformat.call(d,this,{rowId:d.rows[g].id,colModel:d.options.colModel[j]},j)}catch(k){h[b]=a.jgrid.htmlDecode(a(this).html())}}}else{try{h[b]=a.unformat.call(d,this,{rowId:d.rows[g].id,colModel:d.options.colModel[j]},j)}catch(k){h[b]=a.jgrid.htmlDecode(a(this).html())}}}});if(!e){return false}h.id=this.id;c.push(h)}});if(!e){c=[]}return c}})})(jQuery);

(function(a){a.coral.grid.inlineEdit=a.coral.grid.inlineEdit||{};a.component("coral.grid",a.coral.grid,{editButtonsPos:function(e,d){var h=this,c,g,b,f;c=a(h.element).grid("getDataIDs");g=a(h.element).grid("getInd",e,true);f=h.element.find(".coral-grid-rows-view").outerHeight();b=h.element.find(".coral-grid-btable").outerHeight();if((b+a(g).outerHeight()>f)&&e==c[c.length-1]){d.position({my:"left-"+(d.outerWidth()/2)+" top-2",at:"right-"+(a(g).outerWidth()/2)+" top-"+(a(d).outerHeight()),collision:"fit",of:a(g)})}else{d.position({my:"left-"+(d.outerWidth()/2)+" top-2",at:"right-"+(a(g).outerWidth()/2)+" top+"+(a(g).outerHeight()),collision:"fit",of:a(g)})}},editRow:function(h,r,B,g,e,f,m,k,b){var u={},d=a.makeArray(arguments).slice(1);if(a.type(d[0])==="object"){u=d[0]}else{if(typeof r!=="undefined"){u.keys=r}if(a.isFunction(B)){u.oneditfunc=B}if(a.isFunction(g)){u.successfunc=g}if(typeof e!=="undefined"){u.url=e}if(typeof f!=="undefined"){u.extraparam=f}if(a.isFunction(m)){u.aftersavefunc=m}if(a.isFunction(k)){u.errorfunc=k}if(a.isFunction(b)){u.afterrestorefunc=b}}u=a.extend(true,{keys:true,oneditfunc:null,successfunc:null,url:"clientArray",extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:true,mtype:"POST"},a.coral.grid.inlineEdit,u);var y=this,c,z,v,w=0,t=null,l={},p,n;if(!y.grid){return}p=a(y.element).grid("getInd",h,true);y.options.editrow=h;y.editRowIndex=h;if(p===false){return}v=a(p).attr("editable")||"0";if(y._trigger("beforeInlineEditRow",null,[{rowId:h,options:u}])==false){return}if(v=="0"&&!a(p).hasClass("not-editable-row")){if(this.options.rowEditButtons){var A=a("<div class='row-editable coral-grid-rows'><div class='row-editable-btns coral-state-highlight'><div class='grid_edit_toolbar'></div></div></div>");var q=[];var j={type:"button",id:"update",label:a.grid.edit.bUpdate,name:"update",onClick:function(){var i=y.saveRow(p.id,null,"clientArray")}};var s={type:"button",id:"cancel",label:a.grid.edit.bCancel,name:"cancel",onClick:function(){y.restoreRow(p.id);
A.remove();y._trigger("afterInlineCancelRow",null,[{rowId:p.id,options:u,isUpdated:!a(p.id).hasClass("new-row")}])}};if(this.options.rowEditButtons.length===0){this.options.rowEditButtons=["update","cancel"]}for(var x=0;x<this.options.rowEditButtons.length;x++){if(this.options.rowEditButtons[x]=="update"){q.push(j)}else{if(this.options.rowEditButtons[x]=="cancel"){q.push(s)}else{q.push(this.options.rowEditButtons[x])}}}this.rowEditButtons=A;y.element.find(".row-editable").remove();y.element.find(".coral-grid-view").prepend(A[0]);a(".grid_edit_toolbar",y.element).toolbar({data:q});this._delay(function(){this.editButtonsPos(h,A)})}n=y.options.colModel;a('td[role="gridcell"]',p).each(function(G){c=n[G].name;var H=y.options.treeGrid===true&&c==y.options.ExpandColumn;if(H){z=a("span:first",this).html()}else{try{z=a.unformat.call(y,this,{rowId:h,colModel:n[G]},G)}catch(L){z=(n[G].edittype&&n[G].edittype=="textarea")?a(this).text():a(this).html()}}if(c!="cb"&&c!="subgrid"&&c!="rn"){if(y.options.autoencode){z=a.grid.htmlDecode(z)}l[c]=z;if(n[G].editable===true){if(t===null){t=G}if(H){a("span:first",this).html("")}else{a(this).html("")}var C=a.extend({},n[G].editoptions||{},{id:h+"_"+c,name:c});if(!n[G].edittype){n[G].edittype="text"}if(z=="&nbsp;"||z=="&#160;"||(z.length==1&&z.charCodeAt(0)==160)){z=""}var o=a.grid.createEl.call(y,n[G].edittype,C,z,false,a.extend({},a.grid.ajaxOptions,y.options.ajaxSelectOptions||{}));a(o).addClass("editable");if(H){a("span:first",this).append(o)}else{a(this).append(o)}var D=n[G].editoptions||{};var E=D.postMode||"value";a.extend(D,{onValidError:function(N,i){a(o).parents("td").addClass("coral-gridcell-error");N.stopPropagation()},onValidSuccess:function(N,i){a(o).parents("td").removeClass("coral-gridcell-error");N.stopPropagation()},onKeyDown:function(N,i){},onClick:function(N,i){N.stopPropagation()},dataCustom:{rowId:h,gridId:y.options.id}});var K=n[G].edittype;switch(K){case"autocomplete":var J=a(o).val();var M=typeof(D.source)=="string";
var I=D.onSelect;D=a.extend({},D,{onSelect:function(N,i){a(o).closest("td").attr("data-org",M?i.value:i.text);I&&I.apply(o,[N,i])}});if(M){D.postMode="text";a(o).autocomplete(D);a(o).autocomplete("setValue",J)}else{a(o).autocomplete(D);if(E=="value"){a(o).autocomplete("setValue",J)}else{a(o).autocomplete("setValue",J);a(o).autocomplete("setText",J)}}break;case"checkbox":a(o).checkbox(D);var F=["Yes","No"];if(D&&D.value){F=D.value.split(":")}if(a(o).val()==F[0]){a(o).checkbox("check")}else{a(o).checkbox("uncheck")}break;case"combogrid":case"combobox":case"combotree":a(o)[K](D);a(o)[K]("setValues",a(o).val().split(","));break;case"text":case"textarea":a(o)["textbox"](D);break;default:a(o)[K](D);break}w++}}});if(w>0){l.id=h;y.options.savedRow.push(l);a(p).attr("editable","1");a("td:eq("+t+") input",p).focus();if(u.keys===true){a(p).bind("keydown",function(o){if(o.keyCode===27){a(y.element).grid("restoreRow",h,u.afterrestorefunc);if(y.options._inlinenav){try{a(y.element).grid("showAddEditButtons")}catch(D){}}return false}if(o.keyCode===13){var i=o.target;if(i.tagName=="TEXTAREA"){return true}if(a(y.element).grid("saveRow",h,u)){if(y.options._inlinenav){try{a(y.element).grid("showAddEditButtons")}catch(C){}}}return false}})}y._trigger("onInlineEditRow",null,[{rowId:h,options:u}])}}},saveRow:function(l,i,g,h,q,n,b){var d=a.makeArray(arguments).slice(1),z={};if(a.type(d[0])==="object"){z=d[0]}else{if(a.isFunction(i)){z.successfunc=i}if(typeof g!=="undefined"){z.url=g}if(typeof h!=="undefined"){z.extraparam=h}if(a.isFunction(q)){z.aftersavefunc=q}if(a.isFunction(n)){z.errorfunc=n}if(a.isFunction(b)){z.afterrestorefunc=b}}z=a.extend(true,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:true,mtype:"POST"},a.grid.inlineEdit,z);var m=false;var D=this,c,F={},y={},x={},A,j,f,t;if(!D.grid){return m}t=a(D.element).grid("getInd",l,true);if(t===false){return m}if(this.options.autoValid){var C=this.valid(t.id);if(!this.options.allowSaveOnError&&!C){a.message("请确认是否输入正确！");
return C}}A=a(t).attr("editable");z.url=z.url?z.url:D.options.editurl;z.url=z.url?z.url:"clientArray";if(A==="1"){var r;a('td[role="gridcell"]',t).each(function(o){r=D.options.colModel[o];c=r.name;if(c!="cb"&&c!="subgrid"&&r.editable===true&&c!="rn"&&!a(this).hasClass("not-editable-cell")){var G=r.edittype;switch(G){case"checkbox":var k=["Yes","No"];if(r.editoptions){k=r.editoptions.value.split(":")}F[c]=a("input",this).is(":checked")?k[0]:k[1];break;case"datepicker":F[c]=a("input[type='hidden']",this).val();break;case"autocomplete":if(typeof(r.editoptions.source)=="string"){F[c]=a(".ctrl-init-"+G,this)[G]("getText")}else{F[c]=a(".ctrl-init-"+G,this)[G]("getValue")}break;case"text":case"password":case"textarea":case"button":F[c]=a("input, textarea",this).val();break;case"combogrid":case"combobox":case"combotree":F[c]=a(".ctrl-init-"+G,this)[G]("getValues").toString();y[c]=a(".ctrl-init-"+G,this)[G]("getText");if(r.formatter&&r.formatter==G){y={}}break;case"custom":try{if(r.editoptions&&a.isFunction(r.editoptions.custom_value)){F[c]=r.editoptions.custom_value.call(D,a(".customelement",this),"get");if(F[c]===undefined){throw"e2"}}else{throw"e1"}}catch(H){if(H=="e1"){a.grid.info_dialog(a.grid.errors.errcap,"function 'custom_value' "+a.grid.edit.msg.nodefined,a.grid.edit.bClose)}if(H=="e2"){a.grid.info_dialog(a.grid.errors.errcap,"function 'custom_value' "+a.grid.edit.msg.novalue,a.grid.edit.bClose)}else{a.grid.info_dialog(a.grid.errors.errcap,H.message,a.grid.edit.bClose)}}break}f=a.grid.checkValues(F[c],o,D);if(f[0]===false){f[1]=F[c]+" "+f[1];return false}if(D.options.autoencode){F[c]=a.grid.htmlEncode(F[c])}if(z.url!=="clientArray"&&r.editoptions){if(F[c]===""){x[c]="null"}}}});if(f[0]===false){try{var p=a.grid.findPos(a("#"+a.grid.coralID(l),D.grid.bDiv)[0]);a.grid.info_dialog(a.grid.errors.errcap,f[1],a.grid.edit.bClose,{left:p[0],top:p[1]})}catch(E){alert(f[1])}return m}var v,s,u;s=D.options.prmNames;u=s.oper;if(D.options.keyName===false){v=s.id}else{v=D.options.keyName
}if(F){F[u]=s.editoper;F[v]=l;if(typeof(D.options.inlineData)=="undefined"){D.options.inlineData={}}F=a.extend({},F,D.options.inlineData,z.extraparam)}if(z.url=="clientArray"){if(D.options.autoencode){a.each(F,function(k,e){F[k]=a.grid.htmlDecode(e)})}var w=a(D.element).grid("setRowData",l,F);a(t).attr("editable","0");for(var B=0;B<D.options.savedRow.length;B++){if(D.options.savedRow[B].id==l){j=B;break}}if(j>=0){D.options.savedRow.splice(j,1)}m=w;if(m){D.options.editrow=null}if(D.options.rowEditButtons){D.rowEditButtons.hide()}D._trigger("afterInlineSaveRow",null,[{rowId:l,options:z,status:w}]);if(a.isFunction(z.aftersavefunc)){z.aftersavefunc.call(D,l,w)}a(t).unbind("keydown")}else{a("#lui_"+a.grid.coralID(D.options.id)).show();x=a.extend({},F,x);x[v]=a.grid.stripPref(D.options.idPrefix,x[v]);a.ajax(a.extend({url:z.url,data:a.isFunction(D.options.serializeRowData)?D.options.serializeRowData.call(D,x):x,type:z.mtype,async:false,complete:function(G,H){a("#lui_"+a.grid.coralID(D.options.id)).hide();if(H==="success"){var o=true,I;I=D._trigger("inlineSuccessSaveRow",null,[{res:G,rowId:l,options:z}]);if(!a.isArray(I)){I=[true,F]}if(I[0]&&a.isFunction(z.successfunc)){I=z.successfunc.call(D,G)}if(a.isArray(I)){o=I[0];F=I[1]?I[1]:F}else{o=I}if(o===true){if(D.options.autoencode){a.each(F,function(J,k){F[J]=a.grid.htmlDecode(k)})}F=a.extend({},F,y);a(D.element).grid("setRowData",l,F);a(t).attr("editable","0");for(var e=0;e<D.options.savedRow.length;e++){if(D.options.savedRow[e].id==l){j=e;break}}if(j>=0){D.options.savedRow.splice(j,1)}a(D).triggerHandler("gridInlineAfterSaveRow",[l,G,F,z]);if(a.isFunction(z.aftersavefunc)){z.aftersavefunc.call(D,l,G)}m=true;D.options.editrow=null;if(D.rowEditButtons){D.rowEditButtons.hide()}D._trigger("afterInlineSaveRow",null,[{rowId:l,options:z,status:w}]);a(t).unbind("keydown")}else{a(D).triggerHandler("gridInlineErrorSaveRow",[l,G,H,null,z]);if(a.isFunction(z.errorfunc)){z.errorfunc.call(D,l,G,H,null)}if(z.restoreAfterError===true){a(D.element).grid("restoreRow",l,z.afterrestorefunc)
}}}},error:function(k,o,G){a("#lui_"+a.grid.coralID(D.options.id)).hide();a(D).triggerHandler("gridInlineErrorSaveRow",[l,k,o,G,z]);if(a.isFunction(z.errorfunc)){z.errorfunc.call(D,l,k,o,G)}else{try{a.grid.info_dialog(a.grid.errors.errcap,'<div class="coral-state-error">'+k.responseText+"</div>",a.grid.edit.bClose,{buttonalign:"right"})}catch(H){alert(k.responseText)}}if(z.restoreAfterError===true){a(D.element).grid("restoreRow",l,z.afterrestorefunc)}}},a.grid.ajaxOptions,D.options.ajaxRowOptions||{}))}}if(m){a(t).removeClass("new-row")}return m},restoreRow:function(b,l){var m=a.makeArray(arguments).slice(1),c={};if(a.type(m[0])==="object"){c=m[0]}else{if(a.isFunction(l)){c.afterrestorefunc=l}}c=a.extend(true,a.grid.inlineEdit,c);var h=this,i,d,g={};if(!h.grid){return}d=a(h.element).grid("getInd",b,true);if(h.options.editrow&&b==h.options.editrow){h.options.editrow=null;h.clearErrors(b)}if(d===false){return}for(var f=0;f<h.options.savedRow.length;f++){if(h.options.savedRow[f].id==b){i=f;break}}if(i>=0){if(a.isFunction(a.fn.datepicker)){try{a("input.hasDatepicker","#"+a.grid.coralID(d.id)).datepicker("hide")}catch(j){}}a.each(h.options.colModel,function(){if(this.editable===true&&this.name in h.options.savedRow[i]){g[this.name]=h.options.savedRow[i][this.name]}});a(h.element).grid("setRowData",b,g);a(d).attr("editable","0").unbind("keydown");h.options.savedRow.splice(i,1);if(a("#"+a.grid.coralID(b),"#"+a.grid.coralID(h.options.id)).hasClass("grid-new-row")){setTimeout(function(){a(h.element).grid("delRowData",b)},0)}}a(h).triggerHandler("gridInlineAfterRestoreRow",[b]);if(a.isFunction(c.afterrestorefunc)){c.afterrestorefunc.call(h,b)}if(h.options.rowEditButtons){h.rowEditButtons.hide()}},addRow:function(c){c=a.extend(true,{rowID:"new_row",initdata:{},position:"first",useDefValues:true,useFormatter:false,addRowParams:{extraparam:{}}},c||{});if(!this.grid){return}var e=this;if(c.useDefValues===true){a(e.options.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var g=this.editoptions.defaultValue,f=a.isFunction(g)?g.call(e):g;
c.initdata[this.name]=f}})}a(e.element).grid("addRowData",c.rowID,c.initdata,c.position);a("#"+a.grid.coralID(c.rowID),"#"+a.grid.coralID(e.options.id)).addClass("grid-new-row");if(c.useFormatter){a("#"+a.grid.coralID(c.rowID)+" .coral-inline-edit","#"+a.grid.coralID(e.options.id)).click()}else{var b=e.options.prmNames,d=b.oper;c.addRowParams.extraparam[d]=b.addoper;a(e.element).grid("editRow",c.rowID,c.addRowParams);a(e.element).grid("setSelection",c.rowID)}},clearEdited:function(c){var b=a(this.getInd(c,true));b.removeClass("edited");b.children("td").removeClass("dirty-cell")},inlineNav:function(b,c){c=a.extend({edit:true,editicon:"coral-icon-pencil",add:true,addicon:"coral-icon-plus",save:true,saveicon:"coral-icon-disk",cancel:true,cancelicon:"coral-icon-cancel",addParams:{useFormatter:false,rowID:"new_row"},editParams:{},restoreAfterSelect:true},a.grid.nav,c||{});return this.each(function(){if(!this.grid){return}var k=this,e,h=a.grid.coralID(k.options.id);k.options._inlinenav=true;if(c.addParams.useFormatter===true){var d=k.options.colModel,g;for(g=0;g<d.length;g++){if(d[g].formatter&&d[g].formatter==="actions"){if(d[g].formatoptions){var j={keys:false,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},f=a.extend(j,d[g].formatoptions);c.addParams.addRowParams={keys:f.keys,oneditfunc:f.onEdit,successfunc:f.onSuccess,url:f.url,extraparam:f.extraparam,aftersavefunc:f.afterSavef,errorfunc:f.onError,afterrestorefunc:f.afterRestore}}break}}}if(c.add){a(k.element).grid("navButtonAdd",b,{caption:c.addtext,title:c.addtitle,buttonicon:c.addicon,id:k.options.id+"_iladd",onClickButton:function(){a(k.element).grid("addRow",c.addParams);if(!c.addParams.useFormatter){a("#"+h+"_ilsave").removeClass("coral-state-disabled");a("#"+h+"_ilcancel").removeClass("coral-state-disabled");a("#"+h+"_iladd").addClass("coral-state-disabled");a("#"+h+"_iledit").addClass("coral-state-disabled")}}})}if(c.edit){a(k.element).grid("navButtonAdd",b,{caption:c.edittext,title:c.edittitle,buttonicon:c.editicon,id:k.options.id+"_iledit",onClickButton:function(){var i=a(k.element).grid("getGridParam","selrow");
if(i){a(k.element).grid("editRow",i,c.editParams);a("#"+h+"_ilsave").removeClass("coral-state-disabled");a("#"+h+"_ilcancel").removeClass("coral-state-disabled");a("#"+h+"_iladd").addClass("coral-state-disabled");a("#"+h+"_iledit").addClass("coral-state-disabled")}else{a.grid.viewModal("#alertmod",{gbox:"#gbox_"+h,jqm:true});a("#jqg_alrt").focus()}}})}if(c.save){a(k.element).grid("navButtonAdd",b,{caption:c.savetext||"",title:c.savetitle||"Save row",buttonicon:c.saveicon,id:k.options.id+"_ilsave",onClickButton:function(){var l=k.options.savedRow[0].id;if(l){var i=k.options.prmNames,m=i.oper;if(!c.editParams.extraparam){c.editParams.extraparam={}}if(a("#"+a.grid.coralID(l),"#"+h).hasClass("grid-new-row")){c.editParams.extraparam[m]=i.addoper}else{c.editParams.extraparam[m]=i.editoper}if(a(k.element).grid("saveRow",l,c.editParams)){a(k.element).grid("showAddEditButtons")}}else{a.grid.viewModal("#alertmod",{gbox:"#gbox_"+h,jqm:true});a("#jqg_alrt").focus()}}});a("#"+h+"_ilsave").addClass("coral-state-disabled")}if(c.cancel){a(k.element).grid("navButtonAdd",b,{caption:c.canceltext||"",title:c.canceltitle||"Cancel row editing",buttonicon:c.cancelicon,id:k.options.id+"_ilcancel",onClickButton:function(){var i=k.options.savedRow[0].id;if(i){a(k.element).grid("restoreRow",i,c.editParams);a(k.element).grid("showAddEditButtons")}else{a.grid.viewModal("#alertmod",{gbox:"#gbox_"+h,jqm:true});a("#jqg_alrt").focus()}}});a("#"+h+"_ilcancel").addClass("coral-state-disabled")}if(c.restoreAfterSelect===true){if(a.isFunction(k.options.beforeSelectRow)){e=k.options.beforeSelectRow}else{e=false}k.options.beforeSelectRow=function(m,l){var i=true;if(k.options.savedRow.length>0&&k.options._inlinenav===true&&(m!==k.options.selrow&&k.options.selrow!==null)){if(k.options.selrow==c.addParams.rowID){a(k.element).grid("delRowData",k.options.selrow)}else{a(k.element).grid("restoreRow",k.options.selrow,c.editParams)}a(k.element).grid("showAddEditButtons")}if(e){i=e.call(k,m,l)}return i}}})},showAddEditButtons:function(){return this.each(function(){if(!this.grid){return
}var b=a.grid.coralID(this.options.id);a("#"+b+"_ilsave").addClass("coral-state-disabled");a("#"+b+"_ilcancel").addClass("coral-state-disabled");a("#"+b+"_iladd").removeClass("coral-state-disabled");a("#"+b+"_iledit").removeClass("coral-state-disabled")})}})})(jQuery);

(function(b){b.fmatter={};b.extend(b.fmatter,{isBoolean:function(c){return typeof c==="boolean"},isObject:function(c){return(c&&(typeof c==="object"||b.isFunction(c)))||false},isString:function(c){return typeof c==="string"},isNumber:function(c){return typeof c==="number"&&isFinite(c)},isNull:function(c){return c===null},isUndefined:function(c){return typeof c==="undefined"},isValue:function(c){return(this.isObject(c)||this.isString(c)||this.isNumber(c)||this.isBoolean(c))},isEmpty:function(c){if(!this.isString(c)&&this.isValue(c)){return false}else{if(!this.isValue(c)){return true}}c=b.trim(c).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return c===""}});b.fn.fmatter=function(i,j,h,c,d){var e=j;h=b.extend({},b.grid.formatter,h);if(d==="edit"&&i!=="convertCode"&&h.rowId){b("#"+h.rowId,this.element).children("td[aria-describedby$='"+h.colModel.name+"']").attr("data-org",e)}if(d==="edit"&&h.colModel.cellEditoptions){var g=b.coral.toFunction(h.colModel.cellEditoptions).call(this,e,h,c);i=g&&g.type?g.type:i;if(i==="combobox"||i==="combogrid"||i==="combotree"||i==="convertCode"){return b.fn.fmatter.convertCode.call(this,j,h,c,d)}else{return e}}try{e=b.fn.fmatter[i].call(this,j,h,c,d)}catch(f){}return e};b.fmatter.util={NumberFormat:function(e,c){if(!b.fmatter.isNumber(e)){e*=1}if(b.fmatter.isNumber(e)){var g=(e<0);var m=e+"";var j=(c.decimalSeparator)?c.decimalSeparator:".";var k;if(b.fmatter.isNumber(c.decimalPlaces)){var l=c.decimalPlaces;var f=Math.pow(10,l);m=Math.round(e*f)/f+"";k=m.lastIndexOf(".");if(l>0){if(k<0){m+=j;k=m.length-1}else{if(j!=="."){m=m.replace(".",j)}}while((m.length-1-k)<l){m+="0"}}}if(c.thousandsSeparator){var o=c.thousandsSeparator;k=m.lastIndexOf(j);k=(k>-1)?k:m.length;var n=m.substring(k);var d=-1;for(var h=k;h>0;h--){d++;if((d%3===0)&&(h!==k)&&(!g||(h>1))){n=o+n}n=m.charAt(h-1)+n}m=n}m=(c.prefix)?c.prefix+m:m;m=(c.suffix)?m+c.suffix:m;return m}else{return e}},DateFormat:function(K,O,Q,A){var p=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,E=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,M=/[^-+\dA-Z]/g,q=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),g=((typeof O==="string")?O.match(q):null),L=function(j,i){j=String(j);
i=parseInt(i,10)||2;while(j.length<i){j="0"+j}return j},c={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},f=0,t,H,e,F=["i18n"];F.i18n={dayNames:A.dayNames,monthNames:A.monthNames};if(K in A.masks){K=A.masks[K]}if(!isNaN(O-0)&&String(K).toLowerCase()=="u"){f=new Date(parseFloat(O)*1000)}else{if(O.constructor===Date){f=O}else{if(g!==null){f=new Date(parseInt(g[1],10));if(g[3]){var h=Number(g[5])*60+Number(g[6]);h*=((g[4]=="-")?1:-1);h-=f.getTimezoneOffset();f.setTime(Number(Number(f)+(h*60*1000)))}}else{O=String(O).split(/[\\\/:_;.,\t\T\s-]/);K=K.split(/[\\\/:_;.,\t\T\s-]/);for(H=0,e=K.length;H<e;H++){if(K[H]=="M"){t=b.inArray(O[H],F.i18n.monthNames);if(t!==-1&&t<12){O[H]=t+1}}if(K[H]=="F"){t=b.inArray(O[H],F.i18n.monthNames);if(t!==-1&&t>11){O[H]=t+1-12}}if(O[H]){c[K[H].toLowerCase()]=parseInt(O[H],10)}}if(c.f){c.m=c.f}if(c.m===0&&c.y===0&&c.d===0){return"&#160;"}c.m=parseInt(c.m,10)-1;var P=c.y;if(P>=70&&P<=99){c.y=1900+c.y}else{if(P>=0&&P<=69){c.y=2000+c.y}}f=new Date(c.y,c.m,c.d,c.h,c.i,c.s,c.u)}}}if(Q in A.masks){Q=A.masks[Q]}else{if(!Q){Q="Y-m-d"}}var x=f.getHours(),J=f.getMinutes(),I=f.getDate(),D=f.getMonth()+1,C=f.getTimezoneOffset(),B=f.getSeconds(),y=f.getMilliseconds(),v=f.getDay(),d=f.getFullYear(),m=(v+6)%7+1,r=(new Date(d,D-1,I)-new Date(d,0,1))/86400000,l={d:L(I),D:F.i18n.dayNames[v],j:I,l:F.i18n.dayNames[v+7],N:m,S:A.S(I),w:v,z:r,W:m<5?Math.floor((r+m-1)/7)+1:Math.floor((r+m-1)/7)||((new Date(d-1,0,1).getDay()+6)%7<4?53:52),F:F.i18n.monthNames[D-1+12],m:L(D),M:F.i18n.monthNames[D-1],n:D,t:"?",L:"?",o:"?",Y:d,y:String(d).substring(2),a:x<12?A.AmPm[0]:A.AmPm[1],A:x<12?A.AmPm[2]:A.AmPm[3],B:"?",g:x%12||12,G:x,h:L(x%12||12),H:L(x),i:L(J),s:L(B),u:y,e:"?",I:"?",O:(C>0?"-":"+")+L(Math.floor(Math.abs(C)/60)*100+Math.abs(C)%60,4),P:"?",T:(String(f).match(E)||[""]).pop().replace(M,""),Z:"?",c:"?",r:"?",U:Math.floor(f/1000)};return Q.replace(p,function(i){return i in l?l[i]:i.substring(1)})}};b.fn.fmatter.defaultFormat=function(f,e,c,d){return(b.fmatter.isValue(f)&&f!=="")?f:e.defaultValue?e.defaultValue:"&#160;"
};b.fn.fmatter.email=function(f,e,c,d){if(!b.fmatter.isEmpty(f)){return'<a href="mailto:'+f+'">'+f+"</a>"}else{return b.fn.fmatter.defaultFormat(f,e)}};b.fn.fmatter.combobox=function(g,e,c,d){var h=b.extend({},e.combobox),f;if(!b.fmatter.isUndefined(e.colModel.formatoptions)){h=b.extend({},h,e.colModel.formatoptions)}if(h.disabled===true){f='disabled="disabled"'}else{f=""}if(b.fmatter.isEmpty(g)||b.fmatter.isUndefined(g)){g=""}g=g+"";return'<input class="parseformatter" data-formatter="combobox" data-pos="'+e.pos+'" type="text" value="'+g+'" '+f+"/>"};b.fn.fmatter.combotree=function(g,e,c,d){var h=b.extend({},e.combotree),f;if(!b.fmatter.isUndefined(e.colModel.formatoptions)){h=b.extend({},h,e.colModel.formatoptions)}if(h.disabled===true){f='disabled="disabled"'}else{f=""}if(b.fmatter.isEmpty(g)||b.fmatter.isUndefined(g)){g=""}g=g+"";return'<input class="parseformatter" data-formatter="combotree" data-pos="'+e.pos+'" type="text" value="'+g+'" '+f+"/>"};b.fn.fmatter.combogrid=function(g,e,c,d){var h=b.extend({},e.combogrid),f;if(!b.fmatter.isUndefined(e.colModel.formatoptions)){h=b.extend({},h,e.colModel.formatoptions)}if(h.disabled===true){f='disabled="disabled"'}else{f=""}if(b.fmatter.isEmpty(g)||b.fmatter.isUndefined(g)){g=""}g=g+"";return'<input class="parseformatter" data-formatter="combogrid" data-pos="'+e.pos+'" type="text" value="'+g+'" '+f+"/>"};b.fn.fmatter.autocomplete=function(g,e,c,d){var h=b.extend({},e.autocomplete),f;if(!b.fmatter.isUndefined(e.colModel.formatoptions)){h=b.extend({},h,e.colModel.formatoptions)}if(h.disabled===true){f='disabled="disabled"'}else{f=""}if(b.fmatter.isEmpty(g)||b.fmatter.isUndefined(g)){g=""}g=g+"";return'<input class="parseformatter" data-formatter="autocomplete" data-pos="'+e.pos+'" type="text" value="'+g+'" '+f+"/>"};b.fn.fmatter.toolbar=function(g,e,c,d){var h=b.extend({},e.toolbar),f;if(!b.fmatter.isUndefined(e.colModel.formatoptions)){h=b.extend({},h,e.colModel.formatoptions)}if(h.disabled===true){f='disabled="disabled"'
}else{f=""}if(b.fmatter.isEmpty(g)||b.fmatter.isUndefined(g)){g=""}g=g+"";return'<div class="parseformatter" data-formatter="toolbar" data-pos="'+e.pos+'" '+f+"/>"};b.fn.fmatter.text=function(g,e,c,d){var h=b.extend({},e.textbox),f;if(!b.fmatter.isUndefined(e.colModel.formatoptions)){h=b.extend({},h,e.colModel.formatoptions)}if(h.disabled===true){f='disabled="disabled"'}else{f=""}if(b.fmatter.isEmpty(g)||b.fmatter.isUndefined(g)){g=""}g=g+"";return'<input class="parseformatter" data-formatter="textbox" data-pos="'+e.pos+'" type="text" value="'+g+'" '+f+"/>"};b.fn.fmatter.datepicker=function(g,e,c,d){var h=b.extend({},e.datepicker),f;if(!b.fmatter.isUndefined(e.colModel.formatoptions)){h=b.extend({},h,e.colModel.formatoptions)}if(h.disabled===true){f='disabled="disabled"'}else{f=""}if(b.fmatter.isEmpty(g)||b.fmatter.isUndefined(g)){g=""}g=g+"";return'<input class="parseformatter" data-formatter="datepicker" data-pos="'+e.pos+'" type="text" value="'+g+'" '+f+"/>"};b.fn.fmatter.textarea=function(g,e,c,d){var h=b.extend({},e.textbox),f;if(!b.fmatter.isUndefined(e.colModel.formatoptions)){h=b.extend({},h,e.colModel.formatoptions)}if(h.disabled===true){f='disabled="disabled"'}else{f=""}if(b.fmatter.isEmpty(g)||b.fmatter.isUndefined(g)){g=""}g=g+"";return'<textarea class="parseformatter" data-formatter="textbox" data-pos="'+e.pos+'" '+f+"/>"+g+"</textarea>"};b.fn.fmatter.progressbar=function(g,e,c,d){var h=b.extend({},e.progressbar),f;if(!b.fmatter.isUndefined(e.colModel.formatoptions)){h=b.extend({},h,e.colModel.formatoptions)}if(h.disabled===true){f='disabled="disabled"'}else{f=""}if(b.fmatter.isEmpty(g)||b.fmatter.isUndefined(g)){g=""}g=g+"";return'<div class="parseformatter" data-formatter="progressbar" data-pos="'+e.pos+'" '+f+"/>"};b.fn.fmatter.convertCode=function(q,m,l,u){var g=m.colModel.formatoptions||m.colModel.editoptions||{},o=g.postMode||"value";var h="convertCode";if(m.colModel.cellEditoptions){var t=b.coral.toFunction(m.colModel.cellEditoptions).call(this,q,g,l);
g=t&&t.cellEditoptions?t.cellEditoptions:g;h=t&&t.type?t.type:"convertCode"}b("#"+m.rowId,this.element).children("td[aria-describedby$='"+m.colModel.name+"']").attr("data-org",q);if(h!=="convertCode"&&h!=="combobox"&&h!=="combogrid"){return q}var d=g.data,v=g.dataStructure||"list",c=g.valueField||"value",n=g.textField||"text",k=g.separator||",";if(typeof(q)==="undefined"||q===null){return""}if(o!="value"){return q}if(m.colModel.edittype=="combobox"&&g.code){d=g.code}if(m.colModel.edittype=="combotree"&&g.code){d=g.code}if(m.colModel.edittype=="combogrid"&&g.code){d=g.code}if(m.colModel.edittype=="combotree"){v="tree"}if(m.colModel.edittype=="autocomplete"&&typeof(g.code)=="string"){d=g.code}if(m.colModel.edittype=="autocomplete"&&g.source){d=g.source}var s=[],f=false,e=q.toString().split(k);if(v=="tree"){for(var r=0;r<e.length;r++){a(d,e[r],s)}}else{for(var r=0;r<e.length;r++){for(var p=0;p<d.length;p++){if(d[p][c]==e[r]){s.push(d[p][n]);f=true}}if(!f&&!g.forceSelection){s.push(e[r])}f=false}}return s.join(k)};function a(f,c,e){for(var d=0;d<f.length;d++){if(f[d].id==c){e.push(f[d].name)}else{if(f[d].children){a(f[d].children,c,e)}}}}b.fn.fmatter.checkbox=function(f,d){var g=b.extend({},d.checkbox),e;var c=["Yes","No"];if(!b.fmatter.isUndefined(d.colModel.formatoptions)){g=b.extend({},g,d.colModel.formatoptions);if(d.colModel.formatoptions&&d.colModel.formatoptions.value){c=d.colModel.formatoptions.value.split(":")}}if(g.disabled===true){e='disabled="disabled"'}else{e=""}if(b.fmatter.isEmpty(f)||b.fmatter.isUndefined(f)){f=""}f=f+"";return'<input class="parseformatter" data-formatter="checkbox" value=\''+f+"' data-pos=\""+d.pos+'" type="checkbox" '+e+"/>"};b.fn.afterFmatter=function(c){var d=this;b(".parseformatter",d.element).each(function(){b(this).removeClass("parseformatter");var i=b(this).attr("data-pos"),f=b(this).attr("data-formatter"),g=b.trim(b(this).val())===""?"":b(this).val(),h=b.extend({},d.options.colModel[i].formatoptions,{dataCustom:{rowId:b(this).closest("tr")[0].id,gridId:d.options.id}});
switch(f){case"combobox":case"combotree":case"combogrid":case"textbox":h.value=g;break;case"toolbar":case"progressbar":break;case"checkbox":var e=["Yes","No"];if(f&&d.options.colModel[i].formatoptions.value){e=d.options.colModel[i].formatoptions.value.split(":")}if(b(this).val()==e[0]){h.checked=true}else{h.checked=false}break}b(this)[f](h)})};b.fn.fmatter.link=function(e,c){var f={target:c.target};var d="";if(!b.fmatter.isUndefined(c.colModel.formatoptions)){f=b.extend({},f,c.colModel.formatoptions)}if(f.target){d="target="+f.target}if(!b.fmatter.isEmpty(e)){return"<a "+d+' href="'+e+'">'+e+"</a>"}else{return b.fn.fmatter.defaultFormat(e,c)}};b.fn.fmatter.showlink=function(e,c){var g={baseLinkUrl:c.baseLinkUrl,showAction:c.showAction,addParam:c.addParam||"",target:c.target,idName:c.idName},d="",f;if(!b.fmatter.isUndefined(c.colModel.formatoptions)){g=b.extend({},g,c.colModel.formatoptions)}if(g.target){d="target="+g.target}f=g.baseLinkUrl+g.showAction+"?"+g.idName+"="+c.rowId+g.addParam;if(b.fmatter.isString(e)||b.fmatter.isNumber(e)){return"<a "+d+' href="'+f+'">'+e+"</a>"}else{return b.fn.fmatter.defaultFormat(e,c)}};b.fn.fmatter.integer=function(d,c){var e=b.extend({},c.integer);if(!b.fmatter.isUndefined(c.colModel.formatoptions)){e=b.extend({},e,c.colModel.formatoptions)}if(b.fmatter.isEmpty(d)){return e.defaultValue}return b.fmatter.util.NumberFormat(d,e)};b.fn.fmatter.number=function(d,c){var e=b.extend({},c.number);if(!b.fmatter.isUndefined(c.colModel.formatoptions)){e=b.extend({},e,c.colModel.formatoptions)}if(b.fmatter.isEmpty(d)){return e.defaultValue}return b.fmatter.util.NumberFormat(d,e)};b.fn.fmatter.currency=function(d,c){var e=b.extend({},c.currency);if(!b.fmatter.isUndefined(c.colModel.formatoptions)){e=b.extend({},e,c.colModel.formatoptions)}if(b.fmatter.isEmpty(d)){return e.defaultValue}return b.fmatter.util.NumberFormat(d,e)};b.fn.fmatter.date=function(h,g,c,d){var i=b.extend({},g.date);if(!b.fmatter.isUndefined(g.colModel.formatoptions)){i=b.extend({},i,g.colModel.formatoptions)
}var f=i.srcDateFormat||i.dateFormat;var e=b.datepicker.parseDate(f,h||"");return b.datepicker.formatDate(i.dateFormat,e)||""};b.fn.fmatter.select=function(h,c){h=h+"";var f=false,l=[],p,e;if(!b.fmatter.isUndefined(c.colModel.formatoptions)){f=c.colModel.formatoptions.value;p=c.colModel.formatoptions.separator===undefined?":":c.colModel.formatoptions.separator;e=c.colModel.formatoptions.delimiter===undefined?";":c.colModel.formatoptions.delimiter}else{if(!b.fmatter.isUndefined(c.colModel.editoptions)){f=c.colModel.editoptions.value;p=c.colModel.editoptions.separator===undefined?":":c.colModel.editoptions.separator;e=c.colModel.editoptions.delimiter===undefined?";":c.colModel.editoptions.delimiter}}if(f){var o=c.colModel.editoptions.multiple===true?true:false,n=[],m;if(o){n=h.split(",");n=b.map(n,function(i){return b.trim(i)})}if(b.fmatter.isString(f)){var d=f.split(e),g=0;for(var k=0;k<d.length;k++){m=d[k].split(p);if(m.length>2){m[1]=b.map(m,function(q,j){if(j>0){return q}}).join(p)}if(o){if(b.inArray(m[0],n)>-1){l[g]=m[1];g++}}else{if(b.trim(m[0])==b.trim(h)){l[0]=m[1];break}}}}else{if(b.fmatter.isObject(f)){if(o){l=b.map(n,function(i){return f[i]})}else{l[0]=f[h]||""}}}}h=l.join(", ");return h===""?b.fn.fmatter.defaultFormat(h,c):h};b.fn.fmatter.rowactions=function(m,h,i,k){var g={keys:false,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null,delOptions:{},editOptions:{}};m=b.grid.coralID(m);h=b.grid.coralID(h);var l=b("#"+h)[0].options.colModel[k];if(!b.fmatter.isUndefined(l.formatoptions)){g=b.extend(g,l.formatoptions)}if(!b.fmatter.isUndefined(b("#"+h)[0].options.editOptions)){g.editOptions=b("#"+h)[0].options.editOptions}if(!b.fmatter.isUndefined(b("#"+h)[0].options.delOptions)){g.delOptions=b("#"+h)[0].options.delOptions}var e=b("#"+h)[0];var f=function(o,n){if(b.isFunction(g.afterSave)){g.afterSave.call(e,o,n)}b("tr#"+m+" div.coral-inline-edit, tr#"+m+" div.coral-inline-del","#"+h+".coral-grid-btable:first").show();
b("tr#"+m+" div.coral-inline-save, tr#"+m+" div.coral-inline-cancel","#"+h+".coral-grid-btable:first").hide()},j=function(n){if(b.isFunction(g.afterRestore)){g.afterRestore.call(e,n)}b("tr#"+m+" div.coral-inline-edit, tr#"+m+" div.coral-inline-del","#"+h+".coral-grid-btable:first").show();b("tr#"+m+" div.coral-inline-save, tr#"+m+" div.coral-inline-cancel","#"+h+".coral-grid-btable:first").hide()};if(b("#"+m,"#"+h).hasClass("grid-new-row")){var d=e.options.prmNames,c=d.oper;g.extraparam[c]=d.addoper}switch(i){case"edit":b("#"+h).grid("editRow",m,g.keys,g.onEdit,g.onSuccess,g.url,g.extraparam,f,g.onError,j);b("tr#"+m+" div.coral-inline-edit, tr#"+m+" div.coral-inline-del","#"+h+".coral-grid-btable:first").hide();b("tr#"+m+" div.coral-inline-save, tr#"+m+" div.coral-inline-cancel","#"+h+".coral-grid-btable:first").show();b(e).triggerHandler("jqGridAfterGridComplete");break;case"save":if(b("#"+h).grid("saveRow",m,g.onSuccess,g.url,g.extraparam,f,g.onError,j)){b("tr#"+m+" div.coral-inline-edit, tr#"+m+" div.coral-inline-del","#"+h+".coral-grid-btable:first").show();b("tr#"+m+" div.coral-inline-save, tr#"+m+" div.coral-inline-cancel","#"+h+".coral-grid-btable:first").hide();b(e).triggerHandler("jqGridAfterGridComplete")}break;case"cancel":b("#"+h).grid("restoreRow",m,j);b("tr#"+m+" div.coral-inline-edit, tr#"+m+" div.coral-inline-del","#"+h+".coral-grid-btable:first").show();b("tr#"+m+" div.coral-inline-save, tr#"+m+" div.coral-inline-cancel","#"+h+".coral-grid-btable:first").hide();b(e).triggerHandler("jqGridAfterGridComplete");break;case"del":b("#"+h).grid("delGridRow",m,g.delOptions);break;case"formedit":b("#"+h).grid("setSelection",m);b("#"+h).grid("editGridRow",m,g.editOptions);break}};b.fn.fmatter.actions=function(f,d){var h={keys:false,editbutton:true,delbutton:true,editformbutton:false};if(!b.fmatter.isUndefined(d.colModel.formatoptions)){h=b.extend(h,d.colModel.formatoptions)}var c=d.rowId,g="",e;if(typeof(c)=="undefined"||b.fmatter.isEmpty(c)){return""}if(h.editformbutton){e="onclick=jQuery.fn.fmatter.rowactions('"+c+"','"+d.gid+"','formedit',"+d.pos+"); onmouseover=jQuery(this).addClass('coral-state-hover'); onmouseout=jQuery(this).removeClass('coral-state-hover'); ";
g=g+"<div title='"+b.grid.nav.edittitle+"' style='float:left;cursor:pointer;' class='coral-pg-div coral-inline-edit' "+e+"><span class='coral-icon coral-icon-pencil'></span></div>"}else{if(h.editbutton){e="onclick=jQuery.fn.fmatter.rowactions('"+c+"','"+d.gid+"','edit',"+d.pos+"); onmouseover=jQuery(this).addClass('coral-state-hover'); onmouseout=jQuery(this).removeClass('coral-state-hover') ";g=g+"<div title='"+b.grid.nav.edittitle+"' style='float:left;cursor:pointer;' class='coral-pg-div coral-inline-edit' "+e+"><span class='coral-icon coral-icon-pencil'></span></div>"}}if(h.delbutton){e="onclick=jQuery.fn.fmatter.rowactions('"+c+"','"+d.gid+"','del',"+d.pos+"); onmouseover=jQuery(this).addClass('coral-state-hover'); onmouseout=jQuery(this).removeClass('coral-state-hover'); ";g=g+"<div title='"+b.grid.nav.deltitle+"' style='float:left;margin-left:5px;' class='coral-pg-div coral-inline-del' "+e+"><span class='coral-icon coral-icon-trash'></span></div>"}e="onclick=jQuery.fn.fmatter.rowactions('"+c+"','"+d.gid+"','save',"+d.pos+"); onmouseover=jQuery(this).addClass('coral-state-hover'); onmouseout=jQuery(this).removeClass('coral-state-hover'); ";g=g+"<div title='"+b.grid.edit.bSubmit+"' style='float:left;display:none' class='coral-pg-div coral-inline-save' "+e+"><span class='coral-icon coral-icon-disk'></span></div>";e="onclick=jQuery.fn.fmatter.rowactions('"+c+"','"+d.gid+"','cancel',"+d.pos+"); onmouseover=jQuery(this).addClass('coral-state-hover'); onmouseout=jQuery(this).removeClass('coral-state-hover'); ";g=g+"<div title='"+b.grid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='coral-pg-div coral-inline-cancel' "+e+"><span class='coral-icon coral-icon-cancel'></span></div>";return"<div style='margin-left:8px;'>"+g+"</div>"};b.unformat=function(g,p,l,e,d){var j,d=d||"formatter",h=p.colModel[d],f,i=p.colModel.formatoptions||{},o,n=/([\.\*\_\'\(\)\{\}\+\?\\])/g,k=p.colModel.unformat||(b.fn.fmatter[h]&&b.fn.fmatter[h].unformat);k=b.coral.toFunction(k);
if(p.colModel.edittype=="combobox"&&p.colModel.revertCode||p.colModel.edittype=="combotree"&&p.colModel.revertCode||p.colModel.edittype=="combogrid"&&p.colModel.revertCode||p.colModel.edittype=="datepicker"&&p.colModel.revertCode||p.colModel.edittype=="autocomplete"&&p.colModel.revertCode||p.colModel.revertCode){if(h=="autocomplete"||h=="datepicker"||h=="combobox"||h=="combotree"||h=="combogrid"){}else{h="convertCode"}}if(typeof k!=="undefined"&&b.isFunction(k)){j=k.call(this,b(g).text(),p,g)}else{if(!b.fmatter.isUndefined(h)&&b.fmatter.isString(h)){var c=b.grid.formatter||{},m;switch(h){case"integer":i=b.extend({},c.integer,i);o=i.thousandsSeparator.replace(n,"\\$1");m=new RegExp(o,"g");j=b(g).text().replace(m,"");break;case"number":i=b.extend({},c.number,i);o=i.thousandsSeparator.replace(n,"\\$1");m=new RegExp(o,"g");j=b(g).text().replace(m,"").replace(i.decimalSeparator,".");break;case"currency":i=b.extend({},c.currency,i);o=i.thousandsSeparator.replace(n,"\\$1");m=new RegExp(o,"g");j=b(g).text();if(i.prefix&&i.prefix.length){j=j.substr(i.prefix.length)}if(i.suffix&&i.suffix.length){j=j.substr(0,j.length-i.suffix.length)}j=j.replace(m,"").replace(i.decimalSeparator,".");break;case"checkbox":j=b.unformat.checkbox(g,p,l,e);break;case"select":j=b.unformat.select(g,p,l,e);break;case"date":j=b.unformat.date(g,p,l,e);break;case"combobox":case"combogrid":case"combotree":j=b.unformat[h](g,p,l,e);break;case"datepicker":j=b.unformat.datepicker(g,p,l,e);break;case"autocomplete":j=b.unformat.autocomplete(g,p,l,e);break;case"text":case"textarea":j=b.unformat.textbox(g,p,l,e);break;case"convertCode":if(e=="get"){if(p.colModel.revertCode==true){j=b.unformat.convertCode(g,p,l,e)}else{j=b(g).text()}}else{if(p.colModel.postMode=="value"){j=b.unformat.convertCode(g,p,l,e)}else{j=b(g).text()}}break;case"actions":return"";default:j=b(g).text()}}}return j!==undefined?j:e===true?b(g).text():b.grid.htmlDecode(b(g).html())};b.unformat.autocomplete=function(e,j,h,d){var g=[];var i=b(e).text();
if(d===true){return i}var f=b.extend({},!b.fmatter.isUndefined(j.colModel.formatoptions)?j.colModel.formatoptions:j.colModel.editoptions),k=f.separator===undefined?":":f.separator,c=f.delimiter===undefined?";":f.delimiter;if(j.colModel.revertCode){return b(e).find(".ctrl-init").autocomplete("getValue").toString()}else{return b(e).find(".ctrl-init").autocomplete("getText")}};b.unformat.combobox=function(e,j,h,d){var g=[];var i=b(e).text();if(d===true){return i}var f=b.extend({},!b.fmatter.isUndefined(j.colModel.formatoptions)?j.colModel.formatoptions:j.colModel.editoptions),k=f.separator===undefined?":":f.separator,c=f.delimiter===undefined?";":f.delimiter;if(j.colModel.revertCode){return b(e).find(".ctrl-init").combobox("getValue")}else{return b(e).find(".ctrl-init").combobox("getText")}};b.unformat.combotree=function(e,j,h,d){var g=[];var i=b(e).text();if(d===true){return i}var f=b.extend({},!b.fmatter.isUndefined(j.colModel.formatoptions)?j.colModel.formatoptions:j.colModel.editoptions),k=f.separator===undefined?":":f.separator,c=f.delimiter===undefined?";":f.delimiter;if(j.colModel.revertCode){return b(e).find(".ctrl-init").combotree("getValue").toString()}else{return b(e).find(".ctrl-init").combotree("getText")}};b.unformat.combogrid=function(e,j,h,d){var g=[];var i=b(e).text();if(d===true){return i}var f=b.extend({},!b.fmatter.isUndefined(j.colModel.formatoptions)?j.colModel.formatoptions:j.colModel.editoptions),k=f.separator===undefined?":":f.separator,c=f.delimiter===undefined?";":f.delimiter;if(j.colModel.revertCode){return b(e).find(".ctrl-init").combogrid("getValue")}else{return b(e).find(".ctrl-init").combogrid("getText")}};b.unformat.textbox=function(e,j,h,d){var g=[];var i=b(e).text();if(d===true){return i}var f=b.extend({},!b.fmatter.isUndefined(j.colModel.formatoptions)?j.colModel.formatoptions:j.colModel.editoptions),k=f.separator===undefined?":":f.separator,c=f.delimiter===undefined?";":f.delimiter;return b(e).find(".ctrl-init").textbox("getValue")};
b.unformat.datepicker=function(e,j,h,d){var g=[];var i=b(e).text();if(d===true){return i}var f=b.extend({},!b.fmatter.isUndefined(j.colModel.formatoptions)?j.colModel.formatoptions:j.colModel.editoptions),k=f.separator===undefined?":":f.separator,c=f.delimiter===undefined?";":f.delimiter;return b(e).find(".ctrl-init").datepicker("getValue")};b.unformat.convertCode=function(e,c,f,d){return b(e).attr("data-org")};b.unformat.select=function(h,s,n,e){var m=[];var q=b(h).text();if(e===true){return q}var l=b.extend({},!b.fmatter.isUndefined(s.colModel.formatoptions)?s.colModel.formatoptions:s.colModel.editoptions),t=l.separator===undefined?":":l.separator,d=l.delimiter===undefined?";":l.delimiter;if(l.value){var f=l.value,r=l.multiple===true?true:false,p=[],o;if(r){p=q.split(",");p=b.map(p,function(i){return b.trim(i)})}if(b.fmatter.isString(f)){var c=f.split(d),g=0;for(var k=0;k<c.length;k++){o=c[k].split(t);if(o.length>2){o[1]=b.map(o,function(u,j){if(j>0){return u}}).join(t)}if(r){if(b.inArray(o[1],p)>-1){m[g]=o[0];g++}}else{if(b.trim(o[1])==b.trim(q)){m[0]=o[0];break}}}}else{if(b.fmatter.isObject(f)||b.isArray(f)){if(!r){p[0]=q}m=b.map(p,function(j){var i;b.each(f,function(u,v){if(v==j){i=u;return false}});if(typeof(i)!="undefined"){return i}})}}return m.join(", ")}else{return q||""}};b.unformat.date=function(d,c){if(c.revertCode){return b(d).attr("data-org")}else{return b(d).text()}};b.unformat.checkbox=function(e,d){var f=b.extend({},!b.fmatter.isUndefined(d.colModel.formatoptions)?d.colModel.formatoptions:d.colModel.editoptions);var c=(f.value)?f.value.split(":"):["Yes","No"];return b("input",e).is(":checked")?c[0]:c[1]}})(jQuery);

(function(a,b){a.component("coral.textbox",a.coral.inputbase,{version:a.coral.version,castProperties:["dataCustom","title","buttons","buttonOptions","triggers"],options:{swfPath:a.coral.contextPath+"/jquery-cui/resource/swfupload.swf",hasTips:false,showStar:true,showClose:false,dataCustom:null,value:"",readonly:false,readonlyInput:false,disabled:false,required:false,isLabel:false,title:null,buttons:[],useHiddenInput:true,errMsg:null,errMsgPosition:"leftBottom",placeholder:"",type:"text",labelField:null,starBefore:false,valueChangedOnKeyUp:false,onClick:null,onChange:null,onBlur:null,onFocus:null,onKeyDown:null,onKeyUp:null,onKeyPress:null,onEnter:null,onMouseEnter:null,onMouseLeave:null,onCreate:null,onValidSuccess:null,onValidError:null,onValidWarn:null,onUploadSuccess:null,buttonOptions:null,triggers:null,excluded:false},button:function(){if(null!==this.options.buttonOptions){return this.$button}},component:function(){return this.uiTextbox},focus:function(){if(this.options.disabled||this.options.isLabel||this.options.readonly||this.options.readonlyInput){return false}if("hidden"==this.element.attr("type")){return}var c=this;this.element.focus();return true},_create:function(){var c=this;if(c.options.hasTips){c.options.title=true}if("hidden"!==this.element.attr("type")&&"file"!==this.element.attr("type")&&"password"!==this.element.attr("type")&&"text"!==this.element.attr("type")&&"INPUT"==this.element[0].tagName.toUpperCase()){this.element.attr("type","text")}this.element.addClass("ctrl-form-element");if(this.options.dataCustom){this.element.attr("data-custom",this.options.dataCustom)}this._initElement();this.setValue(this.element.val(),false);this.originalValue=this.getValue();this._bindEvents();if(null!==this.options.buttonOptions){this._outerButtons()}c._trigger("onCreate",null,[])},_outerButtons:function(){this.uiDialogOuterButtonPanel=a('<span class="coral-outerbuttonset coral-corner-all "></span>');this.component().append(this.uiDialogOuterButtonPanel);this._createButtons(this.options.buttonOptions,null,this.uiDialogOuterButtonPanel);
this.component().css("padding-right",this.uiDialogOuterButtonPanel.outerWidth()+8)},_getButtonEl:function(){return a("<button type='button'></button>").addClass("coral-textbox-button")},reset:function(){this.setValue(this.originalValue)},_initSimple:function(){var c=this,d=c.element.uniqueId().attr("id")},_initUpload:function(){var c=this,d=c.element.uniqueId().attr("id");c.select=[];a(this.element).wrap('<span class="coral-file-default"></span>').before("<span class='coral-file'>请选择...</span>").before("<div id='"+d+"_upload'></div>").before("<div id='"+d+"_queue'></div>").hide();c.uploader=a("#"+d+"_upload");c.uploader.uploadify({swf:this.options.swfPath,uploader:c.options.uploadUrl,queueID:d+"_queue",height:"28",width:"800",buttonText:"浏览",onDialogOpen:function(){c.select=[]},onDialogClose:function(){},onSelect:function(e){c.select.push(e.name);c.uiTextbox.find(".coral-file").html(c.select.join(","));c.uiTextbox.find("object").attr("title",c.select.join(","))},onCancel:function(e){},onQueueComplete:function(e){setTimeout(function(){a("#"+d+"_queue").dialog("close");c.select=[]},3500)},onUploadSuccess:function(f,g,e){c._trigger("onUploadSuccess",null,[{file:f,data:g,response:e}])},auto:false});a("#"+d+"_queue").dialog({autoOpen:false,modal:false,resizable:false,onOpen:function(){c.uploader.uploadify("upload","*")}})},upload:function(c){var d=this;var e=d.element[0].id;if(this.select.length===0){return}a("#"+e+"_queue").dialog("open")},cancel:function(c){this.uploader.uploadify("cancel")},clear:function(c){this.select=[];this.uiTextbox.find(".coral-file").html("请选择...");this.uiTextbox.find("object").attr("title","请选择...");this.uploader.uploadify("cancel")},_getIcon:function(g){var c=[];if(typeof g==="undefined"||g==null||g==""){return[]}if(typeof g=="object"){for(var f in g){var h={};h[g[f].icon]=g[f].click;c.push(h)}}else{var e=a.trim(g).split(",");for(var f in e){var d=e[f].split(" ");var h={};h[d[0]]=d[1];c.push(h)}}return c},_triggerClick:function(c,e,f){var d=this;
var g=a.coral.toFunction(c);e=a.Event(e);return g.apply(d.element[0],[e].concat(f))},_updateLabel:function(c){this.uiLabel.html(c)},_initElement:function(){var h=this,d=null,e=h.options;this.uiTextbox=a('<span class="coral-textbox"><span class="coral-textbox-border coral-corner-all"></span></span>').insertAfter(h.element);h.elementBorder=h.uiTextbox.find(".coral-textbox-border");h.element.appendTo(h.elementBorder);h.element.addClass("coral-textbox-default coral-validation-textbox");if(this.options.buttons.length>0){this._createButtonPanel()}if(e.labelField){this.uiLabel=a('<label class="coral-label">'+e.labelField+"</label>");this.elementBorder.before(this.uiLabel);this.uiTextbox.addClass("coral-hasLabel")}if(this.options.useHiddenInput){this.valuebox=a("<input type='hidden' class='coral-value-textbox'>").appendTo(this.uiTextbox)}else{this.valuebox=this.element}if("hidden"==this.element.attr("type")){h.uiTextbox.hide()}if("TEXTAREA"==this.element[0].tagName){h.component().addClass("coral-textbox-textarea")}if("file"==h.element.attr("type")){if("uploadify"==h.options.formatter){h._initUpload()}if("simple"==h.options.formatter||typeof h.options.formatter=="undefined"){h._initSimple()}}var c=[],g=null;if((c=h._getIcon(h.options.icons)).length!=0){g=true}else{if((c=h._getIcon(h.options.texticons)).length!=0){g=false}}if(g!=null){this.uiDialogButtonPanel=a('<span class="coral-textbox-btn-icons coral-corner-right"></span>');h.elementBorder.append(this.uiDialogButtonPanel);for(var f in c){a.each(c[f],function(i,k){var j=a('<span class="coral-textbox-btn-ico icon"></span>');if(g){j.addClass(i)}else{j.addClass("coral-textbox-btn-textico").html(i)}j.bind("click"+h.eventNamespace,function(l){if(h.options.disabled){return}h._triggerClick(k,l,[{value:h.element.val()}])});h.uiDialogButtonPanel.append(j)})}this.rightPos=this.uiDialogButtonPanel.outerWidth()}if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)
}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name")}else{if(this.options.name){this.element.attr("name",this.options.name)}}if("TEXTAREA"===this.element[0].tagName){if(a.trim(this.element.text())!==""){this.options.value=this.element.text()}else{if(this.options.value){this.element.text(this.options.value)}}}else{if(a.trim(this.element.val())!==""){this.options.value=this.element.val()}else{if(this.options.value){this.element.val(this.options.value)}}}if(e.width!==""&&e.width!==b){this.uiTextbox.css("width",e.width)}if(e.height!==""&&e.height!==b){this._setOption("height",e.height)}if(e.readonlyInput){this._setReadonlyInput()}if(e.readonly){this._setReadonly()}if(typeof e.isLabel=="boolean"&&e.isLabel){this._setReadonly();this.options.readonly=true;this.component().addClass("coral-isLabel");return}if(typeof e.disabled==="boolean"&&e.disabled){this._setOption("disabled",e.disabled)}if(this.options.showClose){this.uiClose=a("<span class='coral-textbox-close cui-icon-cross2'></span>");this.elementBorder.append(this.uiClose);this.uiClose.css("right",this.rightPos?this.rightPos:0)}this.element.attr("placeholder",e.placeholder);if(e.placeholder&&""===this.element.val()){this._showPlaceholder()}this._updateTitle();this._refresh()},_setReadonlyInput:function(){if(typeof this.element.attr("readonly")!="undefined"){this.options.readonlyInput=this.element.prop("readonly")}else{if(this.options.readonlyInput){this.element.prop("readonly",this.options.readonlyInput)}}if(this.element.prop("readonly")){this.component().addClass("coral-readonlyInput")}},_setReadonly:function(){this.options.readonlyInput=true;this._setReadonlyInput();this.component().removeClass("coral-readonlyInput").addClass("coral-readonly")},_updateTitle:function(){var d=this,c=this.options;if(c.title==true){d.element.attr("title",d.element.val())}else{if(c.title==false){d.element.attr("title","")}else{d.element.attr("title",c.title)}}},_showPlaceholder:function(){if(a.support.placeholder){return
}var d=this,c=a("<span class='coral-textbox-placeholder-label'>"+d.options.placeholder+"</span>");a(d.element).after(c)},_hidePlaceholder:function(){if(a.support.placeholder){return}var c=this;c.uiTextbox.find(".coral-textbox-placeholder-label").remove()},_bindEvents:function(){var e=this,d=this.options;var c;this._on({"mouseenter.coral-textbox-border":function(f){if(typeof d.isLabel=="boolean"&&d.isLabel){return}if(typeof d.readonly=="boolean"&&d.readonly){return}e.component().addClass("coral-textbox-hover");this._trigger("onMouseEnter",f,[])},"mouseleave.coral-textbox-border":function(f){if(typeof d.isLabel=="boolean"&&d.isLabel){return}if(typeof d.readonly=="boolean"&&d.readonly){return}e.component().removeClass("coral-textbox-hover");this._trigger("onMouseLeave",f,[])},click:function(f){e._hidePlaceholder();this._trigger("onClick",f,[])},"click.coral-textbox-placeholder-label":function(f){e._hidePlaceholder();e.element.focus()},dblclick:function(f){this._trigger("onDblClick",f,[])},blur:function(f){this.component().removeClass("coral-state-focus");if(""===this.element.val()){this._showPlaceholder()}if(c){c=false;return}this.setValue(this.element.val(),true);this._trigger("onBlur",f,[])},focusin:function(f){if(d.isLabel||d.readonly||d.readonlyInput){this._trigger("onFocus",f,[{value:this.valuebox.val(),text:this.element.val()}]);return}this.component().addClass("coral-state-focus");this._trigger("onFocus",f,[{value:this.valuebox.val(),text:this.element.val()}])},keydown:function(f){if(d.isLabel||d.readonly||d.readonlyInput){return}this._trigger("onKeyDown",f,[{value:this.valuebox.val(),text:this.element.val(),id:this.options.id}]);if(f.keyCode==13){this.setValue(this.element.val(),true);this._trigger("onEnter",f,[{value:this.valuebox.val(),text:this.element.val()}])}this._hidePlaceholder()},keypress:function(f){if(d.isLabel||d.readonly||d.readonlyInput){return}this._trigger("onKeyPress",f,[{value:this.valuebox.val(),text:this.element.val()}])},keyup:function(f){if(d.isLabel||d.readonly||d.readonlyInput){return
}if(this.options.valueChangedOnKeyUp){this.setValue(this.element.val(),true,false)}this._trigger("onKeyUp",f,[{value:this.valuebox.val(),text:this.element.val(),id:this.options.id}])},"click.coral-textbox-close":function(f){f.preventDefault();this.setValue("",true);if(this.options.placeholder){this._showPlaceholder()}this._trigger("onCloseClick",event,[])},"mousedown.coral-textbox-close":function(f){f.stopPropagation();c=true}})},_refresh:function(){var d=this,c=this.options},_setOption:function(f,h){var g=this;if(f==="id"||f==="name"||f==="type"){return}if(f==="height"){if(h){this.component().outerHeight(h);this.uiTextbox.find(".coral-textbox-btn-textico").css({"line-height":(h-6)+"px",height:h+"px"})}}if(f==="width"){if(h){this.component().outerWidth(h)}}this._super(f,h);if(f==="placeholder"){this.element.attr("placeholder",this.options.placeholder);if(this.getValue()===""){this._showPlaceholder()}}if(f=="texticons"){var d=g._getIcon(g.options.texticons);var c=a('<span class="coral-textbox-btn-icons coral-corner-right"></span>');g.elementBorder.find(".coral-textbox-btn-icons").replaceWith(c);for(var e in d){a.each(d[e],function(i,k){var j=a('<span class="coral-textbox-btn-ico icon"></span>').addClass("coral-textbox-btn-textico").html(i);j.bind("click"+g.eventNamespace,function(l){if(g.options.disabled){return}g._triggerClick(k,l,[{value:g.element.val()}])});c.append(j)})}}if(f==="value"){g._updateTitle();g.setValue(h,false)}if(f==="isLabel"){if(typeof h=="boolean"&&h){this._setReadonly();this.component().removeClass("coral-readonly").addClass("coral-isLabel")}else{if(typeof h=="boolean"&&!h){this.element.prop("readonly",false);this.options.readonly=false;this.component().removeClass("coral-isLabel coral-readonly")}}}if(f==="readonly"){if(typeof h=="boolean"&&h){this._setReadonly();this.component().removeClass("coral-isLabel").addClass("coral-readonly")}else{if(typeof h=="boolean"&&!h){this.element.prop("readonly",false);this.options.readonly=false;this.options.readonlyInput=false;
this.element.prop("readonly",false);this.component().removeClass("coral-isLabel coral-readonly")}}}if(f==="readonlyInput"){if(typeof h=="boolean"&&h){this._setReadonlyInput();this.component().removeClass("coral-isLabel").addClass("coral-readonlyInput")}else{if(typeof h=="boolean"&&!h){this.element.prop("readonly",false);this.options.readonlyInput=false;this.component().removeClass("coral-isLabel coral-readonlyInput")}}}if(f==="disabled"){if(h){this.element.prop("disabled",true)}else{this.element.prop("disabled",false)}}if(f==="labelField"){g._updateLabel(h)}if(f==="title"){g._updateTitle()}if(f==="hasTips"){g._updateTitle()}},_destroy:function(){this.uiTextbox.replaceWith(this.element);this.element.val("");this.element.removeAttr("value");this.element.removeClass("coral-textbox-default").removeClass("coral-validation-textbox").removeClass("coral-textbox-hover").removeClass("coral-textbox-textarea").removeClass("coral-textbox-input").removeAttr("placeholder").removeAttr("title").removeAttr("readonly").removeAttr("disabled")},disable:function(){this._setOption("disabled",true)},enable:function(){this._setOption("disabled",false)},getHtml:function(){return this.element.text()},setHtml:function(){this.element.text(value);this._updateTitle()},getValue:function(){return this.valuebox.val()},getValidateValue:function(){return this.getText()},getText:function(){if(this.component().hasClass("coral-state-focus")){if(this.element.is("textarea")){return this.element.text()}else{return this.element.val()}}else{return this.valuebox.val()}},setValue:function(g,d,f){g=g===null||typeof(g)==="undefined"?"":g;var h=g,e;f=f!==false?true:false;var c=a.coral.toFunction(this.options.formatterText);if(a.isFunction(c)){h=c.apply(this.options.element,[{value:g}])}if(f){this.setText(h)}this.valuebox.val(g);this.options.value=g;if(d&&this.previous!=g){this._trigger("onChange",null,[{value:g,text:h}])}this.previous=g;if(g!==""){this._hidePlaceholder()}},setText:function(c){if(this.element.is("textarea")){this.element.val(c);
this.element.text(c)}else{this.element.val(c)}this._updateTitle()},formValue:function(){var d={},c=this.element.attr("name");if(!c){return null}d[c]=this.getValue();return d}})})(jQuery);

(function(a,b){a.component("coral.toolbar",{version:"4.0.2",castProperties:["data","dataCustom","dropdownOptions"],options:{clickToDisplay:1,id:null,name:null,dataCustom:{},disabled:false,cls:null,url:null,title:false,method:"get",data:null,width:null,height:null,isOverflow:true,dropdownOptions:{button:{text:false,label:"更多"},panelPosition:{my:"right top",at:"right bottom"},atGroup:0},align:0,autoDisplay:false,margin:5,onCreate:null,onClick:null,onLoad:null},_jion:function(e,d){var c=[];a.each(e,function(f,g){c.push(a(g))});a.each(d,function(f,g){c.push(a(g))});return c},_hideMenus:function(){a(".coral-tieredmenu").hide()},_create:function(){var c=this;this.groupLength=1;this._initElements();this._bindEvents()},_bindEvents:function(){var c=this;this._on(this.document,{mousedown:function(d){if(c.options.clickToDisplay==1&&c.options.autoDisplay){c.uiBox.toggleClass("coral-toolbar-click-active",false)}}})},_initElements:function(){var d=this,c=this.options;this.uiBox=a('<div class="coral-toolbar"></div>');this.uiBorder=a('<div class="coral-toolbar-border"></div>');this.uiBox.append(this.uiBorder);this.uiBox.insertAfter(this.element);this.element.appendTo(this.uiBorder);if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name")}else{if(this.options.name){this.element.attr("name",this.options.name)}}this.uiAfter=a("<button type='button' data-frozen='true' class='coral-toolbar-after-element ctrl-toolbar-element'></button>").menubutton({label:this.options.dropdownOptions.button.label,text:this.options.dropdownOptions.button.text,renderType:"button",icons:"cui-icon-arrow-down3 right",data:[],position:this.options.dropdownOptions.panelPosition});this.uiAfter.menubutton("component").addClass("coral-toolbar-item-component coral-toolbar-after");this.uiAfter.menubutton("hide");this._loadData();
if(this.options.clickToDisplay==0){this.uiBox.addClass("coral-toolbar-click-active")}},_loadData:function(){var d=this,c=this.options;if(c.url){a.ajax({type:c.method,url:c.url,data:{},dataType:"json",success:function(e){d._initData(e)},error:function(){a.alert("Json Format Error!")}})}else{if(c.data){this._initData(c.data)}}},_initData:function(d){var c=this;if(typeof d==="object"){this._addItems(null,d);this._trigger("onLoad",null,{});this.isLoaded=true;this._setFrozenElements();this._position()}if(this.options.disabled){this._setDisabled(this.options.disabled)}},_addItems:function(g,d,l){if(typeof d!=="object"){return}var f=this,j=[],h=d.length;for(var e=0;e<h;e++){var c=d[e];if(c==""||!a.isEmptyObject(c)){j.push(f._createItem(c))}}this._appendItems(g,j,l);this._initItems(j);if(!this.element.find(".coral-toolbar-after-element").length){var m=this._getGroupNameByIndex(this.options.dropdownOptions.atGroup);var k=this.element.find("[group-role='"+m+"']");if(k.length){k.after(this.uiAfter.menubutton("component"))}else{this.element.append(this.uiAfter.menubutton("component"))}}},_createItem:function(c){var h=this,i=c,f=c.type||"button",g=null;if(c==="-"){f="seperator"}else{if(c==="->"){f="grouper"}else{if(c===""){f="blank"}else{if(c==="more"){f="more"}}}}var e=this._createEl(f);g=c;if(f==="button"&&typeof c.icon!=="undefined"&&c.icon!=""){var d=this._getIcon(c.icon);delete g.icon;if(null!=d.ico1&&null==d.ico2){g.icons=d.ico1}else{if(null==d.ico1&&null!=d.ico2){g.icons=d.ico2+" right"}else{if(null!=d.ico1&&null!=d.ico2){g.icons=d.ico1+" left, "+d.ico2+" right"}}}}return{$el:e,coralType:f,options:g}},_align:function(){if(this.groupLength!=1){return}var d=this.options;if(d.align=="center"){var c=this._createEl("grouper").attr("grouper-role","center"),e=this._createEl("grouper").attr("grouper-role","right");this.element.prepend(c);this.element.find("[group-role='left']").removeClass("group-left").addClass("group-center").attr("group-role","center");this.element.find(".ctrl-toolbar-element").attr("group","center");
this.element.append(e)}else{if(d.align=="right"){var e=this._createEl("grouper").attr("grouper-role","right");this.element.find("[group-role='left']").removeClass("group-left").addClass("group-right").attr("group-role","right");this.element.find(".ctrl-toolbar-element").attr("group","right");this.element.prepend(e)}}},_appendItems:function(m,o,q){var l=this;if(!this.isLoaded){var n=0;var c=l._createGrouper(n,this.groupLength);this.element.append(c);a.each(o,function(j,k){if(k.coralType=="grouper"){n+=1;c=l._createGrouper(n,l.groupLength);l.element.append(k.$el.attr("grouper-role",c.attr("group-role")));l.element.append(c)}else{c.append(k.$el.attr("group",c.attr("group-role")));if(k.options&&k.options.frozen==true){k.$el.attr("data-frozen",true)}}});this._align()}else{var s=this._getGroupNameByIndex(q);var p=this.element.find("[group-role='"+s+"']");var e=p.find(".ctrl-toolbar-element:not(.coral-toolbar-separator)").length;if(null==m||m==e){for(var h in o){o[h].$el.attr("group",s);o[h].$el.appendTo(p)}}else{if(m==0){for(var g in o){o[g].$el.attr("group",s);o[g].$el.prependTo(p)}}else{for(var f in o){o[f].$el.attr("group",s);var r=p.find(".ctrl-toolbar-element:eq("+m+")");var d=r.attr("component-role");if(d){r[d]("component").before(o[f].$el)}else{r.before(o[f].$el)}}}}}},_initItems:function(c){var g=this;for(var e in c){if(c[e].coralType==="seperator"||c[e].coralType==="grouper"||c[e].coralType==="blank"||c[e].coralType==="more"){continue}var d=c[e].$el,h=c[e].coralType.toLowerCase(),f=c[e].options;f.componentCls="coral-toolbar-item-component";if(c[e].coralType==="html"){d.attr("id",f.id).append(f.content);continue}if(g.options.title){f.title=true}d[h](f);d.off(".toolbaronclick").on(h+"onclick.toolbaronclick",function(k,j){j=j||{};j.id=j.id||k.currentTarget.id;a(k.currentTarget).attr("component-role")=="splitbutton";if(g.uiAfter.length){var i=a(k.currentTarget).attr("component-role");if(i=="splitbutton"||i=="button"){g.uiAfter.menubutton("hidePanel")}}g._trigger("onClick",k,j)
});d.off(".toolbaronmouseenter").on(h+"onmouseenter.toolbaronmouseenter",function(k,j){var i=a(k.currentTarget).attr("component-role");if(i=="splitbutton"||i=="menubutton"){a(k.currentTarget)[i]("hideAllMenus");a(k.currentTarget)[i]("showMenu")}})}},_createEl:function(d){var c;switch(d){case"button":c=a("<button type='button'></button>");break;case"checkbox":c=a("<input type='checkbox' />");break;case"textbox":case"combobox":c=a("<input type='text' />");break;case"datepicker":c=a("<input type='text' />");break;case"splitbutton":case"menubutton":c=a("<button type='button'></button>");break;case"seperator":c=a("<div class='coral-toolbar-item-component coral-toolbar-separator coral-toolbar-separator-horizontal'></div>");break;case"grouper":this.groupLength+=1;c=a("<div class='coral-toolbar-item-component coral-toolbar-grouper'></div>");break;case"html":c=a("<div class='coral-toolbar-item-component coral-toolbar-html'></div>");break;case"blank":c=a("<span class='coral-toolbar-item-component coral-toolbar-blank'></span>");break;case"more":c=this.uiAfter.menubutton("component");return c;break;default:c=a("<span class='coral-toolbar-item-component'></span>");break}return c.addClass("ctrl-toolbar-element")},_createGrouper:function(c,d){var e=a();if(d==1||d==3){switch(c){case 0:e=a("<span class='coral-toolbar-group group-left' group-role='left'></span>");break;case 1:e=a("<span class='coral-toolbar-group group-center' group-role='center'></span>");break;case 2:e=a("<span class='coral-toolbar-group group-right' group-role='right'></span>");break;default:e=a("<span class='coral-toolbar-group' group-role='default'></span>");break}}else{if(d==2){switch(c){case 0:e=a("<span class='coral-toolbar-group group-left' group-role='left'></span>");break;case 1:e=a("<span class='coral-toolbar-group group-right' group-role='right'></span>");break;default:e=a("<span class='coral-toolbar-group' group-role='default'></span>");break}}}return e},_getGroupNameByIndex:function(c){if(typeof c!=="number"){return"left"
}if(this.groupLength==1){return"left"}else{if(this.groupLength==2){return c==0?"left":"right"}else{if(this.groupLength==3){switch(c){case 0:return"left";case 1:return"center";case 2:return"right"}}}}},_getGrouper:function(){return this.element.find(".coral-toolbar-grouper")},_resetGrouper:function(){var c=this._getGrouper();if(c.length){c.width(1)}},_resetToolbarItems:function(){var d=this,c=this._getElements(2);this._resetGrouper();a.each(c,function(h,k){var g=a(k),f=d._getComponentByElement(g);f.css({left:""});if(f.hasClass("coral-menubutton-button-item")){var l=g.attr("group"),j=d.element.find("[group-role='"+l+"']");if(j.find("[data-frozen='true']").length){var e=j.find("[data-frozen='true']:eq(0)");var m=d._getComponentByElement(e);m.before(f.removeClass("coral-menubutton-button-item"))}else{j.append(f.removeClass("coral-menubutton-button-item"))}}});this.uiAfter.menubutton("hidePanel");this.uiAfter.menubutton("hide");this.uiBorder.css({width:"auto"})},_position:function(){if(!this.element.is(":visible")){this._resetToolbarItems();this.component().addClass("coral-toolbar-initHidden");return}else{this.component().removeClass("coral-toolbar-initHidden")}var d=this,c=this.options;this._resetGrouper();this.totalWidth=this._totalWidth();if(c.isOverflow&&this.uiBox.width()>0){this.uiBorder.width(this.uiBox.width())}else{this.uiBorder.width(Math.max(this.totalWidth,this.uiBox.width()))}if(this._toolbarWidth()-this.totalWidth<0){this.uiAfter.menubutton("show")}else{this.uiAfter.menubutton("hide")}this._positionItems(this.element)},_positionItems:function(c){var e=this,d=this.options,h=this.options.margin,g=false,i=0,f=a(),j={right:"auto"};this._prePosition();this.element.find(".coral-toolbar-item-component:not(.coral-state-hidden)").each(function(k,l){var m=a(l);if(g){return true}if(f.length){i=i+f.outerWidth()+h}j.left=i+"px";m.css(j);f=m});this._handlerDropdownItems()},_handlerDropdownItems:function(){var d=this,c=this._filter(this._getElements(0),".ctrl-init-splitbutton,.ctrl-init-menubutton");
d._hideMenus();a.each(c,function(h,j){var g=a(j),f=d._getComponentByElement(g);try{switch(g.attr("component-role")){case"splitbutton":if(f.hasClass("coral-menubutton-button-item")){g.splitbutton("menu").tieredmenu("option",{my:"left top",at:"right top",of:g.splitbutton("uiDropdownButton")})}else{g.splitbutton("menu").tieredmenu("option",{my:"left top",at:"left bottom",of:g})}break;case"menubutton":if(f.hasClass("coral-menubutton-button-item")){g.menubutton("menu").tieredmenu("option",{my:"left top",at:"right top"})}else{g.menubutton("menu").tieredmenu("option",{my:"left top",at:"left bottom"})}break;default:break}}catch(e){console.log(" There is a error happened.")}finally{}})},_getComponentByElement:function(d){var c=a(),e=d.attr("component-role");if(e){c=d[e]("component")}else{c=d}return c},_filter:function(d,c){var e=[];a.each(d,function(g,h){var f=a(h);if(f.is(c)){e.push(f)}});return e},_prePosition:function(){var d=this,c=this.options,h=this.options.margin,j=0,g=false,i=[],f=a(),e=[];if(this.uiAfter.is(":visible")){e=this._getElements(3)}else{e=this._getElements(2)}var e=this._jion(d._getFrozenElements(),d._filter(e,":not([data-frozen='true'])"));a.each(e,function(n,p){var m=d._getComponentByElement(a(p));var l=!m.hasClass("coral-menubutton-button-item");if(g){if(!l){return true}if(m.hasClass("coral-toolbar-grouper")||a(p).attr("data-frozen")=="true"){return true}i.push(m);return true}if(f.length&&f.is(":visible")){j=j+f.outerWidth()+h}if(!l){var o=d.element.find("[group-role='"+a(p).attr("group")+"']");if(o.attr("group-role")==a(p).attr("group")&&o.find("[data-frozen='true']").length){var k=o.find("[data-frozen='true']:eq(0)");if(k.attr("component-role")){k[k.attr("component-role")]("component").before(m.removeClass("coral-menubutton-button-item"))}else{k.before(m.removeClass("coral-menubutton-button-item"))}}else{m.removeClass("coral-menubutton-button-item").appendTo(o)}}if(j+m.outerWidth()>d._toolbarWidth()){g=true;if(m.hasClass("coral-toolbar-grouper")||a(p).attr("data-frozen")=="true"){return true
}if(l){i.push(m)}else{d.uiAfter.menubutton("prepend",m)}return true}f=m});if(!this.isLoaded){d.uiAfter.menubutton("append",i)}else{d.uiAfter.menubutton("prepend",i)}this._setGrouperWidth()},_setGrouperWidth:function(){var h=this._getGrouper();var d=(this._toolbarWidth()-this._totalWidth(true,this.uiAfter.is(":visible"))-this.options.margin);var g=this._getWidthByGroupRole("left");var e=this._getWidthByGroupRole("right");var c=(d-g+e)/2;var f=(d-c);if(d<0){h.width(1);return}if(h.length==1){h.width(d)}else{if(h.length==2){if(c>0&&f>0&&!this.uiAfter.is(":visible")){a(h[0]).width(c+1);a(h[1]).width(f+1)}else{a(h[1]).width(d+1);a(h[0]).width(1)}}}},_getWidthByGroupRole:function(g){var f=this.options,e=0,d=this.element.find("[group-role='"+g+"']"),c=d.find(".coral-toolbar-item-component");if(!d.length||!c.length){return 0}a.each(c,function(k,j){var h=a(j);e+=h.outerWidth()+f.margin;if(k==c.length-1){e-=f.margin}});return e},_toolbarWidth:function(){return this.uiBorder.innerWidth()},_setFrozenElements:function(){var d=this._getElements(3),c=false;a.each(d,function(f,g){var e=a(g);if(e.hasClass("coral-toolbar-after-element")){c=true}if(c&&!e.hasClass("coral-toolbar-grouper")){e.attr("data-frozen",true)}})},_getFrozenElements:function(){if(this.uiAfter.is(":visible")){return this.element.find("[data-frozen='true']")}else{return this.element.find("[data-frozen='true']:not(.coral-toolbar-after-element)")}},_getElements:function(d){var c=a(),e=this.element.find(".ctrl-toolbar-element"),f=this.uiAfter.menubutton("buttons").find(".ctrl-toolbar-element");c=this._jion(e,f);switch(d){case 0:c=this._filter(c,":not(.coral-toolbar-after-element,.coral-toolbar-grouper,.coral-toolbar-separator)");break;case 1:c=this._filter(c,":not(.coral-toolbar-after-element,.coral-toolbar-grouper)");break;case 2:c=this._filter(c,":not(.coral-toolbar-after-element)");break;case 3:break;default:break}return c},_getComponents:function(e,c){var d=a(),f=this.element.find(".coral-toolbar-item-component"),g=this.uiAfter.menubutton("buttonElements");
d=this._jion(f,g);e=e||1;switch(e){case 0:d=this._filter(d,":not(.coral-toolbar-after,.coral-toolbar-grouper,.coral-toolbar-separator)");break;case 1:d=this._filter(d,":not(.coral-toolbar-after,.coral-toolbar-grouper)");break;case 2:d=this._filter(d,":not(.coral-toolbar-after)");break;case 3:break;default:break}if(!c){$itemAll=this._filter(d,".coral-state-hidden")}return d},getTotalWidth:function(c){return this._totalWidth(c)},_totalWidth:function(e,d){var g=this,f=this.options,c=0;var i=a();if(d){i=this.element.find(".coral-toolbar-item-component:not(.coral-state-hidden)")}else{i=this.element.find(".coral-toolbar-item-component:not(.coral-state-hidden,.coral-toolbar-after)")}var h=this.uiAfter.menubutton("buttons").find(".coral-toolbar-item-component:not(.coral-state-hidden)");i.each(function(k,l){var j=a(l);c=c+j.outerWidth()+f.margin;if(k==i.length-1&&!h.length){c=c-f.margin}});if(e){return c-f.margin}this.uiAfter.menubutton("showPanel");h.each(function(k,l){var j=a(l);c=c+j.outerWidth()+f.margin;if(k==h.length-1){c=c-f.margin}});this.uiAfter.menubutton("hidePanel");return c},_getIcon:function(f){var e={ico1:null,ico2:null},d=[],c;if(f==null){return e}c=a.trim(f);if(c.indexOf(",")>=0){d=c.split(",");e.ico1=d[0]==""?null:d[0];e.ico2=d[1]==""?null:d[1]}else{e.ico1=c}return e},getLength:function(){return this._getElements(0).length},isExist:function(c){return this._getSubCoral(c)?true:false},_getGroupElementsLength:function(d){if(typeof d!=="number"||d>(this.groupLength-1)){return}var e=this._getGroupNameByIndex(d);var c=this.element.find("[group-role='"+e+"']");return c.find(".ctrl-toolbar-element:not(.coral-toolbar-separator)").length},add:function(d,g,f){if(typeof g!=="object"){return}if(typeof d==="string"){return this._addByParentId(d,g)}var f=f||0;var e=this,c=parseInt(d);if(((null!=d)&&isNaN(c))||c<0||c>this._getGroupElementsLength(f)){return}if(!a.isArray(g)){g=[g]}if(0==this._getGroupElementsLength(f)){d=null}this._addItems(d,g,f);this._refresh()},_addByParentId:function(c,f){var e=this._getSubCoral(c);
if(e){var d=e.$el;switch(e.type){case"splitbutton":d.splitbutton("menu").tieredmenu("add",null,f);break;case"menubutton":d.menubutton("menu").tieredmenu("add",null,f);break;case"tieredmenu":d.tieredmenu("add",c,f);break;default:break}}},getSubCoral:function(c){var d=this;if(typeof c==="string"){return d._getSubCoral(c)}else{return d._getSubCoralByIndex(c)}},_getSubCoralByIndex:function(d){var e=this,c=parseInt(d);if(isNaN(c)||c<0||c>(this.getLength()-1)){return false}return e._getSubCoral(c)},_findElementsByAttr:function(d,c,f){var e=this,g=[];a.each(d,function(h,j){var i=a(j);if(f==i.attr(c)){g.push(i)}});return g},_getSubCoral:function(c){var e=this,k=this._findElementsByAttr(this._getElements(0),"id",c),g=null,i=this._findElementsByAttr(this._getElements(0),"component-role","splitbutton"),f=this._findElementsByAttr(this._getElements(0),"component-role","menubutton"),d=null,j=null,h=null;if(typeof c==="number"){h=a(this._getElements(0)[c]);j={$el:h,type:h.attr("component-role")};return j}if(k.length){j={$el:k[0],type:k[0].attr("component-role")};return j}d=this._findSubCoralInMenuItems(i,c);if(i.length&&d){j={$el:d,type:"tieredmenu"};return j}d=this._findSubCoralInMenuItems(f,c);if(f.length&&d){j={$el:d,type:"tieredmenu"};return j}return j},_findSubCoralInMenuItems:function(d,e){if(!d.length){return}var c=null;a.each(d,function(g,j){var f=a(j),i=f.attr("component-role"),h=a(j)[i]("menu");if(h.find("[data-id='"+e+"']").length){c=h}});return c},removeAll:function(){var c=this;a.each(this._getElements(1),function(d,f){var e=a(f),g=e.attr("component-role");if(g){e[g]("destroy")}e.remove()});this._refresh()},remove:function(c){var d=this;if(typeof c==="string"){this._removeById(c)}else{this._removeByIndex(c)}this._refresh()},_removeById:function(g){var d=this,e=this._getSubCoral(g);if(e){var c=e.$el;if(c.hasClass("coral-toolbar-html")){c.remove();return}switch(e.type){case"tieredmenu":c.tieredmenu("removeItem",g);break;default:var f=c.attr("component-role");c[f]("destroy");
c.remove();break}}},_removeByIndex:function(d){var c=parseInt(d);if(isNaN(c)||c<0||c>(this.getLength()-1)){return false}var e=a(this._getElements(0)[c]);var f=e.attr("component-role");if(f){e[f]("component").remove()}e.remove()},update:function(d,c){var e=this;if(typeof d==="string"){e._updateById(d,c)}else{e._updateByIndex(d,c)}this._refresh()},_updateById:function(f,c){var e=this._getSubCoral(f);if(e){var d=e.$el;switch(e.type){case"tieredmenu":d.tieredmenu("updateItem",f,c);break;case"button":d.button("update",c);break;case"splitbutton":d.splitbutton("button").button("update",c);break;case"menubutton":d.menubutton("button").button("update",c);break;default:break}}},_updateByIndex:function(e,d){var c=parseInt(e);if(isNaN(c)||c<0||c>(this.getLength()-1)){return false}var g=this._getSubCoral(e);if(g){var f=g.$el;switch(g.type){case"button":f.button("update",d);break;case"splitbutton":f.splitbutton("button").button("update",d);break;case"menubutton":f.menubutton("button").button("update",d);break;default:break}}},component:function(){return this.uiBox},_uiBorder:function(){return this.uiBorder},disable:function(){this._setDisabled(true)},enable:function(){this._setDisabled(false)},_setDisabled:function(c){var e=this;var d=this._getElements(0);a.each(d,function(g,h){var f=a(h);if(f.hasClass("coral-toolbar-html")){return true}if(!f.attr("component-role")){return}if(c){f[f.attr("component-role")]("disable")}else{f[f.attr("component-role")]("enable")}});this.options.disabled=!!c},disableItem:function(c){var d=this;if(typeof c==="string"){d._disableItemById(c)}else{d._disableItemByIndex(c)}},_disableItemById:function(g){var d=this,f=this._getSubCoral(g);if(f){var c=f.$el;if(c.hasClass("coral-toolbar-html")){return}switch(f.type){case"tieredmenu":c.tieredmenu("disableItem",g);break;default:var e=a(this._findElementsByAttr(this._getElements(0),"id",g)[0]);if(!e.length){return}e[e.attr("component-role")]("disable");break}}},_disableItemByIndex:function(d){var e=this,c=parseInt(d);
if(isNaN(c)||c<0||c>(this.getLength()-1)){return false}var f=a(this._getElements(0)[c]);if(f.hasClass("coral-toolbar-html")){return false}if(!f.length){return false}f[f.attr("component-role")]("disable");return true},enableItem:function(c){var d=this;if(typeof c==="string"){d._enableItemById(c)}else{d._enableItemByIndex(c)}},_enableItemById:function(g){var d=this,f=this._getSubCoral(g);if(f){var c=f.$el;if(c.hasClass("coral-toolbar-html")){return}switch(f.type){case"tieredmenu":c.tieredmenu("enableItem",g);break;default:var e=a(this._findElementsByAttr(this._getElements(0),"id",g)[0]);if(!e.length){return}e[e.attr("component-role")]("enable");break}}},_enableItemByIndex:function(d){var e=this,c=parseInt(d);if(isNaN(c)||c<0||c>(this.getLength()-1)){return false}var f=a(this._getElements(0)[c]);if(f.hasClass("coral-toolbar-html")){return}if(!f.length){return false}f[f.attr("component-role")]("enable");return true},hide:function(c){var d=this;if(typeof c==="string"){d._hideById(c)}else{d._hideByIndex(c)}this._refresh()},hideAll:function(){var c=this;a.each(this._getElements(1),function(d,f){var e=a(f).attr("component-role");if(e){a(f)[e]("hide")}else{a(f).hide()}});this._refresh()},_hideById:function(g){var d=this,f=this._getSubCoral(g);if(f){var c=f.$el;if(c.hasClass("coral-toolbar-html")){c.hide();return}switch(f.type){case"tieredmenu":c.tieredmenu("hideItem",g);break;default:var e=a(this._findElementsByAttr(this._getElements(0),"id",g)[0]);if(!e.length){return}e[e.attr("component-role")]("hide");break}}},_hideByIndex:function(d){var e=this,c=parseInt(d);if(isNaN(c)||c<0||c>(this.getLength()-1)){return false}var f=a(this._getElements(0)[c]);if(!f.length){return false}if(f.hasClass("coral-toolbar-html")){f.hide();return true}f[f.attr("component-role")]("hide");return true},show:function(c){var d=this;if(typeof c==="string"){d._showById(c)}else{d._showByIndex(c)}this._refresh()},showAll:function(){var c=this;a.each(this._getElements(1),function(d,f){var e=a(f).attr("component-role");
if(e){a(f)[e]("show")}else{a(f).show()}});this._refresh()},_showById:function(g){var d=this,f=this._getSubCoral(g);if(f){var c=f.$el;if(c.hasClass("coral-toolbar-html")){c.show();return}switch(f.type){case"tieredmenu":c.tieredmenu("showItem",g);break;default:var e=a(this._findElementsByAttr(this._getElements(0),"id",g)[0]);if(!e.length){return}e[e.attr("component-role")]("show");break}}},_showByIndex:function(d){var f=this,c=parseInt(d);if(isNaN(c)||c<0||c>(this.getLength()-1)){return false}var g=a(this._getElements(0)[c]);var e=g.attr("component-role");if(!g.length){return false}if(e){g[e]("show")}else{g.show()}return true},_destroy:function(){this.uiBox.replaceWith(this.element)},_setOption:function(c,e){var d=this;if(c==="id"||c==="name"){return}if(c==="disabled"){this._setDisabled(e)}this._super(c,e)},refresh:function(){this._refresh()},_refresh:function(){this._position();a.coral.refreshAllComponent(this.element)}});a.fn.toolbar.defaults={width:"auto"}})(jQuery);

/*!
 * 组件库4.0.1：按钮
 *
 * 依赖JS文件:
 *	   jquery.coral.core.js
 *	   jquery.coral.component.js
 */
(function(f,h){var d,c="coral-button coral-component coral-state-default coral-corner-all",g="coral-button-text-icons coral-button-text-icon-primary coral-button-text-icon-secondary",b="coral-state-focus",e=function(){var i=f(this);setTimeout(function(){i.find(":coral-button").button("refresh")},1)},a=function(j){var i=j.name,k=j.form,l=f([]);if(i){i=i.replace(/'/g,"\\'");if(k){l=f(k).find("[name='"+i+"'][type=radio]")}else{l=f("[name='"+i+"'][type=radio]",j.ownerDocument).filter(function(){return !this.form})}}return l};f.component("coral.button",{version:"4.0.1",defaultElement:"<button>",options:{id:null,name:null,cls:null,title:false,disabled:null,text:true,label:null,icons:{primary:null,secondary:null},width:null,countdown:false,countdownTime:3000,showCountdown:true,onCreate:null,onClick:null,onDblClick:null,onMouseEnter:null,onMouseLeave:null},_create:function(){this.options.icons=this._icons();this.element.addClass("ctrl-init ctrl-init-button");this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,e);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.prop("disabled")}else{this.element.prop("disabled",this.options.disabled)}this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title")||this.options.title;var k=this,i=this.options,l=this.type==="checkbox"||this.type==="radio",j=!l?"coral-state-active":"";if(i.id){this.element.attr("id",i.id)}if(i.name){this.element.attr("name",i.name)}if(i.label===null){i.label=(this.type==="input"?this.buttonElement.val():this.buttonElement.html())}this._hoverable(this.buttonElement);this.buttonElement.addClass(c).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(i.disabled){return}if(this===d){f(this).addClass("coral-state-active")}k._trigger("onMouseEnter",null,{id:this.id,label:k.options.label})}).bind("mouseleave"+this.eventNamespace,function(){if(i.disabled){return
}f(this).removeClass(j);k._trigger("onMouseLeave",null,{id:this.id,label:k.options.label})}).bind("click"+this.eventNamespace,function(n){if(i.disabled){n.preventDefault();n.stopImmediatePropagation()}else{if(i.once){k.element.button("disable")}if(i.countdown){var p=i.countdownTime/1000;var m=k.element.button("option","label");function o(){if(p<=0){k.element.button("enable");k.element.button("option","label",m)}else{k.element.button("option","label",m+"("+p+")");p--;setTimeout(function(){o()},1000)}}if(f(document).find(k.element).length){k.element.button("disable");if(i.showCountdown){o()}else{k._delay(function(){k.element.button("enable");k.element.button("option","label",m)},i.countdownTime)}}}k._trigger("onClick",null,{id:this.id,label:k.options.label})}}).bind("dblclick"+this.eventNamespace,function(m){if(i.disabled){m.preventDefault();m.stopImmediatePropagation()}else{k._trigger("onDblClick",null,{id:this.id,label:k.options.label})}});this._on({focus:function(){this.buttonElement.addClass("coral-state-focus")},blur:function(){this.buttonElement.removeClass("coral-state-focus")}});if(l){this.element.bind("change"+this.eventNamespace,function(){k.refresh()})}if(this.type==="checkbox"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled){return false}})}else{if(this.type==="radio"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled){return false}f(this).addClass("coral-state-active");k.buttonElement.attr("aria-pressed","true");var m=k.element[0];a(m).not(m).map(function(){return f(this).button("component")[0]}).removeClass("coral-state-active").attr("aria-pressed","false")})}else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(i.disabled){return false}f(this).addClass("coral-state-active");d=this;k.document.one("mouseup",function(){d=null})}).bind("mouseup"+this.eventNamespace,function(){if(i.disabled){return false}f(this).removeClass("coral-state-active")}).bind("keydown"+this.eventNamespace,function(m){if(i.disabled){return false
}if(m.keyCode===f.coral.keyCode.SPACE||m.keyCode===f.coral.keyCode.ENTER){f(this).addClass("coral-state-active")}}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){f(this).removeClass("coral-state-active")});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(m){if(m.keyCode===f.coral.keyCode.SPACE){f(this).click()}})}}}if(i.width){this.buttonElement.outerWidth(i.width)}this._setOption("disabled",i.disabled);this._resetButton()},_icons:function(){var l=this.options.icons,k=null,n=null,m=null,i=null;if(l&&typeof l==="string"){k=l.split(",");if(k.length>0){n=f.trim(k[0]);i=j("right",n);if(null===i){m=j("left",n,true)}}if(k.length>1){n=f.trim(k[1]);m=((m===null)?j("left",n):m);if(null===i){i=j("right",n,true)}}}else{return l}function j(p,q,r){var o=q.split(" ");if(f.inArray(p,o)>-1){o=f.grep(o,function(s,t){return s!==p});return o.join(" ")}if(r){return q}return null}return{primary:m,secondary:i}},_determineButtonType:function(){var i,k,j;if(this.element.is("[type=checkbox]")){this.type="checkbox"}else{if(this.element.is("[type=radio]")){this.type="radio"}else{if(this.element.is("input")){this.type="input"}else{this.type="button"}}}if(this.type==="checkbox"||this.type==="radio"){i=this.element.parents().last();k="label[for='"+this.element.attr("id")+"']";this.buttonElement=i.find(k);if(!this.buttonElement.length){i=i.length?i.siblings():this.element.siblings();this.buttonElement=i.filter(k);if(!this.buttonElement.length){this.buttonElement=i.find(k)}}this.element.addClass("coral-helper-hidden-accessible");j=this.element.is(":checked");if(j){this.buttonElement.addClass("coral-state-active")}this.buttonElement.prop("aria-pressed",j)}else{this.buttonElement=this.element}},component:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("coral-helper-hidden-accessible");this.buttonElement.removeClass(c+" ui-state-active "+g).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".coral-button-text").html());
if(!this.hasTitle){this.buttonElement.removeAttr("title")}},_setOption:function(i,j){this._super(i,j);if(i==="disabled"){this.component().toggleClass("coral-state-disabled",!!j);this.element.prop("disabled",!!j);if(j){if(this.type==="checkbox"||this.type==="radio"){this.buttonElement.removeClass("coral-state-focus")}else{this.buttonElement.removeClass("coral-state-focus coral-state-active")}}return}this._resetButton()},update:function(i){if(typeof i==="string"){this.element.find(".coral-button-text").html(i)}},refresh:function(){var i=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("coral-button-disabled");if(i!==this.options.disabled){this._setOption("disabled",i)}if(this.type==="radio"){a(this.element[0]).each(function(){if(f(this).is(":checked")){f(this).button("component").addClass("coral-state-active").attr("aria-pressed","true")}else{f(this).button("component").removeClass("coral-state-active").attr("aria-pressed","false")}})}else{if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("coral-state-active").attr("aria-pressed","true")}else{this.buttonElement.removeClass("coral-state-active").attr("aria-pressed","false")}}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label)}return}var m=this.buttonElement.removeClass(g),k=f("<span></span>",this.document[0]).addClass("coral-button-text").html(this.options.label).appendTo(m.empty()).text(),j=this.options.icons,i=j.primary&&j.secondary,l=[];if(j.primary||j.secondary){if(this.options.text){l.push("coral-button-text-icon"+(i?"s":(j.primary?"-primary":"-secondary")))}if(j.primary){m.prepend("<span class='coral-button-icon-primary icon "+j.primary+"'></span>")}if(j.secondary){m.append("<span class='coral-button-icon-secondary icon "+j.secondary+"'></span>")}if(!this.options.text){l.push(i?"coral-button-icons-only":"coral-button-icon-only");if(!this.hasTitle){m.attr("title",f.trim(k))}}}else{l.push("coral-button-text-only")
}if(this.hasTitle){m.attr("title",f.trim(k))}m.addClass(l.join(" "))}});f.component("coral.buttonset",{version:"4.0.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(coral-button)"},_create:function(){this.element.addClass("coral-buttonset")},_init:function(){this.refresh()},_setOption:function(i,j){if(i==="disabled"){this.buttons.button("option",i,j)}this._super(i,j)},refresh:function(){var j=this.element.css("direction")==="rtl",i=this.element.find(this.options.items),k=i.filter(":coral-button");i.not(":coral-button").button();k.button("refresh");this.buttons=i.map(function(){return f(this).button("component")[0]}).removeClass("coral-corner-all coral-corner-left coral-corner-right").filter(":first").addClass(j?"coral-corner-right":"coral-corner-left").end().filter(":last").addClass(j?"coral-corner-left":"coral-corner-right").end().end()},_destroy:function(){this.element.removeClass("coral-buttonset");this.buttons.map(function(){return f(this).button("component")[0]}).removeClass("coral-corner-left coral-corner-right").end().button("destroy")}})}(jQuery));

/*!
 * 组件库4.0：下拉按钮
 * 
 * 依赖JS文件：
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 */
(function(a,b){a.component("coral.splitbutton",a.coral.button,{version:"4.0.2",componentName:"splitbutton",castProperties:["menuOptions","dataCustom"],options:{id:null,name:null,label:null,cls:null,icons:{primary:null,secondary:null},width:null,text:true,disabled:false,menuOptions:{autoDisplay:false,popup:true},data:null,url:null,onCreate:null,onClick:null,onDblClick:null},component:function(){var c=this;return this.uiBox},uiBorder:function(){return this.uiBorder},uiDropdownButton:function(){return this.dropdownButton},menu:function(){return this.uiMenu},_create:function(){var c=this;this._initElements();this._super()},_initElements:function(){var g=this,f=this.options,e=this.options.menuOptions,h=this.options.data,c=this.options.url;this.element.addClass("ctrl-init ctrl-init-splitbutton coral-splitbutton-element");this.dropdownButton=a("<button class='coral-splitbutton-dropdownbutton' type='button'></button>").uniqueId();this.uiBorder=a('<span class="coral-splitbutton-border"></span>');this.uiBox=a('<span class="coral-splitbutton"></span>');this.uiBox.append(this.uiBorder);this.uiMenu=a('<ul class="coral-splitbutton-menu"></ul>');this.uiBox.insertAfter(this.element);this.uiBorder.append(this.element).append(this.dropdownButton);this.uiMenu.appendTo(a(document.body));if(f.width){this.uiBox.css({width:f.width})}if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)}else{this.options.id=this.element.uniqueId()}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name")}else{if(this.options.name){this.element.attr("name",this.options.name)}}this.triggerId=this.dropdownButton.attr("id");this._on(this.element,{buttononclick:function(j,i){g._trigger("onClick",j,i)}});this.dropdownButton.button({label:"下拉按钮",text:false,icons:"cui-icon-arrow-down3",onClick:function(k,j){if(!g._getToolbar().length||g._getToolbar().toolbar("option","clickToDisplay")==0){return
}if(!g._getToolbar().length||!g._getToolbar().toolbar("option","autoDisplay")){return}var i=g._getToolbar(true);if(i.length){i.toggleClass("coral-toolbar-click-active")}},onMouseEnter:function(k,j){if(!g._getToolbar().length||!g._getToolbar().toolbar("option","autoDisplay")){return}var i=g._getToolbar(true);if(i.hasClass("coral-toolbar-click-active")){if(a(".coral-tieredmenu:visible").length){g._hideMenus()}g.uiMenu.tieredmenu("show")}}});var d={};if(null!=h){d.data=h}if(null!=c){d.url=c}e=a.extend({},d,f.menuOptions,{id:this.element.attr("id")+"_tieredmenu",trigger:this.dropdownButton,of:this.element});this.uiMenu.tieredmenu(e);if(g._getToolbar().length&&g._getToolbar().toolbar("option","autoDisplay")){this.uiMenu.tieredmenu("component").bind("mouseleave",function(){g._hideMenus()})}this._on(this.uiMenu,{tieredmenuonclick:function(j,i){g._trigger("onClick",j,i)}})},_getToolbar:function(d){var f=this,e=this.options,c=a();if(this.element.hasClass("ctrl-toolbar-element")){c=d?this.element.parents(".coral-toolbar:eq(0)"):this.element.parents(".ctrl-init-toolbar:eq(0)")}return c},_hideMenus:function(){a(".coral-tieredmenu").hide()},hideAllMenus:function(){a(".coral-tieredmenu").hide()},showMenu:function(){this.uiMenu.tieredmenu("show")},_setOption:function(c,e){if(c==="id"||c==="name"){return}var d=this;if(c==="disabled"){this.element.toggleClass("coral-state-disabled",e);this.dropdownButton.button("option","disabled",e)}this._super(c,e)},_destroy:function(){this.uiBox.replaceWith(this.element);this.uiMenu.parent().remove();this.element.removeClass("ctrl-init ctrl-init-splitbutton coral-splitbutton-element")}})})(jQuery);

/*!
 * 组件库4.0：下拉按钮
 * 
 * 依赖JS文件：
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 */
(function(a,b){a(document).unbind(".coral-menubutton").bind("mousedown.coral-menubutton mousewheel.coral-menubutton",function(c){if(a(c.target).closest("span.coral-menubutton,.coral-menubutton-buttons").length){return}a(".coral-menubutton-buttons").hide()});a.component("coral.menubutton",a.coral.button,{version:"4.0.2",castProperties:["menuOptions"],options:{id:null,name:null,label:null,cls:null,icons:{primary:null,secondary:"cui-icon-arrow-down3"},width:null,text:true,disabled:false,renderType:"menu",menuOptions:{autoDisplay:false,popup:true},data:null,url:null,method:"get",position:{my:"left top",at:"left bottom"},onCreate:null,onClick:null,onDblClick:null,onLoad:null},showPanel:function(){var g=this,f=this.options;var c=a.extend(f.position,{of:this.element});var d=this.uiButtons.siblings(".coral-front:visible").map(function(){return +a(this).css("z-index")}).get(),e=Math.max.apply(null,d);if(e>=+this.uiButtons.css("z-index")){this.uiButtons.css("z-index",e+1)}this.uiButtons.css({position:"absolute",left:"",top:""}).position(c).show()},hidePanel:function(){this.uiButtons.hide()},_create:function(){this._initElements();this._super()},_getToolbar:function(d){var f=this,e=this.options,c=a();if(this.element.hasClass("ctrl-toolbar-element")){c=d?this.element.parents(".coral-toolbar:eq(0)"):this.element.parents(".ctrl-init-toolbar:eq(0)")}return c},_hideMenus:function(){a(".coral-tieredmenu").hide()},hideAllMenus:function(){a(".coral-tieredmenu").hide()},showMenu:function(){this.uiMenu.tieredmenu("show")},_initElements:function(){var d=this,c=this.options;this.element.addClass("ctrl-init ctrl-init-menubutton coral-menubutton-element");this.uiBorder=a('<span class="coral-menubutton-border"></span>');this.uiBox=a('<span class="coral-menubutton"></span>');this.uiBox.append(this.uiBorder);this.uiBox.insertAfter(this.element);this.uiBorder.append(this.element);if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")
}else{if(this.options.id){this.element.attr("id",this.options.id)}else{this.options.id=this.element.uniqueId().attr("id")}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name")}else{if(this.options.name){this.element.attr("name",this.options.name)}}this.options.onClick=function(h,g){if(c.renderType=="button"){if(!d.uiButtons.is(":visible")){d.showPanel()}else{d.hidePanel()}}if(!d._getToolbar().length||!d._getToolbar().toolbar("option","autoDisplay")){return}var f=d._getToolbar(true);if(f.length){f.toggleClass("coral-toolbar-click-active")}},this.options.onMouseEnter=function(h,g){if(!d._getToolbar().length||!d._getToolbar().toolbar("option","autoDisplay")){return}if(c.renderType=="button"){return}var f=d._getToolbar(true);if(f.hasClass("coral-toolbar-click-active")){if(a(".coral-tieredmenu:visible").length){d._hideMenus()}d.uiMenu.tieredmenu("show")}};this._on(this.element,{buttononclick:function(g,f){d._trigger("onClick",g,f)}});if(c.renderType=="button"){this.uiButtons=a("<div class='coral-menubutton-buttons coral-front'></div>").appendTo(a(document.body));this._loadData()}else{this.uiMenu=a('<ul class="coral-menubutton-menu"></ul>').appendTo(a(document.body));this._renderMenu()}},_renderMenu:function(){var g=this,f=this.options,e=this.options.menuOptions,h=this.options.data,c=this.options.url;var d={};if(null!=h){d.data=h}if(null!=c){d.url=c}e=a.extend({},d,f.menuOptions,{id:this.element.attr("id")+"_tieredmenu",trigger:this.element,of:this.element});this.uiMenu.tieredmenu(e);if(g._getToolbar().length&&g._getToolbar().toolbar("option","autoDisplay")){this.uiMenu.tieredmenu("component").bind("mouseleave",function(){g._hideMenus()})}this._on(this.uiMenu,{tieredmenuonclick:function(j,i){g._trigger("onClick",j,i)}})},_loadData:function(){var d=this,c=this.options;if(c.url){a.ajax({type:c.method,url:c.url,data:{},dataType:"json",success:function(e){d._initData(e)},error:function(){a.alert("Json Format Error!")}})}else{if(c.data){this._initData(c.data)
}}},_initData:function(d){var c=this;if(typeof d==="object"){this._addItems(null,d)}c._trigger("onLoad",null,{})},_addItems:function(f,j){if(typeof j!=="object"){return}var h=this,e=[],d=j.length;for(var g=0;g<d;g++){var c=j[g];if(!a.isEmptyObject(c)){e.push(h._createButton(c))}}this._appendItems(f,e);this._initItems(e)},_createButton:function(c){return{button:a("<button type='button'></button>").addClass("coral-menubutton-button-item"),options:c}},_appendItems:function(d,c){for(var e in c){c[e].button.appendTo(this.uiButtons)}},_initItems:function(c){var h=this;for(var f in c){var e=c[f].button,g=c[f].options;e.button(g);var d={};d.buttononclick=function(j,i){h._trigger("onClick",j,i)};h._on(e,d)}},add:function(c){},prepend:function(f){if(!f instanceof jQuery){return}var g=this,c=f.length;if(!(f instanceof Array)){f=[f]}for(var e=c-1;e>-1;e--){var d=f[e];d.css({margin:"",left:"",right:""}).removeClass("coral-menubutton-button-item").addClass("coral-menubutton-button-item").prependTo(g.uiButtons)}},append:function(f){if(!f instanceof jQuery){return}var g=this,c=f.length;if(!(f instanceof Array)){f=[f]}for(var e=c-1;e>-1;e--){var d=f[e];d.css({margin:"",left:"",right:""}).removeClass("coral-menubutton-button-item").addClass("coral-menubutton-button-item").prependTo(g.uiButtons)}},pop:function(){var e=this,d=this.options;if("button"!=d.renderType){return a()}var c=this.uiButtons.find(".coral-menubutton-button-item:eq(0)");if(c.length){return c.removeClass("coral-menubutton-button-item")}else{return a()}},component:function(){return this.uiBox},border:function(){return this.uiBorder},buttons:function(){return this.uiButtons},buttonElements:function(){return this.uiButtons.children()},menu:function(){return this.uiMenu},_bindEvents:function(){},_setOption:function(c,e){var d=this;if(c==="id"||c==="name"){return}if(c==="disabled"){this.element.toggleClass("coral-state-disabled",e)}this._super(c,e)},_destroy:function(){var c=this.options;this.uiBox.replaceWith(this.element);
if(c.renderType=="buttons"){this.uiButtons.remove()}else{this.uiMenu.parent().remove()}this.element.children().remove();this.element.removeClass("ctrl-init ctrl-init-menubutton coral-menubutton-element")}})})(jQuery);

/*!
 * 组件库4.0：下拉树按钮
 * 
 * 依赖JS文件：
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 */
(function(a,b){a.component("coral.treebutton",a.coral.button,{version:a.coral.version,castProperties:["treeOptions"],options:{id:null,name:null,label:null,cls:null,position:{my:"left top",at:"left bottom",collision:"none"},width:null,text:true,disabled:false,multiple:false,treeOptions:{id:null,name:null,data:null,showLine:false,showIcon:false,checkable:true},onCreate:null,onClick:null,onCheck:null,onSelect:null},tree:function(){return this.uiTree},_create:function(){var c=this;this._super();this._initElements()},_initElements:function(){var e=this,d=this.options,f=this.options.treeOptions;this.element.addClass("coral-treebutton-element").uniqueId();this.uiTree=a("<ul>").attr("id",a(this.element).attr("id")+"_tree").addClass("coral-treebutton-panel coral-front").appendTo("body");this.element.on("click",function(h,g){e._showtree()});this._on(this.document,{mousedown:function(g){if(g.isDefaultPrevented()){return}e._hidetree()}});this.uiTree.unbind().bind("mousedown",function(g){g.preventDefault()});var c={checkable:this.options.multiple};f=a.extend({},c,d.treeOptions,{id:a(this.element).attr("id")+"_tree"});this.uiTree.tree(f)},_bindEvents:function(){},_setOption:function(c,e){var d=this;this._super(c,e)},_showtree:function(d){var f=this.uiTree;f.show();var c=f.siblings(".coral-front:visible").map(function(){return +a(this).css("z-index")}).get(),e=Math.max.apply(null,c);if(e>=+f.css("z-index")){f.css("z-index",e+1)}f.position(a.extend({of:this.element},this.options.position))},_hidetree:function(){this.uiTree.hide()},disabledNode:function(f){var d=this.uiTree.tree("getNodesByParam","id",f);for(var e=0,c=d.length;e<c;e++){this.uiTree.tree("setChkDisabled",d[0],true)}},undisabledNode:function(f){var d=this.uiTree.tree("getNodesByParam","id",f);for(var e=0,c=d.length;e<c;e++){this.uiTree.tree("setChkDisabled",d[0],false)}},_destroy:function(){this.uiTree.remove();this.element.removeClass("ctrl-init ctrl-init-treebutton coral-treebutton-element")
}})})(jQuery);

(function($){var timer=false,resizable=true;$(window).unbind(".coral-panel").bind("resize.coral-panel",function(){$.coral.beforeDoOverflow();if(!resizable){return}if(timer!==false){clearTimeout(timer)}timer=setTimeout(function(){resizable=false;$.coral.refreshAllComponent("body");timer=false;resizable=true},200)});$.component("coral.panel",{version:"4.0.2",options:{id:null,title:null,iconCls:null,width:"auto",height:"auto",left:null,top:null,cls:null,headerCls:null,bodyCls:null,style:{},href:null,cache:true,fit:false,border:true,doSize:true,noheader:false,content:null,collapsible:false,minimizable:false,maximizable:false,closable:false,collapsed:false,minimized:false,maximized:false,closed:false,tools:null,url:null,loadtext:"加载中，请耐心等候...",loadingMessage:"Loading...",extractor:function(content){var reg=/<body[^>]*>((.|[\n\r])*)<\/body>/im;var match=reg.exec(content);if(match){return match[1]}else{return content}},beforeOpen:$.noop,beforeClose:$.noop,beforeDestroy:$.noop,beforeCollapse:$.noop,beforeExpand:$.noop,onLoad:$.noop,onOpen:$.noop,onClose:$.noop,onDestroy:$.noop,onResize:$.noop,onMove:$.noop,onMaximize:$.noop,onRestore:$.noop,onMinimize:$.noop,onCollapse:$.noop,onExpand:$.noop},_create:function(){this.originalTitle=this.element.attr("title");this.element.removeAttr("title").addClass("ctrl-init ctrl-init-panel");this._createWrapper();this.isLoaded=false;this.element.appendTo(this.uiPanel);this._addHeader();this._setBorder();if(this.options.doSize==true){this.uiPanel.css("display","block");this.resizePanel()}if(this.options.closed==true||this.options.minimized==true){this.close()}else{this.open()}},_createWrapper:function(){var that=this;this.element.addClass("coral-panel-body");this.uiPanel=$('<div class="coral-panel"></div>').insertBefore(this.element)},_fit:function(fit){return $.coral.panel.fit(this.uiPanel,fit)},resizePanel:function(resizeOpts){var opts=this.options,panel=this.uiPanel,header=panel.children("div.coral-panel-header"),body=panel.children("div.coral-panel-body");
if(resizeOpts){$.extend(opts,{width:resizeOpts.width,height:resizeOpts.height,left:resizeOpts.left,top:resizeOpts.top})}opts.fit?$.extend(opts,this._fit()):this._fit(false);panel.css({left:opts.left,top:opts.top});if(!isNaN(opts.width)){panel.outerWidth(opts.width)}else{panel.width("auto")}header.add(body).outerWidth(panel.width());if(!isNaN(opts.height)){panel.outerHeight(opts.height);body.outerHeight(panel.height()-header.outerHeight())}else{body.height("auto")}panel.css("height","");this._doResize();this._trigger("onResize",null,{width:opts.width,height:opts.height})},_setBorder:function(){var opts=this.options,panel=this.uiPanel,header=this.header(),body=this.body();if(!$.isEmptyObject(opts.style)){panel.css(opts.style)}if(opts.border){header.removeClass("coral-panel-header-noborder");body.removeClass("coral-panel-body-noborder")}else{header.addClass("coral-panel-header-noborder");body.addClass("coral-panel-body-noborder")}header.addClass(opts.headerCls);body.addClass(opts.bodyCls)},_addHeader:function(){var opts=this.options,panel=this.uiPanel,that=this;if(opts.tools&&typeof opts.tools=="string"){panel.find(">div.coral-panel-header>div.coral-panel-tool .coral-panel-tool-a").appendTo(opts.tools)}panel.children("div.coral-panel-header").remove();if(opts.title&&!opts.noheader){var title=$('<div class="coral-panel-header"><div class="coral-panel-title">'+opts.title+"</div></div>").prependTo(panel);if(opts.iconCls){title.find(".coral-panel-title").addClass("coral-panel-with-icon");$('<div class="coral-panel-icon"></div>').addClass(opts.iconCls).appendTo(title)}var tool=$('<div class="coral-panel-tool"></div>').appendTo(title);tool.bind("click",function(e){e.stopPropagation()});if(opts.tools){if(typeof opts.tools=="string"){$(opts.tools).children().each(function(){$(this).addClass($(this).attr("iconCls")).addClass("coral-panel-tool-a").appendTo(tool)})}else{for(var i=0;i<opts.tools.length;i++){var t=$('<a href="javascript:void(0)"></a>').addClass(opts.tools[i].iconCls).appendTo(tool);
if(opts.tools[i].handler){t.bind("click",eval(opts.tools[i].handler))}}}}if(opts.collapsible){$('<a class="cui-icon-arrow-up3 coral-panel-tool-collapse" href="javascript:void(0)"></a>').appendTo(tool).bind("click",function(){if(opts.collapsed===true){that.expand(true)}else{that.collapse(true)}return false})}if(opts.minimizable){$('<a class="cui-icon-minus3 coral-panel-tool-min" href="javascript:void(0)"></a>').appendTo(tool).bind("click",function(){that.minimize();return false})}if(opts.maximizable){$('<a class="cui-icon-enlarge7 coral-panel-tool-max" href="javascript:void(0)"></a>').appendTo(tool).bind("click",function(){if(opts.maximized===true){that.restore()}else{that.maximize()}return false})}if(opts.closable){$('<a class="cui-icon-cross2 coral-panel-tool-close" href="javascript:void(0)"></a>').appendTo(tool).bind("click",function(){that.close();return false})}panel.children("div.coral-panel-body").removeClass("coral-panel-body-noheader")}else{panel.children("div.coral-panel-body").addClass("coral-panel-body-noheader")}},_loadData:function(){var opts=this.options,that=this;if(opts.url){if(!that.isLoaded||!opts.cache){that.isLoaded=false;that.element.html("");$(this.element).loading({position:"inside",text:this.options.loadtext});if(this.xhr){this.xhr.abort()}this.xhr=$.ajax(this._ajaxSettings());this.xhr.success(function(content){that.setContent(opts.extractor.call(that.element,content));that._trigger("onLoad",null,arguments);that.isLoaded=true}).complete(function(jqXHR,status){if(jqXHR===that.xhr){that.xhr=null}})}}else{if(opts.content){if(!that.isLoaded){that.setContent(opts.content);that.isLoaded=true}}}},_ajaxSettings:function(){var opts=this.options,that=this;return{url:opts.url,cache:false,dataType:"html"}},_doResize:function(){$.coral.refreshAllComponent(this.element)},_destroy:function(forceDestroy){if(forceDestroy!=true){if(this._trigger("beforeDestroy")==false){return}}if(this.originalTitle){this.element.attr("title",this.originalTitle)}this.element.removeClass("coral-panel-body").detach();
this.element.insertAfter(this.component());this.component().remove();this._trigger("onDestroy")},component:function(){return this.uiPanel},panel:function(){return this.uiPanel},getOptions:function(){return this.options},header:function(){return this.uiPanel.find(">div.coral-panel-header")},body:function(){return this.uiPanel.find(">div.coral-panel-body")},setTitle:function(title){this.options.title=title;this.header().find("div.coral-panel-title").html(title)},setContent:function(content){this.element.children().remove();this.element.html(content);if($.parser){$.parser.parse(this.element)}},open:function(forceOpen){var opts=this.options,restore=null;if(forceOpen!=true){if(this._trigger("beforeOpen",null)===false){return}}this.uiPanel.show();opts.closed=false;opts.minimized=false;restore=this.uiPanel.children(".coral-panel-header").find("a.coral-panel-tool-restore");if(restore.length){opts.maximized=true}this._trigger("onOpen");if(opts.maximized===true){opts.maximized=false;this.maximize()}if(opts.collapsed===true){opts.collapsed=false;this.collapse()}if(!opts.collapsed){this._loadData();this._doResize()}},close:function(forceClose){var opts=this.options;var panel=this.uiPanel;if(forceClose!=true){if(this._trigger("beforeClose",null)==false){return}}this._fit(false);panel.hide();opts.closed=true;this._trigger("onClose")},refresh:function(url){this.isLoaded=false;if(url){this.options.url=url}this._loadData()},reLoad:function(url){this.refresh()},resize:function(options){this.resizePanel(options)},move:function(options){var opts=this.options;if(options){if(options.left!=null){opts.left=options.left}if(options.top!=null){opts.top=options.top}}this.uiPanel.css({left:opts.left,top:opts.top});this._trigger("onMove",null,{left:opts.left,top:opts.top})},maximize:function(){var opts=this.options;if(opts.maximized===true){return}this.uiPanel.children("div.coral-panel-header").find("a.coral-panel-tool-max").addClass("coral-panel-tool-restore").addClass("cui-icon-shrink7").removeClass("cui-icon-enlarge7");
if(!this.original){this.original={width:opts.width,height:opts.height,left:opts.left,top:opts.top,fit:opts.fit}}opts.left=0;opts.top=0;opts.fit=true;this.resizePanel();opts.minimized=false;opts.maximized=true;this._trigger("onMaximize")},minimize:function(){this._fit(false);this.uiPanel.hide();this.options.minimized=true;this.options.maximized=false;this._trigger("onMinimize")},restore:function(){if(this.options.maximized===false){return}this.uiPanel.show();this.uiPanel.children("div.coral-panel-header").find("a.coral-panel-tool-max").removeClass("coral-panel-tool-restore").addClass("cui-icon-enlarge7").removeClass("cui-icon-shrink7");$.extend(this.options,this.original);this.resizePanel();this.options.minimized=false;this.options.maximized=false;this.original=null;this._trigger("onRestore")},collapse:function(animate){var opts=this.options,body=this.body(),that=this;if(opts.collapsed===true){return}body.stop(true,true);if(that._trigger("beforeCollapse")===false){return}this.header().find("a.coral-panel-tool-collapse").addClass("coral-panel-tool-expand");if(animate===true){body.slideUp("normal",function(){opts.collapsed=true;that._trigger("onCollapse")})}else{body.hide();opts.collapsed=true;that._trigger("onCollapse")}},expand:function(animate){var opts=this.options,body=this.body(),that=this;if(opts.collapsed===false){return}body.stop(true,true);if(that._trigger("beforeExpand")===false){return}this.header().find("a.coral-panel-tool-collapse").removeClass("coral-panel-tool-expand");if(animate===true){body.slideDown("normal",function(){opts.collapsed=false;that._trigger("onExpand");that._loadData();that._doResize()})}else{body.show();opts.collapsed=false;that._trigger("onExpand");that._loadData();that._doResize()}}});$.coral.panel.fit=function($ele,fit){fit=(fit==undefined?true:fit);var parent=$ele.parent()[0];parent=$(parent);if(fit){if(!parent.hasClass("coral-panel-noscroll")){parent.addClass("coral-panel-noscroll");if(parent.attr("tagName")=="BODY"){$("html").addClass("coral-panel-fit")
}}}else{if(parent.hasClass("coral-panel-noscroll")){parent.removeClass("coral-panel-noscroll");if(parent.attr("tagName")=="BODY"){$("html").removeClass("coral-panel-fit")}}}return{width:parent.width(),height:parent.height()}}})(jQuery);

/*!
 * 组件库4.0：下拉框
 * 
 * 依赖JS文件：
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 *    jquery.coral.panel.js
 *    jquery.validatehelper.js
 *    jquery.coral.control.js
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./textbox","./panel"],a)}else{a(jQuery)}}(function(a,b){a(document).unbind(".coral-combobox").bind("mousedown.coral-combobox mousewheel.coral-combobox",function(g){var f=a(g.target).closest(".coral-combo-panel").length;var h=a(g.target).closest(".coral-combo").length;var d=a(g.target).closest(".coral-button").length;if(f||(h&&!d)){return}c()});function c(d,e){a(".coral-combo-wrapper").not(d).hide();a(".coral-combo-iframePanel:visible").not(e).hide()}a.component("coral.combo",a.coral.inputbase,{castProperties:["triggers"],version:"4.0.2",options:{panelRenderOnShow:false,popupDialog:false,showStar:true,showDirection:"down",labelField:null,starBefore:false,isInited:false,id:null,name:null,showOnFocus:true,iframePanel:false,buttons:[],forceSelection:true,width:"auto",height:22,placeholder:"",cls:"",required:false,errMsg:null,errMsgPosition:"leftBottom",isLabel:false,panelWidth:null,panelHeight:"auto",panelComponentCls:"",position:{my:"left top",at:"left bottom",collision:"none"},maxPanelHeight:200,multiple:false,separator:",",valueTextSeparator:"-",postMode:"value",editable:false,readonly:false,readonlyInput:true,disabled:false,clearOnLoad:true,hasArrow:true,value:"",text:"",delay:200,zIndex:10000,enableHighlight:false,enablePinyin:false,showClose:false,enableFilter:false,enterFilter:true,query:null,filter:function(i,k){var f=a(this).attr("component-role"),g=a(this)[f]("option"),d=g.textField,e=g.valueField,j=(k[d]).toLowerCase(),h=(k[e]).toString().toLowerCase();i=i.toLowerCase();if(j.indexOf(i)>-1){return"text"}if(g.enablePinyin===true){if(pinyinEngine.toPinyin(j,false,"").indexOf(i)>-1){return true}}if(h.indexOf(i)>-1){return true}else{return false}},onKeyUp:null,onKeyDown:null,onEnter:null,onBlur:null,onClick:null,onValidError:null,onValidSuccess:null,onShowPanel:a.noop,onHidePanel:a.noop,onChange:a.noop,triggers:null,excluded:false},_addCacheItem:function(d){if(typeof d!=="object"){return
}if(typeof this.cache==="undefined"){this.cache={}}this.cache=a.extend({},this.cache,d)},_getCacheItem:function(d){if(typeof d!=="string"){return}if(this.cache&&this.cache[d]){return this.cache[d]}else{return null}},_removeCacheItem:function(d){if(this.cache&&this.cache[d]){delete this.cache[d]}},_create:function(){this._prepareInit();this._initCombo();this._setDefaultValue();this._initState();this._initData();this._bindEvent()},_prepareInit:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.panelRendered=false;this.dataLoaded=false;this.search=false;this.isInit=false;this.isLoaded=false;this.isInited=false;this.currentValues=[];this.cache={};if(this.options.enableSearch===true){this.options.readonlyInput=false}if(this.options.popupDialog||this.options.enableFilter){this.options.readonlyInput=true}this.element.hide();if(this.element.attr("id")){if(this.element.attr("id")!=this.options.id){this.options.id=this.element.attr("id")}}else{if(this.options.id){this.element.attr("id",this.options.id)}}if(!this.element.attr("id")){this.options.id=this.element.uniqueId().attr("id")}if(this.element.attr("name")&&this.options.name){if(this.element.attr("name")!=this.options.name){this.options.name=this.element.attr("name")}}else{if(!this.options.name&&this.element.attr("name")){this.options.name=this.element.attr("name")}}if(this.element.attr("value")&&this.options.value){if(this.element.attr("value")!=this.options.value){this.options.value=this.element.attr("value")}}else{if(!this.options.value&&this.element.attr("value")){this.options.value=this.element.attr("value")}}},_initCombo:function(){var f=null,e=null,h="",g="",d="";this.uiCombo={combo:null,panel:null};this.previousValue=null;this.uiCombo.combo=a("<span class='coral-combo coral-textbox'></span>").insertAfter(this.element);this.element.appendTo(this.uiCombo.combo);
if(this.options.hasArrow==true){if(this.options.showDirection=="down"){d="<span class='coral-combo-arrow coral-icon-arrow cui-icon-arrow-down3'></span>"}if(this.options.showDirection=="up"){d="<span class='coral-combo-arrow coral-icon-arrow cui-icon-arrow-up3'></span>"}}if(this.options.showClose&&!this.options.required){h="<span class='coral-input-clearIcon cui-icon-cross2'></span>"}this.elementBorder=a("<span class='coral-combo-border coral-textbox-border coral-corner-all'>"+h+d+"</span>").appendTo(this.uiCombo.combo);if(this.options.labelField){this.uiLabel=a('<label class="coral-label">'+this.options.labelField+"</label>");this.elementBorder.before(this.uiLabel);this.uiCombo.combo.addClass("coral-hasLabel")}this.uiCombo.textbox=a("<input type='text' autocomplete='off' class='coral-combo-text coral-combo-default coral-textbox-default'>").appendTo(this.elementBorder);if(this.options.name){this.element.removeAttr("name").attr("orgname",this.options.name);g=" name='"+this.options.name+"'"}e=a("<input type='hidden' "+g+" class='coral-combo-value'>").appendTo(this.uiCombo.combo);this.uiCombo.panel=a("<div class='coral-combo-panel "+this.options.panelComponentCls+"'></div>").appendTo("body");if(this.options.iframePanel){this.uiCombo.iframePanel=a("<iframe class='coral-combo-iframePanel' style='position:absolute;display:none;'></iframe>").appendTo("body")}this.uiCombo.pContent=a("<div class='coral-combo-content'></div>").appendTo(this.uiCombo.panel);if(this.options.enableFilter){a("<div class='coral-combo-filter'><span class='coral-combo-filter-border'><input type='text' class='coral-combo-filterbox'></span><span class='coral-combo-search cui-icon-search2'></span></div>").appendTo(this.uiCombo.panel)}var i="absolute";if(this.options.popupDialog){i="";this.uiCombo.popupDialog=a("<div class='coral-combo-popup-dialog'></div>").appendTo("body");this.uiCombo.popupInputbox=a("<input type='text' />").appendTo(this.uiCombo.popupDialog)}if(this.options.hasArrow==false){this.elementBorder.css({"padding-right":0});
this.uiCombo.textbox.css({"padding-right":0});this.uiClose().css({right:0})}this.uiCombo.panel.css({position:i}).addClass("coral-combo-wrapper "+this.options.cls+"-panel coral-front").hide();this.uiCombo.textbox.attr("placeholder",this.options.placeholder);this._showPlaceholder();if(this.options.buttons.length>0){this._createButtonPanel()}},_initState:function(){this.options.isLabel===true?this._setIsLabel(this.options.isLabel):this._setReadonly(this.options.readonly);if(!this.options.readonly){this.uiCombo.textbox.prop("readonly",this.options.readonlyInput)}this._setDisabled(this.options.disabled);this.resize()},_initData:a.noop,_setDefaultValue:function(){if(!this.options.value){this.originalValue="";return}else{this.setValue(this.options.value);this.originalValue=this.getValue()}},_showPlaceholder:function(e){if(a.support.placeholder||this.component().find(".coral-textbox-placeholder-label").length){return}e=e?e:this.options.placeholder;var d=a("<span class='coral-textbox-placeholder-label'>"+e+"</span>");a(this.uiCombo.textbox).after(d)},_hidePlaceholder:function(){if(a.support.placeholder){return}this.component().find(".coral-textbox-placeholder-label").remove()},_setIsLabel:function(d){var e=this;if(true===d){this.component().removeClass("coral-readonly");this.component().addClass("coral-isLabel");this.uiCombo.textbox.prop("readonly",true);if(this.options.emptyText&&""===this.getValue()){this.uiCombo.textbox.val("")}this.hidePanel();this.uiCombo.textbox.removeAttr("placeholder")}else{this.component().removeClass("coral-isLabel coral-readonly");this.uiCombo.textbox.prop("readonly",this.options.readonlyInput);this.options.readonly=false;this.uiCombo.textbox.attr("placeholder",this.options.placeholder)}this.options.isLabel=!!d},_setReadonly:function(d){if(d){this.element.prop("readonly",true);this.uiCombo.textbox.prop("readonly",true);this.uiCombo.combo.find(".coral-combo-value").prop("readonly",true)}else{a(this.element).prop("readonly",false);this.uiCombo.textbox.prop("readonly",false);
this.uiCombo.combo.find(".coral-combo-value").prop("readonly",false)}this.options.readonly=!!d;this.uiCombo.combo.removeClass("coral-isLabel");this.uiCombo.combo.toggleClass("coral-readonly",this.options.readonly)},_setDisabled:function(d){if(d){this.element.prop("disabled",true);this.uiCombo.combo.find(".coral-combo-value").prop("disabled",true);this.uiCombo.combo.find(".coral-combo-text").prop("disabled",true)}else{a(this.element).prop("disabled",false);this.uiCombo.combo.find(".coral-combo-value").prop("disabled",false);this.uiCombo.combo.find(".coral-combo-text").prop("disabled",false)}this.options.disabled=!!d;this.uiCombo.combo.toggleClass(this.componentFullName+"-disabled coral-state-disabled",this.options.disabled)},_selectPrev:a.noop,_selectNext:a.noop,_doEnter:a.noop,_doQuery:a.noop,_addHighlight:function(e,d){if(d===""||!e.length||!this.options.enableHighlight){return}e=a(e);var g="",h=d.replace(/[\s]+/g," ").split(" "),f;e.each(function(j,l){var i=a(l),m=a(l).parent(),k=a(l).html();if(k==d){return}if(i.hasClass(".coral-combobox-item-selected")){m.html(that._getTextFromHTML(k));return}if(!i.children("input").length){for(var o=0;o<h.length;o++){f=new RegExp(""+h[o]+"","gmi");k=k.replace(f,'<span class="coral-keyword-highlight">'+h[o]+"</span>")}i.html(k)}})},_getTextFromHTML:function(d){if(typeof d==="undefined"){return}d=d.replace(/<\/?[^>]*>/g,"");d=d.replace(/[ | ]*\n/g,"\n");d=d.replace(/&nbsp;/ig,"");return d},_clearValues:function(l){var g=this.options.valueField,e=this.currentValues,k=e.length,h,f,d=0;for(h=0;h<k;h++){for(f=0;f<l.length;f++){if(e[h]==l[f][g]){d+=1;break}}}if(d!=k){return true}else{return false}},_removeHighlight:function(d){if(!d.length||!this.options.enableHighlight){return}d=a(d);var e=this;d.each(function(f,h){var i=a(h).parent();var g=i.html();i.html(e._getTextFromHTML(g))})},focus:function(){var e=this;if(this.options.disabled||this.options.readonly||this.options.isLabel){return false}this.uiCombo.textbox.focus();if(!this.dataLoaded){var d={focus:{param:null}};
this._addCacheItem(d);return true}return true},_bindEvent:function(){var h=this,g=this.options,j=this.uiCombo.combo,d=this.uiCombo.panel,i=this.uiCombo.iframePanel;if(this.options.disabled){this.element.addClass("coral-state-disabled")}this._off(h.component());var e,f;this._on({"mouseenter.coral-combo-border":function(k){if(h.component().hasClass("coral-isLabel")||h.component().hasClass("coral-readonly")){return}h.uiCombo.combo.addClass("coral-textbox-hover");this._updateTitle()},"mouseleave.coral-combo-border":function(k){if(h.component().hasClass("coral-isLabel")||h.component().hasClass("coral-readonly")){return}h.uiCombo.combo.removeClass("coral-textbox-hover")},"keydown.coral-combo-text":function(k){this._doKeyDown(k,false)},"keyup.coral-combo-text":function(k){if(this.options.readonly||this.options.isLabel){return}this._trigger("onKeyUp",k,{})},"blur.coral-combo-text":function(k){this._setHv(k,"blur")},"focusin.coral-combo-text":function(k){if(this.options.readonly||this.options.isLabel){return}this.component().addClass("coral-state-focus");if(!e){this._trigger("onFocus",k)}},"focusout.coral-combo-text":function(k){if(this.cancelBlur){delete this.cancelBlur;return}if(this.options.readonly||this.options.isLabel){return}this._delay(function(){if(e){e=false;return}this.component().removeClass("coral-state-focus");if(f){f=false;return}this.hidePanel();this._trigger("onBlur",k)},100)},"click.coral-combo-text":function(k){if(h.component().hasClass("coral-isLabel")||h.component().hasClass("coral-readonly")){if(this.options.hasArrow==true&&!this.options.readOnlyInput){return}}if(h.component().hasClass("coral-state-focus")){if(this.options.popupDialog&&this.options.showOnFocus===true){this.uiCombo.popupDialog.dialog("open")}else{if(d.is(":visible")){this.hidePanel()}else{this.showPanel()}}}if(this.options.enableFilter){f=true}h._trigger("onClick",k)},"mousedown.coral-combo-arrow":function(k){if(this.component().hasClass("coral-isLabel")||this.component().hasClass("coral-readonly")){return
}if(this.component().hasClass("coral-state-focus")){e=true}},"click.coral-combo-arrow":function(k){c(d,i);if(h.component().hasClass("coral-isLabel")||h.component().hasClass("coral-readonly")){return}if(h.component().hasClass("coral-state-focus")){e=true}if(this.options.enableFilter){f=true}this.focus();if(h.options.popupDialog){h.uiCombo.popupDialog.dialog("open")}else{if(d.is(":visible")){h.hidePanel()}else{h.showPanel()}}},"click.coral-input-clearIcon":function(k){if(this.component().hasClass("coral-state-focus")){e=true}this.clear();if(this.options.placeholder){this._showPlaceholder()}},combogridonshowpanel:function(k){h._removeGridHighlights();h._scrollTo(h.getValue());h.grid().grid("refresh")}});this._on(this.uiCombo.panel.find(".coral-combo-filterbox"),{keydown:function(k){this._doKeyDown(k,true)}});this._on(this.uiCombo.panel.find(".coral-combo-search"),{click:function(k){k.preventDefault();this._filter(k,true);return false}});this._on(this.uiCombo.panel.find(".coral-combo-filterbox"),{focusout:function(k){this._delay(function(){this.hidePanel()},100)}})},_updateTitle:function(){var d=a("<span style = 'visibility: hidden'>"+this.getText()+"</span>").appendTo("body");if(this.component().outerWidth()<d.width()){this.component().attr("title",this.getText())}d.remove()},_doKeyDown:function(i,f){var g=this.options,d=this.panel();this.previousValue=a(i.target).val();if(g.readonly||g.isLabel){return}var h=a.coral.keyCode;switch(i.keyCode){case h.TAB:break;case h.ENTER:i.preventDefault();this._doEnter(i);this._setHv(i);this._trigger("onEnter",i,{});break;case h.ESCAPE:this.hidePanel();break;case h.UP:i.preventDefault();if(g.readonly===false){if(!d.is(":visible")){this.showPanel()}else{if(g.onSelectPrev){this._trigger("onSelectPrev",i)}else{this._selectPrev(i)}}}break;case h.DOWN:i.preventDefault();if(g.readonly===false){if(!d.is(":visible")){this.showPanel()}else{if(g.onSelectNext){this._trigger("onSelectNext",i)}else{this._selectNext(i)}}}break;default:this._filter(i,f);
break}this._hidePlaceholder();this._trigger("onKeyDown",i)},_setHv:function(j,g){var k=a(j.target),f=[],d=k.val();if(this.options.multiple){d=d.split(this.options.separator)}else{d=[d]}this._showItems();var i=true;if(g=="blur"){i=d.toString()!=this.previousValue}if(i){var h=this.options.textField,m=this.options.valueField;var l=this._checkMathch(d,true);if(!l){k.val("");this.setValues([""])}else{this.setValues(l.valarr)}}},_searchFilter:a.noop,_filter:function(i,f){var h=this,g=this.options,d=this.panel();if(h.timer){clearTimeout(h.timer)}if(!d.is(":visible")){h.showPanel()}h.timer=setTimeout(function(){var l=a(i.target).val();if(f){l=d.find(".coral-combo-filterbox").val()}if(h.options.multiple){l=l.split(g.separator)}else{l=[l]}if(l==h.previousValue){return}if(g.query){g.query.call(h.element,l)}else{h.search=true;h._doQuery(l)}var k=h.options.textField,j=h.options.valueField;if(!f){var e=h._checkMathch(l,false);h.setValues(e.valarr,false,true)}h.resizeIframePanel()},g.delay);return false},_formatValue:function(d){return d},_setOption:function(d,e){if(d==="id"||d==="name"){return}if(d==="readonly"){this._setReadonly(e)}if(d==="disabled"){this._setDisabled(e)}if(d==="data"){this.data=e}this._super(d,e);if(d==="isLabel"){this._setIsLabel(e);return}},_destroy:function(){this.panel().remove();if(this.options.iframePanel){this.uiCombo.iframePanel.remove()}this.component().replaceWith(this.element);if(this.options.name){this.element.removeAttr("orgname").attr("name",this.options.name)}this.element.show();this.element.css(this.originalCss)},component:function(){return this.uiCombo.combo},panel:function(){return this.uiCombo.panel},uiArrow:function(){return this.uiCombo.combo.find("span.coral-combo-arrow")},uiClose:function(){return this.uiCombo.combo.find("span.coral-input-clearIcon")},uiBorder:function(){return this.component().find("span.coral-combo-border")},resize:function(h){var i=this.options,j=this.uiCombo.combo,f=this.uiCombo.panel,e=this.elementBorder;if(h){i.width=h
}if(i.width=="auto"||i.width=="item"){return}if(isNaN(i.width)){var g=this.element.parent(":first"),d=null;h=this.element.outerWidth();if(g&&g.get(0).tagName!=="BODY"){d=g.outerWidth();if(d<h){h=d}}i.width=h}j.outerWidth(i.width)},resizeIframePanel:function(){var f=this.options,d,h=this.uiCombo.combo,e=this.uiCombo.panel,g=this.uiCombo.iframePanel||a();d=e.height();g.css("height",d)},_initPanel:function(){var g=this.options,h=this.uiCombo.combo,e=this.elementBorder,d=this.uiCombo.panel,f=g.panelHeight;if(!this.panelRendered){this._renderItems(this.options.data);this.uiCombo.pContent.html(this.lazyPanelHtml);this.panelRendered=true;this.lazyPanelHtml=""}d.css("width",(g.panelWidth?g.panelWidth:e.outerWidth()));d.css("height",f);if(isNaN(f)){this.uiCombo.pContent.css({"max-height":g.maxPanelHeight+"px"});this.uiCombo.popupDialogTree&&this.uiCombo.popupDialogTree.css({"max-height":g.maxPanelHeight+"px"})}if(this.options.enableFilter&&!isNaN(f)){this.uiCombo.pContent.height(g.panelHeight-30)}else{if(f=="auto"){this.uiCombo.pContent.height("")}else{this.uiCombo.pContent.height(f-2)}}if(this.options.iframePanel){this.uiCombo.iframePanel.css("height",d.outerHeight())}},showPanel:function(){var i=this,d=this.options,f=this.uiCombo.combo,h=this.elementBorder,l=this.options.showDirection,e=this.uiCombo.panel,g=this.uiCombo.iframePanel||a();if(e.is(":hidden")){var k=a(".coral-front:visible").map(function(){return +a(this).css("z-index")}).get(),j=Math.max.apply(null,k);if(j>=+e.css("z-index")){e.css("z-index",j+1);if(this.options.iframePanel){g.css("z-index",j)}}if(!this._PanelInited){this._initPanel()}this._PanelInited=true;e.show(0,function(){i.resizeIframePanel();g.show();(function m(){if(e.is(":visible")){e.css({left:a.coral.getLeft(e,h),top:a.coral.getTop(e,h,l),width:(d.panelWidth?d.panelWidth:h.outerWidth())});if(i.options.iframePanel){g.css({left:a.coral.getLeft(g,h),top:a.coral.getTop(g,f,l),width:(d.panelWidth?d.panelWidth:h.outerWidth())})}setTimeout(m,200)}})();i.uiCombo.panel.find(".coral-combo-filterbox").focus();
i._trigger("onShowPanel",null,{})})}if(d.enableFilter){this.setValues(this.getValues())}},hidePanel:function(){this.uiCombo.panel.hide();if(this.uiCombo.iframePanel){this.uiCombo.iframePanel.hide()}this._trigger("onHidePanel",null,{})},disable:function(){this._setDisabled(true)},enable:function(){this._setDisabled(false)},show:function(){this._super()},hide:function(){this._super();this.hidePanel()},hideErrors:function(){a.validate.hideErrors(this.uiBorder());this.component().removeClass("coral-combo-error")},clear:function(){this.setValues([],true,false)},getOldText:function(){return this.oldText},reset:function(){this.setValue(this.originalValue)},getText:function(){return this.uiCombo.combo.find("input.coral-combo-text").val()},_setText:function(d){var e=this.uiCombo.combo.find("input.coral-combo-text");e.val(d);this.previousValue=d},setText:function(d){this._setText(d)},getValues:function(){var d=[];if(!this.dataLoaded){return this.currentValues}this.uiCombo.combo.find("input.coral-combo-value").each(function(){d.push(a(this).val())});return d},setValues:function(d,l,k){var v=this.getValues(),m=null,n=this.options,r=0,h=[],g=[];d=d||[];this.oldValues=v;var t=[],w="",p="";this.uiCombo.combo.find("input.coral-combo-value").remove();for(r=0;r<d.length;r++){w="";p="";if(this.options.name){w=" name='"+this.options.name+"' "}t.push("<input type='hidden' "+w+" value='"+this._formatValue(d[r])+"' class='coral-combo-value' />")}this.uiCombo.combo.append(t.join(""));for(r=0;r<v.length;r++){h[r]=v[r]}for(r=0;r<d.length;r++){for(var q=0;q<h.length;q++){if(d[r]==h[q]){g.push(d[r]);h.splice(q,1);break}}}if(d.length){if(this.options.placeholder){this._hidePlaceholder()}}if(n.width=="item"){var e=a("<div style = 'visibility:hidden;'><span>"+this.getText()+"</span></div>").appendTo("body"),f=this.component().find(".coral-textbox-default");var u=parseInt(f.css("padding-left"))+parseInt(f.css("padding-right")),s=this.uiArrow().outerWidth()+2*parseInt(this.uiArrow().css("right")),o=e.find("span").outerWidth()+u+s;
this.resize(o);e.remove();n.width="item"}if((g.length!=d.length||d.length!=v.length)&&(!k)&&l){if(this.options.multiple){this._trigger("onChange",null,{value:d,newValue:d,newText:this.getText(),text:this.getText(),oldValue:v,oldText:this.getOldText()})}else{this._trigger("onChange",null,{value:d[0],newValue:d[0],newText:this.getText(),text:this.getText(),oldValue:v[0],oldText:this.getOldText()})}}},getValue:function(){return this.getValues().join(this.options.separator)},setValue:function(f,d,e){f=f||"";f=f.split(this.options.separator);this.setValues(f,d)},getSelectedItems:function(){var g=this.getValues(),l=[];var e=this.options.data;for(var f=0;f<g.length;f++){for(var d=0;d<e.length;d++){var k=e[d];if(g[f]==k.id){for(var h in k){l.push(h+"="+k[h]+"\n")}}}}return l},refresh:function(){this.destroy();this.component().remove();this._create()}})}));

(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./combo"],a)}else{a(jQuery)}}(function(a,b){var c=0;a.component("coral.combobox",a.coral.combo,{version:"4.0.3",castProperties:["data","buttons"],options:{cls:"",valueField:"value",textField:"text",panelRenderOnShow:false,mode:"local",method:"post",url:null,data:[],buttons:[],width:"auto",showText:true,emptyText:null,postMode:"value",formatter:function(e){var d=a(this).combobox("option","textField");return e[d]},loader:function(i,h,f){var g=this,d=a(this),e=d.combobox("option","url");if(!e){return false}a.ajax({type:d.combobox("option","method"),url:e,data:i,dataType:"json",success:function(j){h(j)},error:function(){f.apply(this,arguments)}});return false},beforeLoad:a.noop,onLoad:a.noop,onError:a.noop,onShowPanel:a.noop,beforeSelect:a.noop,onSelect:a.noop,unSelect:a.noop},_create:function(){var d=this,g=null;var f=new Date();this.data=this.data||[];c++;d.options.itemIdPrefix="combobox_i"+c;this.element.addClass("coral-form-element-combobox coral-validation-combobox ctrl-form-element");var e=a.coral.toFunction(this.options.onShowPanel);g=function(h){e.apply(d.element,[h]);d._scrollTo(d.getValue())};this.options.onShowPanel=g;this._super();this._on(this.uiCombo.panel,{mouseover:function(h){a(h.target).closest(".coral-combobox-item").addClass("coral-combobox-item-hover")},mouseout:function(h){a(h.target).closest(".coral-combobox-item").removeClass("coral-combobox-item-hover")},mousedown:function(l){this.cancelBlur=true;this._delay(function(){delete this.cancelBlur});var j=a(l.target).closest(".coral-combobox-item"),k=j.attr("value");if(a(l.target).closest(".coral-combo-filterbox").length){return}if(!j.length||j.hasClass("coral-combobox-item-disabled")){return false}var h=this.getRowIndex(k);if(false===this._trigger("beforeSelect",null,[{item:this.options.data[h]},{data:this.options.data[h]}])){return false}if(this.options.multiple){this.oldText=this.uiCombo.textbox.val();if(""===k){this.clear();this.hidePanel();
this.select(k)}else{if(this.options.emptyText){this.unselect("")}if(j.hasClass("coral-combobox-item-selected")){this.unselect(k);j.removeClass("coral-combobox-item-selected")}else{this.select(k)}}}else{this.oldText=this.uiCombo.textbox.val();this.hidePanel();this.select(k)}return false}});if(this.options.isLabel&&this.options.emptyText&&""===this.getValue()){this.uiCombo.textbox.val("")}},_initData:function(){if(this.options.url){return this._request(this.options.url)}if(this.options.data.length){return this.loadData(this.options.data)}return this.loadData(this._transformData())},_renderItems:function(y){var o=this.options,m=this.panel(),j=this,f={},r=[],n=[],u,d="",g=a.coral.toFunction(this.options.formatter),k=a.coral.toFunction(this.options.itemattr);for(u=0;u<y.length;u++){var h=y[u],l=h[o.valueField],p=h[o.textField],x=!!h.hidden==true?"hidden":"",w="",e=p;if(g){e=g.call(this.element,y[u])}if(a.isFunction(k)){var q=k.apply(this.element[0],[{item:y[u]}]);if(!a.isEmptyObject(q)){if(q.hasOwnProperty("style")){w+=q.style;delete q.style}if(q.hasOwnProperty("class")){x+=" "+q["class"];delete q["class"]}try{delete q.role}catch(t){}for(attrName in q){if(q.hasOwnProperty(attrName)){d+=" "+attrName+"="+q[attrName]}}}n.push("<div class='coral-combobox-item "+x+d+"' style='"+w+"' id='"+this.options.itemIdPrefix+"_"+u+"' value='"+l+"'>"+e+"</div>")}else{n.push("<div class='coral-combobox-item "+x+" ' id='"+this.options.itemIdPrefix+"_"+u+"' value='"+l+"'>"+e+"</div>")}if(h.selected&&a.inArray(l,r)===-1){r.push(this.getModeValue(l,p))}}this.lazyPanelHtml=n.join("");return r},loadData:function(h,i,n){var d=this.options,e=this.panel(),j=this,f=n||"onLoad",p=a.coral.toFunction(this.options.formatter),k={},g=[],l=false,m=null;if(!(h instanceof Array)){h=[]}this.data=(h||[]);if(d.clearOnLoad){l=j._clearValues(this.data)}this.uiCombo.pContent.empty();if(this.options.emptyText){if(!(h.length>0&&""===h[0][this.options.valueField])){k[this.options.valueField]="";k[this.options.textField]=this.options.emptyText;
h.unshift(k)}}var o=[];if(!this.options.panelRenderOnShow){g=this._renderItems(this.data);this.uiCombo.pContent.html(this.lazyPanelHtml);this.panelRendered=true}if(this.currentValues.length&&!l){g=this.currentValues}if(!this.isInit){this.isInit=true;this.originalValue=g.join(",")}this.dataLoaded=true;if(d.multiple){this.setValues(g,false,i)}else{g=g.length?[g[0]]:[];this.setValues(g,false,i)}this._trigger(f,null,[h])},localFilter:function(j){var h=this.getData(),g=this.panel().find(".coral-combobox-item");for(var e=0;e<h.length;e++){a(g[e]).hide();if(j.apply(this.element,[h[e]])){var d=h[e][this.options.valueField];var f=h[e][this.options.textField];a(g[e]).show()}}},_scrollTo:function(g){var d=this.panel().find(".coral-combo-content"),e;var f=this.getEl(g);if(f.length){if(f.position().top<=0){e=d.scrollTop()+f.position().top;d.scrollTop(e)}else{if(f.position().top+f.outerHeight()>d.height()){e=d.scrollTop()+f.position().top+f.outerHeight()-d.height();d.scrollTop(e)}}}},_transformData:function(){var d=this.options;var e=[];a(">option",this.element).each(function(){var f={};f[d.valueField]=a(this).attr("value")!==b?a(this).attr("value"):a(this).html();f[d.textField]=a(this).html();f.selected=a(this).attr("selected");e.push(f)});return e},_showItems:function(){this.uiCombo.panel.find(".coral-combobox-item").show()},_doQuery:function(g){var e=this.options,p=this.options.filter;if(e.mode=="remote"){this._request(null,{q:g},true)}else{var f=this.panel();var k=this.getData(),s=f.find(".coral-combobox-item");s.hide();this._removeHighlight(this.uiCombo.pContent.find("span.coral-keyword-highlight"));this.uiCombo.pContent.find(".coral-combobox-item-selected").removeClass("coral-combobox-item-selected");this.uiCombo.pContent.find(".coral-item-focus").removeClass("coral-item-focus");for(var l=0;l<k.length;l++){var m=pinyinEngine.toPinyin(k[l][e.textField],false,"");for(var h=0;h<g.length;h++){var d=p.apply(this.element,[g[h],k[l]]);if(d){var n=k[l][e.valueField].toString();var o=k[l][e.textField];
if(o.indexOf(g[h])>-1||n.indexOf(g[h])>-1||m.indexOf(g[h])>-1){a(s[l]).show();if(o==g[h]){a(s[l]).addClass("coral-combobox-item-selected");this._removeHighlight(a(s[l]).find("span.coral-keyword-highlight"))}else{if(d=="text"){this._addHighlight(a(s[l]),g[h])}}}}}}}},_checkMathch:function(s,t){var d=[],r=[];var e=this.options,g=e.textField,u=e.valueField;var q=0;if(t){this._showItems()}var f=false;var n=this.data,l="",h={},o=0,m,k;if(e.multiple){for(m=0;m<s.length;m++){for(k=0;k<n.length;k++){if(n[k][g]!=s[m]&&n[k][u]!=s[m]){h[m.toString()]=true}if(n[k][g]==s[m]){l=this.getModeValue(n[k][u],n[k][g]);d.push(l);f=true;break}}if(!f&&!e.forceSelection){if((!h[m.toString()]&&!t)||t){d.push(s[m]);r.push(s[m])}}f=false}}else{var p=-1;for(m=0;m<n.length;m++){if(n[m][g]==s[0]){p=p===-1?m:p;f=true}if(n[m][g]!=s[0]&&n[m][u]!=s[0]){h["0"]=true}}if(f){l=this.getModeValue(n[p][u],n[p][g]);d.push(l)}if(!f&&!e.forceSelection){if((!h["0"]&&!t)||t){d.push(s[0]);r.push(s[0])}}}return{valarr:d,textarr:r}},_request:function(f,g,i){var j=this,d={},h=[],e=this.options.loader,l=false;if(!f&&!j.options.url){f=[]}else{if(!f&&j.options.url){f=j.options.url}}if(typeof(f)!=="string"){d=f;if(d.data){h=d.data}else{if(d.url){f=d.url;j.options.url=d.url;l=true}else{if(d instanceof Array){h=f}else{if(!d.url&&!d.data&&!j.options.url){h=[]}else{if(!d.url&&!d.data&&j.options.url){f=j.options.url;l=true}}}}}}else{j.options.url=f;l=true}if(l){g=g||{};if(this._trigger("beforeLoad",null,[g])==false){return}e.apply(this.element,[g,function(n){var m=d.onLoad;j.loadData(n,i,m);j._loadedHandler()},function(){j._trigger("onError",null,arguments)}])}else{var k=d.onLoad;j.loadData(h,i,k)}},_loadedHandler:function(){var e=this;var d=this._getCacheItem("setValues");if(d){this.setValues(d.values,d.triggerOnChange,d.remainText);this._removeCacheItem("setValues")}var f=this._getCacheItem("focus");if(f){this._removeCacheItem("focus")}},_selectItems:function(e,j){var g=this.panel(),h=null,i=null,f=g.find(".coral-item-focus:visible"),d=":last";
if(e){d=":first"}f.removeClass("coral-item-focus");if(f.length){i=f.attr("value")}else{f=h=g.find(".coral-combobox-item-selected:visible"+d);if(h.length){i=h.attr("value")}}if(j=="prev"){if(f.prevAll(":visible").length===0){f=g.find(".coral-combobox-item:visible:last");f.addClass("coral-item-focus")}else{f.prevAll(":visible:eq(0)").addClass("coral-item-focus")}}else{if(f.nextAll(":visible").length===0){f=g.find(".coral-combobox-item:visible:first");f.addClass("coral-item-focus")}else{f.nextAll(":visible:eq(0)").addClass("coral-item-focus")}}return i},_selectPrev:function(){var d=this.panel(),g=this._selectItems(true,"prev"),f=d.find('.coral-combobox-item[value="'+g+'"]'),e=null,h=null;if(f.length){e=f.prevAll(":visible:eq(0)")}else{f=d.find(".coral-combobox-item:visible:last")}if(null!==e&&e.length===0){e=d.find(".coral-combobox-item:visible:last")}h=!!e?e.attr("value"):f.attr("value");this.select(h);this._scrollTo(h)},_selectNext:function(){var d=this.panel(),g=this._selectItems(true,"next"),f=d.find('.coral-combobox-item[value="'+g+'"]'),e=null,h=null;if(f.length){e=f.nextAll(":visible:eq(0)")}else{f=d.find(".coral-combobox-item:visible:first")}if(e&&e.length==0){e=d.find(".coral-combobox-item:visible:first")}h=e?e.attr("value"):f.attr("value");this.select(h);this._scrollTo(h)},_doEnter:function(l){var f=this.panel(),n=this.getValues(),o=f.find(".coral-item-focus:visible"),j,h=this.getData(),d=this.options,m=o.attr("value");if(m){var g="",k=0;for(j=0;j<h.length;j++){if(m==h[j][d.valueField]){k=j}}g=this.getModeValue(m,h[k][d.textField]);if(this.options.multiple){if(a.inArray(g,n)==-1){this.select(m)}else{this.unselect(m)}}else{this.hidePanel()}}},_formatValue:function(j){var h=this.getData(),g=this.options,e=g.valueField,d=g.textField,f=0,k=null;if("text"===g.postMode||"value-text"===g.postMode){for(f=0;f<h.length;f++){k=h[f];if(""!=j&&j==k[e]){if("text"===g.postMode){return k[d]}if("value-text"===g.postMode){return j+g.valueTextSeparator+k[d]}}}}return j},_destroy:function(){this.element.removeClass("coral-validation-combobox");
this.element.removeClass("coral-form-element-combobox");this._super()},_getOnlyValues:function(){var h=this.getData(),d=this.options,e=[],k=0;if(!this.currentValues||(!this.currentValues[0]&&this.currentValues.length===1)){return e}for(;k<this.currentValues.length;k++){var l=this.currentValues[k],g=0,m=d.valueField,f=d.textField,n=null;if("value-text"===d.postMode){l=l.split(d.valueTextSeparator)[0];e.push(l)}if("value"===d.postMode){e.push(l)}if("text"===d.postMode){for(;h&&g<h.length;g++){n=h[g];if(n[f]==l){e.push(n[m]);break}}}}return e},_getCurrentValues:function(){var g=this.getData(),f=this.options,e=[],d=0;if(!this.currentValues||(!this.currentValues[0]&&this.currentValues.length===1)){return e}return this.currentValues},getData:function(){return this.data||[]},setValues:function(d,p,g){var o=this.options,w=this.getData(),l=this.panel(),r=g,t=0,s=0,v=this.getValues()||[],k=[],m=[],u=null,q=null,n=null;if(typeof(r)=="object"){g=r.remainText;p=r.triggerOnChange}this.currentValues=d;if(!this.dataLoaded){return}l.find(".coral-combobox-item-selected").removeClass("coral-combobox-item-selected");for(t=0;t<d.length;t++){q=d[t];n=q;var f=this.getRowIndex(q);if(f>-1){n=w[f][o.textField];u=w[f][o.valueField];var e=this._getItemByIndex(f).addClass("coral-combobox-item-selected");if(o.emptyText&&""==q){this.uiCombo.textbox.attr("placeholder",o.emptyText);this._showPlaceholder(o.emptyText);n=""}else{this._hidePlaceholder()}m.push(n);k.push(q)}else{if(f<0&&!o.forceSelection){m.push(n);k.push(q)}}}if(!g){this._setText(m.join(o.separator))}var h=this._getMinus(k,d);if((h.length&&k.length)||!k.length){m=m.concat(h);if(!g){this._setText(m.join(o.separator))}k=d}this._super(k,p,g)},_getMinus:function(e,d){var f=[];a.each(d,function(g,h){if(a.inArray(h,e)==-1){f.push(h)}});return f},getEl:function(e){var d=this.getRowIndex(e);var f=d;return a("#"+this.options.itemIdPrefix+"_"+f)},_getItemByIndex:function(d){var e=d;return a("#"+this.options.itemIdPrefix+"_"+e)},getRowIndex:function(h){var f=this.options,g=this.getData(),d=f.postMode;
for(var e=0;e<g.length;e++){if(d=="value"){if(g[e][f.valueField]==h){return e}}if(d=="text"){if(g[e][f.textField]==h){return e}}if(d=="value-text"){if(g[e][f.valueField]==h.split(f.valueTextSeparator)[0]){return e}}}return -1},clear:function(){var d=this.panel();this._super();d.find(".coral-combobox-item-selected").removeClass("coral-combobox-item-selected");d.find(".coral-item-focus").removeClass("coral-item-focus")},reload:function(d){this._request(d)},select:function(j){var g=this.options,h=this.getData(),f,d;j=a.trim(j);if(g.multiple){d=this.getValues()}else{d=[]}var e="",k=0;for(f=0;f<h.length;f++){if(j==h[f][g.valueField]){k=f}}e=this.getModeValue(j,h[k][g.textField]);for(f=0;f<d.length;f++){if(d[f]==e){return}}d.push(e);this.setValues(d,true,false);this._trigger("onSelect",null,[{item:h[k],value:j,text:h[k][g.textField]}])},getModeValue:function(e,f){var d;if(this.options.postMode=="value"){d=e}if(this.options.postMode=="text"){d=f}if(this.options.postMode=="value-text"){d=e+"-"+f}return d},unselect:function(h){var f=this.options,g=this.getData(),d=this.getValues(),e;var j=0;for(e=0;e<g.length;e++){if(h==g[e][f.valueField]){j=e}}if(this.options.postMode=="value"){h=h}if(this.options.postMode=="text"){h=g[j][f.textField]}if(this.options.postMode=="value-text"){h=h+"-"+g[j][f.textField]}for(e=0;e<d.length;e++){if(d[e]==h){d.splice(e,1);this.setValues(d,true,false);this._trigger("onSelect",null,[{item:g[j],value:h,text:g[j][f.textField]}]);break}}},showPanel:function(){this._removeHighlight(this.uiCombo.pContent.find("span.coral-keyword-highlight"));var d=0,e;this._super();if(!this.hideValueArr){return}for(;d<this.hideValueArr.length;d++){e=this.hideValueArr[d];this.uiCombo.pContent.find('.coral-combobox-item[value="'+e+'"]').hide()}},addOption:function(j){var l=this,g=0,k=null,f=this.options.valueField,d=this.options.textField,e=j[f],h=j[d];if(!(f in j)||!(d in j)){if(a.message){a.message("JSON格式不正确!")}return false}for(g=0;g<this.data.length;g++){if((j[f]==this.data[g][f])||(j[d]==this.data[g][d])){if(a.message){a.message("当前选项已存在!")
}return false}}k=a('<div class="coral-combobox-item"></div>');k.attr("value",e);if(this.options.formatter){k.html(this.options.formatter.call(this.element,j))}else{k.html(h)}if(this.data.length>0&&""==this.data[0][f]){this.data.splice(1,0,j);k.insertAfter(this.uiCombo.pContent.find(":first-child"))}else{this.data.unshift(j);k.prependTo(this.uiCombo.pContent)}return true},removeOption:function(f){var h=null,g=null,e=0,d=this.options.valueField,j=null;if(typeof f==="number"){if(f>this.data.length){return}h=this.data[e];j=f}if(typeof f==="string"){g=f}if(typeof f==="object"){if(!(d in f)){return}g=f[d]}if(g!==null){for(;e<this.data.length;e++){if(g==this.data[e][d]){h=this.data[e];j=e;break}}}if(j!==null){this.data.splice(j,1);this.uiCombo.pContent.find('.coral-combobox-item[value="'+g+'"]').remove()}},clearOptinons:function(){this.uiCombo.pContent.empty();this.clear()},showOption:function(d){var e;if(typeof d==="number"){e=this.uiCombo.pContent.find(".coral-combobox-item:eq("+d+")")}else{if(typeof d==="string"){e=this.uiCombo.pContent.find('.coral-combobox-item[value="'+d+'"]')}else{if(typeof d==="object"){if(!(this.options.valueField in d)){return}e=this.uiCombo.pContent.find('.coral-combobox-item[value="'+d[this.options.valueField]+'"]')}else{this.uiCombo.pContent.find(".coral-combobox-item").removeClass("hidden");this.hideValueArr=null}}}if(e&&e.length>0){e.removeClass("hidden");if(this.hideValueArr){this.hideValueArr.splice(a.inArray(e.attr("value"),this.hideValueArr),1)}}},hideOption:function(d){if(!this.hideValueArr){this.hideValueArr=[]}var e;if(typeof d==="number"){e=this.uiCombo.pContent.find(".coral-combobox-item:eq("+d+")")}else{if(typeof d==="string"){e=this.uiCombo.pContent.find('.coral-combobox-item[value="'+d+'"]')}else{if(!(this.options.valueField in d)){return}e=this.uiCombo.pContent.find('.coral-combobox-item[value="'+d[this.options.valueField]+'"]')}}if(e&&e.length>0){e.addClass("hidden");this.hideValueArr.push(e.attr("value"))}}})}));

(function(a){a.component("coral.combotree",a.coral.combo,{version:"4.0.3",castProperties:["data","rootNode","buttons"],options:{valueField:"id",textField:"name",panelRenderOnShow:false,mode:"local",method:"post",url:null,data:null,buttons:[],postMode:"value",multiple:false,simpleDataEnable:false,simpleDataIdKey:"id",simpleDataPIdKey:"pId",simpleDataRootPId:null,rootNode:false,radioType:"level",showRootNode:true,allowPushParent:true,traversal:false,cascadeCheck:false,formatter:function(c){var b=a(this).combotree("option","textField");return c[b]},loader:function(g,f,d){var e=this,b=a(this),c=b.combotree("option","url");if(!c){return false}a.ajax({type:b.combotree("option","method"),url:c,data:g,dataType:"json",success:function(h){f(h)},error:function(h){d.apply(this,arguments)}})},beforeClick:null,beforeLoad:a.noop,onLoad:a.noop,onError:a.noop,onSelect:a.noop,unSelect:a.noop,onExpand:null,onClick:null},tree:function(){return a("#"+a(this.element).attr("id")+"_tree")},_filterLocalTree:function(b){var d=this,c=a("#"+a(this.element).attr("id")+"_tree");c.tree("filterNodesByParam",b)},_create:function(){var b=this,c=null;this.element.addClass("coral-form-element-combotree coral-validation-combotree coral-combobox-f ctrl-form-element");c=function(){};this.options.onShowPanel=c;this._super();if(this.options.popupDialog){this.uiCombo.popupInputbox=this.uiCombo.popupInputbox.textbox({componentCls:"coral-combo-popup-input",icons:[{icon:"cui-icon-search2",click:function(f,d){b._filterLocalTree({name:d.value})}}],onKeyUp:function(f,d){b._filterLocalTree({name:d.value});f.stopPropagation()}});this.uiCombo.popupDialog.dialog({autoOpen:false,title:"下拉树",height:"auto",width:"auto",modal:true,resizable:false,buttons:{"确定":function(g){var d=a.data(b.uiCombo.popupInputbox,"value"),f=a.data(b.uiCombo.popupInputbox,"text");if(d){b.setValues(d,true,f)}a(this).dialog("close")},"关闭":function(d){a(this).dialog("close")}}})}this.uiCombo.panel.unbind().bind("mouseover",function(d){a(d.target).closest(".coral-combobox-item").addClass("coral-combobox-item-hover")
}).bind("mouseout",function(d){a(d.target).closest(".coral-combobox-item").removeClass("coral-combobox-item-hover")}).bind("mousedown",function(d){b.cancelBlur=true;b._delay(function(){delete b.cancelBlur});return false})},_getSetting:function(){var c=this;var b={simpleDataEnable:this.options.simpleDataEnable,simpleDataIdKey:this.options.simpleDataIdKey,simpleDataPIdKey:this.options.simpleDataPIdKey,simpleDataRootPId:this.options.simpleDataRootPId,checkable:this.options.multiple,radioType:this.options.radioType,showRootNode:this.options.showRootNode,rootNode:this.options.rootNode,chkboxType:this.options.cascadeCheck?{Y:"",N:""}:{Y:"ps",N:"ps"},beforeClick:function(f,e){if(!c.options.allowPushParent&&e.isParent){return false}var d=a.coral.toFunction(c.options.beforeClick);if(!c.options.multiple){if(a.isFunction(d)){return d(f,e)}return true}else{return false}},onClick:function(m,k,j,h){var f=[];var d=[];f.push(j.name);d.push(j.id);if(c.options.traversal){var g=j.getParentNode();while(!!g){f.push(g.name);g=g.getParentNode()}}if(c.options.popupDialog){a.data(c.uiCombo.popupInputbox,"value",d.reverse());a.data(c.uiCombo.popupInputbox,"text",f.reverse())}else{c.setValues(d.reverse(),true,f.reverse())}if(!c.options.multiple&&!j.isParent||!c.options.multiple&&c.options.allowPushParent){c.hidePanel()}c._trigger("onNodeClick",m,{treeId:k,node:j,clickFlag:h});return false},beforeCheck:function(f,e){var d=c._trigger("beforeNodeCheck",null,{treeId:f,node:e});if(!d){return false}},onCheck:function(n,m,k){var h=[];var g=[];var f=a("#"+m).tree("getCheckedNodes",true);for(var j=0,d=f.length;j<d;j++){if(c.options.cascadeCheck||!f[j].getCheckStatus().half){if(!c.options.allowPushParent&&f[j].isParent){continue}h.push(f[j].name);g.push(f[j].id)}}if(c.options.popupDialog){a.data(c.uiCombo.popupInputbox,"value",g);a.data(c.uiCombo.popupInputbox,"text",h)}else{c.setValues(g,true,h)}c._trigger("onNodeCheck",n,{treeId:m,node:k})},onLoad:function(m,k,p,g){var q=[],n=[],j,f=[],o=false,h=a("#"+k).tree("getNodes"),d=a("#"+k).tree("transformToArray",h);
if(c.options.clearOnLoad){o=c._clearValues(d)}if(c.options.multiple){f=a("#"+k).tree("getCheckedNodes",true)}else{f=a("#"+k).tree("getSelectedNodes")}for(j=0,l=f.length;j<l;j++){if(c.options.cascadeCheck||!f[j].getCheckStatus().half){if(!c.options.allowPushParent&&f[j].isParent){continue}q.push(f[j].name);n.push(f[j].id)}}if(c.currentValues.length&&!o){n=c.currentValues}if(!c.isInit){c.isInit=true;c.originalValue=n.join(",")}c.dataLoaded=true;c.setValues(n);c.isLoaded=true;c._trigger("onLoad",m,{treeId:k,treeNode:p,msg:g})},onExpand:function(g,f,d){c._trigger("onExpand",g,[{treeId:f,node:d}])}};return b},setPopupInput:function(b){this.uiCombo.popupInputbox.textbox("setValue",b.join(this.options.separator))},_initData:function(){var b=a('<ul id="'+a(this.element).attr("id")+'_tree"></ul>');if(this.options.popupDialog){b.appendTo(this.uiCombo.popupDialog);this.uiCombo.popupDialogTree=b}else{b.appendTo(this.uiCombo.pContent)}this.uiCombo.panel.unbind().bind("mousedown",function(j){j.preventDefault()});var h=this._getSetting();if(typeof this.options.url=="string"&&this.options.url!==""){a.extend(h,{asyncEnable:true,asyncUrl:this.options.url,asyncAutoParam:"id,name"})}b.tree(h,this.options.data);var f=[];var e=[];var d=a("#"+a(this.element).attr("id")+"_tree").tree("getCheckedNodes",true);for(var g=0,c=d.length;g<c;g++){if((d[g].getCheckStatus()!=null)&&(this.options.cascadeCheck||!d[g].getCheckStatus().half)){f.push(d[g].name);e.push(d[g].id)}}if(e.length>0){this.setValues(e,false,f)}},_renderItems:function(b){},_scrollTo:function(e){var b=this.panel();var d=b.find('div.coral-combobox-item[value="'+e+'"]');if(d.length){if(d.position().top<=0){var c=b.scrollTop()+d.position().top;b.scrollTop(c)}else{if(d.position().top+d.outerHeight()>b.height()){var c=b.scrollTop()+d.position().top+d.outerHeight()-b.height();b.scrollTop(c)}}}},_request:function(b,j,f){var e=this,d={},g=[],c=this.options.loader,h=false;if(!b&&!e.options.url){b=[]}else{if(!b&&e.options.url){b=e.options.url
}}if(typeof(b)!=="string"){d=b;if(d.data){g=d.data}else{if(d.url){b=d.url;e.options.url=d.url;h=true}else{if(d instanceof Array){g=b}else{if(!d.url&&!d.data&&!e.options.url){g=[]}else{if(!d.url&&!d.data&&e.options.url){b=e.options.url;h=true}}}}}}else{e.options.url=b;h=true}if(h){j=j||{};if(this._trigger("beforeLoad",null,[j])==false){return}c.apply(this.element,[j,function(k){e.loadData(k,f);e._trigger(a.isFunction(d.onLoad)?d.onLoad:"onLoad",null,[k])},function(){e._trigger("onError",null,arguments)}])}else{e.loadData(g,f);e._trigger(a.isFunction(d.onLoad)?d.onLoad:"onLoad",null,[g])}},getTree:function(){return a("#"+a(this.element).attr("id")+"_tree")},loadData:function(e,c){var d=this.getTree();d.tree("reload",e);var b=d.tree("getNodes");a.each(b,function(f,g){d.tree("expandNode",g,true)});this.dataLoaded=true;this.setValues(this.currentValues)},getData:function(){return this.getTree().tree("getNodes")||[]},setComboValues:function(b,c){this.setValues(b,false,c)},_setCombotree:function(c,f){c=this.currentValues;var e=this.options;var g=[];var b=a(this.element).attr("id");a("#"+b+"_tree").tree("cancelSelectedNode");if(e.multiple){a("#"+b+"_tree").tree("checkAllNodes",false);for(i in c){var d=a("#"+b+"_tree").tree("getNodeByParam","id",c[i]);if(d){a("#"+b+"_tree").tree("checkNode",d,true,!e.cascadeCheck)}if(!f){var d=a("#"+b+"_tree").tree("getNodeByParam","id",c[i]);if(d){g.push(d.name)}else{g.push(c[i])}}}}else{for(i in c){var d=a("#"+b+"_tree").tree("getNodeByParam","id",c[i]);a("#"+b+"_tree").tree("selectNode",d);if(!f){var d=a("#"+b+"_tree").tree("getNodeByParam","id",c[i]);if(d){g.push(d.name)}else{g.push(c[i])}}}}if(!f){f=g}return f},setValues:function(b,g,f){this.currentValues=b;var d=this._setCombotree(b,f);var e=this.options,c=[];f=typeof f=="boolean"?f:false;if(!f){this._setText(d.join(e.separator))}this._super(b,g,f)},setValue:function(c,d,b){c=c.split(this.options.separator);this.setValues(c,false,b)},_getOnlyValues:function(){var f=this.getData(),d=this.options,c=[],b=0;
if(!this.currentValues||(!this.currentValues[0]&&this.currentValues.length===1)){return c}for(;b<this.currentValues.length;b++){var e=this.currentValues[b];if("value"===d.postMode){c.push(e)}}return c},_showItems:function(){var c=this.tree().tree("getNodes");var b=this.tree().tree("transformToArray",c);this.tree().tree("showNodes",b,{showParents:true})},_doQuery:function(d){if(d==""){return}var c=this.options,e=[],g=c.textField,u=c.valueField,s=this.options.filter;if(c.mode=="remote"){this._request(null,{q:d},true)}else{var f=this.tree().tree("getNodes");var m=this.tree().tree("transformToArray",f);this.tree().tree("hideNodes",m);for(var k=0;k<m.length;k++){var n=pinyinEngine.toPinyin(m[k][g],false,"");for(var h=0;h<d.length;h++){var b=s.apply(this.element,[d[h],m[k]]);if(b){var o=m[k][u];var p=m[k][g];if(p.indexOf(d[h])>-1||n.indexOf(d[h])>-1){e.push(m[k]);this.tree().tree("showNodes",e,{showParents:true});this.tree().tree("expandNode",e[0].getParentNode(),true,false,false)}}}}}},_checkMathch:function(s,t){var b=[],q=[],w=[],r=[],c=[],n,m,g,o,v=this.options,e=v.textField,u=v.valueField;if(t){this._showItems()}var d=false;var f={};if(v.multiple){this.tree().tree("checkAllNodes",false);for(n=0;n<s.length;n++){if(t){if(this.options.forceSelection&&a.trim(s[n])===""){continue}}var c=this.tree().tree("getNodesByParam",e,s[n],null);if(!c.length){f[n.toString()]=true}for(m=0;m<c.length;m++){if(v.cascadeCheck||!c[m].isParent){b.push(c[m][u]);q.push(c[m][e]);d=true;break}}if(!d&&!this.options.forceSelection){if((!f[n.toString()]&&!t)||t){b.push(s[n]);q.push(s[n])}}d=false}for(o=0;o<b.length;o++){var c=this.tree().tree("getNodesByParam",u,b[o],null);if(c.length){this.tree().tree("checkNode",c[0],true,!v.cascadeCheck)}}var c=this.tree().tree("getCheckedNodes",true);for(g=0,l=c.length;g<l;g++){if(v.cascadeCheck||!c[g].getCheckStatus().half){if(!v.allowPushParent&&c[g].isParent){continue}if(a.inArray(c[g][u],b)==-1){q.push(c[g][e]);b.push(c[g][u])}}}}else{var c=this.tree().tree("getNodesByParam",e,s[0],null);
var p=-1;for(n=0;n<c.length;n++){p=p===-1?n:p;d=true}if(d){b.push(c[p][u]);q.push(c[p][e])}if(!d&&!this.options.forceSelection){b.push(s[0]);q.push(s[0])}}return{valarr:b,textarr:q}},clear:function(){this._super();if(this.options.multiple){a("#"+a(this.element).attr("id")+"_tree").tree("checkAllNodes",false)}},_formatValue:function(g){var f;if(this.options.multiple){f=this.getTree().tree("getCheckedNodes",true)}else{f=this.getTree().tree("getSelectedNodes")}var e=this.options,c=e.valueField,b=e.textField,d=0,h=null;if("text"===e.postMode||"value-text"===e.postMode){for(d=0;d<f.length;d++){h=f[d];if(""!=g&&g==h[c]){if("text"===e.postMode){return h[b]}if("value-text"===e.postMode){return g+e.valueTextSeparator+h[b]}}}}return g},reload:function(b){this._request(b)},_destroy:function(){var b=this;this.element.removeClass("coral-validation-combotree");this.element.removeClass("coral-form-element-combotree");if(this.options.popupDialog){this.uiCombo.popupDialog.dialog("forceDestroy")}this._super()}})})(jQuery);

(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./combo","./grid"],a)}else{a(jQuery)}}(function(a,b){a.component("coral.combogrid",a.coral.combo,{version:"4.0.3",castProperties:["colNames","colModel","data","buttonOptions","gridOptions","buttons"],options:{colNames:[],colModel:[],valueField:"id",textField:"name",panelRenderOnShow:false,multiple:false,selarrrow:[],buttons:[],url:null,panelWidth:500,panelHeight:220,sortable:false,data:[],onSelectRow:null,onSelectAll:null,onSortableColums:null,onLoad:a.noop,onComplete:null,pager:false,buttonOptions:null,gridOptions:{}},grid:function(){return a("#combo_grid_"+a(this.element).attr("id"))},button:function(){if(null!==this.options.buttonOptions){return this.$button}},_destroy:function(){this.element.removeClass("coral-validation-combogrid");this.element.removeClass("coral-form-element-combogrid");this.grid().grid("destroy");this._super()},_showItems:function(){var h=[],j=[],i=[],e=[];var d=this.options.textField,f=this.options.valueField,g={};var c=this.grid();g.filters="{}";c.grid("option","localonce",true);a.extend(c.grid("option","postData"),g);c.grid("reload",{page:1})},_doQuery:function(d){var c=this.options,l=this.grid();var e=c.textField;var k=l.grid("option","colModel"),g=[],n=[];for(var h in k){var m=k[h];if("cb"==m.name||"rn"==m.name){continue}}for(var f=0;f<d.length;f++){n.push('{"field":"'+e+'","op":"cn","data":"'+d[f]+'"}')}g.filters='{"groupOp":"OR","rules":['+n.join(",")+"]}";l.grid("option","localonce",true);a.extend(l.grid("option","postData"),g);l.grid("reload",{page:1})},_checkMathch:function(q,p){var g=[],o=[],h=[],m=[];var r=this.options.textField,c=this.options.valueField,v={},d=0,u,t;var k=this.grid();if(p){this._showItems()}var w=this.grid().grid("option","data");var n=false;var e={};if(this.options.multiple){for(u=0;u<q.length;u++){for(t=0;t<w.length;t++){if(w[t][r]!=q[u]&&w[t][c]!=q[u]){e[u.toString()]=true}if(w[t][r]==q[u]){o.push(w[t][c]);h.push(w[t][r]);n=true;break}}if(!n&&!this.options.forceSelection){if((!e[u.toString()]&&!p)||p){o.push(q[u]);
h.push(q[u])}}n=false}var f=this._getOnlyValues();var s=this._getOnlyTexts();for(u=0;u<q.length;u++){for(t=0;t<s.length;t++){if(s[t]==q[u]&&a.inArray(s[t],h)===-1){o.push(f[t]);h.push(s[t])}}}}else{var l=-1;for(u=0;u<w.length;u++){if(w[u][r]==q[0]){l=l===-1?u:l;n=true}}if(n){o.push(w[l][c]);h.push(w[l][r])}if(!n&&!this.options.forceSelection){if((!e["0"]&&!p)||p){o.push(q[0]);h.push(q[0])}}}return{valarr:o,textarr:h}},reload:function(d){this.cache.isReload=true;var c=this.grid(),f=this,e={},h=false,g=[];if(!d&&!this.options.url){d=[]}else{if(!d&&this.options.url){d=this.options.url}}if(typeof(d)!=="string"){e=d;if(e.data){g=e.data}else{if(e.url){d=e.url;h=true}else{if(d instanceof Array){g=d}else{if(!e.url&&!e.data&&!this.options.url){g=[]}else{if(!e.url&&!e.data&&this.options.url){d=this.options.url;h=true}}}}}}else{this.options.url=d;h=true}if(a.isFunction(e.onLoad)){this.cache.onLoad=e.onLoad}if(e.postData){}c.grid("reload",d)},_removeGridHighlights:function(){this._removeHighlight(this.grid().find(".coral-grid-btable tr td > span.coral-keyword-highlight"))},_addGridHighlights:function(){this._addHighlight(this.grid().find(".coral-grid-btable .jqgrow").children("td"),this.uiCombo.textbox.val())},_updateGridData:function(g){var d=this;var f=this.grid().grid("getRowData",g.rowId);var e=this._getTextFromHTML(f[this.options.valueField]);var h=this._getTextFromHTML(f[this.options.textField]);var c=a.inArray(e,this.gridValueArr);if(!this.options.multiple){this.gridValueArr=[e];this.gridTextArr=[h];this.gridRowIdArr=[g.rowId];return}if(!g.status){if(c!=-1){this.gridValueArr.splice(c,1);this.gridTextArr.splice(c,1);this.gridRowIdArr.splice(c,1)}}else{if(c==-1){this.gridValueArr.push(e);this.gridTextArr.push(h);this.gridRowIdArr.push(g.rowId)}}},_create:function(){var c=this,e=null,d;this.element.addClass("coral-form-element-combogrid coral-validation-combogrid");this._super();this.panelRendered=true;if(null!==this.options.buttonOptions){this.$button=this._getButtonEl();this.component().append(this.$button).addClass("coral-combogrid-hasButton");
this.$button.button(this.options.buttonOptions)}this.uiCombo.panel.unbind().bind("mousedown",function(g){c.cancelBlur=true;c._delay(function(){delete c.cancelBlur});var f=a(g.target).closest(".coral-grid-pager").length;if(f==1){return true}else{return false}})},_initCombo:function(){this._super();var c=a();if(this.options.pager){grid=a('<div id="combo_grid_'+a(this.element).attr("id")+'"><div class="combo_grid_'+a(this.element).attr("id")+'"></div></div>').appendTo(this.uiCombo.pContent)}else{grid=a('<div id="combo_grid_'+a(this.element).attr("id")+'"></div>').appendTo(this.uiCombo.pContent)}this.gridValueArr=[];this.gridTextArr=[];this.gridRowIdArr=[];goptions={fitStyle:"fill",keyName:this.options.valueField,sortable:this.options.sortable,colModel:this.options.colModel,colNames:this.options.colNames,multiselect:this.options.multiple,sortname:this.options.sortname,width:"auto"};goptions=a.extend({},goptions,this.options.gridOptions);if(null!=this.options.url){goptions.url=this.options.url;goptions.datatype="json"}else{goptions.data=this.options.data;goptions.datatype="local"}this._on(grid,{gridonselectrow:function(g,f){var d=this._getOnlyValues();if(this.options.multiple){if(a.inArray(f.rowId,d)==-1){d.push(f.rowId)}else{d.splice(a.inArray(f.rowId,d),1)}}else{d=[f.rowId]}this.setValues(d,true,false);if(!this.options.multiple&&g.originalEvent&&g.originalEvent.type=="click"){this.hidePanel()}},gridonselectall:function(g,f){var d=f.status?f.aRowIds.concat():[];this.setValues(d,true,false)},gridonload:function(m,k){var f=this,l=false,j=k.data;if(f.options.clearOnLoad){l=f._clearValues(j)}this._addGridHighlights();this.dataLoaded=true;var g=this.grid().grid("option","selarrrow").concat();for(var d=0;d<g.length;d++){this.grid().grid("setSelection",g[d],false)}var h=this._getOnlyValues();a.each(h,function(n,e){f.grid().grid("setSelection",e,false,null)});if(l==true){this.currentValues=[]}if(!this.search){this.setValues(this.currentValues);this.search=false}if(this.cache.isReload){this.cache.isReload=false;
this._trigger(this.cache.onLoad||"onLoad",null,[k]);delete this.cache.onLoad}}});grid.grid(goptions);grid.grid("refresh")},_getButtonEl:function(){return a("<button type='button'></button>").addClass("coral-combogrid-button")},_getRowDataByColName:function(h){var f=this,e=this.options,c=this.grid(),d=c.grid("option","data"),g=[];if(typeof h==="string"){h=[h]}a.each(d,function(k,n){var j={};for(var l in h){var m=h[l];j[m]=n[m]}g.push(j)});return g},_getTextArrByValueArr:function(k){var h=this,c=this.options,m=this.options.valueField,e=this.options.textField,d=this._getRowDataByColName([m,e]),l=[];for(var f in k){var j=k[f],g=false;a.each(d,function(i,n){if(j==n[m]){l.push(n[e]);g=true}});if(!g){l.push(k[f])}}return l},setValues:function(p,k,q){var r=this.grid();var g=r.grid("option","selarrrow").concat();for(var j=0;j<g.length;j++){r.grid("setSelection",g[j],false)}if(!this.dataLoaded){var l={setValues:{values:p,text:q,triggerOnChange:k}};this._addCacheItem(l)}var c=this.options;var n=[];n=this._getTextArrByValueArr(p);q=typeof q=="boolean"?q:false;if(!q){this._setText(n.join(c.separator))}this.currentValues=p;this.currentTexts=n;var o=p.concat();o.sort();for(var j=0;j<o.length;j++){if(o[j]!==o[j+1]&&j!=o.length||j==o.length){r.grid("setSelection",o[j],false)}}if(c.width=="item"){var e=a("<div style = 'visibility:hidden;'><span>"+this.getText()+"</span></div>").appendTo("body"),m=this.component().find(".coral-textbox-default");var f=parseInt(m.css("padding-left"))+parseInt(m.css("padding-right")),h=this.uiArrow().outerWidth()+2*parseInt(this.uiArrow().css("right")),d=e.find("span").outerWidth()+f+h;this.resize(d);e.remove();c.width="item"}this._super(p,k,false)},_getOnlyValues:function(){var g=this.getData(),c=this.options,d=[],h=0;if(!this.currentValues||(!this.currentValues[0]&&this.currentValues.length===1)){return d}for(;h<this.currentValues.length;h++){var k=this.currentValues[h],f=0,l=c.valueField,e=c.textField,m=null;if("value-text"===c.postMode){d.push(k.split(c.valueTextSeparator)[0])
}if("value"===c.postMode){d.push(k)}if("text"===c.postMode){for(;g&&f<g.length;f++){m=g[f];if(m[e]==k){d.push(m[l]);break}}}}return d},_getOnlyTexts:function(){return this.currentTexts||[]},getData:function(){return this.grid().grid("option","data")||[]},_selectPrev:function(){var f=this,e=null,c=0,g=f.grid().grid("getDataIDs");selarrrow=f.grid().grid("option","selarrrow").concat();valueFirst=f.getValues()[0];f.selectedRow=f.selectedRow||valueFirst;if(f.options.multiple){if(f.selectedRow){for(var d=g.length;d>=0;d--){if(f.selectedRow==g[d]){c=(d==0?(g.length-1):(d-1));f.selectedRow=g[c];break}}if(a.inArray(f.selectedRow,selarrrow)==-1){f.grid().grid("setSelection",f.selectedRow)}}else{f.selectedRow=g.length;f.grid().grid("setSelection",g.length)}f._scrollTo(f.selectedRow)}else{e=f.grid().grid("option","selrow");if(e){c=f.grid().grid("getInd",e);if(c>=0){f.grid().grid("setSelection",g[c-2])}}else{f.grid().grid("setSelection",g.length)}}f._scrollTo(e)},_selectNext:function(){var f=this,e=null,c=0,g=f.grid().grid("getDataIDs");selarrrow=f.grid().grid("option","selarrrow").concat();valueFirst=f.getValues()[0];f.selectedRow=f.selectedRow||valueFirst;if(f.options.multiple){if(f.selectedRow){for(var d=0;d<g.length;d++){if(f.selectedRow==g[d]){c=(d==g.length-1?0:(d+1));f.selectedRow=g[c];break}}if(a.inArray(f.selectedRow,selarrrow)==-1){f.grid().grid("setSelection",f.selectedRow)}}else{f.selectedRow=g[0];f.grid().grid("setSelection",g[0])}f._scrollTo(f.selectedRow)}else{e=f.grid().grid("option","selrow");if(e){c=f.grid().grid("getInd",e);if(c<g.length){f.grid().grid("setSelection",g[c])}}else{f.grid().grid("setSelection",g[0])}f._scrollTo(e)}},_doEnter:function(){if(!this.uiCombo.panel.is(":visible")){return}if(this.options.multiple){this.grid().grid("setSelection",this.selectedRow)}else{this.hidePanel()}},_scrollTo:function(f){var c=this.panel();var e=c.find('.coral-row-ltr[id="'+f+'"]');if(e.length){if(e.position().top<=0){var d=c.find(".coral-grid-rows-view").scrollTop()+e.position().top-e.outerHeight();
c.find(".coral-grid-rows-view").scrollTop(d)}else{if(e.position().top+e.outerHeight()>c.find(".coral-grid-rows-view").height()){var d=c.find(".coral-grid-rows-view").scrollTop()+e.position().top+e.outerHeight()-c.find(".coral-grid-rows-view").height();c.find(".coral-grid-rows-view").scrollTop(d)}}}}})}));

/*!
 * jQuery CORALI Datepicker 4.0.1
 *
 * Depends:
 *	jquery.ui.core.js
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./core","./parser","./spinner","./validate"],a)}else{a(jQuery)}}(function(d,h){d.extend(d.coral,{datepicker:{version:"4.0.2"}});var g="coral-datepicker",f;function b(){this.componentName="datepicker";this.componentFullName="coral-datepicker";this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="coral-datepicker-divId";this._inlineClass="coral-datepicker-inline";this._appendClass="coral-datepicker-append";this._triggerClass="coral-datepicker-trigger";this._dialogClass="coral-datepicker-dialog";this._disableClass="coral-datepicker-disabled";this._unselectableClass="coral-datepicker-unselectable";this._currentClass="coral-datepicker-current-day";this._dayOverClass="coral-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"关闭",prevText:"上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["1","2","3","4","5","6","7","8","9","10","11","12"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yyyy-MM-dd",formatOptions:{ymdFormat:["dd","MMdd","yyyyMM","yyyyMMdd"],ymFormat:["yyyy","yyyyMM"],yFormat:["yyyy"]},firstDay:1,isRTL:false,showMonthAfterYear:true,yearSuffix:"年",monthSuffix:"月"};this._defaults={showOn:"button",showAnim:"fadeIn",showOptions:{},iframePanel:false,defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:true,changeYear:true,complete:true,yearRange:"c-30:c+30",showOtherMonths:true,selectOtherMonths:true,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",validDate:true,minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:true,autoSize:false,disabled:false,isLabel:false,readonly:false,showClose:false,value:null,required:false,showStar:true,starBefore:false,errMsg:null,errMsgPosition:"leftBottom",startDateId:null,endDateId:null,onSelect:null,onChange:null,onFormatError:null,onFormatWarn:null,srcDateFormat:null,zIndex:null,name:null,triggers:null,excluded:false};
d.extend(this._defaults,this.regional[""]);this.regional.en=d.extend(true,{},this.regional[""]);this.regional["en-US"]=d.extend(true,{},this.regional.en);this.dpDiv=c(d("<div id='"+this._mainDivId+"' class='coral-datepicker coral-component coral-component-content coral-helper-clearfix coral-corner-all'></div>"));this.iframePanel=d("<iframe class='coral-datepicker-iframePanel' style='position:absolute;height:auto;'></iframe>");d(document).off(".coral-datepicker").on("mousedown.coral-datepicker","#"+this._mainDivId,function(i){if(d(i.target).hasClass("menuTimeSel")){i.stopPropagation();return}d(".menuSel").hide();i.stopPropagation()})}d.extend(b.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(i){a(this._defaults,i||{});return this},_componentDatepicker:function(i){return d(i).parent().parent()},_init:function(t,r){var j=this._get(r,"id"),i=d(t).attr("name")||this._get(r,"name")||"",w=this._get(r,"value"),l=this._get(r,"width"),x=this._get(r,"height"),y=this._get(r,"cls"),o=this._get(r,"labelField"),v=this._get(r,"showClose"),n="",u=this._get(r,"componentCls");this.originalValue=w;if(i){d(t).removeAttr("name")}if(v){n="<span class='coral-input-clearIcon cui-icon-cross2'></span>"}var s=d("<input id='"+j+"_srcval' name='"+i+"' type='hidden' value='"+(w==null?"":w)+"'>");var p=d("<span id='"+j+"_span2' class='coral-textbox-border coral-corner-all'>"+n+"</span>");var q=d("<span id='"+j+"_span1' class='coral-textbox'></span>");d(t).addClass("coral-textbox-default coral-validation-datepicker");d(t).addClass("coral-form-element-datepicker ctrl-init ctrl-form-element ctrl-init-datepicker");if(x!=null){q.outerHeight(x);d(t).outerHeight("100%")}if(l!=null){q.outerWidth(l)}q.insertAfter(d(t)).addClass(u);s.appendTo(p);d(t).appendTo(p).addClass(y);p.appendTo(q);if(r.settings.iframePanel){d.datepicker.iframePanel.appendTo("body").hide()}if(null!=o){var m=d('<label class="coral-label">'+o+"</label>");p.before(m);
q.addClass("coral-hasLabel")}},_attachDatepicker:function(n,j){j=j||{};var o,m,l;o=n.nodeName.toLowerCase();m=(o==="div"||o==="span");if(!n.id){if(j.id){n.id=j.id}else{}j.id=d(n).uniqueId().attr("id")}else{if(j.id){n.id=j.id}else{j.id=d(n).uniqueId().attr("id")}}if(!n.name){if(j.name){n.name=j.name}j.name=d(n).attr("name")}else{if(j.name){n.name=j.name}else{j.name=d(n).attr("name")}}j.value=d(n).val()||j.value||"";l=this._newInst(d(n),m);if(o==="input"){var i=d.parser.parseOptions(n,[],["dataCustom","formatOptions"]);d.extend(true,j,i)}if(j.startDateId){d("#"+j.startDateId).datepicker("option","endDateId",n.id)}j=d.extend({},this._defaults,d.fn.datepicker.defaults,j||{});if(j.dateFormat!=null&&j.srcDateFormat==null){j.srcDateFormat=j.dateFormat}l.settings=d.extend({},j||{});this._init(n,l);if(o==="input"){this._connectDatepicker(n,l)}else{if(m){this._inlineDatepicker(n,l)}}d.validate.addField(d(n),j);return d(n)},_newInst:function(j,i){var l=j[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");this.dpDiv.css({display:"none"});j.attr("component-role",this.componentName);return{id:l,input:j,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,isShow:false,dpDiv:(!i?this.dpDiv:c(d("<div class='"+this._inlineClass+" coral-datepicker coral-datepicker-panel coral-component coral-component-content coral-helper-clearfix coral-corner-all'></div>")))}},_connectDatepicker:function(l,j){var i=d(l);j.append=d([]);j.trigger=d([]);if(i.hasClass(this.markerClassName)){return}this._attachments(i,j);i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(j);d.data(l,g,j);if(j.settings.disabled){this._disableDatepicker(l)}if(j.settings.readonly){this._readonlyDatepicker(l,j.settings.readonly)}if(j.settings.isLabel){this._isLabelDatepicker(l,j.settings.isLabel)}},_processDefaultDate:function(p,o,i){if(i==""){o.selectedDay=o.currentDay=null;o.selectedMonth=o.currentMonth=null;o.selectedYear=o.currentYear=null;
o.currentHur=null;o.currentMiu=null;o.currentSed=null;o.input.val("");return null}var j=p._get(o,"dateFormat");var n=null;try{n=p.parseDate(j,i,p._getFormatConfig(o))}catch(q){p._apply(o,"onFormatError",[i,o]);p._apply(o,"onFormatWarn",[i,o]);return null}o.selectedDay=o.currentDay=n.getDate();o.selectedMonth=o.currentMonth=n.getMonth();o.selectedYear=o.currentYear=n.getFullYear();o.currentHur=n.getHours();o.currentMiu=n.getMinutes();o.currentSed=n.getSeconds();var m=p._daylightSavingAdjustWidthTime(new Date(o.currentYear,o.currentMonth,o.currentDay),[o.currentHur,o.currentMiu,o.currentSed]);var l="";if(!o.settings.value&&i){o.settings.value=i}if(o.settings.value!=""){var r=this.getFormatter(o.settings.value,this._get(o,"dateFormat"),this._getFormatConfig(o));l=this.completeFormate(r,j,o);l=this.formatDate(l,m,this._getFormatConfig(o))}o.input.val(l);return m},_attachments:function(o,m){var n=this;var q,p,s,l=this._get(m,"appendText"),j=this._get(m,"isRTL");if(m.append){m.append.remove()}if(l){m.append=d("<span class='"+this._appendClass+"'>"+l+"</span>");o[j?"before":"after"](m.append)}o.unbind("focus",this._showDatepicker);o.unbind("blur");o.parent().unbind("mouseleave");o.parent().unbind("mouseenter");o.unbind(".attachments");if(m.trigger){m.trigger.remove()}var i=n._get(m,"value");if(""==o.parent().find("input[type='hidden']").val()&&typeof i==="string"&&i!=""){n._processDefaultDate(n,m,i);n._setHiddenInputValue(m)}else{var r=n._getHiddenInputValue(m);n._processDefaultDate(n,m,r)}o.parent().find(".coral-input-clearIcon").unbind("click").bind("click",function(t){n._clearDate(m)});q=this._get(m,"showOn");o.focus(function(t){if(q==="focus"||q==="both"){n._showDatepicker(t)}});if(q==="button"||q==="both"){p=this._get(m,"buttonText");m.trigger=d("<span/>").addClass("coral-icon-calendar cui-icon-calendar4");o[j?"before":"after"](m.trigger);if(this._get(m,"isLabel")!=true){o.parent().addClass("coral-datepicker-no-close")}m.trigger.click(function(t){if(d.datepicker._datepickerShowing&&d.datepicker._lastInput===o[0]){d.datepicker._hideDatepicker()
}else{if(d.datepicker._datepickerShowing&&d.datepicker._lastInput!==o[0]){d.datepicker._hideDatepicker()}else{}}d.datepicker._showDatepicker(o[0]);return false})}o.blur(function(t){n._inputBlur(m,t)});o.parent().mouseleave(function(){if(m.settings.readonly||m.settings.isLabel||m.settings.disabled){return}o.parent().parent().removeClass("coral-textbox-hover")});o.parent().mouseenter(function(){if(m.settings.readonly||m.settings.isLabel||m.settings.disabled){return}o.parent().parent().addClass("coral-textbox-hover")});o.bind("keyup.attachments",function(t){switch(t.keyCode){case 9:d.datepicker._showDatepicker(t);break}})},_autoSize:function(q){if(this._get(q,"autoSize")&&!q.inline){var n,l,m,p,o=new Date(2009,12-1,20),j=this._get(q,"dateFormat");if(j.match(/[DM]/)){n=function(i){l=0;m=0;for(p=0;p<i.length;p++){if(i[p].length>l){l=i[p].length;m=p}}return m};o.setMonth(n(this._get(q,(j.match(/MM/)?"monthNames":"monthNamesShort"))));o.setDate(n(this._get(q,(j.match(/DD/)?"dayNames":"dayNamesShort")))+20-o.getDay())}q.input.attr("size",this._formatDate(q,o).length)}},_inlineDatepicker:function(j,i){var l=d(j);if(l.hasClass(this.markerClassName)){return}l.addClass(this.markerClassName).append(i.dpDiv);d.data(j,g,i);this._setDate(i,this._getDefaultDate(i),true);this._updateDatepicker(i);this._updateAlternate(i);if(i.settings.disabled){this._disableDatepicker(j)}i.dpDiv.css("display","block")},_dialogDatepicker:function(q,j,o,l,p){var i,t,n,s,r,m=this._dialogInst;if(!m){this.uuid+=1;i="dp"+this.uuid;this._dialogInput=d("<input type='text' id='"+i+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.keydown(this._doKeyDown);d("body").append(this._dialogInput);m=this._dialogInst=this._newInst(this._dialogInput,false);m.settings={};d.data(this._dialogInput[0],g,m)}a(m.settings,l||{});j=(j&&j.constructor===Date?this._formatDate(m,j):j);this._dialogInput.val(j);this._pos=(p?(p.length?p:[p.pageX,p.pageY]):null);if(!this._pos){t=document.documentElement.clientWidth;
n=document.documentElement.clientHeight;s=document.documentElement.scrollLeft||document.body.scrollLeft;r=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(t/2)-100+s,(n/2)-150+r]}this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");m.settings.onSelect=o;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if(d.blockUI){d.blockUI(this.dpDiv)}d.data(this._dialogInput[0],g,m);return this},_destroyDatepicker:function(l){var m,i=d(l),j=d.data(l,g);d(l).parent().parent().replaceWith(i);if(!i.hasClass(this.markerClassName)){return}m=l.nodeName.toLowerCase();d.removeData(l,g);d.removeData(l,"inited");j.isShow=false;if(m==="input"){j.append.remove();j.trigger.remove();i.removeClass(this.markerClassName).unbind(".field").unbind(".restrictInput").unbind("blur").unbind("focus").unbind("keydown").unbind("keypress").unbind("keyup").unbind("datepickeronblur").unbind("datepickeronchange").unbind("datepickeronkeydown").unbind("datepickeronkeyup").unbind("datepickeronstatus").unbind("onOptionChange")}else{if(m==="div"||m==="span"){i.removeClass(this.markerClassName).empty()}}d(l).val("");d(l).removeAttr("value");i.removeAttr("component-role").removeClass("coral-textbox-default coral-validation-datepicker coral-form-element-datepicker ctrl-init ctrl-form-element ctrl-init-datepicker").removeAttr("data-options")},_enableDatepicker:function(m){var n,l,i=d(m),j=d.data(m,g);if(!i.hasClass(this.markerClassName)){return}n=m.nodeName.toLowerCase();if(n==="input"){m.disabled=false;j.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""});i.parent().parent().removeClass("coral-state-disabled")}else{if(n==="div"||n==="span"){l=i.children("."+this._inlineClass);l.children().removeClass("coral-state-disabled");l.find("select.coral-datepicker-month, select.coral-datepicker-year").prop("disabled",false)}}this._disabledInputs=d.map(this._disabledInputs,function(o){return(o===m?null:o)
})},_disableDatepicker:function(m){var n,l,i=d(m),j=d.data(m,g);if(!i.hasClass(this.markerClassName)){return}n=m.nodeName.toLowerCase();if(n==="input"){m.disabled=true;j.trigger.css({opacity:"0.5",cursor:"default"});i.parent().parent().addClass("coral-state-disabled")}else{if(n==="div"||n==="span"){l=i.children("."+this._inlineClass);l.children().addClass("coral-state-disabled");l.find("select.coral-datepicker-month, select.coral-datepicker-year").prop("disabled",true)}}this._disabledInputs=d.map(this._disabledInputs,function(o){return(o===m?null:o)});this._disabledInputs[this._disabledInputs.length]=m},_readonlyDatepicker:function(m,j){var l,i=d(m);if(!i.hasClass(this.markerClassName)){return}d(m).parent().parent().removeClass("coral-isLabel");d(m).parent().parent().toggleClass("coral-readonly",j);d.datepicker._readonly(m,j)},_readonly:function(l,i){var m=l.nodeName.toLowerCase(),j=d.data(l,g);if(m==="input"&&i){l.readOnly=true;j.trigger.filter("button").each(function(){this.readOnly=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}if(m==="input"&&!i){if(d.datepicker._isIsLabelDatepicker(j)){return}l.readOnly=false;j.trigger.filter("button").each(function(){this.readOnly=false}).end().filter("img").css({opacity:"1.0",cursor:""})}},_isReadonlyDatepicker:function(i){if(d.datepicker._get(i,"readonly")){return d.datepicker._get(i,"readonly")}return false},_isIsLabelDatepicker:function(i){if(d.datepicker._get(i,"isLabel")){return d.datepicker._get(i,"isLabel")}return false},_isLabelDatepicker:function(n,j){var m,i=d(n),l=d.data(n,g);if(!i.hasClass(this.markerClassName)){return}var o=d.datepicker._get(l,"id");if(j){i.parent().removeClass("coral-datepicker-no-close");i.parent().parent().removeClass("coral-readonly");i.parent().parent().addClass("coral-isLabel")}else{i.parent().parent().removeClass("coral-isLabel coral-readonly");i.parent().addClass("coral-datepicker-no-close")}d.datepicker._set(l,"readonly",j);d.datepicker._set(l,"isLabel",j);d.datepicker._readonly(n,j)
},_isDisabledDatepicker:function(l){if(!l){return false}for(var j=0;j<this._disabledInputs.length;j++){if(this._disabledInputs[j]===l){return true}}return false},_getInst:function(j){try{if("object"===j.nodeName.toLowerCase()){return false}return d.data(j,g)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(q,v,u){var p=this;var m,l,n,j,o=this._getInst(q);if(arguments.length===2&&typeof v==="string"){return(v==="defaults"?d.extend({},d.datepicker._defaults):(o?(v==="all"?d.extend({},o.settings):this._get(o,v)):null))}if(arguments.length===1){return o?d.extend({},o.settings):null}m=v||{};if(typeof v==="string"){m={};m[v]=u}if(o){if(this._curInst===o){this._hideDatepicker()}l=this._getDateDatepicker(q,true);n=this._getMinMaxDate(o,"min");j=this._getMinMaxDate(o,"max");a(o.settings,m);var i=this._getHiddenInputValue(o);if(v=="value"){if(u){var t=this.getFormatter(u,this._get(o,"dateFormat"),this._getFormatConfig(o));var r=this.parseDate(t,u);var s=this._get(o,"srcDateFormat");if(this._checkDateRange(o,r)===2){u=this.formatDate(s,n,this._getFormatConfig(o))}if(this._checkDateRange(o,r)===1){u=this.formatDate(s,j,this._getFormatConfig(o))}}l=p._processDefaultDate(p,o,u)}if(n!==null&&m.dateFormat!==h&&m.minDate===h){o.settings.minDate=this._formatDate(o,n)}if(j!==null&&m.dateFormat!==h&&m.maxDate===h){o.settings.maxDate=this._formatDate(o,j)}if("disabled" in m){if(m.disabled){this._disableDatepicker(q)}else{this._enableDatepicker(q)}}if("readonly" in m){this._readonlyDatepicker(q,m.readonly)}if("isLabel" in m){this._isLabelDatepicker(q,m.isLabel)}if("showAnim" in m){return}if(v==="startDateId"){d("#"+u).datepicker("option","endDateId",this._get(o,"id"))}this._attachments(d(q),o);this._autoSize(o);this._setDate(o,l);if(o.isShow){this._updateDatepicker(o)}this._updateAlternate(o);this._setHiddenInputValue(o);if(v=="value"){d.datepicker._setStartEnd(o,i,u)}d(q).trigger("onOptionChange",{key:v,value:m[v]})}},_validDatepicker:function(j){var i={hasTips:false,element:d(j)};
return(d.validate.validateField(null,i).length>0?false:true)},_changeDatepicker:function(l,i,j){this._optionDatepicker(l,i,j)},_refreshDatepicker:function(j){var i=this._getInst(j);if(i){this._updateDatepicker(i)}},_resetDatepicker:function(i){d(i).datepicker("option","value",this.originalValue)},_setValueDatepicker:function(j,i){d(j).datepicker("option","value",i)},_getValueDatepicker:function(j,i){return d(j).datepicker("option","value")},_setDateDatepicker:function(l,i){var j=this._getInst(l);if(j){this._setDate(j,i);this._updateDatepicker(j);this._updateAlternate(j);this._setHiddenInputValue(j)}},_getDateDatepicker:function(l,i){var j=this._getInst(l);if(j&&!j.inline){this._setDateFromField(j,i)}return(j?this._getDate(j):null)},_getDateValueDatepicker:function(j){var i=this._getInst(j);return this._getHiddenInputValue(i)},_doKeyDown:function(n){var l,i,p,o=d.datepicker._getInst(n.target),q=true,m=o.dpDiv.is(".coral-datepicker-rtl");var j=d.datepicker._getHiddenInputValue(o);o._keyEvent=true;if(d.datepicker._datepickerShowing){switch(n.keyCode){case 9:d.datepicker._hideDatepicker();q=false;break;case 13:p=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",o.dpDiv);if(p[0]){d.datepicker._selectDay(n.target,o.selectedMonth,o.selectedYear,p[0])}l=d.datepicker._get(o,"onSelect");if(l){i=d.datepicker._formatDate(o)}else{d.datepicker._hideDatepicker()}case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(n.target,(n.ctrlKey?-d.datepicker._get(o,"stepBigMonths"):-d.datepicker._get(o,"stepMonths")),"M");break;case 34:d.datepicker._adjustDate(n.target,(n.ctrlKey?+d.datepicker._get(o,"stepBigMonths"):+d.datepicker._get(o,"stepMonths")),"M");break;case 35:if(n.ctrlKey||n.metaKey){d.datepicker._clearDate(o)}q=n.ctrlKey||n.metaKey;break;case 36:if(n.ctrlKey||n.metaKey){d.datepicker._gotoToday(n.target)}q=n.ctrlKey||n.metaKey;break;case 37:if(n.ctrlKey||n.metaKey){d.datepicker._adjustDate(n.target,(m?+1:-1),"D")}q=n.ctrlKey||n.metaKey;
if(n.originalEvent.altKey){d.datepicker._adjustDate(n.target,(n.ctrlKey?-d.datepicker._get(o,"stepBigMonths"):-d.datepicker._get(o,"stepMonths")),"M")}break;case 38:if(n.ctrlKey||n.metaKey){d.datepicker._adjustDate(n.target,-7,"D")}q=n.ctrlKey||n.metaKey;break;case 39:if(n.ctrlKey||n.metaKey){d.datepicker._adjustDate(n.target,(m?-1:+1),"D")}q=n.ctrlKey||n.metaKey;if(n.originalEvent.altKey){d.datepicker._adjustDate(n.target,(n.ctrlKey?+d.datepicker._get(o,"stepBigMonths"):+d.datepicker._get(o,"stepMonths")),"M")}break;case 40:if(n.ctrlKey||n.metaKey){d.datepicker._adjustDate(n.target,+7,"D")}q=n.ctrlKey||n.metaKey;break;default:q=false}}else{if(n.keyCode===36&&n.ctrlKey){d.datepicker._showDatepicker(this)}else{q=false;switch(n.keyCode){case 9:case 13:d.datepicker._setHiddenInputValue(o);datestr=d.datepicker._getHiddenInputValue(o);d.datepicker._setStartEnd(o,j,datestr);d.datepicker._change(o,j,datestr);break}}}d.datepicker._trigger(o,"onKeyDown",n,[{oldValue:j,value:o.input.val()}]);if(q){n.preventDefault();n.stopPropagation()}},_setStartEnd:function(m,j,l){if(j==l){return}var n=this._get(m,"startDateId");var i=this._get(m,"endDateId");if(n){d("#"+n).datepicker("option","maxDate",l)}if(i){d("#"+i).datepicker("option","minDate",l)}},_change:function(m,i,l,j){if(i!=l){this._trigger(m,"onChange",j,[{oldValue:i,newValue:l,value:l}])}},_doKeyPress:function(i){},_doKeyUp:function(n){var l,o=d.datepicker._getInst(n.target);var j=d.datepicker._getHiddenInputValue(o);if(o.input.val()!==o.lastVal){try{if(o.input.val()==""){o.selectedDay=null;o.drawMonth=o.selectedMonth=null;o.drawYear=o.selectedYear=null;o.currentDay=null;o.currentMonth=null;o.currentYear=null;o.currentHur=null;o.currentMiu=null;o.currentSed=null}l=d.datepicker.parseDate(d.datepicker._get(o,"dateFormat"),(o.input?o.input.val():null),d.datepicker._getFormatConfig(o));o.input.addClass("isEdit");if(l&&d.datepicker._checkDateRange(o,l)===0){d.datepicker._setDateFromField(o);d.datepicker._updateAlternate(o)}var i=o.input.val()
}catch(m){var i=o.input.val();d.datepicker._apply(o,"onFormatError",[i,o]);d.datepicker._apply(o,"onFormatWarn",[i,o])}d.datepicker._trigger(o,"onKeyUp",n,[{oldValue:j,value:o.input.val()}])}return true},_trigger:function(n,o,l,m){var j,q,r={};m=m||{};l=d.Event(l);l.type=("datepicker"+o).toLowerCase();l.target=n.input[0];q=l.originalEvent;if(q){for(j in q){if(!(j in l)){l[j]=q[j]}}}d(l.target).trigger(l,m);var s=d.datepicker._get(n,o);var i=d.datepicker._get(n,"dataCustom");var p=d.coral.toFunction(s);l.data=l.data||{};d.extend(l.data,i);return !(d.isFunction(p)&&p.apply((n.input?n.input[0]:null),[l].concat(m))===false||l.isDefaultPrevented())},_checkDateRange:function(l,i){var j=this._getMinMaxDate(l,"min");var m=this._getMinMaxDate(l,"max");if(m!=null&&i>m){return 1}if(j!=null&&i<j){return 2}return 0},_srcDateFormatSeparator:function(i){var j="/";if(i.indexOf("/")>-1){return j}if(i.indexOf("-")>-1){j="-";return j}},_setHiddenInputValue:function(n){if(n.input.val()==""){n.input.parent().find("input[type='hidden']").val("");return}var i=this._get(n,"dateFormat");var m=m||this._get(n,"srcDateFormat");var p=this._srcDateFormatSeparator(m);if(n.currentYear==null||n.currentMonth==null){n.input.parent().find("input[type='hidden']").val("");return}var l=this._daylightSavingAdjustWidthTime(new Date(n.currentYear,n.currentMonth,n.currentDay),[n.currentHur,n.currentMiu,n.currentSed]);var o=this.getFormatter(n.input.val(),this._get(n,"dateFormat"),this._getFormatConfig(n));datestr=this.completeFormate(o,i,n);if(this._get(n,"complete")){j=this.formatDate(m,l,this._getFormatConfig(n))}else{if(m.indexOf("-")>-1||m.indexOf("/")>-1){datestr=(datestr.indexOf("y")>-1&&datestr.indexOf("M")>-1&&datestr.indexOf("d")>-1)?m:datestr;var j=this.formatDate(datestr,l,this._getFormatConfig(n));if(j.indexOf("-")>-1){var j=j.indexOf(p)==-1?j.replace(/-/gm,p):j}else{if(j.indexOf("/")>-1){var j=j.indexOf(p)==-1?j.replace(/\//gm,p):j}}}else{datestr=datestr.indexOf("-")>-1?datestr.replace(/-/gm,""):datestr.replace(/\//gm,"");
if(datestr.indexOf("y")>-1){if(datestr.indexOf("d")==-1&&datestr.indexOf("y")>-1&&datestr.indexOf("M")>-1){m=(m.split(" "))[0];datestr=m.replace(/d/gm,"")}if(datestr.indexOf("y")>-1&&datestr.indexOf("M")>-1&&datestr.indexOf("d")>-1){datestr=m}else{datestr=datestr}}j=this.formatDate(datestr,l,this._getFormatConfig(n))}}n.input.parent().find("input[type='hidden']").val(j)},_getHiddenInputValue:function(i){var j=this._get(i,"id");return i.input.parent().find("input[type='hidden']").val()},_createEditFormat:function(j){var i="";if(j!=null){if(this._isYearMonthMode(j)){i+="yyyy-MM"}else{if(this._isYearMode(j)){i+="yyyy"}else{i+="yyyy-MM-dd"}}if(this._hasTime(j)){i+=" HH:mm:ss"}}return i},completeFormate:function(l,i,s){var q,p,o=null;var u=i.indexOf("H")>-1?(i.split(" "))[0]:i;if(this._get(s,"complete")){return i}else{if(u.indexOf("d")==-1){if(u.indexOf("d")==-1&&l.indexOf("M")==-1){return l}return u}if(u.indexOf("d")>-1){var t=u.indexOf("y"),r=u.indexOf("d"),n=u.substr(r+2,u.length),m=u.substr(0,r-1),j=u.substr(0,r+2);if(l.length==2){return l}if(l.indexOf("y")>-1&&l.indexOf("d")>-1&&l.indexOf("M")>-1){return i}if(l.indexOf("d")==-1){if(l.indexOf("M")==-1){return l}if(r==0){datestr=n}if(r==8){datestr=m}if(r==3){datestr=m+n}}else{if(l.indexOf("y")==-1){if(t==0){datestr=u.substr(t+5,5)}if(t==6){datestr=u.substr(0,t-1)}}}}return datestr}},_inputFocus:function(i){},_inputBlur:function(o,p){d.datepicker._componentDatepicker(o.input).removeClass("coral-state-focus");var i=this._get(o,"dateFormat");if(d.datepicker._isReadonlyDatepicker(o)||d.datepicker._isIsLabelDatepicker(o)){return}var l=this._getHiddenInputValue(o);var n="";var j=this._daylightSavingAdjustWidthTime(new Date(o.currentYear,o.currentMonth,o.currentDay),[o.currentHur,o.currentMiu,o.currentSed]);if((typeof o.currentYear!="undefined"||o.currentYear!=null)&&!o.isShow){var m=this.getFormatter(o.input.val(),this._get(o,"dateFormat"),this._getFormatConfig(o));if(""!=o.input.val()){n=this.completeFormate(m,i,o);n=this.formatDate(n,j,this._getFormatConfig(o))
}o.input.val(n);this._setHiddenInputValue(o);if(n!==l){}d.datepicker._setStartEnd(o,l,n);d.datepicker._change(o,l,n,null);this._trigger(o,"onBlur",p,[{value:n}])}},_focusDatepicker:function(i){i=i.target||i;if(i.nodeName.toLowerCase()!=="input"){i=d("input",i.parentNode)[0]}if(d.datepicker._isDisabledDatepicker(i)||d.datepicker._lastInput===i||d.datepicker._isReadonlyDatepicker(d.datepicker._getInst(i))||d.datepicker._isIsLabelDatepicker(d.datepicker._getInst(i))){return false}var j=d.datepicker._getInst(i);j.input.focus();return true},_showDatepicker:function(t){t=t.target||t;if(t.nodeName.toLowerCase()!=="input"){t=d("input",t.parentNode)[0]}if(d.datepicker._isDisabledDatepicker(t)||d.datepicker._lastInput===t||d.datepicker._isReadonlyDatepicker(d.datepicker._getInst(t))||d.datepicker._isIsLabelDatepicker(d.datepicker._getInst(t))){return}var r,o,s,n,q,j,p;r=d.datepicker._getInst(t);if(d.datepicker._curInst&&d.datepicker._curInst!==r){d.datepicker._curInst.dpDiv.stop(true,true);if(r&&d.datepicker._datepickerShowing){d.datepicker._hideDatepicker(d.datepicker._curInst.input[0])}}o=d.datepicker._get(r,"beforeShow");s=o?o.apply(t,[t,r]):{};if(s===false){return}a(r.settings,s);r.lastVal=null;d.datepicker._lastInput=t;d.datepicker._setDateFromField(r);if(d.datepicker._inDialog){t.value=""}if(!d.datepicker._pos){d.datepicker._pos=d.datepicker._findPos(t);d.datepicker._pos[1]+=t.offsetHeight}n=false;d(t).parents().each(function(){n|=d(this).css("position")==="fixed";return !n});q={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;r.dpDiv.empty();r.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});this.iframePanel.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(r);var i=d(r.dpDiv),v=this.iframePanel,l=i.width(),u=i.height();q=d.datepicker._checkOffset(r,q,n);r.dpDiv.css({position:(d.datepicker._inDialog&&d.blockUI?"static":(n?"fixed":"absolute")),display:"none",left:q.left+"px",top:q.top+"px"});this.iframePanel.css({position:(d.datepicker._inDialog&&d.blockUI?"static":(n?"fixed":"absolute")),display:"none",left:q.left+"px",top:q.top+"px",width:l,height:u});
if(!r.isShow){r.isShow=true;if(!r.inline){j=d.datepicker._get(r,"showAnim");p=d.datepicker._get(r,"duration");if(this._get(r,"zIndex")!=null){r.dpDiv.zIndex(this._get(r,"zIndex")+1);this.iframePanel.zIndex(this._get(r,"zIndex"))}d.datepicker._datepickerShowing=true;if(d.effects&&d.effects.effect[j]){r.dpDiv.show(j,d.datepicker._get(r,"showOptions"),p)}else{r.dpDiv[j||"show"](j?p:null)}this.iframePanel.show(j);if(d.datepicker._shouldFocusInput(r)){r.input.focus()}d.datepicker._curInst=r}(function m(){var w=d(t).parent().parent();if(r.isShow){i.css({left:d.coral.getLeft(i,w),top:d.coral.getTop(i,w)});v.css({left:d.coral.getLeft(i,w),top:d.coral.getTop(i,w)});setTimeout(m,200)}})()}r.dpDiv.find("#dpTimeSpinner").spinner("setValue",r.dpDiv.find("#dpTimeHour").val())},_updateDateTime:function(n){var q=this,t,l,p;var j=this._getMinMaxDate(n,"min");var i=this._getMinMaxDate(n,"max");var m=new Date(j);maxDay=new Date(i);var r=new Date(n.selectedYear,n.selectedMonth,n.selectedDay),o=new Date(m.getFullYear(),m.getMonth(),m.getDate()),s=new Date(maxDay.getFullYear(),maxDay.getMonth(),maxDay.getDate());n.dpDiv.find("#dpTimeSpinner").spinner({max:24,min:0,step:1,componentCls:"dptimespinner",onSpin:function(z,x){var w=d(this).spinner("getValue");if(d.datepicker.focusInput=="dpTimeHour"){n.dpDiv.find("#dpTimeHour").val(x.value);t=n.dpDiv.find("#dpTimeHour").val();if(new Date(r).getTime()==new Date(o).getTime()&&(j&&t<m.getHours())||(i&&t>maxDay.getHours())){n.dpDiv.find("#dpTimeHour").val(w);return false}}if(d.datepicker.focusInput=="dpTimeMinute"){n.dpDiv.find("#dpTimeMinute").val(x.value);var v=n.dpDiv.find("#dpTimeMinute").val();var u=n.dpDiv.find("#dpTimeHour").val();if(new Date(r).getTime()==new Date(o).getTime()&&(j&&v<m.getMinutes()&&u<=m.getHours())||(i&&v>=maxDay.getMinutes()&&u>=maxDay.getHours())){n.dpDiv.find("#dpTimeMinute").val(w);return false}}if(d.datepicker.focusInput=="dpTimeSecond"){n.dpDiv.find("#dpTimeSecond").val(x.value);p=n.dpDiv.find("#dpTimeSecond").val();
var u=n.dpDiv.find("#dpTimeHour").val(),y=n.dpDiv.find("#dpTimeMinute").val();if(new Date(r).getTime()==new Date(o).getTime()&&(j&&p<m.getSeconds()&&u<=m.getHours()&&y<=m.getMinutes())||(i&&p>maxDay.getSeconds()&&u>=maxDay.getHours()&&y>=maxDay.getMinutes())){n.dpDiv.find("#dpTimeSecond").val(w);return false}}}});n.dpDiv.find("#dpTimeSpinner").spinner("setValue",n.dpDiv.find("#dpTimeHour").val())},_updateDatepicker:function(m){this.maxRows=4;f=m;m.dpDiv.empty().append(this._generateHTML(m));this._updateDateTime(m);this._attachHandlers(m);this._attachTimeHandlers(m);var o,i=this._getNumberOfMonths(m),n=i[1],l=17,j=m.dpDiv.find("."+this._dayOverClass+" a");if(j.length>0){e.apply(j.get(0))}m.dpDiv.removeClass("coral-datepicker-multi-2 coral-datepicker-multi-3 coral-datepicker-multi-4").width("");if(n>1){m.dpDiv.addClass("coral-datepicker-multi-"+n).css("width",(l*n)+"em")}m.dpDiv[(i[0]!==1||i[1]!==1?"add":"remove")+"Class"]("coral-datepicker-multi");m.dpDiv[(this._get(m,"isRTL")?"add":"remove")+"Class"]("coral-datepicker-rtl");if(m===d.datepicker._curInst&&d.datepicker._datepickerShowing&&d.datepicker._shouldFocusInput(m)){}if(m.yearshtml){o=m.yearshtml;setTimeout(function(){if(o===m.yearshtml&&m.yearshtml){m.dpDiv.find("select.coral-datepicker-year:first").replaceWith(m.yearshtml)}o=m.yearshtml=null},0)}},_shouldFocusInput:function(i){return i.input&&i.input.is(":visible")&&!i.input.is(":disabled")&&!i.input.is(":focus")},_checkOffset:function(o,m,l){var n=o.dpDiv.outerWidth(),r=o.dpDiv.outerHeight(),q=o.input?o.input.outerWidth():0,i=o.input?o.input.outerHeight():0,p=document.documentElement.clientWidth+(l?0:d(document).scrollLeft()),j=document.documentElement.clientHeight+(l?0:d(document).scrollTop());m.left-=(this._get(o,"isRTL")?(n-q):0);m.left-=(l&&m.left===o.input.offset().left)?d(document).scrollLeft():0;m.top-=(l&&m.top===(o.input.offset().top+i))?d(document).scrollTop():0;m.left-=Math.min(m.left,(m.left+n>p&&p>n)?Math.abs(m.left+n-p):0);m.top-=Math.min(m.top,(m.top+r>j&&j>r)?Math.abs(r+i):0);
return m},_findPos:function(m){var i,l=this._getInst(m),j=this._get(l,"isRTL");while(m&&(m.type==="hidden"||m.nodeType!==1||d.expr.filters.hidden(m))){m=m[j?"previousSibling":"nextSibling"]}i=d(m).offset();return[i.left,i.top]},_hideDatepicker:function(l){var j,o,n,i,m=this._curInst;if(!m||(l&&m!==d.data(l,g))){return}m.isShow=false;if(this._datepickerShowing){j=this._get(m,"showAnim");o=this._get(m,"duration");n=function(){d.datepicker._tidyDialog(m)};if(d.effects&&(d.effects.effect[j]||d.effects[j])){m.dpDiv.hide(j,d.datepicker._get(m,"showOptions"),o,n)}else{m.dpDiv[(j==="slideDown"?"slideUp":(j==="fadeIn"?"fadeOut":"hide"))]((j?o:null),n)}this.iframePanel.hide();if(!j){n()}this._datepickerShowing=false;i=this._get(m,"onClose");if(i){i.apply((m.input?m.input[0]:null),[(m.input?m.input.val():""),m])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(d.blockUI){d.unblockUI();d("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(i){i.dpDiv.removeClass(this._dialogClass).unbind(".coral-datepicker-calendar")},_checkExternalClick:function(j){if(!d.datepicker._curInst){return}var i=d(j.target),l=d.datepicker._getInst(i[0]);if(j.isDefaultPrevented()){return}if(((i[0].id!==d.datepicker._mainDivId&&i.parents("#"+d.datepicker._mainDivId).length===0&&!i.hasClass(d.datepicker.markerClassName)&&!i.closest("."+d.datepicker._triggerClass).length&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)))||(i.hasClass(d.datepicker.markerClassName)&&d.datepicker._curInst!==l)){d.datepicker._hideDatepicker()}},_adjustDate:function(n,m,l){var j=d(n),i=this._getInst(j[0]);if(this._isDisabledDatepicker(j[0])||d.datepicker._isReadonlyDatepicker(i)||d.datepicker._isIsLabelDatepicker(i)){return}this._adjustInstDate(i,m+(l==="M"?this._get(i,"showCurrentAtPos"):0),l);this._updateDatepicker(i)},_gotoToday:function(p){var m=this,j,o=d(p),n=this._getInst(o[0]);var i=this._hasTime(this._get(n,"dateFormat"));
if(this._get(n,"gotoCurrent")&&n.currentDay){n.selectedDay=n.currentDay;n.drawMonth=n.selectedMonth=n.currentMonth;n.drawYear=n.selectedYear=n.currentYear}else{j=new Date();if(!i){j.setHours(0,0,0,0)}if(m._checkDateRange(n,j)===1){return}else{if(m._checkDateRange(n,j)===2){return}}n.selectedDay=j.getDate();n.drawMonth=n.selectedMonth=j.getMonth();n.drawYear=n.selectedYear=j.getFullYear();n.currentHur=j.getHours();n.currentMiu=j.getMinutes();n.currentSed=j.getSeconds()}this._notifyChange(n);this._adjustDate(o);if(!i){var l=n.dpDiv.children("table").find(".coral-datepicker-today");this._selectDay(p,+l.attr("data-month"),+l.attr("data-year"),l[0])}else{this._selectDateTime(n)}this._updateDateTime(n)},_selectMonthYear:function(j,r,p,q){var o=d(j),n=this._getInst(o[0]);var l=this._isYearMonthMode(this._get(n,"dateFormat"));var m=this._isYearMode(this._get(n,"dateFormat"));if(l===true){n["draw"+(p==="M"?"Month":"Year")]=parseInt(p==="M"?d(r).attr("data-month"):r.options[r.selectedIndex].value,10)}else{if(m===true){n.drawYear=parseInt(p==="Y"?d(r).attr("data-year"):r.options[r.selectedIndex].value,10)}else{n["draw"+(p==="M"?"Month":"Year")]=parseInt(r.options[r.selectedIndex].value,10)}}n["selected"+(p==="M"?"Month":"Year")]=n["draw"+(p==="M"?"Month":"Year")];var i=this._getHiddenInputValue(n);if(l===true&&p==="M"){this._setMonthYearValue(this,n)}if(m===true){this._setMonthYearValue(this,n)}var s=this._getHiddenInputValue(n);this._notifyChange(n);if(q){d.datepicker._setStartEnd(n,i,s);d.datepicker._change(n,i,s,null)}this._adjustDate(o)},_setMonthYearValue:function(m,l){var i=m._get(l,"dateFormat");if(m._isYearMonthMode(i)){l.currentYear=l.selectedYear;l.currentMonth=l.selectedMonth;l.currentDay=l.selectedDay=1}if(m._isYearMode(i)){l.currentYear=l.selectedYear;l.currentMonth=l.selectedMonth=1;l.currentDay=l.selectedDay=1}var j=m._formatDate(l);if(l.input){l.input.val(j)}m._setHiddenInputValue(l)},_selectDay:function(l,q,r,m){var o,n,j;target=d(l);if(d(m).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])||d.datepicker._isReadonlyDatepicker(d.datepicker._getInst(target[0]))||d.datepicker._isIsLabelDatepicker(d.datepicker._getInst(target[0]))){return
}o=this._getInst(target[0]);o.selectedDay=o.currentDay=d("a",m).html();o.selectedMonth=o.currentMonth=q;o.selectedYear=o.currentYear=r;dateFormat=this._get(o,"dateFormat");this._autoFixInput(this,o);var s=o.dpDiv.find("#dpTimeHour").val();var i=o.dpDiv.find("#dpTimeMinute").val();var p=o.dpDiv.find("#dpTimeSecond").val();o.currentHur=s;o.currentMiu=i;o.currentSed=p;this._selectDate(l,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear));d(m).parent().parent().find("a").removeClass("coral-state-active");d(m).children("a").addClass("coral-state-active");this._updateDatepicker(o)},_clearDate:function(i){this._setDate(i,"")},_clearErrorDatepicker:function(i){d(".coral-validate-state-error").remove();d(".coral-errorIcon").remove();d(".coral-validate-error").removeClass("coral-validate-error");d(i).prop("isError",false)},_selectDate:function(l,n){var q,p=d(l),o=this._getInst(p[0]);var j=this._get(o,"dateFormat");var r=this._hasTime(j);n=(n!=null?n:this._formatDate(o));if(o.input){if(!r){o.input.val(n)}}this._updateAlternate(o);if(o.inline){this._updateDatepicker(o)}else{if(!r){this._hideDatepicker();this._lastInput=o.input[0];if(typeof(o.input[0])!=="object"){o.input.focus()}this._lastInput=null;var i=this._getHiddenInputValue(o);this._setHiddenInputValue(o);var m=this._getHiddenInputValue(o);if(m!==i){d.datepicker._setStartEnd(o,i,m);d.datepicker._change(o,i,m,null)}}else{}}this._trigger(o,"onSelect",null,[{oldValue:i,newValue:m}])},_attachTimeHandlers:function(m){var l=this,j="";var i=this._getHiddenInputValue(m);d.datepicker._setHiddenInputValue(m);var j=d.datepicker._getHiddenInputValue(m);m.dpDiv.find("#dpTimeEnsure").bind("mousedown",function(n){l._autoFixInput(l,m);d.datepicker._selectDateTime(m);n.preventDefault();d.datepicker._setStartEnd(m,i,j);d.datepicker._change(m,i,j)});this._verifyInput(m,m.dpDiv.find("#dpTimeHour"),"H");this._verifyInput(m,m.dpDiv.find("#dpTimeMinute"),"m");this._verifyInput(m,m.dpDiv.find("#dpTimeSecond"),"s")},_autoFixInput:function(r,p){var o=0;
var n=r._getMinMaxDate(p,"min");var i=r._getMinMaxDate(p,"max");var s=p.dpDiv.find("#dpTimeHour").val();var j=p.dpDiv.find("#dpTimeMinute").val();var q=p.dpDiv.find("#dpTimeSecond").val();s=s.replace(/[^0-9]/g,"");if(s==""){s=p.currentHur}j=j.replace(/[^0-9]/g,"");if(j==""){j=p.currentMiu}q=q.replace(/[^0-9]/g,"");if(q==""){q=p.currentSed}var m=new Date(p.currentYear,p.currentMonth,p.currentDay,s,j,q);var l=m;if(r._checkDateRange(p,m)===1){l=i}else{if(r._checkDateRange(p,m)===2){l=n}}p.dpDiv.find("#dpTimeHour").val(l.getHours()||"00");p.dpDiv.find("#dpTimeMinute").val(l.getMinutes()||"00");p.dpDiv.find("#dpTimeSecond").val(l.getSeconds()||"00")},_verifyInput:function(o,j,m){var n=this,l=0,i=59;i=m=="H"?23:i;j.change(function(){n._autoFixInput(n,o)}).bind("paste",function(){n._autoFixInput(n,o)})},_selectDateTime:function(q){var i=this._getHiddenInputValue(q);var s=q.dpDiv.find("#dpTimeHour").val();var l=q.dpDiv.find("#dpTimeMinute").val();var r=q.dpDiv.find("#dpTimeSecond").val();q.currentHur=s;q.currentMiu=l;q.currentSed=r;var p=this._getMinMaxDate(q,"min"),j=this._getMinMaxDate(q,"max");var o=new Date();if(!q.selectedYear){q.currentDay=q.selectedDay=o.getDate();q.currentMonth=q.selectedMonth=o.getMonth();q.currentYear=q.selectedYear=o.getFullYear();var n=new Date(q.currentYear,q.currentMonth,q.currentDay,s,l,r);if(!(p||j)){q.input.val(n)}else{if(this._checkDateRange(q,n)===1){q.selectedDay=j.getDate();q.selectedMonth=j.getMonth();q.selectedYear=j.getFullYear()}else{if(this._checkDateRange(q,n)===2){q.selectedDay=p.getDate();q.selectedMonth=p.getMonth();q.selectedYear=p.getFullYear()}}}}q.input.val(this._formatDate(q));this._setHiddenInputValue(q);this._updateAlternate(q);var m=this._getHiddenInputValue(q);d.datepicker._setStartEnd(q,i,m);d.datepicker._change(q,i,m,null);target=d(q.input[0]);this._hideDatepicker()},_hasTime:function(i){var j=(i+"");if(j.indexOf("H")!=-1||j.indexOf("m")!=-1||j.indexOf("s")!=-1){return true}return false},_hasHur:function(i){var j=(i+"");
if(j.indexOf("H")!=-1){return true}return false},_hasMin:function(i){var j=(i+"");if(j.indexOf("m")!=-1){return true}return false},_hasSec:function(i){var j=(i+"");if(j.indexOf("s")!=-1){return true}return false},_isYearMonthMode:function(i){if(!this._hasTime(i)){return i.indexOf("M")!=-1&&i.indexOf("y")!=-1&&i.indexOf("d")==-1}return false},_isYearMode:function(i){if(!this._hasTime(i)){return i.indexOf("y")!=-1&&i.indexOf("M")==-1&&i.indexOf("d")==-1}return false},_updateAlternate:function(n){var m,l,i,j=this._get(n,"altField");if(j){m=this._get(n,"altFormat")||this._get(n,"dateFormat");l=this._getDate(n);i=this.formatDate(m,l,this._getFormatConfig(n));d(j).each(function(){d(this).val(i)})}},noWeekends:function(j){var i=j.getDay();return[(i>0&&i<6),""]},iso8601Week:function(i){var j,l=new Date(i.getTime());l.setDate(l.getDate()+4-(l.getDay()||7));j=l.getTime();l.setMonth(0);l.setDate(1);return Math.floor(Math.round((j-l)/86400000)/7)+1},getFormatter:function(u,t,m){var q=null,v=null;if(t.indexOf("y")>-1&&t.indexOf("M")>-1&&t.indexOf("d")>-1){q="ymdFormat"}if(t.indexOf("y")>-1&&t.indexOf("M")>-1&&t.indexOf("d")==-1){q="ymFormat"}if(t.indexOf("y")>-1&&t.indexOf("M")==-1&&t.indexOf("d")==-1){q="yFormat"}var l="yyyy-MM-dd";var r=m.inst?d.extend({},this._defaults.formatOptions,m.inst.settings.formatOptions):this._defaults.formatOptions;u=(typeof u==="object"?u.toString():u+"");if(u===""){return null}var s=u.split(" ");if(s[0].indexOf("/")>-1||s[0].indexOf("-")>-1){var j=s[0].indexOf("/")>-1?s[0].split("/"):s[0].split("-");for(var p=0;p<j.length;p++){if(j[p].length%2!=0){j[p]="0"+j[p]}s[0]=j.join("-")}}var n=s[0].indexOf("/")>-1?s[0].replace(/\//g,""):s[0].replace(/-/g,"");var o=s[0].split("/").length-1;str2=s[0].split("-").length-1;for(var p=0;p<r[q].length;p++){if(r[q][p].length==n.length){v=r[q][p]}}return(v?v:t)||null},configDateFormat:function(q,r,l){var n=q;var s=q.split(" ");var m=s[1]||"";var p=r.split(" ");if(p[0].indexOf("/")>-1||p[0].indexOf("-")>-1){var j=p[0].indexOf("/")>-1?p[0].split("/"):p[0].split("-");
for(var o=0;o<j.length;o++){if(j[o].length%2!=0){j[o]="0"+j[o]}p[0]=j.join("-")}}l.inst&&(l.inst.beforevalue=p);q=this.getFormatter(p[0],s[0],l);q+=n.substr(s[0].length,n.length);p[0]=p[0].indexOf("/")>-1?p[0].replace(/\//g,""):p[0].replace(/-/g,"");r=p.join(" ");return{format:q,value:r}},parseDate:function(E,z,H){if(E==null||z==null){throw"Invalid arguments"}H=H||{};z=(typeof z==="object"?z.toString():z+"");if(z===""){return null}var o=this.configDateFormat(E,z,H);E=o.format;z=o.value;var l=this._hasTime(E);var q,B,j,F=0,t=(H?H.shortYearCutoff:null)||this._defaults.shortYearCutoff,n=(typeof t!=="string"?t:new Date().getFullYear()%100+parseInt(t,10)),x=(H?H.dayNamesShort:null)||this._defaults.dayNamesShort,K=(H?H.dayNames:null)||this._defaults.dayNames,i=(H?H.monthNamesShort:null)||this._defaults.monthNamesShort,r=(H?H.monthNames:null)||this._defaults.monthNames,m=H.inst,s=-1,L=-1,D=-1,v=-1,M=-1,w=-1,I=-1,C=false,J,y=function(P){var Q=(q+1<E.length&&E.charAt(q+1)===P);if(Q){q++}return Q},p=function(P){var Q=1;while(q+1<E.length&&E.charAt(q+1)==P){Q++;q++}return Q},O=function(R){var P=y(R),S=(R==="@"?14:(R==="!"?20:(R==="y"&&P?4:(R==="o"?3:2)))),U=(R==="y"?S:1),T=new RegExp("^\\d{"+U+","+S+"}"),Q=z.substring(F).match(T);if(!Q){throw"Missing number at position "+F}F+=Q[0].length;return parseInt(Q[0],10)},N=function(Q,R){if(F>z.length||F==z.length){return -1}var S=new RegExp("^\\d{1,"+R+"}"),P=z.substring(F).match(S);if(!P){throw"Missing number at position "+F}F+=P[0].length;return parseInt(P[0],10)},u=function(Q,R,T){var P=-1,S=d.map(y(Q)?T:R,function(V,U){return[[U,V]]}).sort(function(V,U){return -(V[1].length-U[1].length)});d.each(S,function(V,W){var U=W[1];if(z.substr(F,U.length).toLowerCase()===U.toLowerCase()){P=W[0];F+=U.length;return false}});if(P!==-1){return P+1}else{throw"Unknown name at position "+F}},A=function(){if(""!==z.charAt(F)&&z.charAt(F)!==E.charAt(q)){return;throw"Unexpected literal at position "+F}F++};for(q=0;q<E.length;q++){if(C){if(E.charAt(q)==="'"&&!y("'")){C=false
}else{A()}}else{switch(E.charAt(q)){case"d":var G=p("d");D=N("d",G);break;case"M":G=p("M");L=N("M",G);break;case"y":G=p("y");s=N("y",G);break;case"H":G=p("H");M=N("H",G);break;case"m":G=p("m");w=N("m",G);break;case"s":G=p("s");I=N("s",G);break;default:A()}}}if(D==-1){D=1;if(L==-1){L=1}}if(D!=-1&&L==-1){L=new Date().getMonth()+1}if(s===-1){s=new Date().getFullYear()}else{if(s<100){s+=new Date().getFullYear()-new Date().getFullYear()%100+(s<=n?0:-100)}}if(v>-1){L=1;D=v;do{B=this._getDaysInMonth(s,L-1);if(D<=B){break}L++;D-=B}while(true)}s=(s==-1?1:s);M=(M==-1?0:M);w=(w==-1?0:w);I=(I==-1?0:I);J=this._daylightSavingAdjustWidthTime(new Date(s,L-1,D),[M,w,I]);if((J.getFullYear()!==s||J.getMonth()+1!==L||J.getDate()!==D)||(l&&(J.getHours()!==M||J.getMinutes()!==w||J.getSeconds()!==I))){throw"Invalid date"}return J},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*10000000),formatDate:function(u,m,n){if(!m){return""}var w,x=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,j=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,p=(n?n.monthNames:null)||this._defaults.monthNames,v=function(y){var z=(w+1<u.length&&u.charAt(w+1)===y);if(z){w++}return z},q=function(y){var z=1;while(w+1<u.length&&u.charAt(w+1)==y){z++;w++}return z},i=function(A,B,y){var z=""+B;if(v(A)){while(z.length<y){z="0"+z}}return z},r=function(y,A,z,B){return(v(y)?B[A]:z[A])},l="",t=false;if(m){for(w=0;w<u.length;w++){if(t){if(u.charAt(w)==="'"&&!v("'")){t=false}else{l+=u.charAt(w)}}else{switch(u.charAt(w)){case"d":l+=i("d",m.getDate(),2);break;case"D":l+=r("D",m.getDay(),x,j);break;case"M":var o=q("M");if(o==4){l+=p[m.getMonth()]}else{if(o==3){l+=p[m.getMonth()]}else{if(o==2){l+=(m.getMonth()+1>9?m.getMonth()+1:"0"+(m.getMonth()+1))
}else{if(o==1){l+=m.getMonth()+1}}}}break;case"y":o=q("y");if(o==4){l+=m.getFullYear()}else{if(o==3){l+=(m.getFullYear()+"").substring(1,4)}else{if(o==2){l+=((m.getYear()%100<10?"0":"")+m.getYear()%100)}else{if(o==1){l+=m.getYear()%100}}}}break;case"H":o=q("H");if(o==2){l+=(m.getHours()>9?m.getHours():"0"+(m.getHours()))}else{if(o==1){l+=m.getHours()}}break;case"m":o=q("m");if(o==2){l+=(m.getMinutes()>9?m.getMinutes():"0"+(m.getMinutes()))}else{if(o==1){l+=m.getMinutes()}}break;case"s":o=q("s");if(o==2){l+=(m.getSeconds()>9?m.getSeconds():"0"+(m.getSeconds()))}else{if(o==1){l+=m.getSeconds()}}break;case"W":o=q("W");if(o==2){l+=(n.calculateWeek(m)>9?n.calculateWeek(m):"0"+n.calculateWeek(m))}else{if(o==1){l+=n.calculateWeek(m)}}break;case"w":l+=m.getDay();break;default:l+=u.charAt(w)}}}}return l},_possibleChars:function(n){var m,l="",j=false,i=function(o){var p=(m+1<n.length&&n.charAt(m+1)===o);if(p){m++}return p};for(m=0;m<n.length;m++){if(j){if(n.charAt(m)==="'"&&!i("'")){j=false}else{l+=n.charAt(m)}}else{switch(n.charAt(m)){case"d":case"m":case"y":case"@":case"H":case"M":case"s":l+="0123456789";break;case"D":case"W":return null;case"'":if(i("'")){l+="'"}else{j=true}break;default:l+=n.charAt(m)}}}return l},_get:function(j,i){return j.settings[i]!==h?j.settings[i]:this._defaults[i]},_set:function(j,i,l){return j.settings[i]=l},_setDateFromField:function(r,i){var n=this._get(r,"dateFormat"),l=r.lastVal=r.input?r.input.val():null,m=this._getDefaultDate(r),p=m,o=r.input.val(),q=this._getFormatConfig(r);try{p=this.parseDate(n,o,q)||m}catch(j){p=m}r.selectedDay=p.getDate();r.drawMonth=r.selectedMonth=p.getMonth();r.drawYear=r.selectedYear=p.getFullYear();r.currentDay=p.getDate();r.currentMonth=p.getMonth();r.currentYear=p.getFullYear();r.currentHur=p.getHours();r.currentMiu=p.getMinutes();r.currentSed=p.getSeconds();this._adjustInstDate(r)},_getDefaultDate:function(i){return this._restrictMinMax(i,this._determineDate(i,this._get(i,"defaultDate"),new Date()))},_determineDate:function(o,m,l){var q=this;
var n=function(v){var u=new Date();u.setDate(u.getDate()+v);return u},r=function(v){try{var w="yyyy-MM-dd";var D=q._get(o,"srcDateFormat");if(q._isYearMonthMode(D)){w="yyyy-MM"}if(q._isYearMode(D)){w="yyyy"}if((v+"").length>10&&q._hasTime(D)){w+=" HH:mm:ss"}w=d.datepicker._get(o,"dateFormat");return d.datepicker.parseDate(w,v,d.datepicker._getFormatConfig(o))}catch(y){d.datepicker._apply(o,"onFormatError",[u,o]);d.datepicker._apply(o,"onFormatWarn",[u,o])}var u=(v.toLowerCase().match(/^c/)?d.datepicker._getDate(o):null)||new Date(),B=u.getFullYear(),z=u.getMonth(),C=u.getDate(),A=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,x=A.exec(v);while(x){switch(x[2]||"d"){case"d":case"D":C+=parseInt(x[1],10);break;case"w":case"W":C+=parseInt(x[1],10)*7;break;case"m":case"M":z+=parseInt(x[1],10);C=Math.min(C,d.datepicker._getDaysInMonth(B,z));break;case"y":case"Y":B+=parseInt(x[1],10);C=Math.min(C,d.datepicker._getDaysInMonth(B,z));break}x=A.exec(v)}return new Date(B,z,C)},s=(m==null||m===""?l:(typeof m==="string"?r(m):(typeof m==="number"?(isNaN(m)?l:n(m)):new Date(m.getTime()))));s=(s&&s.toString()==="Invalid Date"?l:s);var t=0,j=0,p=0,i=0;if(s){t=s.getHours(),j=s.getMinutes(),p=s.getSeconds(),i=s.getMilliseconds();s.setHours(0);s.setMinutes(0);s.setSeconds(0);s.setMilliseconds(0)}return this._daylightSavingAdjustWidthTime(s,[t,j,p])},_daylightSavingAdjust:function(i,j){if(!i){return null}i.setHours(i.getHours()>12?i.getHours()+2:0);return i},_setDate:function(p,m,o){var q=!m,n=p.selectedMonth,j=p.selectedYear,s=this._restrictMinMax(p,this._determineDate(p,m,new Date()));var i=this._get(p,"dateFormat");p.selectedDay=p.currentDay=s.getDate();p.drawMonth=p.selectedMonth=p.currentMonth=s.getMonth();p.drawYear=p.selectedYear=p.currentYear=s.getFullYear();p.currentHur=s.getHours();p.currentMiu=s.getMinutes();p.currentSed=s.getSeconds();if((n!==p.selectedMonth||j!==p.selectedYear)&&!o){this._notifyChange(p)}this._adjustInstDate(p);if(p.input){if(q){this._processDefaultDate(this,p,"");this._setHiddenInputValue(p)
}else{if(this._get(p,"complete")){p.input.val(this._formatDate(p))}else{var r=this.getFormatter(p.settings.value,this._get(p,"dateFormat"),this._getFormatConfig(p));var l=this.completeFormate(r,i,p);l=this.formatDate(l,m,this._getFormatConfig(p));p.input.val(l)}}}},_getDate:function(j){var i=(!j.currentYear||(j.input&&j.input.val()==="")?null:this._daylightSavingAdjustWidthTime(new Date(j.currentYear,j.currentMonth,j.currentDay),[j.currentHur,j.currentMiu,j.currentSed]));return i},_daylightSavingAdjustWidthTime:function(l,i){var j=this._daylightSavingAdjust(l);if(j){j.setHours(i[0]);j.setMinutes(i[1]);j.setSeconds(i[2]);j.setMilliseconds(0)}return l},_attachHandlers:function(m){var n=this;var l=this._get(m,"stepMonths"),o="#"+m.id.replace(/\\\\/g,"\\");var i=this._isYearMonthMode(this._get(m,"dateFormat"));var j=this._isYearMode(this._get(m,"dateFormat"));m.dpDiv.find("[data-handler]").map(function(){var p={prev:function(){if(i===true){d.datepicker._adjustDate(o,-1,"Y")}else{if(j===true){d.datepicker._adjustDate(o,-12,"Y")}else{d.datepicker._adjustDate(o,-l,"M")}}return false},next:function(){if(i===true){d.datepicker._adjustDate(o,+1,"Y")}else{if(j===true){d.datepicker._adjustDate(o,+12,"Y")}else{d.datepicker._adjustDate(o,+l,"M")}}return false},hide:function(){d.datepicker._hideDatepicker()},today:function(){d.datepicker._gotoToday(o);return false},selectDay:function(){d.datepicker._selectDay(o,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonthAndHide:function(){d.datepicker._selectMonthYear(o,this,"M",true);d.datepicker._hideDatepicker();return false},selectYearAndHide:function(){d.datepicker._selectMonthYear(o,this,"Y",true);d.datepicker._hideDatepicker();return false},selectMonth:function(){d.datepicker._selectMonthYear(o,this,"M");return false},selectYear:function(){d.datepicker._selectMonthYear(o,this,"Y");return false},focusTime:function(){if(d(this).prop("readonly")){return false}d.datepicker.focusInput=this.id;if(this.id=="dpTimeHour"){m.dpDiv.find("#dpTimeSpinner").spinner("option",{max:24,min:0,step:1,value:this.value});
m.dpDiv.find(".menuSel").hide();m.dpDiv.find(".hourMenu").show()}if(this.id=="dpTimeMinute"){m.dpDiv.find("#dpTimeSpinner").spinner("option",{max:60,min:0,step:1,value:this.value});var r=d("#dpTimeHour").val();m.dpDiv.find(".minuteMenu").replaceWith(n._modifiedMin(m,r));m.dpDiv.find(".menuSel").hide();m.dpDiv.find(".minuteMenu").show()}if(this.id=="dpTimeSecond"){m.dpDiv.find("#dpTimeSpinner").spinner("option",{max:60,min:0,step:1,value:this.value});var r=d("#dpTimeHour").val();var q=d("#dpTimeMinute").val();m.dpDiv.find(".secondMenu").replaceWith(n._modifiedSed(m,r,q));m.dpDiv.find(".menuSel").hide();m.dpDiv.find(".secondMenu").show()}return false}};d(this).bind(this.getAttribute("data-event"),p[this.getAttribute("data-handler")]);d(m.dpDiv).off(".hourMenu").on("mousedown.hourMenu",".hourMenu",function(q){if(!d(q.target).hasClass("menuTimeSel")){return false}m.dpDiv.find("#dpTimeSpinner").spinner("option",{max:24,min:0,step:1,value:d(q.target).html()});m.dpDiv.find("#dpTimeHour").val(d(q.target).html());m.dpDiv.find(".menuSel").hide();n._autoFixInput(n,m);return false});d(m.dpDiv).off(".minuteMenu").on("mousedown.minuteMenu",".minuteMenu",function(q){if(!d(q.target).hasClass("menuTimeSel")){return false}m.dpDiv.find("#dpTimeSpinner").spinner("option",{max:60,min:0,step:1,value:d(q.target).html()});m.dpDiv.find("#dpTimeMinute").val(d(q.target).html());m.dpDiv.find(".menuSel").hide();n._autoFixInput(n,m);return false});d(m.dpDiv).off(".secondMenu").on("mousedown.secondMenu",".secondMenu",function(q){if(!d(q.target).hasClass("menuTimeSel")){return false}m.dpDiv.find("#dpTimeSpinner").spinner("option",{max:60,min:0,step:1,value:d(q.target).html()});m.dpDiv.find("#dpTimeSecond").val(d(q.target).html());m.dpDiv.find(".menuSel").hide();n._autoFixInput(n,m);return false})})},_generateHTML:function(S){var y,x,O,G,m,X,Q,K,aa,E,ad,s,u,t,j,W,p,B,Z,i,N,ae,A,D,r,n,P,I,M,J,o,C,v,R,V,l,Y,ac,H,w,U=new Date(),z=this._daylightSavingAdjustWidthTime(new Date(U.getFullYear(),U.getMonth(),U.getDate()),[0,0,0]),ab=this._get(S,"isRTL"),F=this._isYearMonthMode(this._get(S,"dateFormat")),T=this._isYearMode(this._get(S,"dateFormat"));
showButtonPanel=F==true||T==true?false:this._get(S,"showButtonPanel"),hideIfNoPrevNext=this._get(S,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(S,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(S),showCurrentAtPos=this._get(S,"showCurrentAtPos"),stepMonths=this._get(S,"stepMonths"),isMultiMonth=(numMonths[0]!==1||numMonths[1]!==1),currentDate=this._daylightSavingAdjustWidthTime((!S.currentDay?new Date(9999,9,9):new Date(S.currentYear,S.currentMonth,S.currentDay)),[0,0,0]),minDate=this._getMinMaxDate(S,"min"),maxDate=this._getMinMaxDate(S,"max"),drawMonth=S.drawMonth-showCurrentAtPos,drawYear=S.drawYear,dateFormat=this._get(S,"dateFormat");var L=this._hasTime(this._get(S,"dateFormat"));if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){y=this._daylightSavingAdjustWidthTime(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()),[S.currentHur,S.currentMiu,S.currentSed]);y=(minDate&&y<minDate?minDate:y);while(this._daylightSavingAdjustWidthTime(new Date(drawYear,drawMonth,1),[S.currentHur,S.currentMiu,S.currentSed])>y){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}S.drawMonth=drawMonth;S.drawYear=drawYear;x=this._get(S,"prevText");x=(!navigationAsDateFormat?x:this.formatDate(x,this._daylightSavingAdjustWidthTime(new Date(drawYear,drawMonth-stepMonths,1),[S.currentHur,S.currentMiu,S.currentSed]),this._getFormatConfig(S)));O=(this._canAdjustMonth(S,-1,drawYear,drawMonth)?"<a class='coral-datepicker-prev coral-state-default coral-corner-all' data-handler='prev' data-event='mousedown' title='"+x+"'><span class='icon  cui-icon-arrow-"+(ab?"right3":"left3")+"'></span></a>":(hideIfNoPrevNext?"":"<a class='coral-datepicker-prev coral-state-default coral-corner-all coral-state-disabled' title='"+x+"'><span class='coral-icon coral-icon-circle-triangle-"+(ab?"e":"w")+"'>"+x+"</span></a>"));G=this._get(S,"nextText");G=(!navigationAsDateFormat?G:this.formatDate(G,this._daylightSavingAdjustWidthTime(new Date(drawYear,drawMonth+stepMonths,1),[S.currentHur,S.currentMiu,S.currentSed]),this._getFormatConfig(S)));
m=(this._canAdjustMonth(S,+1,drawYear,drawMonth)?"<a class='coral-datepicker-next coral-state-default coral-corner-all' data-handler='next' data-event='mousedown' title='"+G+"'><span class='cui-icon-arrow-"+(ab?"left3":"right3")+"'></span></a>":(hideIfNoPrevNext?"":"<a class='coral-datepicker-next coral-state-default coral-corner-all coral-state-disabled' title='"+G+"'><span class='coral-icon coral-icon-circle-triangle-"+(ab?"w":"e")+"'>"+G+"</span></a>"));X=this._get(S,"currentText");Q=(this._get(S,"gotoCurrent")&&S.currentDay?currentDate:z);X=(!navigationAsDateFormat?X:this.formatDate(X,Q,this._getFormatConfig(S)));K="";aa=(showButtonPanel)?"<div class='coral-datepicker-buttonpane coral-component-content' "+(F||T?"style='display:none'":"")+">"+(ab?K:"")+(this._isInRange(S,Q)?"<button type='button' class='coral-datepicker-current coral-state-default coral-priority-primary coral-corner-all' data-handler='today' data-event='mousedown'>"+X+"</button>":"")+(ab?"":K)+"</div>":"";var q="";!L||(q+='<button class="coral-datepicker-close coral-state-default coral-priority-secondary coral-corner-all" id="dpTimeEnsure">确定</button>');q+=(showButtonPanel)?"<button type='button' class='coral-datepicker-current coral-state-default coral-priority-primary coral-corner-all' data-handler='today' data-event='mousedown'>"+X+"</button>":"";E=parseInt(this._get(S,"firstDay"),10);E=(isNaN(E)?0:E);ad=this._get(S,"showWeek");s=this._get(S,"dayNames");u=this._get(S,"dayNamesMin");t=this._get(S,"monthNames");j=this._get(S,"monthNamesShort");W=this._get(S,"beforeShowDay");p=this._get(S,"showOtherMonths");B=this._get(S,"selectOtherMonths");i=this._getDefaultDate(S);Z=new Date(i.getFullYear(),i.getMonth(),i.getDate());N="";ae;for(A=0;A<numMonths[0];A++){D="";this.maxRows=4;for(r=0;r<numMonths[1];r++){n=this._daylightSavingAdjustWidthTime(new Date(drawYear,drawMonth,S.selectedDay),[S.currentHur,S.currentMiu,S.currentSed]);P=" coral-corner-all";I="";if(isMultiMonth){I+="<div class='coral-datepicker-group";
if(numMonths[1]>1){switch(r){case 0:I+=" coral-datepicker-group-first";P=" coral-corner-"+(ab?"right":"left");break;case numMonths[1]-1:I+=" coral-datepicker-group-last";P=" coral-corner-"+(ab?"left":"right");break;default:I+=" coral-datepicker-group-middle";P="";break}}I+="'>"}I+="<div class='coral-datepicker-header coral-component-header coral-helper-clearfix"+P+"'>"+(/all|left/.test(P)&&A===0?(ab?m:O):"")+(/all|right/.test(P)&&A===0?(ab?O:m):"")+this._generateMonthYearHeader(S,drawMonth,drawYear,minDate,maxDate,A>0||r>0,t,j,F)+"</div>";if(F===true){I+=this._generateMonthHTML(S,drawMonth,drawYear,minDate,maxDate,A>0||r>0,t,j,currentDate,z)}if(T==true){I+=this._generateYearHTML(S,drawYear,minDate,maxDate,A>0||r>0,currentDate,z)}I+="<table class='coral-datepicker-calendar' "+(F||T?"style='display:none'":"")+"><thead><tr>";M=(ad?"<th class='coral-datepicker-week-col'>"+this._get(S,"weekHeader")+"</th>":"");for(ae=0;ae<7;ae++){J=(ae+E)%7;M+="<th scope='col'"+((ae+E+6)%7>=5?" class='coral-datepicker-week-end'":"")+"><span title='"+s[J]+"'>"+u[J]+"</span></th>"}I+=M+"</tr></thead><tbody>";o=this._getDaysInMonth(drawYear,drawMonth,S);if(drawYear===S.selectedYear&&drawMonth===S.selectedMonth){S.selectedDay=Math.min(S.selectedDay,o)}C=(this._getFirstDayOfMonth(drawYear,drawMonth)-E+7)%7;v=Math.ceil((C+o)/7);R=(isMultiMonth?this.maxRows>v?this.maxRows:v:v);this.maxRows=R;V=this._daylightSavingAdjustWidthTime(new Date(drawYear,drawMonth,1-C),[0,0,0]);for(l=0;l<R;l++){I+="<tr>";Y=(!ad?"":"<td class='coral-datepicker-week-col'>"+this._get(S,"calculateWeek")(V)+"</td>");for(ae=0;ae<7;ae++){ac=(W?W.apply((S.input?S.input[0]:null),[V]):[true,""]);H=(V.getMonth()!==drawMonth);w=(H&&!B)||!ac[0]||(minDate&&V<=new Date(minDate.getFullYear(),minDate.getMonth(),minDate.getDate()-1))||(maxDate&&V>maxDate);Y+="<td class='"+((ae+E+6)%7>=5?" coral-datepicker-week-end":"")+(H?" coral-datepicker-other-month":"")+((V.getTime()===n.getTime()&&drawMonth===S.selectedMonth&&S._keyEvent)||(Z.getTime()===V.getTime()&&Z.getTime()===n.getTime())?" "+this._dayOverClass:"")+(w?" "+this._unselectableClass+" coral-state-disabled":"")+(H&&!p?"":" "+ac[1]+(V.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(V.getTime()===z.getTime()?" coral-datepicker-today":""))+"'"+((!H||p)&&ac[2]?" title='"+ac[2].replace(/'/g,"&#39;")+"'":"")+(w?"":" data-handler='selectDay' data-event='mousedown' data-month='"+V.getMonth()+"' data-year='"+V.getFullYear()+"'")+">"+(H&&!p?"&#xa0;":(w?"<span class='coral-state-default'>"+V.getDate()+"</span>":"<a class='coral-state-default"+(V.getTime()===z.getTime()?" coral-state-highlight":"")+(V.getTime()===currentDate.getTime()?" coral-state-active":"")+(H?" coral-priority-secondary":"")+"' href='javascript:void(0);'>"+V.getDate()+"</a>"))+"</td>";
V.setDate(V.getDate()+1);V=this._daylightSavingAdjustWidthTime(V,[0,0,0])}I+=Y+"</tr>"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}if(F==false&&T==false){I+="</tbody></table>"+this._generateDateTimeHTML(S,dateFormat,q)+(isMultiMonth?"</div>"+((numMonths[0]>0&&r===numMonths[1]-1)?"<div class='coral-datepicker-row-break'></div>":""):"")}D+=I}N+=D}S._keyEvent=false;return N},_generateMonthHTML:function(o,n,v,q,u,w,s,l,r,z){var t="<table class='coral-datepicker-calendar' ><tbody>";var B=0;var C="";var p="";var A=(q&&q.getFullYear()===v);var m=(u&&u.getFullYear()===v);for(var y=0;y<3;y++){t+="<tr>";for(var x=0;x<4;x++){if(B===z.getMonth()&&v===z.getFullYear()){C="coral-state-highlight"}else{C=""}if(B===n){p="coral-state-active"}else{p=""}if((!A||B>=q.getMonth())&&(!m||B<=u.getMonth())){t+="<td data-handler='selectMonthAndHide' data-event='mousedown' data-month='"+B+"'><a class='coral-state-default date-month "+C+" "+p+"' href='javascript:void(0);'>"+s[B++]+"</a></td>"}else{t+="<td class='"+this._unselectableClass+" coral-state-disabled'><span class='date-month' >"+s[B++]+"</span></td>"}}t+="</tr>"}return t+"</tbody></table>"},_generateYearHTML:function(u,p,s,l,y,m,x){var v="<table class='coral-datepicker-calendar' ><tbody>";var n="";var q="";var w=p-(p%12);var o=(s&&s.getFullYear()===p);var z=(l&&l.getFullYear()===p);for(var t=0;t<3;t++){v+="<tr>";for(var r=0;r<4;r++){n="";if(w==u.currentYear){q="coral-state-active"}else{q=""}if((!o||w>=s.getFullYear())&&(!z||w<=l.getFullYear())){v+="<td data-handler='selectYearAndHide' data-event='mousedown' data-year='"+w+"'><a class='coral-state-default date-year  "+q+"' href='javascript:void(0);'>"+w+++"</a></td>"}else{v+="<td class='"+this._unselectableClass+" coral-state-disabled'><span class='date-year' >"+w+++"</span></td>"}}v+="</tr>"}return v+"</tbody></table>"},_generateDateTimeHTML:function(p,y,w){var q='style="display:none"';var l,I,A,F,v,o,x,C;var n=this._hasTime(y),J=this._hasHur(y),z=this._hasMin(y),H=this._hasSec(y);
if(n){q='style="display:block"'}var G=new Date();var r=this._get(p,"minDate");var t=this._get(p,"maxDate");I=J?(p.currentHur||G.getHours()):"00";A=z?(p.currentMiu||G.getMinutes()):"00";F=H?(p.currentSed||G.getSeconds()):"00";var m=new Date(p.selectedYear,p.selectedMonth,p.selectedDay,I,A,F);var s=new Date(p.selectedYear,p.selectedMonth,p.selectedDay);if(r&&r!=""){v=new Date(r.replace(/-/g,"/"));x=new Date(v.getFullYear(),v.getMonth(),v.getDate())}if(t&&t!=""){o=new Date(t.replace(/-/g,"/"));C=new Date(o.getFullYear(),o.getMonth(),o.getDate())}if(this._checkDateRange(p,m)===1){m=new Date(t.replace(/-/g,"/"));I=m.getHours();A=m.getMinutes();F=m.getSeconds()}else{if(this._checkDateRange(p,m)===2){m=new Date(r.replace(/-/g,"/"));I=m.getHours();A=m.getMinutes();F=m.getSeconds()}}d.datepicker.focusInput="dpTimeHour";var u=[];u.push("<div class='coral-datepicker-time' >");u.push("<div class='menuSel hourMenu' style='display: none; margin-left: 6px; margin-top: -90px;'>");u.push("<table cellspacing='0' cellpadding='3' border='0<tr' nowrap='nowrap'><tbody>");var B=0;for(var E=0;E<4;E++){u.push("<tr nowrap='nowrap'></tr>");for(var D=0;D<6;D++){if((r&&B<new Date(r).getHours()&&new Date(s).getTime()==new Date(x).getTime())||(t&&B>new Date(t).getHours()&&new Date(s).getTime()==new Date(C).getTime())){u.push("<td nowrap='' class='menuTimeSel coral-state-disabled' data-handler='clickHour' data-event='click' ><span class='coral-state-default'>"+B+++"</span></td>")}else{u.push("<td nowrap='' class='menuTimeSel' data-handler='clickHour' data-event='click' >"+B+++"</td>")}}u.push("</tr>")}u.push("</tbody></table></div>");u.push("<div class='menuSel minuteMenu' style='display: none; margin-left: 6px; margin-top: -48px;'>");u.push("<table cellspacing='0' cellpadding='3' border='0<tr' nowrap='nowrap'><tbody>");B=0;for(var E=0;E<2;E++){u.push("<tr nowrap='nowrap'></tr>");for(var D=0;D<6;D++){if((r&&B<new Date(r).getMinutes()&&new Date(s).getTime()==new Date(x).getTime())||(t&&B>new Date(t).getMinutes()&&new Date(s).getTime()==new Date(C).getTime())){u.push("<td nowrap='' class='menuTimeSel coral-state-disabled' data-handler='clickMinute' data-event='click'><span class='coral-state-default'>"+B+"</span></td>")
}else{u.push("<td nowrap='' class='menuTimeSel' data-handler='clickMinute' data-event='click' >"+B+"</td>")}B+=5}u.push("</tr>")}u.push("</tbody></table></div>");u.push("<div class='menuSel secondMenu' style='display: none; margin-left: 6px; margin-top: -48px;'>");u.push("<table cellspacing='0' cellpadding='3' border='0<tr' nowrap='nowrap'><tbody>");B=0;for(var E=0;E<2;E++){u.push("<tr nowrap='nowrap'></tr>");for(var D=0;D<6;D++){if((r&&B<new Date(r).getSeconds()&&new Date(s).getTime()==new Date(x).getTime())||(t&&B>new Date(t).getSeconds()&&new Date(s).getTime()==new Date(C).getTime())){u.push("<td nowrap='' class='menuTimeSel coral-state-disabled' data-handler='clickSecond' data-event='click'><span class='coral-state-default'>"+B+"</span></td>")}else{u.push("<td nowrap='' class='menuTimeSel' data-handler='clickSecond' data-event='click' >"+B+"</td>")}B+=5}u.push("</tr>")}u.push("</tbody></table></div>");u.push("<table cellspacing='0' cellpadding='0' border='0'>");u.push("<tr>");u.push("<td class='datepicker-time-input'"+q+">");u.push("<input data-handler='focusTime' data-event='focus' id='dpTimeHour' class='datepicker-timeinput datepicker-time-tB1' "+(J?"":"readonly")+" value='"+I+"' maxlength='2'>");u.push("<input value=':' class='coral-datepicker-time-tm' readonly>");u.push("<input data-handler='focusTime' data-event='focus' id='dpTimeMinute' class='datepicker-timeinput datepicker-time-tE' "+(z?"":"readonly")+" value='"+A+"' maxlength='2'>");u.push("<input value=':' class='coral-datepicker-time-tm' readonly>");u.push("<input data-handler='focusTime' data-event='focus' id='dpTimeSecond' class='datepicker-timeinput datepicker-time-tB2' "+(H?"":"readonly")+" value='"+F+"' maxlength='2'>");u.push("<input id='dpTimeSpinner'/>");u.push("</td>");u.push("</tr>");u.push("</table></div>");u.push("<div class='coral-datepicker-time' >");u.push("<div cellspacing='0' cellpadding='0' border='0'></div>");u.push("<table cellspacing='0' cellpadding='0' border='0'>");u.push("<tr>");
u.push("<td>"+w+"</td>");u.push("</tr>");u.push("</table></div>");return u.join("")},_modifiedMin:function(r,v){var n=this._get(r,"minDate");var l=this._get(r,"maxDate");var u=new Date(r.selectedYear,r.selectedMonth,r.selectedDay),o=new Date(n),s=new Date(l),t=new Date(o.getFullYear(),o.getMonth(),o.getDate()),w=new Date(s.getFullYear(),s.getMonth(),s.getDate());var q=[];q.push("<div class='menuSel minuteMenu' style='display: none; margin-left: 6px; margin-top: -48px;'>");q.push("<table cellspacing='0' cellpadding='3' border='0<tr' nowrap='nowrap'><tbody>");k=0;for(var p=0;p<2;p++){q.push("<tr nowrap='nowrap'></tr>");for(var m=0;m<6;m++){if((n&&k<new Date(n).getMinutes()&&new Date(u).getTime()==new Date(t).getTime()&&v==new Date(n).getHours())||(l&&k>new Date(l).getMinutes()&&new Date(u).getTime()==new Date(w).getTime()&&v==new Date(l).getHours())){q.push("<td nowrap='' class='menuTimeSel coral-state-disabled' data-handler='clickMinute' data-event='click'><span class='coral-state-default'>"+k+"</span></td>")}else{q.push("<td nowrap='' class='menuTimeSel' data-handler='clickMinute' data-event='click' >"+k+"</td>")}k+=5}q.push("</tr>")}q.push("</tbody></table></div>");return q.join("")},_modifiedSed:function(r,w,v){var n=this._get(r,"minDate");var l=this._get(r,"maxDate");var u=new Date(r.selectedYear,r.selectedMonth,r.selectedDay),o=new Date(n),s=new Date(l),t=new Date(o.getFullYear(),o.getMonth(),o.getDate()),x=new Date(s.getFullYear(),s.getMonth(),s.getDate());var q=[];q.push("<div class='menuSel secondMenu' style='display: none; margin-left: 6px; margin-top: -48px;'>");q.push("<table cellspacing='0' cellpadding='3' border='0<tr' nowrap='nowrap'><tbody>");k=0;for(var p=0;p<2;p++){q.push("<tr nowrap='nowrap'></tr>");for(var m=0;m<6;m++){if((n&&k<new Date(n).getSeconds()&&new Date(u).getTime()==new Date(t).getTime()&&w==new Date(n).getHours()&&v==new Date(n).getMinutes())||(l&&k>new Date(l).getSeconds()&&new Date(u).getTime()==new Date(x).getTime()&&w==new Date(l).getHours()&&v==new Date(l).getMinutes())){q.push("<td nowrap='' class='menuTimeSel coral-state-disabled' data-handler='clickSecond' data-event='click'><span class='coral-state-default'>"+k+"</span></td>")
}else{q.push("<td nowrap='' class='menuTimeSel' data-handler='clickSecond' data-event='click' >"+k+"</td>")}k+=5}q.push("</tr>")}q.push("</tbody></table></div>");return q.join("")},_generateMonthYearHeader:function(n,l,x,p,u,y,s,i,r){var C,j,D,A,o,z,v,q,m=this._get(n,"changeMonth"),E=this._get(n,"changeYear"),F=this._get(n,"showMonthAfterYear"),t="<div class='coral-datepicker-title'>",B="",w=this._get(n,"monthSuffix");if(!this._isYearMonthMode(dateFormat)&&!this._isYearMode(dateFormat)){if(y||!m){B+="<span class='coral-datepicker-month'>"+s[l]+"</span>"}else{C=(p&&p.getFullYear()===x);j=(u&&u.getFullYear()===x);B+="<select class='coral-datepicker-month' data-handler='selectMonth' data-event='change'>";for(D=0;D<12;D++){if((!C||D>=p.getMonth())&&(!j||D<=u.getMonth())){B+="<option value='"+D+"'"+(D===l?" selected='selected'":"")+">"+i[D]+"</option>"}}B+="</select>";B+=w}if(!F){t+=B+(y||!(m&&E)?"&#xa0;":"")}}if(!n.yearshtml){n.yearshtml="";if(y||!E){t+="<span class='coral-datepicker-year'>"+x+"</span>"}else{A=this._get(n,"yearRange").split(":");o=new Date().getFullYear();z=function(H){var G=(H.match(/c[+\-].*/)?x+parseInt(H.substring(1),10):(H.match(/[+\-].*/)?o+parseInt(H,10):parseInt(H,10)));return(isNaN(G)?o:G)};v=z(A[0]);q=Math.max(v,z(A[1]||""));v=(p?Math.max(v,p.getFullYear()):v);q=(u?Math.min(q,u.getFullYear()):q);if(this._isYearMode(dateFormat)){var v=x-(x%12);n.yearshtml+="<span class = 'coral-datepicker-year'>"+v+"-"+(v+11)+"</span>"}else{n.yearshtml+="<select class='coral-datepicker-year' data-handler='selectYear' data-event='change'>";for(;v<=q;v++){n.yearshtml+="<option value='"+v+"'"+(v===x?" selected='selected'":"")+">"+v+"</option>"}n.yearshtml+="</select>"}t+=n.yearshtml;n.yearshtml=null}}t+=this._get(n,"yearSuffix");if(F){t+=(y||!(m&&E)?"&#xa0;":"")+(r===false?B:"")}t+="</div>";return t},_adjustInstDate:function(m,p,o){var l=m.drawYear+(o==="Y"?p:0),n=m.drawMonth+(o==="M"?p:0),i=Math.min(m.selectedDay,this._getDaysInMonth(l,n,m))+(o==="D"?p:0),j=this._restrictMinMax(m,this._daylightSavingAdjustWidthTime(new Date(l,n,i),[m.currentHur,m.currentMiu,m.currentSed]));
m.selectedDay=j.getDate();m.drawMonth=m.selectedMonth=j.getMonth();m.drawYear=m.selectedYear=j.getFullYear();if(o==="M"||o==="Y"){this._notifyChange(m)}},_restrictMinMax:function(m,j){var l=this._getMinMaxDate(m,"min"),n=this._getMinMaxDate(m,"max"),i=(l&&j<l?l:j);return(n&&i>n?n:i)},_notifyChange:function(j){var i=this._get(j,"onChangeMonthYear");if(i){i.apply((j.input?j.input[0]:null),[j.selectedYear,j.selectedMonth+1,j])}},_getNumberOfMonths:function(j){var i=this._get(j,"numberOfMonths");return(i==null?[1,1]:(typeof i==="number"?[1,i]:i))},_getMinMaxDate:function(j,i){return this._determineDate(j,this._get(j,i+"Date"),null)},_getDaysInMonth:function(i,l,j){if(j){return 32-this._daylightSavingAdjustWidthTime(new Date(i,l,32),[j.currentHur,j.currentMiu,j.currentSed]).getDate()}else{return 32-this._daylightSavingAdjustWidthTime(new Date(i,l,32),[0,0,0]).getDate()}},_getFirstDayOfMonth:function(i,j){return new Date(i,j,1).getDay()},_canAdjustMonth:function(m,o,l,n){var i=this._getNumberOfMonths(m),j=this._daylightSavingAdjustWidthTime(new Date(l,n+(o<0?o:i[0]*i[1]),1),[m.currentHur,m.currentMiu,m.currentSed]);if(o<0){j.setDate(this._getDaysInMonth(j.getFullYear(),j.getMonth(),m))}return this._isInRange(m,j)},_isInRange:function(n,l){var j,q,m=this._getMinMaxDate(n,"min"),i=this._getMinMaxDate(n,"max"),r=null,o=null,p=this._get(n,"yearRange");if(p){j=p.split(":");q=new Date().getFullYear();r=parseInt(j[0],10);o=parseInt(j[1],10);if(j[0].match(/[+\-].*/)){r+=q}if(j[1].match(/[+\-].*/)){o+=q}}return((!m||l.getTime()>=m.getTime())&&(!i||l.getTime()<=i.getTime())&&(!r||l.getFullYear()>=r)&&(!o||l.getFullYear()<=o))},_getFormatConfig:function(i){var j=this._get(i,"shortYearCutoff");j=(typeof j!=="string"?j:new Date().getFullYear()%100+parseInt(j,10));return{shortYearCutoff:j,dayNamesShort:this._get(i,"dayNamesShort"),dayNames:this._get(i,"dayNames"),monthNamesShort:this._get(i,"monthNamesShort"),monthNames:this._get(i,"monthNames"),calculateWeek:this._get(i,"calculateWeek"),inst:i}
},_formatDate:function(m,i,n,l){if(!i){m.currentDay=m.selectedDay;m.currentMonth=m.selectedMonth;m.currentYear=m.selectedYear}var j=(i?(typeof i==="object"?i:this._daylightSavingAdjustWidthTime(new Date(l,n,i),[m.currentHur,m.currentMiu,m.currentSed])):this._daylightSavingAdjustWidthTime(new Date(m.currentYear,m.currentMonth,m.currentDay),[m.currentHur,m.currentMiu,m.currentSed]));j.setHours(m.currentHur);j.setMinutes(m.currentMiu);j.setSeconds(m.currentSed);j.setMilliseconds(0);return this.formatDate(this._get(m,"dateFormat"),j,this._getFormatConfig(m))},_apply:function(m,j,i,l){var n=d.datepicker._get(m,j);if(n){if(typeof n==="string"){return window[n].apply((m.input?m.input[0]:null),[l].concat(i))}else{if(d.isFunction(n)){return n.apply((m.input?m.input[0]:null),[l].concat(i))}}}}});function c(j){var i="button, .coral-datepicker-prev, .coral-datepicker-next, .coral-datepicker-calendar td a, .menuTimeSel";var l="#coral-datepicker-divId";return j.delegate(i,"mouseout",function(){d(this).removeClass("coral-state-hover");if(this.className.indexOf("coral-datepicker-prev")!==-1){d(this).removeClass("coral-datepicker-prev-hover")}if(this.className.indexOf("coral-datepicker-next")!==-1){d(this).removeClass("coral-datepicker-next-hover")}}).delegate(i,"mouseover",e)}function e(){if(!d.datepicker._isDisabledDatepicker(f.inline?f.dpDiv.parent()[0]:f.input[0])){d(this).parents(".coral-datepicker-calendar").find("a").removeClass("coral-state-hover");d(this).addClass("coral-state-hover");if(this.className.indexOf("coral-datepicker-prev")!==-1){d(this).addClass("coral-datepicker-prev-hover")}if(this.className.indexOf("coral-datepicker-next")!==-1){d(this).addClass("coral-datepicker-next-hover")}}}function a(l,j){d.extend(l,j);for(var i in j){if(j[i]==null){l[i]=j[i]}}return l}d.fn.datepicker=function(j){var l=this;if(!this.length){return this}if(!d.datepicker.initialized){d(document).mousedown(d.datepicker._checkExternalClick);d.datepicker.initialized=true}if(d("#"+d.datepicker._mainDivId).length===0){d("body").append(d.datepicker.dpDiv)
}var i=Array.prototype.slice.call(arguments,1);if(typeof j==="string"&&(j==="isDisabled"||j==="getDate"||j==="getDateValue"||j==="widget"||j=="component")){return d.datepicker["_"+j+"Datepicker"].apply(d.datepicker,[this[0]].concat(i))}if(typeof j==="string"&&(j==="valid")){return d.datepicker["_"+j+"Datepicker"].apply(d.datepicker,[this[0]].concat(i))}if(j==="option"&&arguments.length===2&&typeof arguments[1]==="string"){var m=j;if(arguments[1]=="value"){m="getDateValue"}return d.datepicker["_"+m+"Datepicker"].apply(d.datepicker,[this[0]].concat(i))}this.each(function(){var n;if(!d.data(this,g)){l=typeof j==="string"?d.datepicker["_"+j+"Datepicker"].apply(d.datepicker,[this].concat(i)):d.datepicker._attachDatepicker(this,j)}else{if(!!d.data(this,g)){n=typeof j==="string"?d.datepicker["_"+j+"Datepicker"].apply(d.datepicker,[this].concat(i)):d.datepicker._attachDatepicker(this,j);if(n!==h){l=n;return false}}}});return l};d.datepicker=new b();d.datepicker.initialized=false;d.datepicker.uuid=new Date().getTime();d.datepicker.version="4.0.1"}));

/*!
 * 组件库4.0：下拉框
 * 
 * 依赖JS文件：
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 */
(function(a){a.component("coral.checkbox",a.coral.formelement,{version:"4.0.1",castProperties:["triggers"],options:{showStar:true,id:null,name:null,value:"",label:"",maxLabelWidth:"auto",labelField:null,starBefore:false,title:"",width:"auto",height:null,disabled:false,required:false,readonly:false,checked:false,errMsg:null,errMsgPosition:"leftBottom",onValidError:null,onKeyDown:null,onValidSuccess:null,onChange:a.noop,triggers:null,excluded:false},_create:function(){var e=this,d=this.options,f=d.maxLabelWidth,c=d.label;e.originalValue="";if(!e.element.jquery){e.element=a(e.element)}e.element.addClass("coral-form-element-checkbox");e.element.addClass("coral-validation-checkbox");typeof e.element.attr("id")=="undefined"&&!!e.options.id&&e.element.attr("id",e.options.id);e.options.id=e.element.uniqueId().attr("id");var b=e.element.attr("name");typeof b!="undefined"?(e.options.name=b):(e.element.attr("name",e.options.name));if(a.trim(e.element.val())!=""&&a.trim(e.element.val())!="on"){e.options.value=e.element.val()}else{if(e.options.value){e.element.val(e.options.value)}}if(e.options.name){e.nameMark="coral-checkbox-element-"+e._hashCode(e.options.name);e.element.addClass(e.nameMark)}e.uiCheckbox=a('<span class="coral-checkbox"></span>');e.uiLabel=a('<label class="coral-checkbox-label" for=\''+e.options.id+"'></label>");e.uiIcon=a('<span class="coral-checkbox-icon"></span>');if(f=="auto"){e.uiText=a('<span class="coral-checkbox-text"></span>')}else{e.uiText=a("<span class='coral-checkbox-text'  title='"+c+"' style='max-width:"+f+"px;'></span>")}e.uiLabel.append(e.uiIcon);e.uiLabel.append(this.uiText);if(e.options.label){e.uiText.append(e.options.label)}if(e.options.title){e.uiLabel.attr("title",e.options.title)}if(e.options.checked){e.uiIcon.addClass("cui-icon-checkbox-checked coral-checkbox-hightlight");e.element.prop("checked",true)}else{e.uiIcon.addClass("cui-icon-checkbox-unchecked");
e.element.prop("checked",false)}e.element.after(e.uiCheckbox);e.uiCheckbox.append(e.element).append(e.uiLabel);if(d.labelField){this.uiLabelField=a('<label class="coral-label">'+d.labelField+"</label>");this.uiCheckbox.prepend(this.uiLabelField);this.uiCheckbox.addClass("coral-hasLabel")}if((e.element)[0].checked===true){e.originalValue=e.options.value}e._bindEvent();e._trigger("onCreate",null,[])},reset:function(){if(this.originalValue===""){this.uncheck()}else{this.check()}},_getCheckboxs:function(){var c=this,b=c.element.closest("form");if(!c.nameMark){return c.element}if(b.length>0){return b.find(a("."+c.nameMark))}else{return a("."+c.nameMark)}},_setDisabled:function(b){if(b){this.element.prop("disabled",true);this.uiCheckbox.addClass("coral-state-disabled")}else{this.element.prop("disabled",false);this.uiCheckbox.removeClass("coral-state-disabled")}this.options.disabled=(b?true:false)},_setReadonly:function(b){if(b){this.element.prop("readonly",true);this.uiCheckbox.addClass("coral-readonly")}else{this.element.prop("readonly",false);this.uiCheckbox.removeClass("coral-readonly")}this.options.readonly=!!b},focus:function(){var b=this;if(this.options.disabled||this.options.readonly){return false}this.element.focus();return true},_bindEvent:function(){var b=this;if(this.options.disabled){this._setDisabled(this.options.disabled)}this.element.bind("change",function(c){if(a(this).prop("checked")){b.uiIcon.removeClass("cui-icon-checkbox-unchecked ").addClass("cui-icon-checkbox-checked coral-checkbox-hightlight")}else{b.uiIcon.removeClass("cui-icon-checkbox-checked coral-checkbox-hightlight").addClass("cui-icon-checkbox-unchecked")}b._trigger("onChange",c,[{checked:!!b.element.prop("checked")}])}).bind("focus",function(c){b.uiCheckbox.addClass("coral-checkbox-highlight")}).bind("blur",function(){b.uiCheckbox.removeClass("coral-checkbox-highlight")}).bind("keydown"+this.eventNamespace,function(c){b._trigger("onKeyDown",c,{})});this.uiCheckbox.bind("mouseenter"+this.eventNamespace,function(){if(b.options.disabled||b.uiCheckbox.hasClass("coral-checkbox-highlight")||b.uiCheckbox.hasClass("coral-checkbox-highlight")){return
}a(this).addClass("coral-checkbox-hover")}).bind("mouseleave"+this.eventNamespace,function(){if(b.options.disabled){return}a(this).removeClass("coral-checkbox-hover")});this.uiLabel.bind("click",function(c){if(b.options.readonly||b.options.isLabel){return false}b._trigger("onClick",c,{})})},_setOption:function(b,c){if(b==="id"||b==="name"){return}if(b==="readonly"){this._setReadonly(c)}if(b==="disabled"){this._setDisabled(c)}if(b==="label"){this.uiText.html(c)}if(b==="maxLabelWidth"){var d=c;if(c!="auto"){d=d+"px";this.uiText.attr("title",this.options.label)}else{d="";this.uiText.attr("title","")}this.uiText.css("max-width",d)}this._super(b,c)},_destroy:function(){this.uiCheckbox.replaceWith(this.element);this.uncheck();this.element.removeAttr("value");this.element.removeClass("coral-form-element-checkbox");this.element.removeClass("coral-validation-checkbox");this.element.removeClass(this.nameMark)},_hashCode:function(f){if(!f){return 0}f=""+f;var d=0,e=0,b=f.length;for(var c=0;c<b;c++){d=31*d+f.charCodeAt(e++);if(d>2147483647||d<2147483648){d=d&4294967295}}return d},component:function(){return this.uiCheckbox},disable:function(){this._setDisabled(true)},readonly:function(){this._setReadonly(true)},enable:function(){this._setDisabled(false)},show:function(){this.component().show()},hide:function(){this.component().hide()},check:function(){if(!this.uiIcon.hasClass("coral-checkbox-hightlight")){this.uiIcon.removeClass("cui-icon-checkbox-unchecked").addClass("cui-icon-checkbox-checked coral-checkbox-hightlight");this.element.prop("checked",true)}},uncheck:function(){if(this.uiIcon.hasClass("coral-checkbox-hightlight")){this.uiIcon.removeClass("cui-icon-checkbox-checked coral-checkbox-hightlight").addClass("cui-icon-checkbox-unchecked");this.element.prop("checked",false)}},isChecked:function(){return this.element.prop("checked")},getValue:function(){return this.getValues().join(",")},getValues:function(){var c=this,b=[];c._getCheckboxs().each(function(){var d=a(this);if(d.checkbox("isChecked")){b.push(d.val())
}});return b},refresh:function(){this._destroy();this._create()}})})(jQuery);

/*!
 * 组件库4.0：复选框组
 * 
 * 依赖JS文件：
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 *    jquery.validatehelper.js
 */
(function(a){a.component("coral.checkboxlist",a.coral.formelement,{version:"4.0.1",castProperties:["data","triggers"],options:{id:null,name:null,valueField:"value",textField:"text",required:false,showStar:true,maxLabelWidth:"auto",labelField:null,starBefore:false,column:null,disabled:false,readonly:false,value:"",data:null,url:null,termSplit:";",itemSplit:":",errMsg:null,errMsgPosition:"leftBottom",repeatLayout:"table",itemWidth:"auto",onValidError:null,onKeyDown:null,onValidSuccess:null,triggers:null,excluded:false,onChange:a.noop},_create:function(){var f=this,c=null,b=null,g=null,e=this.options;if(!this.element.jquery){this.element=a(this.element)}this.element.addClass("coral-form-element-checkboxlist  ctrl-init ctrl-form-element ctrl-init-checkboxlist coral-validation-checkboxlist");typeof f.element.attr("id")=="undefined"&&!!f.options.id&&f.element.attr("id",f.options.id);f.options.id=f.element.uniqueId().attr("id");var d=f.element.attr("name");typeof d!="undefined"?(f.options.name=d):(f.element.attr("name",f.options.name));this.uiBoxlist=a('<span class="coral-checkboxlist"></span>');this.uiInput=a('<input type="hidden">');if(this.options.name){this.uiInput.attr("name",this.options.name)}if(this.options.value){this.uiInput.val(this.options.value)}this._initData();this.uiInput.appendTo(this.uiBoxlist);if(e.labelField){this.uiLabel=a('<label class="coral-label">'+e.labelField+"</label>");this.uiBoxlist.prepend(this.uiLabel);this.uiBoxlist.addClass("coral-hasLabel")}this.uiBoxlist.insertAfter(this.element);this.element.hide();this._bindEvent()},reload:function(b){},_initData:function(){var c=this,b=this.options;if(this.options.url){if(this.xhr){this.xhr.abort()}this.xhr=a.ajax(this._ajaxSettings());this.xhr.success(function(d){c._loadData(d)}).complete(function(e,d){if(e===c.xhr){c.xhr=null}}).error(function(){a.alert("Json Format Error!")
})}else{if(this.options.data){this._loadData(this.options.data)}}},_ajaxSettings:function(){var c=this.options,b=this;return{type:"get",url:c.url,data:{},async:false,dataType:"json"}},_loadData:function(h){var c=null,g=[],j,d=0,e=null,b=null,f=null;if(typeof h==="string"){c=h.split(this.options.termSplit);h=[];for(;d<c.length;d++){b=c[d];f=b.split(this.options.itemSplit);e={};e[this.options.valueField]=f[0];e[this.options.textField]=f[1];h.push(e)}}this.data=h;for(d;d<h.length;d++){j=h[d];if(j.checked){g.push(j[this.options.valueField])}}if(this.options.value){g=this.options.value.split(",")}if(!this.isInit){this.isInit=true;this.originalValue=g.join(",")}this._renderChkItem();this.setValue(g)},_renderChkItem:function(){if(this.options.repeatLayout=="table"){if(this.options.column==null){this.options.column=3}this._renderTableItem();this.uiTable.appendTo(this.uiBoxlist)}else{if(this.options.repeatLayout=="flow"){if(this.options.column==null){this.options.column=this.data.length}this._renderBorderItem();this.uiBorder.appendTo(this.uiBoxlist)}}},reset:function(){this.setValue(this.originalValue)},_renderBorderItem:function(){var e=this,d=this.options,c=this.options.column,f=this.data;e.uiBorder=a('<span class="coral-checkboxlist-border"></span>');for(var b in f){if(b>(c-1)&&b%(c)==0){a("<br/>").appendTo(e.uiBorder)}e._renderItem(f[b]).css("width",d.itemWidth).appendTo(e.uiBorder)}},_renderTableItem:function(){this.uiTable=a("<table></table>");var e=0,d=0,h=this.data,c=h.length||0,f=this.options.column,g=0,k=null,b=null;if(!h||h.length<1){return}g=Math.ceil(c/f);for(;e<g;e++){k=a("<tr></tr>");for(d=0;d<f;d++){b=a("<td></td>");if((e*f+d)<c){this._renderItem(h[(e*f+d)]).appendTo(b)}b.appendTo(k)}k.appendTo(this.uiTable)}},_renderItem:function(e){var c=e.hidden==true?"hidden":"";var f=a("<span class='coral-checkbox "+c+"'></span>"),d=a("<span class='coral-checkbox-label'></span>"),h=a("<span class='coral-checkbox-icon'></span>"),b=this.options.maxLabelWidth,j=a(),g=e[this.options.valueField],i=e[this.options.textField];
if(b=="auto"){j=a('<span class="coral-checkbox-text"></span>')}else{j=a("<span class='coral-checkbox-text'  title='"+i+"' style='max-width:"+b+"px;'></span>")}f.attr("data-value",g);d.append(h).append(j);d.appendTo(f);h.addClass("cui-icon-checkbox-unchecked");j.append(i);return f},_bindEvent:function(){var b=this;if(this.options.disabled){this._setDisabled(this.options.disabled)}this.uiBoxlist.find(".coral-checkbox").each(function(){a(this).bind("mouseenter"+b.eventNamespace,function(){if(a(this).hasClass("coral-state-disabled")){return}a(this).addClass("coral-checkbox-hover")}).bind("mouseleave"+b.eventNamespace,function(){if(a(this).hasClass("coral-state-disabled")){return}a(this).removeClass("coral-checkbox-hover")}).bind("click"+b.eventNamespace,function(e){if(b.options.disabled){return}var f=a(this),c=f.find(".coral-checkbox-icon");if(f.hasClass("coral-state-disabled")){e.stopPropagation();return}if(c.hasClass("coral-checkboxlist-item-highlight")){c.removeClass("cui-icon-checkbox-checked coral-checkboxlist-item-highlight").addClass("cui-icon-checkbox-unchecked")}else{c.removeClass("cui-icon-checkbox-unchecked").addClass("coral-checkboxlist-item-highlight cui-icon-checkbox-checked")}var d=b.getValue();b._changeValue();b._trigger("onChange",null,{value:b.uiInput.val(),oldValue:d,checked:c.hasClass("coral-checkboxlist-item-highlight")});e.stopPropagation()}).bind("keydown"+this.eventNamespace,function(c){b._trigger("onKeyDown",c,{})})});this.uiBoxlist.find(".coral-checkbox-label").each(function(){a(this).bind("click"+b.eventNamespace,function(c){if(b.options.readonly){return false}})})},_changeValue:function(){var c=this,b=[];this.uiBoxlist.find(".coral-checkbox").each(function(){if(a(this).find(".coral-checkbox-icon").hasClass("coral-checkboxlist-item-highlight")){b.push(a(this).attr("data-value"))}});this.uiInput.val(b.toString())},_setDisabled:function(b){b=!!b;this.uiBoxlist.find(".coral-checkbox").each(function(){a(this).toggleClass("coral-state-disabled",b)});
this.options.disabled=b},_setReadonly:function(b){b=!!b;this.uiBoxlist.find(".coral-checkbox").each(function(){a(this).toggleClass("coral-readonly",b)});this.options.readonly=b},_setOption:function(c,d){if(c==="id"||c==="name"){return}if(c==="readonly"){this._setReadonly(d)}if(c==="disabled"){this._setDisabled(d);return}if(c==="maxLabelWidth"){var f=d;if(d!="auto"){f=f+"px";var g=this.component().find(".coral-checkbox-text");for(var b=0;b<g.length;b++){var e=a(g[b]).html();a(g[b]).attr("title",e)}}else{f="";this.component().find(".coral-checkbox-text").attr("title","")}this.component().find(".coral-checkbox-text").css("max-width",f)}this._super(c,d)},_destroy:function(){this.component().remove();if(this.options.name){this.element.removeAttr("orgname").attr("name",this.options.name)}this.element.removeClass("coral-form-element-checkboxlist");this.element.removeClass("coral-validation-checkboxlist");this.element.show()},focus:function(){},component:function(){return this.uiBoxlist},disable:function(){this._setOption("disabled",true);this._setDisabled(true)},readonly:function(){this._setReadonly("readonly",true)},enable:function(){this._setOption("disabled",false);this._setDisabled(false)},disableItem:function(b){this.uiBoxlist.find('.coral-checkbox[data-value="'+b+'"]').toggleClass("coral-state-disabled",true)},enableItem:function(c){this.options.disabled=false;var b=this.uiBoxlist.find('.coral-checkbox[data-value="'+c+'"]').toggleClass("coral-state-disabled",false)},show:function(){this.component().show()},hide:function(){this.component().hide()},getValue:function(){return this.uiInput.val()},setValue:function(f,e){var b=this.getValue()||[];this.uiBoxlist.find(".coral-checkboxlist-item-highlight").each(function(){a(this).removeClass("cui-icon-checkbox-checked coral-checkboxlist-item-highlight").addClass("cui-icon-checkbox-unchecked")});f=f||"";var c=0,d=a.isArray(f)?f:((!f||typeof f!=="string"||""===a.trim(f))?[]:f.split(","));for(;c<d.length;c++){this.uiBoxlist.find('.coral-checkbox[data-value="'+d[c]+'"]').find(".coral-checkbox-icon").removeClass("cui-icon-checkbox-unchecked").addClass("cui-icon-checkbox-checked coral-checkboxlist-item-highlight")
}this.uiInput.val(d.toString())},invertCheck:function(c){var b=[];this.uiBoxlist.find(".coral-checkboxlist-item-highlight").each(function(){a(this).removeClass("cui-icon-checkbox-checked coral-checkboxlist-item-highlight").addClass("coral-checkbox-temp")});this.uiBoxlist.find(".cui-icon-checkbox-unchecked").each(function(){a(this).removeClass("cui-icon-checkbox-unchecked").addClass("cui-icon-checkbox-checked coral-checkboxlist-item-highlight")});this.uiBoxlist.find(".coral-checkbox-temp").each(function(){a(this).removeClass("coral-checkbox-temp").addClass("cui-icon-checkbox-unchecked")});this.uiBoxlist.find(".coral-checkbox").each(function(){if(a(this).find(".coral-checkbox-icon").hasClass("coral-checkboxlist-item-highlight")){b.push(a(this).attr("data-value"))}});this.setValue(b,c)},checkAll:function(){var c=[],b=0,e=null,d=this.data;for(;b<d.length;b++){e=d[b];c.push(e[this.options.valueField])}this.setValue(c)},getText:function(c){var d=0,e=this.data,f=null,b=[];if(!c){c=this.getValue().split(",")}else{if(typeof c){c=c.split(",")}}for(;d<e.length;d++){f=e[d][this.options.valueField];if(a.inArray(f,c)>-1){b.push(e[d][this.options.textField])}}return b.toString()}})})(jQuery);

(function(a){a.component("coral.radio",a.coral.formelement,{version:"4.0.1",castProperties:["triggers"],options:{showStar:true,id:null,name:null,width:"auto",height:24,label:"",starBefore:false,labelField:null,disabled:false,readonly:false,allowCancel:false,checked:false,required:false,isCheck:false,value:"",errMsg:null,errMsgPosition:"leftBottom",onValidError:null,onValidSuccess:null,onClick:null,onKeyDown:null,onChange:a.noop,triggers:null,excluded:false},_create:function(){var d=this,c=this.options;if(!d.element.jquery){d.element=a(d.element)}d.element.addClass("coral-form-element-radio");d.element.addClass("coral-validation-radio");typeof d.element.attr("id")=="undefined"&&!!d.options.id&&d.element.attr("id",d.options.id);d.options.id=d.element.uniqueId().attr("id");var b=d.element.attr("name");typeof b!="undefined"?(d.options.name=b):(d.element.attr("name",d.options.name));if(a.trim(d.element.val())!=""&&a.trim(d.element.val())!="on"){d.options.value=d.element.val()}else{if(d.options.value){d.element.val(d.options.value)}}d.nameMark="coral-radio-element-"+d._hashCode(d.options.name);d.element.addClass(d.nameMark);d.uiRadio=a('<span class="coral-radio"></span>');d.uiLabel=a('<label class="coral-radio-label" for='+d.options.id+"></label>");d.uiIcon=a('<span class="coral-radio-icon"></span>');d.uiLabel.append(d.uiIcon);if(d.options.label){d.uiLabel.append(d.options.label)}if(d.options.checked){d._getRadios().not(d.element).radio("uncheck");d.uiIcon.addClass("cui-icon-radio-checked coral-radio-hightlight");d.element.prop("checked",true)}else{d.uiIcon.addClass("cui-icon-radio-unchecked");d.element.prop("checked",false)}d.element.after(d.uiRadio);d.uiRadio.append(d.element).append(d.uiLabel);if(c.labelField){this.uiLabelField=a('<label class="coral-label">'+c.labelField+"</label>");this.uiRadio.prepend(this.uiLabelField);this.uiRadio.addClass("coral-hasLabel")}if((d.element)[0].checked===true){d.originalValue=this.getValue()}d._bindEvent()},reset:function(){if(this.originalValue==="off"||this.originalValue===""){this.uncheck()
}else{this.check()}},_getRadios:function(){var c=this,b=c.element.closest("form");if(b.length>0){return b.find(a("."+c.nameMark))}else{return a("."+c.nameMark)}},_setDisabled:function(b){if(b){this.element.prop("disabled",true);this.uiRadio.addClass("coral-state-disabled")}else{this.element.prop("disabled",false);this.uiRadio.removeClass("coral-state-disabled")}this.options.disabled=(b?true:false)},_setReadonly:function(b){if(b){this.element.prop("reaonly",true);this.uiRadio.addClass("coral-readonly")}else{this.element.prop("readonly",false);this.uiRadio.removeClass("coral-state-readonly")}this.options.readonly=!!b},focus:function(){var b=this;if(this.options.disabled||this.options.readonly){return false}this.element.focus();return true},_bindEvent:function(){var c=this;if(this.options.disabled){this._setDisabled(this.options.disabled)}var b;this.element.bind("focus",function(){c.uiRadio.addClass("coral-radio-highlight")}).bind("blur",function(){c.uiRadio.removeClass("coral-radio-highlight")}).bind("click",function(d){if(c.options.disabled){return}c._trigger("onClick",null,{checked:!!c.element.prop("checked")});if(b){b=false;return false}}).bind("keydown"+this.eventNamespace,function(d){c._trigger("onKeyDown",d,{})});this.uiRadio.bind("mouseenter"+this.eventNamespace,function(){if(c.options.disabled){return}a(this).addClass("coral-radio-hover")}).bind("mouseleave"+this.eventNamespace,function(){if(c.options.disabled){return}a(this).removeClass("coral-radio-hover")});this.uiLabel.bind("click",function(d){if(c.options.readonly||c.options.disabled){return false}b=true;c.options.isCheck=a(c.element).prop("checked");if(!c.options.isCheck){c._clearCheckedState();c.uiIcon.removeClass("cui-icon-radio-unchecked");c.uiIcon.addClass("cui-icon-radio-checked coral-radio-hightlight");c.element.prop("checked",true);c._trigger("onChange",null,[{checked:!!c.element.prop("checked")}])}else{if(!c.options.allowCancel){d.preventDefault();return false}c._clearCheckedState();c.uiIcon.addClass("cui-icon-radio-unchecked");
c.element.prop("checked",false);c._trigger("onChange",null,[{checked:!!c.element.prop("checked")}])}})},clear:function(){},_clearCheckedState:function(){this._getRadios().each(function(){a(this).radio("component").find(".coral-radio-icon").removeClass("cui-icon-radio-checked coral-radio-hightlight").addClass(" cui-icon-radio-unchecked")})},_hashCode:function(f){if(!f){return 0}f=""+f;var d=0,e=0,b=f.length;for(var c=0;c<b;c++){d=31*d+f.charCodeAt(e++);if(d>2147483647||d<2147483648){d=d&4294967295}}return d},_setOption:function(b,c){if(b==="id"||b==="name"){return}if(b==="readonly"){this._setReadonly(c)}if(b==="disabled"){this._setDisabled(c)}this._super(b,c)},_destroy:function(){this.uiRadio.replaceWith(this.element);this.uncheck();this.element.removeClass("coral-form-element-radio");this.element.removeClass("coral-validation-radio");this.element.removeClass(this.nameMark)},component:function(){return this.uiRadio},disable:function(){this._setDisabled(true)},enable:function(){this._setDisabled(false)},show:function(){this.component().show()},hide:function(){this.component().hide()},check:function(){var b=this;if(this.uiIcon.hasClass("cui-icon-radio-unchecked")){b._getRadios().each(function(){a(this).radio("component").find(".coral-radio-icon").removeClass("cui-icon-radio-checked coral-radio-hightlight").addClass(" cui-icon-radio-unchecked")});this.uiIcon.removeClass("cui-icon-radio-unchecked").addClass("cui-icon-radio-checked coral-radio-hightlight");this.element.prop("checked",true)}},uncheck:function(){if(this.uiIcon.hasClass("coral-radio-hightlight")){this.uiIcon.removeClass("cui-icon-radio-checked coral-radio-hightlight").addClass("cui-icon-radio-unchecked");this.element.prop("checked",false)}},isChecked:function(){return this.element.prop("checked")},setValue:function(b){if("on"===b){this.check()}else{this.uncheck()}},getValue:function(){return this.getValues().join(",")},getValues:function(){var c=this,b=[];c._getRadios().each(function(){var d=a(this);if(d.radio("isChecked")){b.push(d.val())
}});return b},refresh:function(){this._destroy();this._create()}})})(jQuery);

/*!
 * 组件库4.0：复选框组
 * 
 * 依赖JS文件：
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 *    jquery.validatehelper.js
 */
(function(a){a.component("coral.radiolist",a.coral.formelement,{version:"4.0.1",castProperties:["data","triggers"],options:{id:null,name:null,valueField:"value",textField:"text",required:false,labelField:null,starBefore:false,showStar:true,column:null,disabled:false,readonly:false,isCheck:false,allowCancel:false,value:"",valueIndex:null,data:[],url:null,termSplit:";",itemSplit:":",repeatLayout:"table",itemWidth:"auto",errMsg:null,errMsgPosition:"leftBottom",onLoad:null,onValidError:null,onKeyDown:null,onValidSuccess:null,triggers:null,excluded:false,onChange:a.noop},_create:function(){var e=this,c=null,b=null,f=null,d=this.options;this._prepareInit();this._initComponent();this._setDefaultValue();this._initData();this._bindEvent();if(this.options.url){this._trigger("onLoad",null,[{data:this.getData()}])}},_prepareInit:function(){this.isInit=false},_initComponent:function(){this.element.addClass("coral-form-element-radiolist coral-validation-radiolist ctrl-init ctrl-form-element ctrl-init-radiolist");typeof this.element.attr("id")=="undefined"&&!!this.options.id&&that.element.attr("id",this.options.id);this.options.id=this.element.uniqueId().attr("id");var b=this.element.attr("name");typeof b!="undefined"?(this.options.name=b):(this.element.attr("name",this.options.name));this.uiBoxlist=a('<span class="coral-radiolist"></span>');this.uiInput=a('<input type="hidden">');if(this.options.name){this.uiInput.attr("name",this.options.name);this.element.removeAttr("name").attr("orgname",this.options.name)}this.uiInput.appendTo(this.uiBoxlist);if(this.options.labelField){this.uiLabel=a('<label class="coral-label">'+this.options.labelField+"</label>");this.uiBoxlist.prepend(this.uiLabel);this.uiBoxlist.addClass("coral-hasLabel")}this.uiBoxlist.insertAfter(this.element);this.element.hide()},_setDefaultValue:function(){},_initData:function(){var c=this,b=this.options;
if(b.url){if(this.xhr){this.xhr.abort()}this.xhr=a.ajax(this._ajaxSettings());this.xhr.success(function(d){c._loadData(d)}).complete(function(e,d){if(e===c.xhr){c.xhr=null}}).error(function(){a.alert("Json Format Error!")})}else{if(b.data){this._loadData(b.data)}}},_ajaxSettings:function(){var c=this.options,b=this;return{type:"get",url:c.url,data:{},async:false,dataType:"json"}},_loadData:function(h){var c=null,j,g,d=0,e=null,b=null,f=null;if(typeof h==="string"){c=h.split(this.options.termSplit);h=[];for(;d<c.length;d++){b=c[d];f=b.split(this.options.itemSplit);e={};e[this.options.valueField]=f[0];e[this.options.textField]=f[1];h.push(e)}}this.data=h;for(d;d<h.length;d++){j=h[d];if(j.checked){g=j[this.options.valueField]}}if(this.options.value){g=this.options.value}if(!this.isInit){this.isInit=true;this.originalValue=g}this._renderRadioItem();this.setValue(g)},_renderRadioItem:function(){if(this.options.repeatLayout=="table"){if(this.options.column==null){this.options.column=3}this._renderTableItem();this.uiTable.appendTo(this.uiBoxlist)}else{if(this.options.repeatLayout=="flow"){if(this.options.column==null){this.options.column=this.data.length}this._renderFlowItem();this.uiBorder.appendTo(this.uiBoxlist)}}},reset:function(){this.setValue(this.originalValue)},getData:function(){return this.data},_renderFlowItem:function(){var e=this,d=this.options,c=this.options.column,f=this.data;e.uiBorder=a('<span class="coral-radiolist-border"></span>');for(var b in f){if(b>(c-1)&&b%(c)===0){a("<br/>").appendTo(e.uiBorder)}e._renderItem(f[b]).css("width",d.itemWidth).appendTo(e.uiBorder)}},_renderTableItem:function(){this.uiTable=a("<table></table>");var e=0,d=0,h=this.data,c=h.length||0,f=this.options.column,g=0,k=null,b=null;if(!h||h.length<1){return}g=Math.ceil(c/f);for(;e<g;e++){k=a("<tr></tr>");for(d=0;d<f;d++){b=a("<td></td>");if((e*f+d)<c){this._renderItem(h[(e*f+d)]).appendTo(b)}b.appendTo(k)}k.appendTo(this.uiTable)}},_renderItem:function(c){var d=c.hidden===true?"hidden":"";
var f=a("<span class='coral-radio "+d+"'></span>"),e=a("<label class='coral-radio-label'></label>"),b=a("<span class='coral-radio-icon'></span>"),g=c[this.options.valueField],h=c[this.options.textField];f.attr("value",g);e.append(b).append(h);e.appendTo(f);b.addClass("cui-icon-radio-unchecked");return f},_bindEvent:function(){var b=this;if(this.options.disabled){this._setDisabled(this.options.disabled)}this._on({"mouseenter .coral-radio":function(d){if(b.options.readonly){return false}var c=a(d.target).closest(".coral-radio");if(a(c).hasClass("coral-state-disabled")){return}a(c).addClass("coral-radio-hover")},"mouseleave .coral-radio":function(d){if(b.options.readonly){return false}var c=a(d.target).closest(".coral-radio");if(a(c).hasClass("coral-state-disabled")){return}a(c).removeClass("coral-radio-hover")},"keydown .coral-radio":function(c){b._trigger("onKeyDown",c,{})},"click .coral-radio":function(i){var f=a(i.target).closest(".coral-radio");if(b.options.readonly){return false}var g=f,c=g.find(".coral-radio-icon"),h=g.attr("value"),d=b.getValue();if(h==d){if(!this.options.allowCancel){return false}c.removeClass("cui-icon-radio-checked coral-radiolist-item-hightlight").addClass("cui-icon-radio-unchecked");b.uiInput.val("")}else{b.setValue(h);b._trigger("onChange",null,{value:h,checked:c.hasClass("coral-radiolist-item-hightlight")})}i.stopPropagation()}})},_setDisabled:function(b){b=!!b;this.uiBoxlist.find(".coral-radio").each(function(){a(this).toggleClass("coral-state-disabled",b)});this.options.disabled=b},_setReadonly:function(b){b=!!b;this.uiBoxlist.find(".coral-radio").each(function(){a(this).toggleClass("coral-readonly",b)});this.options.readonly=b},_setOption:function(b,c){if(b==="id"||b==="name"){return}if(b==="disabled"){this._setDisabled(c)}if(b==="readonly"){this._setReadonly(c)}this._super(b,c)},_destroy:function(){this.component().remove();if(this.options.name){this.element.removeAttr("orgname").attr("name",this.options.name)}this.element.removeClass("coral-form-element-radiolist");
this.element.removeClass("coral-validation-radiolist");this.element.show()},focus:function(){},component:function(){return this.uiBoxlist},disable:function(){this._setDisabled(true)},readonly:function(){this._setReadonly(true)},enable:function(){this._setDisabled(false)},disableItem:function(b){this.uiBoxlist.find('.coral-radio[value="'+b+'"]').toggleClass("coral-state-disabled",true)},enableItem:function(b){this.options.disabled=false;this.uiBoxlist.find('.coral-radio[value="'+b+'"]').toggleClass("coral-state-disabled",false)},show:function(){this.component().show()},hide:function(){this.component().hide()},getValue:function(){return this.uiInput.val()},setValue:function(c){c=c||"";this.uiBoxlist.find(".coral-radiolist-item-hightlight").each(function(){a(this).removeClass("cui-icon-radio-checked coral-radiolist-item-hightlight").addClass("cui-icon-radio-unchecked")});var b=this.uiBoxlist.find('.coral-radio[value="'+c+'"]').find(".coral-radio-icon").removeClass("cui-icon-radio-unchecked").addClass("cui-icon-radio-checked coral-radiolist-item-hightlight");this.uiBoxlist.find(".coral-radio").removeClass("coral-state-highlight");this.uiBoxlist.find('.coral-radio[value="'+c+'"]').addClass("coral-state-highlight");this.uiInput.val(c)},getText:function(e){var c=0,d=this.data,f=null,b=[];if(!e){e=this.getValue()}for(;c<d.length;c++){f=d[c][this.options.valueField];if(f==e){return(d[c][this.options.textField])}}return""}})})(jQuery);

/*!
 * 组件库4.0.1：进度条
 *
 * 依赖JS文件:
 *   jquery.coral.code.js
 *   jquery.coral.component.js
 */
(function(a,b){a.component("coral.progressbar",{version:"4.0.1",options:{id:null,name:null,max:100,value:0,text:"{value}%",onChange:null,onComplete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.addClass("coral-progressbar coral-component coral-corner-all");this.valueDiv=a('<div class="coral-progressbar-value coral-corner-left"></div>').appendTo(this.element);this.textDiv=a('<div class="coral-progressbar-text"></div>').appendTo(this.valueDiv);this.valueWidth=this.element.width()-(this.valueDiv.outerWidth(true)-this.valueDiv.outerWidth());this._refreshValue()},_destroy:function(){this.element.removeClass("coral-progressbar coral-component coral-component-content coral-corner-all");this.valueDiv.remove()},value:function(c){if(c===b){return this.options.value}this.options.value=this._constrainedValue(c);this._refreshValue()},_constrainedValue:function(c){if(c===b){c=this.options.value}this.indeterminate=c===false;if(typeof c!=="number"){c=0}return(this.indeterminate?false:Math.min(this.options.max,Math.max(this.min,c)))},_setOptions:function(c){var d=c.value;delete c.value;this._super(c);this.options.value=this._constrainedValue(d);this._refreshValue()},_setOption:function(c,d){if(c==="max"){d=Math.max(this.min,d)}if(c==="disabled"){this.element.toggleClass("coral-state-disabled",!!d).attr("aria-disabled",d)}this._super(c,d)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var d=this.options.value,c=this._percentage().toFixed(0),g=this.options.text.replace(/{value}/,c),f=0,e=0;this.valueDiv.toggle(this.indeterminate||d>this.min).toggleClass("coral-corner-right",d===this.options.max).width(this.valueWidth*c/100);if(100==c){this.valueDiv.width("auto")}this.textDiv.html(g);f=(this.element.position().left+(this.element.outerWidth()-this.textDiv.outerWidth())/2);
e=(this.element.position().top+(this.element.outerHeight()-this.textDiv.outerHeight())/2);this.textDiv.position({of:this.element,my:f+" "+e,at:f+" "+e});this.element.toggleClass("coral-progressbar-indeterminate",this.indeterminate);if(this.indeterminate){if(!this.overlayDiv){this.overlayDiv=a("<div class='coral-progressbar-overlay'></div>").appendTo(this.valueDiv)}}else{if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null}}if(this.oldValue!==d){this.oldValue=d;this._trigger("onChange",null,{value:d,oldValue:this.oldValue})}if(d===this.options.max){this._trigger("onComplete")}}})})(jQuery);

(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./core","./component"],a)}else{a(jQuery)}}(function(a){return a.component("coral.accordion",{version:"4.0.1",options:{active:0,a:[],animate:{params:{},duration:300,easing:"swing"},collapsible:false,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"cui-icon-arrow-down3",header:"cui-icon-arrow-up3"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;b.icons=a.coral.toFunction(b.icons);this.options.a.push("ddd");this.prevShow=this.prevHide=a();this.element.addClass("coral-accordion ctrl-init ctrl-init-accordion coral-component coral-helper-reset").attr("role","tablist");if(!b.collapsible&&(b.active===false||b.active==null)){b.active=0}this._processPanels();if(b.active<0){b.active+=this.headers.length}this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:!this.active.length?a():this.active.next()}},_createIcons:function(){var c=this,b=this.options.icons;if(b){a("<span>").addClass("coral-accordion-header-icon icon "+b.header).prependTo(this.headers);this.active.children(".coral-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader);this.headers.each(function(){var d=a.parser.parseOptions(this);if(d.collapsible==false){a(this).children(".coral-accordion-header-icon").remove()}else{a(this).addClass("coral-accordion-icons")}})}},_destroyIcons:function(){this.headers.removeClass("coral-accordion-icons").children(".coral-accordion-header-icon").remove()},_destroy:function(){var b;this.element.removeClass("coral-accordion coral-component coral-helper-reset").removeAttr("role");this.headers.removeClass("coral-accordion-header coral-accordion-header-active coral-state-default coral-corner-all coral-state-active coral-state-disabled coral-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId();
this._destroyIcons();b=this.headers.next().removeClass("coral-helper-reset coral-widget-content coral-corner-bottom coral-accordion-content coral-accordion-content-active coral-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId();if(this.options.heightStyle!=="content"){b.css("height","")}},_setOption:function(b,c){if(b==="active"){this._activate(c);return}if(b==="event"){if(this.options.event){this._off(this.headers,this.options.event)}this._setupEvents(c)}this._super(b,c);if(b==="collapsible"&&!c&&this.options.active===false){this._activate(0)}if(b==="icons"){this._destroyIcons();if(c){this._createIcons()}}if(b==="disabled"){this.element.toggleClass("coral-state-disabled",!!c).attr("aria-disabled",c);this.headers.add(this.headers.next()).toggleClass("coral-state-disabled",!!c)}},_keydown:function(e){if(e.altKey||e.ctrlKey){return}var f=a.coral.keyCode,d=this.headers.length,b=this.headers.index(e.target),c=false;switch(e.keyCode){case f.RIGHT:case f.DOWN:c=this.headers[(b+1)%d];break;case f.LEFT:case f.UP:c=this.headers[(b-1+d)%d];break;case f.SPACE:case f.ENTER:this._eventHandler(e);break;case f.HOME:c=this.headers[0];break;case f.END:c=this.headers[d-1];break}if(c){a(e.target).attr("tabIndex",-1);a(c).attr("tabIndex",0);c.focus();e.preventDefault()}},_panelKeyDown:function(b){if(b.keyCode===a.coral.keyCode.UP&&b.ctrlKey){a(b.currentTarget).prev().focus()}},refresh:function(){var b=this.options;this._processPanels();if((b.active===false&&b.collapsible===true)||!this.headers.length){b.active=false;this.active=a()}else{if(b.active===false){this._activate(0)}else{if(this.active.length&&!a.contains(this.element[0],this.active[0])){if(this.headers.length===this.headers.find(".coral-state-disabled").length){b.active=false;this.active=a()}else{this._activate(Math.max(0,b.active-1))}}else{b.active=this.headers.index(this.active)}}}this._destroyIcons();this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("coral-accordion-header coral-state-default coral-corner-all");
this.headers.next().addClass("coral-accordion-content coral-helper-reset coral-component-content coral-corner-bottom").filter(":not(.coral-accordion-content-active)").hide()},_refresh:function(){var e,c=this.options,b=c.heightStyle,d=this.element.parent();this.active=this._findActive(c.active).addClass("coral-accordion-header-active coral-state-active coral-corner-top").removeClass("coral-corner-all");this.active.next().addClass("coral-accordion-content-active").show();this.headers.attr("role","tab").each(function(){var i=a(this),h=i.uniqueId().attr("id"),f=i.next(),g=f.uniqueId().attr("id");i.attr("aria-controls",g);f.attr("aria-labelledby",h)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0)}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"})}this._createIcons();this._setupEvents(c.event);if(b==="fill"){a.coral.fitParent(this.component(),true);e=d.height();this.element.siblings(":visible").each(function(){var g=a(this),f=g.css("position");if(f==="absolute"||f==="fixed"){return}e-=g.outerHeight(true)});this.headers.each(function(){e-=a(this).outerHeight(true)});this.headers.next().each(function(){a(this).height(Math.max(0,e-a(this).innerHeight()+a(this).height()))}).addClass("coral-scroll")}else{if(b==="auto"){e=0;this.headers.next().each(function(){e=Math.max(e,a(this).css("height","").height())}).height(e)}}this.headers.each(function(){var f=a.parser.parseOptions(this);if(f.collapsible==false){a(this).next().addClass("hidden")}})},_activate:function(b){var c=this._findActive(b)[0];if(c===this.active[0]){return}c=c||this.active[0];this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop})},_findActive:function(b){return typeof b==="number"?this.headers.eq(b):a()},_setupEvents:function(c){var b={keydown:"_keydown"};
if(c){a.each(c.split(" "),function(e,d){b[d]="_eventHandler"})}this._off(this.headers.add(this.headers.next()));this._on(this.headers,b);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(b){var j=this.options,e=this.active,f=a(b.currentTarget),h=f[0]===e[0],c=h&&j.collapsible,d=c?a():f.next(),g=e.next(),i={oldHeader:e,oldPanel:g,newHeader:c?a():f,newPanel:d,headerOptions:a.parser.parseOptions((c?a():f))};b.preventDefault();if((h&&!j.collapsible)||(this._trigger("beforeActivate",b,i)===false)){return}j.active=c?false:this.headers.index(f);this.active=h?a():f;this._toggle(i);e.removeClass("coral-accordion-header-active coral-state-active");if(j.icons){e.children(".coral-accordion-header-icon").removeClass(j.icons.activeHeader).addClass(j.icons.header)}if(!h){f.removeClass("coral-corner-all").addClass("coral-accordion-header-active coral-state-active coral-corner-top");if(j.icons){f.children(".coral-accordion-header-icon").removeClass(j.icons.header).addClass(j.icons.activeHeader)}f.next().addClass("coral-accordion-content-active")}},_toggle:function(d){var b=d.newPanel,c=this.prevShow.length?this.prevShow:d.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=b;this.prevHide=c;if(this.options.animate){this._animate(b,c,d)}else{c.hide();b.show();this._toggleComplete(d)}c.attr({"aria-hidden":"true"});c.prev().attr("aria-selected","false");if(b.length&&c.length){c.prev().attr({tabIndex:-1,"aria-expanded":"false"})}else{if(b.length){this.headers.filter(function(){return a(this).attr("tabIndex")===0}).attr("tabIndex",-1)}}b.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(b,j,f){var i,h,e,g=this,k=0,l=b.length&&(!j.length||(b.index()<j.index())),d=this.options.animate||{},m=l&&d.down||d,c=function(){g._toggleComplete(f)};if(typeof m==="number"){e=m}if(typeof m==="string"){h=m}h=h||m.easing||d.easing;
e=e||m.duration||d.duration;if(!j.length){return b.animate(this.showProps,e,h,c)}if(!b.length){return j.animate(this.hideProps,e,h,c)}i=b.show().outerHeight();j.animate(this.hideProps,{duration:e,easing:h,step:function(n,o){o.now=Math.round(n)}});b.hide().animate(this.showProps,{duration:e,easing:h,complete:c,step:function(n,o){o.now=Math.round(n);if(o.prop!=="height"){k+=o.now}else{if(g.options.heightStyle!=="content"){k=0}}}})},_toggleComplete:function(c){var b=c.oldPanel;b.removeClass("coral-accordion-content-active").prev().removeClass("coral-corner-top").addClass("coral-corner-all");if(b.length){b.parent()[0].className=b.parent()[0].className}this._trigger("onActivate",null,c)}})}));

/*!
 * 组件库4.0： 窗体
 *
 * 依赖JS文件:
 *	jquery.coral.core.js
 *	jquery.coral.component.js
 *	jquery.coral.mouse.js
 *  jquery.coral.button.js
 *	jquery.coral.draggable.js
 *	jquery.coral.position.js
 *	jquery.coral.resizable.js
 */
(function(c,d){var a={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},b={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},e=null;c.component("coral.dialog",{version:"4.0.1",castProperties:["buttons"],options:{appendTo:"body",autoOpen:true,buttons:[],closeOnEscape:true,closeText:"关闭",closeButtonClass:"cui-icon-cross2",closable:true,loadtext:"加载中，请耐心等候 ...",maximumText:"最大化",maximizable:false,maximized:false,restoreWidth:200,restoreHeight:200,dialogClass:"",iframePanel:false,draggable:true,hide:null,height:"auto",percent:false,manualResize:false,maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,zIndex:null,timeOut:0,position:{my:"center",at:"center",of:window,collision:"fit",using:function(g){var f=c(this).css(g).offset().top;if(f<0){c(this).css("top",g.top-f)}}},resizable:true,show:null,title:null,subTitle:null,type:null,wtype:"dialog",message:null,width:300,url:"",reLoadOnOpen:false,postData:[],asyncType:"post",beforeClose:null,onCreate:null,onClose:null,onDrag:null,onDragStart:null,onDragStop:null,onFocus:null,onLoad:null,onLoadError:null,onOpen:null,onResize:null,onResizeStart:null,onResizeStop:null,onConfirm:null,onCancel:null,focusInput:false},_create:function(){var g=this;var f=/^(\d|[1-9]\d|100)%$/;if(f.test(this.options.height)){this.options.percent=this.options.height;this.options.height=this._percentToPx()}if(c.inArray(this.options.wtype,["dialog","message","alert","confirm"])<0){this.options.wtype="dialog"}if(this.options.wtype!=="dialog"){this.options.minHeight=null}this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};
this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this.originalsubTitle=this.element.attr("subTitle");this.options.subTitle=this.options.subTitle||this.originalsubTitle;this._createWrapper();var h=this.options.isMessage?"alert-box":"coral-dialog-content";this.element.show().removeAttr("title").addClass(h+" coral-component-content").appendTo(this.uiDialog);if(this.options.wtype!=="dialog"){this.uiDialog.addClass("coral-messager")}switch(this.options.wtype){case"alert":this._createTitlebar();this._createButtonPanel();break;case"message":break;case"confirm":this._createTitlebar();this._createButtonPanel();break;case"dialog":this._createTitlebar();this._createButtonPanel()}if(this.options.draggable&&c.fn.draggable){this._makeDraggable()}if(this.options.resizable&&c.fn.resizable){this._makeResizable()}this._isOpen=false;this._trackFocus()},_init:function(){if(this.options.autoOpen){this.open()}},_appendTo:function(){var f=this.options.appendTo;if(typeof f=="string"&&f=="parent"){return this.originalPosition.parent}if(f&&(f.jquery||f.nodeType)){return c(f)}return this.document.find(f||"body").eq(0)},forceDestroy:function(){var f=this;this._destroy(true)},_destroy:function(h){var g,f=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("coral-dialog-content coral-component-content").css(this.originalCss).detach();this.uiDialog.stop(true,true).remove();if(this.options.iframePanel){this.iframePanel.stop(true,true).remove()}if(!h){if(this.originalTitle){this.element.attr("title",this.originalTitle)}g=f.parent.children().eq(f.index);if(g.length&&g[0]!==this.element[0]){g.before(this.element)}else{f.parent.append(this.element)}}},component:function(){return this.uiDialog},disable:c.noop,enable:c.noop,close:function(j){var i,h=this,g,f=this.originalPosition;if(this.options.reLoadOnOpen){this.loaded=false
}if(!this._isOpen||this._trigger("beforeClose",j)===false){return}if(h.options.destroyOnClose){h.element.html("")}if(h.options.url!=""&&h.options.reLoadOnOpen&&h.options.autoDestroy){h.element.html("")}this._hide(this.uiDialog,this.options.hide,function(){g=f.parent.children().eq(f.index);if(g.length&&g[0]!==h.element[0]){g.before(h.uiDialog)}else{f.parent.append(h.uiDialog)}h._isOpen=false;h._focusedElement=null;h._destroyOverlay();h._untrackInstance();if(c.inArray(h.options.wtype,["dialog","alert","confirm"])>-1){if(h.opener.length&&h.opener[0].tagName.toLowerCase()!="object"&&!h.opener.filter(":focusable").focus().length){try{i=h.document[0].activeElement;if(i&&i.nodeName.toLowerCase()!=="body"){c(i).blur()}}catch(k){}}}if("dialog"!==h.options.wtype){h.element.remove()}h._trigger("onClose",j)});if(this.options.iframePanel){this.iframePanel.hide()}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(j,g){var i=false,f=this.uiDialog.siblings(".coral-front:visible").map(function(){return +c(this).css("z-index")}).get(),h=Math.max.apply(null,f);if(h>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",h+1);if(this.options.iframePanel){this.iframePanel.css("z-index",h+1)}i=true}if(i&&!g){this._trigger("onFocus",j)}return i},open:function(){var h=this,g={panel:h.element};this.uiDialog.appendTo(this._appendTo());var i=this.options.url&&!h.loaded;if(i){c(h.element).loading({position:"overlay",text:"加载中，请耐心等候！"});h.loaded=true;c.ajax({url:this.options.url,type:this.options.asyncType,dataType:"html",data:this.options.postData,success:function(k,j,l){c(h.element).loading("hide");h.element.html(k);c(h.element).loading({text:"渲染中，请耐心等候！",position:"overlay"});if(c.coral.openTag==true){c.parser.parse(h.element)}c(h.element).loading("hide");h._trigger("onLoad",null,g);c.coral.refreshAllComponent(h.element)},error:function(l,j,k){h._trigger("onLoadError",null,[{xhr:l,st:j,err:k}])},beforeSend:function(k,j){}})}e=null;if(this._isOpen){if(this._moveToTop()){if(c.inArray(h.options.wtype,["dialog","alert","confirm"])>-1){this._focusTabbable()
}}return}this._isOpen=true;this.opener=c(this.document[0].activeElement);this._size();this._position();this._createOverlay();this._moveToTop(null,true);if(this.overlay){this.overlay.css("z-index",this.uiDialog.css("z-index")-1);if(this.options.iframePanel){this.overlay.css("z-index",this.iframePanel.css("z-index")-1)}}this._show(this.uiDialog,this.options.show,function(){if(c.inArray(h.options.wtype,["dialog","alert","confirm"])>-1){h._focusTabbable()}if(!i){c.coral.refreshAllComponent(h.element)}if(h.options.iframePanel){h.iframePanel.show();h.iframePanel.css("width",h.uiDialog.outerWidth())}h._trigger("onFocus")});this._makeFocusTarget();this._trigger("onOpen");if(!isNaN(this.options.timeOut)&&this.options.timeOut>0){e=setTimeout(f,h.options.timeOut);this.uiDialog.hover(function(){if(e){clearTimeout(e)}},function(){e=setTimeout(f,h.options.timeOut)})}function f(){h.close()}},_focusTabbable:function(){var f=this._focusedElement;if(this.options.focusInput===true){this._focusFirst();return}if(!f){f=this.element.find("[autofocus]")}if(!f.length){f=this.element.find(":tabbable")}if(!f.length&&this.uiDialogButtonPane){f=this.uiDialogButtonPane.find(":tabbable")}if(!f.length&&this.uiDialogTitlebarClose){f=this.uiDialogTitlebarClose.filter(":tabbable")}if(!f.length){f=this.uiDialog}f.eq(0).focus()},_findFields:function(){return c.coral.findComponent(".ctrl-form-element",this.element)},_focusFirst:function(){var j=this,g=this._findFields();for(var h in g){var f=g[h];if(g[h] instanceof Array){if(true==c(f[0].element)[f[0].name]("focus")){return}}else{if(f.focus&&true==f.focus()){return}}}},_keepFocus:function(f){function g(){var i=this.document[0].activeElement,h=this.uiDialog[0]===i||c.contains(this.uiDialog[0],i);if(!h){this._focusTabbable()}}f.preventDefault();g.call(this);this._delay(g)},_createWrapper:function(){this.uiDialog=c("<div>").addClass("coral-dialog coral-component coral-component-content coral-corner-all coral-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this.element.parent());
if(this.options.iframePanel){this.iframePanel=c("<iframe class='coral-dialog-iframePanel' style='position:absolute;'></iframe>").hide().appendTo(this._appendTo())}if(this.options.zIndex){this.uiDialog.css("z-index",this.options.zIndex);if(this.options.iframePanel){this.iframePanel.css("z-index",this.options.zIndex)}}this._on(this.uiDialog,{keydown:function(h){if(this.options.closeOnEscape&&!h.isDefaultPrevented()&&h.keyCode&&h.keyCode===c.coral.keyCode.ESCAPE){h.preventDefault();this.close(h);return}if(h.keyCode!==c.coral.keyCode.TAB||h.isDefaultPrevented()){return}var g=this.uiDialog.find(":tabbable"),i=g.filter(":first"),f=g.filter(":last");if((h.target===f[0]||h.target===this.uiDialog[0])&&!h.shiftKey){this._delay(function(){i.focus()});h.preventDefault()}else{if((h.target===i[0]||h.target===this.uiDialog[0])&&h.shiftKey){this._delay(function(){f.focus()});h.preventDefault()}}},mousedown:function(f){if(this._moveToTop(f)){this._focusTabbable()}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})}},_createTitlebar:function(){var g=this.options,f;this.uiDialogTitlebar=c("<div>").addClass("coral-dialog-titlebar coral-component-header coral-corner-all coral-helper-clearfix").prependTo(this.uiDialog);this.uiDialogToolbar=c("<div>").addClass("coral-dialog-toolbar coral-corner-all coral-helper-clearfix").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebar,{mousedown:function(h){if(!c(h.target).closest(".coral-dialog-toolbar-close")&&!c(h.target).closest(".coral-dialog-toolbar-maximum")){this.uiDialog.focus()}}});if(this.options.maximizable){this.uiDialogTitlebarMaximum=c("<button type='button'></button>").button({label:this.options.maximumText,icons:{primary:"cui-icon-enlarge7"},text:false}).addClass("coral-dialog-toolbar-maximum").appendTo(this.uiDialogToolbar);this._on(this.uiDialogTitlebarMaximum,{click:function(h){h.preventDefault();if(!this.uiDialog.hasClass("coral-dialog-maximum")){this.maximize()
}else{this.restore()}c.coral.refreshAllComponent(this.element);this._trigger("onMaximize",null,{width:c(window).outerWidth(),height:c(window).outerHeight()})}})}if(this.options.closable){this.uiDialogTitlebarClose=c("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:this.options.closeButtonClass},text:false}).addClass("coral-dialog-toolbar-close").appendTo(this.uiDialogToolbar);this._on(this.uiDialogTitlebarClose,{click:function(h){var i=c(h.target);i.removeClass("coral-state-hover");h.preventDefault();this.close(h)}})}f=c("<span>").uniqueId().addClass("coral-dialog-title").prependTo(this.uiDialogTitlebar);this._title(f);uiDialogsubTitle=c("<span>").uniqueId().addClass("coral-dialog-subTitle").prependTo(this.uiDialogTitlebar);this._subTitle(uiDialogsubTitle);this.uiDialog.attr({"aria-labelledby":f.attr("id")});if(this.options.maximizable&&this.options.maximized){this.maximize();c.coral.refreshAllComponent(this.element)}},maximize:function(g){var f=this.options;f.restoreHeight=f.height;f.restoreWidth=f.width;c(this.element).dialog("option","width",c(window).width());c(this.element).dialog("option","height",c(window).height());this.uiDialog.addClass("coral-dialog-maximum");this.uiDialogTitlebarMaximum.find(".cui-icon-enlarge7").removeClass("cui-icon-enlarge7").addClass("cui-icon-shrink7");if(this.options.iframePanel){this.iframePanel.css({width:c(window).width(),height:c(window).height()})}},minimize:function(){},restore:function(){var g=this,f=this.options;c(g.element).dialog("option","width",f.restoreWidth);c(g.element).dialog("option","height",f.restoreHeight);g.uiDialog.removeClass("coral-dialog-maximum");if(this.options.iframePanel){this.iframePanel.css({width:f.restoreWidth,height:f.restoreHeight});this.iframePanel.position(f.position)}g.uiDialogTitlebarMaximum.find(".cui-icon-shrink7").removeClass("cui-icon-shrink7").addClass("cui-icon-enlarge7")},_title:function(g){var f=c.coral.toFunction(this.options.titleFormat);if(!this.options.title){g.html("&#160;")
}if(f){g.html(f.call(this.element,this.options.title))}else{g.text(this.options.title)}},_subTitle:function(f){if(!this.options.subTitle){f.html("&#160;")}f.text(this.options.subTitle)},_createButtonPanel:function(){this.uiDialogButtonPane=c("<div>").addClass("coral-dialog-buttonpane coral-component-content coral-helper-clearfix");this.uiButtonSet=c("<div>").addClass("coral-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var j=this,i=this.options.buttons,f=c.noop,h=c.noop;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(c.isEmptyObject(i)){i={}}if((c.isArray(i)&&!i.length)){this.uiDialog.removeClass("coral-dialog-buttons");return}var g=true;c.each(i,function(k,l){var m,o,n="coral-btn-primary";l=c.isFunction(l)?{click:l,text:k}:l;l=c.extend({type:"button"},l);m=l.click;l.click=function(){m.apply(j.element[0],arguments)};o={icons:l.icons,icons:l.cls,countdown:l.countdown,text:l.showText};if(l.id){o.id=l.id}if(g){o=c.extend({},o,{cls:n+" "+l.cls})}else{o=c.extend({},o,{cls:l.cls})}delete l.icons;delete l.cls;delete l.showText;c("<button></button>",l).button(o).appendTo(j.uiButtonSet);g=false});this.uiDialog.addClass("coral-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var h=this,g=this.options;function f(i){return{position:i.position,offset:i.offset}}this.uiDialog.draggable({cancel:".coral-dialog-content, .coral-dialog-toolbar-close",handle:".coral-dialog-titlebar",containment:"document",start:function(i,j){c(this).addClass("coral-dialog-dragging");h._blockFrames();if(h.options.iframePanel){h.iframePanel.css(j.position)}h._trigger("onDragStart",i,f(j))},drag:function(i,j){if(h.options.iframePanel){h.iframePanel.css(j.position)}h._trigger("onDrag",i,f(j))},stop:function(i,j){var l=j.offset.left-h.document.scrollLeft(),k=j.offset.top-h.document.scrollTop();g.position={my:"left top",at:"left"+(l>=0?"+":"")+l+" top"+(k>=0?"+":"")+k,of:h.window};c(this).removeClass("coral-dialog-dragging");
if(h.options.iframePanel){h.iframePanel.position(g.position)}h._unblockFrames();h._trigger("onDragStop",i,f(j))}})},_makeResizable:function(){var k=this,i=this.options,j=i.resizable,f=this.uiDialog.css("position"),h=typeof j==="string"?j:"n,e,s,w,se,sw,ne,nw";function g(l){return{originalPosition:l.originalPosition,originalSize:l.originalSize,position:l.position,size:l.size}}this.uiDialog.resizable({cancel:".coral-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:h,start:function(l,m){c(this).addClass("coral-dialog-resizing");k.manualResize=true;if(k.options.iframePanel){k.iframePanel.css(m.position);k.iframePanel.css(m.size)}k._blockFrames();k._trigger("onResizeStart",l,g(m))},resize:function(l,m){if(k.options.iframePanel){k.iframePanel.css(m.position);k.iframePanel.css(m.size)}c.coral.refreshAllComponent(k.element);k._trigger("onResize",l,g(m))},stop:function(l,m){var p=k.uiDialog.offset(),o=p.left-k.document.scrollLeft(),n=p.top-k.document.scrollTop();i.height=k.uiDialog.height();i.width=k.uiDialog.width();i.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" top"+(n>=0?"+":"")+n,of:k.window};c(this).removeClass("coral-dialog-resizing");if(k.options.iframePanel){k.iframePanel.position(i.position);k.iframePanel.position(m.size)}k._unblockFrames();k._trigger("onResizeStop",l,g(m))}}).css("position",f)},_trackFocus:function(){this._on(this.component(),{focusin:function(f){this._makeFocusTarget();this._focusedElement=c(f.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var g=this._trackingInstances(),f=c.inArray(this,g);if(f!==-1){g.splice(f,1)}},_trackingInstances:function(){var f=this.document.data("coral-dialog-instances");if(!f){f=[];this.document.data("coral-dialog-instances",f)}return f},_minHeight:function(){var f=this.options;return f.height==="auto"?f.minHeight:Math.min(f.minHeight,f.height)
},_position:function(){var g=this.options.position,j=[0,0],h=[],i,f;if(g){if(typeof g==="string"||(typeof g==="object"&&"0" in g)){h=g.split?g.split(" "):[g[0],g[1]];if(h.length===1){h[1]=h[0]}c.each(["left","top"],function(l,k){if(+h[l]===h[l]){j[l]=h[l];h[l]=k}});g={my:h[0]+(j[0]<0?j[0]:"+"+j[0])+" "+h[1]+(j[1]<0?j[1]:"+"+j[1]),at:h.join(" ")}}g=c.extend({},c.coral.dialog.prototype.options.position,g)}else{g=c.coral.dialog.prototype.options.position}f=this.uiDialog.is(":visible");if(!f){this.uiDialog.show()}if(this.options.iframePanel){i=this.iframePanel.is(":visible");if(!i){this.iframePanel.show()}}if(this.options.queue){c("#coral-msgBox").position(g)}else{this.uiDialog.position(g);if(this.options.iframePanel){this.iframePanel.position(g)}}if(!f){this.uiDialog.hide()}if(this.options.iframePanel){if(!i){this.iframePanel.hide()}}},_setOptions:function(h){var i=this,g=false,f={};c.each(h,function(j,k){i._setOption(j,k);if(j in a){g=true}if(j in b){f[j]=k}});if(g&&!c(i.element).is(":hidden")){this._size();this._position()}if(this.uiDialog.is(":data(coral-resizable)")){this.uiDialog.resizable("option",f)}},_setOption:function(h,i){var g,j,f=this.uiDialog;if(h==="dialogClass"){f.removeClass(this.options.dialogClass).addClass(i)}if(h==="disabled"){return}this._super(h,i);if(h==="appendTo"){this.uiDialog.appendTo(this._appendTo())}if(h==="buttons"){this._createButtons()}if(h==="maximumText"){this.uiDialogTitlebarMaximum.button({label:""+i})}if(h==="closeText"){this.uiDialogTitlebarClose.button({label:""+i})}if(h==="draggable"){g=f.is(":data(coral-draggable)");if(g&&!i){f.draggable("destroy");if(this.options.iframePanel){this.iframePanel.draggable("destroy")}}if(!g&&i){this._makeDraggable()}}if(h==="position"){this._position()}if(h==="resizable"){j=f.is(":data(coral-resizable)");if(j&&!i){f.resizable("destroy");if(this.options.iframePanel){this.iframePanel.resizable("destroy")}}if(j&&typeof i==="string"){f.resizable("option","handles",i)}if(!j&&i!==false){this._makeResizable()
}}if(h==="title"){this._title(this.uiDialogTitlebar.find(".coral-dialog-title"))}if(h==="subTitle"){this._subTitle(this.uiDialogTitlebar.find(".coral-dialog-subTitle"))}},_size:function(){var f,h,j,g=this.options;this.element.hide().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(g.minWidth>g.width){g.width=g.minWidth}f=this.uiDialog.css({height:"auto",width:g.width}).outerHeight();this.element.show();h=Math.max(0,g.minHeight-f);j=typeof g.maxHeight==="number"?Math.max(0,g.maxHeight-f):"none";if(g.height==="auto"){this.element.css({minHeight:h,maxHeight:j,height:"auto"})}else{var i=/^(\d|[1-9]\d|100)%$/;if(i.test(this.options.height)){this.options.percent=this.options.height;this.element.height(Math.max(0,this._percentToPx()-f))}else{this.element.height(Math.max(0,this.options.height-f))}}if(this.uiDialog.is(":data(coral-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}if(this.options.iframePanel){this.iframePanel.css({width:this.uiDialog.outerWidth(),height:this.uiDialog.outerHeight()})}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var f=c(this);return c("<div>").css({position:"absolute",width:f.outerWidth(),height:f.outerHeight()}).appendTo(f.parent()).offset(f.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_allowInteraction:function(f){if(c(f.target).closest(".coral-dialog").length){return true}return !!c(f.target).closest(".coral-datepicker").length},_createOverlay:function(){if(!this.options.modal){return}var f=true;this._delay(function(){f=false});if(!this.document.data("coral-dialog-overlays")){this._on(this.document,{focusin:function(g){if(f){return}if(!this._allowInteraction(g)){g.preventDefault();var h=this.document.find(".coral-dialog:visible:last .coral-dialog-content").data(this.componentFullName);if(h&&h._focusTabbable){}}}})}this.overlay=c("<div>").addClass("coral-component-overlay coral-front").appendTo(this._appendTo());
if(this.options.appendTo!="body"){this.overlay.css({position:"relative"})}this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("coral-dialog-overlays",(this.document.data("coral-dialog-overlays")||0)+1)},_destroyOverlay:function(){if(!this.options.modal){return}if(this.overlay){var f=this.document.data("coral-dialog-overlays")-1;if(!f){this.document.unbind("focusin").removeData("coral-dialog-overlays")}else{this.document.data("coral-dialog-overlays",f)}this.overlay.remove();this.overlay=null}},buttonPanel:function(){return this.uiButtonSet},hide:function(){this._isOpen=false;this.component().hide()},_percentToPx:function(){var i=this,f=this.options,h=f.percent,g=c(window);maxHeight=g.height()*parseInt(h.substring(0,h.length-1))/100;return maxHeight},refresh:function(){var i=this,f=this.options,h=f.percent;var g=/^(\d|[1-9]\d|100)%$/;if(g.test(h)&&!f.manualResize){maxHeight=i._percentToPx();f.height=maxHeight;setTimeout(function(){c(i.element).dialog("option","height",maxHeight)},0)}else{}}})}(jQuery));

/*!
 * 组件库4.0： 消息提示窗
 *
 * 依赖JS文件:
 *	jquery.coral.core.js
 *	jquery.coral.component.js
 *	jquery.coral.mouse.js
 *  jquery.coral.button.js
 *	jquery.coral.draggable.js
 *	jquery.coral.position.js
 *	jquery.coral.resizable.js
 *	jquery.coral.dailog.js
 */
(function(a,b){a.messager={loading:{show:function(g){if(!g instanceof jQuery){g=a(g)}var f=g.attr("data-loading-id");if(!f){f=new Date().getTime();g.attr("data-loading-id","loading_"+f)}var h=a("<div id='loading_"+f+"' class='coral-loading'><div class='coral-loading-zone'></div><span class='coral-loading-text'>加载中，请稍后...</span></div>");var d=h.find(".coral-loading-zone");var c=h.find(".coral-loading-text");h.outerWidth(g.outerWidth());h.outerHeight(g.outerHeight());d.outerWidth(g.outerWidth());d.outerHeight(g.outerHeight());h.position({my:"left top",at:"left top",of:g});a(document.body).append(h);var e=(h.outerWidth()-c.outerWidth())/2;c.css({left:e})},hide:function(d){if(!d instanceof jQuery){d=a(d)}var c=d.attr("data-loading-id");if(!c){return}a("#"+c).remove();d.removeAttr("data-loading-id")}},_isType:function(f){var h="",e="",c,g=f.iconCls,i=a.inArray(f.cls,["info","success","warning","error","question","danger","alert"]);if(f.cls&&i>-1){f.type=f.cls}if(!f.type){f.type="info"}var d={warning:"cui-icon-warning2",danger:"cui-icon-cancel-circle2",error:"cui-icon-cancel-circle2",success:"cui-icon-checkmark4",alert:"cui-icon-notification2",info:"cui-icon-notification2",confirm:"cui-icon-question4"};if(f.type=="alert"){e="coral-control-info ";c=d.alert}else{if(f.type=="success"){e="coral-control-success ";c=d.success}else{if(f.type=="danger"){e="coral-control-danger ";c=d.danger}else{if(f.type=="info"){e="coral-control-info ";c=d.info}else{if(f.type=="confirm"){e="coral-control-question ";c=d.confirm}else{if(f.type=="warning"){e="coral-control-warning ";c=d.warning}}}}}}if(typeof g==="boolean"){h=g===true?h="<span class='icon-control "+e+c+"'></span>":""}if(typeof g==="string"){h="<span class='icon-control "+e+f.iconCls+"'></span>"
}return h},_init:function(i,f){if(f.queue===true){if(!a("#coral-msgBox").length){a("<div id='coral-msgBox' class='queueMessage'></div>").appendTo("body")}f.appendTo="#coral-msgBox"}var h="",e="",d,g=f.iconCls;if(f.wtype=="messageBox"){i=a("<div class='coral-messagerBox'>"+(f.iconCls||"")+"<span class='coral-messagerBox-content'>"+f.message+"</span></div>").appendTo("body")}else{if(f.wtype=="message"){h=this._isType(f);var c=g===false?"":"hasIcon ";i=a("<div class='"+c+f.type+"' role='alert'>"+h+"<span class='coral-alert-content'>"+f.message+"</span></div>").appendTo("body")}else{if(typeof f.message!=="undefined"&&f.wtype!="message"){h=this._isType(f);i=a("<div class='coral-messager-body'><span class='coral-messager-box'><span class='hasIcon coral-messager-box-content'>"+h+"<span class='coral-messager-content'>"+f.message+"</span></span></span></div>").appendTo("body")}}}return i},message:function(d,c,f){if(typeof d==="string"||typeof d==="boolean"||typeof d==="number"){d={message:d.toString(),wtype:"message"}}if(!f&&typeof c==="function"){f=c;c="info"}if(!c||a.inArray(c,["info","success","warning","error","question","danger","alert"])<0){c="info"}if(c=="error"){c="danger"}d=d||{};d=a.extend(true,{autoOpen:true,title:"消息提示",isMessage:true,show:"slideDown",hide:"slideUp",modal:false,queue:false,onClose:f,draggable:false,resizable:false,width:"auto",maxWidth:600,wtype:"message",type:c,iconCls:true,timeOut:2999},a.message.defaults,a.messageQueue.defaults,d);var e=a.messager._init(e,d);e.css("max-width",d.maxWidth+"px");e.dialog(d);if(d.wtype==="message"){a.messager.messageInstances++;a.messager.messageHeights.push(e.outerHeight())}},messageBox:function(c,e){if(typeof c==="string"||typeof c==="boolean"||typeof c==="number"){c={message:c.toString(),wtype:"messageBox"}}c=c||{};c=a.extend(true,{autoOpen:true,title:"消息提示",show:"slideDown",hide:"slideUp",isMessage:true,modal:false,draggable:false,resizable:false,width:200,wtype:"messageBox",timeOut:2999},a.messageBox.defaults,c);
var d=a.messager._init(d,c);d.dialog(c);return d},messageQueue:function(e,f,g){var d="信息提示";var c={};if(typeof e!=="string"){c=e||"";c.queue=true;g=c.callback;f=c.title||d}if(typeof f==="function"){g=f;f=d}if(f===b){f=d}c=a.extend(true,{iconCls:true,queue:true,message:e.toString(),title:f.toString()},a.messageQueue.defaults,c);a.messager.message(c);c.wtype="message"},messageToast:function(f,g,h){var d="信息提示";var c={};if(typeof f!=="string"){c=f||"";h=c.callback;g=c.title||d}if(typeof g==="function"){h=g;g=d}if(g===b){g=d}c=a.extend(true,{autoOpen:true,modal:false,show:"slideDown",hide:"slideUp",message:f.toString(),title:g.toString(),isMessage:true,draggable:false,resizable:false,iconCls:true,width:"auto",wtype:"message",timeOut:2999},a.messageToast.defaults,c);c.wtype="message";var e=a.messager._init(e,c);e.dialog(c);return e},alert:function(f,g,h){var d="信息提示";var c={};if(typeof f!=="string"){c=f||"";h=c.callback;g=c.title||d}if(typeof g==="function"){h=g;g=d}if(g===b){g=d}c=a.extend(true,{modal:true,message:f.toString(),timeOut:0,title:g.toString(),isMessage:true,width:300,icons:"cui-icon-warning2",iconCls:true,wtype:"alert"},a.alert.defaults,c);if((c.timeOut<=0||isNaN(c.timeOut))&&!c.buttons){c.buttons={"确定":function(){a(this).dialog("close");if(typeof h==="function"){h(true)}return true}}}c.wtype="alert";c.type="alert";var e=a.messager._init(e,c);e.dialog(c);return e},danger:function(f,g,h){var d="错误提示";var c={};if(typeof f!=="string"){c=f||"";h=c.callback;g=c.title||d}if(typeof g==="function"){h=g;g=d}if(g===b){g=d}c=a.extend(true,{modal:true,message:f.toString(),timeOut:0,title:g.toString(),isMessage:true,width:300,iconCls:true,icons:"cui-icon-cancel-circle2",wtype:"danger"},a.danger.defaults,c);if((c.timeOut<=0||isNaN(c.timeOut))&&!c.buttons){c.buttons={"确定":function(){a(this).dialog("close");if(typeof h==="function"){h(true)}return true}}}c.wtype="danger";c.type="danger";var e=a.messager._init(e,c);e.dialog(c);return e},success:function(f,g,h){var d="Success";
var c={};if(typeof f!=="string"){c=f||"";h=c.callback;g=c.title||d}if(typeof g==="function"){h=g;g=d}if(g===b){g=d}c=a.extend(true,{modal:true,message:f.toString(),timeOut:0,title:g.toString(),isMessage:true,width:300,iconCls:true,icons:"cui-icon-checkmark4",wtype:"success"},a.success.defaults,c);if((c.timeOut<=0||isNaN(c.timeOut))&&!c.buttons){c.buttons={"确定":function(){a(this).dialog("close");if(typeof h==="function"){h(true)}return true}}}c.wtype="success";c.type="success";var e=a.messager._init(e,c);e.dialog(c);return e},confirm:function(i,g,h){var k="确定",c="取消",f={},j={},e="信息提示";if(typeof i!=="string"){j=i||"";h=j.callback;g=j.title||e;k=j.okText?j.okText:k;c=j.cancelText?j.cancelText:c}if(typeof g==="function"){h=g;g=e}if(g===b){g=e}j=a.extend(true,{autoOpen:true,title:"确认提示",message:i.toString(),title:g.toString(),iconCls:true,isMessage:true,width:300,show:"slideDown",modal:true,icons:"cui-icon-question4",buttons:f},a.confirm.defaults,j);f[k]=function(){a(this).dialog("close");if(typeof h==="function"){h(true)}return false};f[c]=function(){a(this).dialog("close");if(typeof h==="function"){h(false)}return false};j.type="confirm";j.wtype="confirm";var d=a.messager._init(d,j);d.dialog(j);return d}};a.messager.messageInstances=0;a.messager.messageHeights=[];a.message=a.messager.message;a.messageQueue=a.messager.messageQueue;a.messageBox=a.messager.messageBox;a.messageToast=a.messager.messageToast;a.alert=a.messager.alert;a.danger=a.messager.danger;a.success=a.messager.success;a.confirm=a.messager.confirm;a.message.defaults={position:{my:"top",at:"top top+50",of:window}};a.messageQueue.defaults={position:{my:"top",at:"top top+50",of:window}};a.messageBox.defaults={position:{my:"right bottom",at:"right bottom",of:window}};a.messageToast.defaults={position:{my:"top",at:"top top+50",of:window}};a.alert.defaults={position:{my:"center",at:"center top+200",of:window}};a.danger.defaults={position:{my:"center",at:"center top+200",of:window}};a.success.defaults={position:{my:"center",at:"center top+200",of:window}};
a.confirm.defaults={position:{my:"center",at:"center top+200",of:window}}}(jQuery));

(function(a,b){a.component("coral.form",{version:"4.0.2",options:{disabled:null,ajaxSubmit:false,novalidate:false,context:"",separator:",",container:"tooltip",requires:null,excluded:[":disabled",":hidden",":not(:visible)"],errTipsType:"first",onCreate:null,url:"",postData:{},target:"",focusFirst:false,showRequiredMark:null,hideRequiredMark:null,onChange:null,triggers:{},exclude:false},_create:function(){var c=this;this._initElement();this._bindEvents();a.data(this.element,"modifiedData",{});a.data(this.element,"originalData",this._getForm());this.element.validate({excluded:this.options.excluded,errorMode:this.options.errorMode,showRequiredMark:this.options.showRequiredMark,hideRequiredMark:this.options.hideRequiredMark});if(this.options.focusFirst){this._focusFirst()}this.element.append(a("<input type='text' style='display:none;'></input>"))},_getFields:function(){return this.element.find(".ctrl-form-element")},_getFieldType:function(e){var c=a(e)[0].className.split(" "),d="";for(var f in c){if(c[f].indexOf("coral-validation-")>=0){d=c[f].substr(c[f].indexOf("coral-validation-")+17);return d}}return null},_bindEvents:function(){var e=this,d=this.options,c=this._getFields();c.each(function(f,i){var h=a(i);var g=e._getFieldType(h);h.off(".formonchange").on(g+"onchange.formonchange",function(l,n){if(l.type.indexOf("onchange")!=-1){var k=a(this)[g]("option","name"),m=a(this)[g]("getValue"),j={};j[k]=m;e.updateCoralData(j);e._trigger("onChange",null,{field:this,type:g})}})})},_initElement:function(){var c=this.options;this.element.addClass(c.cls);this.element.appendTo(this.uiBorder);this.element.addClass("coral-form-default");if(c.id!==""){this.element.attr("id",c.id)}if(c.name!==""){this.element.attr("name",c.name)}if(c.action!==""){this.element.attr("action",c.action)}if(c.method!==""){this.element.attr("method",c.method)}if(c.target!==""){this.element.attr("target",c.target)}if(c.context!=""){this.element.attr("context",c.context)}else{this.element.attr("context","body")
}},initRequires:function(){this._initRequires()},_initRequires:function(){var c=this,d=this.element.find(a("[class*='coral-validation-']")).parent(":visible").find(a("[class*='coral-validation-']"));d.each(function(){var e=this.className,i="",g=e.split(" ");for(var f in g){if(g[f].indexOf("coral-validation-")>=0){i=g[f].substr(g[f].indexOf("coral-validation-")+17);break}}var h=a(this)[i]("option","required");if(typeof h==="boolean"&&h){if(i=="datepicker"){a(this)[i]("component",a(this)).parent("td").prev().addClass("require")}else{a(this)[i]("component").parent("td").prev().addClass("require")}}})},_getCoralType:function(c){var e=a(c)[0].className.split(" "),f="";for(var d in e){if(e[d].indexOf("coral-validation-")>=0){f=e[d].substr(e[d].indexOf("coral-validation-")+17);return f}}},showRequire:function(c){var d=a(c),e=this._getCoralType(c);d[e]("component").parent("td").prev().addClass("require")},hideRequire:function(c){var d=a(c),e=this._getCoralType(c);d[e]("component").parent("td").prev().removeClass("require")},_setOption:function(c,d){if(c=="id"||c=="name"){return}this._super(c,d);return},saveOriginalCoralData:function(c){var d=this;a.each(c,function(e,f){d._updateCoralData("original",e,f)});return},updateCoralData:function(c){var d=this;a.each(c,function(e,f){d._updateCoralData("modified",e,f)});return},_updateCoralData:function(c,d,f){var e=a.data(this.element,c+"Data");e[d]=f;a.data(this.element,c+"Data",e);return},serialize:function(){return a(this.element).serialize()},serializeArray:function(){return a(this.element).serializeArray()},modifiedData:function(c){if((typeof c=="boolean"&&c)){return this._getSerialize("modified")}else{return a.data(this.element,"modifiedData")}},originalData:function(c){if((typeof c=="boolean"&&c)){return this._getSerialize("original")}else{return a.data(this.element,"originalData")}},formData:function(){return this._getForm()},getData:function(){return this.formData()},_getSerialize:function(d){var e=a.data(this.element,d+"Data"),c="";
a.each(e,function(g,h){if(typeof h!="Object"){c+=g+"="+h+"&"}else{for(var f in h){c+=g+"="+h[f]+"&"}}});return c.substr(0,c.length-1)},_getForm:function(){var e=this,f={},d={},c=a(this.element).serializeArray();a(this.element).find(".ctrl-form-element").each(function(){var h=a(this).attr("component-role"),g=a(this)[h]("option","name");if(g){if(h!=="checkbox"&&h!=="radio"){if(f[g]){f[g]=f[g]+e.options.separator+a(this)[h]("getValue")}else{f[g]=a(this)[h]("getValue")}}else{f[g]=a(this)[h]("getValue")}}});a(c).each(function(g,h){if(h.name){if(typeof(f[h.name])==="undefined"){if(d[h.name]){d[h.name]=d[h.name]+e.options.separator+h.value}else{d[h.name]=h.value}}}});a.extend(f,d);return f},_loadData:function(d){var c=this;this._updateData(d,"modified");this._updateData(d,"original");if(typeof d=="object"){a.each(d,function(e,f){if(!c._loadCoralData(e,f)){c._loadNormalData(e,f)}})}},_loadCoralData:function(j,h){var f=this;h=h==null?"":h;var l=f._getCoralFormData();var d=false;for(var e in l){var k=l[e];var c=k.coralType;switch(c){case"radio":if(j==k.name){d=true;if(k.el[c]("option","value")==h&&h!=null){k.el[c]("check")}else{k.el[c]("uncheck")}}break;case"radiolist":if(j==k.name){d=true;if(h==null){h=""}k.el[c]("setValue",h)}break;case"checkbox":if(j==k.name){d=true;if(h==null){h=[""]}if(typeof h!="object"){if(typeof h==="string"){h=h.split(f.options.separator)}else{h=[h]}}for(var g in h){if(k.el[c]("option","value")==h[g]){k.el[c]("check");break}else{k.el[c]("uncheck")}}}break;case"checkboxlist":if(j==k.name){d=true;if(j==k.name){if(h==null){h=""}k.el[c]("setValue",h)}}break;case"combobox":case"combotree":case"combogrid":if(j==k.name){d=true;if(typeof h!="object"){if(typeof h==="string"){h=h.split(f.options.separator)}else{h=[h]}}if(h!=null){k.el[c]("setValues",h)}}break;case"datepicker":if(j==k.name){d=true;if(h!=null){k.el[c]("option","value",h)}}break;case"autocomplete":case"autocompletetree":if(j==k.name){d=true;if(h!=null){k.el[c]("option","value",h)}}break;default:if(j==k.name){d=true;
if(h!=null){k.el[c]("option","value",h)}}break}}return d},_loadNormalData:function(e,g){var f=this,c=f._getNomalFormElements();for(var d in c){if(e==c[d].attr("name")){if(b!=c[d].attr("type")&&"radio"==c[d].attr("type")){if(g==c[d].attr("value")){c[d][0].checked=true}else{continue}}else{if(typeof g==="string"&&g.indexOf(f.options.separator)!=-1){g=g.split(f.options.separator)}a(f.element.find("[name="+e+"]")).val(g)}}}return},_getAllFromElements:function(){return this.element.find("[name]")},_getCoralFormData:function(){var c=[];this.element.find(".ctrl-form-element").each(function(){var g=a(this),e=null,f=0,d=["radio","checkbox","combobox","combotree","combogrid","datepicker","checkboxlist","radiolist","autocomplete","textboxlist","autocompletetree"],h=g.attr("component-role");e=g[h]("option","name");if(null!=e){c.push({el:g,name:e,coralType:h})}});return c},_getCoralFormElements:function(){return this.element.find(".coral-form-element")},_getCoralNameJson:function(){var d=this,c={};d._getCoralFormElements().each(function(){var e=a(this).attr("component-role");a(this)[e]("option","name")&&(c[name]=e)});return c},_getNomalFormElements:function(){var e=this,c=[],d=e._getCoralNameJson();e._getAllFromElements().each(function(){if(!d[a(this).attr("name")]){c.push(a(this))}});return c},_updateData:function(e,c){var d=a.data(this.element,c+"Data");if(typeof e=="object"){a.each(e,function(f,g){if("original"==c&&typeof d[f]!="undefined"){d[f]=g}else{if("modified"==c&&typeof d[f]!="undefined"){delete d[f]}}})}},resetData:function(){this.reset()},getErrors:function(){var d=this.component().find(".coral-validate-error"),c=[];d.each(function(){var g=a(this).find(".ctrl-form-element"),f=a(g).attr("component-role"),e={};e.errorText=a(this).find(".coral-errorIcon").attr("data-errors");e.required=a(g)[f]("option","required");e.id=a(g)[f]("option","id");e.validType=a(g)[f]("option","validType");e.value=a(g)[f]("getValue");e.element=g[0];e.requiredMsg=a(g)[f]("option","requiredMsg")||a.validate.options.requiredMsg;
e.name=a(g)[f]("option","name");c.push(e)});return c},reset:function(){var c=this;a(this.element).find(".ctrl-form-element").each(function(d){var e=a(this).attr("component-role");a(this)[e]("reset")});a.data(this.element,"modifiedData",{})},_isExclud:function(c,d){if(!d){return false}var f=d.length;for(var e=0;e<f;e++){if("string"===typeof d[e]&&c.is(d[e])){return true}}return false},clear:function(d){var c={};if(d&&d.excluded&&d.excluded instanceof Array){for(var e in d.excluded){var f=d.excluded[e];c[f]=f}}a(this.element).find(".ctrl-form-element").each(function(g){var h=a(this).attr("component-role");if((a(this)[h]("option","readonly")&&c.readonly)||(a(this)[h]("option","isLabel")&&c.isLabel)||(a(this)[h]("option","disabled")&&c.disabled)){return}switch(h){case"radio":case"checkbox":a(this)[h]("uncheck");break;default:a(this)[h]("setValue","");break}});a.validate.clearErrors(this.element);a.data(this.element,"modifiedData",{})},load:function(c){var e=this,d={},f=[],g=false;if(typeof(c)!=="string"){d=c;if(d.data){f=d.data}else{if(d.url){c=d.url;g=true}else{f=c}}}else{g=true}if(g){a.ajax({url:c,data:a.extend(true,{},this.options.postData,d.postData),async:false,dataType:"json",success:function(h){e._loadData(h);e._trigger(a.isFunction(d.onLoad)?d.onLoad:"onLoad",null,[h])},error:function(){e._trigger("onLoadError",null,[])}})}else{this._loadData(f);this._trigger(a.isFunction(d.onLoad)?d.onLoad:"onLoad",null,[{content:f}])}},loadData:function(c){this.load(c)},submit:function(c){c=c||{};if(false==this._trigger(a.isFunction(c.onSubmit)?c.onSubmit:"onSubmit",null,[])){return false}if(this.options.ajaxSubmit){a.ajax({type:"post",url:a.extend(true,{},this.options.url,c.url),data:a.extend(true,{},this.options.postData,c.postData,this.formData),dataType:"json",success:function(d){this._trigger(a.isFunction(c.onSuccess)?c.onSuccess:"onSuccess",null,[{content:d}])},error:function(){}})}else{if(this.valid()){this.element.submit()}else{return false}}},valid:function(){if(this.options.novalidate){return true
}return this.element.validate("valid")},hideErrorTips:function(){a("div.coral-validate-state-error").remove()},_focusFirst:function(){},findFields:function(){return a.coral.findComponent(".ctrl-form-element",this.element)},setIsLabel:function(c){a.coral.setIsLabel(c,this.element)},setReadOnly:function(c){a.coral.setReadOnly(c,this.element)},refresh:function(g){var f,d=this.options,c=d.heightStyle,e=this.component().parent();if(c==="fill"){a.coral.fitParent(this.component(),true);f=e.height();this.component().siblings(":visible").each(function(){var i=a(this),h=i.css("position");if(h==="absolute"||h==="fixed"){return}f-=i.outerHeight(true)});this.element.height(Math.max(0,f-this.element.innerHeight()+this.element.height())).addClass("coral-scroll")}else{if(c==="auto"){this.element.height("")}}a.coral.refreshAllComponent(this.element)}})})(jQuery);

/*!
 * jQuery CORAL Tabs 4.0.1
 *
 *
 * Depends:
 *	jquery.coral.core.js
 *	jquery.coral.component.js
 */
(function(a,b){a.component("coral.tabs",{version:"4.0.1",delay:300,options:{active:0,collapsible:false,event:"click",loadonce:true,destroyAllonActive:false,heightStyle:"content",hide:null,show:null,method:"GET",newbtn:false,name:null,onTabNew:null,onActivate:null,onLoad:null,beforeActivate:null,beforeLoad:null,beforeTabClose:null,onTabClose:null},_create:function(){var d=this,c=this.options;if(c.method!=null&&c.method!=""){c.method=(c.method+"").toUpperCase()}else{c.method="GET"}this.running=false;this.element.addClass("coral-tabs ctrl-init ctrl-init-tabs coral-component coral-component-content coral-corner-all").toggleClass("coral-tabs-collapsible",c.collapsible);this._processTabs();if(typeof c.newbtn=="boolean"&&c.newbtn){this.addnewbtn()}c.active=this._initialActive();if(a.isArray(c.disabled)){c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".coral-state-disabled"),function(e){return d.tabs.index(e)}))).sort()}if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(c.active)}else{this.active=a()}this._refresh();if(this.active.length){this.load(c.active)}if(this.element.hasClass("coral-tabs-bottom")){a(".coral-tabs-bottom .coral-tabs-nav, .coral-tabs-bottom .coral-tabs-nav > *").removeClass("coral-corner-all coral-corner-top").addClass("coral-corner-bottom")}else{if(this.element.hasClass("coral-tabs-right")){this.element.addClass("coral-tabs-right coral-helper-clearfix").removeClass("coral-corner-top").addClass("coral-corner-left")}else{if(this.element.hasClass("coral-tabs-left")){this.element.removeClass("coral-corner-top").addClass("coral-tabs-left coral-helper-clearfix coral-corner-left")}}}},_isLocal:(function(){var c=/#.*$/;return function(e){var g,f;e=e.cloneNode(false);return e.hash.length>1&&e.href.indexOf("#")!=-1;g=e.href.replace(c,"");f=location.href.replace(c,"");try{g=decodeURIComponent(g)}catch(d){}try{f=decodeURIComponent(f)
}catch(d){}return e.hash.length>1&&g===f}})(),_initialActive:function(){var d=this.options.active,c=this.options.collapsible,e=location.hash.substring(1);if(d===null){if(e){this.tabs.each(function(f,g){if(a(g).attr("aria-controls")===e){d=f;return false}})}if(d===null){d=this.tabs.index(this.tabs.filter(".coral-state-active"))}if(d===null||d===-1){d=this.tabs.length?0:false}}if(d!==false){d=this.tabs.index(this.tabs.eq(d));if(d===-1){d=c?false:0}}if(!c&&d===false&&this.anchors.length){d=0}return d},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?a():this._getPanelForTab(this.active)}},_tabKeydown:function(e){var d=a(this.document[0].activeElement).closest("li"),c=this.tabs.index(d),f=true;if(this._handlePageNav(e)){return}switch(e.keyCode){case a.coral.keyCode.RIGHT:case a.coral.keyCode.DOWN:c++;break;case a.coral.keyCode.UP:case a.coral.keyCode.LEFT:f=false;c--;break;case a.coral.keyCode.END:c=this.anchors.length-1;break;case a.coral.keyCode.HOME:c=0;break;case a.coral.keyCode.SPACE:e.preventDefault();clearTimeout(this.activating);this._activate(c);return;case a.coral.keyCode.ENTER:e.preventDefault();clearTimeout(this.activating);this._activate(c===this.options.active?false:c);return;default:return}e.preventDefault();clearTimeout(this.activating);c=this._focusNextTab(c,f);if(!e.ctrlKey){d.attr("aria-selected","false");this.tabs.eq(c).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",c)},this.delay)}},_panelKeydown:function(c){if(this._handlePageNav(c)){return}if(c.ctrlKey&&c.keyCode===a.coral.keyCode.UP){c.preventDefault();this.active.focus()}},_handlePageNav:function(c){if(c.altKey&&c.keyCode===a.coral.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true}if(c.altKey&&c.keyCode===a.coral.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true}},_findNextTab:function(d,e){var c=this.tabs.length-1;function f(){if(d>c){d=0
}if(d<0){d=c}return d}while(a.inArray(f(),this.options.disabled)!==-1){d=e?d+1:d-1}return d},_focusNextTab:function(c,d){c=this._findNextTab(c,d);this.tabs.eq(c).focus();return c},_setOption:function(c,d){if(c==="active"){if(typeof d==="string"){this._activate(this._getIndex(d))}else{this._activate(d)}return}if(c==="disabled"){this._setupDisabled(d);return}this._super(c,d);if(c==="collapsible"){this.element.toggleClass("coral-tabs-collapsible",d);if(!d&&this.options.active===false){this._activate(0)}}if(c==="event"){this._setupEvents(d)}if(c==="heightStyle"){this._setupHeightStyle(d)}},_tabId:function(c){return c.attr("aria-controls")||"coral-tabs-"+getNextTabId()},_sanitizeSelector:function(c){return c?c.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var d=this.options,c=this.tablist.children(":has(a[href])");d.disabled=a.map(c.filter(".coral-state-disabled"),function(e){return c.index(e)});this._processTabs();if(d.active===false||!this.anchors.length){d.active=false;this.active=a()}else{if(this.active.length&&!a.contains(this.tablist[0],this.active[0])){if(this.tabs.length===d.disabled.length){d.active=false;this.active=a()}else{this._activate(this._findNextTab(Math.max(0,d.active-1),false))}}else{d.active=this.tabs.index(this.active)}}this._refresh()},_refresh:function(){var c=this;this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0)}else{this.active.addClass("coral-tabs-active coral-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})}},add:function(i){i=i||{};var h=this.options.disabled,f=null,e=i.tabId,m=null,l=i.label,k=i.ariaControls,o=false,c=i.href,d=i.closeable==b?false:i.closeable,n=d===true?"<span class='coral-closable cui-icon-cross2'></span>":"",j=i.content;
if(h===true){return}if(typeof this.options.newbtn=="boolean"&&this.options.newbtn){this.tablist.find("> li:last").remove()}if(k){f=k}else{if(typeof c==="undefined"){f=a({}).uniqueId()[0].id}else{f=c;if(f.indexOf("#")==0){f=f.substr(1)}else{o=true}}}e=e?"id="+e:"";var g="<li "+e+"><a href='#{href}'>"+l+"</a>{closespan}</li>";g=g.replace(/\{closespan\}/g,n);if(!o){m=a(g.replace(/#\{href\}/g,"#"+f))}else{m=a(g.replace(/#\{href\}/g,f));this.component().find(">.coral-tabs-nav").append(m);this.component().tabs("refresh");return}if(k){m.attr("aria-controls",k)}this.component().find(">.coral-tabs-nav").append(m);if(this.element.hasClass("coral-tabs-bottom")){this.component().find(">.coral-tabs-nav").before("<div id='"+f+"'>"+j+"</div>")}else{this.component().append("<div id='"+f+"'>"+j+"</div>")}this.component().tabs("refresh");if(typeof this.options.newbtn=="boolean"&&this.options.newbtn){this.addnewbtn()}},remove:function(c){if(this.options.disabled){return}if(c instanceof Array){for(var d in c){this._remove(c[d])}this._refresh()}else{this._remove(c)}},_remove:function(d){var e;if(typeof d=="undefined"){e=this.options.active}else{if(typeof d=="string"){e=this.getIndexById(d)}else{e=d}}var c=this._getList().find("> li:has(a[href])").eq(e).attr("aria-controls");this.component().find("li[aria-controls='"+c+"']").remove();this.component().find("div#"+c).remove()},addnewbtn:function(){var d=this;var c=a("<li class='coral-tabs-newbtn coral-corner-top'><a class='coral-tabs-anchor'><span class='cui-icon-plus-circle2'></span></a></li>");c.unbind("click").bind("click",function(e){if(true===d.options.disabled){return}d._trigger("onTabNew",null,[])});this.tablist.append(c);d._hoverable(c)},_processTabs:function(){var c=this;this.tablist=this._getList().addClass("coral-tabs-nav coral-helper-reset coral-helper-clearfix coral-component-header coral-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(d){if(a(this).is(".coral-state-disabled")){d.preventDefault()
}}).delegate(".coral-tabs-anchor","focus"+this.eventNamespace,function(){if(a(this).closest("li").is(".coral-state-disabled")){this.blur()}});this.tabs=this.tablist.find("> li:has(a[href])").addClass("coral-state-default coral-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("coral-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=a();this.anchors.each(function(j,g){var d,e,h,f=a(g).uniqueId().attr("id"),k=a(g).closest("li"),l=k.attr("aria-controls");k.find(".coral-closable").addClass("cui-icon-cross2");if(c._isLocal(g)){d=g.hash;h=d.substring(1);e=c.element.find(c._sanitizeSelector(d))}else{h=k.attr("aria-controls")||a({}).uniqueId()[0].id;d="#"+h;e=c.element.find(d);if(!e.length){e=c._createPanel(h);if(c.element.hasClass("coral-tabs-bottom")){e.insertBefore(c.panels[j-1]||c.tablist)}else{e.insertAfter(c.panels[j-1]||c.tablist)}}e.attr("aria-live","polite")}if(e.length){c.panels=c.panels.add(e)}if(l){k.data("coral-tabs-aria-controls",l)}k.attr({"aria-controls":h,"aria-labelledby":f});e.attr("aria-labelledby",f)});this.panels.addClass("coral-tabs-panel coral-component-content coral-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find(">ol,>ul").eq(0)},_createPanel:function(c){return a("<div>").attr("id",c).addClass("coral-tabs-panel coral-component-content coral-corner-bottom").data("coral-tabs-destroy",true)},_setupDisabled:function(e){if(a.isArray(e)){if(!e.length){e=false}else{if(e.length===this.anchors.length){e=true}}}for(var d=0,c;(c=this.tabs[d]);d++){if(e===true||a.inArray(d,e)!==-1){a(c).addClass("coral-state-disabled").attr("aria-disabled","true")}else{a(c).removeClass("coral-state-disabled").removeAttr("aria-disabled")}}this.options.disabled=e},_setupEvents:function(e){var d=this;var c={};if(e){a.each(e.split(" "),function(g,f){c[f]="_eventHandler"})}this._off(this.anchors.add(this.tabs).add(this.panels).add(this.tabs.children("span.cui-icon-cross2")));
this._on(true,this.anchors,{click:function(f){f.preventDefault()}});this._on(this.anchors,c);this._on(this.tabs.children("span.coral-closable"),{click:"_tabClose"});this._on(this.panels,{keydown:"_panelKeydown"});this._on(this.tabs,{keydown:"_tabKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_tabClose:function(h){var f=this;if(f.options.disabled===true){return}var g=a(h.target),j=g.closest("li"),c=j.attr("aria-controls"),i=f._getPanelForTab(j),d={currentTab:j,currentPanel:i,panelId:c};if(f._trigger("beforeTabClose",h,d)===false){return}j.remove();f.element.find("#"+c).remove();f._trigger("onTabClose",h,d);f.refresh()},_setupHeightStyle:function(c){var f,e,h=false,d=this.element.parent();if(c==="fill"){a.coral.fitParent(this.component(),true);f=d.height();e=d.width();f-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").not("script").each(function(){var j=a(this),i=j.css("position");if(i==="absolute"||i==="fixed"){return}f-=j.outerHeight()});this.element.children().not(this.panels).each(function(){if(a(this).parent().hasClass("coral-tabs-right")||a(this).parent().hasClass("coral-tabs-left")){var i=a(this).css("position");h=true;if(i==="absolute"||i==="fixed"){return}e-=a(this).outerWidth(true);return}f-=a(this).outerHeight(true)});this.panels.each(function(){var i=a(this).outerHeight()-a(this).innerHeight();a(this).height(Math.max(0,f-i-a(this).innerHeight()+a(this).height()))}).addClass("coral-scroll");if(h){var g=this.element.children("ul");g.height(Math.max(0,f-g.innerHeight()+g.height()))}}else{if(c==="auto"){f=0;this.panels.each(function(){f=Math.max(f,a(this).height("").height());a(this).width("")}).height(f)}}this.panels.each(function(){if(a(this).is(":visible")){a.coral.refreshAllComponent(a(this))}})},_eventHandler:function(c){var l=this.options,g=this.active,h=a(c.currentTarget),f=h.closest("li"),j=f[0]===g[0],d=j&&l.collapsible,e=d?a():this._getPanelForTab(f),i=!g.length?a():this._getPanelForTab(g),k={oldTab:g,oldPanel:i,newTab:d?a():f,newPanel:e};
c.preventDefault();if(f.hasClass("coral-state-disabled")||f.hasClass("coral-tabs-loading")||this.running||(j&&!l.collapsible)||(this._trigger("beforeActivate",c,k)===false)){return}l.active=d?false:this.tabs.index(f);this.active=j?a():f;if(this.xhr){this.xhr.abort()}if(!i.length&&!e.length){a.error("jQuery UI Tabs: Mismatching fragment identifier.")}if(e.length){this.load(this.tabs.index(f),c)}this._toggle(c,k)},_toggle:function(i,h){var g=this,c=h.newPanel,f=h.oldPanel;this.running=true;function e(){g.running=false;g._trigger("onActivate",i,h);a.coral.refreshAllComponent(c)}function d(){h.newTab.closest("li").addClass("coral-tabs-active coral-state-active");if(c.length&&g.options.show){g._show(c,g.options.show,e)}else{c.show();e()}}if(f.length&&this.options.hide){this._hide(f,this.options.hide,function(){h.oldTab.closest("li").removeClass("coral-tabs-active coral-state-active");d()})}else{h.oldTab.closest("li").removeClass("coral-tabs-active coral-state-active");f.hide();d()}f.attr("aria-hidden","true");h.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});if(c.length&&f.length){h.oldTab.attr("tabIndex",-1)}else{if(c.length){this.tabs.filter(function(){return a(this).attr("tabIndex")===0}).attr("tabIndex",-1)}}c.attr("aria-hidden","false");h.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(d){if(d==-1){return}var c,e=this._findActive(d);if(e[0]===this.active[0]){return}if(!e.length){e=this.active}c=e.find(".coral-tabs-anchor")[0];this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop})},_findActive:function(c){return c===false?a():this.tabs.eq(c)},_getIndex:function(c){if(typeof c==="string"){c=this.anchors.index(this.anchors.filter("[href$='"+c+"']"))}return c},getIdByIndex:function(d){var c=this.tablist.children("li").filter(function(){return a(this).hasClass("coral-state-default")});return c.eq(d).attr("aria-controls")},getIndexById:function(d){var c=this.tablist.children("li").filter(function(){return a(this).hasClass("coral-state-default")
});return c.index(c.filter("[aria-controls$='"+d+"']"))},getIndexByTabId:function(d){var c=this.tablist.children("li").filter(function(){return a(this).hasClass("coral-state-default")});return c.index(c.filter("#"+d))},getAllTabId:function(){return this.getPanelIds()},getPanelIds:function(){var c=[];this.tabs.filter("[aria-controls]").each(function(){var d=a(this).attr("aria-controls");if(""!=d){c.push(d)}});return c},getTabIds:function(){var d=[];var c=this.tablist.children("li").each(function(){var e=a(this).attr("id");if(""!=e){d.push(e)}});return d},getTabEl:function(){var c=this.tablist.children("li.coral-state-default");return c},getPanelEl:function(){return{}},getLength:function(){return this.tabs.find("[aria-controls]").length},_destroy:function(){if(this.xhr){this.xhr.abort()}this.element.removeClass("coral-tabs coral-component coral-component-content coral-corner-all coral-tabs-collapsible");this.tablist.removeClass("coral-tabs-nav coral-helper-reset coral-helper-clearfix coral-component-header coral-corner-all").removeAttr("role");this.anchors.removeClass("coral-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();this.tablist.unbind(this.eventNamespace);this.tabs.add(this.panels).each(function(){if(a.data(this,"coral-tabs-destroy")){a(this).remove()}else{a(this).removeClass("coral-state-default coral-state-active coral-state-disabled coral-corner-top coral-corner-bottom coral-component-content coral-state-active coral-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}});this.tabs.each(function(){var c=a(this),d=c.data("coral-tabs-aria-controls");if(d){c.attr("aria-controls",d).removeData("coral-tabs-aria-controls")}else{c.removeAttr("aria-controls")}});this.panels.show();if(this.options.heightStyle!=="content"){this.panels.css("height","")}},enable:function(c){var d=this.options.disabled;
if(d===false){return}if(c===b){d=false}else{c=this._getIndex(c);if(a.isArray(d)){d=a.map(d,function(e){return e!==c?e:null})}else{d=a.map(this.tabs,function(e,f){return f!==c?f:null})}}this._setupDisabled(d)},disable:function(c){var d=this.options.disabled;if(d===true){return}if(c===b){d=true}else{c=this._getIndex(c);if(a.inArray(c,d)!==-1){return}if(a.isArray(d)){d=a.merge([c],d).sort()}else{d=[c]}}this._setupDisabled(d)},_destroyOtherTabs:function(c){var d=this._getList().find("> li:has(a[href])").eq(c).attr("aria-controls");this.component().children("div:not(#"+d+")").children().remove()},load:function(e,i){e=this._getIndex(e);var h=this,f=this.tabs.eq(e),d=f.find(".coral-tabs-anchor"),c=this._getPanelForTab(f),g={tab:f,panel:c};if(this.options.destroyAllonActive){h._destroyOtherTabs(e)}if(h._isLocal(d[0])||a.data(d[0],"cache")){return}else{if(this.options.loadonce){a.data(d[0],"cache",true)}}this.xhr=a.ajax(this._ajaxSettings(d,i,g));if(this.xhr&&this.xhr.statusText!=="canceled"){f.addClass("coral-tabs-loading");c.attr("aria-busy","true");this.xhr.success(function(j){setTimeout(function(){c.html(j);if(a.coral.openTag===true){a.parser.parse(c)}h._trigger("onLoad",i,g)},1)}).complete(function(k,j){setTimeout(function(){if(j==="abort"){h.panels.stop(false,true)}f.removeClass("coral-tabs-loading");c.removeAttr("aria-busy");if(k===h.xhr){delete h.xhr}},1)})}},_ajaxSettings:function(c,f,e){var d=this;return{url:c.attr("href"),beforeSend:function(h,g){return d._trigger("beforeLoad",f,a.extend({jqXHR:h,ajaxSettings:g},e))},type:d.options.method}},_getPanelForTab:function(c){var d=a(c).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+d))},getPanelForTab:function(c){return this._getPanelForTab(c)}})})(jQuery);

(function($,undefined){$.extend($.coral,{tree:{version:"4.0.2"}});var _final={className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch"},editIcon:"cui-icon-pencil7",removeIcon:"cui-icon-cross2",event:{NODECREATED:"tree_nodeCreated",CLICK:"tree_click",EXPAND:"tree_expand",COLLAPSE:"tree_collapse",ASYNC_SUCCESS:"tree_async_success",ASYNC_ERROR:"tree_async_error",REMOVE:"tree_remove",CHECK:"tree_check",DRAG:"tree_drag",DROP:"tree_drop",RENAME:"tree_rename",DRAGMOVE:"tree_dragmove"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul",CHECK:"_check",EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},line:{CENTER:"centerDottedLine",BOTTOM:"bottomDottedLine",ROOTS:"topDottedLine",NOLINE:"noline",LINE:"dottedLine"},folder:{OPEN:"folderOpen",CLOSE:"folderClose",FILE:"file",DOCU:"docu"},arrow:{RIGHT:"arrowRight1",DOWN:"arrowDown1"},node:{CURHOVER:"coral-state-hover",CURSELECTED:"curSelectedNode",CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetTree",TMPTARGET_NODE:"tmpTargetNode"},checkbox:{STYLE:"checkbox",DEFAULT:"coral-state-default",DISABLED:"coral-state-disabled",FALSE:"false",TRUE:"true",UNCHECKED:"unchecked",CHECKED:"checked",PARTIAL:"Partical",FOCUS:"coral-state-focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"}},_option={treeId:"",treeObj:null,clickExpand:false,disabled:false,addDiyDom:null,autoCancelSelected:true,dblClickExpand:true,expandSpeed:"fast",fontCss:{},iconUrl:true,nameIsHTML:false,selectedMulti:true,showIcon:true,showLine:false,showTitle:true,txtSelectedEnable:false,rootInNode:false,showRootNode:true,rootNode:false,keyChildren:"children",keyName:"name",keyTitle:"",keyUrl:"url",simpleDataEnable:false,simpleDataIdKey:"id",simpleDataPIdKey:"pId",simpleDataRootPId:null,keepParent:false,keepLeaf:false,asyncEnable:false,asyncContentType:"application/x-www-form-urlencoded",asyncType:"post",asyncDataType:"text",asyncUrl:"",asyncAutoParam:[],asyncOtherParam:[],asyncDataFilter:null,checkable:false,autoCheckTrigger:false,chkStyle:_final.checkbox.STYLE,nocheckInherit:false,chkDisabledInherit:false,radioType:_final.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"},keyChecked:"checked",editable:false,editNameSelectAll:false,showRemoveBtn:true,showRenameBtn:true,removeTitle:"remove",renameTitle:"rename",dragStyle:"line",dragAutoExpandTrigger:false,dragIsCopy:true,dragIsMove:true,dragPrev:true,dragNext:true,dragInner:true,dragMinMoveSize:5,dragBorderMax:10,dragBorderMin:-5,dragMaxShowNodeNum:5,dragAutoOpenTime:500,addHoverDom:null,removeHoverDom:null,beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeReName:null,onDrag:null,onDragMove:null,onDrop:null,onReName:null,beforeCheck:null,onCheck:null,beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onLoadError:null,onLoad:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null};
$.tree={_coreInitRoot:function(setting){var root=$.tree._getRoot(setting);if(!root){root={};$.tree._setRoot(setting,root)}root[setting.keyChildren]=[];root.expandTriggerFlag=false;root.curSelectedList=[];root.noSelection=true;root.createdNodes=[];root.zId=0;root._ver=(new Date()).getTime()},_checkInitRoot:function(setting){var root=$.tree._getRoot(setting);root.radioCheckedList=[]},_editInitRoot:function(setting){var root=$.tree._getRoot(setting),roots=$.tree._getRoots();root.curEditNode=null;root.curEditInput=null;root.curHoverNode=null;root.dragFlag=0;root.dragNodeShowBefore=[];root.dragMaskList=new Array();roots.showHoverDom=true},_coreInitCache:function(setting){var cache=$.tree._getCache(setting);if(!cache){cache={};$.tree._setCache(setting,cache)}cache.nodes=[];cache.doms=[]},_checkInitCache:function(treeId){},_editInitCache:function(treeId){},_coreBindEvent:function(setting){var treeObj=setting.treeObj,cache=consts.event;treeObj.bind(cache.NODECREATED,function(event,treeId,node){$.tree._apply(setting.onNodeCreated,[event,treeId,node])});treeObj.bind(cache.CLICK,function(event,srcEvent,treeId,node,clickFlag){$.tree._apply(setting.onClick,[srcEvent,treeId,node,clickFlag])});treeObj.bind(cache.EXPAND,function(event,treeId,node){$.tree._apply(setting.onExpand,[event,treeId,node])});treeObj.bind(cache.COLLAPSE,function(event,treeId,node){$.tree._apply(setting.onCollapse,[event,treeId,node])});treeObj.bind(cache.ASYNC_SUCCESS,function(event,treeId,node,msg){$.tree._apply(setting.onLoad,[event,treeId,node,msg])});treeObj.bind(cache.ASYNC_ERROR,function(event,treeId,node,XMLHttpRequest,textStatus,errorThrown){$.tree._apply(setting.onLoadError,[event,treeId,node,XMLHttpRequest,textStatus,errorThrown])});treeObj.bind(cache.REMOVE,function(event,treeId,treeNode){$.tree._apply(setting.onRemove,[event,treeId,treeNode])})},_checkBindEvent:function(setting){var treeObj=setting.treeObj,cache=consts.event;treeObj.bind(cache.CHECK,function(event,srcEvent,treeId,node){event.srcEvent=srcEvent;
$.tree._apply(setting.onCheck,[event,treeId,node])})},_editBindEvent:function(setting){var treeObj=setting.treeObj;var cache=consts.event;treeObj.bind(cache.RENAME,function(event,treeId,treeNode,isCancel){$.tree._apply(setting.onReName,[event,treeId,treeNode,isCancel])});treeObj.bind(cache.DRAG,function(event,srcEvent,treeId,treeNodes){$.tree._apply(setting.onDrag,[srcEvent,treeId,treeNodes])});treeObj.bind(cache.DRAGMOVE,function(event,srcEvent,treeId,treeNodes){$.tree._apply(setting.onDragMove,[srcEvent,treeId,treeNodes])});treeObj.bind(cache.DROP,function(event,srcEvent,treeId,treeNodes,targetNode,moveType,isCopy){$.tree._apply(setting.onDrop,[srcEvent,treeId,treeNodes,targetNode,moveType,isCopy])})},_coreUnbindEvent:function(setting){var treeObj=setting.treeObj,cache=consts.event;treeObj.unbind(cache.NODECREATED).unbind(cache.CLICK).unbind(cache.EXPAND).unbind(cache.COLLAPSE).unbind(cache.ASYNC_SUCCESS).unbind(cache.ASYNC_ERROR).unbind(cache.REMOVE)},_checkUnbindEvent:function(setting){var treeObj=setting.treeObj;var cache=consts.event;treeObj.unbind(cache.CHECK)},_editUnbindEvent:function(setting){var treeObj=setting.treeObj;var cache=consts.event;treeObj.unbind(cache.RENAME);treeObj.unbind(cache.DRAG);treeObj.unbind(cache.DRAGMOVE);treeObj.unbind(cache.DROP)},_coreEventProxy:function(event){var target=event.target,setting=$.tree._getSetting(event.data.treeId),tId="",node=null,nodeEventType="",treeEventType="",nodeEventCallback=null,treeEventCallback=null,tmp=null;if($.tree._eqs(event.type,"mousedown")){treeEventType="mousedown"}else{if($.tree._eqs(event.type,"mouseup")){treeEventType="mouseup"}else{if($.tree._eqs(event.type,"contextmenu")){treeEventType="contextmenu"}else{if($.tree._eqs(event.type,"click")){if($.tree._eqs(target.tagName,"span")&&target.getAttribute("treeNode"+consts.id.SWITCH)!==null){tId=$.tree._getNodeMainDom(target).id;nodeEventType="switchNode"}else{tmp=$.tree._getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=$.tree._getNodeMainDom(tmp).id;
nodeEventType="clickNode"}}}else{if($.tree._eqs(event.type,"dblclick")){treeEventType="dblclick";tmp=$.tree._getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=$.tree._getNodeMainDom(tmp).id;nodeEventType="switchNode"}}}}}}if(treeEventType.length>0&&tId.length==0){tmp=$.tree._getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=$.tree._getNodeMainDom(tmp).id}}if(tId.length>0){node=$.tree._getNodeCache(setting,tId);switch(nodeEventType){case"switchNode":if(!node.isParent){nodeEventType=""}else{if($.tree._eqs(event.type,"click")||($.tree._eqs(event.type,"dblclick")&&$.tree._apply(setting.dblClickExpand,[setting.treeId,node],setting.dblClickExpand))){nodeEventCallback=$.tree._onSwitchNode}else{nodeEventType=""}}break;case"clickNode":nodeEventCallback=$.tree._onClickNode;break}}switch(treeEventType){case"mousedown":treeEventCallback=$.tree._onTreeMousedown;break;case"mouseup":treeEventCallback=$.tree._onTreeMouseup;break;case"dblclick":treeEventCallback=$.tree._onTreeDblclick;break;case"contextmenu":treeEventCallback=$.tree._onTreeContextmenu;break}var proxyResult={stop:false,node:node,nodeEventType:nodeEventType,nodeEventCallback:nodeEventCallback,treeEventType:treeEventType,treeEventCallback:treeEventCallback};return proxyResult},_checkEventProxy:function(e){var target=e.target,setting=$.tree._getSetting(e.data.treeId),tId="",node=null,nodeEventType="",treeEventType="",nodeEventCallback=null,treeEventCallback=null;if($.tree._eqs(e.type,"mouseover")){if(setting.checkable&&$.tree._eqs(target.tagName,"span")&&target.getAttribute("treeNode"+consts.id.CHECK)!==null){tId=$.tree._getNodeMainDom(target).id;nodeEventType="mouseoverCheck"}}else{if($.tree._eqs(e.type,"mouseout")){if(setting.checkable&&$.tree._eqs(target.tagName,"span")&&target.getAttribute("treeNode"+consts.id.CHECK)!==null){tId=$.tree._getNodeMainDom(target).id;nodeEventType="mouseoutCheck"}}else{if($.tree._eqs(e.type,"click")){if(setting.checkable&&$.tree._eqs(target.tagName,"span")&&target.getAttribute("treeNode"+consts.id.CHECK)!==null){tId=$.tree._getNodeMainDom(target).id;
nodeEventType="checkNode"}}}}if(tId.length>0){node=$.tree._getNodeCache(setting,tId);switch(nodeEventType){case"checkNode":nodeEventCallback=$.tree._onCheckNode;break;case"mouseoverCheck":nodeEventCallback=$.tree._onMouseoverCheck;break;case"mouseoutCheck":nodeEventCallback=$.tree._onMouseoutCheck;break}}var proxyResult={stop:nodeEventType==="checkNode",node:node,nodeEventType:nodeEventType,nodeEventCallback:nodeEventCallback,treeEventType:treeEventType,treeEventCallback:treeEventCallback};return proxyResult},_editEventProxy:function(e){var target=e.target,setting=$.tree._getSetting(e.data.treeId),relatedTarget=e.relatedTarget,tId="",node=null,nodeEventType="",treeEventType="",nodeEventCallback=null,treeEventCallback=null,tmp=null;if($.tree._eqs(e.type,"mouseover")){tmp=$.tree._getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=$.tree._getNodeMainDom(tmp).id;nodeEventType="hoverOverNode"}}else{if($.tree._eqs(e.type,"mouseout")){tmp=$.tree._getMDom(setting,relatedTarget,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(!tmp){tId="remove";nodeEventType="hoverOutNode"}}else{if($.tree._eqs(e.type,"mousedown")){tmp=$.tree._getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=$.tree._getNodeMainDom(tmp).id;nodeEventType="mousedownNode"}}}}if(tId.length>0){node=$.tree._getNodeCache(setting,tId);switch(nodeEventType){case"mousedownNode":nodeEventCallback=$.tree._onMousedownNode;break;case"hoverOverNode":nodeEventCallback=$.tree._onHoverOverNode;break;case"hoverOutNode":nodeEventCallback=$.tree._onHoverOutNode;break}}var proxyResult={stop:false,node:node,nodeEventType:nodeEventType,nodeEventCallback:nodeEventCallback,treeEventType:treeEventType,treeEventCallback:treeEventCallback};return proxyResult},_beforeA:function(setting,node,html){var checkedKey=setting.keyChecked;if(setting.checkable){$.tree._makeChkFlag(setting,node);html.push("<span ID='",node.tId,consts.id.CHECK,"' class='",$.tree._makeChkClass(setting,node),"' treeNode",consts.id.CHECK,(node.nocheck===true?" style='display:none;'":""),"></span>")
}},_coreInitNode:function(setting,level,node,parentNode,isFirstNode,isLastNode,openFlag){if(!node){return}var r=$.tree._getRoot(setting),childKey=setting.keyChildren;node.level=level;node.tId=setting.treeId+"_"+(++r.zId);node.parentTId=parentNode?parentNode.tId:null;node.open=(typeof node.open=="string")?$.tree._eqs(node.open,"true"):!!node.open;if(node[childKey]&&node[childKey].length>0){node.isParent=true;node.zAsync=true}else{node.isParent=(typeof node.isParent=="string")?$.tree._eqs(node.isParent,"true"):!!node.isParent;node.open=(node.isParent&&!setting.asyncEnable)?node.open:false;node.zAsync=!node.isParent}node.isFirstNode=isFirstNode;node.isLastNode=isLastNode;node.getParentNode=function(){return $.tree._getNodeCache(setting,node.parentTId)};node.getPreNode=function(){return $.tree._getPreNode(setting,node)};node.getNextNode=function(){return $.tree._getNextNode(setting,node)};node.isAjaxing=false;$.tree._fixPIdKeyValue(setting,node)},_checkInitNode:function(setting,level,node,parentNode,isFirstNode,isLastNode,openFlag){if(!node){return}var checkedKey=setting.keyChecked;if(typeof node[checkedKey]=="string"){node[checkedKey]=$.tree._eqs(node[checkedKey],"true")}node[checkedKey]=!!node[checkedKey];node.checkedOld=node[checkedKey];if(typeof node.nocheck=="string"){node.nocheck=$.tree._eqs(node.nocheck,"true")}node.nocheck=!!node.nocheck||(setting.nocheckInherit&&parentNode&&!!parentNode.nocheck);if(typeof node.chkDisabled=="string"){node.chkDisabled=$.tree._eqs(node.chkDisabled,"true")}node.chkDisabled=!!node.chkDisabled||(setting.chkDisabledInherit&&parentNode&&!!parentNode.chkDisabled);if(typeof node.halfCheck=="string"){node.halfCheck=$.tree._eqs(node.halfCheck,"true")}node.halfCheck=!!node.halfCheck;node.check_Child_State=-1;node.check_Focus=false;node.getCheckStatus=function(){return $.tree._getCheckStatus(setting,node)};if(setting.chkStyle==consts.radio.STYLE&&setting.radioType==consts.radio.TYPE_ALL&&node[checkedKey]){var r=$.tree._getRoot(setting);r.radioCheckedList.push(node)
}},_editInitNode:function(setting,level,node,parentNode,isFirstNode,isLastNode,openFlag){if(!node){return}node.isHover=false;node.editNameFlag=false},_checkTreeTools:function(setting,treeTools){treeTools.checkNode=function(node,checked,checkTypeFlag,callbackFlag){var checkedKey=this.setting.keyChecked;if(node.chkDisabled===true){return}if(checked!==true&&checked!==false){checked=!node[checkedKey]}callbackFlag=!!callbackFlag;if(node[checkedKey]===checked&&!checkTypeFlag){return}else{if(callbackFlag&&$.tree._apply(this.setting.beforeCheck,[this.setting.treeId,node],true)==false){return}}if($.tree._uCanDo(this.setting)&&this.setting.checkable&&node.nocheck!==true){node[checkedKey]=checked;var checkObj=$$(node,consts.id.CHECK,this.setting);if(checkTypeFlag||this.setting.chkStyle===consts.radio.STYLE){$.tree._checkNodeRelation(this.setting,node)}$.tree._setChkClass(this.setting,checkObj,node);$.tree._repairParentChkClassWithSelf(this.setting,node);if(callbackFlag){this.setting.treeObj.trigger(consts.event.CHECK,[null,this.setting.treeId,node])}}};treeTools.checkAllNodes=function(checked){$.tree._repairAllChk(this.setting,!!checked)};treeTools.getCheckedNodes=function(checked){var childKey=this.setting.keyChildren;checked=(checked!==false);return $.tree._getTreeCheckedNodes(this.setting,$.tree._getRoot(this.setting)[childKey],checked)};treeTools.getChangeCheckedNodes=function(){var childKey=this.setting.keyChildren;return $.tree._getTreeChangeCheckedNodes(this.setting,$.tree._getRoot(this.setting)[childKey])};treeTools.setChkDisabled=function(node,disabled,inheritParent,inheritChildren){disabled=!!disabled;inheritParent=!!inheritParent;inheritChildren=!!inheritChildren;$.tree._repairSonChkDisabled(this.setting,node,disabled,inheritChildren);$.tree._repairParentChkDisabled(this.setting,node.getParentNode(),disabled,inheritParent)};var _updateNode=treeTools.updateNode;treeTools.updateNode=function(node,checkTypeFlag){if(_updateNode){_updateNode.apply(treeTools,arguments)}if(!node||!this.setting.checkable){return
}var nObj=$$(node,this.setting);if(nObj.get(0)&&$.tree._uCanDo(this.setting)){var checkObj=$$(node,consts.id.CHECK,this.setting);if(checkTypeFlag==true||this.setting.chkStyle===consts.radio.STYLE){$.tree._checkNodeRelation(this.setting,node)}$.tree._setChkClass(this.setting,checkObj,node);$.tree._repairParentChkClassWithSelf(this.setting,node)}}},_editTreeTools:function(setting,treeTools){treeTools.cancelEditName=function(newName){var root=$.tree._getRoot(this.setting);if(!root.curEditNode){return}$.tree._cancelCurEditNode(this.setting,newName?newName:null,true)};treeTools.copyNode=function(targetNode,node,moveType,isSilent){if(!node){return null}if(targetNode&&!targetNode.isParent&&this.setting.keepLeaf&&moveType===consts.move.TYPE_INNER){return null}var _this=this,newNode=$.tree._clone(node);if(!targetNode){targetNode=null;moveType=consts.move.TYPE_INNER}if(moveType==consts.move.TYPE_INNER){function copyCallback(){$.tree._addNodes(_this.setting,targetNode,[newNode],isSilent)}if($.tree._canAsync(this.setting,targetNode)){$.tree._asyncNode(this.setting,targetNode,isSilent,copyCallback)}else{copyCallback()}}else{$.tree._addNodes(this.setting,targetNode.parentNode,[newNode],isSilent);$.tree._moveNode(this.setting,targetNode,newNode,moveType,false,isSilent)}return newNode};treeTools.editName=function(node){if(!node||!node.tId||node!==$.tree._getNodeCache(this.setting,node.tId)){return}if(node.parentTId){$.tree._expandCollapseParentNode(this.setting,node.getParentNode(),true)}$.tree._editNode(this.setting,node)};treeTools.moveNode=function(targetNode,node,moveType,isSilent){if(!node){return node}if(targetNode&&!targetNode.isParent&&this.setting.keepLeaf&&moveType===consts.move.TYPE_INNER){return null}else{if(targetNode&&((node.parentTId==targetNode.tId&&moveType==consts.move.TYPE_INNER)||$$(node,this.setting).find("#"+targetNode.tId).length>0)){return null}else{if(!targetNode){targetNode=null}}}var _this=this;function moveCallback(){$.tree._moveNode(_this.setting,targetNode,node,moveType,false,isSilent)
}if($.tree._canAsync(this.setting,targetNode)&&moveType===consts.move.TYPE_INNER){$.tree._asyncNode(this.setting,targetNode,isSilent,moveCallback)}else{moveCallback()}return node};treeTools.setEditable=function(editable){this.setting.editable=editable;return this.refresh()}},_addNodeCache:function(setting,node){$.tree._getCache(setting).nodes[$.tree._getNodeCacheId(node.tId)]=node},_getNodeCacheId:function(tId){return tId.substring(tId.lastIndexOf("_")+1)},_addNodesData:function(setting,parentNode,nodes){var childKey=setting.keyChildren;if(!parentNode[childKey]){parentNode[childKey]=[]}if(parentNode[childKey].length>0){parentNode[childKey][parentNode[childKey].length-1].isLastNode=false;$.tree._setNodeLineIcos(setting,parentNode[childKey][parentNode[childKey].length-1])}parentNode.isParent=true;parentNode[childKey]=parentNode[childKey].concat(nodes)},_addSelectedNode:function(setting,node){var root=$.tree._getRoot(setting);if(!$.tree._isSelectedNode(setting,node)){root.curSelectedList.push(node)}},_addCreatedNode:function(setting,node){if(!!setting.onNodeCreated||!!setting.addDiyDom){var root=$.tree._getRoot(setting);root.createdNodes.push(node)}},_fixPIdKeyValue:function(setting,node){if(setting.simpleDataEnable){node[setting.simpleDataPIdKey]=node.parentTId?node.getParentNode()[setting.simpleDataIdKey]:setting.simpleDataRootPId}},_getAfterA:function(setting,node,array){for(var i=0,j=_init.afterA.length;i<j;i++){_init.afterA[i].apply(this,arguments)}},_getBeforeA:function(setting,node,array){for(var i=0,j=_init.beforeA.length;i<j;i++){_init.beforeA[i].apply(this,arguments)}},_getInnerAfterA:function(setting,node,array){for(var i=0,j=_init.innerAfterA.length;i<j;i++){_init.innerAfterA[i].apply(this,arguments)}},_getInnerBeforeA:function(setting,node,array){for(var i=0,j=_init.innerBeforeA.length;i<j;i++){_init.innerBeforeA[i].apply(this,arguments)}},_getCache:function(setting){return caches[setting.treeId]},_getNextNode:function(setting,node){if(!node){return null}var childKey=setting.keyChildren,p=node.parentTId?node.getParentNode():$.tree._getRoot(setting);
for(var i=0,l=p[childKey].length-1;i<=l;i++){if(p[childKey][i]===node){return(i==l?null:p[childKey][i+1])}}return null},_getNodeByParam:function(setting,nodes,key,value){if(!nodes||!key){return null}var childKey=setting.keyChildren;for(var i=0,l=nodes.length;i<l;i++){if(nodes[i][key]==value){return nodes[i]}var tmp=$.tree._getNodeByParam(setting,nodes[i][childKey],key,value);if(tmp){return tmp}}return null},_getNodeCache:function(setting,tId){if(!tId){return null}var n=caches[setting.treeId].nodes[$.tree._getNodeCacheId(tId)];return n?n:null},_getNodeName:function(setting,node){var nameKey=setting.keyName;return""+node[nameKey]},_getNodeTitle:function(setting,node){var t=setting.keyTitle===""?setting.keyName:setting.keyTitle;return""+node[t]},_getNodes:function(setting){return $.tree._getRoot(setting)[setting.keyChildren]},_getNodesByParam:function(setting,nodes,key,value){if(!nodes||!key){return[]}var childKey=setting.keyChildren,result=[];for(var i=0,l=nodes.length;i<l;i++){if(nodes[i][key]==value){result.push(nodes[i])}result=result.concat($.tree._getNodesByParam(setting,nodes[i][childKey],key,value))}return result},_getNodesByParamFuzzy:function(setting,nodes,key,value){if(!nodes||!key){return[]}var childKey=setting.keyChildren,result=[];value=value.toLowerCase();for(var i=0,l=nodes.length;i<l;i++){if(typeof nodes[i][key]=="string"&&nodes[i][key].toLowerCase().indexOf(value)>-1){result.push(nodes[i])}result=result.concat($.tree._getNodesByParamFuzzy(setting,nodes[i][childKey],key,value))}return result},_getNodesByFilter:function(setting,nodes,filter,isSingle,invokeParam){if(!nodes){return(isSingle?null:[])}var childKey=setting.keyChildren,result=isSingle?null:[];for(var i=0,l=nodes.length;i<l;i++){if($.tree._apply(filter,[nodes[i],invokeParam],false)){if(isSingle){return nodes[i]}result.push(nodes[i])}var tmpResult=$.tree._getNodesByFilter(setting,nodes[i][childKey],filter,isSingle,invokeParam);if(isSingle&&!!tmpResult){return tmpResult}result=isSingle?tmpResult:result.concat(tmpResult)
}return result},_getPreNode:function(setting,node){if(!node){return null}var childKey=setting.keyChildren,p=node.parentTId?node.getParentNode():$.tree._getRoot(setting);for(var i=0,l=p[childKey].length;i<l;i++){if(p[childKey][i]===node){return(i==0?null:p[childKey][i-1])}}return null},_getRadioCheckedList:function(setting){var checkedList=$.tree._getRoot(setting).radioCheckedList;for(var i=0,j=checkedList.length;i<j;i++){if(!$.tree._getNodeCache(setting,checkedList[i].tId)){checkedList.splice(i,1);i--;j--}}return checkedList},_getCheckStatus:function(setting,node){if(!setting.checkable||node.nocheck||node.chkDisabled){return null}var checkedKey=setting.keyChecked,r={checked:node[checkedKey],half:node.halfCheck?node.halfCheck:(setting.chkStyle==consts.radio.STYLE?(node.check_Child_State===2):(node[checkedKey]?(node.check_Child_State>-1&&node.check_Child_State<2):(node.check_Child_State>0)))};return r},_getTreeCheckedNodes:function(setting,nodes,checked,results){if(!nodes){return[]}var childKey=setting.keyChildren,checkedKey=setting.keyChecked,onlyOne=(checked&&setting.chkStyle==consts.radio.STYLE&&setting.radioType==consts.radio.TYPE_ALL);results=!results?[]:results;for(var i=0,l=nodes.length;i<l;i++){if(nodes[i].nocheck!==true&&nodes[i].chkDisabled!==true&&nodes[i][checkedKey]==checked){results.push(nodes[i]);if(onlyOne){break}}$.tree._getTreeCheckedNodes(setting,nodes[i][childKey],checked,results);if(onlyOne&&results.length>0){break}}return results},_getTreeChangeCheckedNodes:function(setting,nodes,results){if(!nodes){return[]}var childKey=setting.keyChildren,checkedKey=setting.keyChecked;results=!results?[]:results;for(var i=0,l=nodes.length;i<l;i++){if(nodes[i].nocheck!==true&&nodes[i].chkDisabled!==true&&nodes[i][checkedKey]!=nodes[i].checkedOld){results.push(nodes[i])}$.tree._getTreeChangeCheckedNodes(setting,nodes[i][childKey],results)}return results},_getRoot:function(setting){return setting?roots[setting.treeId]:null},_getRoots:function(){return roots},_getSetting:function(treeId){return settings[treeId]
},_getSettings:function(){return settings},_getTreeTools:function(treeId){var r=this._getRoot(this._getSetting(treeId));return r?r.treeTools:null},_initCache:function(setting){for(var i=0,j=_init.caches.length;i<j;i++){_init.caches[i].apply(this,arguments)}},_initNode:function(setting,level,node,parentNode,preNode,nextNode){for(var i=0,j=_init.nodes.length;i<j;i++){_init.nodes[i].apply(this,arguments)}},_initRoot:function(setting){for(var i=0,j=_init.roots.length;i<j;i++){_init.roots[i].apply(this,arguments)}},_isSelectedNode:function(setting,node){var root=$.tree._getRoot(setting);for(var i=0,j=root.curSelectedList.length;i<j;i++){if(node===root.curSelectedList[i]){return true}}return false},_removeNodeCache:function(setting,node){var childKey=setting.keyChildren;if(node[childKey]){for(var i=0,l=node[childKey].length;i<l;i++){arguments.callee(setting,node[childKey][i])}}$.tree._getCache(setting).nodes[$.tree._getNodeCacheId(node.tId)]=null},_removeSelectedNode:function(setting,node){var root=$.tree._getRoot(setting);for(var i=0,j=root.curSelectedList.length;i<j;i++){if(node===root.curSelectedList[i]||!$.tree._getNodeCache(setting,root.curSelectedList[i].tId)){root.curSelectedList.splice(i,1);i--;j--}}},_setCache:function(setting,cache){caches[setting.treeId]=cache},_setRoot:function(setting,root){roots[setting.treeId]=root},_setTreeTools:function(setting,treeTools){for(var i=0,j=_init.treeTools.length;i<j;i++){_init.treeTools[i].apply(this,arguments)}},_makeChkFlag:function(setting,node){if(!node){return}var childKey=setting.keyChildren,checkedKey=setting.keyChecked,chkFlag=-1;if(node[childKey]){for(var i=0,l=node[childKey].length;i<l;i++){var cNode=node[childKey][i];var tmp=-1;if(setting.chkStyle==consts.radio.STYLE){if(cNode.nocheck===true||cNode.chkDisabled===true){tmp=cNode.check_Child_State}else{if(cNode.halfCheck===true){tmp=2}else{if(cNode[checkedKey]){tmp=2}else{tmp=cNode.check_Child_State>0?2:0}}}if(tmp==2){chkFlag=2;break}else{if(tmp==0){chkFlag=0}}}else{if(setting.chkStyle==consts.checkbox.STYLE){if(cNode.nocheck===true||cNode.chkDisabled===true){tmp=cNode.check_Child_State
}else{if(cNode.halfCheck===true){tmp=1}else{if(cNode[checkedKey]){tmp=(cNode.check_Child_State===-1||cNode.check_Child_State===2)?2:1}else{tmp=(cNode.check_Child_State>0)?1:0}}}if(tmp===1){chkFlag=1;break}else{if(tmp===2&&chkFlag>-1&&i>0&&tmp!==chkFlag){chkFlag=1;break}else{if(chkFlag===2&&tmp>-1&&tmp<2){chkFlag=1;break}else{if(tmp>-1){chkFlag=tmp}}}}}}}}node.check_Child_State=chkFlag},_setSonNodeLevel:function(setting,parentNode,node){if(!node){return}var childKey=setting.keyChildren;node.level=(parentNode)?parentNode.level+1:0;if(!node[childKey]){return}for(var i=0,l=node[childKey].length;i<l;i++){if(node[childKey][i]){$.tree._setSonNodeLevel(setting,node,node[childKey][i])}}},_transformToArrayFormat:function(setting,nodes){if(!nodes){return[]}var childKey=setting.keyChildren,r=[];if($.tree._isArray(nodes)){for(var i=0,l=nodes.length;i<l;i++){r.push(nodes[i]);if(nodes[i][childKey]){r=r.concat($.tree._transformToArrayFormat(setting,nodes[i][childKey]))}}}else{r.push(nodes);if(nodes[childKey]){r=r.concat($.tree._transformToArrayFormat(setting,nodes[childKey]))}}return r},_transformToTreeFormat:function(setting,sNodes){var i,l,key=setting.simpleDataIdKey,parentKey=setting.simpleDataPIdKey,childKey=setting.keyChildren;if(!key||key==""||!sNodes){return[]}if($.tree._isArray(sNodes)){var r=[];var tmpMap=[];for(i=0,l=sNodes.length;i<l;i++){tmpMap[sNodes[i][key]]=sNodes[i]}for(i=0,l=sNodes.length;i<l;i++){if(tmpMap[sNodes[i][parentKey]]&&sNodes[i][key]!=sNodes[i][parentKey]){if(!tmpMap[sNodes[i][parentKey]][childKey]){tmpMap[sNodes[i][parentKey]][childKey]=[]}tmpMap[sNodes[i][parentKey]][childKey].push(sNodes[i])}else{r.push(sNodes[i])}}return r}else{return[sNodes]}},_bindEvent:function(setting){for(var i=0,j=_init.bind.length;i<j;i++){_init.bind[i].apply(this,arguments)}},_unbindEvent:function(setting){for(var i=0,j=_init.unbind.length;i<j;i++){_init.unbind[i].apply(this,arguments)}},_bindTree:function(setting){var eventParam={treeId:setting.treeId},treeObj=setting.treeObj;
if(!setting.txtSelectedEnable){treeObj.bind("selectstart",function(e){var node;var n=e.originalEvent.srcElement.nodeName.toLowerCase();return(n==="input"||n==="textarea")}).css({"-moz-user-select":"-moz-none"})}treeObj.bind("click",eventParam,$.tree._proxy);treeObj.bind("dblclick",eventParam,$.tree._proxy);treeObj.bind("mouseover",eventParam,$.tree._proxy);treeObj.bind("mouseout",eventParam,$.tree._proxy);treeObj.bind("mousedown",eventParam,$.tree._proxy);treeObj.bind("mouseup",eventParam,$.tree._proxy);treeObj.bind("contextmenu",eventParam,$.tree._proxy)},_unbindTree:function(setting){var treeObj=setting.treeObj;treeObj.unbind("click",$.tree._proxy);treeObj.unbind("dblclick",$.tree._proxy);treeObj.unbind("mouseover",$.tree._proxy);treeObj.unbind("mouseout",$.tree._proxy);treeObj.unbind("mousedown",$.tree._proxy);treeObj.unbind("mouseup",$.tree._proxy);treeObj.unbind("contextmenu",$.tree._proxy)},_doProxy:function(e){var results=[];for(var i=0,j=_init.proxys.length;i<j;i++){var proxyResult=_init.proxys[i].apply(this,arguments);results.push(proxyResult);if(proxyResult.stop){break}}return results},_proxy:function(e){var setting=$.tree._getSetting(e.data.treeId);if(!$.tree._uCanDo(setting,e)){return true}var results=$.tree._doProxy(e),r=true,x=false;for(var i=0,l=results.length;i<l;i++){var proxyResult=results[i];if(proxyResult.nodeEventCallback){x=true;r=proxyResult.nodeEventCallback.apply(proxyResult,[e,proxyResult.node])&&r}if(proxyResult.treeEventCallback){x=true;r=proxyResult.treeEventCallback.apply(proxyResult,[e,proxyResult.node])&&r}}return r},_onSwitchNode:function(event,node){var setting=$.tree._getSetting(event.data.treeId);if(node.open){if($.tree._apply(setting.beforeCollapse,[setting.treeId,node],true)==false){return true}$.tree._getRoot(setting).expandTriggerFlag=true;$.tree._switchNode(setting,node)}else{if($.tree._apply(setting.beforeExpand,[setting.treeId,node],true)==false){return true}$.tree._getRoot(setting).expandTriggerFlag=true;$.tree._switchNode(setting,node)
}return true},_onClickNode:function(event,node){var setting=$.tree._getSetting(event.data.treeId),clickFlag=((setting.autoCancelSelected&&(event.ctrlKey||event.metaKey))&&$.tree._isSelectedNode(setting,node))?0:(setting.autoCancelSelected&&(event.ctrlKey||event.metaKey)&&setting.selectedMulti)?2:1;if($.tree._apply(setting.beforeClick,[setting.treeId,node,clickFlag],true)==false){return true}if(clickFlag===0){$.tree._cancelPreSelectedNode(setting,node)}else{$.tree._selectNode(setting,node,clickFlag===2)}setting.treeObj.trigger(consts.event.CLICK,[event,setting.treeId,node,clickFlag]);if(setting.clickExpand){$(setting.treeObj).tree("expandNode",node,null,null,null,true)}return true},_onTreeMousedown:function(event,node){var setting=$.tree._getSetting(event.data.treeId);if($.tree._apply(setting.beforeMouseDown,[setting.treeId,node],true)){$.tree._apply(setting.onMouseDown,[event,setting.treeId,node])}return true},_onTreeMouseup:function(event,node){var setting=$.tree._getSetting(event.data.treeId);if($.tree._apply(setting.beforeMouseUp,[setting.treeId,node],true)){$.tree._apply(setting.onMouseUp,[event,setting.treeId,node])}return true},_onTreeDblclick:function(event,node){var setting=$.tree._getSetting(event.data.treeId);if($.tree._apply(setting.beforeDblClick,[setting.treeId,node],true)){$.tree._apply(setting.onDblClick,[event,setting.treeId,node])}return true},_onTreeContextmenu:function(event,node){var setting=$.tree._getSetting(event.data.treeId);if($.tree._apply(setting.beforeRightClick,[setting.treeId,node],true)){$.tree._apply(setting.onRightClick,[event,setting.treeId,node])}return(typeof setting.onRightClick)!="function"},_onCheckNode:function(event,node){if(node.chkDisabled===true){return false}var setting=$.tree._getSetting(event.data.treeId),checkedKey=setting.keyChecked;if($.tree._apply(setting.beforeCheck,[setting.treeId,node],true)==false){return true}node[checkedKey]=!node[checkedKey];$.tree._checkNodeRelation(setting,node);var checkObj=$$(node,consts.id.CHECK,setting);
$.tree._setChkClass(setting,checkObj,node);$.tree._repairParentChkClassWithSelf(setting,node);setting.treeObj.trigger(consts.event.CHECK,[event,setting.treeId,node]);return true},_onMouseoverCheck:function(event,node){if(node.chkDisabled===true){return false}var setting=$.tree._getSetting(event.data.treeId),checkObj=$$(node,consts.id.CHECK,setting);node.check_Focus=true;$.tree._setChkClass(setting,checkObj,node);return true},_onMouseoutCheck:function(event,node){if(node.chkDisabled===true){return false}var setting=$.tree._getSetting(event.data.treeId),checkObj=$$(node,consts.id.CHECK,setting);node.check_Focus=false;$.tree._setChkClass(setting,checkObj,node);return true},_onHoverOverNode:function(event,node){var setting=$.tree._getSetting(event.data.treeId),root=$.tree._getRoot(setting);if(root.curHoverNode!=node){$.tree._onHoverOutNode(event)}root.curHoverNode=node;$.tree._addHoverDom(setting,node)},_onHoverOutNode:function(event,node){var setting=$.tree._getSetting(event.data.treeId),root=$.tree._getRoot(setting);if(root.curHoverNode&&!$.tree._isSelectedNode(setting,root.curHoverNode)){$.tree._removeTreeDom(setting,root.curHoverNode);root.curHoverNode=null}},_onMousedownNode:function(eventMouseDown,_node){var i,l,setting=$.tree._getSetting(eventMouseDown.data.treeId),root=$.tree._getRoot(setting),roots=$.tree._getRoots();if(eventMouseDown.button==2||!setting.editable||(!setting.dragIsCopy&&!setting.dragIsMove)){return true}var target=eventMouseDown.target,_nodes=$.tree._getRoot(setting).curSelectedList,nodes=[];if(!$.tree._isSelectedNode(setting,_node)){nodes=[_node]}else{for(i=0,l=_nodes.length;i<l;i++){if(_nodes[i].editNameFlag&&$.tree._eqs(target.tagName,"input")&&target.getAttribute("treeNode"+consts.id.INPUT)!==null){return true}nodes.push(_nodes[i]);if(nodes[0].parentTId!==_nodes[i].parentTId){nodes=[_node];break}}}$.tree._editNodeBlur=true;$.tree._cancelCurEditNode(setting);var doc=$(setting.treeObj.get(0).ownerDocument),body=$(setting.treeObj.get(0).ownerDocument.body),curNode,tmpArrow,tmpTarget,isOtherTree=false,targetSetting=setting,sourceSetting=setting,preNode,nextNode,preTmpTargetNodeId=null,preTmpMoveType=null,tmpTargetNodeId=null,moveType=consts.move.TYPE_INNER,mouseDownX=eventMouseDown.clientX,mouseDownY=eventMouseDown.clientY,startTime=(new Date()).getTime();
if($.tree._uCanDo(setting)){doc.bind("mousemove",_docMouseMove)}function _docMouseMove(event){if(root.dragFlag==0&&Math.abs(mouseDownX-event.clientX)<setting.dragMinMoveSize&&Math.abs(mouseDownY-event.clientY)<setting.dragMinMoveSize){return true}var i,l,tmpNode,tmpDom,tmpNodes,childKey=setting.keyChildren;body.css("cursor","pointer");if(root.dragFlag==0){if($.tree._apply(setting.beforeDrag,[setting.treeId,nodes],true)==false){_docMouseUp(event);return true}for(i=0,l=nodes.length;i<l;i++){if(i==0){root.dragNodeShowBefore=[]}tmpNode=nodes[i];if(tmpNode.isParent&&tmpNode.open){$.tree._expandCollapseNode(setting,tmpNode,!tmpNode.open);root.dragNodeShowBefore[tmpNode.tId]=true}else{root.dragNodeShowBefore[tmpNode.tId]=false}}root.dragFlag=1;roots.showHoverDom=false;$.tree._showIfameMask(setting,true);var isOrder=true,lastIndex=-1;if(nodes.length>1){var pNodes=nodes[0].parentTId?nodes[0].getParentNode()[childKey]:$.tree._getNodes(setting);tmpNodes=[];for(i=0,l=pNodes.length;i<l;i++){if(root.dragNodeShowBefore[pNodes[i].tId]!==undefined){if(isOrder&&lastIndex>-1&&(lastIndex+1)!==i){isOrder=false}tmpNodes.push(pNodes[i]);lastIndex=i}if(nodes.length===tmpNodes.length){nodes=tmpNodes;break}}}if(isOrder){preNode=nodes[0].getPreNode();nextNode=nodes[nodes.length-1].getNextNode()}curNode=$$("<ul class='treeDragUL'></ul>",setting);for(i=0,l=nodes.length;i<l;i++){tmpNode=nodes[i];tmpNode.editNameFlag=false;$.tree._selectNode(setting,tmpNode,i>0);$.tree._removeTreeDom(setting,tmpNode);if(i>setting.dragMaxShowNodeNum-1){continue}tmpDom=$$("<li id='"+tmpNode.tId+"_tmp'></li>",setting);tmpDom.append($$(tmpNode,consts.id.A,setting).clone());tmpDom.css("padding","0");tmpDom.children("#"+tmpNode.tId+consts.id.A).removeClass(consts.node.CURSELECTED);curNode.append(tmpDom);if(i==setting.dragMaxShowNodeNum-1){tmpDom=$$("<li id='"+tmpNode.tId+"_moretmp'><a>  ...  </a></li>",setting);curNode.append(tmpDom)}}curNode.attr("id",nodes[0].tId+consts.id.UL+"_tmp");curNode.addClass(setting.treeObj.attr("class"));
curNode.appendTo(body);tmpArrow=$$("<span class='tmpTreeMove_arrow'></span>",setting);tmpArrow.attr("id","treeMove_arrow_tmp");tmpArrow.appendTo(body);setting.treeObj.trigger(consts.event.DRAG,[event,setting.treeId,nodes])}if(root.dragFlag==1){if(tmpTarget&&tmpArrow.attr("id")==event.target.id&&tmpTargetNodeId&&(event.clientX+doc.scrollLeft()+2)>($("#"+tmpTargetNodeId+consts.id.A,tmpTarget).offset().left)){var xT=$("#"+tmpTargetNodeId+consts.id.A,tmpTarget);event.target=(xT.length>0)?xT.get(0):event.target}else{if(tmpTarget){tmpTarget.removeClass(consts.node.TMPTARGET_TREE);if(tmpTargetNodeId){$("#"+tmpTargetNodeId+consts.id.A,tmpTarget).removeClass(consts.node.TMPTARGET_NODE+"_"+consts.move.TYPE_PREV).removeClass(consts.node.TMPTARGET_NODE+"_"+_final.move.TYPE_NEXT).removeClass(consts.node.TMPTARGET_NODE+"_"+_final.move.TYPE_INNER)}}}tmpTarget=null;tmpTargetNodeId=null;isOtherTree=false;targetSetting=setting;var settings=$.tree._getSettings();for(var s in settings){if(settings[s].treeId&&settings[s].editable&&settings[s].treeId!=setting.treeId&&(event.target.id==settings[s].treeId||$(event.target).parents("#"+settings[s].treeId).length>0)){isOtherTree=true;targetSetting=settings[s]}}var docScrollTop=doc.scrollTop(),docScrollLeft=doc.scrollLeft(),treeOffset=targetSetting.treeObj.offset(),scrollHeight=targetSetting.treeObj.get(0).scrollHeight,scrollWidth=targetSetting.treeObj.get(0).scrollWidth,dTop=(event.clientY+docScrollTop-treeOffset.top),dBottom=(targetSetting.treeObj.height()+treeOffset.top-event.clientY-docScrollTop),dLeft=(event.clientX+docScrollLeft-treeOffset.left),dRight=(targetSetting.treeObj.width()+treeOffset.left-event.clientX-docScrollLeft),isTop=(dTop<setting.dragBorderMax&&dTop>setting.dragBorderMin),isBottom=(dBottom<setting.dragBorderMax&&dBottom>setting.dragBorderMin),isLeft=(dLeft<setting.dragBorderMax&&dLeft>setting.dragBorderMin),isRight=(dRight<setting.dragBorderMax&&dRight>setting.dragBorderMin),isTreeInner=dTop>setting.dragBorderMin&&dBottom>setting.dragBorderMin&&dLeft>setting.dragBorderMin&&dRight>setting.dragBorderMin,isTreeTop=(isTop&&targetSetting.treeObj.scrollTop()<=0),isTreeBottom=(isBottom&&(targetSetting.treeObj.scrollTop()+targetSetting.treeObj.height()+10)>=scrollHeight),isTreeLeft=(isLeft&&targetSetting.treeObj.scrollLeft()<=0),isTreeRight=(isRight&&(targetSetting.treeObj.scrollLeft()+targetSetting.treeObj.width()+10)>=scrollWidth);
if(event.target&&$.tree._isChildOrSelf(event.target,targetSetting.treeId)){var targetObj=event.target;while(targetObj&&targetObj.tagName&&!$.tree._eqs(targetObj.tagName,"li")&&targetObj.id!=targetSetting.treeId){targetObj=targetObj.parentNode}var canMove=true;for(i=0,l=nodes.length;i<l;i++){tmpNode=nodes[i];if(targetObj.id===tmpNode.tId){canMove=false;break}else{if($$(tmpNode,setting).find("#"+targetObj.id).length>0){canMove=false;break}}}if(canMove&&event.target&&$.tree._isChildOrSelf(event.target,targetObj.id+consts.id.A)){tmpTarget=$(targetObj);tmpTargetNodeId=targetObj.id}}tmpNode=nodes[0];if(isTreeInner&&$.tree._isChildOrSelf(event.target,targetSetting.treeId)){if(!tmpTarget&&(event.target.id==targetSetting.treeId||isTreeTop||isTreeBottom||isTreeLeft||isTreeRight)&&(isOtherTree||(!isOtherTree&&tmpNode.parentTId))){tmpTarget=targetSetting.treeObj}if(isTop){targetSetting.treeObj.scrollTop(targetSetting.treeObj.scrollTop()-10)}else{if(isBottom){targetSetting.treeObj.scrollTop(targetSetting.treeObj.scrollTop()+10)}}if(isLeft){targetSetting.treeObj.scrollLeft(targetSetting.treeObj.scrollLeft()-10)}else{if(isRight){targetSetting.treeObj.scrollLeft(targetSetting.treeObj.scrollLeft()+10)}}if(tmpTarget&&tmpTarget!=targetSetting.treeObj&&tmpTarget.offset().left<targetSetting.treeObj.offset().left){targetSetting.treeObj.scrollLeft(targetSetting.treeObj.scrollLeft()+tmpTarget.offset().left-targetSetting.treeObj.offset().left)}}curNode.css({top:(event.clientY+docScrollTop+3)+"px",left:(event.clientX+docScrollLeft+3)+"px"});var dX=0;var dY=0;if(tmpTarget&&tmpTarget.attr("id")!=targetSetting.treeId){var tmpTargetNode=tmpTargetNodeId==null?null:$.tree._getNodeCache(targetSetting,tmpTargetNodeId),isCopy=((event.ctrlKey||event.metaKey)&&setting.dragIsMove&&setting.dragIsCopy)||(!setting.dragIsMove&&setting.dragIsCopy),isPrev=!!(preNode&&tmpTargetNodeId===preNode.tId),isNext=!!(nextNode&&tmpTargetNodeId===nextNode.tId),isInner=(tmpNode.parentTId&&tmpNode.parentTId==tmpTargetNodeId),canPrev=(isCopy||!isNext)&&$.tree._apply(targetSetting.dragPrev,[targetSetting.treeId,nodes,tmpTargetNode],!!targetSetting.dragPrev),canNext=(isCopy||!isPrev)&&$.tree._apply(targetSetting.dragNext,[targetSetting.treeId,nodes,tmpTargetNode],!!targetSetting.dragNext),canInner=(isCopy||!isInner)&&!(targetSetting.keepLeaf&&!tmpTargetNode.isParent)&&$.tree._apply(targetSetting.dragInner,[targetSetting.treeId,nodes,tmpTargetNode],!!targetSetting.dragInner);
if(!canPrev&&!canNext&&!canInner){tmpTarget=null;tmpTargetNodeId="";moveType=consts.move.TYPE_INNER;tmpArrow.css({display:"none"});if(window.TreeMoveTimer){clearTimeout(window.TreeMoveTimer);window.TreeMoveTargetNodeTId=null}}else{var tmpTargetA=$("#"+tmpTargetNodeId+consts.id.A,tmpTarget),tmpNextA=tmpTargetNode.isLastNode?null:$("#"+tmpTargetNode.getNextNode().tId+consts.id.A,tmpTarget.next()),tmpTop=tmpTargetA.offset().top,tmpLeft=tmpTargetA.offset().left,prevPercent=canPrev?(canInner?0.25:(canNext?0.5:1)):-1,nextPercent=canNext?(canInner?0.75:(canPrev?0.5:0)):-1,dY_percent=(event.clientY+docScrollTop-tmpTop)/tmpTargetA.height();if((prevPercent==1||dY_percent<=prevPercent&&dY_percent>=-0.2)&&canPrev){dX=1-tmpArrow.width();dY=tmpTop-tmpArrow.height()/2;moveType=consts.move.TYPE_PREV}else{if((nextPercent==0||dY_percent>=nextPercent&&dY_percent<=1.2)&&canNext){dX=1-tmpArrow.width();dY=(tmpNextA==null||(tmpTargetNode.isParent&&tmpTargetNode.open))?(tmpTop+tmpTargetA.height()-tmpArrow.height()/2):(tmpNextA.offset().top-tmpArrow.height()/2);moveType=consts.move.TYPE_NEXT}else{dX=5-tmpArrow.width();dY=tmpTop;moveType=consts.move.TYPE_INNER}}tmpArrow.css({display:"block",top:dY+"px",left:(tmpLeft+dX)+"px"});if(setting.dragStyle=="line"){if(consts.move.TYPE_INNER==moveType){tmpArrow.removeClass("preNext_line").addClass("inner_line")}else{tmpArrow.removeClass("inner_line").addClass("preNext_line")}}tmpTargetA.addClass(consts.node.TMPTARGET_NODE+"_"+moveType);if(preTmpTargetNodeId!=tmpTargetNodeId||preTmpMoveType!=moveType){startTime=(new Date()).getTime()}if(tmpTargetNode&&tmpTargetNode.isParent&&moveType==consts.move.TYPE_INNER){var startTimer=true;if(window.TreeMoveTimer&&window.TreeMoveTargetNodeTId!==tmpTargetNode.tId){clearTimeout(window.TreeMoveTimer);window.TreeMoveTargetNodeTId=null}else{if(window.TreeMoveTimer&&window.TreeMoveTargetNodeTId===tmpTargetNode.tId){startTimer=false}}if(startTimer){window.TreeMoveTimer=setTimeout(function(){if(moveType!=consts.move.TYPE_INNER){return
}if(tmpTargetNode&&tmpTargetNode.isParent&&!tmpTargetNode.open&&(new Date()).getTime()-startTime>targetSetting.dragAutoOpenTime&&$.tree._apply(targetSetting.beforeDragOpen,[targetSetting.treeId,tmpTargetNode],true)){$.tree._switchNode(targetSetting,tmpTargetNode);if(targetSetting.dragAutoExpandTrigger){targetSetting.treeObj.trigger(consts.event.EXPAND,[targetSetting.treeId,tmpTargetNode])}}},targetSetting.dragAutoOpenTime+50);window.TreeMoveTargetNodeTId=tmpTargetNode.tId}}}}else{moveType=consts.move.TYPE_INNER;if(tmpTarget&&$.tree._apply(targetSetting.dragInner,[targetSetting.treeId,nodes,null],!!targetSetting.dragInner)){tmpTarget.addClass(consts.node.TMPTARGET_TREE)}else{tmpTarget=null}tmpArrow.css({display:"none"});if(window.TreeMoveTimer){clearTimeout(window.TreeMoveTimer);window.TreeMoveTargetNodeTId=null}}preTmpTargetNodeId=tmpTargetNodeId;preTmpMoveType=moveType;setting.treeObj.trigger(consts.event.DRAGMOVE,[event,setting.treeId,nodes])}return false}doc.bind("mouseup",_docMouseUp);function _docMouseUp(event){if(window.TreeMoveTimer){clearTimeout(window.TreeMoveTimer);window.TreeMoveTargetNodeTId=null}preTmpTargetNodeId=null;preTmpMoveType=null;doc.unbind("mousemove",_docMouseMove);doc.unbind("mouseup",_docMouseUp);doc.unbind("selectstart",_docSelect);body.css("cursor","auto");if(tmpTarget){tmpTarget.removeClass(consts.node.TMPTARGET_TREE);if(tmpTargetNodeId){$("#"+tmpTargetNodeId+consts.id.A,tmpTarget).removeClass(consts.node.TMPTARGET_NODE+"_"+consts.move.TYPE_PREV).removeClass(consts.node.TMPTARGET_NODE+"_"+_final.move.TYPE_NEXT).removeClass(consts.node.TMPTARGET_NODE+"_"+_final.move.TYPE_INNER)}}$.tree._showIfameMask(setting,false);roots.showHoverDom=true;if(root.dragFlag==0){return}root.dragFlag=0;var i,l,tmpNode;for(i=0,l=nodes.length;i<l;i++){tmpNode=nodes[i];if(tmpNode.isParent&&root.dragNodeShowBefore[tmpNode.tId]&&!tmpNode.open){$.tree._expandCollapseNode(setting,tmpNode,!tmpNode.open);delete root.dragNodeShowBefore[tmpNode.tId]}}if(curNode){curNode.remove()
}if(tmpArrow){tmpArrow.remove()}var isCopy=((event.ctrlKey||event.metaKey)&&setting.dragIsMove&&setting.dragIsCopy)||(!setting.dragIsMove&&setting.dragIsCopy);if(!isCopy&&tmpTarget&&tmpTargetNodeId&&nodes[0].parentTId&&tmpTargetNodeId==nodes[0].parentTId&&moveType==consts.move.TYPE_INNER){tmpTarget=null}if(tmpTarget){var dragTargetNode=tmpTargetNodeId==null?null:$.tree._getNodeCache(targetSetting,tmpTargetNodeId);if($.tree._apply(setting.beforeDrop,[targetSetting.treeId,nodes,dragTargetNode,moveType,isCopy],true)==false){$.tree._selectNodes(sourceSetting,nodes);return}var newNodes=isCopy?$.tree._clone(nodes):nodes;function dropCallback(){if(isOtherTree){if(!isCopy){for(var i=0,l=nodes.length;i<l;i++){$.tree._removeNode(setting,nodes[i])}}if(moveType==consts.move.TYPE_INNER){$.tree._addNodes(targetSetting,dragTargetNode,newNodes)}else{$.tree._addNodes(targetSetting,dragTargetNode.getParentNode(),newNodes);if(moveType==consts.move.TYPE_PREV){for(i=0,l=newNodes.length;i<l;i++){$.tree._moveNode(targetSetting,dragTargetNode,newNodes[i],moveType,false)}}else{for(i=-1,l=newNodes.length-1;i<l;l--){$.tree._moveNode(targetSetting,dragTargetNode,newNodes[l],moveType,false)}}}}else{if(isCopy&&moveType==consts.move.TYPE_INNER){$.tree._addNodes(targetSetting,dragTargetNode,newNodes)}else{if(isCopy){$.tree._addNodes(targetSetting,dragTargetNode.getParentNode(),newNodes)}if(moveType!=consts.move.TYPE_NEXT){for(i=0,l=newNodes.length;i<l;i++){$.tree._moveNode(targetSetting,dragTargetNode,newNodes[i],moveType,false)}}else{for(i=-1,l=newNodes.length-1;i<l;l--){$.tree._moveNode(targetSetting,dragTargetNode,newNodes[l],moveType,false)}}}}$.tree._selectNodes(targetSetting,newNodes);$$(newNodes[0],setting).focus().blur();setting.treeObj.trigger(consts.event.DROP,[event,targetSetting.treeId,newNodes,dragTargetNode,moveType,isCopy])}if(moveType==consts.move.TYPE_INNER&&$.tree._canAsync(targetSetting,dragTargetNode)){$.tree._asyncNode(targetSetting,dragTargetNode,false,dropCallback)}else{dropCallback()
}}else{$.tree._selectNodes(sourceSetting,nodes);setting.treeObj.trigger(consts.event.DROP,[event,setting.treeId,nodes,null,null,null])}}doc.bind("selectstart",_docSelect);function _docSelect(){return false}if(eventMouseDown.preventDefault){eventMouseDown.preventDefault()}return true},_apply:function(fun,param,defaultValue){if(fun==defaultValue&&!$.isFunction(fun)){return defaultValue}if(typeof(fun)=="undefined"||fun==null){return defaultValue}var _fn=$.coral.toFunction(fun);if(!$.isFunction(_fn)){return defaultValue}var ret=_fn.apply(coralTree,param?param:[]);return typeof(ret)=="undefined"?defaultValue:ret},_canAsync:function(setting,node){var childKey=setting.keyChildren;return(setting.asyncEnable&&node&&node.isParent&&!(node.zAsync||(node[childKey]&&node[childKey].length>0)))},_clone:function(obj){if(obj===null){return null}var o=$.tree._isArray(obj)?[]:{};for(var i in obj){o[i]=(obj[i] instanceof Date)?new Date(obj[i].getTime()):(typeof obj[i]==="object"?arguments.callee(obj[i]):obj[i])}return o},_eqs:function(str1,str2){return str1.toLowerCase()===str2.toLowerCase()},_isArray:function(arr){return Object.prototype.toString.apply(arr)==="[object Array]"},_$:function(node,exp,setting){if(!!exp&&typeof exp!="string"){setting=exp;exp=""}if(typeof node=="string"){return $(node,setting?setting.treeObj.get(0).ownerDocument:null)}else{return $("#"+node.tId+exp,setting?setting.treeObj:null)}},_getMDom:function(setting,curDom,targetExpr){if(!curDom){return null}while(curDom&&curDom.id!==setting.treeId){for(var i=0,l=targetExpr.length;curDom.tagName&&i<l;i++){if($.tree._eqs(curDom.tagName,targetExpr[i].tagName)&&curDom.getAttribute(targetExpr[i].attrName)!==null){return curDom}}curDom=curDom.parentNode}return null},_getNodeMainDom:function(target){return($(target).parent("li").get(0)||$(target).parentsUntil("li").parent().get(0))},_isChildOrSelf:function(dom,parentId){return($(dom).closest("#"+parentId).length>0)},_uCanDo:function(setting,e){return true},_getAbs:function(obj){var oRect=obj.getBoundingClientRect(),scrollTop=document.body.scrollTop+document.documentElement.scrollTop,scrollLeft=document.body.scrollLeft+document.documentElement.scrollLeft;
return[oRect.left+scrollLeft,oRect.top+scrollTop]},_inputFocus:function(inputObj){if(inputObj.get(0)){inputObj.focus();$.tree._setCursorPosition(inputObj.get(0),inputObj.val().length)}},_inputSelect:function(inputObj){if(inputObj.get(0)){inputObj.focus();inputObj.select()}},_setCursorPosition:function(obj,pos){if(obj.setSelectionRange){obj.focus();obj.setSelectionRange(pos,pos)}else{if(obj.createTextRange){var range=obj.createTextRange();range.collapse(true);range.moveEnd("character",pos);range.moveStart("character",pos);range.select()}}},_showIfameMask:function(setting,showSign){var root=$.tree._getRoot(setting);while(root.dragMaskList.length>0){root.dragMaskList[0].remove();root.dragMaskList.shift()}if(showSign){var iframeList=$$("iframe",setting);for(var i=0,l=iframeList.length;i<l;i++){var obj=iframeList.get(i),r=$.tree._getAbs(obj),dragMask=$$("<div id='treeMask_"+i+"' class='treeMask' style='top:"+r[1]+"px; left:"+r[0]+"px; width:"+obj.offsetWidth+"px; height:"+obj.offsetHeight+"px;'></div>",setting);dragMask.appendTo($$("body",setting));root.dragMaskList.push(dragMask)}}},_addNodes:function(setting,parentNode,newNodes,isSilent){if(setting.keepLeaf&&parentNode&&!parentNode.isParent){return}if(!$.tree._isArray(newNodes)){newNodes=[newNodes]}if(setting.simpleDataEnable){newNodes=$.tree._transformToTreeFormat(setting,newNodes)}if(parentNode){var target_switchObj=$$(parentNode,consts.id.SWITCH,setting),target_icoObj=$$(parentNode,consts.id.ICON,setting),target_ulObj=$$(parentNode,consts.id.UL,setting);if(!parentNode.open){$.tree._replaceSwitchClass(parentNode,target_switchObj,consts.arrow.RIGHT);$.tree._replaceIcoClass(parentNode,target_icoObj,consts.folder.CLOSE);parentNode.open=false;target_ulObj.css({display:"none"})}$.tree._addNodesData(setting,parentNode,newNodes);$.tree._createNodes(setting,parentNode.level+1,newNodes,parentNode);if(!isSilent){$.tree._expandCollapseParentNode(setting,parentNode,true)}}else{$.tree._addNodesData(setting,$.tree._getRoot(setting),newNodes);
$.tree._createNodes(setting,0,newNodes,null)}},_appendNodes:function(setting,level,nodes,parentNode,initFlag,openFlag){if(!nodes){return[]}var html=[],childKey=setting.keyChildren;for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i];if(initFlag){var tmpPNode=(parentNode)?parentNode:$.tree._getRoot(setting),tmpPChild=tmpPNode[childKey],isFirstNode=((tmpPChild.length==nodes.length)&&(i==0)),isLastNode=(i==(nodes.length-1));$.tree._initNode(setting,level,node,parentNode,isFirstNode,isLastNode,openFlag);$.tree._addNodeCache(setting,node)}var childHtml=[];if(node[childKey]&&node[childKey].length>0){childHtml=$.tree._appendNodes(setting,level+1,node[childKey],node,initFlag,openFlag&&node.open)}if(openFlag){$.tree._makeDOMNodeMainBefore(html,setting,node);$.tree._makeDOMNodeNameBefore(html,setting,node);$.tree._addDiyDom(html,setting,node);$.tree._makeDOMNodeLine(html,setting,node);$.tree._getBeforeA(setting,node,html);$.tree._getInnerBeforeA(setting,node,html);$.tree._makeDOMNodeIcon(html,setting,node);$.tree._getInnerAfterA(setting,node,html);$.tree._makeDOMNodeNameAfter(html,setting,node);$.tree._getAfterA(setting,node,html);if(node.isParent&&node.open){$.tree._makeUlHtml(setting,node,html,childHtml.join(""))}$.tree._makeDOMNodeMainAfter(html,setting,node);$.tree._addCreatedNode(setting,node)}}return html},_appendParentULDom:function(setting,node){var html=[],nObj=$$(node,setting);if(!nObj.get(0)&&!!node.parentTId){$.tree._appendParentULDom(setting,node.getParentNode());nObj=$$(node,setting)}var ulObj=$$(node,consts.id.UL,setting);if(ulObj.get(0)){ulObj.remove()}var childKey=setting.keyChildren,childHtml=$.tree._appendNodes(setting,node.level+1,node[childKey],node,false,true);$.tree._makeUlHtml(setting,node,html,childHtml.join(""));nObj.append(html.join(""))},_asyncNode:function(setting,node,isSilent,callback,opts){var opts=opts||{};var i,l;var isInit=setting.isInit;if(node&&!node.isParent){$.tree._apply(callback);return false}else{if(node&&node.isAjaxing){return false}else{if($.tree._apply(setting.beforeAsync,[setting.treeId,node],true)==false){$.tree._apply(callback);
return false}}}if(node){node.isAjaxing=true;var icoObj=$$(node,consts.id.ICON,setting);icoObj.attr({style:"","class":consts.className.BUTTON+" "+consts.className.ICO_LOADING})}var tmpParam={},asyncOtherParam=opts.asyncOtherParam||setting.asyncOtherParam;var autoParams=setting.asyncAutoParam.split(",");var isInit=setting.isInit;for(i=0,l=autoParams.length;node&&i<l;i++){var pKey=autoParams[i].split("="),spKey=pKey;if(pKey.length>1){spKey=pKey[1];pKey=pKey[0]}tmpParam[spKey]=node[pKey]}if($.tree._isArray(asyncOtherParam)){for(i=0,l=asyncOtherParam.length;i<l;i+=2){tmpParam[asyncOtherParam[i]]=asyncOtherParam[i+1]}}else{for(var p in asyncOtherParam){tmpParam[p]=asyncOtherParam[p]}}var _tmpV=$.tree._getRoot(setting)._ver,asyncUrl=$.tree._apply(setting.asyncUrl,[setting.treeId,node],setting.asyncUrl);$.ajax({contentType:setting.asyncContentType,type:setting.asyncType,url:asyncUrl,data:tmpParam,dataType:setting.asyncDataType,success:function(msg){if(_tmpV!=$.tree._getRoot(setting)._ver){return}var newNodes=[];try{if(!msg||msg.length==0){newNodes=[]}else{if(typeof msg=="string"){newNodes=eval("("+msg+")")}else{newNodes=msg}}}catch(err){newNodes=msg}if(node){node.isAjaxing=null;node.zAsync=true}$.tree._setNodeLineIcos(setting,node);if(newNodes&&newNodes!==""){if(isInit){newNodes=$.tree._createRootNodes(setting,newNodes)}newNodes=$.tree._apply(setting.asyncDataFilter,[setting.treeId,node,newNodes],newNodes);$.tree._addNodes(setting,node,!!newNodes?$.tree._clone(newNodes):[],!!isSilent)}else{if(isInit){newNodes=$.tree._createRootNodes(setting,newNodes)}$.tree._addNodes(setting,node,rootNodes,!!isSilent)}if(opts.onLoad){$.tree._apply(opts.onLoad,[setting.treeId,node,msg])}else{setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg])}$.tree._apply(callback)},error:function(XMLHttpRequest,textStatus,errorThrown){if(_tmpV!=$.tree._getRoot(setting)._ver){return}if(node){node.isAjaxing=null}$.tree._setNodeLineIcos(setting,node);setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,XMLHttpRequest,textStatus,errorThrown])
}});return true},_addEditBtn:function(setting,node){if(node.editNameFlag||$$(node,consts.id.EDIT,setting).length>0){return}if(!$.tree._apply(setting.showRenameBtn,[setting.treeId,node],setting.showRenameBtn)){return}var aObj=$$(node,consts.id.A,setting),editStr="<span class='"+consts.className.BUTTON+" "+consts.editIcon+" edit' id='"+node.tId+consts.id.EDIT+"' title='"+$.tree._apply(setting.renameTitle,[setting.treeId,node],setting.renameTitle)+"' treeNode"+consts.id.EDIT+" style='display:none;'></span>";aObj.append(editStr);$$(node,consts.id.EDIT,setting).bind("click",function(){if(!$.tree._uCanDo(setting)||$.tree._apply(setting.beforeEditName,[setting.treeId,node],true)==false){return false}$.tree._editNode(setting,node);return false}).show()},_addRemoveBtn:function(setting,node){if(node.editNameFlag||$$(node,consts.id.REMOVE,setting).length>0){return}if(!$.tree._apply(setting.showRemoveBtn,[setting.treeId,node],setting.showRemoveBtn)){return}var aObj=$$(node,consts.id.A,setting),removeStr="<span class='"+consts.className.BUTTON+" "+consts.removeIcon+" remove' id='"+node.tId+consts.id.REMOVE+"' title='"+$.tree._apply(setting.removeTitle,[setting.treeId,node],setting.removeTitle)+"' treeNode"+consts.id.REMOVE+" style='display:none;'></span>";aObj.append(removeStr);$$(node,consts.id.REMOVE,setting).bind("click",function(){if(!$.tree._uCanDo(setting)||$.tree._apply(setting.beforeRemove,[setting.treeId,node],true)==false){return false}$.tree._removeNode(setting,node);setting.treeObj.trigger(consts.event.REMOVE,[setting.treeId,node]);return false}).bind("mousedown",function(eventMouseDown){return true}).show()},_addHoverDom:function(setting,node){if($.tree._getRoots().showHoverDom){node.isHover=true;if(setting.editable){$.tree._addEditBtn(setting,node);$.tree._addRemoveBtn(setting,node)}$$(node,consts.id.A,setting).addClass(consts.node.CURHOVER);$.tree._apply(setting.addHoverDom,[setting.treeId,node])}},_cancelPreSelectedNode:function(setting,node){var list=$.tree._getRoot(setting).curSelectedList;
for(var i=0,j=list.length-1;j>=i;j--){if(!node||node===list[j]){$$(list[j],consts.id.A,setting).removeClass(consts.node.CURSELECTED);if(node){$.tree._removeSelectedNode(setting,node);break}}}if(!node){$.tree._getRoot(setting).curSelectedList=[]}},_createNodeCallback:function(setting){if(!!setting.onNodeCreated||!!setting.addDiyDom){var root=$.tree._getRoot(setting);while(root.createdNodes.length>0){var node=root.createdNodes.shift();$.tree._apply(setting.addDiyDom,[setting.treeId,node]);if(!!setting.onNodeCreated){setting.treeObj.trigger(consts.event.NODECREATED,[setting.treeId,node])}}}},_createRootNodes:function(setting,nodes){if(setting.showRootNode==true){if(setting.rootNode&&typeof(setting.rootNode)!=="boolean"){setting.rootNode.children=nodes;nodes=[setting.rootNode]}}else{if(typeof(setting.rootNode)=="boolean"&&setting.rootNode){if(nodes.length>=1){if(nodes[0].children&&nodes[0].children.length>0){nodes=nodes[0].children}else{nodes=[]}}}}return nodes},_createNodes:function(setting,level,nodes,parentNode){if(!nodes||nodes.length==0){return}var root=$.tree._getRoot(setting),childKey=setting.keyChildren,openFlag=!parentNode||parentNode.open||!!$$(parentNode[childKey][0],setting).get(0);root.createdNodes=[];var treeHtml=$.tree._appendNodes(setting,level,nodes,parentNode,true,openFlag);if(!parentNode){setting.treeObj.append(treeHtml.join(""))}else{var ulObj=$$(parentNode,consts.id.UL,setting);if(ulObj.get(0)){ulObj.append(treeHtml.join(""))}}setting.isInit=false;$.tree._createNodeCallback(setting)},_checkNodeRelation:function(setting,node){var pNode,i,l,childKey=setting.keyChildren,checkedKey=setting.keyChecked,r=consts.radio;if(setting.chkStyle==r.STYLE){var checkedList=$.tree._getRadioCheckedList(setting);if(node[checkedKey]){if(setting.radioType==r.TYPE_ALL){for(i=checkedList.length-1;i>=0;i--){pNode=checkedList[i];if(pNode[checkedKey]&&pNode!=node){pNode[checkedKey]=false;checkedList.splice(i,1);$.tree._setChkClass(setting,$$(pNode,consts.id.CHECK,setting),pNode);
if(pNode.parentTId!=node.parentTId){$.tree._repairParentChkClassWithSelf(setting,pNode)}}}checkedList.push(node)}else{var parentNode=(node.parentTId)?node.getParentNode():$.tree._getRoot(setting);for(i=0,l=parentNode[childKey].length;i<l;i++){pNode=parentNode[childKey][i];if(pNode[checkedKey]&&pNode!=node){pNode[checkedKey]=false;$.tree._setChkClass(setting,$$(pNode,consts.id.CHECK,setting),pNode)}}}}else{if(setting.radioType==r.TYPE_ALL){for(i=0,l=checkedList.length;i<l;i++){if(node==checkedList[i]){checkedList.splice(i,1);break}}}}}else{if(node[checkedKey]&&(!node[childKey]||node[childKey].length==0||setting.chkboxType.Y.indexOf("s")>-1)){$.tree._setSonNodeCheckBox(setting,node,true)}if(!node[checkedKey]&&(!node[childKey]||node[childKey].length==0||setting.chkboxType.N.indexOf("s")>-1)){$.tree._setSonNodeCheckBox(setting,node,false)}if(node[checkedKey]&&setting.chkboxType.Y.indexOf("p")>-1){$.tree._setParentNodeCheckBox(setting,node,true)}if(!node[checkedKey]&&setting.chkboxType.N.indexOf("p")>-1){$.tree._setParentNodeCheckBox(setting,node,false)}}},_cancelCurEditNode:function(setting,forceName,isCancel){var root=$.tree._getRoot(setting),nameKey=setting.keyName,node=root.curEditNode;if(node){var inputObj=root.curEditInput,newName=forceName?forceName:(isCancel?node[nameKey]:inputObj.val());if($.tree._apply(setting.beforeReName,[setting.treeId,node,newName,isCancel],true)===false){return false}else{node[nameKey]=newName;setting.treeObj.trigger(consts.event.RENAME,[setting.treeId,node,isCancel])}var aObj=$$(node,consts.id.A,setting);aObj.removeClass(consts.node.CURSELECTED_EDIT);inputObj.unbind();$.tree._setNodeName(setting,node);node.editNameFlag=false;root.curEditNode=null;root.curEditInput=null;$.tree._selectNode(setting,node,false)}root.noSelection=true;return true},_editNode:function(setting,node){var root=$.tree._getRoot(setting);$.tree._editNodeBlur=false;if($.tree._isSelectedNode(setting,node)&&root.curEditNode==node&&node.editNameFlag){setTimeout(function(){$.tree._inputFocus(root.curEditInput)
},0);return}var nameKey=setting.keyName;node.editNameFlag=true;$.tree._removeTreeDom(setting,node);$.tree._cancelCurEditNode(setting);$.tree._selectNode(setting,node,false);$$(node,consts.id.SPAN,setting).html("<input type=text class='rename' id='"+node.tId+consts.id.INPUT+"' treeNode"+consts.id.INPUT+" >");var inputObj=$$(node,consts.id.INPUT,setting);inputObj.attr("value",node[nameKey]);if(setting.editNameSelectAll){$.tree._inputSelect(inputObj)}else{$.tree._inputFocus(inputObj)}inputObj.bind("blur",function(event){if(!$.tree._editNodeBlur){$.tree._cancelCurEditNode(setting)}}).bind("keydown",function(event){if(event.keyCode=="13"){$.tree._editNodeBlur=true;$.tree._cancelCurEditNode(setting)}else{if(event.keyCode=="27"){$.tree._cancelCurEditNode(setting,null,true)}}}).bind("click",function(event){return false}).bind("dblclick",function(event){return false});$$(node,consts.id.A,setting).addClass(consts.node.CURSELECTED_EDIT);root.curEditInput=inputObj;root.noSelection=false;root.curEditNode=node},_destroy:function(setting){if(!setting){return}$.tree._initCache(setting);$.tree._initRoot(setting);$.tree._unbindTree(setting);$.tree._unbindEvent(setting);setting.treeObj.empty();delete settings[setting.treeId]},_expandCollapseNode:function(setting,node,expandFlag,animateFlag,callback){var root=$.tree._getRoot(setting),childKey=setting.keyChildren;if(!node){$.tree._apply(callback,[]);return}if(root.expandTriggerFlag){var _callback=callback;callback=function(){if(_callback){_callback()}if(node.open){setting.treeObj.trigger(consts.event.EXPAND,[setting.treeId,node])}else{setting.treeObj.trigger(consts.event.COLLAPSE,[setting.treeId,node])}};root.expandTriggerFlag=false}if(!node.open&&node.isParent&&((!$$(node,consts.id.UL,setting).get(0))||(node[childKey]&&node[childKey].length>0&&!$$(node[childKey][0],setting).get(0)))){$.tree._appendParentULDom(setting,node);$.tree._createNodeCallback(setting)}if(node.open==expandFlag){$.tree._apply(callback,[]);return}var ulObj=$$(node,consts.id.UL,setting),switchObj=$$(node,consts.id.SWITCH,setting),icoObj=$$(node,consts.id.ICON,setting);
if(node.isParent){node.open=!node.open;if(node.iconOpen&&node.iconClose){icoObj.attr("style",$.tree._makeNodeIcoStyle(setting,node))}if(node.open){$.tree._replaceSwitchClass(node,switchObj,consts.arrow.DOWN);$.tree._replaceIcoClass(node,icoObj,consts.folder.OPEN);if(animateFlag==false||setting.expandSpeed==""){ulObj.show();$.tree._apply(callback,[])}else{if(node[childKey]&&node[childKey].length>0){ulObj.slideDown(setting.expandSpeed,callback)}else{ulObj.show();$.tree._apply(callback,[])}}}else{$.tree._replaceSwitchClass(node,switchObj,consts.arrow.RIGHT);$.tree._replaceIcoClass(node,icoObj,consts.folder.CLOSE);if(animateFlag==false||setting.expandSpeed==""||!(node[childKey]&&node[childKey].length>0)){ulObj.hide();$.tree._apply(callback,[])}else{ulObj.slideUp(setting.expandSpeed,callback)}}}else{$.tree._apply(callback,[])}},_expandCollapseParentNode:function(setting,node,expandFlag,animateFlag,callback){if(!node){return}if(!node.parentTId){$.tree._expandCollapseNode(setting,node,expandFlag,animateFlag,callback);return}else{$.tree._expandCollapseNode(setting,node,expandFlag,animateFlag)}if(node.parentTId){$.tree._expandCollapseParentNode(setting,node.getParentNode(),expandFlag,animateFlag,callback)}},_expandCollapseSonNode:function(setting,node,expandFlag,animateFlag,callback){var root=$.tree._getRoot(setting),childKey=setting.keyChildren,treeNodes=(node)?node[childKey]:root[childKey],selfAnimateSign=(node)?false:animateFlag,expandTriggerFlag=$.tree._getRoot(setting).expandTriggerFlag;$.tree._getRoot(setting).expandTriggerFlag=false;if(treeNodes){for(var i=0,l=treeNodes.length;i<l;i++){if(treeNodes[i]){$.tree._expandCollapseSonNode(setting,treeNodes[i],expandFlag,selfAnimateSign)}}}$.tree._getRoot(setting).expandTriggerFlag=expandTriggerFlag;$.tree._expandCollapseNode(setting,node,expandFlag,animateFlag,callback)},_makeDOMNodeIcon:function(html,setting,node){var nameStr=$.tree._getNodeName(setting,node),name=setting.nameIsHTML?nameStr:nameStr.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
if(setting.formatter){name=$.tree._apply(setting.formatter,[setting,node,name],setting.formatter)}html.push("<span id='",node.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",$.tree._makeNodeIcoClass(setting,node),"' style='",$.tree._makeNodeIcoStyle(setting,node),"'></span><span id='",node.tId,consts.id.SPAN,"'>",name,"</span>")},_makeDOMNodeLine:function(html,setting,node){html.push("<span id='",node.tId,consts.id.SWITCH,"' title='' class='",$.tree._makeNodeLineClass(setting,node),"' treeNode",consts.id.SWITCH,"></span>")},_makeDOMNodeMainAfter:function(html,setting,node){html.push("</li>")},_makeDOMNodeMainBefore:function(html,setting,node){html.push("<li ",(node.hidden?"style='display:none;' ":""),"id='",node.tId,"' class='",consts.className.LEVEL,node.level,"' tabindex='0' hidefocus='true' treenode>")},_makeDOMNodeNameAfter:function(html,setting,node){html.push("</a>")},_makeDOMNodeNameBefore:function(html,setting,node){var title=$.tree._getNodeTitle(setting,node),url=$.tree._makeNodeUrl(setting,node),fontcss=$.tree._makeNodeFontCss(setting,node),fontStyle=[];for(var f in fontcss){fontStyle.push(f,":",fontcss[f],";")}html.push("<a id='",node.tId,consts.id.A,"' class='",consts.className.LEVEL,node.level,"' treeNode",consts.id.A,' onclick="',(node.click||""),'" ',((url!=null&&url.length>0)?"href='"+url+"'":"")," target='",$.tree._makeNodeTarget(node),"' style='",fontStyle.join(""),"'");if($.tree._apply(setting.showTitle,[setting.treeId,node],setting.showTitle)&&title){html.push("title='",title.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'")}html.push(">")},_addDiyDom:function(html,setting,node){if(node.level>0){html.push($.tree._getIndent(setting,node))}},_getIndent:function(setting,node){var spaceWidth=16;if(node.getParentNode()){var html="",lineCss,lineClass=["cui-icon"];if(node.getParentNode().getNextNode()){if(setting.showLine){lineClass.push(consts.line.LINE)}else{lineClass.push(consts.line.NOLINE)}html="<span class='treeLine "+lineClass.join("-")+"' style='width:"+spaceWidth+"px;'></span>"
}else{html="<span class='treeIndent' style='width:"+spaceWidth+"px;'></span>"}return $.tree._getIndent(setting,node.getParentNode())+html}else{return""}},_makeNodeFontCss:function(setting,node){var fontCss=$.tree._apply(setting.fontCss,[setting.treeId,node],setting.fontCss);return(fontCss&&((typeof fontCss)!="function"))?fontCss:{}},_makeNodeIcoClass:function(setting,node){var icon=(node.isParent&&node.iconOpen&&node.iconClose)?(node.open?node.iconOpen:node.iconClose):node.icon,nodeIcon=node.isParent?" coral-tree-icon-parent":" coral-tree-icon-leaf";if(!icon){var icoCss=["cui-icon"];if(!node.isAjaxing){icoCss[0]=(node.iconSkin?node.iconSkin+"-":"")+icoCss[0];if(setting.showIcon){if(node.isParent){icoCss.push(node.open?consts.folder.OPEN:consts.folder.CLOSE)}else{icoCss.push(consts.folder.FILE)}}}return consts.className.BUTTON+nodeIcon+" "+icoCss.join("-")}else{if(setting.iconUrl==true){return consts.className.BUTTON}else{return consts.className.BUTTON+" "+icon}}},_makeNodeIcoStyle:function(setting,node){var icoStyle=[];if(!node.isAjaxing){var icon=(node.isParent&&node.iconOpen&&node.iconClose)?(node.open?node.iconOpen:node.iconClose):node.icon;if(icon){if(setting.iconUrl==true){icoStyle.push("background:url(",icon,") 0 0 no-repeat;")}else{$.tree._makeNodeIcoClass(setting,node)}}if(setting.showIcon==false||!$.tree._apply(setting.showIcon,[setting.treeId,node],true)){icoStyle.push("width:0px;height:0px;")}}return icoStyle.join("")},_makeNodeLineClass:function(setting,node){var lineClass=[],classPix="cui-icon-";if(setting.showLine==true){if(node.isParent){lineClass.push(node.open?consts.arrow.DOWN:consts.arrow.RIGHT)}else{if(node.isLastNode){lineClass.push(consts.line.BOTTOM);classPix="cui-icon-"}else{lineClass.push(consts.line.CENTER);classPix="cui-icon-"}}}else{if(node.isParent){lineClass.push(node.open?consts.arrow.DOWN:consts.arrow.RIGHT)}else{lineClass.push(consts.folder.DOCU)}}return $.tree._makeNodeLineClassEx(node)+classPix+lineClass.join("-")},_makeNodeLineClassEx:function(node){return consts.className.BUTTON+" "+consts.className.LEVEL+node.level+" "+consts.className.SWITCH+" "
},_makeNodeTarget:function(node){return(node.target||"_blank")},_makeNodeUrl:function(setting,node){var urlKey=setting.keyUrl;return node[urlKey]?node[urlKey]:null},_makeUlHtml:function(setting,node,html,content){html.push("<ul id='",node.tId,consts.id.UL,"' class='",consts.className.LEVEL,node.level," ",$.tree._makeUlLineClass(setting,node),"' style='display:",(node.open?"block":"none"),"'>");html.push(content);html.push("</ul>")},_makeUlLineClass:function(setting,node){return((setting.showLine&&!node.isLastNode)?consts.line.LINE:"")},_makeChkClass:function(setting,node){var checkedKey=setting.keyChecked,chkName,c=consts.checkbox,r=consts.radio,fullStyle="",stateCls="";if(setting.chkStyle==r.STYLE){fullStyle=(node.check_Child_State<1)?c.CHECKED:c.PARTIAL;chkName="cui-icon-"+setting.chkStyle+"-"+(node[checkedKey]?c.CHECKED:c.UNCHECKED);chkName+=fullStyle==c.PARTIAL?c.PARTIAL:""}else{if(node.halfCheck){fullStyle=c.PARTIAL}else{fullStyle=node[checkedKey]?((node.check_Child_State===2||node.check_Child_State===-1)?c.CHECKED:c.PARTIAL):((node.check_Child_State<1)?c.UNCHECKED:c.PARTIAL)}chkName="cui-icon-"+setting.chkStyle+"-"+(fullStyle==c.PARTIAL?((node[checkedKey]?c.CHECKED:c.UNCHECKED)+c.PARTIAL):fullStyle)}stateCls=(node.check_Focus&&node.chkDisabled!==true)?c.FOCUS:(node.chkDisabled==true?c.DISABLED:c.DEFAULT);return consts.className.BUTTON+" "+stateCls+" "+chkName},_addLine:function(setting,node,oldLevel){var i=typeof(oldLevel)=="undefined"?1:0;var diff="";var arr=$.tree._transformToArrayFormat(setting,node);if(oldLevel!=null&&node.level!=null){diff=(typeof(oldLevel)=="undefined"?0:oldLevel)-(typeof(node.level)=="undefined"?0:node.level)}for(i;i<arr.length;i++){$$(arr[i],consts.id.A,setting).find("span:lt("+(arr[i].level+diff)+")").remove();$$(arr[i],consts.id.A,setting).prepend($.tree._getIndent(setting,arr[i]))}},_lineClass:function(node,showLine){var lineClass=[];if(node.isParent){lineClass=node.open?consts.arrow.DOWN:consts.arrow.RIGHT}else{if(showLine){if(node.level==0&&node.isLastNode&&node.isFirstNode){lineClass=consts.line.NOLINE
}else{if(node.level==0&&node.isFirstNode&&!node.isLastNode){lineClass=consts.line.ROOTS}else{if(node.isLastNode){lineClass=consts.line.BOTTOM}else{lineClass=consts.line.CENTER}}}}}return lineClass},_moveNode:function(setting,targetNode,node,moveType,animateFlag,isSilent){var root=$.tree._getRoot(setting),html=[],childKey=setting.keyChildren;if(targetNode==node){return}if(setting.keepLeaf&&targetNode&&!targetNode.isParent&&moveType==consts.move.TYPE_INNER){return}var oldParentNode=(node.parentTId?node.getParentNode():root),oldLevelP=oldParentNode.level;targetNodeIsRoot=(targetNode===null||targetNode==root);if(targetNodeIsRoot&&targetNode===null){targetNode=root}if(targetNodeIsRoot){moveType=consts.move.TYPE_INNER}var targetParentNode=(targetNode.parentTId?targetNode.getParentNode():root);if(moveType!=consts.move.TYPE_PREV&&moveType!=consts.move.TYPE_NEXT){moveType=consts.move.TYPE_INNER}if(moveType==consts.move.TYPE_INNER){if(targetNodeIsRoot){node.parentTId=null}else{if(!targetNode.isParent){targetNode.isParent=true;targetNode.open=!!targetNode.open;$.tree._setNodeLineIcos(setting,targetNode)}node.parentTId=targetNode.tId}}var targetObj,target_ulObj;if(targetNodeIsRoot){targetObj=setting.treeObj;target_ulObj=targetObj}else{if(!isSilent&&moveType==consts.move.TYPE_INNER){$.tree._expandCollapseNode(setting,targetNode,true,false)}else{if(!isSilent){$.tree._expandCollapseNode(setting,targetNode.getParentNode(),true,false)}}targetObj=$$(targetNode,setting);target_ulObj=$$(targetNode,consts.id.UL,setting);if(!!targetObj.get(0)&&!target_ulObj.get(0)){var ulstr=[];$.tree._makeUlHtml(setting,targetNode,ulstr,"");targetObj.append(ulstr.join(""))}target_ulObj=$$(targetNode,consts.id.UL,setting)}var nodeDom=$$(node,setting);if(!nodeDom.get(0)){nodeDom=$.tree._appendNodes(setting,node.level,[node],null,false,true).join("")}else{if(!targetObj.get(0)){nodeDom.remove()}}if(target_ulObj.get(0)&&moveType==consts.move.TYPE_INNER){target_ulObj.append(nodeDom)}else{if(targetObj.get(0)&&moveType==consts.move.TYPE_PREV){targetObj.before(nodeDom)
}else{if(targetObj.get(0)&&moveType==consts.move.TYPE_NEXT){targetObj.after(nodeDom)}}}var i,l,lineClass=[],tmpSrcIndex=-1,tmpTargetIndex=0,oldNeighbor=null,newNeighbor=null,oldNeighborLevel=null,newNeighborLevel=null,oldLevel=node.level;if(node.isFirstNode){tmpSrcIndex=0;if(oldParentNode[childKey].length>1){oldNeighbor=oldParentNode[childKey][1];oldNeighbor.isFirstNode=true;oldNeighborLevel=oldNeighbor.level}}else{if(node.isLastNode){tmpSrcIndex=oldParentNode[childKey].length-1;oldNeighbor=oldParentNode[childKey][tmpSrcIndex-1];oldNeighbor.isLastNode=true;oldNeighborLevel=oldNeighbor.level}else{for(i=0,l=oldParentNode[childKey].length;i<l;i++){if(oldParentNode[childKey][i].tId==node.tId){tmpSrcIndex=i;break}}}}if(tmpSrcIndex>=0){oldParentNode[childKey].splice(tmpSrcIndex,1)}if(moveType!=consts.move.TYPE_INNER){for(i=0,l=targetParentNode[childKey].length;i<l;i++){if(targetParentNode[childKey][i].tId==targetNode.tId){tmpTargetIndex=i}}}if(moveType==consts.move.TYPE_INNER){if(!targetNode[childKey]){targetNode[childKey]=new Array()}if(targetNode[childKey].length>0){newNeighbor=targetNode[childKey][targetNode[childKey].length-1];newNeighbor.isLastNode=false;newNeighborLevel=newNeighbor.level}targetNode[childKey].splice(targetNode[childKey].length,0,node);node.isLastNode=true;node.isFirstNode=(targetNode[childKey].length==1)}else{if(targetNode.isFirstNode&&moveType==consts.move.TYPE_PREV){targetParentNode[childKey].splice(tmpTargetIndex,0,node);newNeighbor=targetNode;newNeighbor.isFirstNode=false;newNeighborLevel=newNeighbor.level;node.parentTId=targetNode.parentTId;node.isFirstNode=true;node.isLastNode=false}else{if(targetNode.isLastNode&&moveType==consts.move.TYPE_NEXT){targetParentNode[childKey].splice(tmpTargetIndex+1,0,node);newNeighbor=targetNode;newNeighbor.isLastNode=false;newNeighborLevel=newNeighbor.level;node.parentTId=targetNode.parentTId;node.isFirstNode=false;node.isLastNode=true}else{if(moveType==consts.move.TYPE_PREV){targetParentNode[childKey].splice(tmpTargetIndex,0,node)
}else{targetParentNode[childKey].splice(tmpTargetIndex+1,0,node)}node.parentTId=targetNode.parentTId;node.isFirstNode=false;node.isLastNode=false}}}$.tree._fixPIdKeyValue(setting,node);$.tree._setSonNodeLevel(setting,node.getParentNode(),node);var nodeObj=$$(node,consts.id.SWITCH,setting);$.tree._setNodeLineIcos(setting,node);$.tree._repairNodeLevelClass(setting,node,oldLevel);$.tree._addLine(setting,node,oldLevel);lineClass=$.tree._lineClass(node,setting.showLine);$.tree._replaceSwitchClass(node,nodeObj,lineClass);if(!setting.keepParent&&oldParentNode[childKey].length<1){oldParentNode.isParent=false;oldParentNode.open=false;var tmp_ulObj=$$(oldParentNode,consts.id.UL,setting),tmp_switchObj=$$(oldParentNode,consts.id.SWITCH,setting),tmp_icoObj=$$(oldParentNode,consts.id.ICON,setting);lineClass=$.tree._lineClass(oldParentNode,setting.showLine);$.tree._replaceSwitchClass(oldParentNode,tmp_switchObj,lineClass);$.tree._replaceIcoClass(oldParentNode,tmp_icoObj,consts.folder.FILE);tmp_ulObj.css("display","none");$.tree._addLine(setting,oldParentNode,oldLevelP)}else{if(oldNeighbor){$.tree._setNodeLineIcos(setting,oldNeighbor);$.tree._addLine(setting,oldNeighbor,oldNeighborLevel)}}if(newNeighbor){tmp_switchObj=$$(newNeighbor,consts.id.SWITCH,setting);$.tree._setNodeLineIcos(setting,newNeighbor);$.tree._addLine(setting,newNeighbor,newNeighborLevel);lineClass=$.tree._lineClass(newNeighbor,setting.showLine);$.tree._replaceSwitchClass(newNeighbor,tmp_switchObj,lineClass)}if(!!setting.check&&setting.checkable&&$.tree._repairChkClass){$.tree._repairChkClass(setting,oldParentNode);$.tree._repairParentChkClassWithSelf(setting,oldParentNode);if(oldParentNode!=node.parent){$.tree._repairParentChkClassWithSelf(setting,node)}}if(!isSilent){$.tree._expandCollapseParentNode(setting,node.getParentNode(),true,animateFlag)}},_removeChildNodes:function(setting,node){if(!node){return}var childKey=setting.keyChildren,nodes=node[childKey];if(!nodes){return}for(var i=0,l=nodes.length;i<l;i++){$.tree._removeNodeCache(setting,nodes[i])
}$.tree._removeSelectedNode(setting);delete node[childKey];if(!setting.keepParent){node.isParent=false;node.open=false;var tmp_switchObj=$$(node,consts.id.SWITCH,setting),tmp_icoObj=$$(node,consts.id.ICON,setting);$.tree._replaceSwitchClass(node,tmp_switchObj,consts.line.CENTER);$.tree._replaceIcoClass(node,tmp_icoObj,consts.line.CENTER);$$(node,consts.id.UL,setting).remove()}else{$$(node,consts.id.UL,setting).empty()}},_showNode:function(setting,node,options){node.hidden=false;$.tree._initShowForExCheck(setting,node);$$(node,setting).show();if(typeof options!=="undefined"&&typeof options.showParents!=="undefined"&&options.showParents&&null!==node.getParentNode()){$.tree._showNode(setting,node.getParentNode(),options)}},_initShowForExCheck:function(setting,n){if(!n.hidden&&setting.checkable){if(typeof n._nocheck!="undefined"){n.nocheck=n._nocheck;delete n._nocheck}if($.tree._setChkClass){var checkObj=$$(n,consts.id.CHECK,setting);$.tree._setChkClass(setting,checkObj,n)}if($.tree._repairParentChkClassWithSelf){$.tree._repairParentChkClassWithSelf(setting,n)}}},_showNodes:function(setting,nodes,options){if(!nodes||nodes.length==0){return}var pList={},i,j;for(i=0,j=nodes.length;i<j;i++){var n=nodes[i];if(!pList[n.parentTId]){var pn=n.getParentNode();pList[n.parentTId]=(pn===null)?$.tree._getRoot(setting):n.getParentNode()}$.tree._showNode(setting,n,options)}for(var tId in pList){var children=pList[tId][setting.keyChildren];$.tree._setFirstNodeForShow(setting,children);$.tree._setLastNodeForShow(setting,children)}},_setFirstNodeForShow:function(setting,nodes){var n,i,j,first,old;for(i=0,j=nodes.length;i<j;i++){n=nodes[i];if(!first&&!n.hidden&&n.isFirstNode){first=n;break}else{if(!first&&!n.hidden&&!n.isFirstNode){n.isFirstNode=true;first=n;$.tree._setNodeLineIcos(setting,n)}else{if(first&&n.isFirstNode){n.isFirstNode=false;old=n;$.tree._setNodeLineIcos(setting,n);break}else{n=null}}}}return{"new":first,old:old}},_setLastNodeForShow:function(setting,nodes){var n,i,j,last,old;
for(i=nodes.length-1;i>=0;i--){n=nodes[i];if(!last&&!n.hidden&&n.isLastNode){last=n;break}else{if(!last&&!n.hidden&&!n.isLastNode){n.isLastNode=true;last=n;$.tree._setNodeLineIcos(setting,n)}else{if(last&&n.isLastNode){n.isLastNode=false;old=n;$.tree._setNodeLineIcos(setting,n);break}else{n=null}}}}return{"new":last,old:old}},_hideNode:function(setting,node,options){node.hidden=true;node.isFirstNode=false;node.isLastNode=false;$.tree._initHideForExCheck(setting,node);$.tree._cancelPreSelectedNode(setting,node);$$(node,setting).hide()},_initHideForExCheck:function(setting,n){if(n.hidden&&setting.checkable){if(typeof n._nocheck=="undefined"){n._nocheck=!!n.nocheck;n.nocheck=true}n.check_Child_State=-1;if($.tree._repairParentChkClassWithSelf){$.tree._repairParentChkClassWithSelf(setting,n)}}},_hideNodes:function(setting,nodes,options){if(!nodes||nodes.length==0){return}var pList={},i,j;for(i=0,j=nodes.length;i<j;i++){var n=nodes[i];if((n.isFirstNode||n.isLastNode)&&!pList[n.parentTId]){var pn=n.getParentNode();pList[n.parentTId]=(pn===null)?$.tree._getRoot(setting):n.getParentNode()}$.tree._hideNode(setting,n,options)}for(var tId in pList){var children=pList[tId][setting.keyChildren];$.tree._setFirstNodeForHide(setting,children);$.tree._setLastNodeForHide(setting,children)}},_setFirstNodeForHide:function(setting,nodes){var n,i,j;for(i=0,j=nodes.length;i<j;i++){n=nodes[i];if(n.isFirstNode){break}if(!n.hidden&&!n.isFirstNode){n.isFirstNode=true;$.tree._setNodeLineIcos(setting,n);break}else{n=null}}return n},_setLastNodeForHide:function(setting,nodes){var n,i;for(i=nodes.length-1;i>=0;i--){n=nodes[i];if(n.isLastNode){break}if(!n.hidden&&!n.isLastNode){n.isLastNode=true;$.tree._setNodeLineIcos(setting,n);break}else{n=null}}return n},_setFirstNode:function(setting,parentNode){var childKey=setting.keyChildren,childLength=parentNode[childKey].length;if(childLength>0){parentNode[childKey][0].isFirstNode=true}},_setLastNode:function(setting,parentNode){var childKey=setting.keyChildren,childLength=parentNode[childKey].length;
if(childLength>0){parentNode[childKey][childLength-1].isLastNode=true}},_removeNode:function(setting,node){var root=$.tree._getRoot(setting),lineClass=[],childKey=setting.keyChildren,oldLevel=node.level,prevNode=node.getPreNode(),nextNode=node.getNextNode(),parentNode=(node.parentTId)?node.getParentNode():root,parentNodeOldlevel=parentNode.level;node.isFirstNode=false;node.isLastNode=false;node.getPreNode=function(){return null};node.getNextNode=function(){return null};if(!$.tree._getNodeCache(setting,node.tId)){return}$$(node,setting).remove();$.tree._removeNodeCache(setting,node);$.tree._removeSelectedNode(setting,node);for(var i=0,l=parentNode[childKey].length;i<l;i++){if(parentNode[childKey][i].tId==node.tId){parentNode[childKey].splice(i,1);break}}$.tree._setFirstNode(setting,parentNode);$.tree._setLastNode(setting,parentNode);var tmp_ulObj,tmp_switchObj,tmp_icoObj,childLength=parentNode[childKey].length;if(!setting.keepParent&&childLength==0){parentNode.isParent=false;parentNode.open=false;tmp_ulObj=$$(parentNode,consts.id.UL,setting);tmp_switchObj=$$(parentNode,consts.id.SWITCH,setting);tmp_icoObj=$$(parentNode,consts.id.ICON,setting);lineClass=$.tree._lineClass(parentNode,setting.showLine);$.tree._replaceSwitchClass(parentNode,tmp_switchObj,lineClass);$.tree._replaceIcoClass(parentNode,tmp_icoObj,consts.folder.FILE);tmp_ulObj.css("display","none")}else{if(setting.showLine&&childLength>0){var newLast=parentNode[childKey][childLength-1];tmp_ulObj=$$(newLast,consts.id.UL,setting);tmp_switchObj=$$(newLast,consts.id.SWITCH,setting);tmp_icoObj=$$(newLast,consts.id.ICON,setting);if(parentNode==root){if(parentNode[childKey].length==1){$.tree._replaceSwitchClass(newLast,tmp_switchObj,consts.arrow.DOWN)}else{var tmp_first_switchObj=$$(parentNode[childKey][0],consts.id.SWITCH,setting);$.tree._replaceSwitchClass(parentNode[childKey][0],tmp_first_switchObj,(parentNode[childKey][0].isParent?(parentNode[childKey][0].open==true?consts.arrow.DOWN:consts.arrow.RIGHT):consts.line.ROOTS));
if(!newLast.isParent){$.tree._replaceSwitchClass(newLast,tmp_switchObj,consts.line.BOTTOM)}else{$.tree._replaceSwitchClass(newLast,tmp_switchObj,(node.open==true?consts.arrow.DOWN:consts.arrow.RIGHT))}}}else{if(newLast.isParent){$.tree._replaceSwitchClass(newLast,tmp_switchObj,(newLast.open?consts.arrow.DOWN:consts.arrow.RIGHT))}else{$.tree._replaceSwitchClass(newLast,tmp_switchObj,consts.line.BOTTOM)}}$.tree._addLine(setting,parentNode,parentNodeOldlevel);tmp_ulObj.removeClass(consts.line.LINE)}}},_replaceIcoClass:function(node,obj,newName){var icon=(node.isParent&&node.iconOpen&&node.iconClose)?(node.open?node.iconOpen:node.iconClose):node.icon;if(!obj||node.isAjaxing){return}var tmpName=obj.attr("class");if(tmpName==undefined){return}var tmpList=tmpName.split("-");switch(newName){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.FILE:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.LINE:if(icon){obj.attr("class",tmpList)}else{tmpList[tmpList.length-1]=newName;obj.attr("class",tmpList.join("-"))}break}},_replaceSwitchClass:function(node,obj,newName){if(!obj){return}var tmpName=obj.attr("class");if(tmpName==undefined){return}var tmpList=tmpName.split("-");switch(newName){case consts.arrow.DOWN:case consts.arrow.RIGHT:case consts.line.NOLINE:tmpList[tmpList.length-1]=newName;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.folder.DOCU:case consts.line.LINE:tmpList[tmpList.length-1]=newName;break}obj.attr("class",tmpList.join("-"));if(newName!==consts.folder.DOCU){obj.removeAttr("disabled")}else{obj.attr("disabled","disabled")}},_repairAllChk:function(setting,checked){if(setting.checkable&&setting.chkStyle===consts.checkbox.STYLE){var checkedKey=setting.keyChecked,childKey=setting.keyChildren,root=$.tree._getRoot(setting);for(var i=0,l=root[childKey].length;i<l;i++){var node=root[childKey][i];if(node.nocheck!==true&&node.chkDisabled!==true){node[checkedKey]=checked
}$.tree._setSonNodeCheckBox(setting,node,checked)}}},_repairChkClass:function(setting,node){if(!node){return}$.tree._makeChkFlag(setting,node);if(node.nocheck!==true){var checkObj=$$(node,consts.id.CHECK,setting);$.tree._setChkClass(setting,checkObj,node)}},_repairParentChkClass:function(setting,node){if(!node||!node.parentTId){return}var pNode=node.getParentNode();$.tree._repairChkClass(setting,pNode);$.tree._repairParentChkClass(setting,pNode)},_repairParentChkClassWithSelf:function(setting,node){if(!node){return}var childKey=setting.keyChildren;if(node[childKey]&&node[childKey].length>0){$.tree._repairParentChkClass(setting,node[childKey][0])}else{$.tree._repairParentChkClass(setting,node)}},_repairSonChkDisabled:function(setting,node,chkDisabled,inherit){if(!node){return}var childKey=setting.keyChildren;if(node.chkDisabled!=chkDisabled){node.chkDisabled=chkDisabled}$.tree._repairChkClass(setting,node);if(node[childKey]&&inherit){for(var i=0,l=node[childKey].length;i<l;i++){var sNode=node[childKey][i];$.tree._repairSonChkDisabled(setting,sNode,chkDisabled,inherit)}}},_repairParentChkDisabled:function(setting,node,chkDisabled,inherit){if(!node){return}if(node.chkDisabled!=chkDisabled&&inherit){node.chkDisabled=chkDisabled}$.tree._repairChkClass(setting,node);$.tree._repairParentChkDisabled(setting,node.getParentNode(),chkDisabled,inherit)},_selectNode:function(setting,node,addFlag){if(!addFlag){$.tree._cancelPreSelectedNode(setting)}$$(node,consts.id.A,setting).addClass(consts.node.CURSELECTED);$.tree._addSelectedNode(setting,node)},_setNodeFontCss:function(setting,treeNode){var aObj=$$(treeNode,consts.id.A,setting),fontCss=$.tree._makeNodeFontCss(setting,treeNode);if(fontCss){aObj.css(fontCss)}},_setNodeLineIcos:function(setting,node){if(!node){return}var switchObj=$$(node,consts.id.SWITCH,setting),ulObj=$$(node,consts.id.UL,setting),icoObj=$$(node,consts.id.ICON,setting),ulLine=$.tree._makeUlLineClass(setting,node);if(ulLine.length==0){ulObj.removeClass(consts.line.LINE)
}else{ulObj.addClass(ulLine)}switchObj.attr("class",$.tree._makeNodeLineClass(setting,node));if(node.isParent){switchObj.removeAttr("disabled")}else{switchObj.attr("disabled","disabled")}icoObj.removeAttr("style");icoObj.attr("style",$.tree._makeNodeIcoStyle(setting,node));icoObj.attr("class",$.tree._makeNodeIcoClass(setting,node))},_setNodeName:function(setting,node){var title=$.tree._getNodeTitle(setting,node),nObj=$$(node,consts.id.SPAN,setting);nObj.empty();var names="";if(setting.formatter){names=$.tree._apply(setting.formatter,[setting,node],setting.formatter)}else{names=$.tree._getNodeName(setting,node)}if(setting.nameIsHTML){nObj.html(names)}else{nObj.text(names)}if($.tree._apply(setting.showTitle,[setting.treeId,node],setting.showTitle)){var aObj=$$(node,consts.id.A,setting);aObj.attr("title",!title?"":title)}},_setNodeTarget:function(setting,node){var aObj=$$(node,consts.id.A,setting);aObj.attr("target",$.tree._makeNodeTarget(node))},_setNodeUrl:function(setting,node){var aObj=$$(node,consts.id.A,setting),url=$.tree._makeNodeUrl(setting,node);if(url==null||url.length==0){aObj.removeAttr("href")}else{aObj.attr("href",url)}},_switchNode:function(setting,node){if(node.open||!$.tree._canAsync(setting,node)){$.tree._expandCollapseNode(setting,node,!node.open)}else{if(setting.asyncEnable){if(!$.tree._asyncNode(setting,node)){$.tree._expandCollapseNode(setting,node,!node.open);return}}else{if(node){$.tree._expandCollapseNode(setting,node,!node.open)}}}},_setChkClass:function(setting,obj,node){if(!obj){return}if(node.nocheck===true){obj.hide()}else{obj.show()}obj.attr("class",$.tree._makeChkClass(setting,node))},_setParentNodeCheckBox:function(setting,node,value,srcNode){var childKey=setting.keyChildren,checkedKey=setting.keyChecked,checkObj=$$(node,consts.id.CHECK,setting);if(!srcNode){srcNode=node}$.tree._makeChkFlag(setting,node);if(node.nocheck!==true&&node.chkDisabled!==true){node[checkedKey]=value;$.tree._setChkClass(setting,checkObj,node);if(setting.autoCheckTrigger&&node!=srcNode){setting.treeObj.trigger(consts.event.CHECK,[null,setting.treeId,node])
}}if(node.parentTId){var pSign=true;if(!value){var pNodes=node.getParentNode()[childKey];for(var i=0,l=pNodes.length;i<l;i++){if((pNodes[i].nocheck!==true&&pNodes[i].chkDisabled!==true&&pNodes[i][checkedKey])||((pNodes[i].nocheck===true||pNodes[i].chkDisabled===true)&&pNodes[i].check_Child_State>0)){pSign=false;break}}}if(pSign){$.tree._setParentNodeCheckBox(setting,node.getParentNode(),value,srcNode)}}},_setSonNodeCheckBox:function(setting,node,value,srcNode){if(!node){return}var childKey=setting.keyChildren,checkedKey=setting.keyChecked,checkObj=$$(node,consts.id.CHECK,setting);if(!srcNode){srcNode=node}var hasDisable=false;if(node[childKey]){for(var i=0,l=node[childKey].length;i<l&&node.chkDisabled!==true;i++){var sNode=node[childKey][i];$.tree._setSonNodeCheckBox(setting,sNode,value,srcNode);if(sNode.chkDisabled===true){hasDisable=true}}}if(node!=$.tree._getRoot(setting)&&node.chkDisabled!==true){if(hasDisable&&node.nocheck!==true){$.tree._makeChkFlag(setting,node)}if(node.nocheck!==true&&node.chkDisabled!==true){node[checkedKey]=value;if(!hasDisable){node.check_Child_State=(node[childKey]&&node[childKey].length>0)?(value?2:0):-1}}else{node.check_Child_State=-1}$.tree._setChkClass(setting,checkObj,node);if(setting.autoCheckTrigger&&node!=srcNode&&node.nocheck!==true&&node.chkDisabled!==true){setting.treeObj.trigger(consts.event.CHECK,[null,setting.treeId,node])}}},_removeEditBtn:function(setting,node){$$(node,consts.id.EDIT,setting).unbind().remove()},_removeRemoveBtn:function(setting,node){$$(node,consts.id.REMOVE,setting).unbind().remove()},_removeTreeDom:function(setting,node){node.isHover=false;$.tree._removeEditBtn(setting,node);$.tree._removeRemoveBtn(setting,node);$$(node,consts.id.A,setting).removeClass(consts.node.CURHOVER);$.tree._apply(setting.removeHoverDom,[setting.treeId,node])},_repairNodeLevelClass:function(setting,node,oldLevel){if(oldLevel===node.level){return}var liObj=$$(node,setting),aObj=$$(node,consts.id.A,setting),ulObj=$$(node,consts.id.UL,setting),oldClass=consts.className.LEVEL+oldLevel,newClass=consts.className.LEVEL+node.level;
liObj.removeClass(oldClass);liObj.addClass(newClass);aObj.removeClass(oldClass);aObj.addClass(newClass);ulObj.removeClass(oldClass);ulObj.addClass(newClass)},_selectNodes:function(setting,nodes){for(var i=0,l=nodes.length;i<l;i++){$.tree._selectNode(setting,nodes[i],i>0)}}};var settings={},roots={},caches={},_init={bind:[$.tree._coreBindEvent,$.tree._checkBindEvent,$.tree._editBindEvent],unbind:[$.tree._coreUnbindEvent,$.tree._checkUnbindEvent,$.tree._editUnbindEvent],caches:[$.tree._coreInitCache,$.tree._checkInitCache,$.tree._editInitCache],nodes:[$.tree._coreInitNode,$.tree._checkInitNode,$.tree._editInitNode],proxys:[$.tree._checkEventProxy,$.tree._coreEventProxy,$.tree._editEventProxy],roots:[$.tree._coreInitRoot,$.tree._checkInitRoot,$.tree._editInitRoot],beforeA:[$.tree._beforeA],afterA:[],innerBeforeA:[],innerAfterA:[],treeTools:[$.tree._checkTreeTools,$.tree._editTreeTools]};$.coral.tree={componentName:"tree",consts:_final,getTreeObj:function(treeId){var o=$.tree._getTreeTools(treeId);return o?o:null},destroy:function(treeId){if(!!treeId&&treeId.length>0){$.tree._destroy($.tree._getSetting(treeId))}else{for(var s in settings){$.tree._destroy(settings[s])}}},init:function(obj,optionData,nodeData){if(!obj.hasClass("coral-tree")){obj.addClass("coral-tree")}if(optionData.clickExpand){_option.clickExpand=true;_option.dblClickExpand=false}var setting=$.tree._clone(_option);$.extend(true,setting,optionData);setting.treeId=$(obj).uniqueId().attr("id");setting.treeObj=obj;setting.treeObj.empty();settings[setting.treeId]=setting;if(setting.cls){$(obj).addClass(setting.cls)}if(setting.componentCls){$(obj).addClass(setting.componentCls)}if(typeof document.body.style.maxHeight==="undefined"){setting.expandSpeed=""}$.tree._initRoot(setting);var root=$.tree._getRoot(setting),childKey=setting.keyChildren;nodeData=nodeData?$.tree._clone($.tree._isArray(nodeData)?nodeData:[nodeData]):[];nodeData=$.tree._createRootNodes(setting,nodeData);if(setting.simpleDataEnable){root[childKey]=$.tree._transformToTreeFormat(setting,nodeData)
}else{root[childKey]=nodeData}$.tree._initCache(setting);$.tree._unbindTree(setting);$.tree._bindTree(setting);$.tree._unbindEvent(setting);$.tree._bindEvent(setting);var treeTools={setting:setting,option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.extend({},treeTools.setting)}if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.extend({},treeTools.setting[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]]}key=parts.pop();if(arguments.length===1){return curOption[key]===undefined?null:curOption[key]}curOption[key]=value}else{if(arguments.length===1){return treeTools.setting[key]===undefined?null:treeTools.setting[key]}options[key]=value}}this._setOptions(options);return this},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key])}return this},_setOption:function(key,value){treeTools.setting[key]=value;if(key==="disabled"){if(value){$("#"+setting.treeId).prepend("<div class='coral-state-disabled tree-disabled'></div>")}else{$("#"+setting.treeId+" .tree-disabled").remove()}}return this},disable:function(){return treeTools._setOptions({disabled:true})},enable:function(){return treeTools._setOptions({disabled:false})},addNodes:function(parentNode,newNodes,isSilent){var oldLevel=parentNode!=null?(typeof(parentNode.level)=="undefined"?0:parentNode.level):null;if(!newNodes){return null}if(!parentNode){parentNode=null}if(parentNode&&!parentNode.isParent&&setting.keepLeaf){return null}var xNewNodes=$.tree._clone($.tree._isArray(newNodes)?newNodes:[newNodes]);function addCallback(){$.tree._addNodes(setting,parentNode,xNewNodes,(isSilent==true))}if($.tree._canAsync(setting,parentNode)){$.tree._asyncNode(setting,parentNode,isSilent,addCallback)}else{addCallback()}$.tree._addLine(setting,parentNode,oldLevel);return xNewNodes},cancelSelectedNode:function(node){$.tree._cancelPreSelectedNode(setting,node)
},destroy:function(){$.tree._destroy(setting)},expandAll:function(expandFlag){expandFlag=!!expandFlag;$.tree._expandCollapseSonNode(setting,null,expandFlag,true);return expandFlag},expandNode:function(node,expandFlag,sonSign,focus,callbackFlag){if(!node||!node.isParent){return null}if(expandFlag!==true&&expandFlag!==false){expandFlag=!node.open}callbackFlag=!!callbackFlag;if(callbackFlag&&expandFlag&&($.tree._apply(setting.beforeExpand,[setting.treeId,node],true)==false)){return null}else{if(callbackFlag&&!expandFlag&&($.tree._apply(setting.beforeCollapse,[setting.treeId,node],true)==false)){return null}}if(expandFlag&&node.parentTId){$.tree._expandCollapseParentNode(setting,node.getParentNode(),expandFlag,false)}if(expandFlag===node.open&&!sonSign){return null}$.tree._getRoot(setting).expandTriggerFlag=callbackFlag;if(!$.tree._canAsync(setting,node)&&sonSign){$.tree._expandCollapseSonNode(setting,node,expandFlag,true,function(){if(focus!==false){try{$$(node,setting).focus().blur()}catch(e){}}})}else{node.open=!expandFlag;$.tree._switchNode(this.setting,node);if(focus!==false){try{$$(node,setting).focus().blur()}catch(e){}}}return expandFlag},getNodes:function(){return $.tree._getNodes(setting)},getNodeByParam:function(key,value,parentNode){if(!key){return null}return $.tree._getNodeByParam(setting,parentNode?parentNode[setting.keyChildren]:$.tree._getNodes(setting),key,value)},getNodeByTId:function(tId){return $.tree._getNodeCache(setting,tId)},getNodesByParam:function(key,value,parentNode){if(!key){return null}return $.tree._getNodesByParam(setting,parentNode?parentNode[setting.keyChildren]:$.tree._getNodes(setting),key,value)},getNodesByParamFuzzy:function(key,value,parentNode){if(!key){return null}return $.tree._getNodesByParamFuzzy(setting,parentNode?parentNode[setting.keyChildren]:$.tree._getNodes(setting),key,value)},getNodesByFilter:function(filter,isSingle,parentNode,invokeParam){isSingle=!!isSingle;if(!filter||(typeof filter!="function")){return(isSingle?null:[])
}return $.tree._getNodesByFilter(setting,parentNode?parentNode[setting.keyChildren]:$.tree._getNodes(setting),filter,isSingle,invokeParam)},getNodeIndex:function(node){if(!node){return null}var childKey=setting.keyChildren,parentNode=(node.parentTId)?node.getParentNode():$.tree._getRoot(setting);for(var i=0,l=parentNode[childKey].length;i<l;i++){if(parentNode[childKey][i]==node){return i}}return -1},getSelectedNodes:function(){var r=[],list=$.tree._getRoot(setting).curSelectedList;for(var i=0,l=list.length;i<l;i++){r.push(list[i])}return r},isSelectedNode:function(node){return $.tree._isSelectedNode(setting,node)},reAsyncChildNodes:function(parentNode,reloadType,isSilent,opts){if(!this.setting.asyncEnable){return}var isRoot=!parentNode;if(isRoot){parentNode=$.tree._getRoot(setting)}if(reloadType=="refresh"){var childKey=this.setting.keyChildren;for(var i=0,l=parentNode[childKey]?parentNode[childKey].length:0;i<l;i++){$.tree._removeNodeCache(setting,parentNode[childKey][i])}$.tree._removeSelectedNode(setting);parentNode[childKey]=[];if(isRoot){this.setting.treeObj.empty()}else{var ulObj=$$(parentNode,consts.id.UL,setting);ulObj.empty()}}$.tree._asyncNode(this.setting,isRoot?null:parentNode,!!isSilent,null,opts)},reLoadChildNodes:function(parentNode,reloadType,isSilent,newNodes){var isRoot=!parentNode;if(isRoot){parentNode=$.tree._getRoot(setting)}if(reloadType=="refresh"){var childKey=this.setting.keyChildren;for(var i=0,l=parentNode[childKey]?parentNode[childKey].length:0;i<l;i++){$.tree._removeNodeCache(setting,parentNode[childKey][i])}$.tree._removeSelectedNode(setting);parentNode[childKey]=[];if(isRoot){this.setting.treeObj.empty()}else{var ulObj=$$(parentNode,consts.id.UL,setting);ulObj.empty()}}if(this.setting.isInit){newNodes=$.tree._createRootNodes(this.setting,newNodes)}treeTools.addNodes(isRoot?null:parentNode,newNodes,!!isSilent)},refresh:function(){this.setting.treeObj.empty();var root=$.tree._getRoot(setting),nodes=root[setting.keyChildren];$.tree._initRoot(setting);
root[setting.keyChildren]=nodes;$.tree._initCache(setting);$.tree._createNodes(setting,0,root[setting.keyChildren])},reload:function(opts){this.setting.isInit=true;if(opts){opts=opts||{};var that=this,nodes=[],isUrl=false;if(typeof(opts)!=="string"){if(opts.data){nodes=opts.data}else{if(opts instanceof Array){nodes=opts}else{if(opts.asyncUrl){this.setting.asyncUrl=opts.asyncUrl}isUrl=true}}}else{isUrl=true;this.setting.asyncUrl=opts}if(isUrl&&this.setting.asyncEnable){treeTools.reAsyncChildNodes(null,"refresh",null,opts)}else{treeTools.reLoadChildNodes(null,"refresh",null,nodes);$.tree._apply(opts.onLoad,[null,this.setting.treeId]);if(opts.onLoad){$.tree._apply(opts.onLoad,[setting.treeId,null,nodes])}else{setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,null,nodes])}}}else{if(this.setting.asyncEnable){opts=opts||{};treeTools.reAsyncChildNodes(null,"refresh",null,opts)}}},removeChildNodes:function(node){if(!node){return null}var childKey=setting.keyChildren,nodes=node[childKey];$.tree._removeChildNodes(setting,node);return nodes?nodes:null},_pinyinEngine:function(){return new pinyinEngine()},_pinyinSetCache:function(engine,key,dataArr){for(var i in dataArr){engine.setCache([dataArr[i][key]],dataArr[i])}return engine},_pinyinSearch:function(engine,keyword,callback){var dataResult=[];engine.search(keyword,function(data){dataResult.push(data)});callback(dataResult)},filterNodesByParam:function(keysObj){var that=this,nodes=that.getNodes(),nodesArr=[],nodesFilter=[];that.expandAll(true);nodesArr=that.transformToArray(nodes);var engine=that._pinyinEngine();engine=that._pinyinSetCache(engine,"name",nodesArr);that.hideNodes(nodesArr);if(typeof keysObj==="object"){$.each(keysObj,function(k,v){if(k=="name"){that._pinyinSearch(engine,v,function(dataFilter){that.showNodes(dataFilter,{showParents:true})})}})}},showNodes:function(nodes,options){$.tree._showNodes(setting,nodes,options)},showNode:function(node,options){if(!node){return}$.tree._showNodes(setting,[node],options)
},hideNodes:function(nodes,options){$.tree._hideNodes(setting,nodes,options)},hideNode:function(node,options){if(!node){return}$.tree._hideNodes(setting,[node],options)},removeNode:function(node,callbackFlag){if(!node){return}callbackFlag=!!callbackFlag;if(callbackFlag&&$.tree._apply(setting.beforeRemove,[setting.treeId,node],true)==false){return}$.tree._removeNode(setting,node);if(callbackFlag){this.setting.treeObj.trigger(consts.event.REMOVE,[setting.treeId,node])}},selectNode:function(node,addFlag){if(!node){return}if($.tree._uCanDo(setting)){addFlag=setting.selectedMulti&&addFlag;if(node.parentTId){$.tree._expandCollapseParentNode(setting,node.getParentNode(),true,false,function(){})}else{}$.tree._selectNode(setting,node,addFlag)}},transformToTreeNodes:function(simpleNodes){return $.tree._transformToTreeFormat(setting,simpleNodes)},transformToArray:function(nodes){return $.tree._transformToArrayFormat(setting,nodes)},updateNode:function(node,checkTypeFlag){if(!node){return}var nObj=$$(node,setting);if(nObj.get(0)&&$.tree._uCanDo(setting)){$.tree._setNodeName(setting,node);$.tree._setNodeTarget(setting,node);$.tree._setNodeUrl(setting,node);$.tree._setNodeLineIcos(setting,node);$.tree._setNodeFontCss(setting,node)}}};root.treeTools=treeTools;$.tree._setTreeTools(setting,treeTools);if(setting.disabled){treeTools.disable()}else{treeTools.enable()}setting.isInit=true;setting.dataLoaded=false;setting.rootReload=true;if(root[childKey]&&root[childKey].length>0){$.tree._createNodes(setting,0,root[childKey]);setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,null,root[childKey]])}else{if(setting.asyncEnable&&setting.asyncUrl&&setting.asyncUrl!==""){$.tree._asyncNode(setting)}}return treeTools}};var coralTree=$.coral.tree,$$=$.tree._$,consts=coralTree.consts;var _createNodes=$.tree._createNodes;$.tree._createNodes=function(setting,level,nodes,parentNode){if(_createNodes){_createNodes.apply($.tree,arguments)}if(!nodes){return}if($.tree._repairParentChkClassWithSelf){$.tree._repairParentChkClassWithSelf(setting,parentNode)
}};var _removeNode=$.tree._removeNode;$.tree._removeNode=function(setting,node){var parentNode=node.getParentNode();if(_removeNode){_removeNode.apply($.tree,arguments)}if(!node||!parentNode){return}$.tree._repairChkClass(setting,parentNode);$.tree._repairParentChkClass(setting,parentNode)};var _appendNodes=$.tree._appendNodes;$.tree._appendNodes=function(setting,level,nodes,parentNode,initFlag,openFlag){var html="";if(_appendNodes){html=_appendNodes.apply($.tree,arguments)}if(parentNode){$.tree._makeChkFlag(setting,parentNode)}return html};var _cancelPreSelectedNode=$.tree._cancelPreSelectedNode;$.tree._cancelPreSelectedNode=function(setting,node){var list=$.tree._getRoot(setting).curSelectedList;for(var i=0,j=list.length;i<j;i++){if(!node||node===list[i]){$.tree._removeTreeDom(setting,list[i]);if(node){break}}}if(_cancelPreSelectedNode){_cancelPreSelectedNode.apply($.tree,arguments)}};var _makeNodeUrl=$.tree._makeNodeUrl;$.tree._makeNodeUrl=function(setting,node){return setting.editable?null:(_makeNodeUrl.apply($.tree,arguments))};var _removeNode1=$.tree._removeNode;$.tree._removeNode=function(setting,node){var root=$.tree._getRoot(setting);if(root.curEditNode===node){root.curEditNode=null}if(_removeNode1){_removeNode1.apply($.tree,arguments)}};var _selectNode=$.tree._selectNode;$.tree._selectNode=function(setting,node,addFlag){var root=$.tree._getRoot(setting);if($.tree._isSelectedNode(setting,node)&&root.curEditNode==node&&node.editNameFlag){return false}if(_selectNode){_selectNode.apply($.tree,arguments)}$.tree._addHoverDom(setting,node);return true};var _uCanDo=$.tree._uCanDo;$.tree._uCanDo=function(setting,e){var root=$.tree._getRoot(setting);if(e&&($.tree._eqs(e.type,"mouseover")||$.tree._eqs(e.type,"mouseout")||$.tree._eqs(e.type,"mousedown")||$.tree._eqs(e.type,"mouseup"))){return true}if(root.curEditNode){$.tree._editNodeBlur=false;root.curEditInput.focus()}return(!root.curEditNode)&&(_uCanDo?_uCanDo.apply($.tree,arguments):true)};$.fn.tree=function(options){var returnValue=this;
if(!this.length){return this}var otherArgs=Array.prototype.slice.call(arguments,1);var args=Array.prototype.slice.call(arguments,0);this.each(function(){var isMethodCall=typeof options==="string";options=options||{};var methodValue,parseOptions=$.parser.parseOptions(this,[],["data","rootNode","chkboxType","formatter"]);_options=$.extend({},$.fn.tree.defaults||{},parseOptions);if(isMethodCall){var treeobj=$.coral.tree.getTreeObj($(this).attr("id"));methodValue=treeobj[options].apply(treeobj,[].concat(otherArgs));if(methodValue!==undefined){returnValue=methodValue}return}else{_options=$.extend({},_options,options);var node=args[1]||_options.data;$.coral.tree.init($(this),_options,node)}});return returnValue}})(jQuery);

(function(a){a.component("coral.layout",{version:"4.1.4",options:{onCreate:null,fit:false},layoutPanelDefault:{region:null,split:false,collapsedSize:28,minWidth:10,minHeight:10,maxWidth:10000,maxHeight:10000},resizing:false,_resizeLayout:function(){var g=this,b=this.element,k=g.options,f=g.panels,c=a(b);if(b[0].tagName.toLowerCase()=="body"){this._fit()}else{k.fit?c.css(this._fit()):this._fit(false)}var h={top:0,left:0,width:c.width(),height:c.height()};i(this._isPanelVisible(f.expandNorth)?f.expandNorth:f.north,"n");i(this._isPanelVisible(f.expandSouth)?f.expandSouth:f.south,"s");e(this._isPanelVisible(f.expandEast)?f.expandEast:f.east,"e");e(this._isPanelVisible(f.expandWest)?f.expandWest:f.west,"w");f.center.panel("resize",h);function d(l){var m=l.panel("getOptions");return Math.min(Math.max(m.height,m.minHeight),m.maxHeight)}function j(m){var l=m.panel("getOptions");return Math.min(Math.max(l.width,l.minWidth),l.maxWidth)}function i(l,n){if(!l.length||!g._isPanelVisible(l)){return}var m=l.panel("getOptions");var o=d(l);l.panel("resize",{width:c.width(),height:o,left:0,top:(n=="n"?0:c.height()-o)});h.height-=o;if(n=="n"){h.top+=o;if(!m.split&&m.border){h.top--}}if(!m.split&&m.border){h.height++}}function e(m,o){if(!m.length||!g._isPanelVisible(m)){return}var n=m.panel("getOptions");var l=j(m);m.panel("resize",{width:l,height:h.height,left:(o=="e"?c.width()-l:0),top:h.top});h.width-=l;if(o=="w"){h.left+=l;if(!n.split&&n.border){h.left--}}if(!n.split&&n.border){h.width++}}},_splitLayout:function(f,d){var e=a(this.element).layout("panel",f);e.panel("options").split=d;var b="layout-split-"+f;var c=e.panel("panel").removeClass(b);if(d){c.addClass(b)}c.resizable({disabled:(!d)});this._resizeLayout()},_create:function(){this.panels={center:a(),north:a(),south:a(),east:a(),west:a()};var c=this;var b=this.element;var e=a(b);e.addClass("coral-layout");function d(f){f.children("div").each(function(){var g=a.parser.parseOptions(this,[]);if("north,south,east,west,center".indexOf(g.region)>=0){c._addPanel(b,g,this)
}})}e.children("form").length?d(e.children("form")):d(e);e.append('<div class="coral-layout-split-proxy-h"></div><div class="coral-layout-split-proxy-v"></div>');this._resizeLayout();this._initCollapse()},_addPanel:function(b,l,k){var f=this;l.region=l.region||"center";var g=this.panels;var d=a(b);var e=l.region;if(g[e].length){return}var c=a(k);if(!c.length){c=a("<div></div>").appendTo(d)}var j=a.extend({},this.layoutPanelDefault,{width:(c.length?parseInt(c[0].style.width)||c.outerWidth():"auto"),height:(c.length?parseInt(c[0].style.height)||c.outerHeight():"auto"),doSize:false,collapsible:true,componentCls:("coral-layout-panel coral-layout-panel-"+e),bodyCls:"coral-layout-body",onOpen:function(){var p=a(this).panel("header").children("div.coral-panel-tool");p.children("a.coral-panel-tool-collapse").hide();var m={north:"up3",south:"down3",east:"right3",west:"left3"};if(!m[e]){return}var o="cui-icon-arrow-"+m[e];var n=p.children("a."+o);if(!n.length){n=a('<a href="javascript:void(0)"></a>').addClass("icon "+o).appendTo(p)}n.unbind("click").bind("click",{dir:e},function(q){f._collapse(q.data.dir);return false});a(this).panel("getOptions").collapsible?n.show():n.hide()}},l);if(j.region==="center"){j.split=false}c.panel(j);g[e]=c;var i=c.panel("component");var h={north:"s",south:"n",east:"w",west:"e"};if(c.panel("option").split){i.addClass("coral-layout-split-"+e);i.resizable(a.extend({handles:(h[e]||""),disabled:(!c.panel("option").split),start:function(o){f.resizing=true;if(e=="north"||e=="south"){var m=a(">div.coral-layout-split-proxy-v",b)}else{var m=a(">div.coral-layout-split-proxy-h",b)}var n=0,p={display:"block"};if(e=="north"){p.top=parseInt(i.css("top"))+i.outerHeight()-m.height();p.left=parseInt(i.css("left"));p.width=i.outerWidth();p.height=m.height()}else{if(e=="south"){p.top=parseInt(i.css("top"));p.left=parseInt(i.css("left"));p.width=i.outerWidth();p.height=m.height()}else{if(e=="east"){p.top=parseInt(i.css("top"))||0;p.left=parseInt(i.css("left"))||0;p.width=m.width();
p.height=i.outerHeight()}else{if(e=="west"){p.top=parseInt(i.css("top"))||0;p.left=i.outerWidth()-m.width();p.width=m.width();p.height=i.outerHeight()}}}}m.css(p);a('<div class="coral-layout-mask"></div>').css({left:0,top:0,width:d.width(),height:d.height()}).appendTo(d)},resize:function(n){if(e=="north"||e=="south"){var m=a(">div.coral-layout-split-proxy-v",b);m.css("top",n.pageY-a(b).offset().top-m.height()/2)}else{var m=a(">div.coral-layout-split-proxy-h",b);m.css("left",n.pageX-a(b).offset().left-m.width()/2)}return false},helper:"coral-resizable-helper",stop:function(n,m){d.children("div.coral-layout-split-proxy-v,div.coral-layout-split-proxy-h").hide();c.panel("resize",m.size);f._resizeLayout();f.resizing=false;d.find(">div.coral-layout-mask").remove()}},l))}},_remove:function(c){var b=this.panels;if(b[c].length){b[c].panel("destroy");a(b[c]).remove();b[c]=a();var d="expand"+c.substring(0,1).toUpperCase()+c.substring(1);if(b[d]){b[d].panel("destroy");a(b[c]).remove();b[d]=undefined}}},_collapse:function(k,f){var i=this,d=this.element;if(f==undefined){f="normal"}var j=this.panels;var c=j[k];var l=c.panel("getOptions");if(l.beforeCollapse.call(c)==false){return}var g="expand"+k.substring(0,1).toUpperCase()+k.substring(1);if(!j[g]){j[g]=e(k);j[g].panel("component").bind("click",function(){var m=h();c.panel("expand",false).panel("open").panel("resize",m.collapse);c.panel("component").animate(m.expand,function(){a(this).unbind(".layout").bind("mouseleave.layout",{region:k},function(n){if(i.resizing==true){return}i._collapse(n.data.region)})});return false})}var b=h();if(!this._isPanelVisible(j[g])){j.center.panel("resize",b.resizeC)}c.panel("component").animate(b.collapse,f,function(){c.panel("collapse",false).panel("close");j[g].panel("open").panel("resize",b.expandP);a(this).unbind(".layout")});function e(n){var m;if(n=="east"){m="cui-icon-arrow-left3"}else{if(n=="west"){m="cui-icon-arrow-right3"}else{if(n=="north"){m="cui-icon-arrow-down3"}else{if(n=="south"){m="cui-icon-arrow-up3"
}}}}var o=a("<div></div>").appendTo(d);o.panel(a.extend({},i.layoutPanelDefault,{componentCls:("coral-layout-expand coral-layout-expand-"+n),title:"&nbsp;",closed:true,minWidth:0,minHeight:0,doSize:false,tools:[{iconCls:m,handler:function(){i._expand(k);return false}}]}));o.panel("component").hover(function(){a(this).addClass("coral-layout-expand-over")},function(){a(this).removeClass("coral-layout-expand-over")});return o}function h(){var q=a(d);var n=j.center.panel("getOptions");var m=l.collapsedSize;if(k=="east"){var p=n.width+l.width-m;if(l.split||!l.border){p++}return{resizeC:{width:p},expand:{left:q.width()-l.width},expandP:{top:n.top,left:q.width()-m,width:m,height:n.height},collapse:{left:q.width(),top:n.top,height:n.height}}}else{if(k=="west"){var p=n.width+l.width-m;if(l.split||!l.border){p++}return{resizeC:{width:p,left:m-1},expand:{left:0},expandP:{left:0,top:n.top,width:m,height:n.height},collapse:{left:-l.width,top:n.top,height:n.height}}}else{if(k=="north"){var o=n.height;if(!i._isPanelVisible(j.expandNorth)){o+=l.height-m+((l.split||!l.border)?1:0)}j.east.add(j.west).add(j.expandEast).add(j.expandWest).panel("resize",{top:m-1,height:o});return{resizeC:{top:m-1,height:o},expand:{top:0},expandP:{top:0,left:0,width:q.width(),height:m},collapse:{top:-l.height,width:q.width()}}}else{if(k=="south"){var o=n.height;if(!i._isPanelVisible(j.expandSouth)){o+=l.height-m+((l.split||!l.border)?1:0)}j.east.add(j.west).add(j.expandEast).add(j.expandWest).panel("resize",{height:o});return{resizeC:{height:o},expand:{top:q.height()-l.height},expandP:{top:q.height()-m,left:0,width:q.width(),height:m},collapse:{top:q.height(),width:q.width()}}}}}}}},_expand:function(h){var f=this,c=this.element,g=this.panels,b=g[h],i=b.panel("getOptions");if(i.beforeExpand.call(b)==false){return}var j=e();var d="expand"+h.substring(0,1).toUpperCase()+h.substring(1);if(g[d]){g[d].panel("close");b.panel("component").stop(true,true);b.panel("expand",false).panel("open").panel("resize",j.collapse);
b.panel("component").animate(j.expand,function(){f._resizeLayout()})}function e(){var l=a(c);var k=g.center.panel("getOptions");if(h=="east"&&g.expandEast){return{collapse:{left:l.width(),top:k.top,height:k.height},expand:{left:l.width()-g.east.panel("getOptions").width}}}else{if(h=="west"&&g.expandWest){return{collapse:{left:-g.west.panel("getOptions").width,top:k.top,height:k.height},expand:{left:0}}}else{if(h=="north"&&g.expandNorth){return{collapse:{top:-g.north.panel("getOptions").height,width:l.width()},expand:{top:0}}}else{if(h=="south"&&g.expandSouth){return{collapse:{top:l.height(),width:l.width()},expand:{top:l.height()-g.south.panel("getOptions").height}}}}}}}},_isPanelVisible:function(b){if(!b){return false}if(b.length){return b.panel("component").is(":visible")}else{return false}},_initCollapse:function(){var b=this.panels;if(b.east.length&&b.east.panel("getOptions").collapsed){this._collapse("east",0)}if(b.west.length&&b.west.panel("getOptions").collapsed){this._collapse("west",0)}if(b.north.length&&b.north.panel("getOptions").collapsed){this._collapse("north",0)}if(b.south.length&&b.south.panel("getOptions").collapsed){this._collapse("south",0)}},_fit:function(b){return a.coral.panel.fit(this.element,b)},_destroy:function(){this.element.children().remove();this.element.detach()},refresh:function(){this._resizeLayout()},panel:function(b){return this.panels[b]},collapse:function(b){this._collapse(b)},expand:function(b){this._expand(b)},add:function(b){this._addPanel(this.element,b);this._resizeLayout();if(this.panels[b.region].panel("getOptions").collapsed){this._collapse(b.region,0)}},remove:function(b){this._remove(b);this._resizeLayout()},split:function(b){this._splitLayout(b,true)},unsplit:function(b){this._splitLayout(b,false)},resize:function(h,i){var g=h;var c=this.element;if(i!==undefined){var d=this.panels[i];var j=d.panel("component").outerHeight();var e=d.panel("component").outerWidth();d.panel("resize",h);var b=d.panel("component").outerHeight();
var f=d.panel("component").outerWidth();g.height=a(c).height()+b-j;g.width=a(c).width()+f-e}a(c).css(g);this._resizeLayout()}})})(jQuery);

(function(a){a.component("coral.basemenu",{options:{popup:false,trigger:null,my:"left top",at:"left bottom",of:null,triggerEvent:"click",data:null,onClick:null,onCreate:null,url:null,method:null},_create:function(){if(this.options.popup){this._initPopup()}},_generateULContent:function(){var d=this;if(this.element.children().length==0&&this.options.data!=null){var b="";var c=(typeof this.options.data==="string")?a.parseJSON(this.options.data):this.options.data;b=this._generateHTML(b,c);if(b.length>7){b=b.substring(4);b=b.substring(0,b.length-5)}this.element.html(b)}else{if(this.element.children().length==0&&this.options.url!=null){var b="";a.ajax({type:"get",url:d.options.url,async:false,data:null,dataType:"json",success:function(f){var e="";e=d._generateHTML(e,f);if(e.length>7){e=e.substring(4);e=e.substring(0,e.length-5)}d.element.html(e)},error:function(){}})}}},_generateHTML:function(d,e){d+="<ul>";for(var c=0;c<e.length;c++){if(e[c].id!=""){d+='<li data-id="'+e[c].id+'">'}else{d+="<li>"}d+=this._generateANode(e[c]);var b=e[c].items;if(typeof b!=="undefined"&&b instanceof Array&&b.length>0){d=this._generateHTML(d,b)}d+="</li>"}d+="</ul>";return d},_generateANode:function(b){var c="<a";if(b.iconclass!=""){c+=" data-icon='"+b.iconclass+"'"}if(b.name!=""){c+=" data-name='"+b.name+"'"}if(b.disabled!=""){c+=" data-disabled='"+b.disabled+"'"}if(b.url!=""){c+=" data-url='"+b.url+"'"}if(b.target!=""){c+=" data-target='"+b.target+"'"}c+=">";if(b.name!=""){c+=b.name}c+="</a>";return c},_initPopup:function(){var b=this;this.options.trigger=typeof this.options.trigger==="string"?a("#"+this.options.trigger):this.options.trigger;this.element.closest(".coral-menu").addClass("coral-menu-dynamic coral-shadow").appendTo(document.body);this.positionConfig={my:this.options.my,at:this.options.at,of:this.options.of?this.options.of:this.options.trigger};this.options.trigger.on(this.options.triggerEvent+".coral-menu",function(d){if(b.options.disabled===true){return}var c=a(this);if(b.element.is(":visible")){b.hide()
}else{b.show()}d.preventDefault()});a(document.body).on("click.coral-menu",function(f){var c=b.element.closest(".coral-menu");if(c.is(":hidden")){return}var d=a(f.target);if(d.is(b.options.trigger.get(0))||b.options.trigger.has(d).length>0){return}var g=c.offset();if(f.pageX<g.left||f.pageX>g.left+c.width()||f.pageY<g.top||f.pageY>g.top+c.height()){b.hide(f)}});a(window).on("resize.coral-menu",function(){if(b.element.closest(".coral-menu").is(":visible")){b.align()}})},show:function(){this.align();this.element.closest(".coral-menu").css("z-index",++a.coral.zindex).show()},hide:function(){this.element.closest(".coral-menu").fadeOut("fast")},align:function(){this.element.closest(".coral-menu").css({left:"",top:""}).position({my:this.options.my,at:this.options.at,of:this.options.of?this.options.of:this.options.trigger})},_apply:function(d,c,b){if(typeof d==="string"){return window[d].apply(c,[b])}else{if(a.isFunction(d)){return d.apply(c,[b])}}},_setMenuItemLinkDisabled:function(b){if(b.data("disabled")===true){b.toggleClass(this.componentFullName+"-disabled coral-state-disabled",true).attr("aria-disabled",true)}else{b.toggleClass(this.componentFullName+"-disabled coral-state-disabled",false).attr("aria-disabled",false)}},_bindMenuItemClick:function(c){var b=c.options.onClick;c.links.on("click",function(){if(c.options.disabled===true){return}var d={};if(a(this).parent("li").attr("data-id")!=null){d.id=a(this).parent("li").attr("data-id")}if(a(this).attr("data-target")!=null){d.target=a(this).attr("data-target")}if(a(this).attr("data-name")!=null){d.name=a(this).attr("data-name")}if(a(this).attr("data-url")!=null){d.url=a(this).attr("data-url")}if(a(this).find(":checkbox,:radio").length>0){d.hasChk=true;d.checked=a(this).find(":checkbox,:radio").prop("checked")}else{d.hasChk=false}var e={target:c,currentTarget:c,preventDefault:a.noop};c._trigger("onClick",e,d)})},setActiveMenu:function(c){var b=this;if(c==null||c.length==0){return}a.each(c,function(){var d=b.element.find("[data-name='"+this+"']");
d.parent().addClass("coral-menu-item-current")})},setCurrenMenu:function(b){if(b==null||b.length==0){return}this.element.find(">li>a").each(function(){var d=a(this),c=d.attr("data-name");if(c!==b){return}d.parent().addClass("coral-menu-item-current");a(this).parent().siblings().removeClass("coral-menu-item-current")})}})})(jQuery);$.component("coral.navigationmenu",$.coral.basemenu,{castProperties:["title"],options:{collapsible:true,active:0,textAlign:"left",role:"navigationmenu",menus:"ul",title:null,icons:{activeHeader:"cui-icon-arrow-down",header:"cui-icon-arrow-right2"},header:"> li > :first-child,> :not(li):even"},_activate:function(a){var b=this._findActive(a)[0];if(b===this.active[0]){return}b=b||this.active[0];this._eventHandler({target:b,currentTarget:b,preventDefault:$.noop})},_findActive:function(a){return typeof a==="number"?this.headers.eq(a):$()},_setOption:function(a,b){if(a==="active"){this._activate(b);return}this._super(a,b)},_create:function(){var a=this;this._generateULContent();this._render();this.links=this.element.find(".coral-menu-item-link:not(.coral-state-disabled)");this._on({"mousedown .coral-navigationmenu-header":function(b){b.preventDefault()},"click .coral-menu-item-link":function(c){c.preventDefault();var e=$(c.target).closest(".coral-menu-item-link"),b=$(c.target).closest(".coral-menu-parent");if(b.not(".coral-state-disabled").length){b.siblings().find(">ul").attr("aria-expanded",false).slideUp();b.find(">.icon").removeClass(a.options.icons.activeHeader).addClass(a.options.icons.header);if(!c.isPropagationStopped()){this.mouseHandled=true}var d=b.find(">ul");if(!e.parent().hasClass("coral-menu-parent")){this.oldActive=this.active||$();this.active=e;this.oldActive.removeClass("coral-state-highlight");ui={item:this.active,target:this.active.attr("href")};this.active.addClass("coral-state-highlight");this._trigger("onSelect",c,ui)}else{if(d.attr("aria-expanded")=="true"){d.attr("aria-expanded",false).slideUp()}else{d.attr("aria-expanded",true).slideDown();
b.find(">.icon").removeClass(a.options.icons.header).addClass(a.options.icons.activeHeader)}}}},"mouseenter .coral-menu-item-link":function(c){c.preventDefault();var d=$(c.target).closest(".coral-menu-item-link");var b=$(c.target).closest(".coral-menu-parent");if(b.not(".coral-state-disabled").length){if(!d.parent().hasClass("coral-menu-parent")){d.addClass("coral-state-hover")}this._updateTitle()}},"mouseleave .coral-menu-item-link":function(c){c.preventDefault();var d=$(c.target).closest(".coral-menu-item-link");var b=$(c.target).closest(".coral-menu-parent");if(b.not(".coral-state-disabled").length){if(!d.parent().hasClass("coral-menu-parent")){d.removeClass("coral-state-hover")}}}});this._super()},_updateTitle:function(){this.element.find("li>a").each(function(){var c=$(this),a=c.find(".coral-menu-item-text").text();var b=$("<span style = 'visibility: hidden'>"+a+"</span>").appendTo("body");if(c.width()<b.width()){c.attr("title",a)}b.remove()})},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("coral-navigationmenu-header coral-state-default")},_render:function(){var c=this;this.element.addClass("coral-helper-reset coral-navigationmenu coral-menu").attr("role","navigationmenu");this.element.uniqueId();this.options.id=this.element.attr("id");this._processPanels();submenus=this.element.find(this.options.menus);submenus.filter(":not(.coral-menu)").addClass("coral-menu-list coral-helper-reset").attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=$(this),d=e.parent();d.attr("aria-haspopup","true");e.attr("aria-labelledby",d.attr("id"))});menus=submenus.add(this.element);items=menus.find(this.options.items);items.not(".coral-menu-item").each(function(){var d=$(this);if(that._isDivider(d)){d.addClass("coral-component-content coral-menu-divider")}});this.element.find("li").each(function(){var g=$(this),e=g.children("a"),f=e.data("icon"),h=typeof(g.parent().parent("li").attr("data-level"))=="undefined"?0:parseInt(g.parent().parent("li").attr("data-level"))+1;
e.addClass("coral-menu-item-link coral-state-default coral-corner-all");e.contents().filter(function(j,k){if(k.tagName){return false}return true}).wrap("<span class='coral-menu-item-text'/>");e.html('<div class="coral-navigationmenu-item-inner">'+e.html()+"</div>");g.addClass("coral-menu-item coral-component coral-corner-all").attr("data-level",h).addClass("level"+h);if(g.children("ul").length>0){var d=g.children("ul");g.addClass("coral-menu-parent");d.addClass("coral-menu-list coral-helper-reset");e.prepend('<span class="coral-navigationmenu-item-arrow cui-icon-arrow-down3"></span>')}else{if(c.options.textAlign=="right"){}}if(c.options.textAlign=="right"){$("<span class='coral-empty' style='width:"+h*16+"px;height:"+16+"px;'></span>").prependTo(e.find(".coral-navigationmenu-item-inner"))}});var a=".coral-navigationmenu li > a[data-target='"+this.options.active+"'], .coral-navigationmenu li > a[href='"+this.options.active+"']";var b=$(a);b.parents("ul").show();if(!b.parent().hasClass("coral-menu-parent")){b.addClass("coral-state-highlight");this.oldActive=b;this.active=b}}});(function(a){var b=a.component("coral.menu",{version:"4.0.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"coral-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",onBlur:null,onFocus:null,onSelect:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("coral-menu coral-component coral-component-content").toggleClass("coral-menu-icons",!!this.element.find(".coral-icon").length).attr({role:this.options.role,tabIndex:0});if(this.options.disabled){this.element.addClass("coral-state-disabled").attr("aria-disabled","true")}this._on({"mousedown .coral-menu-item":function(c){c.preventDefault()},"click .coral-menu-item":function(c){var d=a(c.target);if(!this.mouseHandled&&d.not(".coral-state-disabled").length){this.select(c);if(!c.isPropagationStopped()){this.mouseHandled=true}if(d.has(".coral-menu").length){this.expand(c)
}else{if(!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".coral-menu").length){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".coral-menu").length===1){clearTimeout(this.timer)}}}}},"mouseenter .coral-menu-item":function(c){if(this.previousFilter){return}var d=a(c.currentTarget);d.siblings(".coral-state-active").removeClass("coral-state-active");this.focus(c,d)},mouseleave:"collapseAll","mouseleave .coral-menu":"collapseAll",focus:function(e,c){var d=this.active||this.element.find(this.options.items).eq(0);if(!c){this.focus(e,d)}},blur:function(c){this._delay(function(){if(!a.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(c)}})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(c){if(this._closeOnDocumentClick(c)){this.collapseAll(c)}this.mouseHandled=false}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".coral-menu").addBack().removeClass("coral-menu coral-component coral-component-content coral-menu-icons coral-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".coral-menu-item").removeClass("coral-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("coral-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var c=a(this);if(c.data("coral-menu-submenu-carat")){c.remove()}});this.element.find(".coral-menu-divider").removeClass("coral-menu-divider coral-component-content")},_keydown:function(g){var d,f,h,e,c=true;switch(g.keyCode){case a.coral.keyCode.PAGE_UP:this.previousPage(g);break;case a.coral.keyCode.PAGE_DOWN:this.nextPage(g);break;case a.coral.keyCode.HOME:this._move("first","first",g);break;case a.coral.keyCode.END:this._move("last","last",g);break;case a.coral.keyCode.UP:this.previous(g);
break;case a.coral.keyCode.DOWN:this.next(g);break;case a.coral.keyCode.LEFT:this.collapse(g);break;case a.coral.keyCode.RIGHT:if(this.active&&!this.active.is(".coral-state-disabled")){this.expand(g)}break;case a.coral.keyCode.ENTER:case a.coral.keyCode.SPACE:this._activate(g);break;case a.coral.keyCode.ESCAPE:this.collapse(g);break;default:c=false;f=this.previousFilter||"";h=String.fromCharCode(g.keyCode);e=false;clearTimeout(this.filterTimer);if(h===f){e=true}else{h=f+h}d=this._filterMenuItems(h);d=e&&d.index(this.active.next())!==-1?this.active.nextAll(".coral-menu-item"):d;if(!d.length){h=String.fromCharCode(g.keyCode);d=this._filterMenuItems(h)}if(d.length){this.focus(g,d);this.previousFilter=h;this.filterTimer=this._delay(function(){delete this.previousFilter},1000)}else{delete this.previousFilter}}if(c){g.preventDefault()}},_activate:function(c){if(!this.active.is(".coral-state-disabled")){if(this.active.is("[aria-haspopup='true']")){this.expand(c)}else{this.select(c)}}},refresh:function(){var g,d,f=this,e=this.options.icons.submenu,c=this.element.find(this.options.menus);this.element.toggleClass("coral-menu-icons",!!this.element.find(".coral-icon").length);c.filter(":not(.coral-menu)").addClass("coral-menu coral-component coral-component-content coral-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var j=a(this),i=j.parent(),h=a("<span>").addClass("coral-menu-icon coral-icon "+e).data("coral-menu-submenu-carat",true);i.attr("aria-haspopup","true").prepend(h);j.attr("aria-labelledby",i.attr("id"))});g=c.add(this.element);d=g.find(this.options.items);d.not(".coral-menu-item").each(function(){var h=a(this);if(f._isDivider(h)){h.addClass("coral-component-content coral-menu-divider")}});d.not(".coral-menu-item, .coral-menu-divider").addClass("coral-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});d.filter(".coral-state-disabled").attr("aria-disabled","true");if(this.active&&!a.contains(this.element[0],this.active[0])){this.blur()
}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(c,d){if(c==="icons"){this.element.find(".coral-menu-icon").removeClass(this.options.icons.submenu).addClass(d.submenu)}if(c==="disabled"){this.element.toggleClass("coral-state-disabled",!!d).attr("aria-disabled",d)}this._super(c,d)},focus:function(d,c){var f,e;this.blur(d,d&&d.type==="focus");this._scrollIntoView(c);this.active=c.first();e=this.active.addClass("coral-state-focus").removeClass("coral-state-active");if(this.options.role){this.element.attr("aria-activedescendant",e.attr("id"))}this.active.parent().closest(".coral-menu-item").addClass("coral-state-active");if(d&&d.type==="keydown"){this._close()}else{this.timer=this._delay(function(){this._close()},this.delay)}f=c.children(".coral-menu");if(f.length&&d&&(/^mouse/.test(d.type))){this._startOpening(f)}this.activeMenu=c.parent();this._trigger("onFocus",d,{item:c})},_scrollIntoView:function(f){var i,e,g,c,d,h;if(this._hasScroll()){i=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0;e=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0;g=f.offset().top-this.activeMenu.offset().top-i-e;c=this.activeMenu.scrollTop();d=this.activeMenu.height();h=f.outerHeight();if(g<0){this.activeMenu.scrollTop(c+g)}else{if(g+h>d){this.activeMenu.scrollTop(c+g-d+h)}}}},blur:function(d,c){if(!c){clearTimeout(this.timer)}if(!this.active){return}this.active.removeClass("coral-state-focus");this.active=null;this._trigger("onBlur",d,{item:this.active})},_startOpening:function(c){clearTimeout(this.timer);if(c.attr("aria-hidden")!=="true"){return}this.timer=this._delay(function(){this._close();this._open(c)},this.delay)},_open:function(d){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".coral-menu").not(d.parents(".coral-menu")).hide().attr("aria-hidden","true");d.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(d,c){clearTimeout(this.timer);
this.timer=this._delay(function(){var e=c?this.element:a(d&&d.target).closest(this.element.find(".coral-menu"));if(!e.length){e=this.element}this._close(e);this.blur(d);this.activeMenu=e},this.delay)},_close:function(c){if(!c){c=this.active?this.active.parent():this.element}c.find(".coral-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".coral-state-active").not(".coral-state-focus").removeClass("coral-state-active")},_closeOnDocumentClick:function(c){return !a(c.target).closest(".coral-menu").length},_isDivider:function(c){return !/[^\-\u2014\u2013\s]/.test(c.text())},collapse:function(d){var c=this.active&&this.active.parent().closest(".coral-menu-item",this.element);if(c&&c.length){this._close();this.focus(d,c)}},expand:function(d){var c=this.active&&this.active.children(".coral-menu ").find(this.options.items).first();if(c&&c.length){this._open(c.parent());this._delay(function(){this.focus(d,c)})}},next:function(c){this._move("next","first",c)},previous:function(c){this._move("prev","last",c)},isFirstItem:function(){return this.active&&!this.active.prevAll(".coral-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".coral-menu-item").length},_move:function(f,d,e){var c;if(this.active){if(f==="first"||f==="last"){c=this.active[f==="first"?"prevAll":"nextAll"](".coral-menu-item").eq(-1)}else{c=this.active[f+"All"](".coral-menu-item").eq(0)}}if(!c||!c.length||!this.active){c=this.activeMenu.find(this.options.items)[d]()}this.focus(e,c)},nextPage:function(e){var d,f,c;if(!this.active){this.next(e);return}if(this.isLastItem()){return}if(this._hasScroll()){f=this.active.offset().top;c=this.element.height();this.active.nextAll(".coral-menu-item").each(function(){d=a(this);return d.offset().top-f-c<0});this.focus(e,d)}else{this.focus(e,this.activeMenu.find(this.options.items)[!this.active?"first":"last"]())}},previousPage:function(e){var d,f,c;if(!this.active){this.next(e);return}if(this.isFirstItem()){return
}if(this._hasScroll()){f=this.active.offset().top;c=this.element.height();this.active.prevAll(".coral-menu-item").each(function(){d=a(this);return d.offset().top-f+c>0});this.focus(e,d)}else{this.focus(e,this.activeMenu.find(this.options.items).first())}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(c){this.active=this.active||a(c.target).closest(".coral-menu-item");var d={item:this.active};if(!this.active.has(".coral-menu").length){this.collapseAll(c,true)}this._trigger("onSelect",c,d)},_filterMenuItems:function(e){var c=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),d=new RegExp("^"+c,"i");return this.activeMenu.find(this.options.items).filter(".coral-menu-item").filter(function(){return d.test(a.trim(a(this).text()))})}})})(jQuery);(function(a){a.component("coral.breadcrumb",{_create:function(){this.element.wrap('<div class="coral-breadcrumb coral-module coral-component coral-component-header coral-helper-clearfix coral-corner-all" role="menu">');this.element.children("li").each(function(c){var d=a(this);d.attr("role","menuitem");var b=d.children("a");b.addClass("coral-menu-item-link coral-corner-all").contents().wrap('<span class="coral-menu-item-text" />');if(c>0){d.before('<li class="coral-breadcrumb-chevron coral-menu-icon cui-icon-arrowDown1"></li>')}else{b.addClass("coral-icon coral-icon-home")}})}})})(jQuery);(function(a){a.component("coral.tieredmenu",a.coral.basemenu,{options:{autoDisplay:true},_create:function(){this._generateULContent();this._render();this.links=this.element.find(".coral-menu-item-link");this._bindEvents();this._super()},_render:function(){var b=this;this.element.addClass("coral-menu-list coral-helper-reset").wrap('<div class="coral-tieredmenu coral-menu coral-component coral-component-content coral-corner-all coral-helper-clearfix" />');if(this.options.id){this.element.parent().attr("id",this.options.id)}else{this.element.parent().uniqueId();this.options.id=this.element.parent().attr("id")
}this.element.find("li").each(function(){var e=a(this),c=e.children("a"),d=c.data("icon");b._setMenuItemLinkDisabled(c);c.addClass("coral-menu-item-link coral-corner-all").contents().wrap('<span class="coral-menu-item-text" />');if(d){c.prepend('<span class="coral-menu-item-icon coral-icon '+d+'"></span>')}e.addClass("coral-menu-item coral-component coral-corner-all");if(e.children("ul").length>0){e.addClass("coral-menu-parent");e.children("ul").addClass("coral-component-content coral-menu-list coral-corner-all coral-helper-clearfix coral-menu-child coral-shadow");c.prepend('<span class="coral-menu-icon cui-icon-arrowDown1"></span>')}})},_bindEvents:function(){this._bindItemEvents();this._bindDocumentHandler()},_bindMenuItemClick:function(d,c){var b=[];if(typeof c==="boolean"&&!c){b=this.element.find("> .coral-menu-item > .coral-menu-item-link")}d.links.not(b).on("click",function(){if(d.options.disabled===true||a(this).hasClass("coral-state-disabled")){return}var e={};if(a(this).parent("li").attr("data-id")!=null){e.id=a(this).parent("li").attr("data-id")}if(a(this).attr("data-target")!=null){e.target=a(this).attr("data-target")}if(a(this).attr("data-name")!=null){e.name=a(this).attr("data-name")}if(a(this).attr("data-url")!=null){e.url=a(this).attr("data-url")}if(a(this).find(":checkbox,:radio").length>0){e.hasChk=true;e.checked=a(this).find(":checkbox,:radio").prop("checked")}else{e.hasChk=false}var f={target:d,currentTarget:d,preventDefault:a.noop};d._trigger("onClick",f,e)})},_bindItemEvents:function(){var b=this;this.links.on("mouseenter.coral-menu",function(){if(b.options.disabled===true||a(this).hasClass("coral-state-disabled")){return}var c=a(this),e=c.parent(),d=b.options.autoDisplay,f=e.siblings(".coral-menu-item-active");if(f.length===1){b._deactivate(f)}if(d||b.active){if(e.hasClass("coral-menu-item-active")){b._reactivate(e)}else{b._activate(e)}}else{b._highlight(e)}});if(this.options.autoDisplay===false){this.rootLinks=this.element.find("> .coral-menu-item > .coral-menu-item-link");
this.rootLinks.data("primecoral-tieredmenu-rootlink",this.options.id).find("*").data("primecoral-tieredmenu-rootlink",this.options.id);this.rootLinks.on("click.coral-menu",function(i){if(b.options.disabled===true||a(this).hasClass("coral-state-disabled")){return}var g=a(this),h=g.parent(),d=h.children("ul.coral-menu-child");if(d.length===1){if(d.is(":visible")){b.active=false;b._deactivate(h)}else{b.active=true;b._highlight(h);b._showSubmenu(h,d)}}var c={};if(a(this).parent("li").attr("data-id")!=null){c.id=a(this).parent("li").attr("data-id")}if(a(this).attr("data-target")!=null){c.target=a(this).attr("data-target")}if(a(this).attr("data-name")!=null){c.name=a(this).attr("data-name")}if(a(this).attr("data-url")!=null){c.url=a(this).attr("data-url")}if(a(this).find(":checkbox,:radio").length>0){c.hasChk=true;c.checked=a(this).find(":checkbox,:radio").prop("checked")}else{c.hasChk=false}var f={target:b,currentTarget:b,preventDefault:a.noop};b._trigger("onClick",f,c);if(!a(this).parent("li").hasClass("coral-menu-parent")){b.hide()}});this._bindMenuItemClick(b,false)}else{this._bindMenuItemClick(b,true)}this.element.parent().find("ul.coral-menu-list").on("mouseleave.coral-menu",function(c){if(b.activeitem){b._deactivate(b.activeitem)}c.stopPropagation()})},add:function(b,d){if((typeof b!=="string"&&typeof b!=="number"&&b!==null)||(typeof d!=="object")){return}var c=this;if(typeof b==="string"||b==null){this._addByParentId(b,d)}else{if(typeof b==="number"){this._addByIndex(b,d)}}},_addByParentId:function(c,e){var d=this,b=this.element.find(".coral-menu-item").filter("[data-id$='"+c+"']");if(!b.length&&c!==null){return}if(c===null){this.element.append(this._getAddHTML(e,false));var f=this._renderAddHTML();this._bindAddItemEvents(f);this._bindLinkRootEvents(a(f[0]))}else{if(this._hasChildren(b)){b.children("ul").append(this._getAddHTML(e,false))}else{b.append(this._getAddHTML(e,true))}var g=this._renderAddHTML(b);this._bindAddItemEvents(g)}},_getAddHTML:function(e,f){var d="";
if(!(e instanceof Array)){e=[e]}if(typeof f==="boolean"&&f){d+="<ul>"}for(var c=0;c<e.length;c++){if(e[c].id!=""){d+='<li data-id="'+e[c].id+'">'}else{d+="<li>"}d+=this._generateANode(e[c]);var b=e[c].items;if(b.length>0){d=this._generateHTML(d,b)}d+="</li>"}if(typeof f==="boolean"&&f){d+="</ul>"}return d},_renderAddHTML:function(b){var c=this,d=this.element.find("li").not(".coral-menu-item");if(b&&!b.children("ul").hasClass("coral-menu-list")){b.addClass("coral-menu-parent");b.children("ul").addClass("coral-component-content coral-menu-list coral-corner-all coral-helper-clearfix coral-menu-child coral-shadow");b.children("a").prepend('<span class="coral-menu-icon cui-icon-arrowDown1"></span>')}d.each(function(){var g=a(this),e=g.children("a"),f=e.data("icon");c._setMenuItemLinkDisabled(e);e.addClass("coral-menu-item-link coral-corner-all").contents().wrap('<span class="coral-menu-item-text" />');if(f){e.prepend('<span class="coral-menu-item-icon coral-icon '+f+'"></span>')}g.addClass("coral-menu-item coral-component coral-corner-all");if(g.children("ul").length>0){g.addClass("coral-menu-parent");g.children("ul").addClass("coral-component-content coral-menu-list coral-corner-all coral-helper-clearfix coral-menu-child coral-shadow");e.prepend('<span class="coral-menu-icon cui-icon-arrowDown1"></span>')}});return d.find(".coral-menu-item-link")},_bindLinkRootEvents:function(c){var b=this;c.data("primecoral-tieredmenu-rootlink",this.options.id).find("*").data("primecoral-tieredmenu-rootlink",this.options.id);c.on("click.coral-menu",function(h){if(b.options.disabled===true||a(this).hasClass("coral-state-disabled")){return}var f=a(this),g=f.parent(),d=g.children("ul.coral-menu-child");if(d.length===1){if(d.is(":visible")){b.active=false;b._deactivate(g)}else{b.active=true;b._highlight(g);b._showSubmenu(g,d)}}})},_bindAddItemEvents:function(c){var b=this;c.on("click",function(){if(b.options.disabled===true||a(this).hasClass("coral-state-disabled")){return}var d={};if(a(this).parent("li").attr("data-id")!=null){d.id=a(this).parent("li").attr("data-id")
}if(a(this).attr("data-target")!=null){d.target=a(this).attr("data-target")}if(a(this).attr("data-name")!=null){d.name=a(this).attr("data-name")}if(a(this).attr("data-url")!=null){d.url=a(this).attr("data-url")}if(a(this).find(":checkbox,:radio").length>0){d.hasChk=true;d.checked=a(this).find(":checkbox,:radio").prop("checked")}else{d.hasChk=false}var e={target:b,currentTarget:b,preventDefault:a.noop};b._trigger("onClick",e,d);b.hide()});c.on("mouseenter",function(){if(b.options.disabled===true||a(this).hasClass("coral-state-disabled")){return}var d=a(this),f=d.parent(),e=b.options.autoDisplay;var g=f.siblings(".coral-menu-item-active");if(g.length===1){b._deactivate(g)}if(e||b.active){if(f.hasClass("coral-menu-item-active")){b._reactivate(f)}else{b._activate(f)}}else{b._highlight(f)}});c.parents("li").find("ul.coral-menu-list").on("mouseleave.coral-menu",function(d){if(b.activeitem){b._deactivate(b.activeitem)}d.stopPropagation()})},_hasChildren:function(b){if(b.hasClass("coral-menu-parent")){return true}else{return false}},_getLength:function(){return this.element.children("li").length},_addByIndex:function(c,e){var d=this,b=parseInt(c);if(b<0||b>this._getLength()){return}if(this._getLength()==0||b==this._getLength()){this.element.append(this._getAddHTML(e,false))}else{this.element.children("li:eq("+b+")").before(this._getAddHTML(e,false))}var f=this._renderAddHTML();this._bindAddItemEvents(f);this._bindLinkRootEvents(a(f[0]))},remove:function(){var b=this.element.children("li");if(!b.length){return}b.remove()},removeItem:function(b){var c=this;if(typeof b==="string"){this._removeById(b)}else{this._removeByIndex(b)}},_removeById:function(c){var b=this.element.find(".coral-menu-item").filter("[data-id$='"+c+"']");if(!b.length){return}if(!b.siblings("li").length){b.parent("ul").remove()}else{b.remove()}},_removeByIndex:function(c){var b=parseInt(c);if(b<0||b>(this._getLength()-1)){return}var d=this.element.children("li.coral-menu-item:eq("+b+")");if(!d.length){return
}d.remove()},updateItem:function(c,b){var d=this;if(typeof c==="string"){this._updateById(c,b)}else{this._updateByIndex(c,b)}},_updateById:function(d,b){var c=this.element.find(".coral-menu-item").filter("[data-id$='"+d+"']");if(!c.length){return}c.children(".coral-menu-item-link").children(".coral-menu-item-text").html(b)},_updateByIndex:function(d,c){var b=parseInt(d);if(b<0||b>(this._getLength()-1)){return}var e=this.element.children("li.coral-menu-item:eq("+b+")");if(!e.length){return}e.children(".coral-menu-item-link").children(".coral-menu-item-text").html(c)},_bindDocumentHandler:function(){var b=this;a(document.body).on("click.coral-menu",function(d){var c=a(d.target);if(c.data("primecoral-tieredmenu-rootlink")===b.options.id){return}b.active=false;b.element.find("li.coral-menu-item-active").each(function(){b._deactivate(a(this),true)})})},enable:function(){var b=this.element.find(".coral-menu-item");if(!b.length){return}b.children(".coral-menu-item-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",false).attr("aria-disabled",false)},enableItem:function(b){var c=this;if(typeof b==="string"){this._enableItemById(b)}else{this._enableItemByIndex(b)}},_enableItemById:function(c){var b=this.element.find(".coral-menu-item").filter("[data-id$='"+c+"']");if(!b.length){return}b.children(".coral-menu-item-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",false).attr("aria-disabled",false)},_enableItemByIndex:function(c){var b=parseInt(c);if(b<0||b>(this._getLength()-1)){return}var d=this.element.children("li.coral-menu-item:eq("+b+")");if(!d.length){return}d.children(".coral-menu-item-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",false).attr("aria-disabled",false)},disable:function(){var b=this.element.find(".coral-menu-item");if(!b.length){return}b.children(".coral-menu-item-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",true).attr("aria-disabled",true)},disableItem:function(b){var c=this;
if(typeof b==="string"){return this._disableItemById(b)}else{return this._disableItemByIndex(b)}},_disableItemById:function(c){var b=this.element.find(".coral-menu-item").filter("[data-id$='"+c+"']");if(!b.length){return}b.children(".coral-menu-item-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",true).attr("aria-disabled",true)},_disableItemByIndex:function(c){var b=parseInt(c);if(b<0||b>(this._getLength()-1)){return}var d=this.element.children("li.coral-menu-item:eq("+b+")");if(!d.length){return}d.children(".coral-menu-item-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",true).attr("aria-disabled",true)},hideAll:function(){var b=this.element.children("li");if(!b.length){return}b.hide()},hideItem:function(b){var c=this;if(typeof b==="string"){return c._hideById(b)}else{return c._hideByIndex(b)}},_hideById:function(c){var b=this.element.find(".coral-menu-item").filter("[data-id$='"+c+"']");if(!b.length){return}b.toggleClass("coral-tieredmenu-hidden",true)},_hideByIndex:function(c){var b=parseInt(c);if(b<0||b>(this._getLength()-1)){return}var d=this.element.children("li.coral-menu-item:eq("+b+")");if(!d.length){return}d.toggleClass("coral-tieredmenu-hidden",true)},showAll:function(){var b=this.element.children("li");if(!b.length){return}b.show()},showItem:function(b){var c=this;if(typeof b==="string"){return c._showById(b)}else{return c._showByIndex(b)}},_showById:function(c){var b=this.element.find(".coral-menu-item").filter("[data-id$='"+c+"']");if(!b.length){return}b.toggleClass("coral-tieredmenu-hidden",false)},_showByIndex:function(c){var b=parseInt(c);if(b<0||b>(this._getLength()-1)){return}var d=this.element.children("li.coral-menu-item:eq("+b+")");if(!d.length){return}d.toggleClass("coral-tieredmenu-hidden",false)},_deactivate:function(c,b){this.activeitem=null;c.children("a.coral-menu-item-link").removeClass("coral-state-hover");c.removeClass("coral-menu-item-active");if(b){c.children("ul.coral-menu-child:visible").fadeOut("fast")
}else{c.children("ul.coral-menu-child:visible").hide()}},_activate:function(c){this._highlight(c);var b=c.children("ul.coral-menu-child");if(b.length===1){this._showSubmenu(c,b)}},_reactivate:function(e){this.activeitem=e;var d=e.children("ul.coral-menu-child"),c=d.children("li.coral-menu-item-active:first"),b=this;if(c.length===1){b._deactivate(c)}},_highlight:function(b){this.activeitem=b;b.children("a.coral-menu-item-link").addClass("coral-state-hover");b.addClass("coral-menu-item-active")},_showSubmenu:function(c,b){if(!b.children("li:not(.coral-tieredmenu-hidden)").length){return}if(this.options.disabled===true){return}b.css({left:c.outerWidth(),top:0,"z-index":++a.coral.zindex});b.show()}})})(jQuery);(function(a){a.component("coral.menubar",a.coral.tieredmenu,{options:{autoDisplay:true},component:function(){return this.element.parent()},_create:function(){this._super();this.options.id=this.element.parent().removeAttr("id").uniqueId();this.element.parent().removeClass("coral-tieredmenu").addClass("coral-menubar");this.element.find(">li>ul").addClass("coral-dropdown-menu")},_showSubmenu:function(f,d){var e=a(window),c=null,b={"z-index":++a.coral.zindex};if(f.parent().hasClass("coral-menu-child")){b.left=f.outerWidth();b.top=0;c=f.offset().top-e.scrollTop()}else{b.left=0;b.top=f.outerHeight();c=f.offset().top+b.top-e.scrollTop()}d.css("height","auto");if((c+d.outerHeight())>e.height()){b.overflow="auto";b.height=e.height()-(c+20)}d.css(b).show()}})})(jQuery);(function(a){a.component("coral.slidemenu",a.coral.basemenu,{_create:function(){this._generateULContent();this._render();this.rootList=this.element;this.content=this.element.parent();this.wrapper=this.content.parent();this.container=this.wrapper.parent();this.submenus=this.container.find("ul.coral-menu-list");this.links=this.element.find("a.coral-menu-item-link:not(.coral-state-disabled)");this.backward=this.wrapper.children("div.coral-slidemenu-backward");this.stack=[];this.jqWidth=this.container.width();var b=this;
if(!this.element.hasClass("coral-menu-dynamic")){this._applyDimensions()}this._super();this._bindEvents()},_render:function(){var b=this;this.element.addClass("coral-menu-list coral-helper-reset").wrap('<div class="coral-menu coral-slidemenu coral-component coral-component-content coral-corner-all coral-helper-clearfix"/>').wrap('<div class="coral-slidemenu-wrapper" />').after('<div class="coral-slidemenu-backward coral-component-header coral-corner-all coral-helper-clearfix">\n                    <span class="coral-icon coral-icon-triangle-1-w"></span>Back</div>').wrap('<div class="coral-slidemenu-content" />');this.element.parent().uniqueId();this.options.id=this.element.parent().attr("id");this.element.find("li").each(function(){var e=a(this),c=e.children("a"),d=c.data("icon");b._setMenuItemLinkDisabled(c);c.addClass("coral-menu-item-link coral-corner-all").contents().wrap('<span class="coral-menu-item-text" />');if(d){c.prepend('<span class="coral-menu-item-icon coral-icon '+d+'"></span>')}e.addClass("coral-menu-item coral-component coral-corner-all");if(e.children("ul").length>0){e.addClass("coral-menu-parent");e.children("ul").addClass("coral-component-content coral-menu-list coral-corner-all coral-helper-clearfix coral-menu-child coral-shadow");c.prepend('<span class="coral-menu-icon cui-icon-arrowDown1"></span>')}})},_bindEvents:function(){var b=this;this._bindMenuItemClick(b);this.links.on("mouseenter.coral-menu",function(){a(this).addClass("coral-state-hover")}).on("mouseleave.coral-menu",function(){a(this).removeClass("coral-state-hover")}).on("click.coral-menu",function(){var d=a(this),c=d.next();if(c.length==1){b._forward(c)}});this.backward.on("click.coral-menu",function(){b._back()})},_forward:function(c){var d=this;this._push(c);var b=-1*(this._depth()*this.jqWidth);c.show().css({left:this.jqWidth});this.rootList.animate({left:b},300,"easeInOutCirc",function(){if(d.backward.is(":hidden")){d.backward.fadeIn("fast")}})},_back:function(){var d=this,c=this._pop(),e=this._depth();
var b=-1*(e*this.jqWidth);this.rootList.animate({left:b},300,"easeInOutCirc",function(){c.hide();if(e===0){d.backward.fadeOut("fast")}})},_push:function(b){this.stack.push(b)},_pop:function(){return this.stack.pop()},_last:function(){return this.stack[this.stack.length-1]},_depth:function(){return this.stack.length},_applyDimensions:function(){this.submenus.width(this.container.width());this.wrapper.height(this.rootList.outerHeight(true)+this.backward.outerHeight(true));this.content.height(this.rootList.outerHeight(true));this.rendered=true},show:function(){this.align();this.container.css("z-index",++a.coral.zindex).show();if(!this.rendered){this._applyDimensions()}}})})(jQuery);(function(a){a.component("coral.contextmenu",a.coral.tieredmenu,{options:{autoDisplay:true,target:null,event:"contextmenu"},_create:function(){this._super();this.element.parent().removeClass("coral-tieredmenu").addClass("coral-contextmenu coral-menu-dynamic coral-shadow coral-contextmenu");var b=this;this.options.target=typeof this.options.target==="string"?a("#"+this.options.target):this.options.target;this.options.target=this.options.target||a(document);if(!this.element.parent().parent().is(document.body)){this.element.parent().appendTo("body")}this.options.target.on(this.options.event+".coral-contextmenu",function(c){b.show(c)})},_bindItemEvents:function(){this._super();var b=this;this.links.bind("click",function(){if(a(this).parent().hasClass("coral-menu-parent")){return false}b._hide()})},_bindDocumentHandler:function(){var b=this;a(document.body).bind("click.coral-contextmenu",function(c){if(b.element.parent().is(":hidden")){return}b._hide()})},show:function(h){if(this.options.disabled===true){h.preventDefault();h.stopPropagation();return}a(document.body).children(".coral-contextmenu:visible").hide();var g=a(window),f=h.pageX,d=h.pageY,c=this.element.parent().outerWidth(),b=this.element.parent().outerHeight();if((f+c)>(g.width())+g.scrollLeft()){f=f-c}if((d+b)>(g.height()+g.scrollTop())){d=d-b
}if(this.options.beforeShow){this.options.beforeShow.call(this)}this.element.parent().css({left:f,top:d,"z-index":++a.coral.zindex}).show();h.preventDefault();h.stopPropagation()},_hide:function(){var b=this;this.element.parent().find("li.coral-menu-item-active").each(function(){b._deactivate(a(this),true)});this.element.parent().fadeOut("fast")},isVisible:function(){return this.element.parent().is(":visible")},getTarget:function(){return this.jqTarget}})})(jQuery);(function(a){a.component("coral.navigatemenubase",a.coral.basemenu,{options:{autoDisplay:true},_create:function(){this._generateULContent();this._render();this.links=this.element.find(".coral-menu-item-link:not(.coral-state-disabled)");this._bindEvents();this._super()},_render:function(){var b=this;this.element.addClass("coral-menu-list coral-helper-reset").wrap('<div class="coral-tieredmenu coral-menu coral-component coral-component-content coral-corner-all coral-helper-clearfix" />');this.element.parent().uniqueId();this.options.id=this.element.parent().attr("id");this.element.find("li").each(function(){var e=a(this),c=e.children("a"),d=c.data("icon");b._setMenuItemLinkDisabled(c);c.addClass("coral-menu-item-link coral-corner-all").contents().wrap('<span class="coral-menu-item-text" />');if(d){c.prepend('<span class="coral-menu-item-icon coral-icon '+d+'"></span>')}e.addClass("coral-menu-item coral-component coral-corner-all");if(e.children("ul").length>0){e.addClass("coral-menu-parent");e.css("position","static");e.children("ul").css("width","100%");e.find("ul li").css("width","auto");e.find("ul li a").css("width","auto");e.children("ul").addClass("coral-component-content coral-menu-list coral-corner-all coral-helper-clearfix coral-menu-child coral-shadow");c.prepend('<span class="coral-menu-icon cui-icon-arrowDown1"></span>')}})},_bindEvents:function(){this._bindItemEvents();this._bindDocumentHandler()},_bindItemEvents:function(){var b=this;this._bindMenuItemClick(b);this.links.on("mouseenter.coral-menu",function(){if(b.options.disabled===true){return
}var c=a(this),e=c.parent(),d=b.options.autoDisplay;var f=e.siblings(".coral-menu-item-active");if(f.length===1){b._deactivate(f)}if(d||b.active){if(e.hasClass("coral-menu-item-active")){b._reactivate(e)}else{b._activate(e)}}else{b._highlight(e)}});if(this.options.autoDisplay===false){this.rootLinks=this.element.find("> .coral-menu-item > .coral-menu-item-link");this.rootLinks.data("primecoral-tieredmenu-rootlink",this.options.id).find("*").data("primecoral-tieredmenu-rootlink",this.options.id);this.rootLinks.on("click.coral-menu",function(g){var d=a(this),f=d.parent(),c=f.children("ul.coral-menu-child");if(c.length===1){if(c.is(":visible")){b.active=false;b._deactivate(f)}else{b.active=true;b._highlight(f);b._showSubmenu(f,c)}}})}this.element.parent().find("ul.coral-menu-list").on("mouseleave.coral-menu",function(c){if(b.activeitem){}c.stopPropagation()})},_bindDocumentHandler:function(){var b=this;a(document.body).on("click.coral-menu ",function(d){var c=a(d.target);if(c.data("primecoral-tieredmenu-rootlink")===b.options.id){return}if(c.is("[type='checkbox']")){return}b.active=false;b.element.find("li.coral-menu-item-active").each(function(){if(b.options.fixmenu==="false"){b._deactivate(a(this),true)}})})},_deactivate:function(c,b){this.activeitem=null;c.children("a.coral-menu-item-link").removeClass("coral-state-hover");c.removeClass("coral-menu-item-active");if(b){c.children("ul.coral-menu-child:visible").fadeOut("fast")}else{c.children("ul.coral-menu-child:visible").hide()}},_activate:function(c){this._highlight(c);var b=c.children("ul.coral-menu-child");if(b.length===1){this._showSubmenu(c,b)}},_reactivate:function(e){this.activeitem=e;var d=e.children("ul.coral-menu-child"),c=d.children("li.coral-menu-item-active:first"),b=this;if(c.length===1){b._deactivate(c)}},_highlight:function(b){this.activeitem=b;b.children("a.coral-menu-item-link").addClass("coral-state-hover");b.addClass("coral-menu-item-active")},_showSubmenu:function(c,b){if(this.options.disabled===true){return
}b.css({left:c.outerWidth(),top:0,"z-index":++a.coral.zindex});b.show()}})})(jQuery);(function(a){a.component("coral.navigatemenu",a.coral.navigatemenubase,{options:{autoDisplay:true,checkable:null,fixmenu:null},_generateHTML:function(e,f){e+="<ul>";for(var d=0;d<f.length;d++){e+="<li>";e+=this._generateANode(f[d]);var c=f[d].name;var b=f[d].items;if(b.length>0){e=this._generateLast(e,b,c)}e+="</li>"}e+="</ul>";return e},_generateLast:function(d,e,b){d+="<ul>";for(var c=0;c<e.length;c++){d+="<li>";d+=this._generateChbNode(e[c],b);d+="</li>"}d+="</ul>";return d},_generateChbNode:function(f,c){var g="<a";if(f.iconclass!=""){}if(f.name!=""){g+=" data-name='"+f.name+"'"}if(f.disabled!=""){g+=" data-disabled='"+f.disabled+"'"}if(f.url!=""){g+=" href='"+f.url+"'"}if(f.target!=""){g+=" target='"+f.target+"'"}g+=">";var e=f.checked===true?"checked":"";var b=f.disabled=="true"?"disabled=true":"";var d="<input type='radio' "+b+" name='"+c+"' "+e+" data-id='"+this.element[0].id+"_"+f.name+"'/>";if(this.options.checkable===true){d="<input type='checkbox' "+b+" "+e+" data-id='"+this.element[0].id+"_"+f.name+"'/>"}g+=d;if(f.name!=""){g+=f.name}g+="</a>";return g},_create:function(){this._super();this.element.parent().removeClass("coral-tieredmenu").addClass("coral-navigatemenu");if(this.options.fixmenu!=="false"){var c=a(this.links[0]).parent(":first").find("ul").outerHeight();var b=this.element.parent().outerHeight();this.element.parent().outerHeight(c+b-3)}if(this.options.fixmenu!=="false"){this._activate(a(this.links[0]).parent());a(this.links[0]).parent(":first").find("ul").css("height","auto")}},_showSubmenu:function(f,d){var e=a(window),c=null,b={"z-index":++a.coral.zindex};if(f.parent().hasClass("coral-menu-child")){b.left=f.outerWidth();b.top=0;c=f.offset().top-e.scrollTop()}else{b.left=0;b.top=this.element.parent().outerHeight();c=f.offset().top+b.top-e.scrollTop()}d.css("height","auto");if((c+d.outerHeight())>e.height()){b.overflow="auto";b.height=e.height()-(c+20)}d.css(b).show()
},check:function(b,c){a("[data-id='"+this.element[0].id+"_"+b+"']").prop("checked",c)}})})(jQuery);

/**
 * JRA: #CORALIV-727
 */
/*
SWFObject v2.2 <http://code.google.com/p/swfobject/> 
is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
;var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;
if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;
X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);
ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");
if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)];}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac};
}(),k=function(){if(!M.w3){return;}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f();
}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false);}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);
f();}});if(O==top){(function(){if(J){return;}try{j.documentElement.doScroll("left");}catch(X){setTimeout(arguments.callee,0);return;}f();})();}}if(M.wk){(function(){if(J){return;
}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return;}f();})();}s(f);}}();function f(){if(J){return;}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));
Z.parentNode.removeChild(Z);}catch(aa){return;}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]();}}function K(X){if(J){X();}else{U[U.length]=X;}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false);
}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false);}else{if(typeof O.attachEvent!=D){i(O,"onload",Y);}else{if(typeof O.onload=="function"){var X=O.onload;
O.onload=function(){X();Y();};}else{O.onload=Y;}}}}}function h(){if(T){V();}else{H();}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);
aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");
M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)];}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return;}}X.removeChild(aa);Z=null;H();
})();}else{H();}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);
if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa);}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;
ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class");}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align");
}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value");
}}P(ai,ah,Y,ab);}else{p(ae);if(ab){ab(aa);}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z;}ab(aa);}}}}}function z(aa){var X=null;
var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y;}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z;}}}return X;}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312);
}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null;}else{l=ae;Q=X;}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310";
}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137";}j.title=j.title.slice(0,47)+" - Flash Player Installation";
var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac;
}else{ab.flashvars=ac;}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";
(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae);}else{setTimeout(arguments.callee,10);}})();}u(aa,ab,X);}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");
Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y);}else{setTimeout(arguments.callee,10);
}})();}else{Y.parentNode.replaceChild(g(Y),Y);}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML;}else{var Y=ab.getElementsByTagName(r)[0];
if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true));
}}}}}return aa;}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X;}if(aa){if(typeof ai.id==D){ai.id=Y;}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae];
}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"';}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"';}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />';
}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id);}else{var Z=C(r);Z.setAttribute("type",q);
for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac]);}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac]);
}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab]);}}aa.parentNode.replaceChild(Z,aa);X=Z;}}return X;}function e(Z,X,Y){var aa=C("param");
aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa);}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";
(function(){if(X.readyState==4){b(Y);}else{setTimeout(arguments.callee,10);}})();}else{X.parentNode.removeChild(X);}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null;
}}Y.parentNode.removeChild(Y);}}function c(Z){var X=null;try{X=j.getElementById(Z);}catch(Y){}return X;}function C(X){return j.createElement(X);}function i(Z,X,Y){Z.attachEvent(X,Y);
I[I.length]=[Z,X,Y];}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false;
}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return;}var aa=j.getElementsByTagName("head")[0];if(!aa){return;}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;
G=null;}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1];
}G=X;}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y);}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"));
}}}function w(Z,X){if(!m){return;}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y;}else{v("#"+Z,"visibility:"+Y);}}function L(Y){var Z=/[\\\"<>\.;]/;
var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y;}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;
for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2]);}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa]);}for(var Y in M){M[Y]=null;}M=null;for(var X in swfobject){swfobject[X]=null;
}swfobject=null;});}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;
w(ab,false);}else{if(Z){Z({success:false,id:ab});}}},getObjectById:function(X){if(M.w3){return z(X);}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};
if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al];}}aj.data=ab;
aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak];}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai];
}else{am.flashvars=ai+"="+Z[ai];}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true);}X.success=true;X.ref=an;}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);
return;}else{w(ah,true);}}if(ac){ac(X);}});}else{if(ac){ac(X);}}},switchOffAutoHideShow:function(){m=false;},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]};
},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X);}else{return undefined;}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y);
}},removeSWF:function(X){if(M.w3){y(X);}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X);}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;
if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1];}if(aa==null){return L(Z);}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)));
}}}return"";},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block";
}}if(E){E(B);}}a=false;}}};}();

var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(b){this.initSWFUpload(b)}}SWFUpload.prototype.initSWFUpload=function(c){try{this.customSettings={};this.settings=c;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(d){delete SWFUpload.instances[this.movieName];throw d}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(e){if(typeof(e)!=="string"||e.match(/^https?:\/\//i)||e.match(/^\//)){return e}var f=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var d=window.location.pathname.lastIndexOf("/");if(d<=0){path="/"}else{path=window.location.pathname.substr(0,d)+"/"}return path+e};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(c,d){this.settings[c]=(this.settings[c]==undefined)?d:this.settings[c]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);
this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);
this.settings.button_image_url=this.settings.button_image_url?SWFUpload.completeURL(this.settings.button_image_url):this.settings.button_image_url}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var d,c;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}d=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(d==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}c=document.createElement("div");c.innerHTML=this.getFlashHTML();d.parentNode.replaceChild(c.firstChild,d);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="sameDomain"/>','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var c=this.buildParamString();var d=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(d),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(c),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")
};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var f=this.settings.post_params;var d=[];if(typeof(f)==="object"){for(var e in f){if(f.hasOwnProperty(e)){d.push(encodeURIComponent(e.toString())+"="+encodeURIComponent(f[e].toString()))}}}return d.join("&amp;")};SWFUpload.prototype.reduceUploadCount=function(){this.callFlash("reduceUploadCount")};SWFUpload.prototype.addUploadCount=function(){this.callFlash("addUploadCount")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);this.callFlash("Destroy");var g=null;g=this.getMovieElement();if(g&&typeof(g.CallFunction)==="unknown"){for(var j in g){try{if(typeof(g[j])==="function"){g[j]=null}}catch(h){}}try{g.parentNode.removeChild(g)}catch(f){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(i){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))
};SWFUpload.prototype.addSetting=function(d,f,e){if(f==undefined){return(this.settings[d]=e)}else{return(this.settings[d]=f)}};SWFUpload.prototype.getSetting=function(b){if(this.settings[b]!=undefined){return this.settings[b]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(b){this.callFlash("StartUpload",[b])};SWFUpload.prototype.cancelUpload=function(d,c){if(c!==false){c=true}this.callFlash("CancelUpload",[d,c])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(b){this.callFlash("SetStats",[b])};SWFUpload.prototype.getFile=function(b){if(typeof(b)==="number"){return this.callFlash("GetFileByIndex",[b])}else{return this.callFlash("GetFile",[b])}};SWFUpload.prototype.addFileParam=function(e,d,f){return this.callFlash("AddFileParam",[e,d,f])};SWFUpload.prototype.removeFileParam=function(d,c){this.callFlash("RemoveFileParam",[d,c])};SWFUpload.prototype.setUploadURL=function(b){this.settings.upload_url=b.toString();this.callFlash("SetUploadURL",[b])};SWFUpload.prototype.setPostParams=function(b){this.settings.post_params=b;this.callFlash("SetPostParams",[b])};SWFUpload.prototype.addPostParam=function(d,c){this.settings.post_params[d]=c;this.callFlash("SetPostParams",[this.settings.post_params])
};SWFUpload.prototype.removePostParam=function(b){delete this.settings.post_params[b];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(d,c){this.settings.file_types=d;this.settings.file_types_description=c;this.callFlash("SetFileTypes",[d,c])};SWFUpload.prototype.setFileSizeLimit=function(b){this.settings.file_size_limit=b;this.callFlash("SetFileSizeLimit",[b])};SWFUpload.prototype.setFileUploadLimit=function(b){this.settings.file_upload_limit=b;this.callFlash("SetFileUploadLimit",[b])};SWFUpload.prototype.setFileQueueLimit=function(b){this.settings.file_queue_limit=b;this.callFlash("SetFileQueueLimit",[b])};SWFUpload.prototype.setFilePostName=function(b){this.settings.file_post_name=b;this.callFlash("SetFilePostName",[b])};SWFUpload.prototype.setUseQueryString=function(b){this.settings.use_query_string=b;this.callFlash("SetUseQueryString",[b])};SWFUpload.prototype.setRequeueOnError=function(b){this.settings.requeue_on_error=b;this.callFlash("SetRequeueOnError",[b])};SWFUpload.prototype.setHTTPSuccess=function(b){if(typeof b==="string"){b=b.replace(" ","").split(",")}this.settings.http_success=b;this.callFlash("SetHTTPSuccess",[b])};SWFUpload.prototype.setAssumeSuccessTimeout=function(b){this.settings.assume_success_timeout=b;this.callFlash("SetAssumeSuccessTimeout",[b])};SWFUpload.prototype.setDebugEnabled=function(b){this.settings.debug_enabled=b;this.callFlash("SetDebugEnabled",[b])};SWFUpload.prototype.setButtonImageURL=function(b){if(b==undefined){b=""}this.settings.button_image_url=b;this.callFlash("SetButtonImageURL",[b])};SWFUpload.prototype.setButtonDimensions=function(f,e){this.settings.button_width=f;this.settings.button_height=e;var d=this.getMovieElement();if(d!=undefined){d.style.width=f+"px";d.style.height=e+"px"}this.callFlash("SetButtonDimensions",[f,e])};SWFUpload.prototype.setButtonText=function(b){this.settings.button_text=b;this.callFlash("SetButtonText",[b])};SWFUpload.prototype.setButtonTextPadding=function(c,d){this.settings.button_text_top_padding=d;
this.settings.button_text_left_padding=c;this.callFlash("SetButtonTextPadding",[c,d])};SWFUpload.prototype.setButtonTextStyle=function(b){this.settings.button_text_style=b;this.callFlash("SetButtonTextStyle",[b])};SWFUpload.prototype.setButtonDisabled=function(b){this.settings.button_disabled=b;this.callFlash("SetButtonDisabled",[b])};SWFUpload.prototype.setButtonAction=function(b){this.settings.button_action=b;this.callFlash("SetButtonAction",[b])};SWFUpload.prototype.setButtonCursor=function(b){this.settings.button_cursor=b;this.callFlash("SetButtonCursor",[b])};SWFUpload.prototype.queueEvent=function(d,f){if(f==undefined){f=[]}else{if(!(f instanceof Array)){f=[f]}}var e=this;if(typeof this.settings[d]==="function"){this.eventQueue.push(function(){this.settings[d].apply(this,f)});setTimeout(function(){e.executeNextEvent()},0)}else{if(this.settings[d]!==null){throw"Event handler "+d+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var b=this.eventQueue?this.eventQueue.shift():null;if(typeof(b)==="function"){b.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(l){var j=/[$]([0-9a-f]{4})/i;var i={};var k;if(l!=undefined){for(var h in l.post){if(l.post.hasOwnProperty(h)){k=h;var g;while((g=j.exec(k))!==null){k=k.replace(g[0],String.fromCharCode(parseInt("0x"+g[1],16)))}i[k]=l.post[h]}}l.post=i}return l};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(b){return false}};SWFUpload.prototype.flashReady=function(){var b=this.getMovieElement();if(!b){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(b);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(c){try{if(this.movieElement&&typeof(c.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var a in c){try{if(typeof(c[a])==="function"&&a[0]>="A"&&a[0]<="Z"){c[a]=null
}}catch(d){}}}}catch(b){}window.__flash__removeCallback=function(g,e){try{if(g){g[e]=null}}catch(f){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("file_queued_handler",b)};SWFUpload.prototype.fileQueueError=function(e,f,d){e=this.unescapeFilePostParams(e);this.queueEvent("file_queue_error_handler",[e,f,d])};SWFUpload.prototype.fileDialogComplete=function(d,f,e){this.queueEvent("file_dialog_complete_handler",[d,f,e])};SWFUpload.prototype.uploadStart=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("return_upload_start_handler",b)};SWFUpload.prototype.returnUploadStart=function(d){var c;if(typeof this.settings.upload_start_handler==="function"){d=this.unescapeFilePostParams(d);c=this.settings.upload_start_handler.call(this,d)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(c===undefined){c=true}c=!!c;this.callFlash("ReturnUploadStart",[c])};SWFUpload.prototype.uploadProgress=function(e,f,d){e=this.unescapeFilePostParams(e);this.queueEvent("upload_progress_handler",[e,f,d])};SWFUpload.prototype.uploadError=function(e,f,d){e=this.unescapeFilePostParams(e);this.queueEvent("upload_error_handler",[e,f,d])};SWFUpload.prototype.uploadSuccess=function(d,e,f){d=this.unescapeFilePostParams(d);this.queueEvent("upload_success_handler",[d,e,f])};SWFUpload.prototype.uploadComplete=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("upload_complete_handler",b)};SWFUpload.prototype.debug=function(b){this.queueEvent("debug_handler",b)};SWFUpload.prototype.debugMessage=function(h){if(this.settings.debug){var f,g=[];if(typeof h==="object"&&typeof h.name==="string"&&typeof h.message==="string"){for(var e in h){if(h.hasOwnProperty(e)){g.push(e+": "+h[e])}}f=g.join("\n")||"";g=f.split("\n");f="EXCEPTION: "+g.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(f)}else{SWFUpload.Console.writeLine(h)
}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(g){var e,f;try{e=document.getElementById("SWFUpload_Console");if(!e){f=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(f);e=document.createElement("textarea");e.id="SWFUpload_Console";e.style.fontFamily="monospace";e.setAttribute("wrap","off");e.wrap="off";e.style.overflow="auto";e.style.width="700px";e.style.height="350px";e.style.margin="5px";f.appendChild(e)}e.value+=g+"\n";e.scrollTop=e.scrollHeight-e.clientHeight}catch(h){alert("Exception: "+h.name+" Message: "+h.message)}};

(function(a){a.component("coral.swfuploader",{options:{swfUploadOptions:null,swf:"external/swfupload.swf",uploader:"swfupload.php",auto:true,buttonClass:"",buttonCursor:"hand",buttonImage:null,buttonText:"SELECT FILES",checkExisting:false,debug:false,fileObjName:"Filedata",maxFileSize:0,fileTypeDesc:"All Files",fileTypeExts:"*.*",uploadTemplate:false,method:"post",multiple:true,formData:{},preventCaching:true,uploadedFileList:[],separator:",",progressData:"speed",queueID:false,queueSizeLimit:999,removeCompleted:true,removeTimeout:3,requeueErrors:false,successTimeout:30,uploadLimit:999,overrideEvents:[]},_create:function(){var k=this,l=this.element.clone(),c=this.options;this.options.id=this.element.attr("id");var j=a("<div />",{id:c.id+"_wrappper","class":"swfuploader",css:{height:c.height+"px",width:c.width+"px"}});this.element.append(j);var b={assume_success_timeout:c.successTimeout,button_placeholder_id:j[0].id,button_width:c.width,button_height:c.height,button_text:null,button_text_style:null,button_text_top_padding:0,button_text_left_padding:0,button_action:(c.multiple?SWFUpload.BUTTON_ACTION.SELECT_FILES:SWFUpload.BUTTON_ACTION.SELECT_FILE),button_disabled:false,button_cursor:(c.buttonCursor=="arrow"?SWFUpload.CURSOR.ARROW:SWFUpload.CURSOR.HAND),button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,debug:c.debug,requeue_on_error:c.requeueErrors,file_post_name:c.fileObjName,file_size_limit:c.maxFileSize,file_types:c.fileTypeExts,file_types_description:c.fileTypeDesc,file_queue_limit:c.queueSizeLimit,file_upload_limit:c.uploadLimit,flash_url:c.swf,prevent_swf_caching:c.preventCaching,post_params:c.formData,upload_url:c.uploader,use_query_string:(c.method=="get"),swfupload_loaded_handler:c.onSWFReady,file_dialog_complete_handler:this.onDialogClose,file_dialog_start_handler:this.onDialogOpen,file_queued_handler:function(n){k.onSelect.apply(k,[this,n])},file_queue_error_handler:function(n,p,o){k.onSelectError.apply(k,[this,n,p,o])},upload_complete_handler:function(n){k.onUploadComplete.apply(k,[this,n])
},upload_error_handler:function(n,p,o){k.onUploadError.apply(k,[this,n,p,o])},upload_progress_handler:function(o,p,n){k.onUploadProgress.apply(k,[this,o,p,n])},upload_start_handler:function(n){k.onUploadStart.apply(k,[this,n])},upload_success_handler:function(o,p,n){k.onUploadSuccess.apply(k,[this,o,p,n])}};if(c.swfUploadOptions){b=a.extend(b,c.swfUploadOptions)}b=a.extend(b,c);var m=swfobject.getFlashPlayerVersion();var d=(m.major>=9);if(d){window["swfuploader_"+c.id]=new SWFUpload(b);var e=window["swfuploader_"+c.id];this.element.data("swfuploader",e);a("#"+e.movieName).wrap(j);j=a("#"+c.id);j.data("swfuploader",e);a("#"+e.movieName).css({position:"absolute","z-index":1});if(!c.queueID){var h=a("<div />",{id:c.id+"-queue","class":"swfuploader-queue"});j.after(h);e.settings.queueID=c.id+"-queue";e.settings.defaultQueue=true}e.queueData={files:{},filesSelected:0,filesQueued:0,filesReplaced:0,filesCancelled:0,filesErrored:0,uploadsSuccessful:0,uploadsErrored:0,averageSpeed:0,queueLength:0,queueSize:0,uploadSize:0,queueBytesUploaded:0,uploadQueue:[],errorMsg:"Some files were not added to the queue:"};e.original=l;e.wrapper=j;e.queue=h;if(c.onInit){c.onInit.call(this.element,e)}}else{var g=c.onNoflash.call(this.element);var i=a("<div class='coral-uploader-button' style='height: 40px;'></div>").appendTo(g);var f=a("<input type='button'/>").appendTo(i);f.button({id:c.id+"-button",label:c.buttonText,onClick:function(){alert("没有安装flash或flash版本过低")}})}},addUploadCount:function(){var b=this.element.data("swfuploader");b.addUploadCount()},reduece:function(b){var e=this.element.data("swfuploader"),d=e.settings;if(a("#"+b).hasClass("template-download")){e.reduceUploadCount();uploadList=d.uploadedFileList;var c=this.getValues();uploadList.splice(a.inArray(b,c),1)}else{if(a("#"+b).hasClass("template-upload")){downList=d.unUploadedFileList;var c=this.getUnUploadValues();downList.splice(a.inArray(b,c),1)}}},setValues:function(b){var d=this.element.data("swfuploader"),c=d.settings;c.uploadedFileList=b
},cancel:function(i,k){var j=arguments,d,b,h=this;var f=this.element.data("swfuploader"),e=f.settings,g=-1;if(!e.disabled){if(typeof i==="array"||typeof i==="undefined"){if(typeof i==="undefined"){var o=f.queueData.queueLength;a("#"+e.queueID).children().each(function(){g++;if(j[1]===true){f.cancelUpload(this.id,false)}else{f.cancelUpload(this.id)}a(this).find(".data").removeClass("data");a(this).delay(1000+100*g).fadeOut(500,function(){a(this).remove()});h._trigger("onRemove",null);delete f.queueData.files[this.id];h.reduece(this.id)});f.queueData.queueSize=0;f.queueData.queueLength=0;if(e.onClearQueue){e.onClearQueue.call(this.element,o)}}else{for(var c=0;c<j.length;c++){f.cancelUpload(j[c]);a("#"+j[c]).find(".data").removeClass("data");a("#"+j[c]).delay(1000+100*c).fadeOut(500,function(){a(this).remove()});this._trigger("onRemove",null);delete f.queueData.files[j[c]];h.reduece(j[c])}}}else{var m=a("#"+i);$item=a(m);f.cancelUpload($item.attr("id"));$item.find(".data").removeClass("data");$item.delay(1000).fadeOut(500,function(){a(this).remove()});this._trigger("onRemove",null);delete f.queueData.files[i];if(a("#"+i).hasClass("template-download")){f.reduceUploadCount();d=e.uploadedFileList;var l=this.getValues();d.splice(a.inArray(i,l),1)}else{if(a("#"+i).hasClass("template-upload")){b=e.unUploadedFileList;var l=this.getUnUploadValues();b.splice(a.inArray(i,l),1)}}}}},_destroy:function(){var c=this.element.data("swfuploader"),b=c.settings;c.destroy();this.element.find(".swfuploader").remove();if(b.uploadedFileList){a("#"+b.queueID).remove()}a("#"+b.id).replaceWith(this.element);if(b.onDestroy){b.onDestroy.call(this)}delete c},disable:function(b){var d=this.element.data("swfuploader"),c=d.settings;if(b){a("#"+this.options.queueID).addClass("coral-state-disabled");c.disabled=true;this._trigger("onDisable",null,[])}else{a("#"+this.options.queueID).removeClass("coral-state-disabled");c.disabled=false;this._trigger("onEnable",null,[])}d.setButtonDisabled(b)},getQueueData:function(){var f=[],d=[];
var e=this.element.data("swfuploader"),c=e.settings;for(var b=0;b<c.uploadedFileList.length;b++){f.push(c.uploadedFileList[b].fileId)}for(var b=0;b<c.unUploadedFileList.length;b++){d.push(c.unUploadedFileList[b].fileId)}return a.merge(f,d)},getUnUploadValues:function(){var b=[];var e=this.element.data("swfuploader"),d=e.settings;for(var c=0;c<d.unUploadedFileList.length;c++){b.push(d.unUploadedFileList[c].fileId)}return b},getValues:function(){var d=[];var e=this.element.data("swfuploader"),c=e.settings;for(var b=0;b<c.uploadedFileList.length;b++){d.push(c.uploadedFileList[b].fileId)}return d},getValue:function(){var c=this.element.data("swfuploader"),b=c.settings;return this.getValues().join(b.separator)},getValidateValue:function(){return this.getValue()},_setOption:function(c,g,h){var b=arguments;var e=g;var f=this.element.data("swfuploader"),d=f.settings;this._super(c,g);switch(c){case"uploader":f.setUploadURL(g);break;case"formData":if(!h){g=a.extend(d.formData,g)}f.setPostParams(d.formData);break;case"method":if(g=="get"){f.setUseQueryString(true)}else{f.setUseQueryString(false)}break;case"fileObjName":f.setFilePostName(g);break;case"fileTypeExts":f.setFileTypes(g,d.fileTypeDesc);break;case"fileTypeDesc":f.setFileTypes(d.fileTypeExts,g);break;case"maxFileSize":f.setFileSizeLimit(g);break;case"uploadLimit":f.setFileUploadLimit(g);break;case"queueSizeLimit":f.setFileQueueLimit(g);break;case"buttonCursor":if(g=="arrow"){f.setButtonCursor(SWFUpload.CURSOR.ARROW)}else{f.setButtonCursor(SWFUpload.CURSOR.HAND)}break;case"buttonText":a("#"+this.options.id+"-button").find(".swfuploader-button-text").html(g);break;case"width":f.setButtonDimensions(g,d.height);break;case"height":f.setButtonDimensions(d.width,g);break;case"multiple":if(g){f.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILES)}else{f.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILE)}break}},stop:function(){var b=this.element.data("swfuploader");b.queueData.averageSpeed=0;b.queueData.uploadSize=0;b.queueData.bytesUploaded=0;
b.queueData.uploadQueue=[];b.stopUpload();this._trigger("onStop",null,[])},upload:function(c){var d=arguments,g;var f=this.element.data("swfuploader"),e=f.settings;f.queueData.averageSpeed=0;f.queueData.uploadSize=0;f.queueData.bytesUploaded=0;f.queueData.uploadQueue=[];if(!e.disabled){if(d[0]||typeof c==="undefined"){if(typeof c==="undefined"){f.queueData.uploadSize=f.queueData.queueSize;var b=e.unUploadedFileList;f.queueData.uploadQueue.push("*");f.startUpload()}else{for(g=0;g<d.length;g++){f.queueData.uploadQueue.push(d[g])}f.startUpload(f.queueData.uploadQueue.shift())}}else{f.startUpload()}}},onDialogOpen:function(){var b=this.settings;this.queueData.errorMsg="Some files were not added to the queue:";this.queueData.filesReplaced=0;this.queueData.filesCancelled=0;if(b.onDialogOpen){b.onDialogOpen.call(this)}},onDialogClose:function(b,d,e){var c=this.settings;this.queueData.filesErrored=b-d;this.queueData.filesSelected=b;this.queueData.filesQueued=d-this.queueData.filesCancelled;this.queueData.queueLength=e;if(a.inArray("onDialogClose",c.overrideEvents)<0){if(this.queueData.filesErrored>0){}}if(c.onDialogClose){c.onDialogClose.call(this,this.queueData)}if(c.auto){a("#"+c.id).swfuploader("upload","*")}},handerSWFEvent:function(){},validateFiles:function(b,c){var d=b.settings;if(d.acceptFileTypes&&!(d.acceptFileTypes.test(c.type)||d.acceptFileTypes.test(c.name))){c.error="The file is not an accepted file type."}else{if(c.size>d.maxFileSize){c.error="The File is too large."}}return c.error},onSelect:function(j,c){var e=j.settings,l,m;var b={};var f=Math.round(c.size/1024);var k="KB";if(f>1000){f=Math.round(f/1000);k="MB"}var h=f.toString().split(".");f=h[0];if(h.length>1){f+="."+h[1].substr(0,2)}f+=k;var g=c.name;if(g.length>25){g=g.substr(0,25)+"..."}itemData={fileID:c.id,instanceID:e.id,fileName:g,fileSize:f};if(a.inArray("onSelect",e.overrideEvents)<0){l=e.uploadTemplate({files:[c],options:e});for(var i in itemData){l=l.replace(new RegExp("\\$\\{"+i+"\\}","g"),itemData[i])
}l=a(e.templatesContainer).html(l).children();l.addClass("template-upload fade");a("#"+e.queueID).append(l);this._trigger("onRenderUploadTmp",null,{item:l})}j.queueData.queueSize+=c.size;j.queueData.files[c.id]=c;this._trigger("onSelect",null,[{file:c}])},onSelectError:function(c,d,h,g){var e=c.settings,b,f;if(a.inArray("onSelectError",e.overrideEvents)<0){switch(h){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:if(e.queueSizeLimit>g){alert("\nThe number of files selected exceeds the remaining upload limit")}else{alert("\nThe number of files selected exceeds the queue size limit")}break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:a.messageQueue({message:"The File is too large"});break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:c.queueData.errorMsg='\nThe file "'+d.name+'" is empty.';break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:c.queueData.errorMsg='\nThe file "'+d.name+'" is not an accepted file type ('+e.fileTypeDesc+").";break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:a.messageQueue({message:"The file is not an accepted file type"});break}}if(h!=SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED){delete c.queueData.files[d.id]}this._trigger("onSelectError",null,[{file:d,error:g}])},onQueueComplete:function(){if(this.settings.onQueueComplete){this.settings.onQueueComplete.call(this,this.settings.queueData)}},onUploadComplete:function(c,f){var g=c.settings,h=c;var e=c.getStats();c.queueData.queueLength=e.files_queued;if(c.queueData.uploadQueue[0]=="*"){if(c.queueData.queueLength>0){c.startUpload()}else{c.queueData.uploadQueue=[];if(g.onQueueComplete){g.onQueueComplete.call(c,c.queueData)}}}else{if(c.queueData.uploadQueue.length>0){c.startUpload(c.queueData.uploadQueue.shift())}else{c.queueData.uploadQueue=[];if(g.onQueueComplete){g.onQueueComplete.call(c,c.queueData)}}}if(a.inArray("onUploadComplete",g.overrideEvents)<0){if(g.removeCompleted){switch(f.filestatus){case SWFUpload.FILE_STATUS.COMPLETE:setTimeout(function(){if(a("#"+f.id)){h.queueData.queueSize-=f.size;
h.queueData.queueLength-=1;delete h.queueData.files[f.id];a("#"+f.id).fadeOut(500,function(){a(this).remove()})}},g.removeTimeout*1000);break;case SWFUpload.FILE_STATUS.ERROR:if(!g.requeueErrors){setTimeout(function(){if(a("#"+f.id)){h.queueData.queueSize-=f.size;h.queueData.queueLength-=1;delete h.queueData.files[f.id];a("#"+f.id).fadeOut(500,function(){a(this).remove()})}},g.removeTimeout*1000)}break}}else{f.uploaded=true}}var d=g.unUploadedFileList;var b=this.getUnUploadValues();d.splice(a.inArray(f[g.prmNames.fileId],b),1);this._trigger("onComplete",null,[{file:f}])},onUploadError:function(b,d,h,g){var e=b.settings;var f="Error";switch(h){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:f="HTTP Error ("+g+")";this._trigger("onFail",null,[{file:d,error:g}]);break;case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:f="Missing Upload URL";break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:f="IO Error";this._trigger("onFail",null,[{file:d,error:g}]);break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:f="Security Error";this._trigger("onFail",null,[{file:d,error:g}]);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:alert("The upload limit has been reached ("+g+").");f="Exceeds Upload Limit";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:f="Failed";this._trigger("onFail",null,[{file:d,error:g}]);break;case SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND:break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:f="Validation Error";break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:f="Cancelled";b.queueData.queueSize-=d.size;b.queueData.queueLength-=1;if(d.status==SWFUpload.FILE_STATUS.IN_PROGRESS||a.inArray(d.id,b.queueData.uploadQueue)>=0){b.queueData.uploadSize-=d.size}delete b.queueData.files[d.id];break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:f="Stopped";this._trigger("onFail",null,[{file:d,error:g}]);break}if(a.inArray("onUploadError",e.overrideEvents)<0){}var c=b.getStats();b.queueData.uploadsErrored=c.upload_errors},onUploadProgress:function(m,f,l,i){var g=m.settings;var d=new Date();
var n=d.getTime();var j=n-m.timer;if(j>500){m.timer=n}var h=l-m.bytesLoaded;m.bytesLoaded=l;var c=m.queueData.queueBytesUploaded+l;var b=Math.round(l/i*100);var o="KB/s";var k=0;var e=(h/1024)/(j/1000);e=Math.floor(e*10)/10;if(m.queueData.averageSpeed>0){m.queueData.averageSpeed=Math.floor((m.queueData.averageSpeed+e)/2)}else{m.queueData.averageSpeed=Math.floor(e)}if(e>1000){k=(e*0.001);m.queueData.averageSpeed=Math.floor(k);o="MB/s"}if(a.inArray("onUploadProgress",g.overrideEvents)<0){a("#"+f.id).find(".progressbar-value").show().css("width",b+"%");a("#"+f.id).find(".progressbar-text").text(b+"%")}this._trigger("onProgress",null,[{file:f}])},onUploadStart:function(b,c){var d=b.settings;var e=new Date();b.timer=e.getTime();b.bytesLoaded=0;if(b.queueData.uploadQueue.length==0){b.queueData.uploadSize=c.size}if(d.checkExisting){a.ajax({type:"POST",async:false,url:d.checkExisting,data:{filename:c.name},success:function(g){if(g==1){var f=confirm('A file with the name "'+c.name+'" already exists on the server.\nWould you like to replace the existing file?');if(!f){b.cancelUpload(c.id);a("#"+c.id).remove();if(b.queueData.uploadQueue.length>0&&b.queueData.queueLength>0){if(b.queueData.uploadQueue[0]=="*"){b.startUpload()}else{b.startUpload(b.queueData.uploadQueue.shift())}}}}}})}this._trigger("onStart",null,[{file:c}]);this._trigger("onSend",null,[{file:c}])},onUploadSuccess:function(l,b,h,f){var c=l.settings,n;var i=l.getStats();l.queueData.uploadsSuccessful=i.successful_uploads;l.queueData.queueBytesUploaded+=b.size;if(a.inArray("onUploadSuccess",c.overrideEvents)<0){a("#"+b.id).find(".data").html(" - 上传完成")}var e=Math.round(b.size/1024);var m="KB";if(e>1000){e=Math.round(e/1000);m="MB"}var j=e.toString().split(".");e=j[0];if(j.length>1){e+="."+j[1].substr(0,2)}e+=m;var g=b.name;if(g.length>25){g=g.substr(0,25)+"..."}if(a.inArray("onSelect",c.overrideEvents)<0){n=c.downloadTemplate({files:[b],options:c});for(var k in itemData){n=n.replace(new RegExp("\\$\\{"+k+"\\}","g"),itemData[k])
}if(c.uploadTemplate){n=a(c.templatesContainer).html(n).children();n.addClass("template-download fade");a("#"+b.id).replaceWith(n)}this._trigger("onRenderDownloadTmp",null,{item:n})}this._trigger("onSuccess",null,[{file:b}])}})})($);

(function(a){if(typeof define==="function"&&define.amd){define(["jquery","jquery.ui.widget"],a)}else{if(typeof exports==="object"){a(require("jquery"),require("./vendor/jquery.ui.widget"))}else{a(window.jQuery)}}}(function(b){b.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||b('<input type="file">').prop("disabled"));b.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);b.support.xhrFormDataFileUpload=!!window.FormData;b.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);function a(c){var d=c==="dragover";return function(g){g.dataTransfer=g.originalEvent&&g.originalEvent.dataTransfer;var f=g.dataTransfer;if(f&&b.inArray("Files",f.types)!==-1&&this._trigger(c,b.Event(c,{delegatedEvent:g}))!==false){g.preventDefault();if(d){f.dropEffect="copy"}}}}b.component("blueimp.fileupload",{options:{dropZone:b(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,autoUpload:true,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(d,c){d=this.messages[d]||d.toString();if(c){b.each(c,function(e,f){d=d.replace("{"+e+"}",f)})}return d},formData:function(c){return c.serializeArray()},add:function(d,c){if(d.isDefaultPrevented()){return false}if(c.autoUpload||(c.autoUpload!==false&&b(this).fileupload("option","autoUpload"))){c.process().done(function(){c.submit()})}},processData:false,contentType:false,cache:false,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:b.support.blobSlice&&function(){var c=this.slice||this.webkitSlice||this.mozSlice;
return c.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=((Date.now)?Date.now():(new Date()).getTime());this.loaded=0;this.bitrate=0;this.getBitrate=function(e,d,c){var f=e-this.timestamp;if(!this.bitrate||!c||f>c){this.bitrate=(d-this.loaded)*(1000/f)*8;this.loaded=d;this.timestamp=e}return this.bitrate}},_isXHRUpload:function(c){return !c.forceIframeTransport&&((!c.multipart&&b.support.xhrFileUpload)||b.support.xhrFormDataFileUpload)},_getFormData:function(c){var d;if(b.type(c.formData)==="function"){return c.formData(c.form)}if(b.isArray(c.formData)){return c.formData}if(b.type(c.formData)==="object"){d=[];b.each(c.formData,function(e,f){d.push({name:e,value:f})});return d}return[]},_getTotal:function(d){var c=0;b.each(d,function(e,f){c+=f.size||1});return c},_initProgressObject:function(d){var c={loaded:0,total:0,bitrate:0};if(d._progress){b.extend(d._progress,c)}else{d._progress=c}},_initResponseObject:function(c){var d;if(c._response){for(d in c._response){if(c._response.hasOwnProperty(d)){delete c._response[d]}}}else{c._response={}}},_onProgress:function(g,f){if(g.lengthComputable){var d=((Date.now)?Date.now():(new Date()).getTime()),c;if(f._time&&f.progressInterval&&(d-f._time<f.progressInterval)&&g.loaded!==g.total){return}f._time=d;c=Math.floor(g.loaded/g.total*(f.chunkSize||f._progress.total))+(f.uploadedBytes||0);this._progress.loaded+=(c-f._progress.loaded);this._progress.bitrate=this._bitrateTimer.getBitrate(d,this._progress.loaded,f.bitrateInterval);f._progress.loaded=f.loaded=c;f._progress.bitrate=f.bitrate=f._bitrateTimer.getBitrate(d,c,f.bitrateInterval);this._trigger("progress",b.Event("progress",{delegatedEvent:g}),f);this._trigger("progressall",b.Event("progressall",{delegatedEvent:g}),this._progress)}},_initProgressListener:function(c){var d=this,e=c.xhr?c.xhr():b.ajaxSettings.xhr();if(e.upload){b(e.upload).bind("progress",function(f){var g=f.originalEvent;f.lengthComputable=g.lengthComputable;f.loaded=g.loaded;f.total=g.total;d._onProgress(f,c)
});c.xhr=function(){return e}}},_isInstanceOf:function(c,d){return Object.prototype.toString.call(d)==="[object "+c+"]"},_initXHRData:function(d){var f=this,h,e=d.files[0],c=d.multipart||!b.support.xhrFileUpload,g=b.type(d.paramName)==="array"?d.paramName[0]:d.paramName;d.headers=b.extend({},d.headers);if(d.contentRange){d.headers["Content-Range"]=d.contentRange}if(!c||d.blob||!this._isInstanceOf("File",e)){d.headers["Content-Disposition"]='attachment; filename="'+encodeURI(e.name)+'"'}if(!c){d.contentType=e.type||"application/octet-stream";d.data=d.blob||e}else{if(b.support.xhrFormDataFileUpload){if(d.postMessage){h=this._getFormData(d);if(d.blob){h.push({name:g,value:d.blob})}else{b.each(d.files,function(i,j){h.push({name:(b.type(d.paramName)==="array"&&d.paramName[i])||g,value:j})})}}else{if(f._isInstanceOf("FormData",d.formData)){h=d.formData}else{h=new FormData();b.each(this._getFormData(d),function(i,j){h.append(j.name,j.value)})}if(d.blob){h.append(g,d.blob,e.name)}else{b.each(d.files,function(i,j){if(f._isInstanceOf("File",j)||f._isInstanceOf("Blob",j)){h.append((b.type(d.paramName)==="array"&&d.paramName[i])||g,j,j.uploadName||j.name)}})}}d.data=h}}d.blob=null},_initIframeSettings:function(c){var d=b("<a></a>").prop("href",c.url).prop("host");c.dataType="iframe "+(c.dataType||"");c.formData=this._getFormData(c);if(c.redirect&&d&&d!==location.host){c.formData.push({name:c.redirectParamName||"redirect",value:c.redirect})}},_initDataSettings:function(c){if(this._isXHRUpload(c)){if(!this._chunkedUpload(c,true)){if(!c.data){this._initXHRData(c)}this._initProgressListener(c)}if(c.postMessage){c.dataType="postmessage "+(c.dataType||"")}}else{this._initIframeSettings(c)}},_getParamName:function(c){var d=b(c.fileInput),e=c.paramName;if(!e){e=[];d.each(function(){var f=b(this),g=f.prop("name")||"files[]",h=(f.prop("files")||[1]).length;while(h){e.push(g);h-=1}});if(!e.length){e=[d.prop("name")||"files[]"]}}else{if(!b.isArray(e)){e=[e]}}return e},_initFormSettings:function(c){if(!c.form||!c.form.length){c.form=b(c.fileInput.prop("form"));
if(!c.form.length){c.form=b(this.options.fileInput.prop("form"))}}c.paramName=this._getParamName(c);if(!c.url){c.url=c.form.prop("action")||location.href}c.type=(c.type||(b.type(c.form.prop("method"))==="string"&&c.form.prop("method"))||"").toUpperCase();if(c.type!=="POST"&&c.type!=="PUT"&&c.type!=="PATCH"){c.type="POST"}if(!c.formAcceptCharset){c.formAcceptCharset=c.form.attr("accept-charset")}},_getAJAXSettings:function(d){var c=b.extend({},this.options,d);this._initFormSettings(c);this._initDataSettings(c);return c},_getDeferredState:function(c){if(c.state){return c.state()}if(c.isResolved()){return"resolved"}if(c.isRejected()){return"rejected"}return"pending"},_enhancePromise:function(c){c.success=c.done;c.error=c.fail;c.complete=c.always;return c},_getXHRPromise:function(f,e,d){var c=b.Deferred(),g=c.promise();e=e||this.options.context||g;if(f===true){c.resolveWith(e,d)}else{if(f===false){c.rejectWith(e,d)}}g.abort=c.promise;return this._enhancePromise(g)},_addConvenienceMethods:function(g,f){var d=this,c=function(e){return b.Deferred().resolveWith(d,e).promise()};f.process=function(h,e){if(h||e){f._processQueue=this._processQueue=(this._processQueue||c([this])).pipe(function(){if(f.errorThrown){return b.Deferred().rejectWith(d,[f]).promise()}return c(arguments)}).pipe(h,e)}return this._processQueue||c([this])};f.submit=function(){if(this.state()!=="pending"){f.jqXHR=this.jqXHR=(d._trigger("submit",b.Event("submit",{delegatedEvent:g}),this)!==false)&&d._onSend(g,this)}return this.jqXHR||d._getXHRPromise()};f.abort=function(){if(this.jqXHR){return this.jqXHR.abort()}this.errorThrown="abort";d._trigger("fail",null,this);return d._getXHRPromise(false)};f.state=function(){if(this.jqXHR){return d._getDeferredState(this.jqXHR)}if(this._processQueue){return d._getDeferredState(this._processQueue)}};f.processing=function(){return !this.jqXHR&&this._processQueue&&d._getDeferredState(this._processQueue)==="pending"};f.progress=function(){return this._progress};f.response=function(){return this._response
}},_getUploadedBytes:function(e){var c=e.getResponseHeader("Range"),f=c&&c.split("-"),d=f&&f.length>1&&parseInt(f[1],10);return d&&d+1},_chunkedUpload:function(n,h){n.uploadedBytes=n.uploadedBytes||0;var g=this,e=n.files[0],f=e.size,c=n.uploadedBytes,d=n.maxChunkSize||f,j=this._blobSlice,k=b.Deferred(),m=k.promise(),i,l;if(!(this._isXHRUpload(n)&&j&&(c||d<f))||n.data){return false}if(h){return true}if(c>=f){e.error=n.i18n("uploadedBytes");return this._getXHRPromise(false,n.context,[null,"error",e.error])}l=function(){var q=b.extend({},n),p=q._progress.loaded;q.blob=j.call(e,c,c+d,e.type);q.chunkSize=q.blob.size;q.contentRange="bytes "+c+"-"+(c+q.chunkSize-1)+"/"+f;g._initXHRData(q);g._initProgressListener(q);i=((g._trigger("chunksend",null,q)!==false&&b.ajax(q))||g._getXHRPromise(false,q.context)).done(function(o,s,r){c=g._getUploadedBytes(r)||(c+q.chunkSize);if(p+q.chunkSize-q._progress.loaded){g._onProgress(b.Event("progress",{lengthComputable:true,loaded:c-q.uploadedBytes,total:c-q.uploadedBytes}),q)}n.uploadedBytes=q.uploadedBytes=c;q.result=o;q.textStatus=s;q.jqXHR=r;g._trigger("chunkdone",null,q);g._trigger("chunkalways",null,q);if(c<f){l()}else{k.resolveWith(q.context,[o,s,r])}}).fail(function(o,s,r){q.jqXHR=o;q.textStatus=s;q.errorThrown=r;g._trigger("chunkfail",null,q);g._trigger("chunkalways",null,q);k.rejectWith(q.context,[o,s,r])})};this._enhancePromise(m);m.abort=function(){return i.abort()};l();return m},_beforeSend:function(d,c){if(this._active===0){this._trigger("start");this._bitrateTimer=new this._BitrateTimer();this._progress.loaded=this._progress.total=0;this._progress.bitrate=0}this._initResponseObject(c);this._initProgressObject(c);c._progress.loaded=c.loaded=c.uploadedBytes||0;c._progress.total=c.total=this._getTotal(c.files)||1;c._progress.bitrate=c.bitrate=0;this._active+=1;this._progress.loaded+=c.loaded;this._progress.total+=c.total},_onDone:function(c,h,g,e){var f=e._progress.total,d=e._response;if(e._progress.loaded<f){this._onProgress(b.Event("progress",{lengthComputable:true,loaded:f,total:f}),e)
}d.result=e.result=c;d.textStatus=e.textStatus=h;d.jqXHR=e.jqXHR=g;this._trigger("done",null,e)},_onFail:function(e,g,f,d){var c=d._response;if(d.recalculateProgress){this._progress.loaded-=d._progress.loaded;this._progress.total-=d._progress.total}c.jqXHR=d.jqXHR=e;c.textStatus=d.textStatus=g;c.errorThrown=d.errorThrown=f;this._trigger("fail",null,d)},_onAlways:function(e,f,d,c){this._trigger("always",null,c)},_onSend:function(i,g){if(!g.submit){this._addConvenienceMethods(i,g)}var h=this,k,c,j,d,l=h._getAJAXSettings(g),f=function(){h._sending+=1;l._bitrateTimer=new h._BitrateTimer();k=k||(((c||h._trigger("send",b.Event("send",{delegatedEvent:i}),l)===false)&&h._getXHRPromise(false,l.context,c))||h._chunkedUpload(l)||b.ajax(l)).done(function(e,n,m){h._onDone(e,n,m,l)}).fail(function(e,n,m){h._onFail(e,n,m,l)}).always(function(n,o,m){h._onAlways(n,o,m,l);h._sending-=1;h._active-=1;if(l.limitConcurrentUploads&&l.limitConcurrentUploads>h._sending){var e=h._slots.shift();while(e){if(h._getDeferredState(e)==="pending"){e.resolve();break}e=h._slots.shift()}}if(h._active===0){h._trigger("stop")}});return k};this._beforeSend(i,l);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){j=b.Deferred();this._slots.push(j);d=j.pipe(f)}else{this._sequence=this._sequence.pipe(f,f);d=this._sequence}d.abort=function(){c=[undefined,"abort","abort"];if(!k){if(j){j.rejectWith(l.context,c)}return f()}return k.abort()};return this._enhancePromise(d)}return f()},_onAdd:function(q,m){var p=this,v=true,u=b.extend({},this.options,m),f=m.files,s=f.length,g=u.limitMultiFileUploads,k=u.limitMultiFileUploadSize,t=u.limitMultiFileUploadSizeOverhead,o=0,n=this._getParamName(u),d,c,r,l,h=0;if(!s){return false}if(k&&f[0].size===undefined){k=undefined}if(!(u.singleFileUploads||g||k)||!this._isXHRUpload(u)){r=[f];d=[n]}else{if(!(u.singleFileUploads||k)&&g){r=[];d=[];for(l=0;l<s;l+=g){r.push(f.slice(l,l+g));
c=n.slice(l,l+g);if(!c.length){c=n}d.push(c)}}else{if(!u.singleFileUploads&&k){r=[];d=[];for(l=0;l<s;l=l+1){o+=f[l].size+t;if(l+1===s||((o+f[l+1].size+t)>k)||(g&&l+1-h>=g)){r.push(f.slice(h,l+1));c=n.slice(h,l+1);if(!c.length){c=n}d.push(c);h=l+1;o=0}}}else{d=n}}}m.originalFiles=f;b.each(r||f,function(e,i){var j=b.extend({},m);j.files=r?i:[i];j.paramName=d[e];p._initResponseObject(j);p._initProgressObject(j);p._addConvenienceMethods(q,j);v=p._trigger("add",b.Event("add",{delegatedEvent:q}),j);return v});return v},_replaceFileInput:function(f){var c=f.fileInput,d=c.clone(true),e=c.is(document.activeElement);f.fileInputClone=d;b("<form></form>").append(d)[0].reset();c.after(d).detach();if(e){d.focus()}b.cleanData(c.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(g,h){if(h===c[0]){return d[0]}return h});if(c[0]===this.element[0]){this.element=d}},_handleFileTreeEntry:function(h,j){var e=this,i=b.Deferred(),d=function(l){if(l&&!l.entry){l.entry=h}i.resolve([l])},f=function(l){e._handleFileTreeEntries(l,j+h.name+"/").done(function(m){i.resolve(m)}).fail(d)},g=function(){k.readEntries(function(l){if(!l.length){f(c)}else{c=c.concat(l);g()}},d)},k,c=[];j=j||"";if(h.isFile){if(h._file){h._file.relativePath=j;i.resolve(h._file)}else{h.file(function(l){l.relativePath=j;i.resolve(l)},d)}}else{if(h.isDirectory){k=h.createReader();g()}else{i.resolve([])}}return i.promise()},_handleFileTreeEntries:function(c,e){var d=this;return b.when.apply(b,b.map(c,function(f){return d._handleFileTreeEntry(f,e)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(d){d=d||{};var c=d.items;if(c&&c.length&&(c[0].webkitGetAsEntry||c[0].getAsEntry)){return this._handleFileTreeEntries(b.map(c,function(f){var e;if(f.webkitGetAsEntry){e=f.webkitGetAsEntry();if(e){e._file=f.getAsFile()}return e}return f.getAsEntry()}))}return b.Deferred().resolve(b.makeArray(d.files)).promise()},_getSingleFileInputFiles:function(e){e=b(e);var c=e.prop("webkitEntries")||e.prop("entries"),d,f;
if(c&&c.length){return this._handleFileTreeEntries(c)}d=b.makeArray(e.prop("files"));if(!d.length){f=e.prop("value");if(!f){return b.Deferred().resolve([]).promise()}d=[{name:f.replace(/^.*\\/,"")}]}else{if(d[0].name===undefined&&d[0].fileName){b.each(d,function(g,h){h.name=h.fileName;h.size=h.fileSize})}}return b.Deferred().resolve(d).promise()},_getFileInputFiles:function(c){if(!(c instanceof b)||c.length===1){return this._getSingleFileInputFiles(c)}return b.when.apply(b,b.map(c,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(f){var c=this,d={fileInput:b(f.target),form:b(f.target.form)};this._getFileInputFiles(d.fileInput).always(function(e){d.files=e;if(c.options.replaceFileInput){c._replaceFileInput(d)}if(c._trigger("change",b.Event("change",{delegatedEvent:f}),d)!==false){c._onAdd(f,d)}})},_onPaste:function(f){var c=f.originalEvent&&f.originalEvent.clipboardData&&f.originalEvent.clipboardData.items,d={files:[]};if(c&&c.length){b.each(c,function(e,h){var g=h.getAsFile&&h.getAsFile();if(g){d.files.push(g)}});if(this._trigger("paste",b.Event("paste",{delegatedEvent:f}),d)!==false){this._onAdd(f,d)}}},_onDrop:function(g){g.dataTransfer=g.originalEvent&&g.originalEvent.dataTransfer;var c=this,f=g.dataTransfer,d={};if(f&&f.files&&f.files.length){g.preventDefault();this._getDroppedFiles(f).always(function(e){d.files=e;if(c._trigger("drop",b.Event("drop",{delegatedEvent:g}),d)!==false){c._onAdd(g,d)}})}},_onDragOver:a("dragover"),_onDragEnter:a("dragenter"),_onDragLeave:a("dragleave"),_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave});this._on(this.options.pasteZone,{paste:this._onPaste})}if(b.support.fileInput){this._on(this.options.fileInput,{change:this._onChange})}},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");
this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(c,d){var e=b.inArray(c,this._specialOptions)!==-1;if(e){this._destroyEventHandlers()}this._super(c,d);if(e){this._initSpecialOptions();this._initEventHandlers()}},_initSpecialOptions:function(){var c=this.options;if(c.fileInput===undefined){c.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]')}else{if(!(c.fileInput instanceof b)){c.fileInput=b(c.fileInput)}}if(!(c.dropZone instanceof b)){c.dropZone=b(c.dropZone)}if(!(c.pasteZone instanceof b)){c.pasteZone=b(c.pasteZone)}},_getRegExp:function(e){var d=e.split("/"),c=d.pop();d.shift();return new RegExp(d.join("/"),c)},_isRegExpOption:function(c,d){return c!=="url"&&b.type(d)==="string"&&/^\/.*\/[igm]{0,3}$/.test(d)},_initDataAttributes:function(){var d=this,c=this.options,e=this.element.data();b.each(this.element[0].attributes,function(g,f){var h=f.name.toLowerCase(),i;if(/^data-/.test(h)){h=h.slice(5).replace(/-[a-z]/g,function(j){return j.charAt(1).toUpperCase()});i=e[h];if(d._isRegExpOption(h,i)){i=d._getRegExp(i)}c[h]=i}})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(d){var c=this;if(!d||this.options.disabled){return}if(d.fileInput&&!d.files){this._getFileInputFiles(d.fileInput).always(function(e){d.files=e;c._onAdd(null,d)})}else{d.files=b.makeArray(d.files);this._onAdd(null,d)}},send:function(g){if(g&&!this.options.disabled){if(g.fileInput&&!g.files){var e=this,c=b.Deferred(),h=c.promise(),d,f;h.abort=function(){f=true;if(d){return d.abort()}c.reject(null,"abort","abort");return h};this._getFileInputFiles(g.fileInput).always(function(i){if(f){return}if(!i.length){c.reject();return}g.files=i;d=e._onSend(null,g);
d.then(function(j,l,k){c.resolve(j,l,k)},function(j,l,k){c.reject(j,l,k)})});return this._enhancePromise(h)}g.files=b.makeArray(g.files);if(g.files.length){return this._onSend(null,g)}}return this._getXHRPromise(false,g&&g.context)}})}));

(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fileupload"],a)}else{if(typeof exports==="object"){a(require("jquery"))}else{a(window.jQuery)}}}(function(a){var b=a.blueimp.fileupload.prototype.options.add;a.component("blueimp.fileupload",a.blueimp.fileupload,{options:{processQueue:[],add:function(f,c){var d=a(this);c.process(function(){return d.fileupload("process",c)});b.call(this,f,c)}},processActions:{},_processFile:function(g,f){var e=this,c=a.Deferred().resolveWith(e,[g]),d=c.promise();this._trigger("process",null,g);a.each(g.processQueue,function(h,j){var k=function(i){if(f.errorThrown){return a.Deferred().rejectWith(e,[f]).promise()}return e.processActions[j.action].call(e,i,j)};d=d.pipe(k,j.always&&k)});d.done(function(){e._trigger("onProcessDone",null,g);e._trigger("onProcessAlways",null,g)}).fail(function(){e._trigger("onProcessFail",null,g);e._trigger("onProcessAlways",null,g)});return d},_transformProcessQueue:function(c){var d=[];a.each(c.processQueue,function(){var e={},g=this.action,f=this.prefix===true?g:this.prefix;a.each(this,function(h,i){if(a.type(i)==="string"&&i.charAt(0)==="@"){e[h]=c[i.slice(1)||(f?f+h.charAt(0).toUpperCase()+h.slice(1):h)]}else{e[h]=i}});d.push(e)});c.processQueue=d},processing:function(){return this._processing},process:function(e){var d=this,c=a.extend({},this.options,e);if(c.processQueue&&c.processQueue.length){this._transformProcessQueue(c);if(this._processing===0){this._trigger("onProcessStart")}a.each(e.files,function(f){var h=f?a.extend({},c):c,g=function(){if(e.errorThrown){return a.Deferred().rejectWith(d,[e]).promise()}return d._processFile(h,e)};h.index=f;d._processing+=1;d._processingQueue=d._processingQueue.pipe(g,g).always(function(){d._processing-=1;if(d._processing===0){d._trigger("onProcessStop")}})})}return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=a.Deferred().resolveWith(this).promise()}})}));

(function(a){if(typeof define==="function"&&define.amd){define(["jquery","tmpl","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],a)}else{if(typeof exports==="object"){a(require("jquery"),require("tmpl"))}else{a(window.jQuery,window.tmpl)}}}(function(b,a){b.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId");b.component("blueimp.fileupload",b.blueimp.fileupload,{getUnUploadValues:function(){var c=[];for(var d=0;d<this.options.unUploadedFileList.length;d++){c.push(this.options.unUploadedFileList[d][this.options.prmNames.fileId])}return c},remove:function(e){var f=this;function c(h){var g=b("#"+h).data("data");if(b("#"+h).hasClass("template-download")){f._trigger("remove",null,b.extend({context:b("#"+h),type:"DELETE"},g))}else{if(b("#"+h).hasClass("template-upload")){if(g.abort){g.abort()}else{g.errorThrown="abort";f._trigger("fail",null,b.extend({context:b("#"+h),type:"DELETE"},g))}}}}if(e===undefined){this.options.filesContainer.children().each(function(){c(this.id)})}else{if(typeof e==="array"){for(var d=0;d<e.length;d++){c(e[d])}}else{c(e)}}this._trigger("onDelete",null)},destroy:function(){this.element.find(".fileupload-buttonbar").find(".fileinput-button").each(function(){var c=b(this).find("input:file").detach();b(this).button("destroy").append(c)});this.element.find(".ctrl-init-button").remove();this.options.filesContainer.remove();this._super()},upload:function(d){if(b.isArray(d)){for(var c=0;c<d.length;c++){var e=b("#"+d[c]).data("data");if(e&&e.submit){e.submit()}}}else{var e=b("#"+d).data("data");if(e&&e.submit){e.submit()}}}});b.component("coral.fileuploader",{castProperties:["triggers"],checkIE:function(){var c=3,e=document.createElement("div"),d=e.getElementsByTagName("i");while(e.innerHTML="<!--[if gt IE "+(++c)+"]><i></i><![endif]-->",d[0]){}return c>4?c:false},options:{prmNames:{fileName:"name",fileSize:"size",fileURL:"url",fileError:"error",fileId:"id",filetype:"type"},focus:null,clearError:null,triggers:null,postData:{},autoUpload:false,removeCompleted:false,maxFileSize:"5012kb",separator:",",filesUrl:null,filesLimt:9999,multiple:"multiple",uploadBtnOptions:{icons:"",label:"+"}},_getConfig:function(){var f,i=this;
var d=this.checkIE();var e=this.options;if(!e.queueID){e.queueID=this.element[0].id+"_queueID";e.filesContainer=b("<ul/>",{"class":"files",id:e.queueID});this.element.before(e.filesContainer)}else{e.filesContainer=b("#"+e.queueID)}if(e.queueMode=="list"){e.filesContainer.addClass("list-files")}if(e.queueMode=="card"){e.filesContainer.addClass("card-files")}if(e.queueMode!=="card"&&e.queueMode!=="list"){e.filesContainer.addClass(e.queueMode)}e.templatesContainer=this.document[0].createElement(e.filesContainer.prop("nodeName"));e.uploadTmp=function(l){var j,k;if(l.fileError){j='<div class="fileError"><span class="error"></span></div>'}else{j=""}k='<li id="${fileId}" class="fileItem"><div class="fileContent"><span class="fileThumb">${fileType}</span><div class="progress"><div class="progressbar-value"></div></div><span class="fileName" title="${fileName}">${fileName}</span><span class="fileSize">(${fileSize})k</span><span class="fileAction"><span class="progressbar-text"></span><span class="upload cui-icon-plus-circle2"></span><span class="remove cui-icon-minus-circle2"></span></span>'+j+"</div></li>";return k};e.uploadTemplate=function(r){var m="fileId_"+new Date().getTime();var l=r.options.prmNames;r.options.unUploadedFileList=r.options.unUploadedFileList||[];var p=r.options.autoUpload,k,n,j={fileName:r.files[0][l.fileName],fileSize:r.files[0][l.fileSize],fileId:r.files[0][l.fileId]||m,fileError:r.files[0][l.fileError],fileType:r.files[0][l.filetype]};r.files[0].id=j.fileId;j.fileType=j.fileName.substring(j.fileName.lastIndexOf(".")+1);r.options.unUploadedFileList.push(j);if(!p){k="disabled"}n=r.options.uploadTmp(j);for(var q in j){n=n.replace(new RegExp("\\$\\{"+q+"\\}","g"),j[q])}return n};e.downloadTmp=function(l){var j,k;if(l.fileError){j='<div class="fileError"><span class="error"></span>${fileError}</div>'}else{j=""}k='<li id="${fileId}" class="fileItem"><div class="fileContent"><span class="fileThumb">${fileType}</span><div class="progress"><div class="progressbar-value"></div></div><span class="fileName"><a href="${fileUrl} title="${fileName} download=${fileName}">${fileName}</a></span><span class="fileSize">(${fileSize})k</span><span class="remove cui-icon-minus-circle2 fileAction"></span></span>'+j+"</div></li>";
return k};e.downloadTemplate=function(j){var s=j.options.prmNames;j.options.uploadedFileList=j.options.uploadedFileList||[];var k="fileId_"+new Date().getTime();var q=j.options.autoUpload,m,r,p,l={fileName:j.files[0][s.fileName],fileSize:j.files[0][s.fileSize],fileUrl:j.options[s.fileUrl],fileError:j.files[0][s.fileError],fileId:j.files[0][s.fileId]||k,fileType:j.files[0][s.filetype]};j.options.uploadedFileList.push(l);r=j.options.downloadTmp(l);for(var n in l){r=r.replace(new RegExp("\\$\\{"+n+"\\}","g"),l[n])}return r};this.useFlash=(d!==false&&d<10);if(this.options.uploadBtn){var h="fileinput-button",g=this.options.uploadBtnOptions;if(g.cls){g=b.extend({},g,{cls:h+" "+g.cls})}else{g=b.extend({},g,{cls:h})}b(this.options.uploadBtn).button(g);var c={type:"file",name:"uploadFile"};if(this.options.multiple){c.multiple="mutiple"}b("<input/>",c).appendTo(b(this.options.uploadBtn));this.uploadFile=b(this.options.uploadBtn).find("input[type=file]");this.uploaderBtn=b(this.options.uploadBtn).uniqueId()}else{this.uploadFile=this.element.find("input[type=file]");this.uploaderBtn=this.element.find(".fileinput-button").uniqueId()}if(this.useFlash){this.uploadFile.hide();f={swf:b.coral.scriptPath+"external/swfupload.swf",uploader:this.options.url,auto:this.options.autoUpload,separator:this.options.separator,checkExisting:false,debug:this.options.debug,fileObjName:"uploadFile",height:130,uploadTemplate:this.options.uploadTemplate,downloadTemplate:this.options.downloadTemplate,method:"post",multi:this.options.multi,formData:this.options.formData,preventCaching:true,progressData:"percentage",queueID:this.options.queueID,queueSizeLimit:999,removeCompleted:this.options.removeCompleted,removeTimeout:this.options.removeTimeout,requeueErrors:false,successTimeout:30,uploadLimit:this.options.filesLimt,width:820,maxFileSize:this.options.maxFileSize,fileTypeExts:this.options.acceptFileTypes,onSWFReady:function(){if(i.options.filesUrl){b.ajax({type:"POST",async:false,datatype:"json",url:i.options.filesUrl,data:i.options.postData,success:function(l){for(var j=0;
j<l.length;j++){var k=i._renderDownload([l[j]]).appendTo(i.options.filesContainer);i._transition(k);i.uploaderBtn.swfuploader("addUploadCount")}},error:function(j){}})}},overrideEvents:[]};b.extend(true,f,this.options);this.uploaderBtn.swfuploader(f)}else{f={disabled:false,autoUpload:false,url:this.options.url,maxFileSize:this.options.maxFileSize,maxNumberOfFiles:this.options.maxNumberOfFiles,acceptFileTypes:this.options.acceptFileTypes,uploadTemplate:this.options.uploadTemplate,downloadTemplate:this.options.downloadTemplate,templatesContainer:this.options.templatesContainer,filesContainer:this.options.filesContainer,prependFiles:false,dataType:"json",separator:",",messages:{unknownError:"Unknown error"},processdone:function(k,j){j.context.find(".upload").button("enable")},required:true,getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(j){if(typeof(j.result)==="string"){j.result=b.parseJSON(j.result)}if(j.result&&b.isArray(j.result.files)){return j.result.files}return[]},add:function(o,m){if(o.isDefaultPrevented()){return false}var n=b(this),k,l=n.data("blueimp-fileupload"),j=l.options;if(!i.validateFile(j,m)){return}n.fileupload("process",m);m.context=i._renderUpload(m.files).data("data",m).addClass("processing");j.filesContainer[j.prependFiles?"prepend":"append"](m.context);i._forceReflow(m.context);i._transition(m.context);m.process(function(){return n.fileupload("process",m)}).always(function(){m.context.each(function(p){b(this).find(".size").text(i._formatFileSize(m.files[p].size))}).removeClass("processing")}).done(function(){m.context.find(".upload").prop("disabled",false);if((i._trigger("onSelect",o,[{file:m.files[0]}])!==false)&&(j.autoUpload||m.autoUpload)&&m.autoUpload!==false){m.submit()}}).fail(function(){if(m.files.error){m.context.each(function(q){var p=m.files[q].error;if(p){b(this).find(".error").text(p)}})}})},done:function(q,p){if(q.isDefaultPrevented()){return false}var o=b(this).data("blueimp-fileupload"),l=p.getFilesFromResponse||o.options.getFilesFromResponse,n=l(p),m,j;
if(p.context){p.context.each(function(r){var s=n[r]||{error:"Empty file upload result"};j=i._addFinishedDeferreds();i._transition(b(this)).done(function(){var t=b(this);m=i._renderDownload([s]).replaceAll(t);i._forceReflow(m);i._transition(m).done(function(){p.context=b(this);i._trigger("onSuccess",q,[{file:p.files[0]}]);i._trigger("onComplete",q,[{file:p.files[0]}]);j.resolve()})})})}else{m=i._renderDownload(n)[o.options.prependFiles?"prependTo":"appendTo"](o.options.filesContainer);i._forceReflow(m);j=i._addFinishedDeferreds();i._transition(m).done(function(){p.context=b(this);i._trigger("onSuccess",q,[{file:p.files[0]}]);i._trigger("onComplete",q,[{file:p.files[0]}]);j.resolve()})}var k=i.options.unUploadedFileList;i.clearFileList(k,p)},stop:function(l){if(l.isDefaultPrevented()){return false}var k=b(this).data("blueimp-fileupload"),j=i._addFinishedDeferreds();b.when.apply(b,i._getFinishedDeferreds()).done(function(){i._trigger("onStop",l)});i._transition(b(this).find(".fileupload-progress")).done(function(){b(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%");b(this).find(".progress-extended").html("&nbsp;");j.resolve()})},processstart:function(j){if(j.isDefaultPrevented()){return false}b(this).addClass("fileupload-processing")},processstop:function(j){if(j.isDefaultPrevented()){return false}b(this).removeClass("fileupload-processing")},fail:function(l,j){if(l.isDefaultPrevented()){return false}var k=b(this).data("blueimp-fileupload"),n,m,o,r;if(j.context){j.context.each(function(s){if(j.errorThrown!=="abort"){var t=j.files[s];t.error=t.error||j.errorThrown||j.i18n("unknownError");r=i._addFinishedDeferreds();i._transition(b(this)).done(function(){var u=b(this);o=i._renderDownload([t]).replaceAll(u);i._forceReflow(o);i._transition(o).done(function(){j.context=b(this);i._trigger("onFail",l,[{file:j.files[0],error:j.files[0].error}]);i._trigger("onComplete",l,[{file:j.files[0]}]);r.resolve()})})}else{r=i._addFinishedDeferreds();i._transition(b(this)).done(function(){b(this).remove();
i._trigger("onRemove",l);r.resolve()})}})}else{if(j.errorThrown!=="abort"){j.context=i._renderUpload(j.files)[k.options.prependFiles?"prependTo":"appendTo"](k.options.filesContainer).data("data",j);i._forceReflow(j.context);r=i._addFinishedDeferreds();i._transition(j.context).done(function(){j.context=b(this);i._trigger("onFail",l,[{file:j.files[0],error:j.files[0].error}]);i._trigger("onComplete",l,[{file:j.files[0]}]);r.resolve()})}else{i._trigger("onFail",l,[{file:j.files[0],error:j.files[0].error}]);i._trigger("onComplete",l,[{file:j.files[0]}]);i._addFinishedDeferreds().resolve()}}var q=i.options.uploadedFileList;i.clearFileList(q,j);var p=i.options.unUploadedFileList;i.clearFileList(p,j)},progress:function(l,k){if(l.isDefaultPrevented()){return false}var j=Math.floor(k.loaded/k.total*100);if(k.context){k.context.each(function(){b(this).find(".progressbar-value").show().css("width",j+"%");b(this).find(".progressbar-text").text(j+"%")})}i._trigger("onProgress",l,[{file:k.files[0]}])},progressall:function(n,l){if(n.isDefaultPrevented()){return false}var m=b(this),k=Math.floor(l.loaded/l.total*100),j=m.find(".fileupload-progress"),o=j.find(".progress-extended");if(o.length){o.html(i._renderExtendedProgress(l))}},start:function(k){if(k.isDefaultPrevented()){return false}var j=b(this).data("blueimp-fileupload");i._resetFinishedDeferreds();i._transition(b(this).find(".fileupload-progress")).done(function(){i._trigger("onStart",k)})},send:function(k,j){if(k.isDefaultPrevented()){return false}if(j.context&&j.dataType&&j.dataType.substr(0,6)==="iframe"){j.context.find(".progress").addClass(!b.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%")}return i._trigger("onSend",k,[{file:j.files[0]}])},remove:function(n,m){if(n.isDefaultPrevented()){return false}var k=b(this).data("blueimp-fileupload"),l,j,o=function(){i._transition(m.context).done(function(){b(this).remove();i._trigger("onRemove",n)})};if(m.url){m.dataType=m.dataType||k.options.dataType;
b.ajax(m).done(o).fail(function(){i._trigger("onRemoveFailed",n)})}else{o()}var j=i.options.uploadedFileList;i.clearFileList(j,m)}};b.extend(true,f,this.options);this.uploaderBtn.fileupload(f);if(this.options.filesUrl){b.ajax({type:"POST",async:false,datatype:"json",url:this.options.filesUrl,data:this.options.postData,success:function(l){for(var j=0;j<l.length;j++){var k=i._renderDownload([l[j]]).appendTo(i.options.filesContainer);i._transition(k)}},error:function(j){}})}}},upload:function(d){var c=this.checkIE(),e=[];if(this.useFlash){this.uploaderBtn.swfuploader("upload",d)}else{if(d===undefined){d=this.getUnUploadValues()}this.uploaderBtn.fileupload("upload",d)}},_destroy:function(){var c=this.checkIE(),d=[];if(this.useFlash){this.uploaderBtn.swfuploader("destroy")}else{this.uploaderBtn.fileupload("destroy")}},remove:function(d){var c=this.checkIE(),e=[];if(this.useFlash){this.uploaderBtn.swfuploader("cancel",d)}else{this.uploaderBtn.fileupload("remove",d)}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(c){if(!c){c=b.Deferred()}this._finishedUploads.push(c);return c},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var f=b(this),d=f.prop("href"),c=f.prop("download"),e="application/octet-stream";f.bind("dragstart",function(g){try{g.originalEvent.dataTransfer.setData("DownloadURL",[e,c,d].join(":"))}catch(h){}})},_formatFileSize:function(c){if(typeof c!=="number"){return""}if(c>=1000000000){return(c/1000000000).toFixed(2)+" GB"}if(c>=1000000){return(c/1000000).toFixed(2)+" MB"}return(c/1000).toFixed(2)+" KB"},_formatBitrate:function(c){if(typeof c!=="number"){return""}if(c>=1000000000){return(c/1000000000).toFixed(2)+" Gbit/s"}if(c>=1000000){return(c/1000000).toFixed(2)+" Mbit/s"}if(c>=1000){return(c/1000).toFixed(2)+" kbit/s"}return c.toFixed(2)+" bit/s"},_formatTime:function(d){var c=new Date(d*1000),e=Math.floor(d/86400);e=e?e+"d ":"";return e+("0"+c.getUTCHours()).slice(-2)+":"+("0"+c.getUTCMinutes()).slice(-2)+":"+("0"+c.getUTCSeconds()).slice(-2)
},_formatPercentage:function(c){return(c*100).toFixed(2)+" %"},_renderExtendedProgress:function(c){return this._formatBitrate(c.bitrate)+" | "+this._formatTime((c.total-c.loaded)*8/c.bitrate)+" | "+this._formatPercentage(c.loaded/c.total)+" | "+this._formatFileSize(c.loaded)+" / "+this._formatFileSize(c.total)},_renderTemplate:function(e,d){if(!e){return b()}var c=e({files:d,formatFileSize:this._formatFileSize,options:this.options});if(c instanceof b){return c}return b(this.options.templatesContainer).html(c).children()},_renderPreviews:function(c){c.context.find(".preview").each(function(d,e){b(e).append(c.files[d].preview)})},_renderUpload:function(e,d){var c=this._renderTemplate(this.options.uploadTemplate,e);c.addClass("template-upload fade");if(c.hasClass("fade")){c.hide()}this._trigger("onRenderUploadTmp",null,{item:c});return c},_renderDownload:function(d){var c=this._renderTemplate(this.options.downloadTemplate,d).find("a[download]").each(this._enableDragToDesktop).end();c.addClass("template-download fade");if(c.hasClass("fade")){c.hide()}this._trigger("onRenderDownloadTmp",null,{item:c});return c},_forceReflow:function(c){return b.support.transition&&c.length&&c[0].offsetWidth},_transition:function(d){var c=b.Deferred();if(d.hasClass("fade")){d.fadeToggle(this.options.transitionDuration,this.options.transitionEasing,function(){c.resolveWith(d)})}else{c.resolveWith(d)}return c},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".upload, .remove"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",false).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",true).parent().addClass("disabled")
},_create:function(){var c=this.options;this.options.id=this.element.uniqueId().attr("id");this._super();this._resetFinishedDeferreds();if(!b.support.fileInput){this._disableFileInputButton()}this.element.find(".fileupload-buttonbar").find(".fileinput-button").each(function(){});c.uploadedFileList=[];c.unUploadedFileList=[];this._getConfig();if(c.beforeCreate){c.beforeCreate.apply(this)}else{this.beforeCreate()}},beforeCreate:function(){var c=this;this._on(this.options.filesContainer,{"click .upload":function(f){f.preventDefault();var d=b(f.currentTarget).closest(".template-upload");b("#"+c.element[0].id).fileuploader("upload",d[0].id)},"click .remove":function(f){f.preventDefault();var d=b(f.currentTarget).closest(".template-upload,.template-download");b("#"+c.element[0].id).fileuploader("remove",d[0].id)},"click .stop":function(f){f.preventDefault();var d=b(f.currentTarget).closest(".template-upload");b("#"+c.element[0].id).fileuploader("stop",d[0].id)}})},clearFileList:function(e,f){var d,c;if(e===this.options.uploadedFileList){d=this.getValues()}else{if(e===this.options.unUploadedFileList){d=this.getUnUploadValues()}}c=b.inArray(f.context[0][this.options.prmNames.fileId],d);if(c!==-1){e.splice(c,1)}else{e.splice(c,0)}},validateFile:function(d,g){var e=g.files[0].name.substring(g.files[0].name.lastIndexOf(".")+1);e=b.trim(e);var f=b.trim(d.acceptFileTypes);var c=this.getQueueData(),h=this.formatMaxSize(d.maxFileSize);if(c.length>=d.filesLimt){b.messageQueue({message:"Maximum number of files exceeded"});return false}if(g.files[0].size>=h){b.messageQueue({message:"The File is too large"});return false}if(f=="*.*"){return true}else{if(f.indexOf(e)==-1){b.messageQueue({message:"The file is not an accepted file type"});return false}}return true},formatMaxSize:function(d){var f=new RegExp("/^s*|s*$/"),g,e,h=1024;d=d.toLowerCase();d=d.replace(f,"");var c=d.match(/^\d+/);if(c!==null&&c.length>0){e=parseInt(c[0])}if(isNaN(e)||e<0){e=0}g=e*h;return g},getQueueData:function(){var e=[],d=[];
for(var c=0;c<this.options.uploadedFileList.length;c++){e.push(this.options.uploadedFileList[c].fileId)}for(var c=0;c<this.options.unUploadedFileList.length;c++){d.push(this.options.unUploadedFileList[c].fileId)}return b.merge(e,d)},getValues:function(){var d=[];for(var c=0;c<this.options.uploadedFileList.length;c++){d.push(this.options.uploadedFileList[c].fileId)}return d},getValidateValue:function(){var c=this.checkIE();if(this.useFlash){return this.uploaderBtn.swfuploader("getValidateValue")}else{return this.getValue()}},setValue:function(d){var c=this.checkIE();if(this.useFlash){this.uploaderBtn.swfuploader("setValues",d)}else{}},getValue:function(){var c=this.checkIE();if(this.useFlash){return this.uploaderBtn.swfuploader("getValue")}else{return this.getValues().join(this.options.separator)}},clearError:function(){},focus:function(){},getUnUploadValues:function(){var c=[];for(var d=0;d<this.options.unUploadedFileList.length;d++){c.push(this.options.unUploadedFileList[d].fileId)}return c},enable:function(){var c=this.checkIE();if(this.useFlash){this.uploaderBtn.swfuploader("disable",false)}else{var d=false;if(this.options.disabled){d=true}this._super();if(d){this.element.find("input, button").prop("disabled",false);this._enableFileInputButton();this.options.filesContainer.prop("disabled",false).removeClass("coral-state-disabled")}this.options.disabled=false;this._trigger("onEnable",null,[])}},disable:function(){var c=this.checkIE();if(this.useFlash){this.uploaderBtn.swfuploader("disable",true)}else{if(!this.options.disabled){this.element.find("input, button").prop("disabled",true);this._disableFileInputButton();this.options.filesContainer.prop("disabled",true).addClass("coral-state-disabled")}this._super();this.options.disabled=true;this._trigger("onDisable",null,[])}}})}));

(function(c){var b={init:function(d,e){return this.each(function(){var q=c(this);var p=q.clone();var j=c.extend({id:q.attr("id"),swf:c.coral.scriptPath+"external/swfupload.swf",uploader:"swfupload.php",auto:true,buttonClass:"",buttonCursor:"hand",buttonImage:null,buttonText:"SELECT FILES",checkExisting:false,debug:false,fileObjName:"Filedata",fileSizeLimit:0,fileTypeDesc:"All Files",fileTypeExts:"*.*",height:30,itemTemplate:false,method:"post",multi:true,formData:{},preventCaching:true,progressData:"percentage",queueID:false,queueSizeLimit:999,removeCompleted:true,removeTimeout:3,requeueErrors:false,successTimeout:30,uploadLimit:0,width:120,overrideEvents:[]},d);var g={assume_success_timeout:j.successTimeout,button_placeholder_id:j.id,button_width:j.width,button_height:j.height,button_text:null,button_text_style:null,button_text_top_padding:0,button_text_left_padding:0,button_action:(j.multi?SWFUpload.BUTTON_ACTION.SELECT_FILES:SWFUpload.BUTTON_ACTION.SELECT_FILE),button_disabled:false,button_cursor:(j.buttonCursor=="arrow"?SWFUpload.CURSOR.ARROW:SWFUpload.CURSOR.HAND),button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,debug:j.debug,requeue_on_error:j.requeueErrors,file_post_name:j.fileObjName,file_size_limit:j.fileSizeLimit,file_types:j.fileTypeExts,file_types_description:j.fileTypeDesc,file_queue_limit:j.queueSizeLimit,file_upload_limit:j.uploadLimit,flash_url:j.swf,prevent_swf_caching:j.preventCaching,post_params:j.formData,upload_url:j.uploader,use_query_string:(j.method=="get"),file_dialog_complete_handler:a.onDialogClose,file_dialog_start_handler:a.onDialogOpen,file_queued_handler:a.onSelect,file_queue_error_handler:a.onSelectError,swfupload_loaded_handler:j.onSWFReady,upload_complete_handler:a.onUploadComplete,upload_error_handler:a.onUploadError,upload_progress_handler:a.onUploadProgress,upload_start_handler:a.onUploadStart,upload_success_handler:a.onUploadSuccess};if(e){g=c.extend(g,e)}g=c.extend(g,j);var r=swfobject.getFlashPlayerVersion();var h=(r.major>=9);
if(h){window["uploadify_"+j.id]=new SWFUpload(g);var i=window["uploadify_"+j.id];q.data("uploadify",i);var o=c("<div />",{id:j.id,"class":"uploadify",css:{height:j.height+"px",width:j.width+"px"}});c("#"+i.movieName).wrap(o);o=c("#"+j.id);o.data("uploadify",i);var f=c("<div />",{id:j.id+"-button","class":"uploadify-button "+j.buttonClass});if(j.buttonImage){f.css({"background-image":"url('"+j.buttonImage+"')","text-indent":"-9999px"})}f.html('<span class="uploadify-button-text">'+j.buttonText+"</span>").css({height:j.height+"px","line-height":j.height+"px",width:j.width+"px"});o.append(f);c("#"+i.movieName).css({position:"absolute","z-index":1});if(!j.queueID){var m=c("<div />",{id:j.id+"-queue","class":"uploadify-queue"});o.after(m);i.settings.queueID=j.id+"-queue";i.settings.defaultQueue=true}i.queueData={files:{},filesSelected:0,filesQueued:0,filesReplaced:0,filesCancelled:0,filesErrored:0,uploadsSuccessful:0,uploadsErrored:0,averageSpeed:0,queueLength:0,queueSize:0,uploadSize:0,queueBytesUploaded:0,uploadQueue:[],errorMsg:"Some files were not added to the queue:"};i.original=p;i.wrapper=o;i.button=f;i.queue=m;if(j.onInit){j.onInit.call(q,i)}}else{if(j.onFallback){j.onFallback.call(q)}var l=j.onNoflash.call(q);var n=c("<div class='coral-uploader-button' style='height: 40px;'></div>").appendTo(l);var k=c("<input type='button'/>").appendTo(n);k.button({id:j.id+"-button",label:j.buttonText,onClick:function(){alert("没有安装flash或flash版本过低")}})}})},cancel:function(d,f){var e=arguments;this.each(function(){var l=c(this),i=l.data("uploadify"),j=i.settings,h=-1;if(e[0]){if(e[0]=="*"){var g=i.queueData.queueLength;c("#"+j.queueID).find(".uploadify-queue-item").each(function(){h++;if(e[1]===true){i.cancelUpload(c(this).attr("id"),false)}else{i.cancelUpload(c(this).attr("id"))}c(this).find(".data").removeClass("data").html(" - Cancelled");c(this).find(".uploadify-progress-bar").remove();c(this).delay(1000+100*h).fadeOut(500,function(){c(this).remove()});delete i.queueData.files[d]
});i.queueData.queueSize=0;i.queueData.queueLength=0;if(j.onClearQueue){j.onClearQueue.call(l,g)}}else{for(var m=0;m<e.length;m++){i.cancelUpload(e[m]);c("#"+e[m]).find(".data").removeClass("data").html(" - Cancelled");c("#"+e[m]).find(".uploadify-progress-bar").remove();c("#"+e[m]).delay(1000+100*m).fadeOut(500,function(){c(this).remove()});delete i.queueData.files[d]}}}else{var k=c("#"+j.queueID).find(".uploadify-queue-item").get(0);$item=c(k);i.cancelUpload($item.attr("id"));$item.find(".data").removeClass("data").html(" - Cancelled");$item.find(".uploadify-progress-bar").remove();$item.delay(1000).fadeOut(500,function(){c(this).remove()});delete i.queueData.files[d]}})},destroy:function(){this.each(function(){var f=c(this),d=f.data("uploadify"),e=d.settings;d.destroy();if(e.defaultQueue){c("#"+e.queueID).remove()}c("#"+e.id).replaceWith(d.original);if(e.onDestroy){e.onDestroy.call(this)}delete d})},disable:function(d){this.each(function(){var g=c(this),e=g.data("uploadify"),f=e.settings;if(d){e.button.addClass("disabled");if(f.onDisable){f.onDisable.call(this)}}else{e.button.removeClass("disabled");if(f.onEnable){f.onEnable.call(this)}}e.setButtonDisabled(d)})},settings:function(e,g,h){var d=arguments;var f=g;this.each(function(){var k=c(this),i=k.data("uploadify"),j=i.settings;if(typeof(d[0])=="object"){for(var l in g){setData(l,g[l])}}if(d.length===1){f=j[e]}else{switch(e){case"uploader":i.setUploadURL(g);break;case"formData":if(!h){g=c.extend(j.formData,g)}i.setPostParams(j.formData);break;case"method":if(g=="get"){i.setUseQueryString(true)}else{i.setUseQueryString(false)}break;case"fileObjName":i.setFilePostName(g);break;case"fileTypeExts":i.setFileTypes(g,j.fileTypeDesc);break;case"fileTypeDesc":i.setFileTypes(j.fileTypeExts,g);break;case"fileSizeLimit":i.setFileSizeLimit(g);break;case"uploadLimit":i.setFileUploadLimit(g);break;case"queueSizeLimit":i.setFileQueueLimit(g);break;case"buttonImage":i.button.css("background-image",settingValue);break;case"buttonCursor":if(g=="arrow"){i.setButtonCursor(SWFUpload.CURSOR.ARROW)
}else{i.setButtonCursor(SWFUpload.CURSOR.HAND)}break;case"buttonText":c("#"+j.id+"-button").find(".uploadify-button-text").html(g);break;case"width":i.setButtonDimensions(g,j.height);break;case"height":i.setButtonDimensions(j.width,g);break;case"multi":if(g){i.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILES)}else{i.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILE)}break}j[e]=g}});if(d.length===1){return f}},stop:function(){this.each(function(){var e=c(this),d=e.data("uploadify");d.queueData.averageSpeed=0;d.queueData.uploadSize=0;d.queueData.bytesUploaded=0;d.queueData.uploadQueue=[];d.stopUpload()})},upload:function(){var d=arguments;this.each(function(){var f=c(this),e=f.data("uploadify");e.queueData.averageSpeed=0;e.queueData.uploadSize=0;e.queueData.bytesUploaded=0;e.queueData.uploadQueue=[];if(d[0]){if(d[0]=="*"){e.queueData.uploadSize=e.queueData.queueSize;e.queueData.uploadQueue.push("*");e.startUpload()}else{for(var g=0;g<d.length;g++){e.queueData.uploadSize+=e.queueData.files[d[g]].size;e.queueData.uploadQueue.push(d[g])}e.startUpload(e.queueData.uploadQueue.shift())}}else{e.startUpload()}})}};var a={onDialogOpen:function(){var d=this.settings;this.queueData.errorMsg="Some files were not added to the queue:";this.queueData.filesReplaced=0;this.queueData.filesCancelled=0;if(d.onDialogOpen){d.onDialogOpen.call(this)}},onDialogClose:function(d,f,g){var e=this.settings;this.queueData.filesErrored=d-f;this.queueData.filesSelected=d;this.queueData.filesQueued=f-this.queueData.filesCancelled;this.queueData.queueLength=g;if(c.inArray("onDialogClose",e.overrideEvents)<0){if(this.queueData.filesErrored>0){alert(this.queueData.errorMsg)}}if(e.onDialogClose){e.onDialogClose.call(this,this.queueData)}if(e.auto){c("#"+e.id).uploadify("upload","*")}},onSelect:function(h){var i=this.settings;var f={};for(var g in this.queueData.files){f=this.queueData.files[g];if(f.uploaded!=true&&f.name==h.name){var e=confirm('The file named "'+h.name+'" is already in the queue.\nDo you want to replace the existing item in the queue?');
if(!e){this.cancelUpload(h.id);this.queueData.filesCancelled++;return false}else{c("#"+f.id).remove();delete this.queueData.files[g];this.cancelUpload(f.id);this.queueData.filesReplaced++}}}var j=Math.round(h.size/1024);var o="KB";if(j>1000){j=Math.round(j/1000);o="MB"}var l=j.toString().split(".");j=l[0];if(l.length>1){j+="."+l[1].substr(0,2)}j+=o;var k=h.name;if(k.length>25){k=k.substr(0,25)+"..."}itemData={fileID:h.id,instanceID:i.id,fileName:k,fileSize:j};if(i.itemTemplate==false){i.itemTemplate='<div id="${fileID}" class="uploadify-queue-item">					<div class="cancel">						<a href="javascript:$(\'#${instanceID}\').uploadify(\'cancel\', \'${fileID}\')">X</a>					</div>					<span class="fileName">${fileName} (${fileSize})</span><span class="data"></span>					<div class="uploadify-progress">						<div class="uploadify-progress-bar"><!--Progress Bar--></div>					</div>				</div>'}if(c.inArray("onSelect",i.overrideEvents)<0){itemHTML=i.itemTemplate;for(var m in itemData){itemHTML=itemHTML.replace(new RegExp("\\$\\{"+m+"\\}","g"),itemData[m])}c("#"+i.queueID).append(itemHTML)}this.queueData.queueSize+=h.size;this.queueData.files[h.id]=h;if(i.onSelect){i.onSelect.apply(this,arguments)}},onSelectError:function(d,g,f){var e=this.settings;if(c.inArray("onSelectError",e.overrideEvents)<0){switch(g){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:if(e.queueSizeLimit>f){this.queueData.errorMsg+="\nThe number of files selected exceeds the remaining upload limit ("+f+")."}else{this.queueData.errorMsg+="\nThe number of files selected exceeds the queue size limit ("+e.queueSizeLimit+")."}break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+d.name+'" exceeds the size limit ('+e.fileSizeLimit+").";break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:this.queueData.errorMsg+='\nThe file "'+d.name+'" is empty.';break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+d.name+'" is not an accepted file type ('+e.fileTypeDesc+").";
break}}if(g!=SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED){delete this.queueData.files[d.id]}if(e.onSelectError){e.onSelectError.apply(this,arguments)}},onQueueComplete:function(){if(this.settings.onQueueComplete){this.settings.onQueueComplete.call(this,this.settings.queueData)}},onUploadComplete:function(f){var g=this.settings,d=this;var e=this.getStats();this.queueData.queueLength=e.files_queued;if(this.queueData.uploadQueue[0]=="*"){if(this.queueData.queueLength>0){this.startUpload()}else{this.queueData.uploadQueue=[];if(g.onQueueComplete){g.onQueueComplete.call(this,this.queueData)}}}else{if(this.queueData.uploadQueue.length>0){this.startUpload(this.queueData.uploadQueue.shift())}else{this.queueData.uploadQueue=[];if(g.onQueueComplete){g.onQueueComplete.call(this,this.queueData)}}}if(c.inArray("onUploadComplete",g.overrideEvents)<0){if(g.removeCompleted){switch(f.filestatus){case SWFUpload.FILE_STATUS.COMPLETE:setTimeout(function(){if(c("#"+f.id)){d.queueData.queueSize-=f.size;d.queueData.queueLength-=1;delete d.queueData.files[f.id];c("#"+f.id).fadeOut(500,function(){c(this).remove()})}},g.removeTimeout*1000);break;case SWFUpload.FILE_STATUS.ERROR:if(!g.requeueErrors){setTimeout(function(){if(c("#"+f.id)){d.queueData.queueSize-=f.size;d.queueData.queueLength-=1;delete d.queueData.files[f.id];c("#"+f.id).fadeOut(500,function(){c(this).remove()})}},g.removeTimeout*1000)}break}}else{f.uploaded=true}}if(g.onUploadComplete){g.onUploadComplete.call(this,f)}},onUploadError:function(e,i,h){var f=this.settings;var g="Error";switch(i){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:g="HTTP Error ("+h+")";break;case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:g="Missing Upload URL";break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:g="IO Error";break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:g="Security Error";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:alert("The upload limit has been reached ("+h+").");g="Exceeds Upload Limit";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:g="Failed";
break;case SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND:break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:g="Validation Error";break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:g="Cancelled";this.queueData.queueSize-=e.size;this.queueData.queueLength-=1;if(e.status==SWFUpload.FILE_STATUS.IN_PROGRESS||c.inArray(e.id,this.queueData.uploadQueue)>=0){this.queueData.uploadSize-=e.size}if(f.onCancel){f.onCancel.call(this,e)}delete this.queueData.files[e.id];break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:g="Stopped";break}if(c.inArray("onUploadError",f.overrideEvents)<0){if(i!=SWFUpload.UPLOAD_ERROR.FILE_CANCELLED&&i!=SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED){c("#"+e.id).addClass("uploadify-error")}c("#"+e.id).find(".uploadify-progress-bar").css("width","1px");if(i!=SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND&&e.status!=SWFUpload.FILE_STATUS.COMPLETE){c("#"+e.id).find(".data").html(" - "+g)}}var d=this.getStats();this.queueData.uploadsErrored=d.upload_errors;if(f.onUploadError){f.onUploadError.call(this,e,i,h,g)}},onUploadProgress:function(g,m,j){var h=this.settings;var e=new Date();var n=e.getTime();var k=n-this.timer;if(k>500){this.timer=n}var i=m-this.bytesLoaded;this.bytesLoaded=m;var d=this.queueData.queueBytesUploaded+m;var p=Math.round(m/j*100);var o="KB/s";var l=0;var f=(i/1024)/(k/1000);f=Math.floor(f*10)/10;if(this.queueData.averageSpeed>0){this.queueData.averageSpeed=Math.floor((this.queueData.averageSpeed+f)/2)}else{this.queueData.averageSpeed=Math.floor(f)}if(f>1000){l=(f*0.001);this.queueData.averageSpeed=Math.floor(l);o="MB/s"}if(c.inArray("onUploadProgress",h.overrideEvents)<0){if(h.progressData=="percentage"){c("#"+g.id).find(".data").html(" - "+p+"%")}else{if(h.progressData=="speed"&&k>500){c("#"+g.id).find(".data").html(" - "+this.queueData.averageSpeed+o)}}c("#"+g.id).find(".uploadify-progress-bar").css("width",p+"%")}if(h.onUploadProgress){h.onUploadProgress.call(this,g,m,j,d,this.queueData.uploadSize)}},onUploadStart:function(d){var e=this.settings;
var f=new Date();this.timer=f.getTime();this.bytesLoaded=0;if(this.queueData.uploadQueue.length==0){this.queueData.uploadSize=d.size}if(e.checkExisting){c.ajax({type:"POST",async:false,url:e.checkExisting,data:{filename:d.name},success:function(h){if(h==1){var g=confirm('A file with the name "'+d.name+'" already exists on the server.\nWould you like to replace the existing file?');if(!g){this.cancelUpload(d.id);c("#"+d.id).remove();if(this.queueData.uploadQueue.length>0&&this.queueData.queueLength>0){if(this.queueData.uploadQueue[0]=="*"){this.startUpload()}else{this.startUpload(this.queueData.uploadQueue.shift())}}}}}})}if(e.onUploadStart){e.onUploadStart.call(this,d)}},onUploadSuccess:function(f,h,d){var g=this.settings;var e=this.getStats();this.queueData.uploadsSuccessful=e.successful_uploads;this.queueData.queueBytesUploaded+=f.size;if(c.inArray("onUploadSuccess",g.overrideEvents)<0){c("#"+f.id).find(".data").html(" - 上传完成")}if(g.onUploadSuccess){g.onUploadSuccess.call(this,f,h,d)}}};c.fn.uploadify=function(d){if(b[d]){return b[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="object"||!d){return b.init.apply(this,arguments)}else{c.error("The method "+d+" does not exist in $.uploadify")}}}})($);

(function(a,b){a.component("coral.uploader",{version:a.coral.version,castProperties:["dataCustom","formData","overrideEvents","buttons","itemTemplate"],options:{id:"",swf:a.coral.scriptPath+"external/swfupload.swf",uploader:"",auto:true,buttonClass:"",buttonCursor:"hand",buttonImage:null,buttonText:"SELECT FILES",checkExisting:false,debug:false,fileObjName:"Filedata",fileSizeLimit:0,fileTypeDesc:"All Files",fileTypeExts:"*.*",heigh:30,itemTemplate:false,method:"post",multi:true,formData:{},preventCaching:true,progressData:"percentage",queueID:false,queueSizeLimit:999,removeCompleted:true,removeTimeout:3,requeueError:false,successTimeout:30,uploadLimit:0,width:120,cls:"",displayStyle:"original",emptyText:"请选择...",delay:1000,buttons:null,overrideEvents:[],onCancel:null,onClearQueue:null,onDestroy:null,onDialogClose:null,onDialogOpen:null,onDisable:null,onEnable:null,onFallback:null,onNoflash:null,onInit:null,onQueueComplete:null,onSelectError:null,onSelect:null,onNoFlash:null,onSWFReady:null,onUploadComplete:null,onUploadError:null,onUploadSuccess:null,onUploadProgress:null,onUploadStart:null},_create:function(){var d=this;d._initElement();var c=d._flashCheck();if(c==false){d._trigger("onNoFlash",null,[])}},_initElement:function(){var e=this,d=e.options,c={};if(typeof e.element.attr("id")!="undefined"){d.id=e.element.attr("id")}else{if(d.id){e.element.attr("id",d.id)}}if(typeof e.element.attr("name")!="undefined"){d.name=e.element.attr("name")}else{if(d.name){e.element.attr("name",d.name)}}delete d.id;c=e.getEventsObj();d=a.extend({},d,c);this._initUploder(d);d.id=e.element.attr("id")},_flashCheck:function(){var g=!-[1,];var c=true;if(g){try{var f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");c=true}catch(h){c=false}}else{try{if(navigator.plugins&&navigator.plugins.length>0){var d=navigator.plugins["Shockwave Flash"];if(d==b){c=false}}else{c=true}}catch(h){c=false}}return c},component:function(){return this.uiUploader},destroy:function(){this.uploader.uploadify("destroy")
},disable:function(c){this.uploader.uploadify("disable",c)},settings:function(c,d,e){this.uploader.uploadify("settings",c,d,e)},stop:function(){this.uploader.uploadify("stop")},upload:function(c){if("original"==this.options.displayStyle||!this._isQueueDialog()){this.uploader.uploadify("upload",c);return}if(this.select.length==0){return}var d=this,e=this.element.attr("id");a("#"+e+"_queue").dialog("open")},getvalue:function(){if(this.select.length==0){alert("none file")}return this.select.join(",")},cancel:function(){this.uploader.uploadify("cancel")},clear:function(c){if("custom"==this.options.displayStyle){this.select=[];this.uiUploader.find(".coral-file").html("请选择...");this.uiUploader.find("object").attr("title","请选择...")}this.uploader.uploadify("cancel");this.clearQueue()},clearQueue:function(){this.uploader.clearQueue()},uploadify:function(){return this.uploader},queueData:function(){return this.uploader.data("uploadify").queueData},_getButtons:function(){if(typeof this.options.buttons==="object"){return this.options.buttons}if(typeof this.options.buttons!=="string"){return[]}var k=this,j=this.options,h=this.options.buttons,d=[];var f=a.trim(h).split(",");for(var e in f){var c={},g=f[e].split(" ");c.label=g[0];c.click=g[1];d.push(c)}return d},_triggerClick:function(c,e,f){var d=this;var g=a.coral.toFunction(c);e=a.Event(e);return g.apply(d.element[0],[e].concat(f))},_createButtons:function(){var f=this,e=this.options,d=this._getButtons();var c=a('<span class="coral-uploader-btn-icons coral-corner-right"></span>');f.uiBorder.append(c);a.each(d,function(j,l){var i=l.label,m=l.id,k=l.click,h={},g=a('<span class="coral-uploader-btn-ico icon coral-uploader-btn-textico"></span>');if(i){g.html(i);h.label=i}if(m){g.attr("data-id",m);h.id=m}g.bind("click"+f.eventNamespace,function(n){if(f.options.disabled){return}f._triggerClick(k,n,h)});c.append(g)})},_initUploder:function(c){var e=this,f=e.element.attr("id");e.uiUploader=a('<span class="coral-uploader"></span>');e.uiBorder=a('<span class="coral-uploader-border coral-corner-all"></span>');
e.uploader=a('<div id="'+f+'_uploader"></div>');e.element.after(e.uiUploader);e.uiUploader.append(e.uiBorder);e.uiBorder.append(e.element);e.element.hide();if(c.displayStyle=="original"){e.element.before(e.uploader);this.uploader.uploadify(c);return}this.uiUploader.addClass("coral-uploader-custom coral-textbox");this.uiBorder.addClass("coral-textbox-border");if(c.buttons){this._createButtons()}e.select=[];a(this.element).wrap('<span class="coral-file-default"></span>').before("<span class='coral-file'>"+c.emptyText+"</span>").before(e.uploader);var d=a.extend(c,{height:28,width:800});if(!d.queueID){a(this.element).before("<div id='"+f+"_queue'></div>");a("#"+f+"_queue").dialog({autoOpen:false,title:"上传",modal:false,resizable:false,onOpen:function(){e.uploader.uploadify("upload","*")}});c.queueID=f+"_queue";this.hasDialog=true}e.uploader.uploadify(d)},_isQueueDialog:function(){return this.hasDialog},_reloadUploader:function(){var d=this,c=this.options;delete c.id;d.uploader.uploadify(c);c.id=d.element.attr("id")},getEventsObj:function(){var d=this,c=this.options,e=this.element.attr("id");return{onCancel:function(f){d._trigger("onCancel",null,[{file:f}])},onClearQueue:function(f){d._trigger("onClearQueue",null,[{queueItemCount:f}])},onDestroy:function(){d._trigger("onDestroy",null,[])},onDialogClose:function(f){if("custom"==c.displayStyle&&c.auto&&d._isQueueDialog()){a("#"+e+"_queue").dialog("open")}d._trigger("onDialogClose",null,[{queueData:f}])},onDialogOpen:function(){if("custom"==c.displayStyle){}d._trigger("onDialogOpen",null,[])},onDisable:function(){d._trigger("onDisable",null,[])},onEnable:function(){d._trigger("onEnable",null,[])},onFallback:function(){d._trigger("onFallback ",null,[])},onNoflash:function(){return d.uiBorder},onInit:function(f){d._trigger("onInit",null,[{swfuploadify:f}])},onQueueComplete:function(f){var g=d.element.attr("id");if("custom"==c.displayStyle&&d._isQueueDialog()){setTimeout(function(){a("#"+g+"_queue").dialog("close");d.select=[]},c.delay)
}d._trigger("onQueueComplete",null,[{queueData:f}])},onSelectError:function(f,h,g){d._trigger("onSelectError",null,[{arguments:arguments}])},onSelect:function(f){if("custom"==c.displayStyle){d.select.push(f.name);d.uiUploader.find(".coral-file").html(d.select.join(","));d.uiUploader.find("object").attr("title",d.select.join(","))}d._trigger("onSelect",null,[{file:f}])},onSWFReady:function(){d._trigger("onSWFReady",null,[])},onUploadComplete:function(f){d._trigger("onUploadComplete",null,[{file:f}])},onUploadError:function(f,i,h,g){d._trigger("onUploadError",null,[{file:f,errorCode:i,errorMsg:h,errorString:g}])},onUploadSuccess:function(g,h,f){d._trigger("onUploadSuccess",null,[{file:g,data:h,response:f}])},onUploadProgress:function(g,j,f,i,h){d._trigger("onUploadProgress",null,[{file:g,fileBytesLoaded:j,fileTotalBytes:f,queueBytesLoaded:i,uploadSize:h}])},onUploadStart:function(f){d._trigger("onUploadStart",null,[{file:f}])}}},_setOption:function(c,e){var d=this;if(c==="id"||c==="name"){return}this._super(c,e);if(c==="emptyText"){this.uiUploader.find(".coral-file").html(e);return}d.settings(c,e)},_destroy:function(){var c=this;c.uiUploader.replaceWith(c.element)}})})(jQuery);

var tooltip=$.component("coral.tooltip",{version:"4.0.1",options:{content:function(){var a=$(this).attr("title")||"";return $("<a>").text(a).html()},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,tooltipClass:null,track:false,onClose:null,onOpen:null},_addDescribedBy:function(b,c){var a=(b.attr("aria-describedby")||"").split(/\s+/);a.push(c);b.data("coral-tooltip-id",c).attr("aria-describedby",$.trim(a.join(" ")))},_removeDescribedBy:function(c){var d=c.data("coral-tooltip-id"),b=(c.attr("aria-describedby")||"").split(/\s+/),a=$.inArray(d,b);if(a!==-1){b.splice(a,1)}c.removeData("coral-tooltip-id");b=$.trim(b.join(" "));if(b){c.attr("aria-describedby",b)}else{c.removeAttr("aria-describedby")}},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};if(this.options.disabled){this._disable()}this.liveRegion=$("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("coral-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(a,c){var b=this;if(a==="disabled"){this[c?"_disable":"_enable"]();this.options[a]=c;return}this._super(a,c);if(a==="content"){$.each(this.tooltips,function(e,d){b._updateContent(d)})}},_disable:function(){var a=this;$.each(this.tooltips,function(d,b){var c=$.Event("blur");c.target=c.currentTarget=b[0];a.close(c,true)});this.element.find(this.options.items).addBack().each(function(){var b=$(this);if(b.is("[title]")){b.data("coral-tooltip-title",b.attr("title")).removeAttr("title")}})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var a=$(this);if(a.data("coral-tooltip-title")){a.attr("title",a.data("coral-tooltip-title"))}})},open:function(b){var a=this,c=$(b?b.target:this.element).closest(this.options.items);if(!c.length||c.data("coral-tooltip-id")){return}if(c.attr("title")){c.data("coral-tooltip-title",c.attr("title"))}c.data("coral-tooltip-open",true);
if(b&&b.type==="mouseover"){c.parents().each(function(){var e=$(this),d;if(e.data("coral-tooltip-open")){d=$.Event("blur");d.target=d.currentTarget=this;a.close(d,true)}if(e.attr("title")){e.uniqueId();a.parents[this.id]={element:this,title:e.attr("title")};e.attr("title","")}})}this._updateContent(c,b)},_updateContent:function(f,e){var d,a=this.options.content,c=this,b=e?e.type:null;if(typeof a==="string"){return this._open(e,f,a)}d=a.call(f[0],function(g){if(!f.data("coral-tooltip-open")){return}c._delay(function(){if(e){e.type=b}this._open(e,f,g)})});if(d){this._open(e,f,d)}},_open:function(a,d,e){var i,h,g,b,f=$.extend({},this.options.position);if(!e){return}i=this._find(d);if(i.length){i.find(".coral-tooltip-content").html(e);return}if(d.is("[title]")){if(a&&a.type==="mouseover"){d.attr("title","")}else{d.removeAttr("title")}}i=this._tooltip(d);this._addDescribedBy(d,i.attr("id"));i.find(".coral-tooltip-content").html(e);this.liveRegion.children().hide();if(e.clone){b=e.clone();b.removeAttr("id").find("[id]").removeAttr("id")}else{b=e}$("<div>").html(b).appendTo(this.liveRegion);function c(j){f.of=j;if(i.is(":hidden")){return}i.position(f)}if(this.options.track&&a&&/^mouse/.test(a.type)){this._on(this.document,{mousemove:c});c(a)}else{i.position($.extend({of:d},this.options.position))}this.hiding=false;this.closing=false;i.hide();this._show(i,this.options.show);if(this.options.show&&this.options.show.delay){g=this.delayedShow=setInterval(function(){if(i.is(":visible")){c(f.of);clearInterval(g)}},$.fx.interval)}this._trigger("onOpen",a,{tooltip:i});h={keyup:function(j){if(j.keyCode===$.coral.keyCode.ESCAPE){var k=$.Event(j);k.currentTarget=d[0];this.close(k,true)}}};if(d[0]!==this.element[0]){h.remove=function(){this._removeTooltip(i)}}if(!a||a.type==="mouseover"){h.mouseleave="close"}if(!a||a.type==="focusin"){h.focusout="close"}this._on(true,d,h)},close:function(b){var a=this,d=$(b?b.currentTarget:this.element),c=this._find(d);if(this.closing){return}clearInterval(this.delayedShow);
if(d.data("coral-tooltip-title")&&!d.attr("title")){d.attr("title",d.data("coral-tooltip-title"))}this._removeDescribedBy(d);this.hiding=true;c.stop(true);this._hide(c,this.options.hide,function(){a._removeTooltip($(this));this.hiding=false;this.closing=false});d.removeData("coral-tooltip-open");this._off(d,"mouseleave focusout keyup");if(d[0]!==this.element[0]){this._off(d,"remove")}this._off(this.document,"mousemove");if(b&&b.type==="mouseleave"){$.each(this.parents,function(f,e){$(e.element).attr("title",e.title);delete a.parents[f]})}this.closing=true;this._trigger("onClose",b,{tooltip:c});if(!this.hiding){this.closing=false}},_tooltip:function(a){var b=$("<div>").attr("role","tooltip").addClass("coral-tooltip coral-component coral-corner-all coral-component-content "+(this.options.tooltipClass||"")),c=b.uniqueId().attr("id");$("<div>").addClass("coral-tooltip-content").appendTo(b);b.appendTo(this.document[0].body);this.tooltips[c]=a;return b},_find:function(a){var b=a.data("coral-tooltip-id");return b?$("#"+b):$()},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_destroy:function(){var a=this;$.each(this.tooltips,function(d,b){var c=$.Event("blur");c.target=c.currentTarget=b[0];a.close(c,true);$("#"+d).remove();if(b.data("coral-tooltip-title")){if(!b.attr("title")){b.attr("title",b.data("coral-tooltip-title"))}b.removeData("coral-tooltip-title")}});this.liveRegion.remove()}});

/*!
 * jQuery UI Spinner 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/spinner/
 */
function spinner_modifier(a){return function(){var b=this.element.val();a.apply(this,arguments);this._refresh();if(b!==this.element.val()){this._trigger("onChange")}}}var spinner=$.component("coral.spinner",$.coral.formelement,{version:"4.0.3",castProperties:["triggers"],defaultElement:"<input>",componentEventPrefix:"spin",options:{culture:null,icons:{down:"cui-icon-arrow-down3",up:"cui-icon-arrow-up3"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,onChange:null,onSpin:null,onStart:null,onStop:null,triggers:null,excluded:false},_create:function(){if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name")}else{if(this.options.name){this.element.attr("name",this.options.name)}}if(typeof this.element.attr("value")!="undefined"){this.options.value=this.element.attr("value")}this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);if(this.value()!==""){this._value(this.element.val(),true)}this.originalValue=this.getValue();this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var a={},b=this.element;$.each(["min","max","step"],function(c,d){var e=b.attr(d);if(e!==undefined&&e.length){a[d]=e}});return a},_events:{keydown:function(a){if(this._start(a)&&this._keydown(a)){a.preventDefault()}},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){if(this.cancelBlur){delete this.cancelBlur;return}this._stop();this._refresh();if(this.previous!==this.element.val()){this._trigger("onChange",a)
}},mousewheel:function(a,b){if(!b){return}if(!this.spinning&&!this._start(a)){return false}this._spin((b>0?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){if(this.spinning){this._stop(a)}},100);a.preventDefault()},"mousedown .coral-spinner-button":function(b){var a;a=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();function c(){var d=this.element[0]===this.document[0].activeElement;if(!d){this.element.focus();this.previous=a;this._delay(function(){this.previous=a})}}b.preventDefault();c.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;c.call(this)});if(this._start(b)===false){return}this._repeat(null,$(b.currentTarget).hasClass("coral-spinner-up")?1:-1,b)},"mouseup .coral-spinner-button":"_stop","mouseenter .coral-spinner-button":function(a){if(!$(a.currentTarget).hasClass("coral-state-active")){return}if(this._start(a)===false){return false}this._repeat(null,$(a.currentTarget).hasClass("coral-spinner-up")?1:-1,a)},"mouseleave .coral-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("coral-spinner-input coral-textbox-default").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=a.find(".coral-spinner-button").attr("tabIndex",-1).button().removeClass("coral-corner-all");if(this.buttons.height()>Math.ceil(a.height()*0.5)&&a.height()>0){a.height(a.height())}if(this.options.disabled){this.disable()}},_keydown:function(b){var a=this.options,c=$.coral.keyCode;switch(b.keyCode){case c.UP:this._repeat(null,1,b);return true;case c.DOWN:this._repeat(null,-1,b);return true;case c.PAGE_UP:this._repeat(null,a.page,b);return true;case c.PAGE_DOWN:this._repeat(null,-a.page,b);return true}return false},_uiSpinnerHtml:function(){return"<span class='coral-spinner coral-component'><span class='coral-textbox-border coral-corner-all'></span></span>"
},_buttonHtml:function(){return"<a class='coral-spinner-button coral-spinner-up coral-corner-tr'><span class='icon "+this.options.icons.up+"'>&#9650;</span></a><a class='coral-spinner-button coral-spinner-down coral-corner-br'><span class='icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){if(!this.spinning&&this._trigger("onStart",a)===false){return false}if(!this.counter){this.counter=1}this.spinning=true;return true},_repeat:function(b,a,c){b=b||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,a,c)},b);this._spin(a*this.options.step,c)},_spin:function(b,a){var c=this.value()||0;if(!this.counter){this.counter=1}c=this._adjustValue(c+b*this._increment(this.counter));if(!this.spinning||this._trigger("onSpin",a,{value:c})!==false){this._value(c);this.counter++}},_increment:function(a){var b=this.options.incremental;if(b){return $.isFunction(b)?b(a):Math.floor(a*a*a/50000-a*a/500+17*a/200+1)}return 1},_precision:function(){var a=this._precisionOf(this.options.step);if(this.options.min!==null){a=Math.max(a,this._precisionOf(this.options.min))}return a},_precisionOf:function(b){var c=b.toString(),a=c.indexOf(".");return a===-1?0:c.length-a-1},_adjustValue:function(c){var b,d,a=this.options;b=a.min!==null?a.min:0;d=c-b;d=Math.round(d/a.step)*a.step;c=b+d;c=parseFloat(c.toFixed(this._precision()));if(a.max!==null&&c>a.max){return a.max}if(a.min!==null&&c<a.min){return a.min}return c},_stop:function(a){if(!this.spinning){return}clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("onStop",a)},_setOption:function(a,b){if(a==="value"){if(typeof b!=="undefined"){this.value(b)}else{this.value()}}if(a==="culture"||a==="numberFormat"){var c=this._parse(this.element.val());this.options[a]=b;this.element.val(this._format(c));return}if(a==="max"||a==="min"||a==="step"){if(typeof b==="string"){b=this._parse(b)}}if(a==="icons"){this.buttons.first().find(".coral-icon").removeClass(this.options.icons.up).addClass(b.up);
this.buttons.last().find(".coral-icon").removeClass(this.options.icons.down).addClass(b.down)}this._super(a,b);if(a==="disabled"){this.component().toggleClass("coral-state-disabled",!!b);this.element.prop("disabled",!!b);this.buttons.button(b?"disable":"enable")}},_setOptions:spinner_modifier(function(a){this._super(a)}),_parse:function(a){if(typeof a==="string"&&a!==""){a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a}return a===""||isNaN(a)?null:a},_format:function(a){if(a===""){return""}return window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var a=this.value();if(a===null){return false}return a===this._adjustValue(a)},_value:function(c,a){var b;if(c!==""){b=this._parse(c);if(b!==null){if(!a){b=this._adjustValue(b)}c=this._format(b)}}this.element.val(c);this._refresh()},_destroy:function(){this.element.removeClass("coral-spinner-input").removeClass("coral-textbox-default").prop("disabled",false).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.component().replaceWith(this.element)},reset:function(){this.setValue(this.originalValue)},stepUp:spinner_modifier(function(a){this._stepUp(a)}),_stepUp:function(a){if(this._start()){this._spin((a||1)*this.options.step);this._stop()}},stepDown:spinner_modifier(function(a){this._stepDown(a)}),_stepDown:function(a){if(this._start()){this._spin((a||1)*-this.options.step);this._stop()}},pageUp:spinner_modifier(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:spinner_modifier(function(a){this._stepDown((a||1)*this.options.page)}),setValue:function(a){a=a||"";this.value(a)},getValue:function(a){return this.value()+""},value:function(a){if(!arguments.length){return this._parse(this.element.val())
}spinner_modifier(this._value).call(this,a)},component:function(){return this.uiSpinner.parent()}});

/*!
 * jQuery UI Slider 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 */
var slider=$.component("coral.slider",$.coral.mouse,{version:"4.0.3",componentEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this.element.addClass("coral-slider coral-slider-"+this.orientation+" coral-component coral-component-content coral-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var d,a,b=this.options,f=this.element.find(".coral-slider-handle").addClass("coral-state-default coral-corner-all"),e="<span class='coral-slider-handle coral-state-default coral-corner-all' tabindex='0'></span>",c=[];a=(b.values&&b.values.length)||1;if(f.length>a){f.slice(a).remove();f=f.slice(0,a)}for(d=f.length;d<a;d++){c.push(e)}this.handles=f.add($(c.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(g){$(this).data("coral-slider-handle-index",g)})},_createRange:function(){var a=this.options,b="";if(a.range){if(a.range===true){if(!a.values){a.values=[this._valueMin(),this._valueMin()]}else{if(a.values.length&&a.values.length!==2){a.values=[a.values[0],a.values[0]]}else{if($.isArray(a.values)){a.values=a.values.slice(0)}}}}if(!this.range||!this.range.length){this.range=$("<div></div>").appendTo(this.element);b="coral-slider-range coral-component-header coral-corner-all"}else{this.range.removeClass("coral-slider-range-min coral-slider-range-max").css({left:"",bottom:""})
}this.range.addClass(b+((a.range==="min"||a.range==="max")?" coral-slider-range-"+a.range:""))}else{if(this.range){this.range.remove()}this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();if(this.range){this.range.remove()}this.element.removeClass("coral-slider coral-slider-horizontal coral-slider-vertical coral-component coral-component-content coral-corner-all");this._mouseDestroy()},_mouseCapture:function(c){var g,j,b,e,i,k,f,a,h=this,d=this.options;if(d.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();g={x:c.pageX,y:c.pageY};j=this._normValueFromMouse(g);b=this._valueMax()-this._valueMin()+1;this.handles.each(function(l){var m=Math.abs(j-h.values(l));if((b>m)||(b===m&&(l===h._lastChangedValue||h.values(l)===d.min))){b=m;e=$(this);i=l}});k=this._start(c,i);if(k===false){return false}this._mouseSliding=true;this._handleIndex=i;e.addClass("coral-state-active").focus();f=e.offset();a=!$(c.target).parents().addBack().is(".coral-slider-handle");this._clickOffset=a?{left:0,top:0}:{left:c.pageX-f.left-(e.width()/2),top:c.pageY-f.top-(e.height()/2)-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)};if(!this.handles.hasClass("coral-state-hover")){this._slide(c,i,j)}this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(c){var a={x:c.pageX,y:c.pageY},b=this._normValueFromMouse(a);this._slide(c,this._handleIndex,b);return false},_mouseStop:function(a){this.handles.removeClass("coral-state-active");this._mouseSliding=false;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal"
},_normValueFromMouse:function(b){var a,e,d,c,f;if(this.orientation==="horizontal"){a=this.elementSize.width;e=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{a=this.elementSize.height;e=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}d=(e/a);if(d>1){d=1}if(d<0){d=0}if(this.orientation==="vertical"){d=1-d}c=this._valueMax()-this._valueMin();f=this._valueMin()+d*c;return this._trimAlignValue(f)},_start:function(c,b){var a={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){a.value=this.values(b);a.values=this.values()}return this._trigger("start",c,a)},_slide:function(e,d,c){var a,b,f;if(this.options.values&&this.options.values.length){a=this.values(d?0:1);if((this.options.values.length===2&&this.options.range===true)&&((d===0&&c>a)||(d===1&&c<a))){c=a}if(c!==this.values(d)){b=this.values();b[d]=c;f=this._trigger("slide",e,{handle:this.handles[d],value:c,values:b});a=this.values(d?0:1);if(f!==false){this.values(d,c)}}}else{if(c!==this.value()){f=this._trigger("slide",e,{handle:this.handles[d],value:c});if(f!==false){this.value(c)}}}},_stop:function(c,b){var a={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){a.value=this.values(b);a.values=this.values()}this._trigger("stop",c,a)},_change:function(c,b){if(!this._keySliding&&!this._mouseSliding){var a={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){a.value=this.values(b);a.values=this.values()}this._lastChangedValue=b;this._trigger("change",c,a)}},value:function(a){if(arguments.length){this.options.value=this._trimAlignValue(a);this._refreshValue();this._change(null,0);return}return this._value()},values:function(b,e){var d,a,c;if(arguments.length>1){this.options.values[b]=this._trimAlignValue(e);this._refreshValue();this._change(null,b);return}if(arguments.length){if($.isArray(arguments[0])){d=this.options.values;a=arguments[0];for(c=0;
c<d.length;c+=1){d[c]=this._trimAlignValue(a[c]);this._change(null,c)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(b)}else{return this.value()}}}else{return this._values()}},_setOption:function(b,c){var a,d=0;if(b==="range"&&this.options.range===true){if(c==="min"){this.options.value=this._values(0);this.options.values=null}else{if(c==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null}}}if($.isArray(this.options.values)){d=this.options.values.length}if(b==="disabled"){this.element.toggleClass("coral-state-disabled",!!c)}this._super(b,c);switch(b){case"orientation":this._detectOrientation();this.element.removeClass("coral-slider-horizontal coral-slider-vertical").addClass("coral-slider-"+this.orientation);this._refreshValue();this.handles.css(c==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(a=0;a<d;a+=1){this._change(null,a)}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_value:function(){var a=this.options.value;a=this._trimAlignValue(a);return a},_values:function(a){var d,c,b;if(arguments.length){d=this.options.values[a];d=this._trimAlignValue(d);return d}else{if(this.options.values&&this.options.values.length){c=this.options.values.slice();for(b=0;b<c.length;b+=1){c[b]=this._trimAlignValue(c[b])}return c}else{return[]}}},_trimAlignValue:function(d){if(d<=this._valueMin()){return this._valueMin()}if(d>=this._valueMax()){return this._valueMax()}var a=(this.options.step>0)?this.options.step:1,c=(d-this._valueMin())%a,b=d-c;if(Math.abs(c)*2>=a){b+=(c>0)?a:(-a)}return parseFloat(b.toFixed(5))},_calculateNewMax:function(){var a=(this.options.max-this._valueMin())%this.options.step;
this.max=this.options.max-a},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var f,e,i,g,j,d=this.options.range,c=this.options,h=this,b=(!this._animateOff)?c.animate:false,a={};if(this.options.values&&this.options.values.length){this.handles.each(function(k){e=(h.values(k)-h._valueMin())/(h._valueMax()-h._valueMin())*100;a[h.orientation==="horizontal"?"left":"bottom"]=e+"%";$(this).stop(1,1)[b?"animate":"css"](a,c.animate);if(h.options.range===true){if(h.orientation==="horizontal"){if(k===0){h.range.stop(1,1)[b?"animate":"css"]({left:e+"%"},c.animate)}if(k===1){h.range[b?"animate":"css"]({width:(e-f)+"%"},{queue:false,duration:c.animate})}}else{if(k===0){h.range.stop(1,1)[b?"animate":"css"]({bottom:(e)+"%"},c.animate)}if(k===1){h.range[b?"animate":"css"]({height:(e-f)+"%"},{queue:false,duration:c.animate})}}}f=e})}else{i=this.value();g=this._valueMin();j=this._valueMax();e=(j!==g)?(i-g)/(j-g)*100:0;a[this.orientation==="horizontal"?"left":"bottom"]=e+"%";this.handle.stop(1,1)[b?"animate":"css"](a,c.animate);if(d==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[b?"animate":"css"]({width:e+"%"},c.animate)}if(d==="max"&&this.orientation==="horizontal"){this.range[b?"animate":"css"]({width:(100-e)+"%"},{queue:false,duration:c.animate})}if(d==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[b?"animate":"css"]({height:e+"%"},c.animate)}if(d==="max"&&this.orientation==="vertical"){this.range[b?"animate":"css"]({height:(100-e)+"%"},{queue:false,duration:c.animate})}}},_handleEvents:{keydown:function(e){var f,c,b,d,a=$(e.target).data("coral-slider-handle-index");switch(e.keyCode){case $.coral.keyCode.HOME:case $.coral.keyCode.END:case $.coral.keyCode.PAGE_UP:case $.coral.keyCode.PAGE_DOWN:case $.coral.keyCode.UP:case $.coral.keyCode.RIGHT:case $.coral.keyCode.DOWN:case $.coral.keyCode.LEFT:e.preventDefault();if(!this._keySliding){this._keySliding=true;$(e.target).addClass("coral-state-active");
f=this._start(e,a);if(f===false){return}}break}d=this.options.step;if(this.options.values&&this.options.values.length){c=b=this.values(a)}else{c=b=this.value()}switch(e.keyCode){case $.coral.keyCode.HOME:b=this._valueMin();break;case $.coral.keyCode.END:b=this._valueMax();break;case $.coral.keyCode.PAGE_UP:b=this._trimAlignValue(c+((this._valueMax()-this._valueMin())/this.numPages));break;case $.coral.keyCode.PAGE_DOWN:b=this._trimAlignValue(c-((this._valueMax()-this._valueMin())/this.numPages));break;case $.coral.keyCode.UP:case $.coral.keyCode.RIGHT:if(c===this._valueMax()){return}b=this._trimAlignValue(c+d);break;case $.coral.keyCode.DOWN:case $.coral.keyCode.LEFT:if(c===this._valueMin()){return}b=this._trimAlignValue(c-d);break}this._slide(e,a,b)},keyup:function(b){var a=$(b.target).data("coral-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(b,a);this._change(b,a);$(b.target).removeClass("coral-state-active")}}}});

(function(f,e,a,g){var b="easyinput",d="easytext",c=b+d.charAt(0).toUpperCase()+d.slice(1);f.component(b+"."+d,{options:{currentValue:"",values:[],maxWidth:200,minWidth:80,maxChars:200,storage:"array",ajaxConfig:{url:"/",id:"",UPDATETemplate:"",UPDATEData:{},GETCallback:null}},_name:d,_input:null,_id:null,_valuesIndex:null,_classUnChanged:null,_classEmpty:null,_classOnEdit:null,_classChanged:null,_classEasyText:d.toLowerCase(),_setListeners:function(){this._input.bind({focus:this._focusBehaviour,input:this._autoGrownBehaviour,blur:this._blurBehaviour,storageChange:this._storageChange})},_getClassName:function(h){return this._name.toLowerCase()+"-"+h},_setClassNames:function(){this._classOnHover=this._getClassName("onHover");this._classUnChanged=this._getClassName("unChanged");this._classOnEdit=this._getClassName("onEdit");this._classChanged=this._getClassName("changed");this._classEmpty=this._getClassName("empty")},_setVars:function(){var h=this.element;this._input=h;h.uniqueId();this._valuesIndex=0;this._id=this._name+"-"+h.attr("id");h.attr("maxLength",this.options.maxChars)},_setRuler:function(){var i="#"+this._name+"-ruler",j=f(i),h=this._input;if(!j.length){String.prototype.visualLength=function(){var k=f(i);k.html(this.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"));return k.width()};j=f('<span id="'+i.substr(1)+'"></span>');j.css({fontSize:h.css("fontSize"),fontFamily:h.css("font-family"),fontWeight:h.css("fontWeight"),position:"absolute",visibility:"hidden",whiteSpace:"nowrap"});f("body").after(j)}},_initializeAjax:function(){var h=this.options.ajaxConfig;if(!f.isFunction(h.GETCallback)){return}if(h.url.charAt(h.url.length-1)!=="/"){h.url+="/"}if(!h.id){h.id=this._id}f.ajax({url:h.url+h.id,succes:h.GETCallback})},_setState:function(){var h=this._input,m=h.val(),i=m.visualLength(),k=this.options.minWidth,l=this.options.maxWidth,j;if(i<k){j=k}else{if(l<i){j=l}else{j=i}}h.width(j);if(h.val().length===0){h.removeClass(this._classChanged);
h.addClass(this._classEmpty)}else{h.addClass(this._classChanged)}},_focusBehaviour:function(){var i=f(this).data(c),h=i._input;h.removeClass(i._classChanged+" "+i._classUnChanged+" "+i._classEmpty).addClass(i._classOnEdit)},_autoGrownBehaviour:function(){var l=f(this).data(c),h=l._input,m=h.val(),j=l.options.minWidth,k=l.options.maxWidth,i=m.visualLength();if(i<j){i=j}else{if(i>k){i=k}}h.width(i)},_blurBehaviour:function(){var j=f(this).data(c),h=j._input,k=h.val(),i=j.options.ajaxConfig,l;h.removeClass(j._classOnEdit);if(k.length===0){h.addClass(j._classEmpty)}else{h.addClass(j._classChanged);j.option("values",k);j._valuesIndex=j.option("values").length-1;if(j.options.storage==="ajax"){i.UPDATEData.value=h.val();f.ajax({url:i.url+i.id,data:j._tmpl(i.UPDATETemplate,i.UPDATEData),type:"UPDATE"})}}j._setState()},_tmpl:function(j,i){var h=typeof(j)!=="string"?(function(){throw {name:"Invalid Parameter",message:"You must insert a string into the function"}}()):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+j.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return i?h(i):h},_setOption:function(i,j){var h=this.options;switch(i){case"values":h.values.push(j);if(h.storage==="localStorage"){localStorage.setItem(this._id,JSON.stringify(h.values))}return;case"currentValue":this.option("values",j);this._input.val(j);break}this._super("_setOption",i,j)},_create:function(){var i,h,j=this.options.storage;this._setClassNames();this._setVars();this._setListeners();h=this._input;h.addClass(this._classEasyText);if(j==="localStorage"){if(localStorage[this._id]){i=JSON.parse(localStorage[this._id]);this.options.values=i;h.val(i[i.length-1]);this._valuesIndex=i.length-1}}else{if(j==="ajax"){this._initializeAjax()}}this._setRuler();this._setState()},_destroy:function(){this._input.attr("class","")
},deleteStorage:function(){var i=this.options.ajaxConfig,h=this.options.storage;if(h==="localStorage"){localStorage.removeItem(this._id)}else{if(h==="ajax"){f.ajax({url:i.url+i.id,type:"DELETE"})}}this.options.values=[];this._input.val("");this._setState()},getNextBackValue:function(j){var h=this.option("values"),i=this._valuesIndex;if(j===g){j=true}if(typeof(j)!=="boolean"){throw new Error("Invalid parameter")}i+=j?1:(-1);if(h[i]===g){return -1}this._valuesIndex=i;this._input.val(h[i]);this._setState();return h[i]}})})(jQuery,window,document);

(function(b,c){b.component("coral.autocomplete",b.coral.inputbase,{version:"4.0.2",defaultElement:"<input>",castProperties:["source","buttons","title","rootNode","triggers"],options:{appendTo:"body",autoFocus:false,allowRepeat:false,asyncType:"post",delay:300,maxLabelWidth:"auto",multiLineLabel:false,minLength:0,minHeight:1,height:"auto",multiple:false,position:{my:"left top",at:"left bottom",collision:"none"},value:"",text:"",forceSelection:false,defaultValue:"",postMode:"value",required:false,showStar:true,separator:",",buttons:[],title:null,errMsg:null,errMsgPosition:"leftBottom",panelHeight:"auto",maxPanelHeight:200,iframePanel:false,isLabel:false,source:null,valueField:"value",textField:"label",searchField:"valueField",onValidSuccess:null,onValidError:null,onChange:null,onBlur:null,onClose:null,onFocus:null,onOpen:null,oncancel:null,onResponse:null,onSearch:null,onSelect:null,triggers:null,excluded:false},requestIndex:0,pending:0,_create:function(){var d=this;this._prepareInit();this._initAutocomplete();this._initState();this._initSource();this._initData();this._bindEvent();this._setDefaultValue();this._setDefaultText();this.liveRegion=b("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("coral-helper-hidden-accessible").appendTo(this.document[0].body);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}});if(this.options.multiLineLabel){b(this.element).easytext({minWidth:10,maxWidth:200,maxChars:60});this._on(this.document,{click:function(e){if(this.options.readonly||this.options.isLabel){return}this._moveInput("last",e)}})}},_prepareInit:function(){this.lastSelectedItem={};this.selectedItems=[];this.isNewMenu=true},_initAutocomplete:function(){var f=this.options.render=="tree"?"autocompletetree":"autocomplete";if(this.options.iframePanel){this.iframePanel=b("<iframe class='coral-autocomplete-iframePanel' style='position:absolute;display:none;'></iframe>").appendTo("body")}if(this.options.multiLineLabel){var e=this,h=this.element[0].nodeName.toLowerCase(),g=h==="textarea",d=h==="input";
this.ismultiLineLabel=g?true:d?false:this.element.prop("isContentEditable");this.autocompleteWrapper=b("<span class='coral-"+f+" coral-textboxlist coral-textbox'></span>").insertAfter(this.element);this.elementBorder=b("<span class='coral-textbox-border coral-corner-all'></span>").css({minHeight:this.options.minHeight+"px",height:this.options.height,overflow:"auto"}).appendTo(this.autocompleteWrapper);this.valuebox=b("<input type='hidden'>").appendTo(this.elementBorder);this.valueMethod=this.valuebox[g||d?"val":"text"];this.textMethod=this.element[g||d?"val":"text"];this.element.addClass("coral-validation-"+f+" coral-autocomplete-input coral-autocomplete-text coral-textbox-default").attr("autocomplete","off");this.textboxlistUl=b("<ul class='coral-textboxlist-ul'><li class='coral-textboxlist-inputLi'></li></ul>");this.textboxlistUl.appendTo(this.elementBorder);this.element.appendTo(this.textboxlistUl.find(".coral-textboxlist-inputLi"));if(this.options.buttons.length>0){this._createButtonPanel()}if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name");this.valuebox.attr("name",this.options.name);this.element.removeAttr("name")}else{if(this.options.name){this.valuebox.attr("name",this.options.name)}}if(this.options.text){this.setText(this.options.text)}if(b.trim(this.valuebox.val())!=""){this.options.value=this.valuebox.val()}if(this.options.showPopup){}}else{var h=this.element[0].nodeName.toLowerCase(),g=h==="textarea",d=h==="input";this.ismultiLineLabel=g?true:d?false:this.element.prop("isContentEditable");this.autocompleteWrapper=b('<span class="coral-'+f+' coral-textbox" style="border-width: 0;"></span>').insertAfter(this.element);this.elementBorder=b('<span class="coral-textbox-border coral-corner-all"></span>').css({minHeight:this.options.minHeight+"px"}).appendTo(this.autocompleteWrapper);
this.valuebox=b("<input type='hidden'>").appendTo(this.elementBorder);this.valueMethod=this.valuebox[g||d?"val":"text"];this.textMethod=this.element[g||d?"val":"text"];this.element.addClass("coral-validation-"+f+" coral-autocomplete-input coral-autocomplete-text coral-textbox-default coral-form-element-autocomplete").attr("autocomplete","off");this.element.appendTo(this.elementBorder);if(this.options.buttons.length>0){this._createButtonPanel()}if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name");this.valuebox.attr("name",this.options.name);this.element.removeAttr("name")}else{if(this.options.name){this.valuebox.attr("name",this.options.name)}}if(this.options.text){this.setText(this.options.text)}if(b.trim(this.valuebox.val())!=""){this.options.value=this.valuebox.val()}}},_initState:function(){if(this.element.prop("readonly")||this.options.readonly){this.options.readonly=true;this.valuebox.prop("readonly",true);this.element.prop("readonly",true);this.component().addClass("coral-readonly")}if(this.options.isLabel){this.element.prop("readonly",true);this.valuebox.prop("readonly",true);this.component().addClass("coral-isLabel")}},reset:function(){this.setValue(this.originalValue)},_bindEvent:function(){var f=this,e,d,g;this._on(this.element,{mouseenter:function(h){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}f.autocompleteWrapper.addClass("coral-textbox-hover")},mouseleave:function(h){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}f.autocompleteWrapper.removeClass("coral-textbox-hover")},keyup:function(h){if(this.options.readonly||this.options.isLabel){return}this._trigger("onKeyUp",h,{})},keydown:function(h){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}if(this.element.prop("readOnly")){e=true;g=true;d=true;return
}e=false;g=false;d=false;var i=b.coral.keyCode;switch(h.keyCode){case i.PAGE_UP:if(this.options.render=="tree"){break}e=true;this._move("previousPage",h);break;case i.PAGE_DOWN:if(this.options.render=="tree"){break}e=true;this._move("nextPage",h);break;case i.LEFT:e=true;this._moveItem("left",h);break;case i.RIGHT:e=true;this._moveItem("right",h);break;case i.UP:if(this.options.render=="tree"){break}e=true;this._keyEvent("previous",h);break;case i.DOWN:if(this.options.render=="tree"){break}e=true;this._keyEvent("next",h);break;case i.ENTER:if(this.menu.active){e=true;h.preventDefault();this.menu.select(h)}break;case i.TAB:if(this.menu.active){this.menu.select(h)}break;case i.ESCAPE:if(this.menu.element.is(":visible")){if(!this.ismultiLineLabel){this.setValue(this.term,true)}this.close(h);h.preventDefault()}break;default:d=true;this._searchTimeout(h);break}this._trigger("onKeyDown",h,{})},keypress:function(h){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}if(e){e=false;if(!this.ismultiLineLabel||this.menu.element.is(":visible")){h.preventDefault()}return}if(d){return}if(this.options.render=="tree"){return}var i=b.coral.keyCode;switch(h.keyCode){case i.PAGE_UP:this._move("previousPage",h);break;case i.PAGE_DOWN:this._move("nextPage",h);break;case i.UP:this._keyEvent("previous",h);break;case i.DOWN:this._keyEvent("next",h);break;default:break}},input:function(h){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}if(g){g=false;h.preventDefault();return}this._searchTimeout(h)},focus:function(){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}this.selectedItem=null;this.previous=this.getValue();this.component().addClass("coral-state-focus")},blur:function(i){this.component().removeClass("coral-state-focus");if(f.options.disabled||f.options.isLabel||f.options.readonly){return}if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(i);if(!this.options.multiLineLabel){if(this.options.multiple){}else{if(!this.options.forceSelection){if(this.lastSelectedItem[this.options.textField]!=this.element.val()){this.setValue(this.element.val(),true)
}}else{if(this.options.render=="tree"){}else{var h=b.grep(this.responseItems,function(j){return j[f.options.textField]==f.element.val()});if(!h.length){this.setValue("",true)}else{this.setValue(h[0][f.options.valueField],true)}}}}}this._trigger("onBlur",i,{item:this.selectedItem})}});this._on(this.menu.element,{mousedown:function(h){if(this.options.readonly||this.options.isLabel){return}h.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];if(!b(h.target).closest(".coral-menu-item").length){this._delay(function(){var j=this;this.document.one("mousedown",function(k){if(k.target!==j.element[0]&&k.target!==i&&!b.contains(i,k.target)){j.close()}})})}},menuonfocus:function(j,k){if(this.options.readonly||this.options.isLabel){return}var h,i;if(this.isNewMenu){this.isNewMenu=false;if(j.originalEvent&&/^mouse/.test(j.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){b(j.target).trigger(j.originalEvent)});return}}i=k.item.data("coral-autocomplete-item");if(false!==this._trigger("onFocus",j,{item:i})){if(j.originalEvent&&/^key/.test(j.originalEvent.type)){}}h=k.item.attr("aria-label")||i[this.options.valueField];if(h&&b.trim(h).length){this.liveRegion.children().hide();b("<div>").text(h).appendTo(this.liveRegion)}},menuonselect:function(j,m){if(this.options.readonly||this.options.isLabel){return}var i=m.item.data("coral-autocomplete-item"),h=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=h;this._delay(function(){this.previous=h;this.selectedItem=i;f.lastSelectedItem=i})}f.lastSelectedItem=i;this.selectedItem=i;if(false!==this._trigger("onSelect",j,{item:i})){var i=m.item.data("coral-autocomplete-item");valueField=i[this.options.valueField];textField=i[this.options.textField];var l=f.getValue(),o=f.getText(),k=l==""?[]:l.split(this.options.separator),n=o==""?[]:o.split(this.options.separator);if(f.options.multiple){if(this.options.postMode=="value"){if(!this.options.allowRepeat&&b.inArray(valueField,k)>-1){return
}k.push(valueField);n.push(textField);this.setText(n.join(this.options.separator));this.setValue(k.join(this.options.separator),true)}if(this.options.postMode=="text"){if(!this.options.allowRepeat&&b.inArray(textField,n)>-1){return}n.push(textField);f.setValue(n.join(this.options.separator),true)}if(this.options.postMode=="value-text"){if(!this.options.allowRepeat&&b.inArray(valueField+"-"+textField,k+"-"+n)>-1){return}k.push(valueField);n.push(textField);this.setValue(k.join(this.options.separator)+"-"+n.join(this.options.separator),true)}}else{if(this.options.postMode=="value"){this.setText(i[this.options.textField],true);this.setValue(i[this.options.valueField],true)}if(this.options.postMode=="text"){this.setValue(i[this.options.textField],true)}if(this.options.postMode=="value-text"){this.setValue(i[this.options.valueField]+"-"+i[this.options.textField],true)}}}this.term=this.getText();this.close(j)}});if(this.options.multiLineLabel){this._on({"click .coral-label-close":function(h){if(this.options.readonly||this.options.isLabel){return}this._removeLabel(h)},"click .coral-textboxlist-item":function(h){if(this.options.readonly||this.options.isLabel){return}h.stopPropagation()},"click .coral-textbox-border":function(h){if(this.options.readonly||this.options.isLabel){return}this.element.focus()},"mouseenter .coral-label-close":function(h){b(h.target).addClass("coral-label-close-hover")},"mouseleave .coral-label-close":function(h){b(h.target).removeClass("coral-label-close-hover")},"focus .coral-textboxlist-item":function(h){if(this.options.readonly||this.options.isLabel){return}b(h.target).addClass("coral-state-active")},"blur .coral-textboxlist-item":function(h){b(h.target).removeClass("coral-state-active")},"keydown .coral-state-active":function(i){if(this.options.readonly||this.options.isLabel){return}var h=b.coral.keyCode;switch(i.keyCode){case h.LEFT:this._moveInput("left",i);break;case h.RIGHT:this._moveInput("right",i);break;case h.BACKSPACE:this._removeLabel(i);
break;case h.DELETE:this._removeLabel(i);break;default:break}}})}},_initData:function(){var e=this;var d=this.options;this.menu=b("<ul>").addClass("coral-autocomplete-panel coral-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");if(isNaN(d.panelHeight)){b(".coral-autocomplete-panel").css({"max-height":d.maxPanelHeight+"px"});b(".coral-autocomplete-iframePanel").css({"max-height":d.maxPanelHeight+"px"})}},_setDefaultValue:function(){if(!this.options.value){this.originalValue="";return}else{this.setValue(this.options.value);this.originalValue=this.getValue()}},_setDefaultText:function(){if(!this.options.text){return}this.setText(this.options.text)},getLastSelectedItem:function(){return this.lastSelectedItem},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("coral-autocomplete-input").removeAttr("autocomplete").removeAttr("title");this.menu.element.remove();if(this.options.iframePanel){this.iframePanel.remove()}this.liveRegion.remove()},_setOption:function(d,f){var e=this.options.maxLabelWidth;if(e!="auto"){e=e+"px"}this._super(d,f);if(d==="isLabel"&&typeof f==="boolean"){this.element.prop("readonly",f);this.valuebox.prop("readonly",f);this.component().removeClass("coral-readonly");this.component().toggleClass("coral-isLabel",f);if(this.textboxlistUl){if(f){this.textboxlistUl.find(".coral-textboxlist-item").css("max-width","")}else{this.textboxlistUl.find(".coral-textboxlist-item").css("max-width",e)}}}if(d==="readonly"&&typeof f==="boolean"){this.element.prop("readonly",f);this.valuebox.prop("readonly",f);this.component().removeClass("coral-isLabel");this.component().toggleClass("coral-readonly",f);if(this.textboxlistUl){if(f){this.textboxlistUl.find(".coral-textboxlist-item").css("max-width","")}else{this.textboxlistUl.find(".coral-textboxlist-item").css("max-width",e)}}}if(d==="source"){this._initSource()}if(d==="appendTo"){this.menu.element.appendTo(this._appendTo())}if(d==="disabled"&&f&&this.xhr){this.xhr.abort()
}if(d==="value"){this.setValue(f)}},_appendTo:function(){var d=this.options.appendTo;if(d){d=d.jquery||d.nodeType?b(d):this.document.find(d).eq(0)}if(!d||!d[0]){d=this.element.closest(".coral-front")}if(!d.length){d=this.document[0].body}return d},_filter:function(f,e,d){d(b.coral.autocomplete.filter(f,e.term,this.options.valueField,this.options.textField,this.options.searchField))},_initSource:function(){var f,d,e=this;if(b.isArray(this.options.source)){f=this.options.source;this.source=function(h,g){e._filter(f,h,g)}}else{if(typeof this.options.source==="string"){d=this.options.source;this.source=function(h,g){if(e.xhr){e.xhr.abort()}if(this.element.attr("name")){h[this.element.attr("name")]=h.term}e.xhr=b.ajax({url:d,data:h,type:e.options.asyncType,dataType:"json",success:function(i){if(e.options.render!="tree"){g(i)}else{b(e.menu.element).tree("reload",i);g(i)}},error:function(){g([])}})}}else{this.source=this.options.source}}},_searchTimeout:function(d){clearTimeout(this.searching);this.searching=this._delay(function(){var f=this.term===this._term(),e=this.menu.element.is(":visible"),g=d.altKey||d.ctrlKey||d.metaKey||d.shiftKey;if(!f||(f&&!e&&!g)){this.selectedItem=null;this.search(null,d)}},this.options.delay)},_term:function(){if(this.options.multiLineLabel){return this.element.val()}return this.getText()},_updateTitle:function(g){var f=this,d,e=this.options;if(e.multiLineLabel){d=f.element.closest("ul")}else{d=f.element}if(e.title==true){d.attr("title",g)}else{if(e.title==false){d.attr("title","")}else{d.attr("title",e.title)}}},search:function(e,d){e=e!=null?e:this._term();this.term=this._term();if(e.length<this.options.minLength||(this.options.minLength>0&&b.trim(e)=="")){return this.close(d)}if(this._trigger("onSearch",d)===false){return}return this._search(e)},_search:function(d){this.pending++;this.element.addClass("coral-autocomplete-loading");this.cancelSearch=false;this.source({term:d},this._response())},_response:function(){var d=++this.requestIndex;
return b.proxy(function(e){if(d===this.requestIndex){this.__response(e)}this.pending--;if(!this.pending){this.element.removeClass("coral-autocomplete-loading")}},this)},__response:function(d){if(d){d=this._normalize(d)}this._trigger("onResponse",null,{content:d});if(!this.options.disabled&&d&&d.length&&!this.cancelSearch){this._suggest(d);this._trigger("onOpen")}else{this._close()}},close:function(d){this.cancelSearch=true;this._close(d)},_close:function(d){if(this.menu.element.is(":visible")){this.menu.element.hide();if(this.options.iframePanel){this.iframePanel.hide()}this.options.render!="tree"&&this.menu.blur();this.isNewMenu=true;this._trigger("onClose",d)}},_change:function(d){if(this.previous!==this.getValue()){this._trigger("onChange",d,{item:this.selectedItem,oldValue:this.previous,value:this.getValue(),text:this.getText(),lastSelectedItem:this.lastSelectedItem})}},_normalize:function(d){var e=this;if(d.length&&d[0][this.options.textField]&&d[0][this.options.valueField]){return d}return b.map(d,function(f){if(typeof f==="string"){return{label:f,value:f}}return b.extend({},f,{label:f.label||f.value,value:f.value||f.label})})},_suggest:function(f){var i=this.menu.element,h;var j=this.iframePanel||b();if(this.options.render=="tree"){}else{this.menu.element.empty();this._renderMenu(i,f);this.isNewMenu=true;this.menu.refresh()}this.responseItems=f;var d=i.height();j.css("height",d);i.show();j.show();var e=i.siblings(".coral-front:visible").map(function(){return +b(this).css("z-index")}).get(),g=Math.max.apply(null,e);if(g>=+i.css("z-index")){i.css("z-index",g+1);j.css("z-index",g)}j.outerWidth(Math.max(i.width("").outerWidth()+1,this.elementBorder.outerWidth()));this._resizeMenu();i.position(b.extend({of:this.elementBorder},this.options.position));j.position(b.extend({of:this.elementBorder},this.options.position));if(this.options.autoFocus){this.menu.next()}},_resizeMenu:function(){var d=this.menu.element;var e=this.iframePanel||b();d.outerWidth(Math.max(d.width("").outerWidth()+1,this.elementBorder.outerWidth()))
},_renderMenu:function(e,d){var f=this;b.each(d,function(g,h){f._renderItemData(e,h)})},_renderItemData:function(d,e){return this._renderItem(d,e).data("coral-autocomplete-item",e)},_renderItem:function(k,o){var n=o[this.options.textField];var l,j="",d="",g=!!o.hidden==true?"hidden":"";var i=b.coral.toFunction(this.options.formatter),f;if(b.isFunction(i)){n=i.apply(this.element[0],[{item:o}])}var h=b.coral.toFunction(this.options.itemattr);if(b.isFunction(h)){var m=h.apply(this.element[0],[{item:o}]);if(!b.isEmptyObject(m)){if(m.hasOwnProperty("style")){d+=m.style;delete m.style}if(m.hasOwnProperty("class")){g+=" "+m["class"];delete m["class"]}try{delete m.role}catch(e){}for(l in m){if(m.hasOwnProperty(l)){j+=" "+l+"="+m[l]}}}return b('<li class="'+g+'"'+j+"style="+d+">").text(n).appendTo(k)}else{return b("<li>").addClass(g).text(n).appendTo(k)}},_move:function(e,d){if(!this.menu.element.is(":visible")){this.search(null,d);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){if(!this.options.multiLineLabel){this.setValue("",true);this.setText(this.term)}this.menu.blur();return}this.menu[e](d)},component:function(){return this.autocompleteWrapper},_setLastSelectedItem:function(){var d=this.options;var e=this.getValue(),f=this.getText();this.lastSelectedItem={};this.lastSelectedItem[d.valueField]=e;this.lastSelectedItem[d.textField]=f},_text:function(i){var h=this.options.maxLabelWidth,d=this.options.readonly,e=this.options.isLabel;if(this.options.multiLineLabel){if(i!=""&&!i){var g=[];b.each(this.textboxlistUl.find(".coral-textboxlist-item"),function(){g.push(b(this).text())});return g.join(",")}var f="";if(i!=""&&!(i instanceof Array)){i=i.split(this.options.separator)}if(i instanceof Array){if(h=="auto"||e||d){b.each(i,function(j){i.splice(j,1,"<li tabindex='-1' class='coral-textboxlist-item'  title='"+this+"'>"+this+"<span class='coral-label-close cui-icon-cross2'></span></li>")})}else{b.each(i,function(j){i.splice(j,1,"<li tabindex='-1' class='coral-textboxlist-item'  style='  max-width:"+h+"px;' title='"+this+"'>"+this+"<span class='coral-label-close cui-icon-cross2'></span></li>")
})}f=i.join("")}else{if(h=="auto"||e||d){f="<li tabindex='-1' class='coral-textboxlist-item'   title='"+this+"' >"+i+"<span class='coral-label-close  cui-icon-cross2'></span></li>"}else{f="<li tabindex='-1' class='coral-textboxlist-item'  style='  max-width:"+h+"px;' title='"+this+"' >"+i+"<span class='coral-label-close cui-icon-cross2'></span></li>"}}if(i!=""){if(this.options.multiple){this.textboxlistUl.find(".coral-textboxlist-item").remove(".coral-textboxlist-item");this.textboxlistUl.find(".coral-textboxlist-inputLi").before(f)}else{this.textboxlistUl.find(".coral-textboxlist-item").remove(".coral-textboxlist-item");this.textboxlistUl.find(".coral-textboxlist-inputLi").before(f)}}else{this.textboxlistUl.find(".coral-textboxlist-item").remove(".coral-textboxlist-item")}}else{return this.textMethod.apply(this.element,arguments)}},getOldValue:function(){var f=this.options,e=[],h=[],d=0;if(!this.currentValues){return e}var h=this.currentValues.split(",");for(;d<h.length;d++){var g=h[d];e.push(g)}return e},setValue:function(d,f){d=d||"";var j=this,m,o,f,i;if(typeof d!=="string"){m=d.value;f=d.changed;i=d.removed}else{m=d}if(this.options.multiLineLabel){this.element.val("");this.element.css({width:"10px"})}this.previous=this.getValue();if(this.options.multiLineLabel){var j=this;var k=this.element.closest("li.coral-textboxlist-inputLi"),p=k.index(),h=p,n=this.valuebox.val(m)==""?[]:this.valuebox.val(m);if(b.trim(m)==""){this.setText(m)}else{if("text"===this.options.postMode){this.setText(m)}else{if(b.trim(m)!==""&&b.isArray(this.options.source)){var l=(this.options.render=="tree")?b(this.menu.element).tree("transformToArray",this.options.source.concat()):this.options.source,e=[],g=b.grep(m.split(","),function(r){var q=false;b.each(l,function(s){if(r==l[s][j.options.valueField]){e.push(l[s][j.options.textField]);return true}});return q});if(e.length){this.setText(e)}}}}if(m==""){n=[]}this.valuebox.val(m);this.currentValues=m}else{if(b.trim(m)==""){this.setText(m)}else{if("text"===this.options.postMode){this.setText(m)
}else{if(b.trim(m)!==""&&b.isArray(this.options.source)){var l=(this.options.render=="tree")?b(this.menu.element).tree("transformToArray",this.options.source.concat()):this.options.source,e=[],g=b.grep(m.split(","),function(r){var q=false;b.each(l,function(s){if(r==l[s][j.options.valueField]){e.push(l[s][j.options.textField]);return true}});return q});if(e.length){this.setText(e[0])}}}}this.valuebox.val(m)}f&&this._change(null)},setText:function(d){this._updateTitle(d);this._text(d);this._setLastSelectedItem()},getValue:function(){if(this.options.multiLineLabel){return this.valuebox.val()}else{return this.valueMethod.apply(this.valuebox)}},getText:function(){return this._text()},focus:function(){if(this.options.disabled||this.options.readonly||this.options.isLabel){return false}this.element.focus()},_keyEvent:function(e,d){if(!this.ismultiLineLabel||this.menu.element.is(":visible")){this._move(e,d);d.preventDefault()}},_removeLabel:function(i){var g=this.element.closest("li.coral-textboxlist-inputLi"),m=b(i.target).closest("li.coral-textboxlist-item"),j=b(i.target).closest("li.coral-textboxlist-item:last");g.insertAfter(j);var l=g.index();var f=m.index();var h=f;if(f>l){h=f-1}var d=this.getText().split(",");d.splice(h,1);m.remove();var k=this.getValue().split(",");k.splice(h,1);this.selectedItems.splice(h,1);this.selectedItem=null;this.setValue(k.join(","),true);if(typeof this.options.source=="string"){this.setText(d.join(","))}this._moveInput("last",i);this.element.val("");this.element.focus()},_moveInput:function(i,h){var d=this.element.closest("li.coral-textboxlist-inputLi");var f=b(h.target).closest("li.coral-textboxlist-item");var g=b(d).closest("li.coral-textboxlist-inputLi").nextAll("li.coral-textboxlist-item").last();switch(i){case"left":d.insertBefore(f);this.element.val("");this.element.focus();break;case"right":d.insertAfter(f);this.element.val("");this.element.focus();break;case"last":d.insertAfter(g);this.element.val("");break}},_moveItem:function(g,f){var d=this.element.closest("li.coral-textboxlist-inputLi");
if(g=="left"&&d.prev().length&&b(d.find("input")).caret()==0){this.element.val("");d.prev().focus()}if(g=="right"&&d.next().length&&b(d.find("input")).caret()==d.find("input").val().length){this.element.val("");d.next().focus()}}});b.extend(b.coral.autocomplete,{escapeRegex:function(d){return d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(j,f,e,d,i){var g=this;var h=new RegExp(b.coral.autocomplete.escapeRegex(f),"i");if(i){return b.grep(j,function(n){var l=h.test(n[d]||n[e]||n);var m=i.split(",");for(var k=0;k<m.length;k++){if(!l&&n[m[k]]){l=h.test(n[m[k]]);if(l){break}}}return l})}return b.grep(j,function(k){return h.test(k[d]||k[e]||k[i]||k)})}});b.component("coral.autocomplete",b.coral.autocomplete,{options:{messages:{noResults:"No search results.",results:function(d){return d+(d>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var d;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return}if(e&&e.length){d=this.options.messages.results(e.length)}else{d=this.options.messages.noResults}this.liveRegion.children().hide();b("<div>").text(d).appendTo(this.liveRegion)}});var a=b.coral.autocomplete})(jQuery);

(function(b,c){b.component("coral.autocompletetree",b.coral.autocomplete,{requestIndex:0,pending:0,options:{allowPushParent:false,rootNode:false,multiLineLabel:false,radioType:"level",showRootNode:true,multiple:false,triggers:null,excluded:false},_create:function(){this.options.render="tree";this._super()},_filter:function(f,e,d){b(this.menu.element).tree("reload",f);b(this.menu.element).tree("filterNodesByParam",{name:e.term});d(f)},_initData:function(){var e=this;this.menu={};var d=b("<ul>")[0];b(d).uniqueId().addClass("coral-autocomplete-panel coral-front").appendTo(this._appendTo()).tree({showLine:false,showIcon:false,radioType:this.options.radioType,showRootNode:this.options.showRootNode,rootNode:this.options.rootNode,componentCls:"coral-autocomplete-tree",addDiyDom:function(i,h){var k=15;var g=b("#"+h.tId+"_switch"),j=b("#"+h.tId+"_ico");j.before(g);if(h.level>0){var f="<span style='display: inline-block;width:"+(k*h.level)+"px'></span>";g.before(f)}},beforeClick:function(g,f){if(!e.options.allowPushParent&&f.isParent){return false}},onClick:function(f,g,i){var n=i,h=e.previous;if(e.element[0]!==e.document[0].activeElement){e.element.focus();e.previous=h;e._delay(function(){e.previous=h;e.selectedItem=n})}if(false!==e._trigger("beforeNodeClick",f,{item:n,value:e.getValue()})){e.selectedItem=n;e.selectedItems.push(n);var j=e.getValue(),m=e.getText(),k=j==""?[]:j.split(e.options.separator),l=m==""?[]:m.split(e.options.separator);if(e.options.multiple){if(!e.options.allowRepeat&&b.inArray(i.id,k)>-1){return}k.push(i.id);l.push(i.name)}else{k=[i.id];l=[i.name]}e.setText(l.join(e.options.separator));e.setValue(k.join(e.options.separator),true)}e._trigger("onNodeClick",f,{item:n,value:e.getValue()});e.term=e._text();e.close(f)}}).hide();this.menu.element=b(d);if(isNaN(this.options.panelHeight)){b(".coral-autocomplete-panel").css({"max-height":this.options.maxPanelHeight+"px"})}}});var a=b.coral.autocomplete})(jQuery);

window.PINYIN_DATA = {a:"啊阿吖嗄腌锕",ai:"爱埃挨哎唉哀皑癌蔼矮艾碍隘捱嗳嗌嫒瑷暧砹锿霭",an:"安案按鞍氨俺暗岸胺谙埯揞犴庵桉铵鹌黯",ang:"肮昂盎",ao:"凹敖熬翱袄傲奥懊澳坳拗嗷岙廒遨媪骜獒聱螯鏊鳌鏖",ba:"芭捌扒叭吧笆八疤巴拔跋靶把耙坝霸罢爸茇菝岜灞钯粑鲅魃",bai:"白柏百摆佰败拜稗捭掰",ban:"版般办斑班搬扳颁板扮拌伴瓣半绊阪坂钣瘢癍舨",bang:"帮邦梆榜膀绑棒磅蚌镑傍谤蒡浜",bao:"保报包苞胞褒剥薄雹堡饱宝抱暴豹鲍爆炮曝瀑勹葆孢煲鸨褓趵龅",bei:"北备杯碑悲卑辈背贝钡倍狈惫焙被孛陂邶蓓呗悖碚鹎褙鐾鞴",ben:"本奔苯笨夯畚坌锛",beng:"蚌崩绷甭泵蹦迸嘣甏",bi:"比必币毕逼鼻鄙笔彼碧蓖蔽毙毖庇痹闭敝弊辟壁臂避陛匕俾芘荜荸萆薜吡哔狴庳愎滗濞弼妣婢嬖璧贲睥畀铋秕裨筚箅篦舭襞跸髀",bian:"变编边便鞭贬扁卞辨辩辫遍匾弁苄忭汴缏煸砭碥窆褊蝙笾鳊",biao:"表标彪膘婊骠飑飙飚镖镳瘭裱鳔",bie:"别鳖憋瘪蹩",bin:"彬斌濒滨宾摈傧豳缤玢槟殡膑镔髌鬓",bing:"并兵冰柄丙秉饼炳病屏禀邴摒槟",bo:"播博柏剥薄玻菠拨钵波勃搏铂箔伯帛舶脖膊渤泊驳卜亳啵饽檗擘礴钹鹁簸跛踣",bu:"不布部步捕卜哺补埠簿怖埔卟逋瓿晡钚钸醭",ca:"擦嚓礤",cai:"才采材彩猜裁财睬踩菜蔡",can:"参餐蚕残惭惨灿孱骖璨粲黪",cang:"藏苍舱仓沧伧",cao:"操糙槽曹草嘈漕螬艚",ce:"册策测厕侧恻",ceng:"曾层蹭噌",cha:"查插叉茬茶碴搽察岔差诧刹喳嚓猹馇汊姹杈楂槎檫锸镲衩",chai:"差拆柴豺侪钗瘥虿",chan:"产搀掺蝉馋谗缠铲阐颤冁谄蒇廛忏潺澶孱羼婵骣觇禅蟾躔",chang:"场常长昌猖尝偿肠厂敞畅唱倡裳伥鬯苌菖徜怅惝阊娼嫦昶氅鲳",chao:"超抄钞朝嘲潮巢吵炒绰剿怊晁焯耖",che:"车扯撤掣彻澈坼砗",chen:"称郴臣辰尘晨忱沉陈趁衬沈谌谶抻嗔宸琛榇碜龀",cheng:"成程称城撑橙呈乘惩澄诚承逞骋秤丞埕枨柽塍瞠铖铛裎蛏酲",chi:"持吃痴匙池迟弛驰耻齿侈尺赤翅斥炽傺墀茌叱哧啻嗤彳饬媸敕眵鸱瘛褫蚩螭笞篪豉踟魑",chong:"重充冲虫崇宠茺忡憧铳舂艟",chou:"抽酬畴踌稠愁筹仇绸瞅丑臭俦帱惆瘳雠",chu:"出除处础初橱厨躇锄雏滁楚储矗搐触畜亍刍怵憷绌杵楮樗褚蜍蹰黜",chuai:"揣搋啜嘬膪踹",chuan:"传川穿椽船喘串舛遄氚钏舡",chuang:"创疮窗幢床闯怆",chui:"吹炊捶锤垂椎陲棰槌",chun:"春椿醇唇淳纯蠢莼鹑蝽",chuo:"戳绰啜辍踔龊",ci:"次此词差疵茨磁雌辞慈瓷刺赐茈祠鹚糍",cong:"从聪葱囱匆丛苁淙骢琮璁枞",cou:"凑楱辏腠",cu:"促粗醋簇卒蔟徂猝殂酢蹙蹴",cuan:"蹿篡窜攒汆撺爨镩",cui:"摧崔催脆瘁粹淬翠衰萃啐悴璀榱毳",cun:"存村寸忖皴",cuo:"错措磋撮搓挫厝嵯脞锉矬痤瘥鹾蹉",da:"大达打答搭瘩耷哒嗒囗怛妲沓褡笪靼鞑",dai:"代带呆歹傣戴殆贷袋待逮怠埭甙呔岱迨绐玳黛",dan:"单但耽担丹郸掸胆旦氮惮淡诞弹蛋石儋凼萏菪啖澹宕殚赕眈疸瘅聃箪",dang:"当挡党荡档谠砀铛裆",dao:"到道导刀捣蹈倒岛祷稻悼盗叨氘焘纛",de:"的地得德锝",deng:"等登蹬灯瞪凳邓噔嶝戥磴镫簦",di:"的地第底弟堤低滴迪敌笛狄涤翟嫡抵蒂帝递缔氐籴诋谛邸坻荻嘀娣柢棣觌祗砥碲睇镝羝骶",dian:"电点典店颠掂滇碘靛垫佃甸惦奠淀殿丶阽坫巅玷钿癜癫簟踮",diao:"调碉叼雕凋刁掉吊钓铞貂鲷",die:"跌爹碟蝶迭谍叠垤堞揲喋牒瓞耋鲽",ding:"定丁盯叮钉顶鼎锭订仃啶玎腚碇町疔耵酊",diu:"丢铥",dong:"动东冬董懂栋侗恫冻洞垌咚岽峒氡胨胴硐鸫",dou:"都兜抖斗陡豆逗痘蔸钭窦蚪篼",du:"都度读督毒犊独堵睹赌杜镀肚渡妒芏嘟渎椟牍蠹笃髑黩",duan:"断段短端锻缎椴煅簖",dui:"对堆兑队敦怼憝碓镦",dun:"墩吨蹲敦顿囤钝盾遁沌炖砘礅盹趸",duo:"多度掇哆夺垛躲朵跺舵剁惰堕咄哚沲缍铎裰踱",e:"阿蛾峨鹅俄额讹娥恶厄扼遏鄂饿哦噩谔垩苊莪萼呃愕屙婀轭腭锇锷鹗颚鳄",en:"恩蒽摁嗯",er:"而二儿耳尔饵洱贰迩珥铒鸸鲕",fa:"发法罚筏伐乏阀珐垡砝",fan:"范藩帆番翻樊矾钒繁凡烦反返贩犯饭泛蕃蘩幡夂梵攵燔畈蹯",fang:"方放访房坊芳肪防妨仿纺邡枋钫舫鲂",fei:"费非菲啡飞肥匪诽吠肺废沸芾狒悱淝妃绯榧腓斐扉砩镄痱蜚篚翡霏鲱",fen:"分份芬酚吩氛纷坟焚汾粉奋忿愤粪偾瀵棼鲼鼢",feng:"风丰封枫蜂峰锋疯烽逢冯缝讽奉凤俸酆葑唪沣砜",fo:"佛",fou:"否缶",fu:"服复府父负福富夫敷肤孵扶拂辐幅氟符伏俘浮涪袱弗甫抚辅俯釜斧脯腑腐赴副覆赋傅付阜腹讣附妇缚咐莆匐凫郛芙芾苻茯莩菔拊呋呒幞怫滏艴孚驸绂绋桴赙祓黻黼罘稃馥蚨蜉蝠蝮麸趺跗鲋鳆",ga:"噶嘎夹轧垓尬尕尜旮钆",gai:"改该概钙盖溉芥丐陔戤赅",gan:"感敢干甘杆柑竿肝赶秆赣坩苷尴擀泔淦澉绀橄旰矸疳酐",gang:"港冈刚钢缸肛纲岗杠戆罡筻",gao:"告高篙皋膏羔糕搞镐稿睾诰郜藁缟槔槁杲锆",ge:"个格合歌各革哥搁戈鸽胳疙割葛蛤阁隔铬咯鬲仡哿圪塥嗝纥搿膈硌镉袼颌虼舸骼",gei:"给",gen:"根跟亘茛哏艮",geng:"更耕庚羹埂耿梗哽赓绠鲠",gong:"公工供功共贡攻恭龚躬宫弓巩汞拱珙肱蚣觥",gou:"构够购钩勾沟苟狗垢佝诟岣遘媾缑枸觏彀笱篝鞲",gu:"告故辜菇咕箍估沽孤姑鼓古蛊骨谷股顾固雇贾嘏诂菰崮汩梏轱牯牿臌毂瞽罟钴锢鸪鹄痼蛄酤觚鲴鹘",gua:"刮瓜剐寡挂褂卦诖呱栝胍鸹",guai:"乖拐怪掴",guan:"关管观棺官冠馆罐惯灌贯纶倌莞掼涫盥鹳矜鳏",guang:"广光逛咣犷桄胱",gui:"规瑰圭硅归龟闺轨鬼诡癸桂柜跪贵刽匦刿庋宄妫桧炅晷皈簋鲑鳜",gun:"辊滚棍衮绲磙鲧",guo:"国过果锅郭裹馘埚掴呙帼崞猓椁虢聒蜾蝈",ha:"哈蛤铪",hai:"还海孩骸氦亥害骇嗨胲醢",han:"韩酣憨邯含涵寒函喊罕翰撼捍旱憾悍焊汗汉邗菡撖犴阚瀚晗焓顸颔蚶鼾",hang:"行杭夯航吭沆绗颃",hao:"好号壕嚎豪毫郝耗浩貉蒿薅嗥嚆濠灏昊皓颢蚝",he:"何合呵喝荷菏核禾和盒貉阂河涸赫褐鹤贺诃劾壑嗬阖曷盍颌蚵翮",hei:"嘿黑",hen:"很痕狠恨",heng:"哼亨横衡恒蘅珩桁",hong:"轰哄烘虹鸿洪宏弘红黉訇讧荭蕻薨闳泓",hou:"后候喉侯猴吼厚堠後逅瘊篌糇鲎骺",hu:"户护乎互和呼忽瑚壶葫胡蝴狐糊湖弧虎唬沪冱唿囫岵猢怙惚浒滹琥槲轷觳烀煳戽扈祜瓠鹄鹕鹱笏醐斛鹘",hua:"话华化划花哗猾滑画骅桦砉铧",huai:"槐徊怀淮坏踝",huan:"还欢环桓缓换患唤痪豢焕涣宦幻郇奂萑擐圜獾洹浣漶寰逭缳锾鲩鬟",huang:"荒慌黄磺蝗簧皇凰惶煌晃幌恍谎隍徨湟潢遑璜肓癀蟥篁鳇",hui:"会回恢挥灰辉徽蛔毁悔慧卉惠晦贿秽烩汇讳诲绘诙茴荟蕙咴喙隳洄彗缋珲桧晖恚虺蟪麾",hun:"荤昏婚魂浑混诨馄阍溷珲",huo:"活或获和豁伙火惑霍货祸劐藿攉嚯夥钬锪镬耠蠖",ji:"系己机技计级积际及基击记济辑即几继集极给绩激圾畸稽箕肌饥迹讥鸡姬缉吉棘籍急疾汲嫉挤脊蓟冀季伎祭剂悸寄寂既忌妓纪藉骑亟乩剞佶偈墼芨芰荠蒺蕺掎叽咭哜唧岌嵴洎屐骥畿玑楫殛戟戢赍觊犄齑矶羁嵇稷瘠虮笈笄暨跻跽霁鲚鲫髻麂",jia:"家加价佳嘉枷夹荚颊贾甲钾假稼架驾嫁茄伽郏葭岬浃迦珈戛胛恝铗镓痂瘕蛱笳袈跏",jian:"间件建简荐见健检坚监减键歼尖笺煎兼肩艰奸缄茧柬碱硷拣捡俭剪槛鉴践贱箭舰剑饯渐溅涧僭谏谫菅蒹搛囝湔蹇謇缣枧楗戋戬牮犍毽腱睑锏鹣裥笕翦踺鲣鞯",jiang:"江强僵姜将浆疆蒋桨奖讲匠酱降茳洚绛缰犟礓耩糨豇靓",jiao:"教交校较蕉椒礁焦胶郊浇骄娇嚼搅铰矫侥脚狡角饺缴绞剿酵轿叫窖佼僬艽茭挢噍峤徼湫姣敫皎鹪蛟醮跤鲛",jie:"接结解介界阶姐揭皆秸街截劫节桔杰捷睫竭洁戒藉芥借疥诫届讦诘拮喈嗟婕孑桀碣疖颉蚧羯鲒骱",jin:"进今金近仅津尽巾筋斤襟紧锦谨靳晋禁烬浸劲卺荩堇噤馑廑妗缙瑾槿赆觐衿矜",jing:"经京精境睛竞竟荆兢茎晶鲸惊粳井警景颈静敬镜径痉靖净刭儆阱菁獍憬泾迳弪婧肼胫腈旌箐",jiong:"炯窘迥扃",jiu:"就究酒揪纠玖韭久灸九厩救旧臼舅咎疚僦啾阄柩桕鸠鹫赳鬏",ju:"具且据车举巨鞠拘狙疽居驹菊局咀矩沮聚拒距踞锯俱句惧炬剧倨讵苣苴莒掬遽屦琚枸椐榘榉橘犋飓钜锔窭裾趄醵踽龃雎鞫",juan:"捐鹃娟倦眷卷绢鄄狷涓桊蠲锩镌隽",jue:"觉决绝嚼撅攫抉掘倔爵诀厥劂谲矍蕨噘噱崛獗孓珏桷橛爝镢蹶觖",jun:"均菌钧军君峻俊竣浚郡骏捃皲筠麇",ka:"喀咖卡咯佧咔胩",kai:"开揩楷凯慨剀垲蒈忾恺铠锎锴",kan:"看槛刊堪勘坎砍侃莰阚戡龛瞰",kang:"康慷糠扛抗亢炕伉闶钪",kao:"考拷烤靠尻栲犒铐",ke:"可科客课坷苛柯棵磕颗壳咳渴克刻嗑岢恪溘骒缂珂轲氪瞌钶锞稞疴窠颏蝌髁",ken:"肯啃垦恳裉龈",keng:"坑吭铿",kong:"控空恐孔倥崆箜",kou:"口抠扣寇芤蔻叩囗眍筘",ku:"枯哭窟苦酷库裤刳堀喾绔骷",kua:"夸垮挎跨胯侉",kuai:"会快块筷侩蒯郐哙狯浍脍",kuan:"款宽髋",kuang:"况匡筐狂框矿眶旷诓诳邝圹夼哐纩贶",kui:"亏盔岿窥葵奎魁傀馈愧溃馗匮夔隗蒉揆喹喟悝愦逵暌睽聩蝰篑跬",kun:"坤昆捆困悃阃琨锟醌鲲髡",kuo:"括扩廓阔蛞",la:"垃拉喇蜡腊辣啦落剌邋旯砬瘌",lai:"来莱赖崃徕涞濑赉睐铼癞籁",lan:"览蓝婪栏拦篮阑兰澜谰揽懒缆烂滥岚漤榄斓罱镧褴",lang:"琅榔狼廊郎朗浪蒗啷阆稂螂",lao:"老捞劳牢佬姥酪烙涝潦唠崂忉栳铑铹痨耢醪",le:"了乐勒仂叻泐鳓",lei:"类雷镭蕾磊累儡垒擂肋泪羸诔嘞嫘缧檑耒酹",leng:"棱楞冷塄愣",li:"理里力立历离利丽厘梨犁黎篱狸漓李鲤礼莉荔吏栗厉励砾傈例俐痢粒沥隶璃哩俪俚郦坜苈莅蓠藜呖唳喱猁溧澧逦娌嫠骊缡枥栎轹膦戾砺詈罹锂鹂疠疬蛎蜊蠡笠篥粝醴跞雳鲡鳢黧",lia:"俩",lian:"联链连练脸莲镰廉怜涟帘敛恋炼蔹奁潋濂琏楝殓臁裢裣蠊鲢",liang:"量两良亮俩粮凉梁粱辆晾谅墚莨椋锒踉靓魉",liao:"了料疗撩聊僚燎寥辽潦撂镣廖蓼尥嘹獠寮缭钌鹩",lie:"列裂烈劣猎冽埒捩咧洌趔躐鬣",lin:"琳林磷霖临邻鳞淋凛赁吝拎蔺啉嶙廪懔遴檩辚瞵粼躏麟",ling:"领另铃令玲菱零龄伶羚凌灵陵岭酃苓呤囹泠绫柃棂瓴聆蛉翎鲮",liu:"留浏流溜琉榴硫馏刘瘤柳六遛骝绺旒熘锍镏鹨鎏",long:"龙聋咙笼窿隆垄拢陇垅茏泷珑栊胧砻癃",lou:"楼娄搂篓漏陋露偻蒌喽嵝镂瘘耧蝼髅",lu:"录陆芦卢颅庐炉掳卤虏鲁麓碌露路赂鹿潞禄戮垆撸噜泸渌漉逯璐栌橹轳辂辘氇胪镥鸬鹭簏舻鲈",lv:"律旅虑驴吕铝侣履屡缕氯率滤绿偻捋闾榈膂稆褛",luan:"峦挛孪滦卵乱脔娈栾鸾銮",lue:"略掠锊",lun:"论抡轮伦仑沦纶囵",luo:"络咯烙萝螺罗逻锣箩骡裸落洛骆倮蠃荦摞猡泺漯珞椤脶镙瘰跞雒",ma:"码妈马麻玛蚂骂嘛吗抹唛犸杩蟆麽",mai:"买埋麦卖迈脉劢荬霾",man:"满瞒馒蛮蔓曼慢漫谩墁幔缦熳镘颟螨鳗鞔",mang:"芒茫盲氓忙莽邙漭硭蟒",mao:"贸猫茅锚毛矛铆卯茂冒帽貌袤茆峁泖瑁昴牦耄旄懋瞀蝥蟊髦",me:"么麽",mei:"没美每媒魅玫枚梅酶霉煤眉镁昧寐妹媚糜莓嵋猸浼湄楣镅鹛袂",men:"们门闷扪焖懑钔",meng:"盟萌蒙檬锰猛梦孟勐甍瞢懵朦礞虻蜢蠓艋艨",mi:"密眯醚靡糜迷谜弥米秘觅泌蜜幂芈谧咪嘧猕汨宓弭脒祢敉縻麋",mian:"面免棉眠绵冕勉娩缅沔渑湎腼眄",miao:"描苗瞄藐秒渺庙妙喵邈缈缪杪淼眇鹋",mie:"蔑灭乜咩蠛篾",min:"民抿皿敏悯闽苠岷闵泯缗玟珉愍黾鳘",ming:"明名命螟鸣铭冥茗溟暝瞑酩",miu:"谬缪",mo:"没模脉摸摹蘑膜磨摩魔抹末莫墨默沫漠寞陌谟茉蓦馍嫫嬷殁镆秣瘼耱貊貘麽",mou:"谋牟某侔哞缪眸蛑鍪",mu:"目母牟拇牡亩姆墓暮幕募慕木睦牧穆仫坶苜沐毪钼",na:"那拿哪呐钠娜纳讷捺肭镎衲",nai:"氖乃奶耐奈鼐佴艿萘柰",nan:"男南难喃囝囡楠腩蝻赧",nang:"囊攮囔馕曩",nao:"脑挠恼闹淖孬垴呶猱瑙硇铙蛲",ne:"呢讷",nei:"内馁",nen:"嫩恁",neng:"能",ni:"你妮霓倪泥尼拟匿腻逆溺伲坭蘼猊怩昵旎睨铌鲵",nian:"年蔫拈碾撵捻念粘廿埝辇黏鲇鲶",niang:"娘酿",niao:"鸟尿茑嬲脲袅",nie:"捏聂孽啮镊镍涅乜陧蘖嗫颞臬蹑",nin:"您",ning:"柠狞凝宁拧泞佞咛甯聍",niu:"牛扭钮纽拗狃忸妞",nong:"农脓浓弄侬哝",nu:"努奴怒弩胬孥驽",nv:"女恧钕衄",nuan:"暖",nue:"虐疟挪",nuo:"娜懦糯诺傩搦喏锘",o:"哦噢",ou:"欧鸥殴藕呕偶沤讴怄瓯耦",pa:"扒耙啪趴爬帕怕琶葩杷筢",pai:"牌派排拍徘湃俳蒎哌",pan:"攀潘盘磐盼畔判叛胖拚爿泮袢襻蟠蹒",pang:"磅乓庞旁耪胖彷夂滂逄攵螃",pao:"抛咆刨炮袍跑泡匏狍庖脬疱",pei:"培配呸胚裴赔陪佩沛辔帔旆锫醅霈",pen:"喷盆湓",peng:"朋砰抨烹澎彭蓬棚硼篷膨鹏捧碰堋嘭怦蟛",pi:"否被辟坯砒霹批披劈琵毗啤脾疲皮匹痞僻屁譬丕仳陴邳郫圮埤鼙芘擗噼庀淠媲纰枇甓罴铍癖疋蚍蜱貔",pian:"片便篇偏骗谝骈犏胼翩蹁",piao:"漂飘瓢票剽莩嘌嫖缥殍瞟螵",pie:"撇瞥丿苤彡氕",pin:"品频聘拼贫姘嫔榀牝颦",ping:"评平冯乒坪苹萍凭瓶屏俜娉枰鲆",po:"坡泼颇婆破魄迫粕叵鄱珀钋钷皤笸",pu:"普暴扑铺仆莆葡菩蒲埔朴圃浦谱曝瀑匍噗溥濮璞氆镤镨蹼",qi:"其企起期汽器启气奇缉欺栖戚妻七凄漆柒沏棋歧畦崎脐齐旗祈祁骑岂乞契砌迄弃泣讫亓俟圻芑芪萁萋葺蕲嘁屺岐汔淇骐绮琪琦杞桤槭耆祺憩碛颀蛴蜞綦鳍麒",qia:"夹掐恰洽葜袷髂",qian:"前钱牵扦钎铅千迁签仟谦乾黔钳潜遣浅谴堑嵌欠歉纤倩佥阡芊芡茜荨掮岍悭慊骞搴褰缱椠肷愆钤虔箝",qiang:"强将枪呛腔羌墙蔷抢戕嫱樯戗炝锖锵镪襁蜣羟跄",qiao:"壳橇锹敲悄桥瞧乔侨巧鞘撬翘峭俏窍削劁诮谯荞峤愀憔缲樵硗跷鞒",qie:"且切茄怯窃郄惬慊妾挈锲箧趄",qin:"亲钦侵秦琴勤芹擒禽寝沁芩揿吣嗪噙溱檎锓矜覃螓衾",qing:"情请庆轻青氢倾卿清擎晴氰顷苘圊檠磬蜻罄綮謦鲭黥",qiong:"琼穷邛茕穹蛩筇跫銎",qiu:"求球秋丘邱囚酋泅俅巯犰湫逑遒楸赇虬蚯蝤裘糗鳅鼽",qu:"区去取曲趋蛆躯屈驱渠娶龋趣诎劬苣蕖蘧岖衢阒璩觑氍朐祛磲鸲癯蛐蠼麴瞿黢",quan:"全权圈颧醛泉痊拳犬券劝诠荃犭悛绻辁畎铨蜷筌鬈",que:"确缺炔瘸却鹊榷雀阕阙悫",qun:"裙群逡麇",ran:"然燃冉染苒蚺髯",rang:"让瓤壤攘嚷禳穰",rao:"饶扰绕荛娆桡",re:"惹热喏",ren:"人任认壬仁忍韧刃妊纫仞荏饪轫稔衽",reng:"扔仍",ri:"日",rong:"容戎茸蓉荣融熔溶绒冗嵘狨榕肜蝾",rou:"揉柔肉糅蹂鞣",ru:"如入茹蠕儒孺辱乳汝褥蓐薷嚅洳溽濡缛铷襦颥",ruan:"软阮朊",rui:"蕊瑞锐芮蕤枘睿蚋",run:"闰润",ruo:"若弱偌箬",sa:"撒洒萨卅挲脎飒",sai:"赛腮鳃塞噻",san:"三叁伞散仨彡馓毵糁",sang:"桑嗓丧搡磉颡",sao:"搔骚扫嫂埽缫臊瘙鳋",se:"色塞瑟涩啬铯穑",sen:"森",seng:"僧",sha:"莎砂杀刹沙纱傻啥煞厦唼挲歃铩痧裟霎鲨",shai:"筛晒酾",shan:"删山珊苫杉煽衫闪陕擅赡膳善汕扇缮栅剡讪鄯埏芟潸姗嬗骟膻钐疝蟮舢跚鳝",shang:"上商尚赏墒伤晌裳垧泷绱殇熵觞",shao:"少绍鞘梢捎稍烧芍勺韶哨邵劭苕潲杓蛸筲艄",she:"设社奢赊蛇舌舍赦摄射慑涉厍佘揲猞滠歙畲麝",shen:"什身参深神甚申砷呻伸娠绅沈审婶肾慎渗诜谂莘葚哂渖椹胂矧蜃糁",sheng:"生声乘甥牲升绳省盛剩胜圣嵊渑晟眚笙",shi:"是时式什市实使事示始世施识视试师史十食势释失室匙狮湿诗尸虱石拾蚀矢屎驶士柿拭誓逝嗜噬适仕侍饰氏恃嘘谥埘莳蓍弑轼贳炻礻铈螫舐筮豕鲥鲺",shou:"手首受授收售守寿瘦兽狩绶艏",shu:"数术束输属殊述蔬枢梳抒叔舒淑疏书赎孰熟薯暑曙署蜀黍鼠树戍竖墅庶漱恕俞丨倏塾菽摅沭澍姝纾毹腧殳秫",shua:"刷耍唰",shuai:"率摔衰甩帅蟀",shuan:"栓拴闩涮",shuang:"霜双爽孀",shui:"说水谁睡税",shun:"吮瞬顺舜",shuo:"数说硕朔烁蒴搠妁槊铄",si:"司思似食四斯撕嘶私丝死肆寺嗣伺饲巳厮俟兕厶咝汜泗澌姒驷缌祀锶鸶耜蛳笥",song:"松送耸怂颂宋讼诵凇菘崧嵩忪悚淞竦",sou:"搜艘擞嗽叟薮嗖嗾馊溲飕瞍锼螋",su:"速诉苏素酥俗粟僳塑溯宿肃缩夙谡蔌嗉愫涑簌觫稣",suan:"算酸蒜狻",sui:"虽随隋绥髓碎岁穗遂隧祟谇荽濉邃燧眭睢",sun:"孙损笋荪狲飧榫隼",suo:"所索莎蓑梭唆缩琐锁唢嗦嗍娑桫挲睃羧",ta:"他它她塌塔獭挞蹋踏嗒闼溻漯遢榻沓铊趿鳎",tai:"大态台胎苔抬泰酞太汰邰薹骀肽炱钛跆鲐",tan:"坛弹坍摊贪瘫滩檀痰潭谭谈坦毯袒碳探叹炭郯澹昙忐钽锬覃",tang:"汤塘搪堂棠膛唐糖倘躺淌趟烫傥帑惝溏瑭樘铴镗耥螗螳羰醣",tao:"讨掏涛滔绦萄桃逃淘陶套鼗叨啕洮韬饕",te:"特忒忑慝铽",teng:"藤腾疼誊滕",ti:"题提体梯剔踢锑蹄啼替嚏惕涕剃屉倜荑悌逖绨缇鹈裼醍",tian:"天添填田甜恬舔腆掭忝阗殄畋",tiao:"调条挑迢眺跳佻苕祧窕蜩笤粜龆鲦髫",tie:"帖贴铁萜餮",ting:"庭听厅烃汀廷停亭挺艇莛葶婷梃铤蜓霆",tong:"同统通桐酮瞳铜彤童桶捅筒痛佟仝茼嗵恸潼砼",tou:"投头偷透骰",tu:"图突凸秃徒途涂屠土吐兔堍荼菟钍酴",tuan:"团湍抟彖疃",tui:"推颓腿蜕褪退忒煺",tun:"囤褪吞屯臀氽饨暾豚",tuo:"拖托脱鸵陀驮驼椭妥拓唾乇佗坨庹沱柝��橐砣箨酡跎鼍",wa:"挖哇蛙洼娃瓦袜佤娲腽",wai:"外歪崴",wan:"完湾万晚玩蔓豌弯顽丸烷碗挽皖惋宛婉腕剜芄莞菀纨绾琬脘畹蜿",wang:"网望汪王亡枉往旺忘妄罔惘辋魍",wei:"为位威未围维委巍微危韦违桅唯惟潍苇萎伟伪尾纬蔚味畏胃喂魏渭谓尉慰卫偎诿隈隗圩葳薇帏帷崴嵬猥猬闱沩洧涠逶娓玮韪軎炜煨痿艉鲔",wen:"文问闻稳瘟温蚊纹吻紊刎夂阌汶璺攵雯",weng:"嗡翁瓮蓊蕹",wo:"我挝蜗涡窝斡卧握沃倭莴喔幄渥肟硪龌",wu:"务无误物午恶巫呜钨乌污诬屋芜梧吾吴毋武五捂舞伍侮坞戊雾晤勿悟兀仵阢邬圬芴唔庑怃忤寤迕妩婺骛杌牾焐鹉鹜痦蜈鋈鼯",xi:"系息戏习希细西喜析栖昔熙硒矽晰嘻吸锡牺稀悉膝夕惜熄烯溪汐犀檄袭席媳铣洗隙僖兮隰郗茜菥葸蓰奚唏徙饩阋浠淅屣嬉玺樨曦觋欷歙熹禊禧皙穸裼蜥螅蟋舄舾羲粞翕醯蹊鼷",xia:"下瞎虾匣霞辖暇峡侠狭厦夏吓呷狎遐瑕柙硖罅黠",xian:"现限线显先见献衔险铣掀锨仙鲜纤咸贤舷闲涎弦嫌县腺馅羡宪陷冼苋莶藓岘猃暹娴氙燹祆鹇痫蚬筅籼酰跣跹霰",xiang:"相想项享详象响香像向降厢镶箱襄湘乡翔祥巷橡芗葙饷庠骧缃蟓鲞飨",xiao:"小销消效校萧硝霄削哮嚣宵淆晓孝肖啸笑哓崤潇逍骁绡枭枵蛸筱箫魈",xie:"些谢械楔歇蝎鞋协挟携邪斜胁谐写卸蟹懈泄泻屑偕亵勰燮薤撷獬廨渫瀣邂绁缬榭榍颉蹀躞",xin:"信新心欣薪芯锌辛忻衅囟馨莘昕歆镡鑫",xing:"行形型性幸姓省星腥猩惺兴刑邢醒杏陉荇荥擤饧悻硎",xiong:"兄凶胸匈汹雄熊芎",xiu:"修秀臭休羞朽嗅锈袖绣咻岫馐庥溴鸺貅髹",xu:"需许须序续墟戌虚嘘徐蓄酗叙旭畜恤絮婿绪吁诩勖圩蓿洫溆顼栩肷煦盱胥糈醑",xuan:"选宣轩喧悬旋玄癣眩绚儇谖萱揎泫渲漩璇楦暄炫煊碹铉镟痃",xue:"学削靴薛穴雪血谑噱泶踅鳕",xun:"询训讯迅寻浚勋熏循旬驯巡殉汛逊巽郇埙荀荨蕈薰峋徇獯恂洵浔曛窨醺鲟",ya:"压押鸦鸭呀丫芽牙蚜崖衙涯雅哑亚讶轧伢垭揠岈迓娅琊桠氩砑睚痖",yan:"言研验眼严颜焉咽阉烟淹盐蜒岩延阎炎沿奄掩衍演艳堰燕厌砚雁唁彦焰宴谚殷厣赝剡俨偃兖谳郾鄢埏芫菸崦恹闫阏湮滟妍嫣琰檐晏胭腌焱罨筵酽趼魇餍鼹",yang:"样央阳养殃鸯秧杨扬佯疡羊洋氧仰痒漾徉怏泱炀烊恙蛘鞅",yao:"要邀腰妖瑶摇尧遥窑谣姚咬舀药耀钥夭爻吆崾徭幺珧杳轺曜肴铫鹞窈繇鳐麽",ye:"业也页椰噎耶爷野冶掖叶曳腋夜液拽靥谒邺揶揲晔烨铘",yi:"一以已意易议医移艺益义艾蛇壹揖铱依伊衣颐夷遗仪胰疑沂宜姨彝椅蚁倚乙矣抑邑屹亿役臆逸肄疫亦裔毅忆溢诣谊译异翼翌绎刈劓佚佾诒圯埸懿苡荑薏弈奕挹弋呓咦咿嗌噫峄嶷猗饴怿怡悒漪迤驿缢殪轶贻欹旖熠眙钇镒镱痍瘗癔翊蜴舣羿翳酏黟",yin:"因音引银茵荫殷阴姻吟淫寅饮尹隐印胤鄞垠堙茚吲喑狺夤洇氤铟瘾窨蚓霪龈",ying:"影应营英迎樱婴鹰缨莹萤荧蝇赢盈颖硬映嬴郢茔荥莺萦蓥撄嘤膺滢潆瀛瑛璎楹媵鹦瘿颍罂",yo:"哟唷",yong:"用拥永佣臃痈庸雍踊蛹咏泳涌恿勇俑壅墉喁慵邕镛甬鳙饔",you:"有游由友优右邮幽悠忧尤铀犹油酉佑釉诱又幼卣攸侑莠莜莸尢呦囿宥柚猷牖铕疣蚰蚴蝣蝤繇鱿黝鼬",yu:"于育语域娱与遇尉迂淤盂榆虞愚舆余俞逾鱼愉渝渔隅予雨屿禹宇羽玉芋郁吁喻峪御愈欲狱誉浴寓裕预豫驭粥禺毓伛俣谀谕萸蓣揄圄圉嵛狳饫馀庾阈鬻妪妤纡瑜昱觎腴欤於煜熨燠聿畲钰鹆鹬瘐瘀窬窳蜮蝓竽臾舁雩龉",yuan:"员原源元院远鸳渊冤垣袁援辕园圆猿缘苑愿怨垸塬芫掾圜沅媛瑗橼爰眢鸢螈箢鼋",yue:"说乐阅越曰约跃钥岳粤月悦龠哕瀹栎樾刖钺",yun:"运耘云郧匀陨允蕴酝晕韵孕郓芸狁恽愠纭韫殒昀氲熨筠",za:"匝砸杂咋拶咂",zai:"在载子再栽哉灾宰崽甾",zan:"暂咱攒赞瓒昝簪糌趱錾",zang:"赃脏葬奘驵臧",zao:"造遭糟凿藻枣早澡蚤躁噪皂灶燥唣",ze:"责择则泽咋仄赜啧帻迮昃笮箦舴",zei:"贼",zen:"怎谮",zeng:"增综曾憎赠缯甑罾锃",zha:"扎喳渣札轧铡闸眨栅榨咋乍炸诈柞揸吒咤哳楂砟痄蚱齄",zhai:"翟摘斋宅窄债寨砦瘵",zhan:"站展战瞻毡詹粘沾盏斩辗崭蘸栈占湛绽谵搌旃",zhang:"章长张樟彰漳掌涨杖丈帐账仗胀瘴障仉鄣幛嶂獐嫜璋蟑",zhao:"着照找招朝昭沼赵罩兆肇召爪诏棹钊笊",zhe:"这者着浙遮折哲蛰辙锗蔗乇谪摺柘辄磔鹧褶蜇螫赭",zhen:"真圳珍斟甄砧臻贞针侦枕疹诊震振镇阵帧蓁浈缜桢椹榛轸赈胗朕祯畛稹鸩箴",zheng:"正政整证争蒸挣睁征狰怔拯症郑诤峥徵钲铮筝",zhi:"只之知制置址支直至织治质执职值致指志芝枝吱蜘肢脂汁植殖侄止趾旨纸挚掷帜峙智秩稚炙痔滞窒卮陟郅埴芷摭帙忮彘咫骘栉枳栀桎轵轾贽胝膣祉黹雉鸷痣蛭絷酯跖踬踯豸觯",zhong:"中种重终盅忠钟衷肿仲众冢忪锺螽舯踵",zhou:"州舟周洲诌粥轴肘帚咒皱宙昼骤荮啁妯纣绉胄碡籀繇酎",zhu:"注主助筑属珠株蛛朱猪诸诛逐竹烛煮拄瞩嘱著柱蛀贮铸住祝驻伫侏邾苎茱洙渚潴杼槠橥炷铢疰瘃竺箸舳翥躅麈",zhua:"挝抓爪",zhuai:"拽",zhuan:"专传转砖撰赚篆啭馔颛",zhuang:"状装幢桩庄妆撞壮僮",zhui:"椎锥追赘坠缀萑惴骓缒隹",zhun:"准屯谆肫窀",zhuo:"着捉拙卓桌琢茁酌啄灼浊倬诼擢浞涿濯禚斫镯",zi:"自资子字咨兹姿滋淄孜紫仔籽滓渍谘茈呲嵫姊孳缁梓辎赀恣眦锱秭耔笫粢趑觜訾龇鲻髭",zong:"综总鬃棕踪宗纵偬腙粽",zou:"邹走奏揍诹陬鄹驺鲰",zu:"组足租卒族祖诅阻俎菹镞",zuan:"钻纂攥缵躜",zui:"最嘴醉罪蕞觜",zun:"尊遵撙樽鳟",zuo:"作左昨佐柞做坐座阼唑嘬怍胙祚笮酢"};

var pinyinEngine=function(){return(this instanceof pinyinEngine)?this.resetCache():new pinyinEngine};pinyinEngine.prototype={search:function(c,h){var b=this._cache,g=this._history,f=[],e=0;c=c.toLowerCase();h=h||function(){};if(g.length&&c.indexOf(g.keyword)===1){b=g.content}for(var d=0,a=b.length;d<a;d++){if(b[d].tags.indexOf(c)!==-1){e++;f.push(b[d]);h(b[d].content)}}this._history={keyword:c,value:f,length:e};return f},setCache:function(c,f){var e,b="\u0001";e=c;for(var d=0,a=c.length;d<a;d++){e.push(pinyinEngine.toPinyin(c[d],false,b))}e=e.join(b);var g={tags:e,content:f};this._cache.push(g)},resetCache:function(){this._cache=[];this._history={}}};pinyinEngine.toPinyin=function(){var f=window.PINYIN_DATA;var b={},h,d,c,a;for(var d in f){h=f[d];c=0;a=h.length;for(;c<a;c++){var g=h.charAt(c);if(!b[g]){b[g]=[]}b[g].push(d)}}f=null;function e(w,v,n){var k=[],o,u=[];for(var t=0,q=w.length;t<q;t++){for(var s=0,p=v.length;s<p;s++){o=k[k.length]=(w[t] instanceof Array)?w[t].concat(v[s]):[].concat(w[t],v[s]);u.push(o.join(""))}}return{array:k,string:u.join(n||"")}}return function(n,t,j){var o,k,s,m,l,r;if(n==null||n.length==0){o=0}else{o=n.length}if(o===0){return t?"":[]}if(o===1){r=b[n];if(t){return r&&r[0]?r[0]:n}return r||[n]}else{var s=[];for(l=0;l<o;l++){r=b[n.charAt(l)];if(r){s[s.length]=t?r[0]:r}else{s[s.length]=t?n.charAt(l):[n.charAt(l)]}}if(t){return j==null?s:s.join(j||"")}k=s[0];m=s.length;var p,q;for(l=1;l<m;l++){p=e(k,s[l],j);k=p.array}return j==null?k:p.string}}}();

(function(d,f,g,a){var e="loading",c={position:"overlay",text:"",loadingIcon:"coral-icon-loading",tpl:'<span class="loading-wrapper {wrapper}">{text}<span class="{loadingIcon}"></span></span>',disableSource:false,disableOthers:[]};function h(k,j){this.element=k;this.options=d.extend({},c,j);this._defaults=c;this._name=e;this._loader=null;this.init()}function b(){if(!d[e]){d.loading=function(j){d("body").loading(j)}}}h.prototype={init:function(){if(d(this.element).is("body")){this.options.position="overlay"}this.show()},show:function(){var l=this,m=l.options.tpl.replace("{wrapper}"," loading-show ");m=m.replace("{loadingIcon}",l.options.loadingIcon);m=m.replace("{text}",(l.options.text!=="")?l.options.text+" ":"");l._loader=d(m);if(d(l.element).is("input, textarea")&&true===l.options.disableSource){d(l.element).attr("disabled","disabled")}else{if(true===l.options.disableSource){d(l.element).addClass("disabled")}}switch(l.options.position){case"inside":d(l.element).append(l._loader);break;case"overlay":var k=null;if(d(l.element).is("body")){k=d('<div class="coral-loading" style="position:fixed; left:0; top:0; z-index: 10001; width: 100%; height: '+d(f).height()+'px;" />');k.prepend("<div class ='coral-component-overlay'/>");d("body").prepend(k)}else{var o=d(l.element).css("position"),p={},j=d(l.element).outerHeight()+"px",n="100%";if("relative"===o||"absolute"===o){p={top:0,left:0}}else{p=d(l.element).position()}k=d('<div class="coral-loading" style="position:absolute; top: '+p.top+"px; left: "+p.left+"px; z-index: 10000; width: "+n+"; height: "+j+';" />');k.prepend("<div style='position:absolute;width:100%;height:100%;'><div class ='coral-component-overlay'style='position:relative;'></div></div>");d(l.element).prepend(k)}k.append(l._loader);l._loader.css({top:(k.outerHeight()/2-l._loader.outerHeight()/2)+"px"});break;default:d(l.element).after(l._loader);break}l.disableOthers()},refresh:function(){var k=null,l=this,n=d(l.element).css("position"),o={},j=d(l.element).outerHeight()+"px",m="100%";
if("relative"===n||"absolute"===n){o={top:0,left:0}}else{o=d(l.element).position()}k=d(l.element).find(".coral-loading");k.css({top:o.top,left:o.left,width:m,height:j});l._loader.css({top:(k.outerHeight()/2-l._loader.outerHeight()/2)+"px"})},hide:function(){if("overlay"===this.options.position){d(this.element).find(".coral-loading").first().remove()}else{d(this._loader).remove();d(this.element).text(d(this.element).attr("data-loading-label"))}d(this.element).removeAttr("disabled").removeClass("disabled");this.enableOthers()},disableOthers:function(){d.each(this.options.disableOthers,function(k,l){var j=d(l);if(j.is("button, input, textarea")){j.attr("disabled","disabled")}else{j.addClass("disabled")}})},enableOthers:function(){d.each(this.options.disableOthers,function(k,l){var j=d(l);if(j.is("button, input, textarea")){j.removeAttr("disabled")}else{j.removeClass("disabled")}})}};var i=Array.prototype.slice;d.fn[e]=function(l){var m=this,k=i.call(arguments,1),j=typeof l==="string";return this.each(function(){if(j){if(d.data(this,"plugin_"+e)){var o,n=d.data(this,"plugin_"+e);if(!d.isFunction(n[l])||l.charAt(0)==="_"){return d.error("no such method '"+l+"' for "+name+" component instance")}o=n[l].apply(n,k);if(o!==n&&o!==a){m=o&&o.jquery?m.pushStack(o.get()):o;return false}}}else{d.data(this,"plugin_"+e,new h(this,l))}})};b()})(jQuery,window,document);

$(function(){$(document).tooltip({items:"[data-errors]",content:function(){var a=$(this);if(a.is("[data-errors]")){return a.attr("data-errors")}},show:{effect:"fadeIn",delay:300},tooltipClass:"coral-state-error",hide:{effect:"fadeOut",delay:0},position:{my:"left top",at:"left bottom+5"}})});(function(a){})(jQuery);

/*!
 * 组件库4.0：分栏符
 * 
 * 依赖JS文件：
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 */
(function(a){a.component("coral.subfield",{version:"4.0.1",options:{title:"",lineCls:null,textCls:null,onClick:null},_create:function(){if(!this.element.jquery){this.element=a(this.element)}this.element.addClass("coral-subfield");this.fieldset=a('<fieldset class="coral-subfield-fieldset"></fieldset>').appendTo(this.element);if(this.options.lineCls){this.fieldset.addClass(this.options.lineCls)}this.legend=a('<legend class="coral-subfield-legend">'+this.options.title+"</legend>").appendTo(this.fieldset);if(this.options.textCls){this.legend.addClass(this.options.textCls)}this._bindEvent()},_bindEvent:function(){var b=this;this.legend.bind("click"+this.eventNamespace,function(c){if(b.options.disabled){c.preventDefault();c.stopImmediatePropagation()}else{b._trigger("onClick")}})},_setOption:function(b,c){if(b==="title"){this.setTitle(c)}},_destroy:function(){this.uiTitle.remove()},component:function(){return this.element},show:function(){this.component().show()},hide:function(){this.component().hide()},setTitle:function(b){a("legend",this.fieldset).html(b);this.options.title=b},getTitle:function(){return this.options.title}})})(jQuery);

/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(c){var d=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],k=("onwheel" in document||document.documentMode>=9)?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice,j,b;if(c.event.fixHooks){for(var e=d.length;e;){c.event.fixHooks[d[--e]]=c.event.mouseHooks}}var f=c.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var m=k.length;m;){this.addEventListener(k[--m],l,false)}}else{this.onmousewheel=l}c.data(this,"mousewheel-line-height",f.getLineHeight(this));c.data(this,"mousewheel-page-height",f.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var m=k.length;m;){this.removeEventListener(k[--m],l,false)}}else{this.onmousewheel=null}c.removeData(this,"mousewheel-line-height");c.removeData(this,"mousewheel-page-height")},getLineHeight:function(m){var i=c(m),n=i["offsetParent" in c.fn?"offsetParent":"parent"]();if(!n.length){n=c("body")}return parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(i){return c(i).height()},settings:{adjustOldDeltas:true,normalizeOffset:true}};c.fn.extend({mousewheel:function(i){return i?this.bind("mousewheel",i):this.trigger("mousewheel")},unmousewheel:function(i){return this.unbind("mousewheel",i)}});function l(i){var o=i||window.event,u=h.call(arguments,1),w=0,q=0,p=0,t=0,s=0,r=0;i=c.event.fix(o);i.type="mousewheel";if("detail" in o){p=o.detail*-1}if("wheelDelta" in o){p=o.wheelDelta}if("wheelDeltaY" in o){p=o.wheelDeltaY}if("wheelDeltaX" in o){q=o.wheelDeltaX*-1}if("axis" in o&&o.axis===o.HORIZONTAL_AXIS){q=p*-1;p=0}w=p===0?q:p;if("deltaY" in o){p=o.deltaY*-1;w=p}if("deltaX" in o){q=o.deltaX;if(p===0){w=q*-1}}if(p===0&&q===0){return}if(o.deltaMode===1){var v=c.data(this,"mousewheel-line-height");
w*=v;p*=v;q*=v}else{if(o.deltaMode===2){var n=c.data(this,"mousewheel-page-height");w*=n;p*=n;q*=n}}t=Math.max(Math.abs(p),Math.abs(q));if(!b||t<b){b=t;if(a(o,t)){b/=40}}if(a(o,t)){w/=40;q/=40;p/=40}w=Math[w>=1?"floor":"ceil"](w/b);q=Math[q>=1?"floor":"ceil"](q/b);p=Math[p>=1?"floor":"ceil"](p/b);if(f.settings.normalizeOffset&&this.getBoundingClientRect){var m=this.getBoundingClientRect();s=i.clientX-m.left;r=i.clientY-m.top}i.deltaX=q;i.deltaY=p;i.deltaFactor=b;i.offsetX=s;i.offsetY=r;i.deltaMode=0;u.unshift(i,w,q,p);if(j){clearTimeout(j)}j=setTimeout(g,200);return(c.event.dispatch||c.event.handle).apply(this,u)}function g(){b=null}function a(m,i){return f.settings.adjustOldDeltas&&m.type==="mousewheel"&&i%120===0}}));

