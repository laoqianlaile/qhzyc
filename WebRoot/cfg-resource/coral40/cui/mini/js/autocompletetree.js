(function(b,c){b.component("coral.autocompletetree",b.coral.autocomplete,{requestIndex:0,pending:0,options:{allowPushParent:false,rootNode:false,multiLineLabel:false,radioType:"level",showRootNode:true,multiple:false,triggers:null,excluded:false},_create:function(){this.options.render="tree";this._super()},_filter:function(f,e,d){b(this.menu.element).tree("reload",f);b(this.menu.element).tree("filterNodesByParam",{name:e.term});d(f)},_initData:function(){var e=this;this.menu={};var d=b("<ul>")[0];b(d).uniqueId().addClass("coral-autocomplete-panel coral-front").appendTo(this._appendTo()).tree({showLine:false,showIcon:false,radioType:this.options.radioType,showRootNode:this.options.showRootNode,rootNode:this.options.rootNode,componentCls:"coral-autocomplete-tree",addDiyDom:function(i,h){var k=15;var g=b("#"+h.tId+"_switch"),j=b("#"+h.tId+"_ico");j.before(g);if(h.level>0){var f="<span style='display: inline-block;width:"+(k*h.level)+"px'></span>";g.before(f)}},beforeClick:function(g,f){if(!e.options.allowPushParent&&f.isParent){return false}},onClick:function(f,g,i){var n=i,h=e.previous;if(e.element[0]!==e.document[0].activeElement){e.element.focus();e.previous=h;e._delay(function(){e.previous=h;e.selectedItem=n})}if(false!==e._trigger("beforeNodeClick",f,{item:n,value:e.getValue()})){e.selectedItem=n;e.selectedItems.push(n);var j=e.getValue(),m=e.getText(),k=j==""?[]:j.split(e.options.separator),l=m==""?[]:m.split(e.options.separator);if(e.options.multiple){if(!e.options.allowRepeat&&b.inArray(i.id,k)>-1){return}k.push(i.id);l.push(i.name)}else{k=[i.id];l=[i.name]}e.setText(l.join(e.options.separator));e.setValue(k.join(e.options.separator),true)}e._trigger("onNodeClick",f,{item:n,value:e.getValue()});e.term=e._text();e.close(f)}}).hide();this.menu.element=b(d);if(isNaN(this.options.panelHeight)){b(".coral-autocomplete-panel").css({"max-height":this.options.maxPanelHeight+"px"})}}});var a=b.coral.autocomplete})(jQuery);