/*! jQuery v1.11.3 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.3",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b="length"in a&&a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;

return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function aa(){return!0}function ba(){return!1}function ca(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ca()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===ca()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?aa:ba):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=aa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=aa,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=aa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=ba;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=ba),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function da(a){var b=ea.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var ea="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fa=/ jQuery\d+="(?:null|\d+)"/g,ga=new RegExp("<(?:"+ea+")[\\s/>]","i"),ha=/^\s+/,ia=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ja=/<([\w:]+)/,ka=/<tbody/i,la=/<|&#?\w+;/,ma=/<(?:script|style|link)/i,na=/checked\s*(?:[^=]|=\s*.checked.)/i,oa=/^$|\/(?:java|ecma)script/i,pa=/^true\/(.*)/,qa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ra={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sa=da(y),ta=sa.appendChild(y.createElement("div"));ra.optgroup=ra.option,ra.tbody=ra.tfoot=ra.colgroup=ra.caption=ra.thead,ra.th=ra.td;function ua(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ua(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function va(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wa(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xa(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function ya(a){var b=pa.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function za(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Aa(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Ba(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xa(b).text=a.text,ya(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!ga.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ta.innerHTML=a.outerHTML,ta.removeChild(f=ta.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ua(f),h=ua(a),g=0;null!=(e=h[g]);++g)d[g]&&Ba(e,d[g]);if(b)if(c)for(h=h||ua(a),d=d||ua(f),g=0;null!=(e=h[g]);g++)Aa(e,d[g]);else Aa(a,f);return d=ua(f,"script"),d.length>0&&za(d,!i&&ua(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=da(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(la.test(f)){h=h||o.appendChild(b.createElement("div")),i=(ja.exec(f)||["",""])[1].toLowerCase(),l=ra[i]||ra._default,h.innerHTML=l[1]+f.replace(ia,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&ha.test(f)&&p.push(b.createTextNode(ha.exec(f)[0])),!k.tbody){f="table"!==i||ka.test(f)?"<table>"!==l[1]||ka.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ua(p,"input"),va),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ua(o.appendChild(f),"script"),g&&za(h),c)){e=0;while(f=h[e++])oa.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ua(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&za(ua(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ua(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fa,""):void 0;if(!("string"!=typeof a||ma.test(a)||!k.htmlSerialize&&ga.test(a)||!k.leadingWhitespace&&ha.test(a)||ra[(ja.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ia,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ua(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ua(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&na.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ua(i,"script"),xa),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ua(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,ya),j=0;f>j;j++)d=g[j],oa.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qa,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Ca,Da={};function Ea(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fa(a){var b=y,c=Da[a];return c||(c=Ea(a,b),"none"!==c&&c||(Ca=(Ca||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Ca[0].contentWindow||Ca[0].contentDocument).document,b.write(),b.close(),c=Ea(a,b),Ca.detach()),Da[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Ga=/^margin/,Ha=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ia,Ja,Ka=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ia=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Ha.test(g)&&Ga.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ia=function(a){return a.currentStyle},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Ha.test(g)&&!Ka.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function La(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight),b.removeChild(i)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Ma=/alpha\([^)]*\)/i,Na=/opacity\s*=\s*([^)]*)/,Oa=/^(none|table(?!-c[ea]).+)/,Pa=new RegExp("^("+S+")(.*)$","i"),Qa=new RegExp("^([+-])=("+S+")","i"),Ra={position:"absolute",visibility:"hidden",display:"block"},Sa={letterSpacing:"0",fontWeight:"400"},Ta=["Webkit","O","Moz","ms"];function Ua(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ta.length;while(e--)if(b=Ta[e]+c,b in a)return b;return d}function Va(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fa(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wa(a,b,c){var d=Pa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Ya(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ia(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Ja(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ha.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xa(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ja(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ua(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Qa.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ua(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Ja(a,b,d)),"normal"===f&&b in Sa&&(f=Sa[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Oa.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Ra,function(){return Ya(a,b,d)}):Ya(a,b,d):void 0},set:function(a,c,d){var e=d&&Ia(a);return Wa(a,c,d?Xa(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Na.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Ma,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Ma.test(f)?f.replace(Ma,e):f+" "+e)}}),m.cssHooks.marginRight=La(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Ja,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Ga.test(a)||(m.cssHooks[a+b].set=Wa)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ia(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Va(this,!0)},hide:function(){return Va(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Za(a,b,c,d,e){
return new Za.prototype.init(a,b,c,d,e)}m.Tween=Za,Za.prototype={constructor:Za,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Za.propHooks[this.prop];return a&&a.get?a.get(this):Za.propHooks._default.get(this)},run:function(a){var b,c=Za.propHooks[this.prop];return this.options.duration?this.pos=b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Za.propHooks._default.set(this),this}},Za.prototype.init.prototype=Za.prototype,Za.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Za.propHooks.scrollTop=Za.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Za.prototype.init,m.fx.step={};var $a,_a,ab=/^(?:toggle|show|hide)$/,bb=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cb=/queueHooks$/,db=[ib],eb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bb.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bb.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fb(){return setTimeout(function(){$a=void 0}),$a=m.now()}function gb(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hb(a,b,c){for(var d,e=(eb[b]||[]).concat(eb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ib(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fa(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fa(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ab.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fa(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hb(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function jb(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kb(a,b,c){var d,e,f=0,g=db.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$a||fb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$a||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jb(k,j.opts.specialEasing);g>f;f++)if(d=db[f].call(j,a,k,j.opts))return d;return m.map(k,hb,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kb,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],eb[c]=eb[c]||[],eb[c].unshift(b)},prefilter:function(a,b){b?db.unshift(a):db.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kb(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),m.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($a=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$a=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_a||(_a=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_a),_a=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lb=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lb,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mb,nb,ob=m.expr.attrHandle,pb=/^(?:checked|selected)$/i,qb=k.getSetAttribute,rb=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nb:mb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rb&&qb||!pb.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qb?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nb={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rb&&qb||!pb.test(c)?a.setAttribute(!qb&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ob[b]||m.find.attr;ob[b]=rb&&qb||!pb.test(b)?function(a,b,d){var e,f;return d||(f=ob[b],ob[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,ob[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rb&&qb||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mb&&mb.set(a,b,c)}}),qb||(mb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},ob.id=ob.name=ob.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mb.set},m.attrHooks.contenteditable={set:function(a,b,c){mb.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sb=/^(?:input|select|textarea|button|object)$/i,tb=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sb.test(a.nodeName)||tb.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var ub=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ub," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vb=m.now(),wb=/\?/,xb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yb,zb,Ab=/#.*$/,Bb=/([?&])_=[^&]*/,Cb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Db=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Eb=/^(?:GET|HEAD)$/,Fb=/^\/\//,Gb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hb={},Ib={},Jb="*/".concat("*");try{zb=location.href}catch(Kb){zb=y.createElement("a"),zb.href="",zb=zb.href}yb=Gb.exec(zb.toLowerCase())||[];function Lb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mb(a,b,c,d){var e={},f=a===Ib;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nb(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Ob(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zb,type:"GET",isLocal:Db.test(yb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nb(Nb(a,m.ajaxSettings),b):Nb(m.ajaxSettings,a)},ajaxPrefilter:Lb(Hb),ajaxTransport:Lb(Ib),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cb.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zb)+"").replace(Ab,"").replace(Fb,yb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gb.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yb[1]&&c[2]===yb[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yb[3]||("http:"===yb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mb(Hb,k,b,v),2===t)return v;h=m.event&&k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Eb.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wb.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bb.test(e)?e.replace(Bb,"$1_="+vb++):e+(wb.test(e)?"&":"?")+"_="+vb++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jb+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mb(Ib,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Ob(k,v,c)),u=Pb(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qb=/%20/g,Rb=/\[\]$/,Sb=/\r?\n/g,Tb=/^(?:submit|button|image|reset|file)$/i,Ub=/^(?:input|select|textarea|keygen)/i;function Vb(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rb.test(a)?d(a,e):Vb(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vb(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vb(c,a[c],b,e);return d.join("&").replace(Qb,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Ub.test(this.nodeName)&&!Tb.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sb,"\r\n")}}):{name:b.name,value:c.replace(Sb,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zb()||$b()}:Zb;var Wb=0,Xb={},Yb=m.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Xb)Xb[a](void 0,!0)}),k.cors=!!Yb&&"withCredentials"in Yb,Yb=k.ajax=!!Yb,Yb&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xb[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xb[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zb(){try{return new a.XMLHttpRequest}catch(b){}}function $b(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _b=[],ac=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_b.pop()||m.expando+"_"+vb++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ac.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ac.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ac,"$1"+e):b.jsonp!==!1&&(b.url+=(wb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_b.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bc=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bc)return bc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cc=a.document.documentElement;function dc(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cc;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cc})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=La(k.pixelPosition,function(a,c){return c?(c=Ja(a,b),Ha.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ec=a.jQuery,fc=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fc),b&&a.jQuery===m&&(a.jQuery=ec),m},typeof b===K&&(a.jQuery=a.$=m),m});

/*!
 * jQuery coral Core 4.0.1
 */
var Coral={cc:function(a,b){$.parser.component.push({componentName:a,id:b})}};var validAction=false,timer=false,resizable=true;(function($,undefined){$.coral=$.coral||{};$.coral.openTag=true;$(document).unbind(".clearTips").bind("click.clearTips",function(e){if(validAction){validAction=false;e.stopPropagation();return}$(".coral-validate-state-error").slideUp(100,function(e){$(this).remove()});validAction=false});$(document).unbind("mousewheel").bind("mousewheel",function(e){var validateSuffix=$.validate.validateSuffix();setTimeout(function(){$.each($(".coral-validate-state-error"),function(idx,item){var className=$(item).attr("class");var componentId=className.substring(0,className.indexOf(validateSuffix));var $field=$("#"+componentId).find(".ctrl-init");var $validator=$field.parents(".coral-validate");$(item).remove();$validator.validate("validItem",$field,null,true)})},0)});$.coral.getStyles=function(el){if(window.getComputedStyle){var styles=window.getComputedStyle(el,null);return styles}else{if(document.documentElement.currentStyle){var styles=el.currentStyle;return styles}}};$.coral.getLeft=function(my,of){var left=of.offset().left;if(left+my.outerWidth()>$(window).outerWidth()+$(document).scrollLeft()){left=$(window).outerWidth()+$(document).scrollLeft()-my.outerWidth()}if(left<0){left=0}return left};$.coral.getTop=function(my,of,direction){var top=of.offset().top+of.outerHeight();if(direction=="up"){top=of.offset().top-my.outerHeight()}else{if(top+my.outerHeight()>$(window).outerHeight()+$(document).scrollTop()){top=of.offset().top-my.outerHeight()}if(top<$(document).scrollTop()){top=of.offset().top+of.outerHeight()}}return top};$.coral.findComponent=function(selector,context){var component=[];if(!selector){selector=".ctrl-init"}var init=$(selector,context);var rclass=/[\t\r\n]/g;if(init.length){$.each(init,function(){var name="",className=this.className.replace(rclass," ").split(" "),i=0,l=className.length;for(;i<l;i++){name=$(this).attr("component-role");
if(name=="datepicker"){component.push([{element:$(this),name:name}])}else{component.push($(this)[name]("instance"))}break}})}return component};$.coral.renderComponent=function(context){var component=[];var selector=".coral-no-rendered";if(!context){context="body"}var init=$(selector,context);var rclass=/[\t\r\n]/g;if(init.length){$.each(init,function(){var name="",className=this.className.replace(rclass," ").split(" "),i=0,l=className.length;for(;i<l;i++){name=$(this).attr("component-role");rendered=$(this).prop("rendered");if(!rendered){$(this).removeClass("coral-no-rendered");var ins=$(this)[name]("instance");$(this).addClass("ctrl-init ctrl-init-"+this.componentName);ins._create()}break}})}return component};$.coral.valid={};$.coral.valid=function(element){validAction=true;var count=0,excluded=$.data(element,"excluded"),validElements=element.find($("[class*='coral-validation-']")),errTipsType=null,hasErrorTips=true;if(excluded&&"string"===typeof excluded){excluded=$.map(excluded.split(","),function(item){return $.trim(item)})}if("form"===element[0].tagName.toLowerCase()){errTipsType=element.form("option","errTipsType")}validElements.each(function(){var className=this.className,coralType="",clsArray=className.split(" ");for(var item in clsArray){if(clsArray[item].indexOf("coral-validation-")>=0){coralType=clsArray[item].substr(clsArray[item].indexOf("coral-validation-")+17);break}}if(_isExclud($(this)[coralType]("component"),excluded)){return}if("none"===errTipsType){hasErrorTips=false}if(!_valid($(this),coralType,hasErrorTips)){if("first"===errTipsType){hasErrorTips=false}++count}});if(count>0){return false}else{return true}function _isExclud($component,excluded){if(!excluded){return false}var length=excluded.length;for(var i=0;i<length;i++){if("string"===typeof excluded[i]&&$component.is(excluded[i])){return true}}return false}function _valid($element,coralType,hasErrorTips){if("datepicker"==coralType){return $element[coralType]("valid",$element,hasErrorTips)}if($.inArray(coralType,["textbox","combobox","combotree","radio","radiolist","checkbox","checkboxlist"])>-1){return $element[coralType]("valid",hasErrorTips)
}}};jQuery.support.placeholder=(function(){var i=document.createElement("input");return"placeholder" in i})();var uuid=0,runiqueId=/^coral-id-\d+$/;$.extend($.coral,{version:"4.0.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},zindex:1000});var timer=false;$.fn.extend({scrollParent:function(includeHidden){var position=this.css("position"),excludeStaticParent=position==="absolute",overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);if(excludeStaticParent&&parent.css("position")==="static"){return false}return overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"))}).eq(0);return position==="fixed"||!scrollParent.length?$(this[0].ownerDocument||document):scrollParent},uniqueId:function(){return this.each(function(){if(!this.id){this.id="coral-id-"+(++uuid)}})},removeUniqueId:function(){return this.each(function(){if(runiqueId.test(this.id)){$(this).removeAttr("id")}})},closestComponent:function(selector){return this.each(function(){$(this).closest(".ctrl-init-"+selector)})}});function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false}img=$("img[usemap='#"+mapName+"']")[0];return !!img&&visible(img)}return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden"}).length}$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return !!$.data(elem,dataName)}}):function(elem,i,match){return !!$.data(elem,match[3])
},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}});if(!$("<a>").outerWidth(1).jquery){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0}if(margin){size-=parseFloat($.css(elem,"margin"+this))||0}});return size}$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this)}return this.each(function(){$(this).css(type,reduce(this,size)+"px")})};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size)}return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px")})}})}if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}}if($("<a>").data("a-b","a").removeData("a-b").data("a-b")){$.fn.removeData=(function(removeData){return function(key){if(arguments.length){return removeData.call(this,$.camelCase(key))}else{return removeData.call(this)}}})($.fn.removeData)}$.coral.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.fn.extend({focus:(function(orig){return function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem)}},delay)}):orig.apply(this,arguments)}})($.fn.focus),disableSelection:(function(){var eventType="onselectstart" in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(eventType+".coral-disableSelection",function(event){event.preventDefault()
})}})(),enableSelection:function(){return this.unbind(".coral-disableSelection")},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex)}if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value}}elem=elem.parent()}}return 0}});$.extend($.coral,{plugin:{add:function(module,option,set){var i,proto=$.coral[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]])}},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(!set){return}if(!allowDisconnected&&(!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11)){return}for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args)}}}},toFunction:function(fn){var ns=null,i=0,_fn=null;if($.isFunction(fn)){return fn}if(typeof fn==="string"){if($.isFunction(window[fn])){return window[fn]}try{_fn=eval("("+fn+")");if($.isFunction(_fn)){return _fn}}catch(e){}if(fn.indexOf(".")>0){ns=fn.split(".");_fn=window[ns[0]];if(!_fn){return null}for(i=1;i<ns.length;i++){_fn=_fn[ns[i]];if(!_fn){return null}}}return _fn}return fn}});$.extend({loadJson:function(url,params){var data=null;$.ajax({url:url,type:"get",dataType:"json",async:false,data:params,success:function(rlt){data=rlt},error:function(req,error,errThrow){$.error("function load json error: "+error)}});return data},isCoral:function(elem,type){if(arguments.length<2||!elem){return false}if(elem.jquery){elem=elem.get(0)}return !!$.data(elem,"coral-"+type)}});$.extend($.coral,{contextPathFun:function(){var curWwwPath=window.document.location.href;var pathName=window.document.location.pathname;var pos=curWwwPath.indexOf(pathName);var localhostPaht=curWwwPath.substring(0,pos);var projectName=pathName.substring(0,pathName.substr(1).indexOf("/")+1);
return projectName},adjusted:function(element){var maxHeight,$element=$(element),parent=$element.parent();maxHeight=parent.height();$element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return}maxHeight-=elem.outerHeight(true)});$element.height(Math.max(0,maxHeight-$element.innerHeight()+$element.height())).css("overflow","auto").addClass("overflow-hidden")},beforeDoOverflow:function(element){$(".overflow-auto").removeClass("overflow-auto").addClass("overflow-hidden")},doOverflow:function(element){if(timer!==false){clearTimeout(timer)}timer=setTimeout(function(){$(".overflow-hidden").removeClass("overflow-hidden").addClass("overflow-auto")},999)},refreshAllComponent:function(element){$.coral.beforeDoOverflow();if(typeof(element)=="undefined"){element="body"}$(".ctrl-init-layout:visible, .ctrl-init-accordion:visible, .ctrl-init-tabs:visible, .ctrl-init-grid:visible, .ctrl-init-form:visible, .coral-adjusted:visible, .ctrl-init-toolbar",$(element)).each(function(){if($(this).hasClass("ctrl-init-layout")){$(this).layout("refresh")}if($(this).hasClass("ctrl-init-accordion")){$(this).accordion("refresh")}if($(this).hasClass("ctrl-init-tabs")){$(this).tabs("refresh")}if($(this).hasClass("ctrl-init-grid")){$(this).grid("refresh")}if($(this).hasClass("ctrl-init-toolbar")){$(this).toolbar("refresh")}if($(this).hasClass("ctrl-init-form")){$(this).form("refresh")}if($(this).hasClass("coral-adjusted")){$.coral.adjusted(this)}});$.coral.doOverflow()}});$.coral.contextPath=$.coral.contextPathFun.apply()})(jQuery);(function(a){a.fn.caret=function(h){var g=this[0];var d=g.contentEditable==="true";if(arguments.length==0){if(window.getSelection){if(d){g.focus();var c=window.getSelection().getRangeAt(0),b=c.cloneRange();b.selectNodeContents(g);b.setEnd(c.endContainer,c.endOffset);return b.toString().length}return g.selectionStart}if(document.selection){g.focus();if(d){var c=document.selection.createRange(),b=document.body.createTextRange();
b.moveToElementText(g);b.setEndPoint("EndToEnd",c);return b.text.length}var h=0,e=g.createTextRange(),b=document.selection.createRange().duplicate(),f=b.getBookmark();e.moveToBookmark(f);while(e.moveStart("character",-1)!==0){h++}return h}if(g.selectionStart){return g.selectionStart}return 0}if(h==-1){h=this[d?"text":"val"]().length}if(window.getSelection){if(d){g.focus();window.getSelection().collapse(g.firstChild,h)}else{g.setSelectionRange(h,h)}}else{if(document.body.createTextRange){if(d){var e=document.body.createTextRange();e.moveToElementText(g);e.moveStart("character",h);e.collapse(true);e.select()}else{var e=g.createTextRange();e.move("character",h);e.select()}}}if(!d){g.focus()}return h}})(jQuery);

/*!
 * jQuery coral component 4.0.1
 */
(function(b,d){var a=0,c=Array.prototype.slice;b.cleanData=(function(e){return function(f){var h,j,g;for(g=0;(j=f[g])!=null;g++){try{h=b._data(j,"events");if(h&&h.remove){b(j).triggerHandler("remove")}}catch(k){}}e(f)}})(b.cleanData);b.component=function(e,f,m){var j,k,h,l,g={},i=e.split(".")[0];e=e.split(".")[1];j=i+"-"+e;if(!m){m=f;f=b.Component}b.expr[":"][j.toLowerCase()]=function(n){return !!b.data(n,j)};b[i]=b[i]||{};k=b[i][e];h=b[i][e]=function(n,o){if(!this._createComponent){return new h(n,o)}if(arguments.length){n=b.component.extend({},b.fn[e].defaults||{},this._parseOptions(o),n);this._createComponent(n,o)}};b.extend(h,k,{version:m.version,_proto:b.extend({},m),_childConstructors:[]});l=new f();l.options=b.component.extend({},l.options);b.each(m,function(o,n){if(!b.isFunction(n)){g[o]=n;return}g[o]=(function(){var p=function(){return f.prototype[o].apply(this,arguments)},q=function(r){return f.prototype[o].apply(this,r)};return function(){var t=this._super,r=this._superApply,s;this._super=p;this._superApply=q;s=n.apply(this,arguments);this._super=t;this._superApply=r;return s}})()});h.prototype=b.component.extend(l,{componentEventPrefix:k?(l.componentEventPrefix||e):e},g,{constructor:h,namespace:i,componentName:e,componentFullName:j});if(k){b.each(k._childConstructors,function(o,p){var n=p.prototype;b.component(n.namespace+"."+n.componentName,h,p._proto)});delete k._childConstructors}else{f._childConstructors.push(h)}b.component.bridge(e,h);return h};b.component.extend=function(j){var f=c.call(arguments,1),i=0,e=f.length,g,h;for(;i<e;i++){for(g in f[i]){h=f[i][g];if(f[i].hasOwnProperty(g)&&h!==d){if(b.isPlainObject(h)){j[g]=b.isPlainObject(j[g])?b.component.extend({},j[g],h):b.component.extend({},h)}else{j[g]=h}}}}return j};b.component.bridge=function(f,e){var g=e.prototype.componentFullName||f;b.fn[f]=function(j){var h=typeof j==="string",i=c.call(arguments,1),k=this;j=!h&&i.length?b.component.extend.apply(null,[j].concat(i)):j;
if(h){this.each(function(){var m,l=b.data(this,g);if(!l){return b.error("cannot call methods on "+f+" prior to initialization; attempted to call method '"+j+"'")}if(j==="instance"){k=l;return false}if(!b.isFunction(l[j])||j.charAt(0)==="_"){return b.error("no such method '"+j+"' for "+f+" component instance")}m=l[j].apply(l,i);if(m!==l&&m!==d){k=m&&m.jquery?k.pushStack(m.get()):m;return false}})}else{this.each(function(){var l=b.data(this,g);if(l){l.option(j||{});if(l._init){l._init()}}else{b.data(this,g,new e(j,this))}})}return k}};b.Component=function(){};b.Component._childConstructors=[];b.Component.prototype={componentName:"component",componentEventPrefix:"",defaultElement:"<div>",castProperties:null,options:{disabled:false,authorized:true,onCreate:null},formFieldArray:["textbox","datepicker","checkbox","checkboxlist","radio","radiolist","spinner","autocomplete","textboxlist","autocompletetree","combobox","combotree","combogrid"],_createComponent:function(e,f){var g=this;f=b(f||this.defaultElement||this)[0];this.element=b(f);this.uuid=a++;this.eventNamespace="."+this.componentName+this.uuid;if(this.componentName!=="easyText"){this.element.attr("component-role",this.componentName)}this.options=b.component.extend({},this.options,this._getCreateOptions(),e);if(!this.options.authorized||this.options.authorized==="false"){this.element.remove()}this.bindings=b();this.hoverable=b();this.focusable=b();if(f!==this){b.data(f,this.componentFullName,this);this._on(true,this.element,{remove:function(h){if(h.target===f){this.destroy()}}});this.document=b(f.style?f.ownerDocument:f.document||f);this.window=b(this.document[0].defaultView||this.document[0].parentWindow)}if(typeof(this.options.rendered)=="undefined"){this.options.rendered=true}else{this.options.rendered=false}this.element.prop("rendered",!!this.options.rendered);if(!this.options.rendered){this.element.addClass("coral-no-rendered");return}else{this.element.addClass("ctrl-init ctrl-init-"+this.componentName);this._create()
}if(this.options.componentCls){this.component().addClass(this.options.componentCls)}if(this.options.cls){this.element.addClass(this.options.cls)}if(b.inArray(this.componentName,this.formFieldArray)>-1){this.element.addClass("ctrl-form-element");b.validate.addField(this.element,this.options)}this._trigger("onCreate",null,this._getCreateEventData());this._init()},_parseOptions:function(f){var e=b(f);return b.extend({},b.parser.parseOptions(f,[],this.castProperties))},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,valid:function(){var e={hasTips:false,element:this.element};return(b.validate.validateField(null,e).length>0?false:true)},isValid:function(){},destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.componentName).removeData(this.componentFullName).removeData(b.camelCase(this.componentFullName));this.element.removeClass("ctrl-form-element ctrl-init ctrl-init-"+this.componentName);this.component().unbind(this.eventNamespace).removeAttr("aria-disabled").removeAttr("component-role").removeClass(this.componentFullName+"-disabled coral-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("coral-state-hover");this.focusable.removeClass("coral-state-focus")},_destroy:b.noop,component:function(){return this.element},option:function(h,j){var e=h,k,g,f;if(arguments.length===0){return b.component.extend({},this.options)}if(typeof h==="string"){e={};k=h.split(".");h=k.shift();if(k.length){g=e[h]=b.component.extend({},this.options[h]);for(f=0;f<k.length-1;f++){g[k[f]]=g[k[f]]||{};g=g[k[f]]}h=k.pop();if(arguments.length===1){return g[h]===d?null:g[h]}g[h]=j}else{if(arguments.length===1){return this.options[h]===d?null:this.options[h]}e[h]=j}}this._setOptions(e);return this},_setOptions:function(e){var f;for(f in e){this._setOption(f,e[f]);this.element.trigger("onOptionChange",{key:f,value:e[f]})}return this},_setOption:function(e,f){this.options[e]=f;if(e==="disabled"){this.component().toggleClass(this.componentFullName+"-disabled coral-state-disabled",!!f).attr("aria-disabled",f);
if(f){this.hoverable.removeClass("coral-state-hover");this.focusable.removeClass("coral-state-focus")}}return this},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},show:function(){this.component().removeClass("coral-state-hidden").show()},hide:function(){this.component().addClass("coral-state-hidden").hide()},_pinyinEngine:function(){return new pinyinEngine()},_pinyinSetCache:function(h,f,g){for(var e in g){h.setCache([g[e][f]],g[e])}return h},_pinyinSearch:function(g,f,h){var e=[];g.search(f,function(i){e.push(i)});h(e)},_on:function(h,g,f){var i,e=this;if(typeof h!=="boolean"){f=g;g=h;h=false}if(!f){f=g;g=this.element;i=this.component()}else{g=i=b(g);this.bindings=this.bindings.add(g)}b.each(f,function(o,n){function l(){if(!h&&(e.options.disabled===true||b(this).hasClass("coral-state-disabled"))){return}return(typeof n==="string"?e[n]:n).apply(e,arguments)}if(typeof n!=="string"){l.guid=n.guid=n.guid||l.guid||b.guid++}var m=o.match(/^([\w:-]*)\s*(.*)$/),k=m[1]+e.eventNamespace,j=m[2];if(j){i.delegate(j,k,l)}else{g.bind(k,l)}})},_off:function(f,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;f.unbind(e).undelegate(e)},_delay:function(h,g){function f(){return(typeof h==="string"?e[h]:h).apply(e,arguments)}var e=this;return setTimeout(f,g||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e);this._on(e,{mouseenter:function(f){b(f.currentTarget).addClass("coral-state-hover")},mouseleave:function(f){b(f.currentTarget).removeClass("coral-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e);this._on(e,{focusin:function(f){b(f.currentTarget).addClass("coral-state-focus")},focusout:function(f){b(f.currentTarget).removeClass("coral-state-focus")}})},_trigger:function(f,h,i){var k,j,e=b.isFunction(f)?f:b.coral.toFunction(this.options[f]),g={};i=i||{};h=b.Event(h);h.type=(f===this.componentEventPrefix?f:this.componentEventPrefix+f).toLowerCase();
h.target=this.element[0];j=h.originalEvent;if(j){for(k in j){if(!(k in h)){h[k]=j[k]}}}this.element.trigger(h,i);h.data=h.data||{};b.extend(h.data,this.options.dataCustom);return !(b.isFunction(e)&&e.apply(this.element[0],[h].concat(i))===false||h.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(f,e){b.Component.prototype["_"+f]=function(i,h,k){if(typeof h==="string"){h={effect:h}}var j,g=!h?f:h===true||typeof h==="number"?e:h.effect||e;h=h||{};if(typeof h==="number"){h={duration:h}}j=!b.isEmptyObject(h);h.complete=k;if(h.delay){i.delay(h.delay)}if(j&&b.effects&&b.effects.effect[g]){i[f](h)}else{if(g!==f&&i[g]){i[g](h.duration,h.easing,k)}else{i.queue(function(l){b(this)[f]();if(k){k.call(i[0])}l()})}}}})})(jQuery);

(function(b){b.parser={auto:true,doneArr:[],component:[],onComplete:function(c){},onInit:function(c){},plugins:["tabs","layout","grid","panel","button","menubutton","treebutton","splitbutton","accordion","textbox","autocomplete","uploader","radio","radiolist","checkbox","checkboxlist","spinner","slider","combo","combobox","combotree","combogrid","datepicker","form","picgrid","tree","toolbar","progressbar","menu","menubar","contextmenu","slidemenu","tieredmenu","navigatemenu","dialog","subfield"],parse:function(e){b.parser.onInit.call(b.parser,e);var h=[];b.each(b.parser.component,function(l){var n=b.parser.component.shift();if(n){var m=b("#"+n.id);if(m.length){if(m[n.componentName]){m[n.componentName]()}if(n.id&&typeof(n.id)=="string"){var k=b("#"+n.id+"_s");if(k.length>0){k.remove()}}}}});for(var d=0;d<b.parser.plugins.length;d++){var c=b.parser.plugins[d];var f=b(".coralui-"+c,e);f.removeClass("coralui-"+c);if(f.length){if(f[c]){f[c]()}else{h.push({name:c,jq:f})}}}if(h.length){var g=[];for(var d=0;d<h.length;d++){g.push(h[d].name)}for(var d=0;d<h.length;d++){var c=h[d].name;var j=h[d].jq;j[c]()}b.parser.onComplete.call(b.parser,e)}else{b.parser.onComplete.call(b.parser,e)}b.each(b.parser.doneArr,function(l){var k=b.parser.doneArr.shift();if(b.isFunction(k)){k.call(b.parser,e)}});b.coral.refreshAllComponent(e);b.parser.onComplete.call(b.parser,e)},parseOptions:function(h,j,e){var n=b(h),p=b.trim(n.attr("data-options")),g=null,m=null,c=null,f=0,d=null,l=null,k=null,o={};if(p){g=p.substring(0,1);m=p.substring(p.length-1,1);if(g!="{"){p="{"+p}if(m!="}"){p=p+"}"}o=(new Function("return "+p))()}if(j){c={};for(var f=0;f<j.length;f++){l=j[f];if(typeof l=="string"){if(l=="width"||l=="height"||l=="left"||l=="top"){c[l]=parseInt(h.style[l])||undefined}else{c[l]=n.attr(l)}}else{for(d in l){k=l[d];if(k=="boolean"){c[d]=n.attr(d)?(n.attr(d)=="true"):undefined}else{if(k=="number"){c[d]=n.attr(d)=="0"?0:parseFloat(n.attr(d))||undefined}}}}}b.extend(o,c);c=null}if(e instanceof Array){for(f=0;
f<e.length;f++){d=e[f];a(o,d.split("."))}}return o}};b(function(){if(!window.easyloader&&b.parser.auto){b.parser.parse()}});function a(g,d){var c=d.shift();if(d.length==0){if(g&&g[c]&&typeof g[c]==="string"){try{g[c]=(new Function("return "+g[c]))()}catch(f){}}}else{a(g[c],d)}}b.parseDone=function(c){b.parser.doneArr.push(c)}})(jQuery);

(function($,undefined){var uuid=0,validateSuffix="coralForm",validatePrefix="validate";$.validate={options:{onStatus:"onstatus",errorMode:1,errMsgPosition:"leftBottom",triggers:{textbox:["onchange","onblur"],radio:["onchange","onblur"],checkbox:["onchange","onblur"],radiolist:["onchange","onblur"],checkboxlist:["onchange","onblur"],combobox:["onchange","onblur"],combotree:["onchange","onblur"],combogrid:["onchange","onblur"],datepicker:["onchange","onblur"],autocomplete:["onchange","onblur"],spinner:["onchange","onblur"],textboxlist:["onchange","onblur"],autocompletetree:["onchange","onblur"]}},validateSuffix:function(){return validateSuffix},_validate:function(json){var validType=json.validType,validValue=json.validValue,elementValue=json.elementValue,optionValue=json.optionValue,field=json.field,requiredMsg=json.requiredMsg,errMsg=json.errMsg;if(typeof validValue=="undefined"){return""}switch(validType){case"required":return this._checkRequired(validValue,elementValue,requiredMsg);case"minlength":return this._checkMinlength(validValue,elementValue,errMsg);case"maxlength":return this._checkMaxlength(validValue,elementValue,errMsg);case"pattern":return this._checkPattern(validValue,elementValue,errMsg);case"validType":return this._checkValidType(validValue,elementValue,optionValue,errMsg);case"valid":return this._checkValid(validValue,elementValue,errMsg,field);default:return""}},getFieldType:function(el){return $(el).attr("component-role")},validTypeNames:["required","minlength","maxlength","pattern","validType","valid"],validTypeOptions:{maxlength:{restrictInput:false},number:{restrictInput:false},naturalnumber:{restrictInput:false},integer:{restrictInput:false},"float":{restrictInput:false},zh:{restrictInput:false},letter:{restrictInput:false},uppercase:{restrictInput:false},lowercase:{restrictInput:false},zhOrNumOrLett:{restrictInput:false},ip:{restrictInput:false},port:{restrictInput:false},url:{restrictInput:false},email:{restrictInput:false},mobile:{restrictInput:false},idno:{restrictInput:false},zipcode:{restrictInput:false}},validateField:function(event,data){validAction=true;
data.validoptions=data.validoptions||{};var el=data.element,type=$.validate.getFieldType(el),component=data.notComponent?data.component:el[type]("component"),options=data.notComponent?data.validoptions:el[type]("option"),val=null,hasTips=data.hasTips,errorArrayOriginal=[],errorResults=[],errorMode=options.errorMode||data.validoptions.errorMode||$.validate.options.errorMode,errMsgPosition=options.errMsgPosition||data.validoptions.errMsgPosition||$.validate.options.errMsgPosition,readonly=options.readonly,disabled=options.disabled,isLabel=options.isLabel;if(!component.is(":visible")){hasTips=false}hasTips=false;if("hidden"==el.attr("type")){el.prop("isError",false);return errorResults}if(isLabel||disabled){el.prop("isError",false);return errorResults}if(data.notComponent){val=data.value}else{if("radio"===type||"checkbox"===type){val=el.prop("checked")?el[type]("getValue"):""}else{if("datepicker"===type){val=el[type]("option","value")}else{try{val=el[type]("getValue")}catch(e){$.error("cannot call methods on "+type+" , please achieve the getValue method !")}}}}for(var i=0;i<this.validTypeNames.length;i++){var vt=this.validTypeNames[i],vo={optionValue:options.validType,requiredMsg:options.requiredMsg,elementValue:val,field:el,errMsg:options.errMsg,validValue:options[vt],validType:vt};if(options[vt]&&(vt=="required")?true:(val!="")){var error=$.validate._validate(vo);error==""||errorResults.push(error)}}if(errorResults.length>0){$.validate.hideErrors(component);if(!data.notComponent){if(errorMode==0){$(component).attr("data-errors",errorResults.toString())}else{var paddingRight=component.css("padding-right");component.append("<span class='icon icon-info coral-errorIcon' style='right:"+paddingRight+"' data-errors = '"+errorResults.toString()+"' ></span>");component.addClass("hasErrorIcon ")}}component.addClass("coral-validate-error ");var eventData=errorResults;$.validate._apply(options.onValidError,el,event,eventData);$(el).prop("isError",true);return errorResults}else{$.validate._apply(options.onValidSuccess,el,event,{});
component.removeClass("coral-validate-error");$.validate.hideErrors(component);$(el).prop("isError",false);$(component).removeAttr("data-errors");return errorResults}},_apply:function(callback,el,event,data){var fun=$.coral.toFunction(callback);if($.isFunction(fun)){return fun.apply(el,[event,data])}},_checkValid:function(validValue,elementValue,errMsg,field){var errMsgResult="";if(!!errMsg){errMsgResult=errMsg}var validResult=null;if(validValue){validResult=$.coral.toFunction(validValue).apply(field&&field[0],[{value:elementValue}]);if(typeof validResult=="object"&&typeof validResult.isValid=="boolean"){if(validResult.isValid){return""}else{if(!!validResult.errMsg){return validResult.errMsg}return errMsgResult==""?validResult.errMsg:errMsgResult}}if(typeof validResult=="boolean"){if(validResult){return errMsgResult}else{return errMsgResult}}}return""},_checkRequired:function(validValue,elementValue,requiredMsg){var errMsgResult="* ";if(requiredMsg){errMsgResult=requiredMsg}if(typeof validValue=="boolean"&&validValue&&(""==$.trim(elementValue))){return errMsgResult}else{return""}},_checkMinlength:function(validValue,elementValue,errMsg){var errMsgResult=""+validValue+"";if(typeof errMsg!="undefined"&&errMsg!=null&&errMsg!=""){errMsgResult=errMsg}if(validValue&&this._isPositiveInteger(validValue)){var minLength=parseInt(validValue),nowLength=this._getByteLength(elementValue);if(nowLength<minLength){return errMsgResult}else{return""}}},_checkMaxlength:function(validValue,elementValue,errMsg){var errMsgResult=""+validValue+"";if(typeof errMsg!="undefined"&&errMsg!=null&&errMsg!=""){errMsgResult=errMsg}if(validValue&&this._isPositiveInteger(validValue)){var maxLength=parseInt(validValue),nowLength=this._getByteLength(elementValue);if(nowLength>maxLength){return errMsgResult}else{return""}}},_checkPattern:function(validValue,elementValue,errMsg){var errMsgResult="";if(typeof errMsg!="undefined"&&errMsg!=null&&errMsg!=""){errMsgResult=errMsg}if(validValue){var reg=eval(validValue.replace(/\/\//g,"/"));
if(!reg.test($.trim(elementValue))){return errMsgResult}else{return""}}else{return""}},_checkValidType:function(validValue,elementValue,optionValue,errMsg){var errMsgResult="";if(typeof errMsg!="undefined"&&errMsg!=null&&errMsg!=""){errMsgResult=errMsg}var val=elementValue;switch(validValue){case"number":if(""==errMsgResult){errMsgResult=""}return this._isNumber(val)?"":errMsgResult;case"naturalnumber":if(""==errMsgResult){errMsgResult=""}return this._isNaturalnumber(val)?"":errMsgResult;case"integer":if(""==errMsgResult){errMsgResult=""}return this._isInteger(val)?"":errMsgResult;case"float":if(""==errMsgResult){errMsgResult=""}return this._isFloat(val)?"":errMsgResult;case"zh":if(""==errMsgResult){errMsgResult=""}return this._isZh(val)?"":errMsgResult;case"letter":if(""==errMsgResult){errMsgResult=""}return this._isLetter(val)?"":errMsgResult;case"uppercase":if(""==errMsgResult){errMsgResult=""}return this._isUppercase(val)?"":errMsgResult;case"lowercase":if(""==errMsgResult){errMsgResult=""}return this._isLowercase(val)?"":errMsgResult;case"zhOrNumOrLett":if(""==errMsgResult){errMsgResult=""}return this._isZhOrNumOrLett(val)?"":errMsgResult;case"ip":if(""==errMsgResult){errMsgResult="IP"}return this._isIp(val)?"":errMsgResult;case"port":if(""==errMsgResult){errMsgResult="IP"}return this._isPort(val)?"":errMsgResult;case"url":if(""==errMsgResult){errMsgResult=""}return this._isUrl(val)?"":errMsgResult;case"email":if(""==errMsgResult){errMsgResult=""}return this._isEmail(val)?"":errMsgResult;case"mobile":if(""==errMsgResult){errMsgResult=""}return this._isMobile(val)?"":errMsgResult;case"idno":if(""==errMsgResult){errMsgResult=""}return this._isIDNo(val)?"":errMsgResult;case"zipcode":if(""==errMsgResult){errMsgResult=""}return this._isZipcode(val)?"":errMsgResult;default:return""}},_isNumber:function(val){if(!isNaN(val)){return true
}else{return false}},_isNaturalnumber:function(val){if(/^[0-9]+$/.test(val)){return true}else{return false}},_isInteger:function(val){if(/^(\+|-)?\d+$/.test(val)){return true}else{return false}},_isFloat:function(val){if(/^(\+|-)?\d+($|\.\d+$)/.test(val)){return true}else{return false}},_isZh:function(val){if(/^[\u4e00-\u9fa5]+$/.test(val)){return true}else{return false}},_isLetter:function(val){if(/^[A-Za-z]+$/.test(val)){return true}else{return false}},_isUppercase:function(val){if(/^[A-Z]+$/.test(val)){return true}else{return false}},_isLowercase:function(val){if(/^[a-z]+$/.test(val)){return true}else{return false}},_isZhOrNumOrLett:function(val){if(/^[0-9a-zA-Z\u4e00-\u9fa5]+$/.test(val)){return true}else{return false}},_isIp:function(val){if(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.test(val)){if(RegExp.$1<256&&RegExp.$2<256&&RegExp.$3<256&&RegExp.$4<256){return true}}else{return false}},_isPort:function(val){if(this._isNaturalnumber(val)&&val<65536){return true}else{return false}},_isUrl:function(val){if(/^http:\/\/(www\.)?.+.?$/.test(val)){return true}else{return false}},_isEmail:function(val){if(/^([-_A-Za-z0-9\.]+)@([_A-Za-z0-9]+\.)+[A-Za-z0-9]{2,3}$/.test(val)){return true}else{return false}},_isMobile:function(val){if(/^0?(13[0-9]|15[012356789]|18[0-9]|14[57])[0-9]{8}$/.test(val)){return true}else{return false}},_isIDNo:function(val){var aCity={11:"",12:"",13:"",14:"",15:"",21:"",22:"",23:"",31:"",32:"",33:"",34:"",35:"",36:"",37:"",41:"",42:"",43:"",44:"",45:"",46:"",50:"",51:"",52:"",53:"",54:"",61:"",62:"",63:"",64:"",65:"",71:"",81:"",82:"",91:""};var iSum=0;var info="";var strIDno=val;var idCardLength=strIDno.length;if(!/^\d{17}(\d|x)$/i.test(strIDno)&&!/^\d{15}$/i.test(strIDno)){return false}strIDno=strIDno.replace(/x$/i,"a");if(aCity[parseInt(strIDno.substr(0,2))]==null){return false}if(idCardLength==18){var sBirthday=strIDno.substr(6,4)+"-"+Number(strIDno.substr(10,2))+"-"+Number(strIDno.substr(12,2));
var d=new Date(sBirthday.replace(/-/g,"/"));if(sBirthday!=(d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate())){return false}for(var i=17;i>=0;i--){iSum+=(Math.pow(2,i)%11)*parseInt(strIDno.charAt(17-i),11)}if(iSum%11!=1){return false}}else{if(idCardLength==15){sBirthday="19"+strIDno.substr(6,2)+"-"+Number(strIDno.substr(8,2))+"-"+Number(strIDno.substr(10,2));var d=new Date(sBirthday.replace(/-/g,"/"));var dd=d.getFullYear().toString()+"-"+(d.getMonth()+1)+"-"+d.getDate();if(sBirthday!=dd){return false}}}return true},_isZipcode:function(val){if(this._isNaturalnumber(val)&&val.length==6){return true}else{return false}},_isDate:function(val,format){var date=$.trim(val);var year,month,day,datePat,matchArray;if(/^(y{4})(-|\/)(M{1,2})\2(d{1,2})$/.test(format)){datePat=/^(\d{4})(-|\/)(\d{1,2})\2(\d{1,2})$/}else{if(/^(y{4})()(M{1,2})()(d{1,2})()$/.test(format)){datePat=/^(\d{4})(\d{1,2})(\d{1,2})$/}else{if(format=="yyyyMMdd"){datePat=/^(\d{4})(\d{2})(\d{2})$/}else{return false}}}matchArray=date.match(datePat);if(matchArray==null){return false}if(/^(y{4})(-|\/)(M{1,2})\2(d{1,2})$/.test(format)){year=matchArray[1];month=matchArray[3];day=matchArray[4]}else{year=matchArray[1];month=matchArray[2];day=matchArray[3]}if(month<1||month>12){return false}if(day<1||day>31){return false}if((month==4||month==6||month==9||month==11)&&day==31){return false}if(month==2){var isleap=(year%4==0&&(year%100!=0||year%400==0));if(day>29){return false}if((day==29)&&(!isleap)){return false}}return true},showRequiredMark:function(ui){var $component=ui.component;$component.find("span.coral-validate-required:first").remove();$component.append("<span class='coral-validate-required'>*</span>")},hideRequiredMark:function(ui){var $component=ui.component;$component.find("span.coral-validate-required:first").remove()},showErrors:function(element,errorArray,tipsPosition,noDelay){var $component=element;if(element.hasClass("coral-hasLabel")||element.hasClass("coral-validate-starBefore")){if(element.find(".coral-radio-label").length){element=element.find(".coral-radio-label")
}else{if(element.find(".coral-checkbox-label").length){element=element.find(".coral-checkbox-label")}else{if(element.find(".coral-label").next().length){element=element.find(".coral-label").next()}else{if(element.find(".coral-validate-required").next().length){element=element.find(".coral-validate-required").next()}}}}}var hasForm=true,$form=$(element).parents("form"),container="tooltip",errorContent=errorArray.join("<br />"),$message,position,$element=$(element);var id=$element.attr("id"),$message=$("."+id+validateSuffix);var errorArrowClass="coral-validate-errorArrow-top";if($(element).parents("form").length!=0){container=$($form).form("option","container")}switch(tipsPosition){case"leftTop":errorArrowClass="coral-validate-errorArrow-top";break;case"leftBottom":errorArrowClass="coral-validate-errorArrow-bottom";break;case"rightTop":errorArrowClass="coral-validate-errorArrow-top";break;case"rightBottom":errorArrowClass="coral-validate-errorArrow-bottom";break;case"right":errorArrowClass="coral-validate-errorArrow-right";break;default:break}var arrow='<div class="'+errorArrowClass+'"></div>';if(id==null){id=$element.attr("id",validatePrefix+uuid++).attr("id")}if($("."+id+validateSuffix).length>0){$("."+id+validateSuffix).find(".error-content").html(errorContent)}else{$message=$("<div class='"+id+validateSuffix+" coral-validate-state-error'><div class='error-content'>"+errorContent+"</div>"+arrow+"</div>");var formContext=$(element).parents("form").attr("context");if($(formContext).length>0){$(formContext).append($message)}else{$(document.body).append($message)}position=$element.position()}var my="left top",at="right-20 top-"+($message.outerHeight()+8);switch(tipsPosition){case"leftTop":my="right top";at="left+"+$message.outerWidth()+" top-"+($message.outerHeight()+8);break;case"leftBottom":my="right bottom";at="left+"+$message.outerWidth()+" bottom+"+($message.outerHeight()+8);break;case"rightTop":my="left top";at="right-20 top-"+($message.outerHeight()+8);break;case"rightBottom":my="left bottom";
at="right-20 bottom+"+($message.outerHeight()+8);break;case"right":my="left middle";at="right+15 middle";break;default:break}$message.position({my:my,at:at,of:$element});$component.addClass("coral-validate-error");var that=this;setTimeout(function(){},2000)},clear:function(){$(".coral-validate-state-error").remove();$(".coral-errorIcon").remove();$(".coral-validate-error").removeClass("coral-validate-error")},hideErrors:function(element){var $element=$(element);var id=$element.attr("id");$("."+id+validateSuffix).remove();$(".coral-errorIcon",$element).remove();$element.removeClass("coral-validate-error hasErrorIcon ")},hideErrorsTip:function(element){var $element=$(element);var id=$element.attr("id");$("."+id+validateSuffix).remove()},_showTooltip:function(element,tips){var $element=$(element);var $message=$("<div class='coral-validate-tooltip'>"+tips+"</div>");$(document.body).after($message);var position=$element.position();$message.position({my:"left top",at:"right+20 top+"+($(element).height()/2-$message.outerHeight()/2),of:$element})},_hideTooltip:function(element){var $element=$(element);$(".coral-validate-tooltip").remove()},_getSubString:function(str,n){var r=/[^\x00-\xff]/g;if(str.replace(r,"mm").length<=n){return str}var m=Math.floor(n/2);for(var i=m;i<str.length;i++){if(str.substr(0,i).replace(r,"mm").length>=n){return str.substr(0,i)}}return str},_getByteLength:function(str){var length=0;for(var i=0;i<str.length;i++){var item=str.charAt(i);if(item.match(/[^\x00-\xff]/ig)!=null){length+=2}else{length+=1}}return length},_isPositiveInteger:function(str){return parseInt(str).toString()==="NaN"?false:(parseInt(str)>0?true:false)},addField:function(fields,options){var that=this;fields.each(function(index,field){var $field=$(field),form=$field.closest(".coral-form-default"),formOptions=form.length>0?$.extend({},$.validate.options,form.form("option")):$.extend({},$.validate.options);if($field.closest(".coral-form-default").length==0&&$field.closest("form").length>0){return
}var type=$.validate.getFieldType($field),component=$field[type]("component"),opts=$field[type]("option"),required=$field[type]("option","required"),name=$field[type]("option","name"),showStar=$field[type]("option","showStar"),starBefore=$field[type]("option","starBefore"),triggers=$field[type]("option","triggers")||formOptions.triggers[type]||$.validate.options.triggers[type];if(!$.data($field[0],"inited")){$.data($field[0],"inited",true)}var events=$.map(triggers,function(item){return type+item+".field"}).join(" ");$field.off(".field").on(events,function(event,ui){$.validate.validItem($(this),event,true)});$field.off(".restrictInput").on(type+"onkeydown.restrictInput",function(event,ui){return $.validate.restrictInput($(this),event)});$field.off(".restrictInputup").on(type+"onkeyup.restrictInputup",function(event,ui){return $.validate.restrictInput($(this),event)});$field.off(".validate").on(type+formOptions.onStatus+".validate",function(event,ui){$.validate.validItem($(this),event,ui.hasTips)});$field.off(".prop").on("onOptionChange.prop",function(event,ui){$.validate._onFieldOptionChange($(this),event,ui)});if(typeof required==="boolean"&&required){$field.trigger("onOptionChange",{key:"required",value:required})}})},restrictInput:function(el,event,hasTips){var type=$(el).attr("component-role"),opts=$(el)[type]("option"),result=null;$.each($.validate.validTypeNames,function(i,d){var opt=opts[d],arg1=$.validate.validTypeOptions[d],arg2=$.validate.validTypeOptions[opt],argKey=null,argValue=null;if(opt&&arg1){argKey=d;argValue=arg1}else{if(opt&&arg2){argKey=opt;argValue=arg2}}if(argKey&&argValue){if(argValue.restrictInput){result=$.validate.forbiddenInput(argKey,event,el)}}});return result},forbiddenInput:function(arg,event,el){var type=$(el).attr("component-role"),opts=$(el)[type]("option"),result=null;var val=el.val();switch(arg){case"maxlength":if((!event.ctrlKey&&-1==$.inArray(event.keyCode,[8,46,9,37,39,35,36]))&&(""!=$.validate._checkMaxlength(opts[arg],val+String.fromCharCode(event.keyCode)))){var length=0,string=[];
for(var i=0;i<val.length;i++){var item=val.charAt(i);if(item.match(/[^\x00-\xff]/ig)!=null){length+=2;if(length<=opts[arg]){string.push(item)}}else{length+=1;if(length<=opts[arg]){string.push(item)}}}el.val(string.join(""));result=false}break;case"number":if((!event.ctrlKey&&-1==$.inArray(event.keyCode,[8,46,9,37,39,35,36]))&&(event.keyCode<48||(event.keyCode>57&&event.keyCode<96)||event.keyCode>105)){result=false}break;default:break}return result},_onFieldOptionChange:function($field,e,ui){var type=$field.attr("component-role");if(ui.key=="required"){var form=$field.closest(".ctrl-init-form"),formOptions;if(form.length>0){formOptions=form.form("option")}var showRequiredMark=$field[type]("option","showRequiredMark")||(formOptions&&formOptions.showRequiredMark)||$.validate.showRequiredMark;var hideRequiredMark=$field[type]("option","hideRequiredMark")||(formOptions&&formOptions.hideRequiredMark)||$.validate.hideRequiredMark;showRequiredMark=$.coral.toFunction(showRequiredMark);hideRequiredMark=$.coral.toFunction(hideRequiredMark);if(ui.value==true){showRequiredMark&&showRequiredMark.apply($field[0],[{component:$field[type]("component")}])}else{hideRequiredMark&&hideRequiredMark.apply($field[0],[{component:$field[type]("component")}])}}},validItem:function(el,event,hasTips){var options=this.options;var data={validoptions:options,hasTips:hasTips,element:el};var type=$(el).attr("component-role"),opts=$(el)[type]("option"),excluded=opts.excluded;if(excluded){return}$.validate.validateField(event,data)},setExcluded:function(isSet,context){var fields=$.coral.findComponent(".ctrl-form-element",$(context)),i=0,l=fields.length;for(i;i<l;i++){var c=fields[i];if(c instanceof Array){$(c[0].element)[c[0].name]("option","excluded",isSet);$(c[0].element)[c[0].name]("component").removeClass("coral-validate-error");$(c[0].element)[c[0].name]("component").removeAttr("data-errors");$(".coral-errorIcon",$(c[0].element)[c[0].name]("component")).remove()}else{c._setOption("excluded",isSet);
c.component().removeClass("coral-validate-error");c.component().removeAttr("data-errors");$(".coral-errorIcon",c.component()).remove()}$(fields).prop("isError",false)}}};$.component("coral.validate",{version:$.coral.version,options:{onStatus:"onstatus",showStar:true,errMessages:{required:"* ",minLength:"{0}",maxLength:"{0}",pattern:"",validType:{number:""},valid:""},fields:{},errMsgPosition:"leftBottom",excluded:[":disabled",":hidden",":not(:visible)"]},_isExclud:function($field,excluded){if(!excluded){return false}var length=excluded.length;var type=$field.attr("component-role"),opts=$field[type]("option"),isExcluded=opts.excluded,$component=$field[type]("component");for(var i=0;i<length;i++){if(("string"===typeof excluded[i]&&$component.is(excluded[i]))||isExcluded){return true}}return false},_create:function(){var that=this;this.element.addClass("coral-validate ctrl-init ctrl-init-validate");that._initField();this.element.addClass("inited-validate")},_destroy:function(){this.element.removeClass("coral-validate ctrl-init ctrl-init-validate");this._super()},_setOption:function(key,value){if(key=="id"||key=="name"){return}this._super(key,value);return},removeField:function(){},updateField:function(){},_initField:function(){var fields=$(this.element).find(".ctrl-form-element");$.validate.addField(fields,this.options)},valid:function(el){if(!el){el=this.element}var that=this,fields=null,errCount=0,excluded=this.options.excluded,errTipsType=null,hasTips=true;if(excluded&&"string"===typeof excluded){excluded=$.map(excluded.split(","),function(item){return $.trim(item)})}if(el.is($("[class*='coral-validation-']"))){fields=$(el)}else{fields=$(el).parent().find($("[class*='coral-validation-']"))}if("form"===$(el)[0].tagName.toLowerCase()){errTipsType=$(el).form("option","errTipsType")}errTipsType="none";fields.each(function(index){var $field=$(this),type=$.validate.getFieldType($field);if(that._isExclud($field,excluded)){return}if("none"===errTipsType){hasTips=false}$field.trigger(type+that.options.onStatus+".validate",{hasTips:hasTips});
if($field.prop("isError")){if("first"===errTipsType){hasTips=false}if(errCount==0){$field[type]("focus")}++errCount}});return(errCount>0?false:true)}})})(jQuery);

/*!
 *  4.0
 *
 * JS:
 *	jquery.coral.component.js
 */
(function(b,c){var a=false;b(document).mouseup(function(){a=false});b.component("coral.mouse",{version:"4.0.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.componentName,function(e){return d._mouseDown(e)}).bind("click."+this.componentName,function(e){if(true===b.data(e.target,d.componentName+".preventClickEvent")){b.removeData(e.target,d.componentName+".preventClickEvent");e.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.componentName);if(this._mouseMoveDelegate){this.document.unbind("mousemove."+this.componentName,this._mouseMoveDelegate).unbind("mouseup."+this.componentName,this._mouseUpDelegate)}},_mouseDown:function(f){if(a){return}(this._mouseStarted&&this._mouseUp(f));this._mouseDownEvent=f;var e=this,g=(f.which===1),d=(typeof this.options.cancel==="string"&&f.target.nodeName?b(f.target).closest(this.options.cancel).length:false);if(!g||d||!this._mouseCapture(f)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=(this._mouseStart(f)!==false);if(!this._mouseStarted){f.preventDefault();return true}}if(true===b.data(f.target,this.componentName+".preventClickEvent")){b.removeData(f.target,this.componentName+".preventClickEvent")}this._mouseMoveDelegate=function(h){return e._mouseMove(h)};this._mouseUpDelegate=function(h){return e._mouseUp(h)};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);f.preventDefault();a=true;return true},_mouseMove:function(d){if(b.coral.ie&&(!document.documentMode||document.documentMode<9)&&!d.button){return this._mouseUp(d)}else{if(!d.which){return this._mouseUp(d)
}}if(this._mouseStarted){this._mouseDrag(d);return d.preventDefault()}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,d)!==false);(this._mouseStarted?this._mouseDrag(d):this._mouseUp(d))}return !this._mouseStarted},_mouseUp:function(d){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(d.target===this._mouseDownEvent.target){b.data(d.target,this.componentName+".preventClickEvent",true)}this._mouseStop(d)}a=false;return false},_mouseDistanceMet:function(d){return(Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance)},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);

/*!
 * jQuery coral Sortable 4.0.1
 *
 * Depends:
 *	jquery.coral.core.js
 *	jquery.coral.component.js
 *	jquery.coral.mouse.js
 */
(function(b,d){function a(f,e,g){return(f>=e)&&(f<(e+g))}function c(e){return(/left|right/).test(e.css("float"))||(/inline|table-cell/).test(e.css("display"))}b.component("coral.sortable",b.coral.mouse,{version:"4.0.1",componentEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={};this.element.addClass("coral-sortable");this.refresh();this.floating=this.items.length?e.axis==="x"||c(this.items[0].item):false;this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(e,f){this._super(e,f);if(e==="handle"){this._setHandleClassName()}},_setHandleClassName:function(){this.element.find(".coral-sortable-handle").removeClass("coral-sortable-handle");b.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("coral-sortable-handle")})},_destroy:function(){this.element.removeClass("coral-sortable coral-sortable-disabled").find(".coral-sortable-handle").removeClass("coral-sortable-handle");this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--){this.items[e].item.removeData(this.componentName+"-item")}return this},_mouseCapture:function(g,h){var e=null,i=false,f=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(g);
b(g.target).parents().each(function(){if(b.data(this,f.componentName+"-item")===f){e=b(this);return false}});if(b.data(g.target,f.componentName+"-item")===f){e=b(g.target)}if(!e){return false}if(this.options.handle&&!h){b(this.options.handle,e).find("*").addBack().each(function(){if(this===g.target){i=true}});if(!i){return false}}this.currentItem=e;this._removeCurrentsFromItems();return true},_mouseStart:function(h,j,f){var g,e,k=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(h);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(h);this.originalPageX=h.pageX;this.originalPageY=h.pageY;(k.cursorAt&&this._adjustOffsetFromHelper(k.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(k.containment){this._setContainment()}if(k.cursor&&k.cursor!=="auto"){e=this.document.find("body");this.storedCursor=e.css("cursor");e.css("cursor",k.cursor);this.storedStylesheet=b("<style>*{ cursor: "+k.cursor+" !important; }</style>").appendTo(e)}if(k.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",k.opacity)}if(k.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",k.zIndex)}if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",h,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()
}if(!f){for(g=this.containers.length-1;g>=0;g--){this.containers[g]._trigger("activate",h,this._uiHash(this))}}if(b.coral.ddmanager){b.coral.ddmanager.current=this}if(b.coral.ddmanager&&!k.dropBehaviour){b.coral.ddmanager.prepareOffsets(this,h)}this.dragging=true;this.helper.addClass("coral-sortable-helper");this._mouseDrag(h);return true},_mouseDrag:function(j){var g,h,f,l,k=this.options,e=false;this.position=this._generatePosition(j);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-j.pageY<k.scrollSensitivity){this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop+k.scrollSpeed}else{if(j.pageY-this.overflowOffset.top<k.scrollSensitivity){this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop-k.scrollSpeed}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-j.pageX<k.scrollSensitivity){this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft+k.scrollSpeed}else{if(j.pageX-this.overflowOffset.left<k.scrollSensitivity){this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft-k.scrollSpeed}}}else{if(j.pageY-b(document).scrollTop()<k.scrollSensitivity){e=b(document).scrollTop(b(document).scrollTop()-k.scrollSpeed)}else{if(b(window).height()-(j.pageY-b(document).scrollTop())<k.scrollSensitivity){e=b(document).scrollTop(b(document).scrollTop()+k.scrollSpeed)}}if(j.pageX-b(document).scrollLeft()<k.scrollSensitivity){e=b(document).scrollLeft(b(document).scrollLeft()-k.scrollSpeed)}else{if(b(window).width()-(j.pageX-b(document).scrollLeft())<k.scrollSensitivity){e=b(document).scrollLeft(b(document).scrollLeft()+k.scrollSpeed)}}}if(e!==false&&b.coral.ddmanager&&!k.dropBehaviour){b.coral.ddmanager.prepareOffsets(this,j)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"
}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(g=this.items.length-1;g>=0;g--){h=this.items[g];f=h.item[0];l=this._intersectsWithPointer(h);if(!l){continue}if(h.instance!==this.currentContainer){continue}if(f!==this.currentItem[0]&&this.placeholder[l===1?"next":"prev"]()[0]!==f&&!b.contains(this.placeholder[0],f)&&(this.options.type==="semi-dynamic"?!b.contains(this.element[0],f):true)){this.direction=l===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(h)){this._rearrange(j,h)}else{break}this._trigger("change",j,this._uiHash());break}}this._contactContainers(j);if(b.coral.ddmanager){b.coral.ddmanager.drag(this,j)}this._trigger("sort",j,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(g,i){if(!g){return}if(b.coral.ddmanager&&!this.options.dropBehaviour){b.coral.ddmanager.drop(this,g)}if(this.options.revert){var f=this,j=this.placeholder.offset(),e=this.options.axis,h={};if(!e||e==="x"){h.left=j.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)}if(!e||e==="y"){h.top=j.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)}this.reverting=true;b(this.helper).animate(h,parseInt(this.options.revert,10)||500,function(){f._clear(g)})}else{this._clear(g,i)}return false},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper==="original"){this.currentItem.css(this._storedCSS).removeClass("coral-sortable-helper")}else{this.currentItem.show()}for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("deactivate",null,this._uiHash(this));if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",null,this._uiHash(this));this.containers[e].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])
}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}b.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){b(this.domPosition.prev).after(this.currentItem)}else{b(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(g){var e=this._getItemsAsjQuery(g&&g.connected),f=[];g=g||{};b(e).each(function(){var h=(b(g.item||this).attr(g.attribute||"id")||"").match(g.expression||(/(.+)[\-=_](.+)/));if(h){f.push((g.key||h[1]+"[]")+"="+(g.key&&g.expression?h[1]:h[2]))}});if(!f.length&&g.key){f.push(g.key+"=")}return f.join("&")},toArray:function(g){var e=this._getItemsAsjQuery(g&&g.connected),f=[];g=g||{};e.each(function(){f.push(b(g.item||this).attr(g.attribute||"id")||"")});return f},_intersectsWith:function(q){var g=this.positionAbs.left,f=g+this.helperProportions.width,o=this.positionAbs.top,n=o+this.helperProportions.height,h=q.left,e=h+q.width,s=q.top,m=s+q.height,u=this.offset.click.top,k=this.offset.click.left,j=(this.options.axis==="x")||((o+u)>s&&(o+u)<m),p=(this.options.axis==="y")||((g+k)>h&&(g+k)<e),i=j&&p;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>q[this.floating?"width":"height"])){return i}else{return(h<g+(this.helperProportions.width/2)&&f-(this.helperProportions.width/2)<e&&s<o+(this.helperProportions.height/2)&&n-(this.helperProportions.height/2)<m)}},_intersectsWithPointer:function(g){var h=(this.options.axis==="x")||a(this.positionAbs.top+this.offset.click.top,g.top,g.height),f=(this.options.axis==="y")||a(this.positionAbs.left+this.offset.click.left,g.left,g.width),j=h&&f,e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();if(!j){return false}return this.floating?(((i&&i==="right")||e==="down")?2:1):(e&&(e==="down"?2:1))},_intersectsWithSides:function(h){var f=a(this.positionAbs.top+this.offset.click.top,h.top+(h.height/2),h.height),g=a(this.positionAbs.left+this.offset.click.left,h.left+(h.width/2),h.width),e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();
if(this.floating&&i){return((i==="right"&&g)||(i==="left"&&!g))}else{return e&&((e==="down"&&f)||(e==="up"&&!f))}},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){this._refreshItems(e);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(l){var h,g,n,m,e=[],f=[],k=this._connectWith();if(k&&l){for(h=k.length-1;h>=0;h--){n=b(k[h]);for(g=n.length-1;g>=0;g--){m=b.data(n[g],this.componentFullName);if(m&&m!==this&&!m.options.disabled){f.push([b.isFunction(m.options.items)?m.options.items.call(m.element):b(m.options.items,m.element).not(".coral-sortable-helper").not(".coral-sortable-placeholder"),m])}}}}f.push([b.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):b(this.options.items,this.element).not(".coral-sortable-helper").not(".coral-sortable-placeholder"),this]);for(h=f.length-1;h>=0;h--){f[h][0].each(function(){e.push(this)})}return b(e)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.componentName+"-item)");this.items=b.grep(this.items,function(g){for(var f=0;f<e.length;f++){if(e[f]===g.item[0]){return false}}return true})},_refreshItems:function(e){this.items=[];this.containers=[this];var k,g,p,l,o,f,r,q,m=this.items,h=[[b.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):b(this.options.items,this.element),this]],n=this._connectWith();if(n&&this.ready){for(k=n.length-1;k>=0;k--){p=b(n[k]);for(g=p.length-1;g>=0;g--){l=b.data(p[g],this.componentFullName);if(l&&l!==this&&!l.options.disabled){h.push([b.isFunction(l.options.items)?l.options.items.call(l.element[0],e,{item:this.currentItem}):b(l.options.items,l.element),l]);
this.containers.push(l)}}}}for(k=h.length-1;k>=0;k--){o=h[k][1];f=h[k][0];for(g=0,q=f.length;g<q;g++){r=b(f[g]);r.data(this.componentName+"-item",o);m.push({item:r,instance:o,width:0,height:0,left:0,top:0})}}},refreshPositions:function(e){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var g,h,f,j;for(g=this.items.length-1;g>=0;g--){h=this.items[g];if(h.instance!==this.currentContainer&&this.currentContainer&&h.item[0]!==this.currentItem[0]){continue}f=this.options.toleranceElement?b(this.options.toleranceElement,h.item):h.item;if(!e){h.width=f.outerWidth();h.height=f.outerHeight()}j=f.offset();h.left=j.left;h.top=j.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(g=this.containers.length-1;g>=0;g--){j=this.containers[g].element.offset();this.containers[g].containerCache.left=j.left;this.containers[g].containerCache.top=j.top;this.containers[g].containerCache.width=this.containers[g].element.outerWidth();this.containers[g].containerCache.height=this.containers[g].element.outerHeight()}}return this},_createPlaceholder:function(f){f=f||this;var e,g=f.options;if(!g.placeholder||g.placeholder.constructor===String){e=g.placeholder;g.placeholder={element:function(){var i=f.currentItem[0].nodeName.toLowerCase(),h=b("<"+i+">",f.document[0]).addClass(e||f.currentItem[0].className+" coral-sortable-placeholder").removeClass("coral-sortable-helper");if(i==="tr"){f.currentItem.children().each(function(){b("<td>&#160;</td>",f.document[0]).attr("colspan",b(this).attr("colspan")||1).appendTo(h)})}else{if(i==="img"){h.attr("src",f.currentItem.attr("src"))}}if(!e){h.css("visibility","hidden")}return h},update:function(h,i){if(e&&!g.forcePlaceholderSize){return}if(!i.height()){i.height(f.currentItem.innerHeight()-parseInt(f.currentItem.css("paddingTop")||0,10)-parseInt(f.currentItem.css("paddingBottom")||0,10))}if(!i.width()){i.width(f.currentItem.innerWidth()-parseInt(f.currentItem.css("paddingLeft")||0,10)-parseInt(f.currentItem.css("paddingRight")||0,10))
}}}}f.placeholder=b(g.placeholder.element.call(f.element,f.currentItem));f.currentItem.after(f.placeholder);g.placeholder.update(f,f.placeholder)},_contactContainers:function(e){var l,h,p,m,n,r,s,k,o,g,f=null,q=null;for(l=this.containers.length-1;l>=0;l--){if(b.contains(this.currentItem[0],this.containers[l].element[0])){continue}if(this._intersectsWith(this.containers[l].containerCache)){if(f&&b.contains(this.containers[l].element[0],f.element[0])){continue}f=this.containers[l];q=l}else{if(this.containers[l].containerCache.over){this.containers[l]._trigger("out",e,this._uiHash(this));this.containers[l].containerCache.over=0}}}if(!f){return}if(this.containers.length===1){if(!this.containers[q].containerCache.over){this.containers[q]._trigger("over",e,this._uiHash(this));this.containers[q].containerCache.over=1}}else{p=10000;m=null;o=f.floating||c(this.currentItem);n=o?"left":"top";r=o?"width":"height";g=o?"clientX":"clientY";for(h=this.items.length-1;h>=0;h--){if(!b.contains(this.containers[q].element[0],this.items[h].item[0])){continue}if(this.items[h].item[0]===this.currentItem[0]){continue}s=this.items[h].item.offset()[n];k=false;if(e[g]-s>this.items[h][r]/2){k=true}if(Math.abs(e[g]-s)<p){p=Math.abs(e[g]-s);m=this.items[h];this.direction=k?"up":"down"}}if(!m&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[q]){return}m?this._rearrange(e,m,null,true):this._rearrange(e,null,this.containers[q].element,true);this._trigger("change",e,this._uiHash());this.containers[q]._trigger("change",e,this._uiHash(this));this.currentContainer=this.containers[q];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[q]._trigger("over",e,this._uiHash(this));this.containers[q].containerCache.over=1}},_createHelper:function(f){var g=this.options,e=b.isFunction(g.helper)?b(g.helper.apply(this.element[0],[f,this.currentItem])):(g.helper==="clone"?this.currentItem.clone():this.currentItem);if(!e.parents("body").length){b(g.appendTo!=="parent"?g.appendTo:this.currentItem[0].parentNode)[0].appendChild(e[0])
}if(e[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!e[0].style.width||g.forceHelperSize){e.width(this.currentItem.width())}if(!e[0].style.height||g.forceHelperSize){e.height(this.currentItem.height())}return e},_adjustOffsetFromHelper:function(e){if(typeof e==="string"){e=e.split(" ")}if(b.isArray(e)){e={left:+e[0],top:+e[1]||0}}if("left" in e){this.offset.click.left=e.left+this.margins.left}if("right" in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left}if("top" in e){this.offset.click.top=e.top+this.margins.top}if("bottom" in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])){e.left+=this.scrollParent.scrollLeft();e.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===document.body||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&b.coral.ie)){e={top:0,left:0}}return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}
},_setContainment:function(){var f,h,e,g=this.options;if(g.containment==="parent"){g.containment=this.helper[0].parentNode}if(g.containment==="document"||g.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,b(g.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b(g.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(g.containment)){f=b(g.containment)[0];h=b(g.containment).offset();e=(b(f).css("overflow")!=="hidden");this.containment=[h.left+(parseInt(b(f).css("borderLeftWidth"),10)||0)+(parseInt(b(f).css("paddingLeft"),10)||0)-this.margins.left,h.top+(parseInt(b(f).css("borderTopWidth"),10)||0)+(parseInt(b(f).css("paddingTop"),10)||0)-this.margins.top,h.left+(e?Math.max(f.scrollWidth,f.offsetWidth):f.offsetWidth)-(parseInt(b(f).css("borderLeftWidth"),10)||0)-(parseInt(b(f).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,h.top+(e?Math.max(f.scrollHeight,f.offsetHeight):f.offsetHeight)-(parseInt(b(f).css("borderTopWidth"),10)||0)-(parseInt(b(f).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(g,i){if(!i){i=this.position}var f=g==="absolute"?1:-1,e=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=(/(html|body)/i).test(e[0].tagName);return{top:(i.top+this.offset.relative.top*f+this.offset.parent.top*f-((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(h?0:e.scrollTop()))*f)),left:(i.left+this.offset.relative.left*f+this.offset.parent.left*f-((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():h?0:e.scrollLeft())*f))}},_generatePosition:function(h){var j,i,k=this.options,g=h.pageX,f=h.pageY,e=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=(/(html|body)/i).test(e[0].tagName);
if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(h.pageX-this.offset.click.left<this.containment[0]){g=this.containment[0]+this.offset.click.left}if(h.pageY-this.offset.click.top<this.containment[1]){f=this.containment[1]+this.offset.click.top}if(h.pageX-this.offset.click.left>this.containment[2]){g=this.containment[2]+this.offset.click.left}if(h.pageY-this.offset.click.top>this.containment[3]){f=this.containment[3]+this.offset.click.top}}if(k.grid){j=this.originalPageY+Math.round((f-this.originalPageY)/k.grid[1])*k.grid[1];f=this.containment?((j-this.offset.click.top>=this.containment[1]&&j-this.offset.click.top<=this.containment[3])?j:((j-this.offset.click.top>=this.containment[1])?j-k.grid[1]:j+k.grid[1])):j;i=this.originalPageX+Math.round((g-this.originalPageX)/k.grid[0])*k.grid[0];g=this.containment?((i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2])?i:((i-this.offset.click.left>=this.containment[0])?i-k.grid[0]:i+k.grid[0])):i}}return{top:(f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(l?0:e.scrollTop())))),left:(g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():l?0:e.scrollLeft())))}},_rearrange:function(j,h,f,g){f?f[0].appendChild(this.placeholder[0]):h.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction==="down"?h.item[0]:h.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){if(e===this.counter){this.refreshPositions(!g)}})},_clear:function(f,g){this.reverting=false;var e,h=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(e in this._storedCSS){if(this._storedCSS[e]==="auto"||this._storedCSS[e]==="static"){this._storedCSS[e]=""
}}this.currentItem.css(this._storedCSS).removeClass("coral-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!g){h.push(function(i){this._trigger("receive",i,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".coral-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!g){h.push(function(i){this._trigger("update",i,this._uiHash())})}if(this!==this.currentContainer){if(!g){h.push(function(i){this._trigger("remove",i,this._uiHash())});h.push((function(i){return function(j){i._trigger("receive",j,this._uiHash(this))}}).call(this,this.currentContainer));h.push((function(i){return function(j){i._trigger("update",j,this._uiHash(this))}}).call(this,this.currentContainer))}}for(e=this.containers.length-1;e>=0;e--){if(!g){h.push((function(i){return function(j){i._trigger("deactivate",j,this._uiHash(this))}}).call(this,this.containers[e]))}if(this.containers[e].containerCache.over){h.push((function(i){return function(j){i._trigger("out",j,this._uiHash(this))}}).call(this,this.containers[e]));this.containers[e].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(this.cancelHelperRemoval){if(!g){this._trigger("beforeStop",f,this._uiHash());for(e=0;e<h.length;e++){h[e].call(this,f)}this._trigger("stop",f,this._uiHash())}this.fromOutside=false;return false}if(!g){this._trigger("beforeStop",f,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null;if(!g){for(e=0;e<h.length;e++){h[e].call(this,f)}this._trigger("stop",f,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){if(b.Component.prototype._trigger.apply(this,arguments)===false){this.cancel()
}},_uiHash:function(e){var f=e||this;return{helper:f.helper,placeholder:f.placeholder||b([]),position:f.position,originalPosition:f.originalPosition,offset:f.positionAbs,item:f.currentItem,sender:e?e.element:null}}})})(jQuery);

/*!
 * 4.0
 *
 * JS:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.component.js
 */
(function(a,b){a.component("coral.draggable",a.coral.mouse,{version:"4.0.1",componentEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}if(this.options.addClasses){this.element.addClass("coral-draggable")}if(this.options.disabled){this.element.addClass("coral-draggable-disabled")}this._setHandleClassName();this._mouseInit()},_setOption:function(c,d){this._super(c,d);if(c==="handle"){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".coral-draggable-dragging")){this.destroyOnClear=true;return}this.element.removeClass("coral-draggable coral-draggable-dragging coral-draggable-disabled");this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(e){var c=this.document[0],f=this.options;try{if(c.activeElement&&c.activeElement.nodeName.toLowerCase()!=="body"){a(c.activeElement).blur()}}catch(d){}if(this.helper||f.disabled||a(e.target).closest(".coral-resizable-handle").length>0){return false}this.handle=this._getHandle(e);if(!this.handle){return false}a(f.iframeFix===true?"iframe":f.iframeFix).each(function(){a("<div class='coral-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")});return true},_mouseStart:function(c){var d=this.options;
this.helper=this._createHelper(c);this.helper.addClass("coral-draggable-dragging");this._cacheHelperProportions();if(a.coral.ddmanager){a.coral.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.offsetParentCssPosition=this.offsetParent.css("position");this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.offset.scroll=false;a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(c,false);this.originalPageX=c.pageX;this.originalPageY=c.pageY;(d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt));this._setContainment();if(this._trigger("start",c)===false){this._clear();return false}this._cacheHelperProportions();if(a.coral.ddmanager&&!d.dropBehaviour){a.coral.ddmanager.prepareOffsets(this,c)}this._mouseDrag(c,true);if(a.coral.ddmanager){a.coral.ddmanager.dragStart(this,c)}return true},_mouseDrag:function(c,e){if(this.offsetParentCssPosition==="fixed"){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(c,true);this.positionAbs=this._convertPositionTo("absolute");if(!e){var d=this._uiHash();if(this._trigger("drag",c,d)===false){this._mouseUp({});return false}this.position=d.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if(a.coral.ddmanager){a.coral.ddmanager.drag(this,c)}return false},_mouseStop:function(d){var c=this,e=false;if(a.coral.ddmanager&&!this.options.dropBehaviour){e=a.coral.ddmanager.drop(this,d)}if(this.dropped){e=this.dropped;this.dropped=false}if(this.options.helper==="original"&&!a.contains(this.element[0].ownerDocument,this.element[0])){return false}if((this.options.revert==="invalid"&&!e)||(this.options.revert==="valid"&&e)||this.options.revert===true||(a.isFunction(this.options.revert)&&this.options.revert.call(this.element,e))){a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(c._trigger("stop",d)!==false){c._clear()
}})}else{if(this._trigger("stop",d)!==false){this._clear()}}return false},_mouseUp:function(c){a("div.coral-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});if(a.coral.ddmanager){a.coral.ddmanager.dragStop(this,c)}this.element.focus();return a.coral.mouse.prototype._mouseUp.call(this,c)},cancel:function(){if(this.helper.is(".coral-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(c){return this.options.handle?!!a(c.target).closest(this.element.find(this.options.handle)).length:true},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("coral-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("coral-draggable-handle")},_createHelper:function(d){var e=this.options,c=a.isFunction(e.helper)?a(e.helper.apply(this.element[0],[d])):(e.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!c.parents("body").length){c.appendTo((e.appendTo==="parent"?this.element[0].parentNode:e.appendTo))}if(c[0]!==this.element[0]&&!(/(fixed|absolute)/).test(c.css("position"))){c.css("position","absolute")}return c},_adjustOffsetFromHelper:function(c){if(typeof c==="string"){c=c.split(" ")}if(a.isArray(c)){c={left:+c[0],top:+c[1]||0}}if("left" in c){this.offset.click.left=c.left+this.margins.left}if("right" in c){this.offset.click.left=this.helperProportions.width-c.right+this.margins.left}if("top" in c){this.offset.click.top=c.top+this.margins.top}if("bottom" in c){this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top}},_isRootNode:function(c){return(/(html|body)/i).test(c.tagName)||c===this.document[0]},_getParentOffset:function(){var d=this.offsetParent.offset(),c=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])){d.left+=this.scrollParent.scrollLeft();d.top+=this.scrollParent.scrollTop()
}if(this._isRootNode(this.offsetParent[0])){d={top:0,left:0}}return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0}}var c=this.element.position(),d=this._isRootNode(this.scrollParent[0]);return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+(!d?this.scrollParent.scrollTop():0),left:c.left-(parseInt(this.helper.css("left"),10)||0)+(!d?this.scrollParent.scrollLeft():0)}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f,h,e,g=this.options,d=this.document[0];this.relativeContainer=null;if(!g.containment){this.containment=null;return}if(g.containment==="window"){this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||d.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(g.containment==="document"){this.containment=[0,0,a(d).width()-this.helperProportions.width-this.margins.left,(a(d).height()||d.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(g.containment.constructor===Array){this.containment=g.containment;return}if(g.containment==="parent"){g.containment=this.helper[0].parentNode}h=a(g.containment);e=h[0];if(!e){return}f=h.css("overflow")!=="hidden";this.containment=[(parseInt(h.css("borderLeftWidth"),10)||0)+(parseInt(h.css("paddingLeft"),10)||0),(parseInt(h.css("borderTopWidth"),10)||0)+(parseInt(h.css("paddingTop"),10)||0),(f?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(h.css("borderRightWidth"),10)||0)-(parseInt(h.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(h.css("borderBottomWidth"),10)||0)-(parseInt(h.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relativeContainer=h},_convertPositionTo:function(e,g){if(!g){g=this.position}var c=e==="absolute"?1:-1,f=this._isRootNode(this.scrollParent[0]);return{top:(g.top+this.offset.relative.top*c+this.offset.parent.top*c-((this.cssPosition==="fixed"?-this.offset.scroll.top:(f?0:this.offset.scroll.top))*c)),left:(g.left+this.offset.relative.left*c+this.offset.parent.left*c-((this.cssPosition==="fixed"?-this.offset.scroll.left:(f?0:this.offset.scroll.left))*c))}},_generatePosition:function(d,j){var c,k,l,f,e=this.options,i=this._isRootNode(this.scrollParent[0]),h=d.pageX,g=d.pageY;if(!i||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}}if(j){if(this.containment){if(this.relativeContainer){k=this.relativeContainer.offset();c=[this.containment[0]+k.left,this.containment[1]+k.top,this.containment[2]+k.left,this.containment[3]+k.top]}else{c=this.containment}if(d.pageX-this.offset.click.left<c[0]){h=c[0]+this.offset.click.left}if(d.pageY-this.offset.click.top<c[1]){g=c[1]+this.offset.click.top}if(d.pageX-this.offset.click.left>c[2]){h=c[2]+this.offset.click.left}if(d.pageY-this.offset.click.top>c[3]){g=c[3]+this.offset.click.top}}if(e.grid){l=e.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1]:this.originalPageY;g=c?((l-this.offset.click.top>=c[1]||l-this.offset.click.top>c[3])?l:((l-this.offset.click.top>=c[1])?l-e.grid[1]:l+e.grid[1])):l;f=e.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/e.grid[0])*e.grid[0]:this.originalPageX;h=c?((f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2])?f:((f-this.offset.click.left>=c[0])?f-e.grid[0]:f+e.grid[0])):f}if(e.axis==="y"){h=this.originalPageX}if(e.axis==="x"){g=this.originalPageY}}return{top:(g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:(i?0:this.offset.scroll.top))),left:(h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:(i?0:this.offset.scroll.left)))}
},_clear:function(){this.helper.removeClass("coral-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy()}},_trigger:function(c,d,e){e=e||this._uiHash();a.coral.plugin.call(this,c,[d,e,this],true);if(c==="drag"){this.positionAbs=this._convertPositionTo("absolute")}return a.Component.prototype._trigger.call(this,c,d,e)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.coral.plugin.add("draggable","connectToSortable",{start:function(d,f,e){var g=e.options,c=a.extend({},f,{item:e.element});e.sortables=[];a(g.connectToSortable).each(function(){var h=a.data(this,"coral-sortable");if(h&&!h.options.disabled){e.sortables.push({instance:h,shouldRevert:h.options.revert});h.refreshPositions();h._trigger("activate",d,c)}})},stop:function(d,f,e){var c=a.extend({},f,{item:e.element});a.each(e.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;e.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=this.shouldRevert}this.instance._mouseStop(d);this.instance.options.helper=this.instance.options._helper;if(e.options.helper==="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",d,c)}})},drag:function(d,f,e){var c=this;a.each(e.sortables,function(){var g=false,h=this;this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){g=true;a.each(e.sortables,function(){this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;if(this!==h&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(h.instance.element[0],this.instance.element[0])){g=false
}return g})}if(g){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(c).clone().removeAttr("id").appendTo(this.instance.element).data("coral-sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return f.helper[0]};d.target=this.instance.currentItem[0];this.instance._mouseCapture(d,true);this.instance._mouseStart(d,true,true);this.instance.offset.click.top=e.offset.click.top;this.instance.offset.click.left=e.offset.click.left;this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top;e._trigger("toSortable",d);e.dropped=this.instance.element;e.currentItem=e.element;this.instance.fromOutside=e}if(this.instance.currentItem){this.instance._mouseDrag(d)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",d,this.instance._uiHash(this.instance));this.instance._mouseStop(d,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}e._trigger("fromSortable",d);e.dropped=false}}})}});a.coral.plugin.add("draggable","cursor",{start:function(e,f,c){var d=a("body"),g=c.options;if(d.css("cursor")){g._cursor=d.css("cursor")}d.css("cursor",g.cursor)},stop:function(d,e,c){var f=c.options;if(f._cursor){a("body").css("cursor",f._cursor)}}});a.coral.plugin.add("draggable","opacity",{start:function(e,f,c){var d=a(f.helper),g=c.options;if(d.css("opacity")){g._opacity=d.css("opacity")}d.css("opacity",g.opacity)},stop:function(d,e,c){var f=c.options;if(f._opacity){a(e.helper).css("opacity",f._opacity)}}});a.coral.plugin.add("draggable","scroll",{start:function(d,e,c){if(!c.scrollParentNotHidden){c.scrollParentNotHidden=c.helper.scrollParent(false)}if(c.scrollParentNotHidden[0]!==c.document[0]&&c.scrollParentNotHidden[0].tagName!=="HTML"){c.overflowOffset=c.scrollParentNotHidden.offset()
}},drag:function(f,g,e){var h=e.options,d=false,j=e.scrollParentNotHidden[0],c=e.document[0];if(j!==c&&j.tagName!=="HTML"){if(!h.axis||h.axis!=="x"){if((e.overflowOffset.top+j.offsetHeight)-f.pageY<h.scrollSensitivity){j.scrollTop=d=j.scrollTop+h.scrollSpeed}else{if(f.pageY-e.overflowOffset.top<h.scrollSensitivity){j.scrollTop=d=j.scrollTop-h.scrollSpeed}}}if(!h.axis||h.axis!=="y"){if((e.overflowOffset.left+j.offsetWidth)-f.pageX<h.scrollSensitivity){j.scrollLeft=d=j.scrollLeft+h.scrollSpeed}else{if(f.pageX-e.overflowOffset.left<h.scrollSensitivity){j.scrollLeft=d=j.scrollLeft-h.scrollSpeed}}}}else{if(!h.axis||h.axis!=="x"){if(f.pageY-a(c).scrollTop()<h.scrollSensitivity){d=a(c).scrollTop(a(c).scrollTop()-h.scrollSpeed)}else{if(a(window).height()-(f.pageY-a(c).scrollTop())<h.scrollSensitivity){d=a(c).scrollTop(a(c).scrollTop()+h.scrollSpeed)}}}if(!h.axis||h.axis!=="y"){if(f.pageX-a(c).scrollLeft()<h.scrollSensitivity){d=a(c).scrollLeft(a(c).scrollLeft()-h.scrollSpeed)}else{if(a(window).width()-(f.pageX-a(c).scrollLeft())<h.scrollSensitivity){d=a(c).scrollLeft(a(c).scrollLeft()+h.scrollSpeed)}}}}if(d!==false&&a.coral.ddmanager&&!h.dropBehaviour){a.coral.ddmanager.prepareOffsets(e,f)}}});a.coral.plugin.add("draggable","snap",{start:function(d,e,c){var f=c.options;c.snapElements=[];a(f.snap.constructor!==String?(f.snap.items||":data(coral-draggable)"):f.snap).each(function(){var h=a(this),g=h.offset();if(this!==c.element[0]){c.snapElements.push({item:this,width:h.outerWidth(),height:h.outerHeight(),top:g.top,left:g.left})}})},drag:function(u,p,g){var c,z,j,k,s,n,m,A,v,h,q=g.options,y=q.snapTolerance,x=p.offset.left,w=x+g.helperProportions.width,f=p.offset.top,e=f+g.helperProportions.height;for(v=g.snapElements.length-1;v>=0;v--){s=g.snapElements[v].left;n=s+g.snapElements[v].width;m=g.snapElements[v].top;A=m+g.snapElements[v].height;if(w<s-y||x>n+y||e<m-y||f>A+y||!a.contains(g.snapElements[v].item.ownerDocument,g.snapElements[v].item)){if(g.snapElements[v].snapping){(g.options.snap.release&&g.options.snap.release.call(g.element,u,a.extend(g._uiHash(),{snapItem:g.snapElements[v].item})))
}g.snapElements[v].snapping=false;continue}if(q.snapMode!=="inner"){c=Math.abs(m-e)<=y;z=Math.abs(A-f)<=y;j=Math.abs(s-w)<=y;k=Math.abs(n-x)<=y;if(c){p.position.top=g._convertPositionTo("relative",{top:m-g.helperProportions.height,left:0}).top-g.margins.top}if(z){p.position.top=g._convertPositionTo("relative",{top:A,left:0}).top-g.margins.top}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:s-g.helperProportions.width}).left-g.margins.left}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n}).left-g.margins.left}}h=(c||z||j||k);if(q.snapMode!=="outer"){c=Math.abs(m-f)<=y;z=Math.abs(A-e)<=y;j=Math.abs(s-x)<=y;k=Math.abs(n-w)<=y;if(c){p.position.top=g._convertPositionTo("relative",{top:m,left:0}).top-g.margins.top}if(z){p.position.top=g._convertPositionTo("relative",{top:A-g.helperProportions.height,left:0}).top-g.margins.top}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:s}).left-g.margins.left}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n-g.helperProportions.width}).left-g.margins.left}}if(!g.snapElements[v].snapping&&(c||z||j||k||h)){(g.options.snap.snap&&g.options.snap.snap.call(g.element,u,a.extend(g._uiHash(),{snapItem:g.snapElements[v].item})))}g.snapElements[v].snapping=(c||z||j||k||h)}}});a.coral.plugin.add("draggable","stack",{start:function(e,f,c){var d,h=c.options,g=a.makeArray(a(h.stack)).sort(function(j,i){return(parseInt(a(j).css("zIndex"),10)||0)-(parseInt(a(i).css("zIndex"),10)||0)});if(!g.length){return}d=parseInt(a(g[0]).css("zIndex"),10)||0;a(g).each(function(j){a(this).css("zIndex",d+j)});this.css("zIndex",(d+g.length))}});a.coral.plugin.add("draggable","zIndex",{start:function(e,f,c){var d=a(f.helper),g=c.options;if(d.css("zIndex")){g._zIndex=d.css("zIndex")}d.css("zIndex",g.zIndex)},stop:function(d,e,c){var f=c.options;if(f._zIndex){a(e.helper).css("zIndex",f._zIndex)}}})})(jQuery);

/*!
 * jQuery coral Droppable 4.0.1
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.component.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
(function(b,c){function a(e,d,f){return(e>=d)&&(e<(d+f))}b.component("coral.droppable",{version:"4.0.1",componentEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,f=this.options,d=f.accept;this.isover=false;this.isout=true;this.accept=b.isFunction(d)?d:function(g){return g.is(d)};this.proportions=function(){if(arguments.length){e=arguments[0]}else{return e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}}};this._addToManager(f.scope);(f.addClasses&&this.element.addClass("coral-droppable"))},_addToManager:function(d){b.coral.ddmanager.droppables[d]=b.coral.ddmanager.droppables[d]||[];b.coral.ddmanager.droppables[d].push(this)},_splice:function(d){var e=0;for(;e<d.length;e++){if(d[e]===this){d.splice(e,1)}}},_destroy:function(){var d=b.coral.ddmanager.droppables[this.options.scope];this._splice(d);this.element.removeClass("coral-droppable coral-droppable-disabled")},_setOption:function(e,f){if(e==="accept"){this.accept=b.isFunction(f)?f:function(g){return g.is(f)}}else{if(e==="scope"){var d=b.coral.ddmanager.droppables[this.options.scope];this._splice(d);this._addToManager(f)}}this._super(e,f)},_activate:function(e){var d=b.coral.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}if(d){this._trigger("activate",e,this.ui(d))}},_deactivate:function(e){var d=b.coral.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(d){this._trigger("deactivate",e,this.ui(d))}},_over:function(e){var d=b.coral.ddmanager.current;if(!d||(d.currentItem||d.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],(d.currentItem||d.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)
}this._trigger("over",e,this.ui(d))}},_out:function(e){var d=b.coral.ddmanager.current;if(!d||(d.currentItem||d.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],(d.currentItem||d.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",e,this.ui(d))}},_drop:function(e,f){var d=f||b.coral.ddmanager.current,g=false;if(!d||(d.currentItem||d.element)[0]===this.element[0]){return false}this.element.find(":data(coral-droppable)").not(".coral-draggable-dragging").each(function(){var h=b.data(this,"coral-droppable");if(h.options.greedy&&!h.options.disabled&&h.options.scope===d.options.scope&&h.accept.call(h.element[0],(d.currentItem||d.element))&&b.coral.intersect(d,b.extend(h,{offset:h.element.offset()}),h.options.tolerance,e)){g=true;return false}});if(g){return false}if(this.accept.call(this.element[0],(d.currentItem||d.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",e,this.ui(d));return this.element}return false},ui:function(d){return{draggable:(d.currentItem||d.element),helper:d.helper,position:d.position,offset:d.positionAbs}}});b.coral.intersect=(function(){function d(f,e,g){return(f>=e)&&(f<(e+g))}return function(q,j,o,f){if(!j.offset){return false}var h=(q.positionAbs||q.position.absolute).left,n=(q.positionAbs||q.position.absolute).top,g=h+q.helperProportions.width,m=n+q.helperProportions.height,i=j.offset.left,p=j.offset.top,e=i+j.proportions().width,k=p+j.proportions().height;switch(o){case"fit":return(i<=h&&g<=e&&p<=n&&m<=k);case"intersect":return(i<h+(q.helperProportions.width/2)&&g-(q.helperProportions.width/2)<e&&p<n+(q.helperProportions.height/2)&&m-(q.helperProportions.height/2)<k);case"pointer":return d(f.pageY,p,j.proportions().height)&&d(f.pageX,i,j.proportions().width);case"touch":return((n>=p&&n<=k)||(m>=p&&m<=k)||(n<p&&m>k))&&((h>=i&&h<=e)||(g>=i&&g<=e)||(h<i&&g>e));
default:return false}}})();b.coral.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(g,k){var f,e,d=b.coral.ddmanager.droppables[g.options.scope]||[],h=k?k.type:null,l=(g.currentItem||g.element).find(":data(coral-droppable)").addBack();droppablesLoop:for(f=0;f<d.length;f++){if(d[f].options.disabled||(g&&!d[f].accept.call(d[f].element[0],(g.currentItem||g.element)))){continue}for(e=0;e<l.length;e++){if(l[e]===d[f].element[0]){d[f].proportions().height=0;continue droppablesLoop}}d[f].visible=d[f].element.css("display")!=="none";if(!d[f].visible){continue}if(h==="mousedown"){d[f]._activate.call(d[f],k)}d[f].offset=d[f].element.offset();d[f].proportions({width:d[f].element[0].offsetWidth,height:d[f].element[0].offsetHeight})}},drop:function(d,e){var f=false;b.each((b.coral.ddmanager.droppables[d.options.scope]||[]).slice(),function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&b.coral.intersect(d,this,this.options.tolerance,e)){f=this._drop.call(this,e)||f}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(d.currentItem||d.element))){this.isout=true;this.isover=false;this._deactivate.call(this,e)}});return f},dragStart:function(d,e){d.element.parentsUntil("body").bind("scroll.droppable",function(){if(!d.options.refreshPositions){b.coral.ddmanager.prepareOffsets(d,e)}})},drag:function(d,e){if(d.options.refreshPositions){b.coral.ddmanager.prepareOffsets(d,e)}b.each(b.coral.ddmanager.droppables[d.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var i,g,f,h=b.coral.intersect(d,this,this.options.tolerance,e),j=!h&&this.isover?"isout":(h&&!this.isover?"isover":null);if(!j){return}if(this.options.greedy){g=this.options.scope;f=this.element.parents(":data(coral-droppable)").filter(function(){return b.data(this,"coral-droppable").options.scope===g});if(f.length){i=b.data(f[0],"coral-droppable");i.greedyChild=(j==="isover")}}if(i&&j==="isover"){i.isover=false;i.isout=true;
i._out.call(i,e)}this[j]=true;this[j==="isout"?"isover":"isout"]=false;this[j==="isover"?"_over":"_out"].call(this,e);if(i&&j==="isout"){i.isout=false;i.isover=true;i._over.call(i,e)}})},dragStop:function(d,e){d.element.parentsUntil("body").unbind("scroll.droppable");if(!d.options.refreshPositions){b.coral.ddmanager.prepareOffsets(d,e)}}}})(jQuery);

/*!
 * jQuery coral Resizable 4.0.1
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.component.js
 */
(function(d,e){function b(f){return parseInt(f,10)||0}function a(f){return !isNaN(parseInt(f,10))}function c(i,g){if(d(i).css("overflow")==="hidden"){return false}var f=(g&&g==="left")?"scrollLeft":"scrollTop",h=false;if(i[f]>0){return true}i[f]=1;h=(i[f]>0);i[f]=0;return h}d.component("coral.resizable",d.coral.mouse,{version:"4.0.1",componentEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,layout:false,helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var m,g,k,h,f,j=this,l=this.options;this.element.addClass("coral-resizable");d.extend(this,{_aspectRatio:!!(l.aspectRatio),aspectRatio:l.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:l.helper||l.ghost||l.animate?l.helper||"coral-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap(d("<div class='coral-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("coral-resizable",this.element.data("coral-resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));
this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=l.handles||(!d(".coral-resizable-handle",this.element).length?"e,s,se":{n:".coral-resizable-n",e:".coral-resizable-e",s:".coral-resizable-s",w:".coral-resizable-w",se:".coral-resizable-se",sw:".coral-resizable-sw",ne:".coral-resizable-ne",nw:".coral-resizable-nw"});if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}m=this.handles.split(",");this.handles={};for(g=0;g<m.length;g++){k=d.trim(m[g]);f="coral-resizable-"+k;h=d("<div class='coral-resizable-handle "+f+"'></div>");h.css({zIndex:l.zIndex});if("se"===k){h.addClass("coral-icon coral-icon-gripsmall-diagonal-se")}this.handles[k]=".coral-resizable-"+k;this.element.append(h)}}this._renderAxis=function(r){var o,p,n,q;r=r||this.element;for(o in this.handles){if(this.handles[o].constructor===String){this.handles[o]=this.element.children(this.handles[o]).first().show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){p=d(this.handles[o],this.element);q=/sw|ne|nw|se|n|s/.test(o)?p.outerHeight():p.outerWidth();n=["padding",/ne|nw|n/.test(o)?"Top":/se|sw|s/.test(o)?"Bottom":/^e$/.test(o)?"Right":"Left"].join("");r.css(n,q);this._proportionallyResize()}if(!d(this.handles[o]).length){continue}}};this._renderAxis(this.element);this._handles=d(".coral-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!j.resizing){if(this.className){h=this.className.match(/coral-resizable-(se|sw|ne|nw|n|e|s|w)/i)}j.axis=h&&h[1]?h[1]:"se"}});if(l.autoHide){this._handles.hide();d(this.element).addClass("coral-resizable-autohide").mouseenter(function(){if(l.disabled){return}d(this).removeClass("coral-resizable-autohide");j._handles.show()}).mouseleave(function(){if(l.disabled){return}if(!j.resizing){d(this).addClass("coral-resizable-autohide");j._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();
var g,f=function(h){d(h).removeClass("coral-resizable coral-resizable-disabled coral-resizable-resizing").removeData("resizable").removeData("coral-resizable").unbind(".resizable").find(".coral-resizable-handle").remove()};if(this.elementIsWrapper){f(this.element);g=this.element;this.originalElement.css({position:g.css("position"),width:g.outerWidth(),height:g.outerHeight(),top:g.css("top"),left:g.css("left")}).insertAfter(g);g.remove()}this.originalElement.css("resize",this.originalResizeStyle);f(this.originalElement);return this},_mouseCapture:function(h){var g,j,f=false;for(g in this.handles){j=d(this.handles[g])[0];if(j===h.target||d.contains(j,h.target)){f=true}}return !this.options.disabled&&f},_mouseStart:function(g){var k,h,j,i=this.options,f=this.element;this.resizing=true;this._renderProxy();k=b(this.helper.css("left"));h=b(this.helper.css("top"));if(i.containment){k+=d(i.containment).scrollLeft()||0;h+=d(i.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:k,top:h};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:f.width(),height:f.height()};this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()};this.originalPosition={left:k,top:h};this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()};this.originalMousePosition={left:g.pageX,top:g.pageY};this.aspectRatio=(typeof i.aspectRatio==="number")?i.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);j=d(".coral-resizable-"+this.axis).css("cursor");d("body").css("cursor",j==="auto"?this.axis+"-resize":j);f.addClass("coral-resizable-resizing");this._propagate("start",g);return true},_mouseDrag:function(k){var l,j,m=this.originalMousePosition,g=this.axis,h=(k.pageX-m.left)||0,f=(k.pageY-m.top)||0,i=this._change[g];this._updatePrevProperties();if(!i){return false}l=i.apply(this,[k,h,f]);this._updateVirtualBoundaries(k.shiftKey);if(this._aspectRatio||k.shiftKey){l=this._updateRatio(l,k)
}l=this._respectSize(l,k);this._updateCache(l);this._propagate("resize",k);j=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!d.isEmptyObject(j)){this._updatePrevProperties();this._trigger("resize",k,this.ui());this._applyChanges()}return false},_mouseStop:function(i){this.resizing=false;var h,f,g,l,p,k,n,j=this.options,m=this;if(this._helper){h=this._proportionallyResizeElements;f=h.length&&(/textarea/i).test(h[0].nodeName);g=f&&c(h[0],"left")?0:m.sizeDiff.height;l=f?0:m.sizeDiff.width;p={width:(m.helper.width()-l),height:(m.helper.height()-g)};k=(parseInt(m.element.css("left"),10)+(m.position.left-m.originalPosition.left))||null;n=(parseInt(m.element.css("top"),10)+(m.position.top-m.originalPosition.top))||null;if(!j.animate){this.element.css(d.extend(p,{top:n,left:k}))}m.helper.height(m.size.height);m.helper.width(m.size.width);if(this._helper&&!j.animate){this._proportionallyResize()}}d("body").css("cursor","auto");this.element.removeClass("coral-resizable-resizing");this._propagate("stop",i,this.ui());if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var f={};if(this.position.top!==this.prevPosition.top){f.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){f.left=this.position.left+"px"}if(this.size.width!==this.prevSize.width){f.width=this.size.width+"px"}if(this.size.height!==this.prevSize.height){f.height=this.size.height+"px"}this.helper.css(f);return f},_updateVirtualBoundaries:function(h){var j,i,g,l,f,k=this.options;f={minWidth:a(k.minWidth)?k.minWidth:0,maxWidth:a(k.maxWidth)?k.maxWidth:Infinity,minHeight:a(k.minHeight)?k.minHeight:0,maxHeight:a(k.maxHeight)?k.maxHeight:Infinity};if(this._aspectRatio||h){j=f.minHeight*this.aspectRatio;g=f.minWidth/this.aspectRatio;i=f.maxHeight*this.aspectRatio;
l=f.maxWidth/this.aspectRatio;if(j>f.minWidth){f.minWidth=j}if(g>f.minHeight){f.minHeight=g}if(i<f.maxWidth){f.maxWidth=i}if(l<f.maxHeight){f.maxHeight=l}}this._vBoundaries=f},_updateCache:function(f){this.offset=this.helper.offset();if(a(f.left)){this.position.left=f.left}if(a(f.top)){this.position.top=f.top}if(a(f.height)){this.size.height=f.height}if(a(f.width)){this.size.width=f.width}},_updateRatio:function(h){var i=this.position,g=this.size,f=this.axis;if(a(h.height)){h.width=(h.height*this.aspectRatio)}else{if(a(h.width)){h.height=(h.width/this.aspectRatio)}}if(f==="sw"){h.left=i.left+(g.width-h.width);h.top=null}if(f==="nw"){h.top=i.top+(g.height-h.height);h.left=i.left+(g.width-h.width)}return h},_respectSize:function(k){var h=this._vBoundaries,n=this.axis,q=a(k.width)&&h.maxWidth&&(h.maxWidth<k.width),l=a(k.height)&&h.maxHeight&&(h.maxHeight<k.height),i=a(k.width)&&h.minWidth&&(h.minWidth>k.width),p=a(k.height)&&h.minHeight&&(h.minHeight>k.height),g=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,j=/sw|nw|w/.test(n),f=/nw|ne|n/.test(n);if(i){k.width=h.minWidth}if(p){k.height=h.minHeight}if(q){k.width=h.maxWidth}if(l){k.height=h.maxHeight}if(i&&j){k.left=g-h.minWidth}if(q&&j){k.left=g-h.maxWidth}if(p&&f){k.top=m-h.minHeight}if(l&&f){k.top=m-h.maxHeight}if(!k.width&&!k.height&&!k.left&&k.top){k.top=null}else{if(!k.width&&!k.height&&!k.top&&k.left){k.left=null}}return k},_getPaddingPlusBorderDimensions:function(h){var g=0,j=[],k=[h.css("borderTopWidth"),h.css("borderRightWidth"),h.css("borderBottomWidth"),h.css("borderLeftWidth")],f=[h.css("paddingTop"),h.css("paddingRight"),h.css("paddingBottom"),h.css("paddingLeft")];for(;g<4;g++){j[g]=(parseInt(k[g],10)||0);j[g]+=(parseInt(f[g],10)||0)}return{height:j[0]+j[2],width:j[1]+j[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var h,g=0,f=this.helper||this.element;for(;g<this._proportionallyResizeElements.length;g++){h=this._proportionallyResizeElements[g];
if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(h)}h.css({height:(f.height()-this.outerDimensions.height)||0,width:(f.width()-this.outerDimensions.width)||0})}},_renderProxy:function(){var f=this.element,g=this.options;this.elementOffset=f.offset();if(this._helper){this.helper=this.helper||d("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++g.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(g,f){return{width:this.originalSize.width+f}},w:function(h,f){var g=this.originalSize,i=this.originalPosition;return{left:i.left+f,width:g.width-f}},n:function(i,g,f){var h=this.originalSize,j=this.originalPosition;return{top:j.top+f,height:h.height-f}},s:function(h,g,f){return{height:this.originalSize.height+f}},se:function(h,g,f){return d.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[h,g,f]))},sw:function(h,g,f){return d.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[h,g,f]))},ne:function(h,g,f){return d.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[h,g,f]))},nw:function(h,g,f){return d.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[h,g,f]))}},_propagate:function(g,f){d.coral.plugin.call(this,g,[f,this.ui()]);(g!=="resize"&&this._trigger(g,f,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});d.coral.plugin.add("resizable","animate",{stop:function(i){var n=d(this).data("coral-resizable"),k=n.options,h=n._proportionallyResizeElements,f=h.length&&(/textarea/i).test(h[0].nodeName),g=f&&c(h[0],"left")?0:n.sizeDiff.height,m=f?0:n.sizeDiff.width,j={width:(n.size.width-m),height:(n.size.height-g)},l=(parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left))||null,p=(parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top))||null;
n.element.animate(d.extend(j,p&&l?{top:p,left:l}:{}),{duration:k.animateDuration,easing:k.animateEasing,step:function(){var o={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};if(h&&h.length){d(h[0]).css({width:o.width,height:o.height})}n._updateCache(o);n._propagate("resize",i)}})}});d.coral.plugin.add("resizable","containment",{start:function(){var n,h,r,f,m,i,s,q=d(this).data("coral-resizable"),l=q.options,k=q.element,g=l.containment,j=(g instanceof d)?g.get(0):(/parent/.test(g))?k.parent().get(0):g;if(!j){return}q.containerElement=d(j);if(/document/.test(g)||g===document){q.containerOffset={left:0,top:0};q.containerPosition={left:0,top:0};q.parentData={element:d(document),left:0,top:0,width:d(document).width(),height:d(document).height()||document.body.parentNode.scrollHeight}}else{n=d(j);h=[];d(["Top","Right","Left","Bottom"]).each(function(p,o){h[p]=b(n.css("padding"+o))});q.containerOffset=n.offset();q.containerPosition=n.position();q.containerSize={height:(n.innerHeight()-h[3]),width:(n.innerWidth()-h[1])};r=q.containerOffset;f=q.containerSize.height;m=q.containerSize.width;i=(c(j,"left")?j.scrollWidth:m);s=(c(j)?j.scrollHeight:f);q.parentData={element:j,left:r.left,top:r.top,width:i,height:s}}},resize:function(g){var m,s,l,j,n=d(this).resizable("instance"),i=n.options,q=n.containerOffset,p=n.position,r=n._aspectRatio||g.shiftKey,f={top:0,left:0},h=n.containerElement,k=true;if(h[0]!==document&&(/static/).test(h.css("position"))){f=q}if(p.left<(n._helper?q.left:0)){n.size.width=n.size.width+(n._helper?(n.position.left-q.left):(n.position.left-f.left));if(r){n.size.height=n.size.width/n.aspectRatio;k=false}n.position.left=i.helper?q.left:0}if(p.top<(n._helper?q.top:0)){n.size.height=n.size.height+(n._helper?(n.position.top-q.top):n.position.top);if(r){n.size.width=n.size.height*n.aspectRatio;k=false}n.position.top=n._helper?q.top:0}l=n.containerElement.get(0)===n.element.parent().get(0);
j=/relative|absolute/.test(n.containerElement.css("position"));if(l&&j){n.offset.left=n.parentData.left+n.position.left;n.offset.top=n.parentData.top+n.position.top}else{n.offset.left=n.element.offset().left;n.offset.top=n.element.offset().top}m=Math.abs(n.sizeDiff.width+(n._helper?n.offset.left-f.left:(n.offset.left-q.left)));s=Math.abs(n.sizeDiff.height+(n._helper?n.offset.top-f.top:(n.offset.top-q.top)));if(m+n.size.width>=n.parentData.width){n.size.width=n.parentData.width-m;if(r){n.size.height=n.size.width/n.aspectRatio;k=false}}if(s+n.size.height>=n.parentData.height){n.size.height=n.parentData.height-s;if(r){n.size.width=n.size.height*n.aspectRatio;k=false}}if(!k){n.position.left=n.prevPosition.left;n.position.top=n.prevPosition.top;n.size.width=n.prevSize.width;n.size.height=n.prevSize.height}},stop:function(){var l=d(this).resizable("instance"),g=l.options,m=l.containerOffset,f=l.containerPosition,i=l.containerElement,j=d(l.helper),p=j.offset(),n=j.outerWidth()-l.sizeDiff.width,k=j.outerHeight()-l.sizeDiff.height;if(l._helper&&!g.animate&&(/relative/).test(i.css("position"))){d(this).css({left:p.left-f.left-m.left,width:n,height:k})}if(l._helper&&!g.animate&&(/static/).test(i.css("position"))){d(this).css({left:p.left-f.left-m.left,width:n,height:k})}}});d.coral.plugin.add("resizable","alsoResize",{start:function(){var f=d(this).data("coral-resizable"),h=f.options,g=function(i){d(i).each(function(){var j=d(this);j.data("coral-resizable-alsoresize",{width:parseInt(j.width(),10),height:parseInt(j.height(),10),left:parseInt(j.css("left"),10),top:parseInt(j.css("top"),10)})})};if(typeof(h.alsoResize)==="object"&&!h.alsoResize.parentNode){if(h.alsoResize.length){h.alsoResize=h.alsoResize[0];g(h.alsoResize)}else{d.each(h.alsoResize,function(i){g(i)})}}else{g(h.alsoResize)}},resize:function(h,j){var g=d(this).data("coral-resizable"),k=g.options,i=g.originalSize,m=g.originalPosition,l={height:(g.size.height-i.height)||0,width:(g.size.width-i.width)||0,top:(g.position.top-m.top)||0,left:(g.position.left-m.left)||0},f=function(n,o){d(n).each(function(){var r=d(this),u=d(this).data("coral-resizable-alsoresize"),q={},p=o&&o.length?o:r.parents(j.originalElement[0]).length?["width","height"]:["width","height","top","left"];
var s=d.coral.getStyles(r[0]);var t=jQuery.support.boxSizing&&jQuery.css(r,"boxSizing",false,s)==="border-box";d.each(p,function(v,x){var w=(u[x]||0)+(l[x]||0);if(w&&w>=0){if(t){if(d.inArray(x,["width","height"])>=0){r[x](w)}else{r.css(x,w)}}else{q[x]=w||null}}});r.css(q)})};if(typeof(k.alsoResize)==="object"&&!k.alsoResize.nodeType){d.each(k.alsoResize,function(n,o){f(n,o)})}else{f(k.alsoResize)}},stop:function(){d(this).removeData("resizable-alsoresize")}});d.coral.plugin.add("resizable","ghost",{start:function(){var g=d(this).data("coral-resizable"),h=g.options,f=g.size;g.ghost=g.originalElement.clone();g.ghost.css({opacity:0.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("coral-resizable-ghost").addClass(typeof h.ghost==="string"?h.ghost:"");g.ghost.appendTo(g.helper)},resize:function(){var f=d(this).data("coral-resizable");if(f.ghost){f.ghost.css({position:"relative",height:f.size.height,width:f.size.width})}},stop:function(){var f=d(this).data("coral-resizable");if(f.ghost&&f.helper){f.helper.get(0).removeChild(f.ghost.get(0))}}});d.coral.plugin.add("resizable","grid",{resize:function(){var i,n=d(this).resizable("instance"),s=n.options,l=n.size,m=n.originalSize,p=n.originalPosition,x=n.axis,f=typeof s.grid==="number"?[s.grid,s.grid]:s.grid,v=(f[0]||1),u=(f[1]||1),k=Math.round((l.width-m.width)/v)*v,j=Math.round((l.height-m.height)/u)*u,q=m.width+k,t=m.height+j,h=s.maxWidth&&(s.maxWidth<q),r=s.maxHeight&&(s.maxHeight<t),w=s.minWidth&&(s.minWidth>q),g=s.minHeight&&(s.minHeight>t);s.grid=f;if(w){q+=v}if(g){t+=u}if(h){q-=v}if(r){t-=u}if(/^(se|s|e)$/.test(x)){n.size.width=q;n.size.height=t}else{if(/^(ne)$/.test(x)){n.size.width=q;n.size.height=t;n.position.top=p.top-j}else{if(/^(sw)$/.test(x)){n.size.width=q;n.size.height=t;n.position.left=p.left-k}else{if(t-u<=0||q-v<=0){i=n._getPaddingPlusBorderDimensions(this)}if(t-u>0){n.size.height=t;n.position.top=p.top-j}else{t=u-i.height;n.size.height=t;n.position.top=p.top+m.height-t
}if(q-v>0){n.size.width=q;n.position.left=p.left-k}else{q=u-i.height;n.size.width=q;n.position.left=p.left+m.width-q}}}}}})})(jQuery);

/*!
 * jQuery coral Selectable 4.0.1
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.component.js
 */
(function(a,b){a.component("coral.selectable",a.coral.mouse,{version:"4.0.1",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var d,c=this;this.element.addClass("coral-selectable");this.dragged=false;this.refresh=function(){d=a(c.options.filter,c.element[0]);d.addClass("coral-selectee");d.each(function(){var e=a(this),f=e.offset();a.data(this,"selectable-item",{element:this,$element:e,left:f.left,top:f.top,right:f.left+e.outerWidth(),bottom:f.top+e.outerHeight(),startselected:false,selected:e.hasClass("coral-selected"),selecting:e.hasClass("coral-selecting"),unselecting:e.hasClass("coral-unselecting")})})};this.refresh();this.selectees=d.addClass("coral-selectee");this._mouseInit();this.helper=a("<div class='coral-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("coral-selectee").removeData("selectable-item");this.element.removeClass("coral-selectable coral-selectable-disabled");this._mouseDestroy()},_mouseStart:function(e){var d=this,c=this.options;this.opos=[e.pageX,e.pageY];if(this.options.disabled){return}this.selectees=a(c.filter,this.element[0]);this._trigger("start",e);a(c.appendTo).append(this.helper);this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0});if(c.autoRefresh){this.refresh()}this.selectees.filter(".coral-selected").each(function(){var f=a.data(this,"selectable-item");f.startselected=true;if(!e.metaKey&&!e.ctrlKey){f.$element.removeClass("coral-selected");f.selected=false;f.$element.addClass("coral-unselecting");f.unselecting=true;d._trigger("unselecting",e,{unselecting:f.element})}});a(e.target).parents().addBack().each(function(){var f,g=a.data(this,"selectable-item");if(g){f=(!e.metaKey&&!e.ctrlKey)||!g.$element.hasClass("coral-selected");g.$element.removeClass(f?"coral-unselecting":"coral-selected").addClass(f?"coral-selecting":"coral-unselecting");
g.unselecting=!f;g.selecting=f;g.selected=f;if(f){d._trigger("selecting",e,{selecting:g.element})}else{d._trigger("unselecting",e,{unselecting:g.element})}return false}})},_mouseDrag:function(j){this.dragged=true;if(this.options.disabled){return}var g,i=this,e=this.options,d=this.opos[0],h=this.opos[1],c=j.pageX,f=j.pageY;if(d>c){g=c;c=d;d=g}if(h>f){g=f;f=h;h=g}this.helper.css({left:d,top:h,width:c-d,height:f-h});this.selectees.each(function(){var k=a.data(this,"selectable-item"),l=false;if(!k||k.element===i.element[0]){return}if(e.tolerance==="touch"){l=(!(k.left>c||k.right<d||k.top>f||k.bottom<h))}else{if(e.tolerance==="fit"){l=(k.left>d&&k.right<c&&k.top>h&&k.bottom<f)}}if(l){if(k.selected){k.$element.removeClass("coral-selected");k.selected=false}if(k.unselecting){k.$element.removeClass("coral-unselecting");k.unselecting=false}if(!k.selecting){k.$element.addClass("coral-selecting");k.selecting=true;i._trigger("selecting",j,{selecting:k.element})}}else{if(k.selecting){if((j.metaKey||j.ctrlKey)&&k.startselected){k.$element.removeClass("coral-selecting");k.selecting=false;k.$element.addClass("coral-selected");k.selected=true}else{k.$element.removeClass("coral-selecting");k.selecting=false;if(k.startselected){k.$element.addClass("coral-unselecting");k.unselecting=true}i._trigger("unselecting",j,{unselecting:k.element})}}if(k.selected){if(!j.metaKey&&!j.ctrlKey&&!k.startselected){k.$element.removeClass("coral-selected");k.selected=false;k.$element.addClass("coral-unselecting");k.unselecting=true;i._trigger("unselecting",j,{unselecting:k.element})}}}});return false},_mouseStop:function(d){var c=this;this.dragged=false;a(".coral-unselecting",this.element[0]).each(function(){var e=a.data(this,"selectable-item");e.$element.removeClass("coral-unselecting");e.unselecting=false;e.startselected=false;c._trigger("unselected",d,{unselected:e.element})});a(".coral-selecting",this.element[0]).each(function(){var e=a.data(this,"selectable-item");e.$element.removeClass("coral-selecting").addClass("coral-selected");
e.selecting=false;e.selected=true;e.startselected=true;c._trigger("selected",d,{selected:e.element})});this._trigger("stop",d);this.helper.remove();return false}})})(jQuery);

/*!
 * 4.0
 */
(function(e,c){e.coral=e.coral||{};var j,m,k=Math.max,p=Math.abs,n=Math.round,d=/left|center|right/,h=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,b=/%$/,g=e.fn.position;function o(s,r,q){return[parseFloat(s[0])*(b.test(s[0])?r/100:1),parseFloat(s[1])*(b.test(s[1])?q/100:1)]}function i(q,r){return parseInt(e.css(q,r),10)||0}function f(r){var q=r[0];if(q.nodeType===9){return{width:r.width(),height:r.height(),offset:{top:0,left:0}}}if(e.isWindow(q)){return{width:r.width(),height:r.height(),offset:{top:r.scrollTop(),left:r.scrollLeft()}}}if(q.preventDefault){return{width:0,height:0,offset:{top:q.pageY,left:q.pageX}}}return{width:r.outerWidth(),height:r.outerHeight(),offset:r.offset()}}e.position={scrollbarWidth:function(){if(j!==c){return j}var r,q,t=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=t.children()[0];e("body").append(t);r=s.offsetWidth;t.css("overflow","scroll");q=s.offsetWidth;if(r===q){q=t[0].clientWidth}t.remove();return(j=r-q)},getScrollInfo:function(u){var t=u.isWindow||u.isDocument?"":u.element.css("overflow-x"),s=u.isWindow||u.isDocument?"":u.element.css("overflow-y"),r=t==="scroll"||(t==="auto"&&u.width<u.element[0].scrollWidth),q=s==="scroll"||(s==="auto"&&u.height<u.element[0].scrollHeight);return{width:q?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(r){var s=e(r||window),q=e.isWindow(s[0]),t=!!s[0]&&s[0].nodeType===9;return{element:s,isWindow:q,isDocument:t,offset:s.offset()||{left:0,top:0},scrollLeft:s.scrollLeft(),scrollTop:s.scrollTop(),width:q||t?s.width():s.outerWidth(),height:q||t?s.height():s.outerHeight()}}};e.fn.position=function(A){if(!A||!A.of){return g.apply(this,arguments)}A=e.extend({},A);var B,x,v,z,u,q,w=e(A.of),t=e.position.getWithinInfo(A.within),r=e.position.getScrollInfo(t),y=(A.collision||"flip").split(" "),s={};q=f(w);if(w[0].preventDefault){A.at="left top"
}x=q.width;v=q.height;z=q.offset;u=e.extend({},z);e.each(["my","at"],function(){var E=(A[this]||"").split(" "),D,C;if(E.length===1){E=d.test(E[0])?E.concat(["center"]):h.test(E[0])?["center"].concat(E):["center","center"]}E[0]=d.test(E[0])?E[0]:"center";E[1]=h.test(E[1])?E[1]:"center";D=a.exec(E[0]);C=a.exec(E[1]);s[this]=[D?D[0]:0,C?C[0]:0];A[this]=[l.exec(E[0])[0],l.exec(E[1])[0]]});if(y.length===1){y[1]=y[0]}if(A.at[0]==="right"){u.left+=x}else{if(A.at[0]==="center"){u.left+=x/2}}if(A.at[1]==="bottom"){u.top+=v}else{if(A.at[1]==="center"){u.top+=v/2}}B=o(s.at,x,v);u.left+=B[0];u.top+=B[1];return this.each(function(){var D,M,F=e(this),H=F.outerWidth(),E=F.outerHeight(),G=i(this,"marginLeft"),C=i(this,"marginTop"),L=H+G+i(this,"marginRight")+r.width,K=E+C+i(this,"marginBottom")+r.height,I=e.extend({},u),J=o(s.my,F.outerWidth(),F.outerHeight());if(A.my[0]==="right"){I.left-=H}else{if(A.my[0]==="center"){I.left-=H/2}}if(A.my[1]==="bottom"){I.top-=E}else{if(A.my[1]==="center"){I.top-=E/2}}I.left+=J[0];I.top+=J[1];if(!m){I.left=n(I.left);I.top=n(I.top)}D={marginLeft:G,marginTop:C};e.each(["left","top"],function(O,N){if(e.coral.position[y[O]]){e.coral.position[y[O]][N](I,{targetWidth:x,targetHeight:v,elemWidth:H,elemHeight:E,collisionPosition:D,collisionWidth:L,collisionHeight:K,offset:[B[0]+J[0],B[1]+J[1]],my:A.my,at:A.at,within:t,elem:F})}});if(A.using){M=function(Q){var S=z.left-I.left,P=S+x-H,R=z.top-I.top,O=R+v-E,N={target:{element:w,left:z.left,top:z.top,width:x,height:v},element:{element:F,left:I.left,top:I.top,width:H,height:E},horizontal:P<0?"left":S>0?"right":"center",vertical:O<0?"top":R>0?"bottom":"middle"};if(x<H&&p(S+P)<x){N.horizontal="center"}if(v<E&&p(R+O)<v){N.vertical="middle"}if(k(p(S),p(P))>k(p(R),p(O))){N.important="horizontal"}else{N.important="vertical"}A.using.call(this,Q,N)}}F.offset(e.extend(I,{using:M}))})};e.coral.position={fit:{left:function(u,t){var s=t.within,w=s.isWindow?s.scrollLeft:s.offset.left,y=s.width,v=u.left-t.collisionPosition.marginLeft,x=w-v,r=v+t.collisionWidth-y-w,q;
if(t.collisionWidth>y){if(x>0&&r<=0){q=u.left+x+t.collisionWidth-y-w;u.left+=x-q}else{if(r>0&&x<=0){u.left=w}else{if(x>r){u.left=w+y-t.collisionWidth}else{u.left=w}}}}else{if(x>0){u.left+=x}else{if(r>0){u.left-=r}else{u.left=k(u.left-v,u.left)}}}},top:function(t,s){var r=s.within,x=r.isWindow?r.scrollTop:r.offset.top,y=s.within.height,v=t.top-s.collisionPosition.marginTop,w=x-v,u=v+s.collisionHeight-y-x,q;if(s.collisionHeight>y){if(w>0&&u<=0){q=t.top+w+s.collisionHeight-y-x;t.top+=w-q}else{if(u>0&&w<=0){t.top=x}else{if(w>u){t.top=x+y-s.collisionHeight}else{t.top=x}}}}else{if(w>0){t.top+=w}else{if(u>0){t.top-=u}else{t.top=k(t.top-v,t.top)}}}}},flip:{left:function(w,v){var u=v.within,A=u.offset.left+u.scrollLeft,D=u.width,s=u.isWindow?u.scrollLeft:u.offset.left,x=w.left-v.collisionPosition.marginLeft,B=x-s,r=x+v.collisionWidth-D-s,z=v.my[0]==="left"?-v.elemWidth:v.my[0]==="right"?v.elemWidth:0,C=v.at[0]==="left"?v.targetWidth:v.at[0]==="right"?-v.targetWidth:0,t=-2*v.offset[0],q,y;if(B<0){q=w.left+z+C+t+v.collisionWidth-D-A;if(q<0||q<p(B)){w.left+=z+C+t}}else{if(r>0){y=w.left-v.collisionPosition.marginLeft+z+C+t-s;if(y>0||p(y)<r){w.left+=z+C+t}}}},top:function(v,u){var t=u.within,C=t.offset.top+t.scrollTop,D=t.height,q=t.isWindow?t.scrollTop:t.offset.top,x=v.top-u.collisionPosition.marginTop,z=x-q,w=x+u.collisionHeight-D-q,A=u.my[1]==="top",y=A?-u.elemHeight:u.my[1]==="bottom"?u.elemHeight:0,E=u.at[1]==="top"?u.targetHeight:u.at[1]==="bottom"?-u.targetHeight:0,s=-2*u.offset[1],B,r;if(z<0){r=v.top+y+E+s+u.collisionHeight-D-C;if((v.top+y+E+s)>z&&(r<0||r<p(z))){v.top+=y+E+s}}else{if(w>0){B=v.top-u.collisionPosition.marginTop+y+E+s-q;if((v.top+y+E+s)>w&&(B>0||p(B)<w)){v.top+=y+E+s}}}}},flipfit:{left:function(){e.coral.position.flip.left.apply(this,arguments);e.coral.position.fit.left.apply(this,arguments)},top:function(){e.coral.position.flip.top.apply(this,arguments);e.coral.position.fit.top.apply(this,arguments)}}};(function(){var u,w,r,t,s,q=document.getElementsByTagName("body")[0],v=document.createElement("div");
u=document.createElement(q?"div":"body");r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(q){e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"})}for(s in r){u.style[s]=r[s]}u.appendChild(v);w=q||document.documentElement;w.insertBefore(u,w.firstChild);v.style.cssText="position: absolute; left: 10.7432222px;";t=e(v).offset().left;m=t>10&&t<11;u.innerHTML="";w.removeChild(u)})()}(jQuery));

/*!
 * 4.0
 * 
 * JS
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 *    jquery.coral.panel.js
 *    jquery.validatehelper.js
 */
(function(a){a.component("coral.control",{version:"4.0.2",options:{},_create:function(){},_outerButtons:function(){this.uiDialogOuterButtonPanel=a('<span class="coral-outerbuttonset coral-corner-all "></span>');this.component().append(this.uiDialogOuterButtonPanel);this._createButtons(this.options.buttonOptions,null,this.uiDialogOuterButtonPanel);this.component().css("padding-right",this.uiDialogOuterButtonPanel.outerWidth()+8)},_createButtonPanel:function(){for(var d=0;d<this.options.buttons.length;d++){var f="right";var g="inner";var c="innerRight";var b="prepend",e=this.options.buttons;if(e[d]["innerLeft"]){c="innerLeft";f="left";this._addButtonPanel(g,c,f,b,d)}if(e[d]["innerRight"]){c="innerRight";f="right";b="append";this._addButtonPanel(g,c,f,b,d)}if(e[d]["outerRight"]){c="outerRight";f="right";g="outer";b="append";this._addButtonPanel(g,c,f,b,d)}if(e[d]["outerLeft"]){c="outerLeft";f="left";g="outer";this._addButtonPanel(g,c,f,b,d)}if(!e[d]["innerLeft"]&&!e[d]["innerRight"]&&!e[d]["outerLeft"]&&!e[d]["outerRight"]){this.uiDialogButtonPanel=a("<span class='"+c+" coral-textbox-btn-icons coral-buttonset coral-corner-"+f+" '></span>");this._createButtons(this.options.buttons,f,this.uiDialogButtonPanel);this.elementBorder.append(this.uiDialogButtonPanel);this.elementBorder.css("padding-right",this.uiDialogButtonPanel.outerWidth());this.uiDialogButtonPanel.css("right",0)}}},_addButtonPanel:function(g,d,f,b,c){this.uiDialogButtonPanel=a("<span class='"+d+" coral-textbox-btn-icons coral-buttonset coral-corner-"+f+" '></span>");this.uiDialogOuterButtonPanel=a('<span class="coral-outerbuttonset coral-corner-all "></span>');if(g=="inner"){this._createButtons(this.options.buttons[c][d],f,this.uiDialogButtonPanel);this.elementBorder[b](this.uiDialogButtonPanel);this.elementBorder.css("padding-"+f,this.uiDialogButtonPanel.outerWidth());
this.uiDialogButtonPanel.css(f,0)}else{this.component()[b](this.uiDialogOuterButtonPanel);this._createButtons(this.options.buttons[c][d],null,this.uiDialogOuterButtonPanel);var e=this.uiDialogOuterButtonPanel.outerWidth()+2;this.component().css("padding-"+f,this.uiDialogOuterButtonPanel.outerWidth()+8);this.uiDialogOuterButtonPanel.css(f,0).css("width",e)}},_createButtons:function(d,e,b){var c=this;if(a.isEmptyObject(d)){d={}}if(d instanceof Array==false){d=[d]}a.each(d,function(h){var l,g="",f="",j=a.extend({type:"button"},{click:this.click});this.click=this.onClick||this.click;delete this.onClick;var k=this.click||a.noop;j.click=function(){k.apply(c.element[0],arguments)};delete this.click;f="coral-corner-all";if(e=="left"){if(h==0){g="coral-corner-left"}a("<button></button>",j).button(this).addClass(g).removeClass(f).appendTo(b)}else{if(e=="right"){if(h==(d.length-1)){g="coral-corner-right"}a("<button></button>",j).button(this).addClass(g).removeClass(f).appendTo(b)}else{a("<button></button>",j).button(this).addClass(g).appendTo(b)}}this.click=k})}})})(jQuery);

(function(a){a.grid={defaults:{recordtext:"{0} - {1}\u3000 {2} ",emptyrecords:"",loadtext:"...",pgtext:" {0}  {1} "},search:{caption:"...",Find:"",Reset:"",odata:["\u3000\u3000","\u3000\u3000","\u3000\u3000","","\u3000\u3000","","","","\u3000\u3000","","","","\u3000\u3000",""],groupOps:[{op:"AND",text:""},{op:"OR",text:""}],matchText:" ",rulesText:" "},edit:{bUpdate:"",addCaption:"",editCaption:"",bSubmit:"",bCancel:"",bClose:"",saveData:"",bYes:"",bNo:"",bExit:"",msg:{required:"",number:"",minValue:" ",maxValue:" ",email:"e-mail",integer:"",date:"",url:" ('http://'  'https://')",nodefined:" ",novalue:" ",customarray:"",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"",bClose:""},del:{caption:"",msg:"",bSubmit:"",bCancel:""},nav:{edittext:"",edittitle:"",addtext:"",addtitle:"",deltext:"",deltitle:"",searchtext:"",searchtitle:"",refreshtext:"",refreshtitle:"",alertcap:"",alerttext:"",viewtext:"",viewtitle:""},col:{caption:"",bSubmit:"",bCancel:""},errors:{errcap:"",nourl:"url",norecords:"",model:"colNames  colModel "},formatter:{integer:{thousandsSeparator:" ",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:" ",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:" ",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(b){return b<11||b>13?["st","nd","rd","th"][Math.min((b-1)%10,3)]:"th"
},srcformat:"Y-m-d",newformat:"m-d-Y",masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"Y/j/n",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:false},baseLinkUrl:"",showAction:"",target:"",checkbox:{},idName:"id"}}})(jQuery);

(function(a){a.extend(a.grid,{showModal:function(b){b.w.show()},closeModal:function(b){b.w.hide().attr("aria-hidden","true");if(b.o){b.o.remove()}},hideModal:function(b,f){f=a.extend({jqm:true,gb:""},f||{});if(f.onClose){var c=f.onClose(b);if(typeof c=="boolean"&&!c){return}}if(a.fn.jqm&&f.jqm===true){a(b).attr("aria-hidden","true").jqmHide()}else{if(f.gb!==""){try{a(".jqgrid-overlay:first",f.gb).hide()}catch(d){}}a(b).hide().attr("aria-hidden","true")}},findPos:function(c){var d=0,b=0;if(c.offsetParent){do{d+=c.offsetLeft;b+=c.offsetTop}while(c=c.offsetParent)}return[d,b]},createModal:function(i,q,m,b,v,c,h){var k=document.createElement("div"),s,l=this;h=a.extend({},h||{});s=a(m.gbox).attr("dir")=="rtl"?true:false;k.className="coral-component coral-component-content coral-corner-all coral-jqdialog";k.id=i.themodal;var u=document.createElement("div");u.className="coral-jqdialog-titlebar coral-component-header coral-corner-all coral-helper-clearfix";u.id=i.modalhead;a(u).append("<span class='coral-jqdialog-title'>"+m.caption+"</span>");var n=a("<a href='javascript:void(0)' class='coral-jqdialog-titlebar-close coral-corner-all'></a>").hover(function(){n.addClass("coral-state-hover")},function(){n.removeClass("coral-state-hover")}).append("<span class='coral-icon coral-icon-closethick'></span>");a(u).append(n);if(s){k.dir="rtl";a(".coral-jqdialog-title",u).css("float","right");a(".coral-jqdialog-titlebar-close",u).css("left",0.3+"em")}else{k.dir="ltr";a(".coral-jqdialog-title",u).css("float","left");a(".coral-jqdialog-titlebar-close",u).css("right",0.3+"em")}var w=document.createElement("div");a(w).addClass("coral-jqdialog-content coral-component-content").attr("id",i.modalcontent);a(w).append(q);k.appendChild(w);a(k).prepend(u);if(c===true){a("body").append(k)}else{if(typeof c=="string"){a(c).append(k)}else{a(k).insertBefore(b)}}a(k).css(h);if(typeof m.jqModal==="undefined"){m.jqModal=true}var o={};if(a.fn.jqm&&m.jqModal===true){if(m.left===0&&m.top===0&&m.overlay){var d=[];
d=this.findPos(v);m.left=d[0]+4;m.top=d[1]+4}o.top=m.top+"px";o.left=m.left}else{if(m.left!==0||m.top!==0){o.left=m.left;o.top=m.top+"px"}}a("a.coral-jqdialog-titlebar-close",u).click(function(){var e=a("#"+a.grid.jqID(i.themodal)).data("onClose")||m.onClose;var p=a("#"+a.grid.jqID(i.themodal)).data("gbox")||m.gbox;l.hideModal("#"+a.grid.jqID(i.themodal),{gb:p,jqm:m.jqModal,onClose:e});return false});if(m.width===0||!m.width){m.width=300}if(m.height===0||!m.height){m.height=200}if(!m.zIndex){var f=a(b).parents("*[role=dialog]").filter(":first").css("z-index");if(f){m.zIndex=parseInt(f,10)+2}else{m.zIndex=950}}var g=0;if(s&&o.left&&!c){g=a(m.gbox).width()-(!isNaN(m.width)?parseInt(m.width,10):0)-8;o.left=parseInt(o.left,10)+parseInt(g,10)}if(o.left){o.left+="px"}a(k).css(a.extend({width:isNaN(m.width)?"auto":m.width+"px",height:isNaN(m.height)?"auto":m.height+"px",zIndex:m.zIndex,overflow:"hidden"},o)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":i.modalhead,"aria-hidden":"true"});if(typeof m.drag=="undefined"){m.drag=true}if(typeof m.resize=="undefined"){m.resize=true}if(m.drag){a(u).css("cursor","move");if(a.fn.jqDrag){a(k).jqDrag(u)}else{try{a(k).draggable({handle:a("#"+a.grid.jqID(u.id))})}catch(t){}}}if(m.resize){if(a.fn.jqResize){a(k).append("<div class='jqResize coral-resizable-handle coral-resizable-se coral-icon coral-icon-gripsmall-diagonal-se coral-icon-grip-diagonal-se'></div>");a("#"+a.grid.jqID(i.themodal)).jqResize(".jqResize",i.scrollelm?"#"+a.grid.jqID(i.scrollelm):false)}else{try{a(k).resizable({handles:"se, sw",alsoResize:i.scrollelm?"#"+a.grid.jqID(i.scrollelm):false})}catch(j){}}}if(m.closeOnEscape===true){a(k).keydown(function(r){if(r.which==27){var p=a("#"+a.grid.jqID(i.themodal)).data("onClose")||m.onClose;l.hideModal(this,{gb:m.gbox,jqm:m.jqModal,onClose:p})}})}},viewModal:function(b,d){d=a.extend({toTop:true,overlay:10,modal:false,overlayClass:"coral-component-overlay",onShow:this.showModal,onHide:this.closeModal,gbox:"",jqm:true,jqM:true},d||{});
if(a.fn.jqm&&d.jqm===true){if(d.jqM){a(b).attr("aria-hidden","false").jqm(d).jqmShow()}else{a(b).attr("aria-hidden","false").jqmShow()}}else{if(d.gbox!==""){a(".jqgrid-overlay:first",d.gbox).show();a(b).data("gbox",d.gbox)}a(b).show().attr("aria-hidden","false");try{a(":input:visible",b)[0].focus()}catch(c){}}},info_dialog:function(q,k,c,p){var n={width:290,height:"auto",dataheight:"auto",drag:true,resize:false,caption:"<b>"+q+"</b>",left:250,top:170,zIndex:1000,jqModal:true,modal:false,closeOnEscape:true,align:"center",buttonalign:"center",buttons:[]};a.extend(n,p||{});var f=n.jqModal,r=this;if(a.fn.jqm&&!f){f=false}var h="";if(n.buttons.length>0){for(var g=0;g<n.buttons.length;g++){if(typeof n.buttons[g].id=="undefined"){n.buttons[g].id="info_button_"+g}h+="<a href='javascript:void(0)' id='"+n.buttons[g].id+"' class='fm-button coral-state-default coral-corner-all'>"+n.buttons[g].text+"</a>"}}var l=isNaN(n.dataheight)?n.dataheight:n.dataheight+"px",o="text-align:"+n.align+";";var b="<div id='info_id'>";b+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+l+";"+o+"'>"+k+"</div>";b+=c?"<div class='coral-component-content coral-helper-clearfix' style='text-align:"+n.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button coral-state-default coral-corner-all'>"+c+"</a>"+h+"</div>":h!==""?"<div class='coral-component-content coral-helper-clearfix' style='text-align:"+n.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+h+"</div>":"";b+="</div>";try{if(a("#info_dialog").attr("aria-hidden")=="false"){this.hideModal("#info_dialog",{jqm:f})}a("#info_dialog").remove()}catch(j){}this.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},b,n,"","",true);if(h){a.each(n.buttons,function(e){a("#"+a.grid.jqID(this.id),"#info_id").bind("click",function(){n.buttons[e].onClick.call(a("#info_dialog"));
return false})})}a("#closedialog","#info_id").click(function(){r.hideModal("#info_dialog",{jqm:f});return false});a(".fm-button","#info_dialog").hover(function(){a(this).addClass("coral-state-hover")},function(){a(this).removeClass("coral-state-hover")});if(a.isFunction(n.beforeOpen)){n.beforeOpen()}this.viewModal("#info_dialog",{onHide:function(e){e.w.hide().remove();if(e.o){e.o.remove()}},modal:n.modal,jqm:f});if(a.isFunction(n.afterOpen)){n.afterOpen()}try{a("#info_dialog").focus()}catch(d){}},createEl:function(f,g,v,k,t){var u="",p=this;function l(i,e){if(a.isFunction(e.dataInit)){e.dataInit.call(p,i)}if(e.dataEvents){a.each(e.dataEvents,function(){if(this.data!==undefined){a(i).bind(this.type,this.data,this.fn)}else{a(i).bind(this.type,this.fn)}})}return e}function r(z,i,e){if(!i.hasOwnProperty("id")){a(z).attr("id",a.grid.randId())}}switch(f){case"textarea":u=document.createElement("textarea");if(k){if(!g.cols){a(u).css({width:"98%"})}}else{if(!g.cols){g.cols=20}}if(!g.rows){g.rows=2}if(v=="&nbsp;"||v=="&#160;"||(v.length==1&&v.charCodeAt(0)==160)){v=""}u.value=v;r(u,g);a(u).attr({role:"textbox",multiline:"true"});break;case"select":u=document.createElement("select");u.setAttribute("role","select");var d,h=[];if(g.multiple===true){d=true;u.multiple="multiple";a(u).attr("aria-multiselectable","true")}else{d=false}if(typeof(g.dataUrl)!="undefined"){a.ajax(a.extend({url:g.dataUrl,type:"GET",dataType:"html",context:{elem:u,options:g,vl:v},success:function(E){var z,i=[],D=this.elem,C=this.vl,A=a.extend({},this.options),B=A.multiple===true;if(a.isFunction(A.buildSelect)){var e=A.buildSelect.call(p,E);z=a(e).html()}else{z=a(E).html()}if(z){a(D).append(z);r(D,A);if(typeof A.size==="undefined"){A.size=B?3:1}if(B){i=C.split(",");i=a.map(i,function(F){return a.trim(F)})}else{i[0]=a.trim(C)}setTimeout(function(){a("option",D).each(function(F){if(F===0&&D.multiple){this.selected=false}a(this).attr("role","option");if(a.inArray(a.trim(a(this).text()),i)>-1||a.inArray(a.trim(a(this).val()),i)>-1){this.selected="selected"
}})},0)}}},t||{}))}else{if(g.value){var o;if(typeof g.size==="undefined"){g.size=d?3:1}if(d){h=v.split(",");h=a.map(h,function(e){return a.trim(e)})}if(typeof g.value==="function"){g.value=g.value()}var q,n,j,m=g.separator===undefined?":":g.separator,w=g.delimiter===undefined?";":g.delimiter;if(typeof g.value==="string"){q=g.value.split(w);for(o=0;o<q.length;o++){n=q[o].split(m);if(n.length>2){n[1]=a.map(n,function(i,e){if(e>0){return i}}).join(m)}j=document.createElement("option");j.setAttribute("role","option");j.value=n[0];j.innerHTML=n[1];u.appendChild(j);if(!d&&(a.trim(n[0])==a.trim(v)||a.trim(n[1])==a.trim(v))){j.selected="selected"}if(d&&(a.inArray(a.trim(n[1]),h)>-1||a.inArray(a.trim(n[0]),h)>-1)){j.selected="selected"}}}else{if(typeof g.value==="object"){var c=g.value;for(var y in c){if(c.hasOwnProperty(y)){j=document.createElement("option");j.setAttribute("role","option");j.value=y;j.innerHTML=c[y];u.appendChild(j);if(!d&&(a.trim(y)==a.trim(v)||a.trim(c[y])==a.trim(v))){j.selected="selected"}if(d&&(a.inArray(a.trim(c[y]),h)>-1||a.inArray(a.trim(y),h)>-1)){j.selected="selected"}}}}}r(u,g,["value"])}}break;case"datepicker":case"autocomplete":case"text":case"password":case"button":var x;if(f=="button"){x="button"}else{x="textbox"}u=document.createElement("input");if(f=="datepicker"){u.type="text"}else{if(f=="autocomplete"){u.type="text"}else{u.type=f}}u.value=v;r(u,g);if(f!="button"){if(k){if(!g.size){a(u).css({width:"98%"})}}else{if(!g.size){g.size=20}}}a(u).attr("role",x);break;case"image":case"file":u=document.createElement("input");u.type=f;r(u,g);break;case"custom":u=document.createElement("span");try{if(a.isFunction(g.custom_element)){var b=g.custom_element.call(p,v,g);if(b){b=a(b).addClass("customelement").attr({id:g.id,name:g.name});a(u).empty().append(b)}else{throw"e2"}}else{throw"e1"}}catch(s){if(s=="e1"){this.info_dialog(a.grid.errors.errcap,"function 'custom_element' "+a.grid.edit.msg.nodefined,a.grid.edit.bClose)}if(s=="e2"){this.info_dialog(a.grid.errors.errcap,"function 'custom_element' "+a.grid.edit.msg.novalue,a.grid.edit.bClose)
}else{this.info_dialog(a.grid.errors.errcap,typeof(s)==="string"?s:s.message,a.grid.edit.bClose)}}break;case"checkbox":u=document.createElement("input");u.type=f;u.value=v;r(u,g);break;case"combobox":u=document.createElement("input");u.type="text";u.value=v;r(u,g);break;case"combotree":u=document.createElement("input");u.type="text";u.value=v;r(u,g);break;default:break}return u},checkDate:function(o,d){var m=function(i){return(((i%4===0)&&(i%100!==0||(i%400===0)))?29:28)},l=function(r){for(var j=1;j<=r;j++){this[j]=31;if(j==4||j==6||j==9||j==11){this[j]=30}if(j==2){this[j]=29}}return this};var f={},q;o=o.toLowerCase();if(o.indexOf("/")!=-1){q="/"}else{if(o.indexOf("-")!=-1){q="-"}else{if(o.indexOf(".")!=-1){q="."}else{q="/"}}}o=o.split(q);d=d.split(q);if(d.length!=3){return false}var h=-1,p,g=-1,e=-1;for(var k=0;k<o.length;k++){var c=isNaN(d[k])?0:parseInt(d[k],10);f[o[k]]=c;p=o[k];if(p.indexOf("y")!=-1){h=k}if(p.indexOf("m")!=-1){e=k}if(p.indexOf("d")!=-1){g=k}}if(o[h]=="y"||o[h]=="yyyy"){p=4}else{if(o[h]=="yy"){p=2}else{p=-1}}var b=l(12),n;if(h===-1){return false}else{n=f[o[h]].toString();if(p==2&&n.length==1){p=1}if(n.length!=p||(f[o[h]]===0&&d[h]!="00")){return false}}if(e===-1){return false}else{n=f[o[e]].toString();if(n.length<1||f[o[e]]<1||f[o[e]]>12){return false}}if(g===-1){return false}else{n=f[o[g]].toString();if(n.length<1||f[o[g]]<1||f[o[g]]>31||(f[o[e]]==2&&f[o[g]]>m(f[o[h]]))||f[o[g]]>b[f[o[e]]]){return false}}return true},isEmpty:function(b){if(b.match(/^\s+$/)||b===""){return true}else{return false}},checkTime:function(d){var c=/^(\d{1,2}):(\d{2})([ap]m)?$/,b;if(!this.isEmpty(d)){b=d.match(c);if(b){if(b[3]){if(b[1]<1||b[1]>12){return false}}else{if(b[1]>23){return false}}if(b[2]>59){return false}}else{return false}}return true},checkValues:function(d,p,l,q,j){var h,k,r,c,m;if(typeof(q)==="undefined"){if(typeof(p)=="string"){for(k=0,m=l.options.colModel.length;k<m;k++){if(l.options.colModel[k].name==p){h=l.options.colModel[k].editrules;p=k;try{r=l.options.colModel[k].formoptions.label
}catch(o){}break}}}else{if(p>=0){h=l.options.colModel[p].editrules}}}else{h=q;r=j===undefined?"_":j}if(h){if(!r){r=l.options.colNames[p]}if(h.required===true){if(this.isEmpty(d)){return[false,r+": "+a.grid.edit.msg.required,""]}}var f=h.required===false?false:true;if(h.number===true){if(!(f===false&&this.isEmpty(d))){if(isNaN(d)){return[false,r+": "+a.grid.edit.msg.number,""]}}}if(typeof h.minValue!="undefined"&&!isNaN(h.minValue)){if(parseFloat(d)<parseFloat(h.minValue)){return[false,r+": "+a.grid.edit.msg.minValue+" "+h.minValue,""]}}if(typeof h.maxValue!="undefined"&&!isNaN(h.maxValue)){if(parseFloat(d)>parseFloat(h.maxValue)){return[false,r+": "+a.grid.edit.msg.maxValue+" "+h.maxValue,""]}}var b;if(h.email===true){if(!(f===false&&this.isEmpty(d))){b=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(!b.test(d)){return[false,r+": "+a.grid.edit.msg.email,""]}}}if(h.integer===true){if(!(f===false&&this.isEmpty(d))){if(isNaN(d)){return[false,r+": "+a.grid.edit.msg.integer,""]}if((d%1!==0)||(d.indexOf(".")!=-1)){return[false,r+": "+a.grid.edit.msg.integer,""]}}}if(h.date===true){if(!(f===false&&this.isEmpty(d))){if(l.options.colModel[p].formatoptions&&l.options.colModel[p].formatoptions.newformat){c=l.options.colModel[p].formatoptions.newformat
}else{c=l.options.colModel[p].datefmt||"Y-m-d"}if(!this.checkDate(c,d)){return[false,r+": "+a.grid.edit.msg.date+" - "+c,""]}}}if(h.time===true){if(!(f===false&&this.isEmpty(d))){if(!this.checkTime(d)){return[false,r+": "+a.grid.edit.msg.date+" - hh:mm (am/pm)",""]}}}if(h.url===true){if(!(f===false&&this.isEmpty(d))){b=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;if(!b.test(d)){return[false,r+": "+a.grid.edit.msg.url,""]}}}if(h.custom===true){if(!(f===false&&this.isEmpty(d))){if(a.isFunction(h.custom_func)){var n=h.custom_func.call(l,d,r);if(a.isArray(n)){return n}else{return[false,a.grid.edit.msg.customarray,""]}}else{return[false,a.grid.edit.msg.customfcheck,""]}}}}return[true,"",""]}})})(jQuery);

(function($){$.grid=$.grid||{};$.component("coral.grid",{version:"4.0.1",castProperties:["rowEditButtons","data","initData","rowList","pagerTemplate"],options:{},grid:{},diff:2,getScrollBarWidth:function(){var inner=document.createElement("p");inner.style.width="100%";inner.style.height="200px";var outer=document.createElement("div");outer.style.position="absolute";outer.style.top="0px";outer.style.left="0px";outer.style.visibility="hidden";outer.style.width="200px";outer.style.height="150px";outer.style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth}document.body.removeChild(outer);return(w1-w2)+this.diff},_create:function(){var options=this.options,that=this,activeClass="coral-state-active",focusClass="coral-state-focus",id=this.element.uniqueId().attr("id");options.id=id;var p={_index:{},altRows:false,altclass:" coral-priority-secondary ",ajaxGridOptions:{},asyncType:"post",autoSave:false,autoValid:true,autoWidth:true,allowSaveOnError:true,cls:"",caption:"",colModel:[],colNames:[],cellLayout:1,cellEdit:false,cellsubmit:"clientArray",clicksToEdit:2,data:[],datatype:"json",direction:"ltr",deselectAfterSort:true,emptyrecords:"",ExpandColumn:null,height:150,idPrefix:"",initData:false,customPicgrid:$.noop(),gridview:false,groupHeaders:[],groupHeader:false,fitStyle:"auto",forceFit:false,hoverrows:true,lastsort:0,loadonce:true,loadui:"enable",loadtext:"Loading ...",minWidth:true,multiselect:false,multiselectWidth:30,multikey:"",model:"grid",page:1,pager:"",pagerStyle:"flex",pginput:true,records:0,rninput:true,rowEditButtons:["update","cancel"],pgbuttons:true,picTemplate:"picTemplate",postData:{},prmNames:{page:"P_pageNumber",rows:"P_pagesize",sort:"P_orders",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},rowNum:20,rowNumMax:200,rownumbers:false,rownumWidth:35,rowList:[10,20,30],savedRow:[],scrollOffset:this.getScrollBarWidth(),selarrrow:[],singleselect:false,sortorder:"asc",treeGrid:false,treeGridModel:"adjacency",treeReader:{},treeANode:-1,tree_root_level:0,onSortableColumns:false,sortableColumnsOptions:{},onSortableRows:false,beforeSortableRows:false,afterSortableRows:false,editableRows:false,shrinkToFit:true,toppager:false,toolbar:[false,""],url:"",useProp:true,viewsortcols:[false,"vertical",true],viewrecords:true,minIndex:null,maxIndex:null,preIndex:null,beforePopulate:null};
options=$.extend(true,{},p,$.grid.defaults,this.options);if(options.model=="pic"){options.model="card"}this.options=options;this.options.isValid=true;options.postData=$.coral.toFunction(options.postData);options.localReader=$.extend(true,{root:"data",page:"pageNumber",total:"totalPages",records:"total",repeatitems:false,cell:"cell",id:"id",userData:"userData",subgrid:{root:"data",repeatitems:true,cell:"cell"}},options.localReader);options.jsonReader=$.extend(true,{root:"data",page:"pageNumber",total:"totalPages",records:"total",repeatitems:false,cell:"cell",id:"id",userData:"userData"},options.jsonReader);this.id=id;var grid={groupHeader:[],headers:[],cols:[],footers:[],dragStart:function(i,x,y){var grid=this;this.resizing={idx:i,startX:x.clientX,sOL:y[0]};grid.columnsView.style.cursor="col-resize";this.curGbox=$("#rs_m"+$.grid.coralID(that.options.id),"#"+$.grid.coralID(that.options.id));this.curGbox.css({display:"block",left:y[0],top:y[1],height:y[2]});that._trigger("onResizeStart",x,[{index:i}]);document.onselectstart=function(){return false}},dragMove:function(x){if(this.resizing){var diff=x.clientX-this.resizing.startX,h=this.headers[this.resizing.idx],newWidth=that.options.direction==="ltr"?h.width+diff:h.width-diff,hn,nWn;$("#test").html(diff);if(newWidth>33){this.curGbox.css({left:this.resizing.sOL+diff});if(that.options.forceFit===true){hn=this.headers[this.resizing.idx+options.nv];nWn=that.options.direction==="ltr"?hn.width-diff:hn.width+diff;if(nWn>33){h.newWidth=newWidth;hn.newWidth=nWn}}else{this.newWidth=that.options.direction==="ltr"?that.options.tblwidth+diff:that.options.tblwidth-diff;h.newWidth=newWidth}}}},dragEnd:function(){this.columnsView.style.cursor="default";if(this.resizing){var idx=this.resizing.idx,nw=this.headers[idx].newWidth||this.headers[idx].width;nw=parseInt(nw,10);this.resizing=false;$("#rs_m"+$.grid.coralID(that.options.id)).css("display","none");that.options.colModel[idx].width=nw;this.headers[idx].width=nw;this.headers[idx].el.style.width=nw+"px";
this.cols[idx].style.width=nw+"px";if($("table:first",this.rowsView).hasClass("coral-grid-btable-frozen")){$("tr.jqgfirstrow>td:eq("+idx+")",$("table:first",this.rowsView))[0].style.width=nw+"px"}var groupHeader=$("tr.jqg-first-row-header>th:eq("+idx+")",$("table:first",this.columnsView));if(groupHeader.length>0){groupHeader[0].style.width=nw+"px"}if(this.footers.length>0){this.footers[idx].style.width=nw+"px"}if(that.options.forceFit===true){nw=this.headers[idx+options.nv].newWidth||this.headers[idx+options.nv].width;this.headers[idx+options.nv].width=nw;this.headers[idx+options.nv].el.style.width=nw+"px";this.cols[idx+options.nv].style.width=nw+"px";if(this.footers.length>0){this.footers[idx+options.nv].style.width=nw+"px"}that.options.colModel[idx+options.nv].width=nw;groupHeader=$("tr.jqg-first-row-header>th:eq("+(idx+options.nv)+")",$("table:first",this.columnsView));if(groupHeader.length>0){groupHeader[0].style.width=nw+"px"}}else{that.options.tblwidth=this.newWidth||that.options.tblwidth;$("table",this.rowsView).css("width",that.options.tblwidth+"px");$("table:first",this.columnsView).css("width",that.options.tblwidth+"px");this.columnsView.scrollLeft=this.rowsView.scrollLeft;if(that.options.footerrow){$("table:first",this.sDiv).css("width",p.tblwidth+"px");this.sDiv.scrollLeft=this.rowsView.scrollLeft}}that._trigger("onResizeStop",null,[{newWidth:nw,index:idx,headers:this.headers}])}this.curGbox=null;document.onselectstart=function(){return true}},selectionPreserver:function(that){var opts=that.options,sr=opts.selrow,sra=opts.selarrrow?$.makeArray(opts.selarrrow):null,left=that.grid.rowsView.scrollLeft,restoreSelection=function(){var i;opts.selrow=null;opts.selarrrow=[];if(opts.multiselect&&sra&&sra.length>0){for(i=0;i<sra.length;i++){if(sra[i]!=sr){$(that.element).grid("setSelection",sra[i],false,null)}}}if(sr){$(that.element).grid("setSelection",sr,false,null)}that.grid.rowsView.scrollLeft=left;$(that.element).unbind(".selectionPreserver",restoreSelection)};
$(that.element).bind("gridComplete.selectionPreserver",restoreSelection)}};this.grid=grid;var gridColumns=this.element.find(">div").filter(function(){if($(this).hasClass(that.options.id)){return false}return true}),gridRows=$("<div class='coral-grid-rows'></div>");if(gridColumns.length==0){this.element.prepend("<div></div>");gridColumns=this.element.find(">div").filter(function(){if($(this).hasClass(that.id)){return false}return true})}that.gridRows=gridRows;that.gridColumns=gridColumns;that._analyzeColumns(gridColumns);gridColumns.addClass("coral-grid-columns").after(gridRows);grid.rowsView=document.createElement("div");$(grid.rowsView).addClass("coral-grid-rows-view").appendTo(gridRows);$("<div class='coral-grid-loading' id='load_"+$.grid.coralID(that.options.id)+"'>"+that.options.loadtext+"</div>").appendTo($(grid.rowsView));$("<div class='coral-grid-noRecordsTips' id='noRecordsTips_"+$.grid.coralID(that.options.id)+"'>"+that.options.emptyrecords+"</div>").appendTo($(grid.rowsView));grid.columnsView=document.createElement("div");$(grid.columnsView).addClass("coral-state-default coral-grid-columns-view").appendTo(gridColumns).append("<div class='coral-grid-topRightCell'></div>");that.pic=$("<ul class='coral-pic'></ul>");gridColumns.addClass("coral-grid-columns").after(that.pic);if(that.options.grouping===true){that.options.scroll=false;that.options.rownumbers=false;that.options.subGrid=false;that.options.treeGrid=false;that.options.gridview=true}if(this.options.treeGrid===true){try{$(that.element).grid("setTreeGrid")}catch(_){}if(that.options.datatype!="local"){that.options.localReader={id:"_id_"}}}if(this.options.subGrid){try{$(that.element).grid("setSubGrid")}catch(s){}}if(this.options.multiselect){this.options.singleselect=false}this.options.keyIndex=false;for(var i=0;i<this.options.colModel.length;i++){this.options.colModel[i]=$.extend(true,{},this.options.cmTemplate,this.options.colModel[i].template||{},this.options.colModel[i]);if(this.options.keyIndex===false&&this.options.colModel[i].key===true){this.options.keyIndex=i
}}if(this.options.multiselect){this.options.colNames.unshift("<input role='checkbox' id='cb_"+this.options.id+"' class='cbox' type='checkbox'/>");this.options.colModel.unshift({name:"cb",width:that.options.multiselectWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}else{if(this.options.singleselect){this.options.colNames.unshift("");this.options.colModel.unshift({name:"cb",width:that.options.multiselectWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}}if(this.options.rownumbers){this.options.colNames.unshift("");this.options.colModel.unshift({name:"rn",width:that.options.rownumWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}that._transToGrid();that._transToPicgrid();that._transPagers();that._cvH=$(grid.columnsView).height();if("fill"!==options.fitStyle){}that._setGridHeight(that.options.height);if(options.model=="grid"){that.pic.hide()}else{if(options.model=="card"){that.gridRows.hide();that.gridColumns.hide()}}that.setFrozenColumns();this._populate();that._setUpEvent();$(window).unload(function(){that=null});this._on(this.document,{mousedown:function(event){if(this.options.autoSave&&this._closeOnDocumentClick(event)){this.restoreAll(event)}}})},_closeOnDocumentClick:function(event){return !$(event.target).closest(".coral-grid").length},_transPagers:function(){var that=this;this.pagers=$("."+this.id);this.pagers.each(function(ind){$(this).addClass("coral-grid-pager").removeClass(that.id).attr("id","pager_"+ind+++"_"+that.id)});if(this.pagers){this.pagers.each(function(i){that._setPager(that.pagers[i].id,"")});that.options.pager="."+that.id}},toolbar:function(){return $(".pager-toolbar",this.element)},_transToPicgrid:function(){var that=this;that.pic.css({height:230,overflow:"auto"})},_transToGrid:function(){var that=this,options=this.options;if($.inArray(that.options.multikey,that._sortkeys)==-1){that.options.multikey=false}that.options.sortorder=that.options.sortorder.toLowerCase();
this.element.addClass("coral-grid");this.element.addClass(that.options.cls);that._transGridView()},_transGridView:function(){var that=this,options=this.options,grid=this.grid;var dir=options.direction,i;var thead="<thead><tr class='coral-grid-labels' role='rowheader'>",tdc,idn,w,res,sort,td,ptr,tbody,imgs,iac="",idc="";if(options.shrinkToFit===true&&options.forceFit===true){for(i=options.colModel.length-1;i>=0;i--){if(!options.colModel[i].hidden){options.colModel[i].resizable=false;break}}}$.each(this.options.colModel,function(){if(typeof this.hidden==="undefined"){this.hidden=false}});imgs="<span class='s-ico' style='display:none'><span sort='asc' class='coral-grid-ico-sort coral-icon-asc"+iac+" coral-state-disabled icon icon-arrow-up2 coral-sort-"+dir+"'></span>";imgs+="<span sort='desc' class='coral-grid-ico-sort coral-icon-desc"+idc+" coral-state-disabled icon icon-arrow-down2 coral-sort-"+dir+"'></span></span>";for(i=0;i<options.colNames.length;i++){var tooltip=that.options.headertitles?(' title="'+$.grid.stripHtml(that.options.colNames[i])+'"'):"";var coralColumnSortableDisabledClass=options.colModel[i].columnSortable?"coral-columnSortable-disabled":"";thead+="<th id='"+options.id+"_"+options.colModel[i].name+"' role='columnheader' class='coral-state-default "+coralColumnSortableDisabledClass+" coral-th-column coral-th-"+dir+"'"+tooltip+">";idn=options.colModel[i].index||options.colModel[i].name;thead+="<div id='jqgh_"+options.id+"_"+options.colModel[i].name+"' "+tdc+">"+options.colNames[i];if(!options.colModel[i].width){options.colModel[i].width=150}else{options.colModel[i].width=parseInt(options.colModel[i].width,10)}if(typeof(options.colModel[i].title)!=="boolean"){options.colModel[i].title=true}if(idn==options.sortname){options.lastsort=i}thead+=imgs+"</div></th>"}thead+="</tr></thead>";imgs=null;var hTable=$("<table class='coral-grid-htable' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(thead);that.gridColumns.find(".coral-grid-columns-view").append(hTable);
$("thead tr:first th",grid.columnsView).hover(function(){$(this).addClass("coral-state-hover")},function(){$(this).removeClass("coral-state-hover")});that._setMultiselect();var ww;if(typeof(options.width)!=="undefined"){if(typeof(options.width)=="string"&&options.width=="auto"){var pw=$(that.element).innerWidth();that.options.width=pw>0?pw:"nw";ww=pw}else{ww=options.width}}that._trigger("beforePopulate",null,[]);this._setColWidth();$(that.element).append("<div class='coral-grid-resize-mark' id='rs_m"+that.options.id+"'>&#160;</div>");thead=$("thead:first",that.element).get(0);var thr=$("tr:first",thead),firstr="<tr class='jqgfirstrow' role='row' style='height:auto'>";$("th",thr).each(function(j){w=options.colModel[j].width;if(typeof options.colModel[j].resizable==="undefined"){options.colModel[j].resizable=true}if(options.colModel[j].resizable){res=document.createElement("span");$(res).html("&#160;").addClass("coral-grid-resize coral-grid-resize-"+dir);$(res).css("cursor","col-resize");$(this).addClass(options.resizeclass)}else{res=""}$(this).css("width",w+"px").prepend(res);var hdcol="";if(options.colModel[j].hidden){$(this).css("display","none");hdcol="display:none;"}firstr+="<td role='gridcell' style='height:0px;width:"+w+"px;"+hdcol+"'></td>";grid.headers.push({width:w,el:this});sort=options.colModel[j].sortable;if(typeof sort!=="boolean"){options.colModel[j].sortable=true;sort=true}var nm=options.colModel[j].name;if(!(nm=="cb"||nm=="subgrid"||nm=="rn")){if(options.viewsortcols[2]){$(">div",this).addClass("coral-grid-sortable")}}if(sort){if(options.viewsortcols[0]){$("div span.s-ico",this).show();if(j==options.lastsort){$("div span.coral-icon-"+options.sortorder,this).removeClass("coral-state-disabled")}}else{if(j==options.lastsort){$("div span.s-ico",this).show();$("div span.coral-icon-"+options.sortorder,this).removeClass("coral-state-disabled")}}}}).mousedown(function(e){if($(e.target).closest("th>span.coral-grid-resize").length!=1){return}var ci=that._getColumnHeaderIndex(this);
if(options.forceFit===true){options.nv=that._nextVisible(ci)}grid.dragStart(ci,e,that._getOffset(ci));return false}).click(function(e){if(options.disableClick){options.disableClick=false;return false}var s="th>div.coral-grid-sortable",r,d;if(!options.viewsortcols[2]){s="th>div>span>span.coral-grid-ico-sort"}var t=$(e.target).closest(s);if(t.length!=1){return}var ci=that._getColumnHeaderIndex(this);if(!options.viewsortcols[2]){r=true;d=t.attr("sort")}that._sortData($("div",this)[0].id,ci,r,d);return false});if(that.options.onSortableColumns&&$.fn.sortable){try{$(that.element).grid("sortableColumns",thr)}catch(e){}}firstr+="</tr>";var bTable=$("<table id='"+that.options.id+"_table' class='coral-grid-btable' role='grid' cellspacing='0' cellpadding='0' border='0'></table>").append(firstr);that.gridRows.find(".coral-grid-rows-view").append(bTable);this.rows=that.gridRows.find(".coral-grid-btable")[0].rows;this.element.prepend("<div class='coral-grid-view'></div>");if(that.options.caption.length>0){grid.caption=document.createElement("div");grid.caption.className="coral-grid-caption";$(grid.caption).html(that.options.caption);this.element.prepend(grid.caption)}$(grid.columnsView).add(grid.rowsView).parent().appendTo(this.element.find(".coral-grid-view"));if(options.shrinkToFit===true&&options.forceFit===true){$("table:first",grid.rowsView).css("width",that.grid.width+"px");$("table:first",grid.columnsView).css("width",that.grid.width+"px")}else{if(options.shrinkToFit===false){$("table:first",grid.rowsView).css("width",that.options.tblwidth+"px");$("table:first",grid.columnsView).css("width",that.options.tblwidth+"px")}}that._setOption("width",ww);this.grid.cols=this.rows[0].cells;if(options.groupHeader){this.setGroupHeaders({useColSpanStyle:true,groupHeaders:options.groupHeaders})}thead=null;hTable=null;bTable=null},_sortkeys:["shiftKey","altKey","ctrlKey"],_getColumnHeaderIndex:function(th){var that=this;var i,headers=that.grid.headers,ci=$.grid.getCellIndex(th);for(i=0;i<headers.length;
i++){if(th===headers[i].el){ci=i;break}}return ci},_analyzeColumns:function(columns){var that=this,i=0,options=this.options;columns.children().each(function(i){var opts=$.parser.parseOptions(this,null,["data"]);if(typeof(opts.name)!="undefined"){options.colModel.push(opts);options.colNames.push(opts.label||$(this).html())}else{if(typeof(opts.header)!="undefined"){var len=0;var inOption;$(this).children().each(function(i){var opts=$.parser.parseOptions(this,null,["data"]);options.colModel.push(opts);options.colNames.push(opts.label||$(this).html());len++;i==0&&(inOption=opts)});options.groupHeaders.push({startColumnName:inOption.name,numberOfColumns:len,titleText:opts.header})}}});for(i=0;i<this.options.colModel.length;i++){var model=this.options.colModel[i];if(model.formatter=="combobox"||model.formatter=="combotree"){if(model.revertCode!=false){model.revertCode=true}}model.postMode=model.postMode||"value";if(model.edittype=="combobox"||model.edittype=="combotree"||model.edittype=="autocomplete"){(model.edittype=="combotree")&&(model.dataStructure="tree");model.formatter=model.formatter||"convertCode"}}if(this.options.colNames.length===0){for(i=0;i<this.options.colModel.length;i++){this.options.colNames[i]=this.options.colModel[i].label||this.options.colModel[i].name}}if(this.options.colNames.length!==this.options.colModel.length){alert("errors! colNames not equals to colModel!");return}columns.children().not(".coral-grid-columns-view").remove()},_updateMultiSelectIndexsOption:function(options){var min_index=options.minIndex,max_index=options.maxIndex,pre_index=options.preIndex,cur_index=options.curIndex;if(null==min_index){min_index=max_index=pre_index=(null==pre_index?cur_index:pre_index)}if(cur_index<=min_index){min_index=cur_index}else{if(cur_index>min_index&&cur_index<max_index){if(pre_index==max_index&&pre_index!=min_index){max_index=cur_index}else{if(pre_index==min_index&&pre_index!=max_index){min_index=cur_index}else{min_index=Math.min(cur_index,pre_index);max_index=Math.max(cur_index,pre_index)
}}}else{if(cur_index>max_index){max_index=cur_index}}}return{minIndex:min_index,maxIndex:max_index,preIndex:pre_index}},_addShiftKeySelect:function(e,ui){var that=this,opts=that.options;if(!ui.rowId){return}var $this=$(that.element),rows=$this.find(".coral-grid-btable")[0].rows,curIndex=rows.namedItem(ui.rowId).rowIndex;if(e.shiftKey){var indexsOption=that._updateMultiSelectIndexsOption({maxIndex:opts.maxIndex,minIndex:opts.minIndex,preIndex:opts.preIndex,curIndex:curIndex});opts.minIndex=indexsOption.minIndex;opts.maxIndex=indexsOption.maxIndex;opts.preIndex=indexsOption.preIndex;$this.grid("resetSelection");for(var i=opts.minIndex;i<=opts.maxIndex;i++){if(i!=curIndex||opts.multikey){$this.grid("setSelection",rows[i].id,false)}}if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){window.getSelection().removeAllRanges()}}}else{opts.minIndex=opts.maxIndex=null}opts.preIndex=curIndex},_setUpEvent:function(){var that=this,grid=this.grid,options=this.options;var ri,ci,tdHtml,td,ptr;if(that.options.cellEdit===false&&that.options.hoverrows===true){$(that.element).bind("mouseover",function(e){var isPicgrid=!!(that.options.model=="card");if(isPicgrid){ptr=$(e.target,that.pic).closest("li.gridPanel").find(".rowgrid");if($(ptr).attr("class")!=="coral-subgrid"){$(ptr).addClass("coral-state-hover")}}else{ptr=$(e.target,that.rows).closest("tr.jqgrow");if($(ptr).attr("class")!=="coral-subgrid"){$(ptr).addClass("coral-state-hover")}}}).bind("mouseout",function(e){var isPicgrid=!!(that.options.model=="card");if(isPicgrid){ptr=$(e.target,that.pic).closest("li.gridPanel ").find(".rowgrid")}else{ptr=$(e.target,that.rows).closest("tr.jqgrow")}$(ptr).removeClass("coral-state-hover")})}$(grid.rowsView).scroll(function(e){if(options.scroll){var scrollTop=$(grid.rowsView)[0].scrollTop;if(grid.scrollTop===undefined){grid.scrollTop=0}if(scrollTop!=grid.scrollTop){grid.scrollTop=scrollTop;if(grid.timer){clearTimeout(grid.timer)}grid.timer=setTimeout(grid.populateVisible,options.scrollTimeout)
}}$(grid.columnsView)[0].scrollLeft=$(grid.rowsView)[0].scrollLeft;$(".coral-grid-btable-frozen").css("left",-$(grid.rowsView)[0].scrollLeft+"px");var b=$(".row-editable",that.element),editRow=$(that.element).grid("getInd",that.editRowIndex,true);if(b.length>0){b.position({my:"left-"+(b.outerWidth()/2)+" top-2",at:"right-"+($(editRow).outerWidth()/2)+" top+"+($(editRow).outerHeight()),collision:"fit",of:$(editRow)})}if(options.footerrow){grid.sDiv.scrollLeft=$(grid.rowsView)[0].scrollLeft}if(e){e.stopPropagation()}});$(".coral-grid-btable",that.element).add(that.pic).click(function(e){var isPicgrid=!!(that.options.model=="card");var rowId;td=e.target;if(isPicgrid){ptr=$(td,that.pic).closest("li.gridPanel")}else{ptr=$(td,that.rows).closest("tr.jqgrow")}if($(ptr).length===0||ptr[0].className.indexOf("coral-state-disabled")>-1||$(td,that.element).closest("table.coral-grid-btable").length<0){return this}var scb=$(td).hasClass("cbox"),cSel=that._trigger("beforeSelectRow",e,[{rowId:ptr[0].id}]);cSel=(cSel===false||cSel==="stop")?false:true;if(td.tagName=="A"||((td.tagName=="INPUT"||td.tagName=="TEXTAREA"||td.tagName=="OPTION"||td.tagName=="SELECT")&&!scb)){return}if(cSel===true){rowId=ptr[0].id;tdHtml=$(td).closest("td,th").html();if(!isPicgrid){ci=$.grid.getCellIndex(td);that._addShiftKeySelect(e,{rowId:ptr[0].id});that._trigger("onSelectCell",e,[{rowId:rowId,rowIndex:ptr[0].rowIndex,cellIndex:ci,cellHtml:tdHtml}])}if(that.options.editableRows&&that.options.clicksToEdit==1&&options.editrow!=rowId){that.restoreRow(options.editrow);if(that.rowEditButtons){that.rowEditButtons.remove()}}if(that.options.editableRows&&that.options.clicksToEdit==1&&!scb){options.editrow=ptr[0].id;that.editRow(ptr[0].id,true)}if(that.options.cellEdit===true&&that.options.clicksToEdit==1){var editable=that.options.colModel[ci].editable;var mul=that.options.multiselect||that.options.singleselect;if((mul&&scb)||(mul&&!editable&&!that.options.multikey)){$(that.element).grid("setSelection",rowId,true,e)
}else{if(!isPicgrid){try{$(that.element).grid("editCell",ptr[0].rowIndex,ci,true)}catch(_){}}}}else{if(!that.options.multikey){if(that.options.multiselect&&that.options.multiboxonly){if(scb){$(that.element).grid("setSelection",rowId,true,e)}else{var frz=that.options.frozenColumns?that.options.id+"_frozen":"";$(that.options.selarrrow).each(function(i,n){var ind=that.rows.namedItem(n);$(ind).removeClass("coral-state-highlight");$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(n))[that.options.useProp?"prop":"attr"]("checked",false);if(frz){$("#"+$.grid.coralID(n),"#"+$.grid.coralID(frz)).removeClass("coral-state-highlight");$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(n),"#"+$.grid.coralID(frz))[that.options.useProp?"prop":"attr"]("checked",false)}});that.options.selarrrow=[];$(that.element).grid("setSelection",rowId,true,e)}}else{if(scb||typeof(that.editRowIndex)!="undefiend"&&that.editRowIndex!=rowId){$(that.element).grid("setSelection",rowId,true,e)}}}else{if(e[that.options.multikey]){$(that.element).grid("setSelection",rowId,true,e)}else{if((that.options.multiselect||that.options.singleselect)&&scb){$(that.element).grid("setSelection",rowId,true,e);if(!scb){that._cancelCheckAll()}}}}}}});$(that.element).dblclick(function(e){td=e.target;ptr=$(td,that.rows).closest("tr.jqgrow");if($(ptr).length===0){return}if(that.options.editableRows&&options.editrow!=ptr[0].id){that.restoreRow(options.editrow);if(that.rowEditButtons){that.rowEditButtons.remove()}}var ri=ptr[0].rowIndex;var ci=$.grid.getCellIndex(td);if(that.options.editableRows&&that.options.clicksToEdit==2){options.editrow=ptr[0].id;that.editRow(ptr[0].id,true)}if(that.options.cellEdit===true&&that.options.clicksToEdit==2){ri=ptr[0].rowIndex;try{$(that.element).grid("editCell",ri,ci,true)}catch(_){}}that._trigger("onDblClickRow",null,[{rowId:ptr[0].id,rowIndex:ri,cellIndex:ci}])}).bind("contextmenu",function(e){td=e.target;ptr=$(td,that.rows).closest("tr.jqgrow");if($(ptr).length===0){return
}if(!that.options.multiselect){$(that.element).grid("setSelection",ptr[0].id,true,e)}ri=ptr[0].rowIndex;ci=$.grid.getCellIndex(td);that._trigger("onRightClickRow",null,[{rowId:ptr[0].id,rowIndex:ri,cellIndex:ci}])});$(grid.columnsView).mousemove(function(e){if(grid.resizing){grid.dragMove(e);return false}});$(".coral-grid-labels",grid.columnsView).bind("selectstart",function(){return false});$(document).mouseup(function(){if(grid.resizing){grid.dragEnd();return false}return true});this._off($(".coral-paginator-page"));this._on({"click.coral-paginator-page":function(e){var cp=that._intNum($(e.target).html(),1);that.options.page=cp;if(!that._clearVals(this.id)){return false}that._populate();return false}})},restoreAll:function(){if(this.options.editableRows){this.restoreRow(this.options.editrow);if(this.rowEditButtons){this.rowEditButtons.remove()}}if(this.options.savedRow.length>0){if(!$(this.element).grid("saveCell",this.options.savedRow[0].id,this.options.savedRow[0].ic)){return}}},_setMultiselect:function(){var that=this;if(this.options.multiselect){var emp=[],chk;$("#cb_"+$.grid.coralID(that.options.id),this.grid.columnsView).bind("click",function(e){that.options.selarrrow=[];var froz=that.options.frozenColumns===true?that.options.id+"_frozen":"";if(this.checked){$(that.rows).each(function(i){if(i>0){if(!$(this).hasClass("coral-subgrid")&&!$(this).hasClass("jqgroup")&&!$(this).hasClass("coral-state-disabled")){$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(this.id))[that.options.useProp?"prop":"attr"]("checked",true);$(this).addClass("coral-state-highlight").attr("aria-selected","true");that.options.selarrrow.push(this.id);that.options.selrow=this.id;if(froz){$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(that.options.id),that.grid.fbDiv)[that.options.useProp?"prop":"attr"]("checked",true);$("#"+$.grid.coralID(that.options.id),that.grid.fbDiv).addClass("coral-state-highlight")}}}});chk=true;emp=[]}else{$(that.rows).each(function(i){if(i>0){if(!$(this).hasClass("coral-subgrid")&&!$(this).hasClass("coral-state-disabled")){$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(this.id))[that.options.useProp?"prop":"attr"]("checked",false);
$(this).removeClass("coral-state-highlight").attr("aria-selected","false");emp.push(this.id);if(froz){$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(that.options.id),that.grid.fbDiv)[that.options.useProp?"prop":"attr"]("checked",false);$("#"+$.grid.coralID(that.options.id),that.grid.fbDiv).removeClass("coral-state-highlight")}}}});that.options.selrow=null;chk=false}that._trigger("onSelectAll",null,[{aRowIds:chk?that.options.selarrrow:emp,status:chk}])})}},_refresh:function(key,value){},reload:function(opts){var that=this,grid=this.grid;if(that.options.treeGrid===true){that.options.datatype=that.options.treedatatype}if(opts&&opts.current){that.grid.selectionPreserver(that)}if(that.options.datatype=="local"){$(that.element).grid("resetSelection");if(that.options.data.length){that.refreshIndex()}}else{if(!that.options.treeGrid){that.options.selrow=null;if(that.options.multiselect){that.options.selarrrow=[];that._setHeadCheckBox(false)}that.options.savedRow=[]}}if(that.options.scroll){emptyRows(that.grid.rowsView,true,false)}if(opts&&opts.page){var page=opts.page;if(page>that.options.lastpage){page=that.options.lastpage}if(page<1){page=1}that.options.page=page;if(that.grid.prevRowHeight){that.grid.rowsView.scrollTop=(page-1)*that.grid.prevRowHeight*that.options.rowNum}else{that.grid.rowsView.scrollTop=0}}if(that.grid.prevRowHeight&&that.options.scroll){delete that.options.lastpage;that._populateVisible()}else{if(that.options.localonce==true){that.options.search=true}else{that.options.search=false}that._populate();that.options.localonce=false}return false},resetFrozen:function(){if(!this._hasHorizontalScrollBar()){$(this.grid.rightfbDiv).hide();$(this.grid.rightfhDiv).hide()}else{$(this.grid.rightfbDiv).show();$(this.grid.rightfhDiv).show()}},refresh:function(opts){var maxHeight,that=this,options=this.options,fitStyle=options.fitStyle,parent=this.element.parent();maxHeight=parent.height();that.resetFrozen();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");
if(position==="absolute"||position==="fixed"){return}maxHeight-=elem.outerHeight(true)});setTimeout(function(){if(fitStyle==="fill"){$(that.element).grid("option","height",maxHeight);$(that.element).grid("option","width",that.element.innerWidth()>0?that.element.innerWidth():0)}else{if(fitStyle==="width"){$(that.element).grid("option","width",that.element.innerWidth()>0?that.element.innerWidth():0);$(that.element).grid("option","height",that.options.height)}else{if(fitStyle==="height"){$(that.element).grid("option","height",maxHeight)}else{if(fitStyle==="auto"){$(that.element).grid("option","height",that.options.height)}}}}that.refreshPager();that._noRecordsTipsPositon();if(that.options.frozenColumns==true){that.resizeFrozen()}},0)},refreshPager:function(){var that=this;if(this.pagers){this.pagers.each(function(i){var pagerleftwidth=$(".paginator-left",that.element).outerWidth()+5;var pagerwidth=$("#"+that.pagers[i].id).width();$(".toolbarpanel",that.element).css({left:pagerleftwidth+"px",position:"absolute",top:0,width:(pagerwidth-pagerleftwidth)+"px"})});that.options.pager="."+that.id;$(".ctrl-init-toolbar").toolbar("refresh")}},setSelectionAll:function(){if(!$("#cb_"+this.options.id).prop("checked")){$("#cb_"+this.options.id).trigger("click")}},setSelection:function(selection,onsr,e){var that=this,stat,isPicgrid=!!(that.options.model=="card"),pt,ner,ia,tpsr,fid;if(selection===undefined){return}onsr=onsr===false?false:true;if(isPicgrid){pt=that.element.find(".coral-pic #"+selection)[0]}else{pt=that.rows.namedItem(selection+"")}if(!pt||!pt.className||pt.className.indexOf("coral-state-disabled")>-1){return}function scrGrid(iR){var ch=$(that.grid.rowsView)[0].clientHeight,st=$(that.grid.rowsView)[0].scrollTop,rpos=that.rows[iR].offsetTop,rh=that.rows[iR].clientHeight;if(rpos+rh>=ch+st){$(that.grid.rowsView)[0].scrollTop=rpos-(ch+st)+rh+st}else{if(rpos<ch+st){if(rpos<st){$(that.grid.rowsView)[0].scrollTop=rpos}}}}if(that.options.scrollrows===true){ner=that.rows.namedItem(selection).rowIndex;
if(ner>=0){scrGrid(ner)}}if(that.options.frozenColumns===true){fid=that.options.id+"_frozen"}if(!that.options.multiselect){if(pt.className!=="coral-subgrid"){if(that.options.selrow!=pt.id){if(isPicgrid){that.element.find("#"+that.options.selrow+">ul").removeClass("coral-state-highlight").attr({"aria-selected":"false",tabindex:"-1"});$(pt).find(".rowgrid").addClass("coral-state-highlight").attr({"aria-selected":"true",tabindex:"0"});if(fid){$("#"+$.grid.coralID(that.options.selrow),"#"+$.grid.coralID(fid)).find(".rowgrid").removeClass("coral-state-highlight");$("#"+$.grid.coralID(selection),"#"+$.grid.coralID(fid)).find(".rowgrid").addClass("coral-state-highlight")}}else{$(that.rows.namedItem(that.options.selrow)).removeClass("coral-state-highlight").attr({"aria-selected":"false",tabindex:"-1"});$(pt).addClass("coral-state-highlight").attr({"aria-selected":"true",tabindex:"0"});if(fid){$("#"+$.grid.coralID(that.options.selrow),"#"+$.grid.coralID(fid)).removeClass("coral-state-highlight");$("#"+$.grid.coralID(selection),"#"+$.grid.coralID(fid)).addClass("coral-state-highlight")}}stat=true;$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(pt.id),$(pt))[that.options.useProp?"prop":"attr"]("checked",stat);if(fid){$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(selection),"#"+$.grid.coralID(fid))[that.options.useProp?"prop":"attr"]("checked",stat)}}else{stat=false}that.options.selrow=pt.id;if(onsr){that._trigger("onSelectRow",e,[{rowId:pt.id,status:stat}])}}}else{that._setHeadCheckBox(false);that.options.selrow=pt.id;ia=$.inArray(that.options.selrow,that.options.selarrrow);if(ia===-1){if(isPicgrid){if(pt.className!=="coral-subgrid"){$(pt).find(".rowgrid").addClass("coral-state-highlight").attr("aria-selected","true")}}else{if(pt.className!=="coral-subgrid"){$(pt).addClass("coral-state-highlight").attr("aria-selected","true")}}stat=true;that.options.selarrrow.push(that.options.selrow)}else{if(isPicgrid){if(pt.className!=="coral-subgrid"){$(pt).find(".rowgrid").removeClass("coral-state-highlight").attr("aria-selected","false")
}}else{if(pt.className!=="coral-subgrid"){$(pt).removeClass("coral-state-highlight").attr("aria-selected","false")}}stat=false;that.options.selarrrow.splice(ia,1);tpsr=that.options.selarrrow[0];that.options.selrow=(tpsr===undefined)?null:tpsr}$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(pt.id),$(pt))[that.options.useProp?"prop":"attr"]("checked",stat);if(fid){if(isPicgrid){if(ia===-1){$("#"+$.grid.coralID(selection),"#"+$.grid.coralID(fid)).find(".rowgrid").addClass("coral-state-highlight")}else{$("#"+$.grid.coralID(selection),"#"+$.grid.coralID(fid)).find(".rowgrid").removeClass("coral-state-highlight")}}else{if(ia===-1){$("#"+$.grid.coralID(selection),"#"+$.grid.coralID(fid)).addClass("coral-state-highlight")}else{$("#"+$.grid.coralID(selection),"#"+$.grid.coralID(fid)).removeClass("coral-state-highlight")}}$("#jqg_"+$.grid.coralID(that.options.id)+"_"+$.grid.coralID(selection),"#"+$.grid.coralID(fid))[that.options.useProp?"prop":"attr"]("checked",stat)}if(onsr){that._trigger("onSelectRow",e,[{rowId:pt.id,status:stat}])}}},_setHeadCheckBox:function(checked){var that=this;$("#cb_"+$.grid.coralID(that.options.id),that.grid.columnsView)[that.options.useProp?"prop":"attr"]("checked",checked);var fid=that.options.frozenColumns?that.options.id+"_frozen":"";if(fid){$("#cb_"+$.grid.coralID(that.options.id),that.grid.fcolumnsView)[that.options.useProp?"prop":"attr"]("checked",checked)}},setFrozenRows:function(rowNum){var that=this,grid=that.grid;that.destroyFrozenRows();that.rowsView2=$(grid.rowsView);if(!that.rowsView2.children("table.coral-grid-btable-frozen").length){$(that.rowsView2).prepend('<table class="coral-grid-btable-frozen" cellspacing="0" cellpadding="0"></table>');that.rowsView2.children("table.coral-grid-btable-frozen").css({position:"absolute",left:0,top:$(grid.columnsView).height()+"px"})}var vh=that.element.find(".coral-grid-rows-view").height();doWithFirstRow(false);doWithFrozen(false);var fh=that.rowsView2.find("table.coral-grid-btable-frozen").outerHeight();
that.rowsView2.css({"margin-top":fh+"px",height:(vh-fh)+"px"});that.rowsView2.find(".coral-grid-btable-frozen").css({left:-$(grid.rowsView)[0].scrollLeft+"px",width:that.rowsView2.find(".coral-grid-btable").width()+"px","table-layout":"fixed"});function doWithFirstRow(isFirst){var tr=that.rowsView2.find(".coral-grid-btable")[0].rows[0];(isFirst?that.rowsView1:that.rowsView2).children("table.coral-grid-btable-frozen").append($(tr).clone())}function doWithFrozen(isFirst){var trs=that.rowsView2.find(".coral-grid-btable tr").filter(function(i){if(i==0){return false}if(i<=rowNum){return true}});var tr=that.rowsView2.find(".coral-grid-btable")[0].rows[1];(isFirst?that.rowsView1:that.rowsView2).children("table.coral-grid-btable-frozen").append(trs)}},destroyFrozenRows:function(){var that=this,grid=that.grid;that.rowsView2=$(grid.rowsView);if(!that.rowsView2.children("table.coral-grid-btable-frozen").length){$(that.rowsView2).prepend('<table class="coral-grid-btable-frozen" cellspacing="0" cellpadding="0"></table>');that.rowsView2.children("table.coral-grid-btable-frozen").css({position:"absolute",left:0,top:0})}var vh=that.element.find(".coral-grid-rows-view").height();var fh=that.rowsView2.find("table.coral-grid-btable-frozen").outerHeight();doWidthFrozen(false);doWidthFirstRow(false);that.rowsView2.css({"margin-top":0,height:(vh+fh)+"px"});function doWidthFrozen(isFirst){var rows=that.rowsView2.find("table.coral-grid-btable-frozen tr").filter(function(i){if(i==0){return false}return true});var row1=(isFirst?that.rowsView1:that.rowsView2).children("table.coral-grid-btable-frozen")[0].rows[1];$(that.rowsView2.find(".coral-grid-btable tbody:first tr:first")[0]).after(rows)}function doWidthFirstRow(isFirst){(isFirst?that.rowsView1:that.rowsView2).children("table.coral-grid-btable-frozen").remove()}},showHideCol:function(colname,show){var that=this,fndh=false,brd=$.support.boxSizing?0:this._intNum(this.options.cellLayout,0),cw;if(!that.grid){return}if(typeof colname==="string"){colname=[colname]
}show=show!="none"?"":"none";var sw=show===""?true:false,gh=that.options.groupHeader&&(typeof that.options.groupHeader==="object"||$.isFunction(that.options.groupHeader));if(gh){$(that.element).grid("destroyGroupHeader",false)}$(this.options.colModel).each(function(i){if($.inArray(this.name,colname)!==-1&&this.hidden===sw){if(that.options.frozenColumns===true&&this.frozen===true){}$("tr",that.grid.columnsView).each(function(){$(this.cells[i]).css("display",show)});$(that.rows).each(function(){if(!$(this).hasClass("jqgroup")){$(this.cells[i]).css("display",show)}});if(that.options.footerrow){$("tr.footrow td:eq("+i+")",that.grid.sDiv).css("display",show)}cw=this.widthOrg?this.widthOrg:parseInt(this.width,10);if(show==="none"){that.options.tblwidth-=cw+brd}else{that.options.tblwidth+=cw+brd}this.hidden=!sw;fndh=true;that._trigger("onShowHideCol",null,[{show:sw,name:this.name,index:i}])}});if(fndh===true){that._setGridWidth(that.options.shrinkToFit===true?that.options.tblwidth:that.options.width)}if(gh){$(that.element).grid("setGroupHeaders",that.options.groupHeader)}},hideCol:function(colname){return $(this.element).grid("showHideCol",colname,"none")},showCol:function(colname){return $(this.element).grid("showHideCol",colname,"")},remapColumns:function(permutation,updateCells,keepHeader){function resortArray(a){var ac;if(a.length){ac=$.makeArray(a)}else{ac=$.extend({},a)}$.each(permutation,function(i){a[i]=ac[this]})}var that=this;function resortRows(parent,clobj){$(">tr"+(clobj||""),parent).each(function(){var row=this;var elems=$.makeArray(row.cells);$.each(permutation,function(){var e=elems[this];if(e){row.appendChild(e)}})})}resortArray(that.options.colModel);resortArray(that.options.colNames);resortArray(that.grid.headers);resortRows($("thead:first",that.grid.columnsView),keepHeader&&":not(.coral-grid-labels)");if(updateCells){resortRows($("#"+$.grid.coralID(that.options.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot")}if(that.options.footerrow){resortRows($("tbody:first",that.grid.sDiv))
}if(that.options.remapColumns){if(!that.options.remapColumns.length){that.options.remapColumns=$.makeArray(permutation)}else{resortArray(that.options.remapColumns)}}that.options.lastsort=$.inArray(that.options.lastsort,permutation);if(that.options.treeGrid){that.options.expColInd=$.inArray(that.options.expColInd,permutation)}$(that).triggerHandler("gridRemapColumns",[permutation,updateCells,keepHeader])},sortableColumns:function(tblrow){var that=this,tid=$.grid.coralID(that.options.id);function start(){that.options.disableClick=true}var sortable_opts={tolerance:"pointer",axis:"x",cancel:".coral-columnSortable-disabled",scrollSensitivity:"1",helper:function(event,currentItem){return currentItem.clone()},items:">th:not(:has(#jqgh_"+tid+"_cb,#jqgh_"+tid+"_rn,#jqgh_"+tid+"_subgrid),:hidden, .coral-columnSortable-disabled)",placeholder:{element:function(item){var rowspan=typeof(item.attr("rowspan"))=="undefined"?"1":"2",colspan=typeof(item.attr("colspan"))=="undefined"?"1":"2";var el=$(document.createElement(item[0].nodeName)).addClass(item[0].className+" coral-sortable-placeholder coral-state-highlight").removeClass("coral-sortable-helper").attr("rowspan",rowspan).attr("colspan",colspan)[0];return el},update:function(self,options){options.height(self.currentItem.innerHeight()-parseInt(self.currentItem.css("paddingTop")||0,10)-parseInt(self.currentItem.css("paddingBottom")||0,10));options.width(self.currentItem.innerWidth()-parseInt(self.currentItem.css("paddingLeft")||0,10)-parseInt(self.currentItem.css("paddingRight")||0,10))}},update:function(event,ui){var p=$(ui.item).parent(),th=$(">th",p),colModel=that.options.colModel,cmMap={},tid=that.options.id+"_";ui.itemId=[];$.each(colModel,function(i){cmMap[this.name]=i});var permutation=[];var permutationId=[];th.each(function(){var id=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(tid,"");if(id in cmMap){permutation.push(cmMap[id]);permutationId.push(id)}});$.each(ui.item,function(i){ui.itemId.push(ui.item[i].id.replace(/^jqgh_/,"").replace(tid,""))
});ui.prevItemId=$(ui.item[0]).prev("th").attr("id").replace(/^jqgh_/,"").replace(tid,"");ui.nextItemId=$(ui.item[0]).next("th").attr("id").replace(/^jqgh_/,"").replace(tid,"");ui.targetId=ui.position.left>ui.originalPosition.left?ui.prevItemId:ui.nextItemId;$(that.element).grid("remapColumns",permutation,true,true);ui.permutation=permutation;ui.permutationOfId=permutationId;that._trigger("onSortableColumns",event,[ui]);setTimeout(function(){that.options.disableClick=false},50)}};$.extend(sortable_opts,that.options.sortableColumnsOptions);if(sortable_opts.beforesortablecolumns){var s=sortable_opts.beforesortablecolumns;sortable_opts.start=function(e,ui){start();s.call(this,e,ui)}}else{sortable_opts.start=start}if(that.options.sortableColumnsOptions.exclude){sortable_opts.items+=":not("+that.options.sortableColumnsOptions.exclude+")"}tblrow.sortable(sortable_opts).data("sortable").floating=true},setCaption:function(newcap){this.options.caption=newcap;$("span.coral-grid-title, span.coral-grid-title-rtl",this.grid.caption).html(newcap);$(this.grid.cDiv).show()},setLabel:function(colname,nData,prop,attrp){var that=this,pos=-1;if(!that.grid){return}if(typeof(colname)!="undefined"){$(that.options.colModel).each(function(i){if(this.name==colname){pos=i;return false}})}else{return}if(pos>=0){var thecol=$("tr.coral-grid-labels th:eq("+pos+")",that.grid.columnsViews);if(nData){var ico=$(".s-ico",thecol);$("[id^=jqgh_]",thecol).empty().html(nData).append(ico);that.options.colNames[pos]=nData}if(prop){if(typeof prop==="string"){$(thecol).addClass(prop)}else{$(thecol).css(prop)}}if(typeof attrp==="object"){$(thecol).attr(attrp)}}},setCell:function(rowid,colname,nData,cssp,attrp,forceupd){var that=this,pos=-1,v,title;if(!that.grid){return}if(isNaN(colname)){$(that.options.colModel).each(function(i){if(this.name==colname){pos=i;return false}})}else{pos=parseInt(colname,10)}if(pos>=0){var ind=that.rows.namedItem(rowid);if(ind){var tcell=$("td:eq("+pos+")",ind);if(nData!==""||forceupd===true){v=that._formatter(rowid,nData,pos,ind,"edit");
title=that.options.colModel[pos].title?{title:$.grid.stripHtml(v)}:{};if(that.options.treeGrid&&$(".tree-wrap",$(tcell)).length>0){$("span",$(tcell)).html(v).attr(title)}else{$(tcell).html(v).attr(title)}if(that.options.datatype=="local"){var cm=that.options.colModel[pos],index;var _fn=$.coral.toFunction(cm.formatter);if($.isFunction(_fn)){nData=_fn.apply(this.element[0])}else{nData=cm.formatter&&typeof(cm.formatter)==="string"&&cm.formatter=="date"?$.unformat.date.call(that,nData,cm):nData}index=that.options._index[rowid];if(typeof index!="undefined"){that.options.data[index][cm.name]=nData}}}if(typeof cssp==="string"){$(tcell).addClass(cssp)}else{if(cssp){$(tcell).css(cssp)}}if(typeof attrp==="object"){$(tcell).attr(attrp)}}}},getCell:function(rowid,col){var ret=false;var $t=this,pos=-1;if(!$t.grid){return}if(isNaN(col)){$($t.options.colModel).each(function(i){if(this.name===col){pos=i;return false}})}else{pos=parseInt(col,10)}if(pos>=0){var ind=$t.rows.namedItem(rowid);if(ind){try{ret=$.unformat.call($t,$("td:eq("+pos+")",ind),{rowId:ind.id,colModel:$t.options.colModel[pos]},pos)}catch(e){ret=$.grid.htmlDecode($("td:eq("+pos+")",ind).html())}}}return ret},getCol:function(col,obj,mathopr){var ret=[],val,sum=0,min,max,v;obj=typeof(obj)!="boolean"?false:obj;if(typeof mathopr=="undefined"){mathopr=false}var $t=this,pos=-1;if(!$t.grid){return}if(isNaN(col)){$($t.options.colModel).each(function(i){if(this.name===col){pos=i;return false}})}else{pos=parseInt(col,10)}if(pos>=0){var ln=$t.rows.length,i=0;if(ln&&ln>0){while(i<ln){if($($t.rows[i]).hasClass("jqgrow")){try{val=$.unformat.call($t,$($t.rows[i].cells[pos]),{rowId:$t.rows[i].id,colModel:$t.options.colModel[pos]},pos)}catch(e){val=$.grid.htmlDecode($t.rows[i].cells[pos].innerHTML)}if(mathopr){v=parseFloat(val);sum+=v;if(i===0){min=v;max=v}else{min=Math.min(min,v);max=Math.max(max,v)}}else{if(obj){ret.push({id:$t.rows[i].id,value:val})}else{ret.push(val)}}}i++}if(mathopr){switch(mathopr.toLowerCase()){case"sum":ret=sum;
break;case"avg":ret=sum/ln;break;case"count":ret=ln;break;case"min":ret=min;break;case"max":ret=max;break}}}}return ret},getCellComponent:function(rowid,colname,nData,cssp,attrp,forceupd){var that=this,pos=-1,v,title;if(!that.grid){return}return $("#"+rowid).find("[aria-describedby$="+colname+"]").find(".ctrl-init")},_formatter:function(rowId,_cellVal,colpos,rwdat,_act){var cm=this.options.colModel[colpos],v;if(typeof cm.formatter!=="undefined"){var opts={rowId:rowId,colModel:cm,gid:this.options.id,pos:colpos,model:this.options.model};var _fn=$.coral.toFunction(cm.formatter);if($.isFunction(_fn)){v=_fn.apply(this.element[0],[_cellVal,opts,rwdat,_act])}else{if($.fmatter){v=$.fn.fmatter.call(this,cm.formatter,_cellVal,opts,rwdat,_act)}else{v=this._cellVal(_cellVal)}}}else{v=this._cellVal(_cellVal)}return v},_getOffset:function(iCol){var that=this;var i,ret={},brd1=$.support.boxSizing?0:that.options.cellLayout;ret[0]=ret[1]=ret[2]=0;for(i=0;i<=iCol;i++){if(that.options.colModel[i].hidden===false||typeof(that.options.colModel[i].hidden)=="undefined"){ret[0]+=that.options.colModel[i].width+brd1}}ret[0]=ret[0]-that.grid.rowsView.scrollLeft;ret[2]+=$(that.grid.rowsView).height()+$(that.grid.columnsView).height();return ret},_sortData:function(index,idxcol,reload,sor){var that=this;if(!this.options.colModel[idxcol].sortable){return}that.options.b_sortdata=true;var so;if(this.options.savedRow.length>0){return}if(!reload){if(this.options.lastsort==idxcol){if(this.options.sortorder=="asc"){this.options.sortorder="desc"}else{if(this.options.sortorder=="desc"){this.options.sortorder="asc"}}}else{this.options.sortorder=this.options.colModel[idxcol].firstsortorder||"asc"}this.options.page=1}if(sor){if(this.options.lastsort==idxcol&&this.options.sortorder==sor&&!reload){return}else{that.options.sortorder=sor}}var previousSelectedTh=this.grid.headers[this.options.lastsort].el,newSelectedTh=this.grid.headers[idxcol].el;$("span.coral-grid-ico-sort",previousSelectedTh).addClass("coral-state-disabled");
$(previousSelectedTh).attr("aria-selected","false");$("span.coral-icon-"+this.options.sortorder,newSelectedTh).removeClass("coral-state-disabled");$(newSelectedTh).attr("aria-selected","true");if(!this.options.viewsortcols[0]){if(this.options.lastsort!=idxcol){$("span.s-ico",previousSelectedTh).hide();$("span.s-ico",newSelectedTh).show()}}index=index.substring(5+this.options.id.length+1);this.options.sortname=this.options.colModel[idxcol].index||index;so=this.options.sortorder;if(that._trigger("onSortCol",null,[index,idxcol,so])==="stop"){this.options.lastsort=idxcol;return}if(this.options.datatype=="local"){if(this.options.deselectAfterSort){$(this.element).grid("resetSelection")}}else{this.options.selrow=null;if(this.options.multiselect){that._setHeadCheckBox(false)}this.options.selarrrow=[];this.options.savedRow=[]}if(this.options.scroll){var sscroll=this.grid.rowsView.scrollLeft;emptyRows(this.grid.rowsView,true,false);this.grid.columnsView.scrollLeft=sscroll}if(this.options.subGrid&&this.options.datatype=="local"){$("td.sgexpanded","#"+$.grid.coralID(this.options.id)).each(function(){$(this).trigger("click")})}this._populate();this.options.lastsort=idxcol;if(this.options.sortname!=index&&idxcol){this.options.lastsort=idxcol}that.options.b_sortdata=false},_intNum:function(val,defval){val=parseInt(val,10);if(isNaN(val)){return defval?defval:0}else{return val}},_beginReq:function(){var tipsDom=$("#noRecordsTips_"+$.grid.coralID(this.options.id));if(tipsDom.is(":visible")){tipsDom.hide()}this.refresh();this.grid.columnsView.loading=true;if(this.options.hiddengrid){return}switch(this.options.loadui){case"disable":break;case"enable":$("#load_"+$.grid.coralID(this.options.id)).show();break;case"block":$("#lui_"+$.grid.coralID(this.options.id)).show();$("#load_"+$.grid.coralID(this.options.id)).show();break}},_endReq:function(){var that=this;this._delay(function(){that.refreshPager()},300);this.grid.columnsView.loading=false;switch(this.options.loadui){case"disable":break;
case"enable":$("#load_"+$.grid.coralID(this.options.id)).hide();break;case"block":$("#lui_"+$.grid.coralID(this.options.id)).hide();$("#load_"+$.grid.coralID(this.options.id)).hide();break}this.element.find(".coral-grid-htable,.coral-grid-btable").css({"table-layout":"fixed"});if($(that.grid.rowsView).find(".jqgrow").length==0){that._noRecordsTipsPositon();$("#noRecordsTips_"+$.grid.coralID(that.options.id)).show()}else{$("#noRecordsTips_"+$.grid.coralID(that.options.id)).hide()}},_noRecordsTipsPositon:function(){var that=this;var gridWidth=this.gridRows.width(),gridHeight=this.gridRows.height(),tipsWidth=$("#noRecordsTips_"+$.grid.coralID(that.options.id)).width(),tipsHeight=$("#noRecordsTips_"+$.grid.coralID(that.options.id)).height();$("#noRecordsTips_"+$.grid.coralID(that.options.id)).css({"margin-top":(gridHeight-18)/2+"px","margin-left":gridWidth/2+"px"})},_setColWidth:function(){var that=this;var grid=this.grid;var initwidth=0,brd=$.support.boxSizing?0:this._intNum(this.options.cellLayout,0),vc=0,lvc,scw=this._intNum(this.options.scrollOffset,0),cw,hs=false,aw,gw=0,cl=0,cr;$.each(this.options.colModel,function(){this.widthOrg=cw=that._intNum(this.width,0);if((this.hidden===false||typeof(this.hidden)=="undefined")){initwidth+=cw+brd;if(this.fixed){gw+=cw+brd}else{vc++}cl++}});if(isNaN(that.options.width)){that.options.width=grid.width=initwidth}else{grid.width=that.options.width}that.options.tblwidth=initwidth;if(that.options.shrinkToFit===false&&that.options.forceFit===true){that.options.forceFit=false}if(that.options.shrinkToFit===true&&vc>0){aw=grid.width-brd*vc-gw;if(!isNaN(this.options.height)){aw-=scw;hs=true}initwidth=0;$.each(that.options.colModel,function(i){if((this.hidden===false||typeof(this.hidden)=="undefined")&&!this.fixed){cw=Math.round(aw*this.width/(that.options.tblwidth-brd*vc-gw));this.width=cw;initwidth+=cw;lvc=i}});cr=0;if(hs){if(grid.width-gw-(initwidth+brd*vc)!==scw){cr=grid.width-gw-(initwidth+brd*vc)-scw}}else{if(!hs&&Math.abs(grid.width-gw-(initwidth+brd*vc))!==1){cr=grid.width-gw-(initwidth+brd*vc)-1
}}that.options.colModel[lvc].width+=cr;that.options.tblwidth=initwidth+cr+brd*vc+gw;if(that.options.tblwidth>that.options.width){that.options.colModel[lvc].width-=(that.options.tblwidth-parseInt(that.options.width,10));that.options.tblwidth=that.options.width}that.options.tblwidth}},_nextVisible:function(iCol){var ret=iCol,j=iCol,i;for(i=iCol+1;i<this.options.colModel.length;i++){if(this.options.colModel[i].hidden!==true){j=i;break}}return j-ret},_formatCol:function(pos,rowInd,tv,rawObject,rowId,rdata){var that=this;if(that.options.model=="card"){return""}var grid=that.grid;var cm=that.options.colModel[pos],ral=cm.align,result='style="',clas=cm.cls,nm=cm.name,celp,acp=[],dataOrg="";if(ral){result+="text-align:"+ral+";"}if(cm.hidden===true){result+="display:none;"}var _fn=$.coral.toFunction(cm.cellattr);if(rowInd===0){result+="width: "+grid.headers[pos].width+"px;"}else{if($.isFunction(_fn)){celp=_fn.apply(that.element[0],[{rowId:rowId,value:tv,rawObject:rawObject,colModel:cm,rowData:rdata}]);if(celp&&typeof(celp)==="string"){celp=celp.replace(/style/i,"style").replace(/title/i,"title");if(celp.indexOf("title")>-1){cm.title=false}if(celp.indexOf("class")>-1){clas=undefined}acp=celp.split("style");if(acp.length===2){acp[1]=$.trim(acp[1].replace("=",""));if(acp[1].indexOf("'")===0||acp[1].indexOf('"')===0){acp[1]=acp[1].substring(1)}result+=acp[1].replace(/'/gi,'"')}else{result+='"'}}}}if(rawObject){var rawObjectV=rawObject[nm]||"";rawObjectV=$.grid.htmlEncode(rawObjectV);dataOrg+="data-org='"+rawObjectV+"'"}if(!acp.length){acp[0]="";result+='"'}result+=(clas!==undefined?(' class="'+clas+'"'):"")+((cm.title&&tv)?(' title="'+$.grid.stripHtml(tv)+'"'):"");result+=' aria-describedby="'+that.options.id+"_"+nm+'"';return result+acp[0]+dataOrg},findTextByValue:function(cval,opts){var code=opts.colModel.editoptions.data;if(!code){return cval}for(var i=0;i<code.length;i++){if(code[i].text==cval){return code[i].value}else{}}return cval},_cellVal:function(val){return val===undefined||val===null||val===""?"&#160;":(this.options.autoencode?$.grid.htmlEncode(val):val+"")
},_addCell:function(rowId,cell,pos,irow,srvr,rdata){if(this.options.model=="card"){var v,prp;v=this._formatter(rowId,cell,pos,srvr,"add");prp=this._formatCol(pos,irow,v,srvr,rowId,rdata);return'<div role="gridcell" '+prp+">"+v+"</div>"}var v,prp;v=this._formatter(rowId,cell,pos,srvr,"add");prp=this._formatCol(pos,irow,v,srvr,rowId,rdata);return'<td role="gridcell" '+prp+">"+v+"</td>"},_orderedCols:function(offset){var that=this;var order=that.options.remapColumns;if(!order||!order.length){order=$.map(that.options.colModel,function(v,i){return i})}if(offset){order=$.map(order,function(v){return v<offset?null:v-offset})}return order},emptyRows:function(parent,scroll,locdata){var that=this,isPicgrid=!!(that.options.model=="card");if(isPicgrid){$("#"+$.grid.coralID(that.options.id)+" .coral-pic").children().remove()}else{if(that.options.deepempty){$("#"+$.grid.coralID(that.options.id)+" tbody:first tr:gt(0)").remove()}else{var trf=$("#"+$.grid.coralID(that.options.id)+" tbody:first tr:first")[0];$("#"+$.grid.coralID(that.options.id)+" tbody:first").empty().append(trf)}if(scroll&&that.options.scroll){$(">div:first",parent).css({height:"auto"}).children("div:first").css({height:0,display:"none"});parent.scrollTop=0}if(locdata===true){if(that.options.treeGrid===true){that.options.data=[];that.options._index={}}}}},refreshIndex:function(){var that=this;var datalen=that.options.data.length,idname,i,val,ni=that.options.rownumbers===true?1:0,gi=that.options.multiselect===true?1:0,si=that.options.subGrid===true?1:0;if(that.options.keyIndex===false||that.options.loadonce===true){idname=that.options.localReader.id}else{idname=that.options.colModel[that.options.keyIndex+gi+si+ni].name}for(i=0;i<datalen;i++){val=$.grid.getAccessor(that.options.data[i],idname);that.options._index[val]=i}},constructPanel:function(id,hide,altClass,rd,cur){var tabindex="-1",restAttr="",attrName,style=hide?"display:none;":"",classes="gridPanel coral-row-"+this.options.direction+altClass;return'<li role="row" id="'+id+'" tabindex="'+tabindex+'" class="'+classes+'"'+(style===""?"":' style="'+style+'"')+restAttr+">"
},constructTr:function(id,hide,altClass,rd,cur){var tabindex="-1",restAttr="",attrName,style=hide?"display:none;":"",rowAttrObj,classes="coral-component-content jqgrow coral-row-"+this.options.direction+altClass;if(this.options.treeGrid){var parent_id=this.options.treeReader.parent_id_field;if(cur[parent_id]!==null&&String(cur[parent_id]).toLowerCase()!="null"){classes+=" treeGridRow "}}var rowattrFun=$.coral.toFunction(this.options.rowattr);rowAttrObj=$.isFunction(rowattrFun)?rowattrFun.apply(this.element[0],[{rowId:id,rowData:rd,currentObj:cur}]):{};if(!$.isEmptyObject(rowAttrObj)){if(rowAttrObj.hasOwnProperty("id")){id=rowAttrObj.id;delete rowAttrObj.id}if(rowAttrObj.hasOwnProperty("tabindex")){tabindex=rowAttrObj.tabindex;delete rowAttrObj.tabindex}if(rowAttrObj.hasOwnProperty("style")){style+=rowAttrObj.style;delete rowAttrObj.style}if(rowAttrObj.hasOwnProperty("class")){classes+=" "+rowAttrObj["class"];delete rowAttrObj["class"]}try{delete rowAttrObj.role}catch(ra){}for(attrName in rowAttrObj){if(rowAttrObj.hasOwnProperty(attrName)){restAttr+=" "+attrName+"="+rowAttrObj[attrName]}}}return'<tr role="row" id="'+id+'" tabindex="'+tabindex+'" class="'+classes+'"'+(style===""?"":' style="'+style+'"')+restAttr+">"},_clearVals:function(onPaging){var that=this,ret;ret=that._trigger("onPaging",null,[{pgButton:onPaging}]);if(!ret){return false}that.options.selrow=null;that.options.editrow=null;if(that.options.multiselect){that.options.selarrrow=[];that._setHeadCheckBox(false)}that.options.savedRow=[];return true},_getPagination:function(){},_setPager:function(pgid,tp){var that=this,pagerTemplate1="<span class='paginator-left'>{viewrecords}</span><span class='paginator-center'>{prev}{links}{next}{pginput}{navbar}{description}</span><span class='paginator-right'><em></em>{rninput}<em></em></span>",pagerTemplate2="<div class='paginator-left'>{viewrecords}{rowlist}{first}{prev}{pginput}{next}{last}{navbar}{description}</div><div class='toolbarpanel'>{toolbar}</div>";tp+="_"+pgid;
var pagerTemplate=false;if($.isFunction(that.options.pagerTemplate)){pagerTemplate=that.options.pagerTemplate.call(that)}var dir=this.options.direction;var po=["first"+tp,"prev"+tp,"next"+tp,"last"+tp];if(dir=="rtl"){po.reverse()}var pginp="",str="",rninput="",rowlist="",viewrecords="",pagers="",pagination="",links="<span class='coral-paginator-pages'></span>",pginput="<em></em><input type='text' class='coral-pg-input'/><em></em>",reload="<button class='reload-button' id='_reloadGrid' type='button' data-options='customData:{gridId:\""+that.options.id+'"},label:"",text: false,icons: "icon-loop4",onClick: function( e, ui ){$( "#'+that.options.id+'" ).grid( "reload" );}\'>reload</button>',first="<span id='"+po[0]+"' class='coral-paginator-first coral-state-default coral-corner-all' tabindex='0'><span class='icon icon-arrow-first' title=''></span></span>",last="<span id='"+po[3]+"' class='coral-paginator-last coral-state-default coral-corner-all' tabindex='0'><span class='icon icon-arrow-right' title=''></span></span>",next="<span id='"+po[2]+"' class='coral-paginator-next coral-corner-all' tabindex='0'><span class='icon icon-arrow-right2' title=''></span></span>",prev="<span id='"+po[1]+"' class='coral-paginator-prev coral-corner-all' tabindex='0'><span class='icon icon-arrow-left' title=''></span></span>",sep="<span>|</span>",navbar="<span class='pager-navbar'></span>",toolbar="<span class='pager-toolbar'></span>",description="<span class='pager-description'></span>",paginator,lft,cent,rgt,twd,tdw,i;paginator="pg_"+pgid;lft=pgid+"_left";cent=pgid+"_center";rgt=pgid+"_right";rninput+="<input type='text' class='coral-rn-input' val=''/>";if(!that.options.rninput){}else{if(that.options.rowList.length>0){}}rowlist+="<span class='coral-paginator-combobox'><select class='coral-pg-selbox' role='listbox'>";for(i=0;i<that.options.rowList.length;i++){rowlist+='<option role="option" value="'+that.options.rowList[i]+'"'+((that.options.rowNum==that.options.rowList[i])?' selected="selected"':"")+">"+that.options.rowList[i]+"</option>"
}rowlist+="</select></span>";if(that.options.viewrecords){viewrecords+="<span class='coral-paging-info'></span>"}if(that.options.pginput===true){pginp="<td dir='"+dir+"'>"+$.grid.format(that.options.pgtext||"","<input class='coral-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.grid.coralID(pgid)+"'></span>")+"</td>"}if(that.options.pagerStyle=="flex"){if(pagerTemplate){pagerTemplate1=pagerTemplate}pagination="<span id='"+po[1]+"' class='coral-paginator-prev coral-corner-all' tabindex='0'><span class='coral-icon coral-icon-seek-prev'>p</span></span><span class='coral-paginator-pages'></span><span id='"+po[2]+"' class='coral-paginator-next coral-corner-all' tabindex='0'><span class='coral-icon coral-icon-seek-next'>p</span></span><em></em><input type='text' class='coral-pg-input'/><em></em>";pagers=pagerTemplate1.replace(/\{viewrecords\}/g,viewrecords).replace(/\{navbar\}/g,navbar).replace(/\{reload\}/g,reload).replace(/\{-\}/g,sep).replace(/\{first\}/g,first).replace(/\{last\}/g,last).replace(/\{next\}/g,next).replace(/\{prev\}/g,prev).replace(/\{links\}/g,links).replace(/\{pginput\}/g,pginput).replace(/\{toolbar\}/g,toolbar).replace(/\{description\}/g,description).replace(/\{rowlist\}/g,rowlist).replace(/\{rninput\}/g,rninput);$("#"+$.grid.coralID(pgid)).addClass("coral-pager-flex");$("#"+$.grid.coralID(pgid)).append("<div id='"+paginator+"' class='coral-paginator' role='group'>"+pagers+"</div>");that._bindpager(pgid,tp)}else{if(that.options.pagerStyle=="tradition"){if(pagerTemplate){pagerTemplate2=pagerTemplate}pagination="<span id='"+po[0]+"' class='coral-paginator-first coral-state-default coral-corner-all' tabindex='0'><span class='icon icon-arrow-first'></span></span><span id='"+po[1]+"' class='coral-paginator-prev coral-corner-all' tabindex='0'><span class='icon icon-arrow-left'></span></span><em></em><input type='text' class='coral-pg-input'/><em></em><span id='"+po[2]+"' class='coral-paginator-next coral-corner-all' tabindex='0'><span class='icon icon-arrow-right2'></span></span><span id='"+po[3]+"' class='coral-paginator-last coral-state-default coral-corner-all' tabindex='0'><span class='icon icon-arrow-right'></span></span>";
pagers=pagerTemplate2.replace(/\{viewrecords\}/g,viewrecords).replace(/\{navbar\}/g,navbar).replace(/\{reload\}/g,reload).replace(/\{-\}/g,sep).replace(/\{first\}/g,first).replace(/\{last\}/g,last).replace(/\{next\}/g,next).replace(/\{prev\}/g,prev).replace(/\{links\}/g,links).replace(/\{pginput\}/g,pginput).replace(/\{toolbar\}/g,toolbar).replace(/\{description\}/g,description).replace(/\{rowlist\}/g,rowlist).replace(/\{rninput\}/g,rninput);$("#"+$.grid.coralID(pgid)).addClass("coral-pager-tradition");$("#"+$.grid.coralID(pgid)).append("<div id='"+paginator+"' class='coral-paginator' role='group'>"+pagers+"</div>");that._bindpagerTradition(pgid,tp)}else{}}var pagerOpts=$.parser.parseOptions($("#"+$.grid.coralID(pgid))[0],null);that.options.toolbarOptions=pagerOpts.toolbarOptions;that.options.description=pagerOpts.description;var navbarOptions=that.options.navbarOptions||{};pagerOpts.toolbarOptions=pagerOpts.toolbarOptions||{};$(".reload-button",that.element).button();$(".pager-toolbar",that.element).toolbar(pagerOpts.toolbarOptions);if(that.options.description){$(".pager-description",that.element).html(that.options.description)}},_bindpagerTradition:function(pgid,tp){var that=this;$("input.coral-pg-input",$("#"+$.grid.coralID(pgid))).textbox({componentCls:"pg",onKeyPress:function(e,ui){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13){that.options.page=(ui.value>0)?ui.value:that.options.page;if(!that._clearVals("user")){return false}that._populate();return false}return this}});$("input.coral-rn-input",$("#"+$.grid.coralID(pgid))).textbox({componentCls:"rn",onKeyPress:function(e,ui){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13){that.options.rowNum=(ui.value>0)?(ui.value<that.options.rowNumMax?ui.value:that.options.rowNumMax):that.options.rowNum;if(!that._clearVals("records")){return false}that._populate();return false}return this}});$(".coral-pg-selbox",$("#"+$.grid.coralID(pgid))).combobox({componentCls:"rn",panelHeight:"auto",onChange:function(event,ui){that.options.page=Math.round(that.options.rowNum*(that.options.page-1)/ui.value-0.5)+1;
that.options.rowNum=ui.value;if(!that._clearVals("records")){return false}that._populate();return false}});$("#first"+$.grid.coralID(tp)+", #prev"+$.grid.coralID(tp)+", #next"+$.grid.coralID(tp)+", #last"+$.grid.coralID(tp)).click(function(){var cp=that._intNum(that.options.page,1),last=that._intNum(that.options.lastpage,1),selclick=false,fp=true,pp=true,np=true,lp=true;if(last===0||last===1){fp=false;pp=false;np=false;lp=false}else{if(last>1&&cp>=1){if(cp===1){fp=false;pp=false}else{if(cp===last){np=false;lp=false}}}else{if(last>1&&cp===0){np=false;lp=false;cp=last-1}}}if(this.id==="first"+tp&&fp){that.options.page=1;selclick=true}if(this.id==="prev"+tp&&pp){that.options.page=(cp-1);selclick=true}if(this.id==="next"+tp&&np){that.options.page=(cp+1);selclick=true}if(this.id==="last"+tp&&lp){that.options.page=last;selclick=true}if(selclick){if(!that._clearVals(this.id)){return false}that._populate()}return false})},_bindpager:function(pgid,tp){var that=this;$("input.coral-pg-input",$("#"+$.grid.coralID(pgid))).textbox({componentCls:"pg",onKeyPress:function(e,ui){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13){var last=that._intNum(that.options.lastpage,1);var cp=that._intNum(ui.value,1);if(cp>last){return}that.options.page=(ui.value>0)?ui.value:that.options.page;if(!that._clearVals("user")){return false}that._populate();return false}return this}});$("input.coral-rn-input",$("#"+$.grid.coralID(pgid))).textbox({componentCls:"rn",onKeyPress:function(e,ui){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13){that.options.rowNum=(ui.value>0)?(ui.value<that.options.rowNumMax?ui.value:that.options.rowNumMax):that.options.rowNum;if(!that._clearVals("records")){return false}that._populate();return false}return this}});$(".coral-pg-selbox",$("#"+$.grid.coralID(pgid))).combobox({componentCls:"rn",panelHeight:"auto",onChange:function(event,ui){that.options.page=Math.round(that.options.rowNum*(that.options.page-1)/ui.newValue-0.5)+1;that.options.rowNum=ui.newValue;
if(!that._clearVals("records")){return false}that._populate();return false}});$(".coral-textbox-btn-ico-search",$("#"+$.grid.coralID(pgid))).click(function(e){that.options.page=($(this).prev().val()>0)?$(this).prev().val():that.options.page;if(!that._clearVals("user")){return false}that._populate();return false});this._off($(".coral-paginator-page"));this._on({"click.coral-paginator-page":function(e){var _this=e.target;if($(_this).hasClass("coral-state-disabled")){_this.style.cursor="default"}else{$(_this).addClass("coral-state-hover");_this.style.cursor="pointer"}}});this._on({"mouseenter.coral-paginator-page":function(e){var _this=e.target;if($(_this).hasClass("coral-state-disabled")){_this.style.cursor="default"}else{$(_this).addClass("coral-state-hover");_this.style.cursor="pointer"}},"mouseleave.coral-paginator-page":function(e){var _this=e.target;if(!$(_this).hasClass("coral-state-disabled")){$(_this).removeClass("coral-state-hover");_this.style.cursor="default"}}});$("#first"+$.grid.coralID(tp)+", #prev"+$.grid.coralID(tp)+", #next"+$.grid.coralID(tp)+", #last"+$.grid.coralID(tp)).click(function(){var cp=that._intNum(that.options.page,1),last=that._intNum(that.options.lastpage,1),selclick=false,fp=true,pp=true,np=true,lp=true;if(last===0||last===1){fp=false;pp=false;np=false;lp=false}else{if(last>1&&cp>=1){if(cp===1){fp=false;pp=false}else{if(cp===last){np=false;lp=false}}}else{if(last>1&&cp===0){np=false;lp=false;cp=last-1}}}if(this.id==="first"+tp&&fp){that.options.page=1;selclick=true}if(this.id==="prev"+tp&&pp){that.options.page=(cp-1);selclick=true}if(this.id==="next"+tp&&np){that.options.page=(cp+1);selclick=true}if(this.id==="last"+tp&&lp){that.options.page=last;selclick=true}if(selclick){if(!that._clearVals(this.id)){return false}that._populate()}return false})},_updatepager:function(rn,dnd){var that=this;var cp,last,base,from,to,tot,fmt,pgboxes="",sppg,tspg=that.options.pager?"_"+$.grid.coralID(that.options.pager.substr(1)):"",tspg_t=that.options.toppager?"_"+that.options.toppager.substr(1):"";
base=parseInt(that.options.page,10)-1;if(base<0){base=0}base=base*parseInt(that.options.rowNum,10);to=base+that.options.reccount;if(that.options.scroll){var rows=$("tbody:first > tr:gt(0)",that.grid.rowsView);base=to-rows.length;that.options.reccount=rows.length;var rh=rows.outerHeight()||that.grid.prevRowHeight;if(rh){var top=base*rh;var height=parseInt(that.options.records,10)*rh;$(">div:first",that.grid.rowsView).css({height:height}).children("div:first").css({height:top,display:top?"":"none"})}that.grid.rowsView.scrollLeft=that.grid.columnsView.scrollLeft}if(that.options.treeGrid){var rows=$("tbody:first > tr:not(.treeGridRow,.jqgfirstrow)",that.grid.rowsView);that.options.reccount=rows.length;to=base+that.options.reccount}pgboxes=$(that.element).find(".coral-grid-pager");if(pgboxes.length>0){fmt=$.grid.formatter.integer||{};cp=that._intNum(that.options.page);last=that._intNum(that.options.lastpage);$(".selbox",pgboxes)[this.options.useProp?"prop":"attr"]("disabled",false);if($(".coral-pg-input",pgboxes).length>0){$(".coral-pg-input",pgboxes).val(that.options.page);sppg=that.options.toppager?"#sp_1"+tspg+",#sp_1"+tspg_t:"#sp_1"+tspg;$(sppg).html($.fmatter?$.fmatter.util.NumberFormat(that.options.lastpage,fmt):that.options.lastpage)}if(that.options.rninput===true){$(".coral-rn-input",pgboxes).val(that.options.rowNum)}if(that.options.viewrecords){if(that.options.reccount===0){$(".coral-paging-info",pgboxes).html("")}else{from=base+1;tot=that.options.records;if($.fmatter){from=$.fmatter.util.NumberFormat(from,fmt);to=$.fmatter.util.NumberFormat(to,fmt);tot=$.fmatter.util.NumberFormat(tot,fmt)}$(".coral-paging-info",pgboxes).html($.grid.format(that.options.recordtext,from,to,tot))}}if(that.options.pgbuttons===true){var pre=[],next=[];that.pagers.each(function(){pre.push("#first_"+this.id);pre.push("#prev_"+this.id);next.push("#next_"+this.id);next.push("#last_"+this.id)});if(cp<=0){cp=last=0}if(cp==1||cp===0){$(pre.join(",")).addClass("coral-state-disabled").removeClass("coral-state-hover");
if(that.options.toppager){$("#first_t"+tspg_t+", #prev_t"+tspg_t).addClass("coral-state-disabled").removeClass("coral-state-hover")}}else{$(pre.join(",")).removeClass("coral-state-disabled");if(that.options.toppager){$("#first_t"+tspg_t+", #prev_t"+tspg_t).removeClass("coral-state-disabled")}}if(cp==last||cp===0){$(next.join(",")).addClass("coral-state-disabled").removeClass("coral-state-hover");if(that.options.toppager){$("#next_t"+tspg_t+", #last_t"+tspg_t).addClass("coral-state-disabled").removeClass("coral-state-hover")}}else{$(next.join(",")).removeClass("coral-state-disabled");if(that.options.toppager){$("#next_t"+tspg_t+", #last_t"+tspg_t).removeClass("coral-state-disabled")}}if(0==last){$(next.join(",")).addClass("coral-state-disabled").removeClass("coral-state-hover")}}that._paginators()}if(rn===true&&that.options.rownumbers===true){$("td.grid-rownum",that.rows).each(function(i){$(this).html(base+1+i)})}if(dnd&&that.options.jqgdnd){$(that.element).grid("gridDnD","updateDnD")}that._trigger("onComplete",null,[]);that._trigger("afterComplete",null,[])},_paginators:function(){var that=this;var cp=that._intNum(that.options.page,1),last=that._intNum(that.options.lastpage,1),selclick=false;var le=3,begin=cp>2?cp+2-le:1,end,pages="";end=le+begin>last?last+1:le+begin;if(begin>3&&end<=last+2){begin=end-le}if(cp>2&&last>le){if(begin>=2){pages+="<span class='coral-paginator-page coral-state-default coral-corner-all'  tabindex='0'>1</span>"}if(begin>=3){pages+="<span class='coral-paginator-page coral-state-default coral-corner-all'  tabindex='0'>2</span>"}if(begin!=3&&begin!=1&&begin!=2){pages+="<span class='coral-page-pointer'>...</span>"}}for(var i=begin;i<end;i++){if(cp==i){pages+="<span class='coral-paginator-page coral-state-default coral-state-active coral-corner-all'  tabindex='0'>"+i+"</span>"}else{pages+="<span class='coral-paginator-page coral-state-default coral-corner-all'  tabindex='0'>"+i+"</span>"}}if(end==last){pages+="<span class='coral-paginator-page coral-state-default coral-corner-all'>"+last+"</span>"
}else{if(end<=last){pages+="<span class='coral-page-pointer'>...</span><span class='coral-paginator-page coral-state-default coral-corner-all'>"+last+"</span>"}}$(".coral-paginator-pages",that.element).html(pages)},_populate:function(npage){var that=this,isPicgrid=!!(that.options.model=="card");var grid=that.grid;if(!grid.columnsView.loading){var pvis=that.options.scroll&&npage===false,prm={},dt,dstr,pN=that.options.prmNames;if(that.options.page<=0){that.options.page=1}if(pN.search!==null){prm[pN.search]=that.options.search}if(pN.nd!==null){prm[pN.nd]=new Date().getTime()}if(pN.rows!==null){prm[pN.rows]=that.options.rowNum}if(pN.page!==null){prm[pN.page]=that.options.page}if(pN.sort!==null){prm[pN.sort]=that.options.sortname}if(pN.order!==null){prm[pN.order]=that.options.sortorder}if(that.options.rowTotal!==null&&pN.totalrows!==null){prm[pN.totalrows]=that.options.rowTotal}var lc=function(req){that._trigger("onLoad",null,[req]);if(that.options.afterSortableRows&&$.fn.sortable){try{$(that.element).grid("sortableRows")}catch(e){}}};var adjust=0;npage=npage||1;if(npage>1){if(pN.npage!==null){prm[pN.npage]=npage;adjust=npage-1;npage=1}else{lc=function(req){that.options.page++;grid.columnsView.loading=false;that._trigger("onLoad",null,[{data:req}]);that._populate(npage-1)}}}else{if(pN.npage!==null){delete that.options.postData[pN.npage]}}if(that.options.grouping){$(that.element).grid("groupingSetup");if(that.options.groupingView.groupDataSorted===true){prm[pN.sort]=that.options.groupingView.groupField[0]+" "+that.options.groupingView.groupOrder[0]+", "+prm[pN.sort]}}$.extend(that.options.postData,prm);var rcnt=!that.options.scroll?1:that.rows.length-1;var bfr=that._trigger("beforeRequest",null,[]);if(bfr===false||bfr==="stop"){return}if($.isFunction(that.options.datatype)){that.options.datatype.call(that,that.options.postData,"load_"+that.options.id);return}dt=that.options.datatype.toLowerCase();if(!(that.options.b_sortdata&&that.options.b_sortdata===true)&&that.options.orgdatatype){dt=that.options.orgdatatype;
that.options.datatype=dt}if(that.options.localonce){dt="local"}if(this.options.initData){dt="initinlocal"}var success=function(content,st,xhr){if(that.options.loadonce){that.options.orgdatatype=dt}that._trigger("beforeProcessing",null,[{content:content,state:st,xhr:xhr}]);that._addJSONData(content,grid.rowsView,rcnt,npage>1,adjust);that.refresh();if(!isPicgrid){that._hasScrollOffset()}if(lc){lc.call(that,content)}that._trigger("afterLoad",null,[{content:content}]);if(pvis){grid.populateVisible()}if(that.options.loadonce||that.options.treeGrid){that.options.datatype="local";that.options.orgpage=that.options.page}if(npage===1){that._endReq()}var dReader,drows;if(that.options.datatype=="local"){dReader=that.options.localReader}else{dReader=that.options.jsonReader}drows=$.grid.getAccessor(content,dReader.root);if(drows.length==0&&parseInt(that.options.page)!=1&&parseInt(that.options.lastpage)<parseInt(that.options.page)){$(that.element).grid("reload",{page:that.options.lastpage})}content=null};switch(dt){case"initinlocal":dt="json";success(that.options.initData,null,null);this.options.initData=false;break;case"json":case"jsonp":$.ajax($.extend({url:that.options.url,type:that.options.asyncType,dataType:dt,data:$.isFunction(that.options.serializeGridData)?that.options.serializeGridData.call(that,that.options.postData):that.options.postData,success:function(content,st,xhr){success(content,st,xhr)},error:function(xhr,st,err){that._trigger("onLoadError",null,[{xhr:xhr,st:st,err:err}]);if(npage===1){that._endReq()}xhr=null;that.refresh()},beforeSend:function(xhr,settings){var gotoreq=true;gotoreq=that._trigger("beforeSend",null,{xhr:xhr,settings:settings});if(gotoreq===undefined){gotoreq=true}if(gotoreq===false){return false}else{that._beginReq()}}},$.grid.ajaxOptions,that.options.ajaxGridOptions));break;case"local":case"clientside":that._beginReq();that.options.datatype="local";var req=that._addLocalData();this._addJSONData(req,grid.rowsView,rcnt,npage>1,adjust);if(!that.options.b_sortdata){that.refresh()
}if(lc){lc.call(that,req)}that._trigger("AfterLoad",null,[req]);if(pvis){grid.populateVisible()}that._endReq();break}}},_reader:function(datatype){var field,f=[],j=0,i;for(i=0;i<this.options.colModel.length;i++){field=this.options.colModel[i];if(field.name!=="cb"&&field.name!=="subgrid"&&field.name!=="rn"){f[j]=datatype=="local"?field.name:((datatype=="xml"||datatype==="xmlstring")?field.xmlmap||field.name:field.jsonmap||field.name);j++}}return f},_addMulti:function(rowid,pos,irow){var that=this,isPicgrid=!!(that.options.model=="card"),v='<input role="checkbox" type="checkbox" id="jqg_'+that.options.id+"_"+rowid+'" class="cbox" name="jqg_'+that.options.id+"_"+rowid+'"/>',prp=that._formatCol(pos,irow,"",null,rowid,true);if(isPicgrid){return v}return'<td role="gridcell" '+prp+">"+v+"</td>"},_addSingle:function(rowid,pos,irow){var that=this,isPicgrid=!!(that.options.model=="card"),v='<input role="radio" type="radio" id="jqg_'+that.options.id+"_"+rowid+'" class="cbox" name="jqg_'+that.options.id+'"/>',prp=that._formatCol(pos,irow,"",null,rowid,true);if(isPicgrid){return v}return'<td role="gridcell" '+prp+">"+v+"</td>"},_addRowNum:function(pos,irow,pG,rN){var v=(parseInt(pG,10)-1)*parseInt(rN,10)+1+irow,prp=this._formatCol(pos,irow,v,null,irow,true);return'<td role="gridcell" class="coral-state-default grid-rownum" '+prp+">"+v+"</td>"},_customPanel:function(rd,ni,muti){var that=this,itemJson={},coreData="",itemData="",toolbarsData="",buttonsData="";var fun=$.coral.toFunction(that.options.picTemplate);if($.isFunction(fun)){itemJson=fun.apply("picTemplate",[{rowData:rd,ni:ni,muti:muti,getData:true}])}if(typeof(itemJson)=="undefined"){return""}var src=itemJson.src;if(!src){src="src"}coreData=itemJson.coreData||"<img src='"+rd.src+"'/>";itemData=itemJson.itemData||"";toolbarsData=itemJson.toolbarsData||"";buttonsData=itemJson.buttonsData||"";var ui=[];ui.push("<ul class='rowgrid coral-component-content coral-corner-all'>");ui.push("<li class='gridModel1 gridModel'>");if(coreData.length>0){ui.push(coreData)
}ui.push("<div class='valigh-fix'></div>");if(toolbarsData.length>0){ui.push("<div class='gridtoolbars'><div class='bgopacity'>&#160;</div>"+toolbarsData+"</div>")}ui.push("</li>");if(itemData.length>0){ui.push("<li class='gridModel2 gridModel'>");ui.push("<div class='griditem'>"+itemData+"</div>");ui.push("</li>")}if(muti.length>0||buttonsData.length>0){ui.push("<li class='gridModel3 gridModel'>");if(itemData.length>0||buttonsData.length>0){ui.push("<ul class='griditem'>");if(muti.length>0){ui.push("<li class='gridCheckbox'>"+muti+"</li>")}if(buttonsData.length>0){ui.push("<li class='gridbuttons'>"+buttonsData+"</li>")}ui.push("</ul>")}ui.push("</li>")}ui.push("</ul>");return ui.join("")},_addJSONData:function(data,t,rcnt,more,adjust){var that=this,isPicgrid=!!(that.options.model=="card");var startReq=new Date();if(data){if(that.options.treeANode===-1&&!that.options.scroll){that.emptyRows(t,false,true);rcnt=1}else{rcnt=rcnt>1?rcnt:1}}else{return}var dReader,locid="_id_",frd,locdata=(that.options.datatype!="local"&&that.options.loadonce)||that.options.datatype=="jsonstring";if(locdata){that.options.data=[];that.options._index={};that.options.localReader.id=locid}that.options.reccount=0;if(that.options.datatype=="local"){dReader=that.options.localReader;frd="local"}else{dReader=that.options.jsonReader;frd="json"}var ir=0,v,i,j,f=[],F,cur,gi=that.options.multiselect?1:0,si=that.options.subGrid?1:0,ni=that.options.rownumbers===true?1:0,len,drows,idn,rd={},fpos,idr,rowData=[],orgRowData=[],buttonsData=[],cn=(that.options.altRows===true)?" "+that.options.altclass:"",cn1,lp;if(gi==0){gi=that.options.singleselect?1:0}that.options.page=$.grid.getAccessor(data,dReader.page)||0;lp=$.grid.getAccessor(data,dReader.total);that.options.lastpage=lp===undefined?1:lp;that.options.records=$.grid.getAccessor(data,dReader.records)||0;that.options.total=$.grid.getAccessor(data,dReader.total)||0;that.options.userData=$.grid.getAccessor(data,dReader.userData)||{};if(!dReader.repeatitems){F=f=that._reader(frd)
}if(that.options.keyIndex===false){idn=$.isFunction(dReader.id)?dReader.id.call(that,data):dReader.id}else{idn=that.options.keyIndex}if(f.length>0&&!isNaN(idn)){if(that.options.remapColumns&&that.options.remapColumns.length){idn=$.inArray(idn,that.options.remapColumns)}idn=f[idn]}drows=$.grid.getAccessor(data,dReader.root);if(!drows){drows=[]}len=drows.length;i=0;if(len>0&&that.options.page<=0){that.options.page=1}var rn=parseInt(that.options.rowNum,10),br=that.options.scroll?$.grid.randId():1,altr;if(adjust){rn*=adjust+1}var afterInsRow=$.isFunction(that.options.afterInsertRow),grpdata={},hiderow=that.options.grouping&&that.options.groupingView.groupCollapse===true;while(i<len){cur=drows[i];idr=$.grid.getAccessor(cur,idn);if(idr===undefined){idr=br+i;if(f.length===0){if(dReader.cell){var ccur=$.grid.getAccessor(cur,dReader.cell);idr=ccur!==undefined?ccur[idn]||idr:idr;ccur=null}}}idr=that.options.idPrefix+idr;altr=rcnt===1?0:rcnt;cn1=(altr+i)%2==1?cn:"";var iStartTrTag=rowData.length;var iStartPicTag=orgRowData.length;rowData.push("");if(ni){rowData.push(that._addRowNum(0,i,that.options.page,that.options.rowNum))}if(gi){if(that.options.singleselect){rowData.push(that._addSingle(idr,ni,i));buttonsData.push(that._addSingle(idr,ni,i))}else{rowData.push(that._addMulti(idr,ni,i));buttonsData.push(that._addMulti(idr,ni,i))}}if(si){rowData.push($(that.element).grid("addSubGridCell",gi+ni,i+rcnt))}if(dReader.repeatitems){if(dReader.cell){cur=$.grid.getAccessor(cur,dReader.cell)}if(!F){F=this._orderedCols(gi+si+ni)}}for(j=0;j<F.length;j++){v=$.grid.getAccessor(cur,F[j]);rd[that.options.colModel[j+gi+si+ni].name]=v;rowData.push(this._addCell(idr,v,j+gi+si+ni,i+rcnt,cur,rd))}if(that.options.model=="card"){orgRowData[iStartTrTag]=that.constructPanel(idr,hiderow,cn1,rd,cur);orgRowData.push(that._customPanel(rd,ni,buttonsData));orgRowData.push("</li>")}else{rowData[iStartTrTag]=that.constructTr(idr,hiderow,cn1,rd,cur);rowData.push("</tr>")}if(that.options.grouping){var grlen=that.options.groupingView.groupField.length,grpitem=[];
for(var z=0;z<grlen;z++){grpitem.push(rd[that.options.groupingView.groupField[z]])}grpdata=$(that.element).grid("groupingPrepare",rowData,grpitem,grpdata,rd);rowData=[]}if(locdata||that.options.treeGrid===true){rd[locid]=idr;that.options.data.push(rd);that.options._index[idr]=that.options.data.length-1}if(that.options.gridview===false){if(isPicgrid){$("#"+$.grid.coralID(that.options.id)+" .coral-pic").append(orgRowData.join(""))}else{$("#"+$.grid.coralID(that.options.id)+" .coral-grid-btable tbody:first").append(rowData.join(""))}$(that).triggerHandler("gridAfterInsertRow",[idr,rd,cur]);if(afterInsRow){that.options.afterInsertRow.call(that,idr,rd,cur)}rowData=[];orgRowData=[];buttonsData=[]}$.fn.afterFmatter.call(that);rd={};ir++;i++;if(ir==rn){break}}if(that.options.gridview===true){fpos=that.options.treeANode>-1?that.options.treeANode:0;if(that.options.grouping){$(that.element).grid("groupingRender",grpdata,that.options.colModel.length);grpdata=null}else{if(that.options.treeGrid===true&&fpos>0){$(that.rows[fpos]).after(rowData.join(""))}else{$("#"+$.grid.coralID(that.options.id)+" tbody:first").append(rowData.join(""))}}}if(that.options.subGrid===true){try{$(that.element).grid("addSubGrid",gi+ni)}catch(_){}}that.options.totaltime=new Date()-startReq;if(ir>0){if(that.options.records===0){that.options.records=len}}rowData=null;if(that.options.treeGrid===true){try{$(that.element).grid("setTreeNode",fpos+1,ir+fpos+1)}catch(e){}}if(!that.options.treeGrid&&!that.options.scroll&&!isPicgrid){that.grid.rowsView.scrollTop=0}that.options.reccount=ir;that.options.treeANode=-1;if(that.options.userDataOnFooter){$(that).grid("footerData","set",that.options.userData,true)}if(locdata&&!that.options.orgdatatype){that.options.records=len;that.options.lastpage=Math.ceil(len/rn)}if(!more){that._updatepager(false,true)}if(locdata){while(ir<len&&drows[ir]){cur=drows[ir];idr=$.grid.getAccessor(cur,idn);if(idr===undefined){idr=br+ir;if(f.length===0){if(dReader.cell){var ccur2=$.grid.getAccessor(cur,dReader.cell);
idr=ccur2[idn]||idr;ccur2=null}}}if(cur){idr=that.options.idPrefix+idr;if(dReader.repeatitems){if(dReader.cell){cur=$.grid.getAccessor(cur,dReader.cell)}if(!F){F=_orderedCols(gi+si+ni)}}for(j=0;j<F.length;j++){v=$.grid.getAccessor(cur,F[j]);rd[that.options.colModel[j+gi+si+ni].name]=v}rd[locid]=idr;that.options.data.push(rd);that.options._index[idr]=that.options.data.length-1;rd={}}ir++}}},_addLocalData:function(){var that=this;var st,fndsort=false,cmtypes={},grtypes=[],grindexes=[],srcformat,sorttype,newformat;if(!$.isArray(that.options.data)){return}var grpview=that.options.grouping?that.options.groupingView:false;$.each(that.options.colModel,function(){sorttype=this.sorttype||"text";if(sorttype=="date"||sorttype=="datetime"){if(this.formatter&&typeof(this.formatter)==="string"&&this.formatter=="date"){if(this.formatoptions&&this.formatoptions.srcformat){srcformat=this.formatoptions.srcformat}else{srcformat=$.grid.formatter.date.srcformat}if(this.formatoptions&&this.formatoptions.newformat){newformat=this.formatoptions.newformat}else{newformat=$.grid.formatter.date.newformat}}else{srcformat=newformat=this.datefmt||"Y-m-d"}cmtypes[this.name]={stype:sorttype,srcfmt:srcformat,newfmt:newformat}}else{cmtypes[this.name]={stype:sorttype,srcfmt:"",newfmt:""}}if(that.options.grouping&&this.name==grpview.groupField[0]){var grindex=this.name;if(typeof this.index!="undefined"){grindex=this.index}grtypes[0]=cmtypes[grindex];grindexes.push(grindex)}if(!fndsort&&(this.index==that.options.sortname||this.name==that.options.sortname)){st=this.name;fndsort=true}});if(that.options.treeGrid){$(that.element).grid("sortTree",st,that.options.sortorder,cmtypes[st].stype,cmtypes[st].srcfmt);return}var compareFnMap={eq:function(queryObj){return queryObj.equals},ne:function(queryObj){return queryObj.notEquals},lt:function(queryObj){return queryObj.less},le:function(queryObj){return queryObj.lessOrEquals},gt:function(queryObj){return queryObj.greater},ge:function(queryObj){return queryObj.greaterOrEquals
},cn:function(queryObj){return queryObj.contains},nc:function(queryObj,op){return op==="OR"?queryObj.orNot().contains:queryObj.andNot().contains},bw:function(queryObj){return queryObj.startsWith},bn:function(queryObj,op){return op==="OR"?queryObj.orNot().startsWith:queryObj.andNot().startsWith},en:function(queryObj,op){return op==="OR"?queryObj.orNot().endsWith:queryObj.andNot().endsWith},ew:function(queryObj){return queryObj.endsWith},ni:function(queryObj,op){return op==="OR"?queryObj.orNot().equals:queryObj.andNot().equals},"in":function(queryObj){return queryObj.equals},nu:function(queryObj){return queryObj.isNull},nn:function(queryObj,op){return op==="OR"?queryObj.orNot().isNull:queryObj.andNot().isNull}},query=$.grid.from(that.options.data);if(that.options.ignoreCase){query=query.ignoreCase()}function tojLinq(group){var s=0,index,gor,ror,opr,rule;if(group.groups!==undefined){gor=group.groups.length&&group.groupOp.toString().toUpperCase()==="OR";if(gor){query.orBegin()}for(index=0;index<group.groups.length;index++){if(s>0&&gor){query.or()}try{tojLinq(group.groups[index])}catch(e){alert(e)}s++}if(gor){query.orEnd()}}if(group.rules!==undefined){if(s>0){var result=query.select();query=$.grid.from(result);if(that.options.ignoreCase){query=query.ignoreCase()}}try{ror=group.rules.length&&group.groupOp.toString().toUpperCase()==="OR";if(ror){query.orBegin()}for(index=0;index<group.rules.length;index++){rule=group.rules[index];opr=group.groupOp.toString().toUpperCase();if(compareFnMap[rule.op]&&rule.field){if(s>0&&opr&&opr==="OR"){query=query.or()}query=compareFnMap[rule.op](query,opr)(rule.field,rule.data,cmtypes[rule.field])}s++}if(ror){query.orEnd()}}catch(g){alert(g)}}}if(that.options.search===true){var srules=that.options.postData.filters;if(srules){if(typeof srules=="string"){srules=$.grid.parse(srules)}tojLinq(srules)}else{try{query=compareFnMap[that.options.postData.searchOper](query)(that.options.postData.searchField,that.options.postData.searchString,cmtypes[that.options.postData.searchField])
}catch(se){}}}if(that.options.grouping){query.orderBy(grindexes,grpview.groupOrder[0],grtypes[0].stype,grtypes[0].srcfmt);grpview.groupDataSorted=true}if(st&&that.options.sortorder&&fndsort){if(that.options.sortorder.toUpperCase()=="DESC"){query.orderBy(that.options.sortname,"d",cmtypes[st].stype,cmtypes[st].srcfmt)}else{query.orderBy(that.options.sortname,"a",cmtypes[st].stype,cmtypes[st].srcfmt)}}var queryResults=query.select(),ret=that._trigger("afterFilter",null,[{queryResults:query.select(),getData:true}])["result"];if(ret){queryResults=ret}var recordsperpage=parseInt(that.options.rowNum,10),total=queryResults.length,page=parseInt(that.options.page,10),totalpages=Math.ceil(total/recordsperpage),retresult={};queryResults=queryResults.slice((page-1)*recordsperpage,page*recordsperpage);query=null;cmtypes=null;if(that.options.orgdatatype){retresult[that.options.localReader.total]=that.options.lastpage;retresult[that.options.localReader.page]=that.options.orgpage;retresult[that.options.localReader.records]=that.options.records}else{retresult[that.options.localReader.total]=totalpages;retresult[that.options.localReader.page]=page;retresult[that.options.localReader.records]=total}retresult[that.options.localReader.root]=queryResults;retresult[that.options.localReader.userData]=that.options.userData;queryResults=null;return retresult},getColProp:function(colname){var ret={},that=this;if(!that.grid){return false}var cM=that.options.colModel;for(var i=0;i<cM.length;i++){if(cM[i].name==colname){ret=cM[i];break}}return ret},setColProp:function(colname,obj){if(this.grid){if(obj){var cM=this.options.colModel;for(var i=0;i<cM.length;i++){if(cM[i].name==colname){$.extend(this.options.colModel[i],obj);break}}}}},destroyGroupHeader:function(nullHeader){if(typeof(nullHeader)=="undefined"){nullHeader=true}var that=this,$tr,i,l,headers,$th,$resizing,grid=that.grid,thead=$("table.coral-grid-htable thead",grid.columnsView),cm=that.options.colModel,hc;if(!grid){return}$(this.element).unbind(".setGroupHeaders");
$tr=$("<tr>",{role:"rowheader"}).addClass("coral-grid-labels");headers=grid.headers;for(i=0,l=headers.length;i<l;i++){hc=cm[i].hidden?"none":"";$th=$(headers[i].el).width(headers[i].width).css("display",hc);try{$th.removeAttr("rowSpan")}catch(rs){$th.attr("rowSpan",1)}$tr.append($th);$resizing=$th.children("span.coral-grid-resize");if($resizing.length>0){$resizing[0].style.height=""}$th.children("div")[0].style.top=""}$(thead).children("tr.coral-grid-labels").remove();$(thead).prepend($tr);if(nullHeader===true){$(that.element).grid("option",{groupHeader:null})}},setGroupHeaders:function(o){o=$.extend({useColSpanStyle:false,groupHeaders:[]},o||{});this.options.groupHeader=o;var that=this,i,cmi,skip=0,$tr,$colHeader,th,$th,thStyle,iCol,cghi,numberOfColumns,titleText,cVisibleColumns,colModel=that.options.colModel,cml=colModel.length,ths=that.grid.headers,$htable=$("table.coral-grid-htable",that.grid.columnsView),$trLabels=$htable.children("thead").children("tr.coral-grid-labels:last").addClass("jqg-second-row-header"),$thead=$htable.children("thead"),$theadInTable,$firstHeaderRow=$htable.find(".jqg-first-row-header");if($firstHeaderRow[0]===undefined){$firstHeaderRow=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto")}else{$firstHeaderRow.empty()}var $firstRow,inColumnHeader=function(text,columnHeaders){var i=0,length=columnHeaders.length;for(;i<length;i++){if(columnHeaders[i].startColumnName===text){return i}}return -1};that.element.find(".coral-grid-columns-view>table").prepend($thead);$tr=$("<tr>",{role:"rowheader"}).addClass("coral-gird-labels jqg-third-row-header");for(i=0;i<cml;i++){th=ths[i].el;$th=$(th);cmi=colModel[i];thStyle={height:"0px",width:ths[i].width+"px",display:(cmi.hidden?"none":"")};$("<th>",{role:"gridcell"}).css(thStyle).addClass("coral-first-th-"+that.options.direction).appendTo($firstHeaderRow);th.style.width="";iCol=inColumnHeader(cmi.name,o.groupHeaders);if(iCol>=0){cghi=o.groupHeaders[iCol];numberOfColumns=cghi.numberOfColumns;
titleText=cghi.titleText;for(cVisibleColumns=0,iCol=0;iCol<numberOfColumns&&(i+iCol<cml);iCol++){if(!colModel[i+iCol].hidden){cVisibleColumns++}}$colHeader=$("<th>").attr({role:"columnheader"}).addClass("coral-state-default coral-th-column-header coral-th-"+that.options.direction).css({"border-top":"0px none"}).html(titleText);if(cVisibleColumns>0){$colHeader.attr("colspan",String(cVisibleColumns))}if(that.options.headertitles){$colHeader.attr("title",$colHeader.text())}if(cVisibleColumns===0){$colHeader.hide()}$th.before($colHeader);$tr.append(th);skip=numberOfColumns-1}else{if(skip===0){if(o.useColSpanStyle){$th.attr("rowspan","2")}else{$("<th>",{role:"columnheader"}).addClass("coral-state-default coral-th-column-header coral-th-"+that.options.direction).css({display:cmi.hidden?"none":"","border-top":"0px none"}).insertBefore($th);$tr.append(th)}}else{$tr.append(th);skip--}}}$theadInTable=$(that.element).find(".coral-grid-htable").children("thead");$theadInTable.prepend($firstHeaderRow);$tr.insertAfter($trLabels);$htable.append($theadInTable);if(o.useColSpanStyle){$htable.find("span.coral-gird-resize").each(function(){var $parent=$(this).parent();if($parent.is(":visible")){this.style.cssText="height: "+$parent.height()+"px !important; cursor: col-resize;"}});$htable.find("div.coral-gird-sortable").each(function(){var $that=$(this),$parent=$that.parent();if($parent.is(":visible")&&$parent.is(":has(span.coral-gird-resize)")){$that.css("top",($parent.height()-$that.outerHeight())/2+"px")}})}$firstRow=$theadInTable.find("tr.jqg-first-row-header");$(that.element).bind("gridonresizestop.setGroupHeaders",function(e,nw,idx){$firstRow.find("th").eq(idx).width(nw)})},getGridParam:function(pName){var that=this;if(!that||!that.grid){return}if(!pName){return that.p}else{return typeof(that.options[pName])!="undefined"?that.options[pName]:null}},setGridParam:function(newParams){if(this.grid&&typeof(newParams)==="object"){$.extend(true,this.options,newParams)}},_setOption:function(key,value){var that=this,options=this.options;
if(this.grid){$.extend(true,options[key],value)}if(key=="height"){that._setGridHeight(value);that._hasScrollOffset()}if(key=="width"){that._setGridWidth(value);that._hasScrollOffset()}if(key=="model"){if(value=="grid"){that.pic.hide();that.gridRows.show();that.gridColumns.show()}else{if(value=="card"){that.gridRows.hide();that.gridColumns.hide();that.pic.show()}}}this._super(key,value)},_hasScrollOffset:function(){var that=this,grid=this.grid;if(grid.rowsView.style.overflow!="hidden"&&grid.rowsView.scroll!="no"&&grid.rowsView.scrollHeight>grid.rowsView.offsetHeight){$(grid.columnsView).css("padding-right",that.options.scrollOffset+"px");return true}else{$(grid.columnsView).css("padding-right","");$(grid.rowsView).css("padding-right","");return false}},_hasHorizontalScrollBar:function(){var that=this,grid=this.grid;var fw=that.rightFrozenWidth;if(grid.rowsView.style.overflow!="hidden"&&grid.rowsView.scroll!="no"&&(grid.rowsView.scrollWidth-grid.rowsView.clientWidth)>0){return true}else{return false}},_setGridWidth:function(nwidth,shrink){if(!this.grid||nwidth==0){return}var that=this,grid=this.grid,cw,initwidth=0,brd=$.support.boxSizing?0:that.options.cellLayout,lvc,vc=0,hs=false,scw=that.options.scrollOffset,aw,gw=0,cl=0,cr;if(typeof shrink!="boolean"){shrink=that.options.shrinkToFit}if(isNaN(nwidth)){return}else{nwidth=parseInt(nwidth,10);that.grid.width=that.options.width=nwidth}if(shrink===false&&that.options.forceFit===true){that.options.forceFit=false}$.each(that.options.colModel,function(){if((this.hidden===false||typeof(this.hidden)=="undefined")){cw=this.widthOrg?this.widthOrg:parseInt(this.width,10);initwidth+=cw+brd;if(this.fixed){gw+=cw+brd}else{vc++}cl++}});var useMinWidth=(typeof that.options.minWidth=="boolean"&&!that.options.minWidth)?true:initwidth<$(that.element).width();if(shrink===true||useMinWidth){if(useMinWidth){if(vc===0){return}that.options.tblwidth=initwidth;aw=nwidth-brd*vc-gw;if(!isNaN(that.options.height)){if($(that.grid.rowsView)[0].clientHeight<$(that.grid.rowsView)[0].scrollHeight||that.rows.length===1){hs=true;
aw-=scw}}initwidth=0;var cle=that.grid.cols.length>0;$.each(that.options.colModel,function(i){if((this.hidden===false||typeof(this.hidden)=="undefined")&&!this.fixed){cw=this.widthOrg?this.widthOrg:parseInt(this.width,10);cw=Math.round(aw*cw/(that.options.tblwidth-brd*vc-gw));if(cw<0){return}this.width=cw;initwidth+=cw;that.grid.headers[i].width=cw;that.grid.headers[i].el.style.width=cw+"px";var groupHeader=$("tr.jqg-first-row-header>th:eq("+i+")",$("table:first",that.grid.columnsView));if(groupHeader.length>0){groupHeader[0].style.width=cw+"px"}if(that.options.footerrow){that.grid.footers[i].style.width=cw+"px"}if(cle){that.grid.cols[i].style.width=(cw)+"px"}lvc=i}});if(!lvc){return}cr=0;if(hs){if(nwidth-gw-(initwidth+brd*vc)!==scw){cr=nwidth-gw-(initwidth+brd*vc)-scw}}else{if(Math.abs(nwidth-gw-(initwidth+brd*vc))!==1){cr=nwidth-gw-(initwidth+brd*vc)}}that.options.colModel[lvc].width+=(cr-1);that.options.tblwidth=initwidth+cr+brd*vc+gw;if(that.options.tblwidth>nwidth){var delta=that.options.tblwidth-parseInt(nwidth,10);that.options.tblwidth=nwidth;cw=that.options.colModel[lvc].width=that.options.colModel[lvc].width-delta}else{cw=that.options.colModel[lvc].width}that.grid.headers[lvc].width=cw;that.grid.headers[lvc].el.style.width=cw+"px";if(cle){that.grid.cols[lvc].style.width=cw+"px"}}}$(grid.rowsView).width(nwidth);$(grid.columnsView).width(nwidth);if(that.options.tblwidth){$("table:first",grid.rowsView).css("width",that.options.tblwidth+"px");$("table:first",grid.columnsView).css("width",that.options.tblwidth+"px");that.grid.columnsView.scrollLeft=that.grid.rowsView.scrollLeft}},_setGridHeight:function(nh){var that=this,grid=that.grid,isPicgrid=!!(that.options.model=="card");if(!that.grid){return}var rowsView=$(that.grid.rowsView);if(that.options.frozenColumns===true){$("#"+$.grid.coralID(that.options.id)+"_frozen").parent().height(rowsView.height()-16)}var tblHeight="auto";if(String(nh).toLowerCase()==="auto"){nh="auto";tblHeight="auto";that.pic.css({height:"auto"});
rowsView.css({height:"auto"})}else{tblHeight=nh-that.element.find(".coral-grid-pager").height()-$(grid.caption).height();that.pic.css({height:tblHeight+(isNaN(tblHeight)?"":"px")});tblHeight=nh-$(grid.columnsView).outerHeight(true)-that.element.find(".coral-grid-pager").outerHeight(true)-$(grid.caption).height();rowsView.css({height:tblHeight+(isNaN(tblHeight)?"":"px")})}that.options.height=nh;if(that.options.scroll){that.grid.populateVisible()}},getDataIDs:function(){var ids=[],i=0,len,j=0;len=this.rows.length;if(len&&len>0){while(i<len){if($(this.rows[i]).hasClass("jqgrow")){ids[j]=this.rows[i].id;j++}i++}}return ids},setRowData:function(rowid,data,cssp){var that=this,nm,success=true,title;if(!this.grid){return false}var t=this,vl,ind,cp=typeof cssp,lcdata={};ind=t.rows.namedItem(rowid);if(!ind){return false}if(data){try{$(this.options.colModel).each(function(i){nm=this.name;if(data[nm]!==undefined){lcdata[nm]=this.formatter&&typeof(this.formatter)==="string"&&this.formatter=="date"?$.unformat.date.call(t,data[nm],this):data[nm];vl=t._formatter(rowid,data[nm],i,data,"edit");title=this.title?{title:$.grid.stripHtml(vl)}:{};if(t.options.treeGrid===true&&nm==t.options.ExpandColumn){$("td:eq("+i+") > span:first",ind).html(vl).attr(title)}else{$("td:eq("+i+")",ind).html(vl).attr(title)}}});if(t.options.datatype=="local"){var id=$.grid.stripPref(t.options.idPrefix,rowid),pos=t.options._index[id];if(t.options.treeGrid){for(var key in t.options.treeReader){if(lcdata.hasOwnProperty(t.options.treeReader[key])){delete lcdata[t.options.treeReader[key]]}}}if(typeof(pos)!="undefined"){t.options.data[pos]=$.extend(true,t.options.data[pos],lcdata)}lcdata=null}}catch(e){success=false}}if(success){if(cp==="string"){$(ind).addClass(cssp)}else{if(cp==="object"){$(ind).css(cssp)}}t._trigger("aftercomplete")}return success},delRowData:function(rowid){var success=false,rowInd,ia,ri;var that=this;var isPicgrid=!!(that.options.model=="card");if(isPicgrid){rowInd=that.pic.children("#"+rowid)[0];
if(!rowInd){return false}else{$(rowInd).remove();that.options.records--;that.options.reccount--;that._updatepager(true,false);success=true;if(that.options.multiselect){ia=$.inArray(rowid,that.options.selarrrow);if(ia!=-1){that.options.selarrrow.splice(ia,1)}}if(rowid==that.options.selrow){that.options.selrow=null}}if(that.options.datatype=="local"){var id=$.grid.stripPref(that.options.idPrefix,rowid),pos=that.options._index[id];if(typeof(pos)!="undefined"){that.options.data.splice(pos,1);that.refreshIndex()}}}else{rowInd=that.rows.namedItem(rowid);if(!rowInd){return false}else{ri=rowInd.rowIndex;$(rowInd).remove();that.options.records--;that.options.reccount--;that._updatepager(true,false);success=true;if(that.options.multiselect){ia=$.inArray(rowid,that.options.selarrrow);if(ia!=-1){that.options.selarrrow.splice(ia,1)}}if(rowid==that.options.selrow){that.options.selrow=null}if(rowid==that.options.editrow){that.options.editrow=null;that.rowEditButtons.remove()}}if(that.options.datatype=="local"){var id=$.grid.stripPref(that.options.idPrefix,rowid),pos=that.options._index[id];if(typeof(pos)!="undefined"){that.options.data.splice(pos,1);that.refreshIndex()}}if(that.options.altRows===true&&success){var cn=that.options.altclass;$(that.rows).each(function(i){if(i%2==1){$(this).addClass(cn)}else{$(this).removeClass(cn)}})}if(!that.getDataIDs().length){that._cancelCheckAll()}return success}},_cancelCheckAll:function(){var that=this;if(that.options.multiselect){$("#cb_"+$.grid.coralID(that.options.id),that.grid.columnsView)[that.options.useProp?"prop":"attr"]("checked",false)}},resetSelection:function(rowid){var t=this,ind,sr,fid;if(t.options.frozenColumns===true){fid=t.options.id+"_frozen"}if(typeof(rowid)!=="undefined"){sr=rowid===t.options.selrow?t.options.selrow:rowid;$("#"+$.grid.coralID(t.options.id)+" tbody:first tr#"+$.grid.coralID(sr)).removeClass("coral-state-highlight").attr("aria-selected","false");if(fid){$("#"+$.grid.coralID(sr),"#"+$.grid.coralID(fid)).removeClass("coral-state-highlight")
}if(t.options.multiselect){$("#jqg_"+$.grid.coralID(t.options.id)+"_"+$.grid.coralID(sr),"#"+$.grid.coralID(t.options.id))[t.options.useProp?"prop":"attr"]("checked",false);if(fid){$("#jqg_"+$.grid.coralID(t.options.id)+"_"+$.grid.coralID(sr),"#"+$.grid.coralID(fid))[t.options.useProp?"prop":"attr"]("checked",false)}t._setHeadCheckBox(false)}sr=null}else{if(!t.options.multiselect){if(t.options.selrow){$("#"+$.grid.coralID(t.options.id)+" tbody:first tr#"+$.grid.coralID(t.options.selrow)).removeClass("coral-state-highlight").attr("aria-selected","false");if(fid){$("#"+$.grid.coralID(t.options.selrow),"#"+$.grid.coralID(fid)).removeClass("coral-state-highlight")}t.options.selrow=null}}else{$(t.options.selarrrow).each(function(i,n){ind=t.rows.namedItem(n);$(ind).removeClass("coral-state-highlight").attr("aria-selected","false");$("#jqg_"+$.grid.coralID(t.options.id)+"_"+$.grid.coralID(n))[t.options.useProp?"prop":"attr"]("checked",false);if(fid){$("#"+$.grid.coralID(n),"#"+$.grid.coralID(fid)).removeClass("coral-state-highlight");$("#jqg_"+$.grid.coralID(t.options.id)+"_"+$.grid.coralID(n),"#"+$.grid.coralID(fid))[t.options.useProp?"prop":"attr"]("checked",false)}});t._setHeadCheckBox(false);t.options.selarrrow=[]}}if(t.options.cellEdit===true){if(parseInt(t.options.iCol,10)>=0&&parseInt(t.options.iRow,10)>=0){$("td:eq("+t.options.iCol+")",t.rows[t.options.iRow]).removeClass("edit-cell coral-state-highlight");$(t.rows[t.options.iRow]).removeClass("selected-row coral-state-hover")}}t.options.savedRow=[]},getRowData:function(rowid){var res={},resall,getall=false,len,j=0;var that=this,nm,ind;var isPicgrid=!!(that.options.model=="card");if(isPicgrid){if(typeof(rowid)=="undefined"){getall=true;resall=[];len=that.pic.children("li").length}else{ind=that.pic.children("#"+rowid)[0];if(!ind){return res}len=2}var localKey="_id_";while(j<len){if(getall){ind=that.pic.children("li")[j]}if($(ind).hasClass("gridPanel")){for(var k=0;k<that.options.data.length;k++){if(that.options.data[k][localKey]==ind.id){res=that.options.data[k]
}}if(getall){resall.push(res);res={}}}j++}}else{if(typeof(rowid)=="undefined"){getall=true;resall=[];len=that.rows.length}else{ind=that.rows.namedItem(rowid);if(!ind){return res}len=2}while(j<len){if(getall){ind=that.rows[j]}if($(ind).hasClass("jqgrow")){$('td[role="gridcell"]',ind).each(function(i){nm=that.options.colModel[i].name;if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"){if(that.options.treeGrid===true&&nm==that.options.ExpandColumn){res[nm]=$.grid.htmlDecode($("span:first",this).html())}else{try{res[nm]=$.unformat.call(that,this,{rowId:ind.id,colModel:that.options.colModel[i]},i,"get")}catch(e){res[nm]=$.grid.htmlDecode($(this).html())}}}});if(getall){resall.push(res);res={}}}j++}}return resall?resall:res},addRowData:function(rowid,rdata,pos,src){if(!pos){pos="last"}var success=false,nm,row,picRow,buttonsData,gi,si,ni,sind,i,v,prp="",aradd,cnm,cn,data,cm,id;if(rdata){if($.isArray(rdata)){aradd=true;cnm=rowid}else{rdata=[rdata];aradd=false}var t=this,datalen=rdata.length;var isPicgrid=!!(t.options.model=="card");ni=t.options.rownumbers===true?1:0;gi=t.options.multiselect===true?1:(t.options.singleselect===true?1:0);si=t.options.subGrid===true?1:0;if(!aradd){if(typeof(rowid)!="undefined"){rowid=rowid+""}else{rowid=$.grid.randId();if(t.options.keyIndex!==false){cnm=t.options.colModel[t.options.keyIndex+gi+si+ni].name;if(typeof rdata[0][cnm]!="undefined"){rowid=rdata[0][cnm]}}}}cn=t.options.altclass;var k=0,cna="",lcdata={},air=$.isFunction(t.options.afterInsertRow)?true:false;while(k<datalen){data=rdata[k];row=[];buttonsData=[];picRow=[];if(aradd){try{rowid=data[cnm]}catch(e){rowid=$.grid.randId()}cna=t.options.altRows===true?(t.rows.length-1)%2===0?cn:"":""}cna+=" new-row ";id=rowid;rowid=t.options.idPrefix+rowid;if(ni){prp=t._formatCol(0,1,"",null,rowid,true);row[row.length]='<td role="gridcell" aria-describedby="'+t.options.id+'_rn" class="coral-state-default grid-rownum" '+prp+">0</td>"}if(gi){if(this.options.singleselect){v='<input role="radio" type="radio" id="jqg_'+t.options.id+"_"+rowid+'" name="jqg_'+t.options.id+'" class="cbox"/>'
}else{v='<input role="checkbox" type="checkbox" id="jqg_'+t.options.id+"_"+rowid+'" name="jqg_'+t.options.id+"_"+rowid+'" class="cbox"/>'}prp=t._formatCol(ni,1,"",null,rowid,true);row[row.length]='<td role="gridcell" aria-describedby="'+t.options.id+'_cb" '+prp+">"+v+"</td>";buttonsData.push(v)}if(si){row[row.length]=$(t).grid("addSubGridCell",gi+ni,1)}for(i=gi+si+ni;i<t.options.colModel.length;i++){cm=t.options.colModel[i];nm=cm.name;lcdata[nm]=cm.formatter&&typeof(cm.formatter)==="string"&&cm.formatter=="date"?$.unformat.date.call(t,data[nm],cm):data[nm];v=t._formatter(rowid,$.grid.getAccessor(data,nm),i,data,"edit");prp=t._formatCol(i,1,v,data,rowid,true);row[row.length]='<td role="gridcell" aria-describedby="'+t.options.id+"_"+nm+'" '+prp+">"+v+"</td>"}if(isPicgrid){picRow.unshift(t.constructPanel(rowid,false,cna,lcdata,lcdata));picRow.push(t._customPanel(lcdata,ni,buttonsData));picRow.push("</li>")}else{row.unshift(t.constructTr(rowid,false,cna,lcdata,lcdata));row[row.length]="</tr>"}if(isPicgrid){$("#"+$.grid.coralID(t.options.id)+" .coral-pic").append(picRow.join(""))}else{if(t.rows.length===0){$("table:first",t.grid.rowsView).append(row.join(""))}else{switch(pos){case"last":$(t.rows[t.rows.length-1]).after(row.join(""));sind=t.rows.length-1;break;case"first":$(t.rows[0]).after(row.join(""));sind=1;break;case"after":sind=t.rows.namedItem(src);if(sind){if($(t.rows[sind.rowIndex+1]).hasClass("coral-subgrid")){$(t.rows[sind.rowIndex+1]).after(row)}else{$(sind).after(row.join(""))}}sind++;break;case"before":sind=t.rows.namedItem(src);if(sind){$(sind).before(row.join(""));sind=sind.rowIndex}sind--;break}}}if(t.options.subGrid===true){$(t).grid("addSubGrid",gi+ni,sind)}t.options.records++;t.options.reccount++;$(t).triggerHandler("gridAfterInsertRow",[rowid,data,data]);if(air){t.options.afterInsertRow.call(t,rowid,data,data)}k++;if(t.options.datatype=="local"){lcdata[t.options.localReader.id]=id;t.options._index[id]=t.options.data.length;t.options.data.push(lcdata);lcdata={}
}}if(t.options.altRows===true&&!aradd){if(pos=="last"){if((t.rows.length-1)%2==1){$(t.rows[t.rows.length-1]).addClass(cn)}}else{$(t.rows).each(function(i){if(i%2==1){$(this).addClass(cn)}else{$(this).removeClass(cn)}})}}t._updatepager(true,true);success=true;$("#noRecordsTips_"+$.grid.coralID(t.options.id)).hide();$.fn.afterFmatter.call(t)}return success},clearGridData:function(clearfooter){var that=this;var isPicgrid=!!(that.options.model=="card");if(!that.grid){return}if(typeof clearfooter!="boolean"){clearfooter=false}if(isPicgrid){$("#"+$.grid.coralID(that.options.id)+" .coral-pic").empty()}else{if(that.options.deepempty){$("#"+$.grid.coralID(that.options.id)+" tbody:first tr:gt(0)").remove()}else{var trf=$(" tbody:first tr:first",that.element)[0];$(" tbody:first",that.element).empty().append(trf)}}if(that.options.footerrow&&clearfooter){$(".coral-grid-ftable td",that.grid.sDiv).html("&#160;")}that.options.selrow=null;that.options.selarrrow=[];that.options.savedRow=[];that.options.records=0;that.options.page=1;that.options.lastpage=0;that.options.reccount=0;that.options.data=[];that.options._index={};that._updatepager(true,false);that._cancelCheckAll()},sortableRows:function(){var opts={},t=0;if(opts.sortableRowsOptions){$.extend(opts,opts.sortableRowsOptions)}var that=this;if(!that.grid){return}if(that.options.treeGrid){return}if($.fn.sortable){opts=$.extend({cursor:"move",axis:"y",items:".jqgrow"},opts||{});opts.change=function(e,ui){ui.prevItemId=$(ui.placeholder[0]).prev("tr").attr("id");ui.nextItemId=$(ui.placeholder[0]).next("tr").attr("id");ui.targetId=ui.position.top>ui.originalPosition.top?ui.prevItemId:ui.nextItemId;$("#"+that.id+" #"+ui.targetId).siblings().removeClass("coral-state-target");$("#"+that.id+" #"+ui.targetId).addClass("coral-state-target");that._trigger("onSortableRows",e,[ui])};opts.start=function(e,ui){$(ui.item).css("border-width","0px");ui.originalPermutation=[];if(ui.item.is("tr")){$("td",ui.item).each(function(i){this.style.width=that.grid.cols[i].style.width
})}else{$("td",ui.item.find("tr:first")).each(function(i){this.style.width=that.grid.cols[i].style.width})}if(that.options.subGrid){var subgid=$(ui.item).attr("id");try{$(that).grid("collapseSubGridRow",subgid)}catch(e){}}$("tr.jqgrow",that.element.find(".coral-grid-btable")).each(function(){this.id!==""&&ui.originalPermutation.push(this.id)});that.sortableRowOriginalPermutation=ui.originalPermutation;that._trigger("beforeSortableRows",e,[ui])};opts.update=function(e,ui){$(ui.item).css("border-width","");ui.itemId=[];ui.permutation=[];ui.originalPermutation=that.sortableRowOriginalPermutation||[];if(that.options.rownumbers===true){$("td.grid-rownum",that.rows).each(function(i){$(this).html(i+1+(parseInt(that.options.page,10)-1)*parseInt(that.options.rowNum,10));ui.permutation.push(that.rows[i+1].id)})}else{$("tr.jqgrow",that.grid.rowsView).each(function(i){ui.permutation.push(this.id)})}$.each(ui.item,function(i){ui.itemId.push(ui.item[i].id)});ui.prevItemId=$(ui.item[0]).prev("tr").attr("id");ui.nextItemId=$(ui.item[0]).next("tr").attr("id");ui.targetId=ui.position.top>ui.originalPosition.top?ui.prevItemId:ui.nextItemId;var dr=$.data(that.element[0],"dns-ref");if(dr){var opts=$.data(dr,"dns");if(opts.dragToSort){ui.item.remove();opts.dragToSort=false;var i=0;if(ui.targetId){for(;i<opts.dataItems.length;i++){$(dr).grid("delRowData",opts.dataItems[i].id)}that.element.grid("addRowData",opts.rowid,opts.dataItems,"after",ui.targetId)}}}that._trigger("afterSortableRows",e,[ui])};$("tbody:first",that.grid.rowsView).sortable(opts)}},destroySortableRows:function(opts){var that=this;if(!that.grid){return}if($.fn.sortable){$("tbody:first",that.grid.rowsView).sortable("destroy")}},gridDnS:function(opts){var that=this,t=0,items=[];if(!that.grid){return}if(that.options.treeGrid){return}if(!$.fn.draggable||!$.fn.droppable){return}var appender="<table id='grid_dns' class='coral-grid-dns'></table>";if($("#grid_dns")[0]===undefined){$("body").append(appender)}if(!opts.connectWith){return
}opts.connectWith=opts.connectWith.split(",");opts.connectWith=$.map(opts.connectWith,function(n){return $.trim(n)});var connectToSortableOpts=opts.connectWith.join(" .coral-grid-btable>tbody, ")+" .coral-grid-btable>tbody";opts=$.extend({onstart:null,onstop:null,beforedrop:null,ondrop:null,dragcopy:false,dropbyname:false,droppos:"first",autoid:true,rowid:"id",dataItems:[],autoidprefix:"dns_"},opts||{});$.data(that.element[0],"dns",opts);if(that.options.reccount!="0"&&!that.options.jqgdns){var datadns=$.data(that.element,"dns");$("tr.jqgrow:not(.coral-draggable)",that.element).draggable({revert:"invalid",helper:function(e,ui){var tId=$(e.target).parent("tr")[0].id,i=0,html=$("<div></div>"),sel=that.element.grid("option","selarrrow").concat();$.data(that.element[0],"dns").dataItems=[];if($.inArray(tId,sel)>-1){for(i;i<sel.length;i++){$.data(that.element[0],"dns").dataItems.push($(that.element).grid("getRowData",sel[i]));html.append($(".coral-grid-btable>tbody #"+sel[i],that.element).clone())}return html}else{$.data(that.element[0],"dns").dataItems.push(that.element.grid("getRowData",tId));html.append($(e.target).parent("tr").clone());return html}},connectToSortable:connectToSortableOpts,cursor:"move",appendTo:"#grid_dns",zIndex:5000,start:function(ev,ui){if(that.options.subGrid){var subgid=$(ui.helper).attr("id");try{$(that.element).grid("collapseSubGridRow",subgid)}catch(e){}}$.data(that.element[0],"dns").dragToSort=true;for(var i=0;i<$.data(that.element[0],"dns").connectWith.length;i++){if($($.data(that.element[0],"dns").connectWith[i]).grid("option","reccount")=="0"){$($.data(that.element[0],"dns").connectWith[i]).grid("addRowData","jqg_empty_row",{})}}ui.helper.addClass("coral-state-highlight");$("td",ui.helper.find("tr:first")).each(function(i){this.style.width=that.grid.headers[i].width+"px"});if(opts.onstart&&$.isFunction(opts.onstart)){opts.onstart.call($($t),ev,ui)}},stop:function(ev,ui){if(ui.helper.dropped&&!opts.dragcopy){var ids=$(ui.helper).attr("id");if(ids===undefined){ids=$(this).attr("id")
}$(that.element).grid("delRowData",ids)}for(var i=0;i<$.data(that.element[0],"dns").connectWith.length;i++){$($.data(that.element[0],"dns").connectWith[i]).grid("delRowData","jqg_empty_row")}if(opts.onstop&&$.isFunction(opts.onstop)){opts.onstop.call($($t),ev,ui)}}})}that.options.jqgdns=true;for(var i=0;i<opts.connectWith.length;i++){var cn=opts.connectWith[i];$.data($(cn)[0],"dns-ref",that.element[0])}},gridDnD:function(opts){var that=this;if(!that.grid){return}if(that.options.treeGrid){return}if(!$.fn.draggable||!$.fn.droppable){return}function updateDnD(){var datadnd=$.data(that.element,"dnd");$("tr.jqgrow:not(.coral-draggable)",that.element).draggable($.isFunction(datadnd.drag)?datadnd.drag.call($(that.element),datadnd):datadnd.drag)}var appender="<table id='jqgrid_dnd' class='coral-grid-dnd'></table>";if($("#jqgrid_dnd")[0]===undefined){$("body").append(appender)}if(typeof opts=="string"&&opts=="updateDnD"&&that.options.jqgdnd===true){updateDnD();return}if(!opts.connectWith){return}opts.connectWith=opts.connectWith.split(",");opts.connectWith=$.map(opts.connectWith,function(n){return $.trim(n)});var connectToSortableOpts=opts.connectWith.join(" .coral-grid-btable>tbody, ")+" .coral-grid-btable>tbody";opts=$.extend({drag:function(opts){return $.extend({start:function(ev,ui){if(that.options.subGrid){var subgid=$(ui.helper).attr("id");try{$(that.element).grid("collapseSubGridRow",subgid)}catch(e){}}for(var i=0;i<$.data(that.element,"dnd").connectWith.length;i++){if($($.data(that.element,"dnd").connectWith[i]).grid("option","reccount")=="0"){$($.data(that.element,"dnd").connectWith[i]).grid("addRowData","jqg_empty_row",{})}}ui.helper.addClass("coral-state-highlight");$("td",ui.helper).each(function(i){this.style.width=that.grid.headers[i].width+"px"});if(opts.onstart&&$.isFunction(opts.onstart)){opts.onstart.call($($t),ev,ui)}},stop:function(ev,ui){if(ui.helper.dropped&&!opts.dragcopy){var ids=$(ui.helper).attr("id");if(ids===undefined){ids=$(this).attr("id")}$(that.element).grid("delRowData",ids)
}for(var i=0;i<$.data(that.element,"dnd").connectWith.length;i++){$($.data(that.element,"dnd").connectWith[i]).grid("delRowData","jqg_empty_row")}if(opts.onstop&&$.isFunction(opts.onstop)){opts.onstop.call($($t),ev,ui)}}},opts.drag_opts||{})},drop:function(opts){return $.extend({accept:function(d){if(!$(d).hasClass("jqgrow")){return d}var tid=$(d).closest("table.coral-grid-btable");if(tid.length>0&&$.data(that.element,"dnd")!==undefined){var cn=$.data(that.element,"dnd").connectWith;return $.inArray("#"+$.grid.coralID(this.id),cn)!=-1?true:false}return false},drop:function(ev,ui){if(!$(ui.draggable).hasClass("jqgrow")){return}var accept=$(ui.draggable).attr("id");var getdata=ui.draggable.parents(".coral-grid").grid("getRowData",accept);if(!opts.dropbyname){var j=0,tmpdata={},nm;var dropmodel=$("#"+$.grid.coralID(this.id)).grid("option","colModel");try{for(var key in getdata){if(getdata.hasOwnProperty(key)){nm=dropmodel[j].name;if(!(nm=="cb"||nm=="rn"||nm=="subgrid")){if(getdata.hasOwnProperty(key)&&dropmodel[j]){tmpdata[nm]=getdata[key]}}else{j++}j++}}getdata=tmpdata}catch(e){}}ui.helper.dropped=true;if(opts.beforedrop&&$.isFunction(opts.beforedrop)){var datatoinsert=opts.beforedrop.call(this,ev,ui,getdata,$("#"+$.grid.coralID(that.options.id)),$(this));if(typeof datatoinsert!="undefined"&&datatoinsert!==null&&typeof datatoinsert=="object"){getdata=datatoinsert}}if(ui.helper.dropped){var grid;if(opts.autoid){if($.isFunction(opts.autoid)){grid=opts.autoid.call(this,getdata)}else{grid=Math.ceil(Math.random()*1000);grid=opts.autoidprefix+grid}}$("#"+$.grid.coralID(this.id)).grid("addRowData",grid,getdata,opts.droppos)}if(opts.ondrop&&$.isFunction(opts.ondrop)){opts.ondrop.call(this,ev,ui,getdata)}}},opts.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"coral-state-active",hoverClass:"coral-state-hover"},drag_opts:{revert:"invalid",helper:"clone",connectToSortable:connectToSortableOpts,cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5000},dragcopy:false,dropbyname:false,droppos:"first",autoid:true,autoidprefix:"dnd_"},opts||{});
$.data(that.element,"dnd",opts);if(that.options.reccount!="0"&&!that.options.jqgdnd){updateDnD()}that.options.jqgdnd=true;for(var i=0;i<opts.connectWith.length;i++){var cn=opts.connectWith[i];$(cn).droppable($.isFunction(opts.drop)?opts.drop.call($(that),opts):opts.drop)}},getInd:function(rowid,rc){var ret=false,rw;rw=this.rows.namedItem(rowid);if(rw){ret=rc===true?rw:rw.rowIndex}return ret}});$.extend($.grid,{htmlDecode:function(value){if(value&&(value=="&nbsp;"||value=="&#160;"||(value.length===1&&value.charCodeAt(0)===160))){return""}return !value?value:String(value).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/\'/g,"&acute;")},htmlEncode:function(value){return !value?value:String(value).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&acute;")},format:function(format){var args=$.makeArray(arguments).slice(1);if(format===undefined){format=""}return format.replace(/\{(\d+)\}/g,function(m,i){return args[i]})},getCellIndex:function(cell){var c=$(cell);if(c.is("tr")){return -1}c=(!c.is("td")&&!c.is("th")?c.closest("td,th"):c)[0];return c.cellIndex},stripHtml:function(v){v=v+"";var regexp=/<("[^"]*"|'[^']*'|[^'">])*>/gi;if(v){v=v.replace(regexp,"");return(v&&v!=="&nbsp;"&&v!=="&#160;")?v.replace(/\"/g,"'"):""}else{return v}},stripPref:function(pref,id){var obj=$.type(pref);if(obj=="string"||obj=="number"){pref=String(pref);id=pref!==""?String(id).replace(String(pref),""):id}return id},stringToDoc:function(xmlString){var xmlDoc;if(typeof xmlString!=="string"){return xmlString}try{var parser=new DOMParser();xmlDoc=parser.parseFromString(xmlString,"text/xml")}catch(e){xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async=false;xmlDoc.loadXML(xmlString)}return(xmlDoc&&xmlDoc.documentElement&&xmlDoc.documentElement.tagName!="parsererror")?xmlDoc:null},parse:function(jsonString){var js=jsonString;if(js.substr(0,9)=="while(1);"){js=js.substr(9)}if(js.substr(0,2)=="/*"){js=js.substr(2,js.length-4)
}if(!js){js="{}"}return($.grid.useJSON===true&&typeof(JSON)==="object"&&typeof(JSON.parse)==="function")?JSON.parse(js):eval("("+js+")")},parseDate:function(format,date){var tsp={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},k,hl,dM,regdate=/[\\\/:_;.,\t\T\s-]/;if(date&&date!==null&&date!==undefined){date=$.trim(date);date=date.split(regdate);if($.grid.formatter.date.masks[format]!==undefined){format=$.grid.formatter.date.masks[format]}format=format.split(regdate);var dfmt=$.grid.formatter.date.monthNames;var afmt=$.grid.formatter.date.AmPm;var h12to24=function(ampm,h){if(ampm===0){if(h===12){h=0}}else{if(h!==12){h+=12}}return h};for(k=0,hl=format.length;k<hl;k++){if(format[k]=="M"){dM=$.inArray(date[k],dfmt);if(dM!==-1&&dM<12){date[k]=dM+1;tsp.m=date[k]}}if(format[k]=="F"){dM=$.inArray(date[k],dfmt);if(dM!==-1&&dM>11){date[k]=dM+1-12;tsp.m=date[k]}}if(format[k]=="a"){dM=$.inArray(date[k],afmt);if(dM!==-1&&dM<2&&date[k]==afmt[dM]){date[k]=dM;tsp.h=h12to24(date[k],tsp.h)}}if(format[k]=="A"){dM=$.inArray(date[k],afmt);if(dM!==-1&&dM>1&&date[k]==afmt[dM]){date[k]=dM-2;tsp.h=h12to24(date[k],tsp.h)}}if(date[k]!==undefined){tsp[format[k].toLowerCase()]=parseInt(date[k],10)}}tsp.m=parseInt(tsp.m,10)-1;var ty=tsp.y;if(ty>=70&&ty<=99){tsp.y=1900+tsp.y}else{if(ty>=0&&ty<=69){tsp.y=2000+tsp.y}}if(tsp.j!==undefined){tsp.d=tsp.j}if(tsp.n!==undefined){tsp.m=parseInt(tsp.n,10)-1}}return new Date(tsp.y,tsp.m,tsp.d,tsp.h,tsp.i,tsp.s,tsp.u)},coralID:function(sid){return String(sid).replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"coralg",randId:function(prefix){return(prefix?prefix:$.grid.uidPref)+($.grid.guid++)},getAccessor:function(obj,expr){var ret,p,prm=[],i;if(typeof expr==="function"){return expr(obj)}ret=obj[expr];if(ret===undefined){try{if(typeof expr==="string"){prm=expr.split(".")}i=prm.length;if(i){ret=obj;while(ret&&i--){p=prm.shift();ret=ret[p]}}}catch(e){}}return ret},ajaxOptions:{},from:function(source){var QueryObject=function(d,q){if(typeof(d)=="string"){d=$.data(d)
}var self=this,_data=d,_usecase=true,_trim=false,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=false,_queuedOperator="",_sorting=[],_useProperties=true,_usePinyin=true;if(typeof(d)=="object"&&d.push){if(d.length>0){if(typeof(d[0])!="object"){_useProperties=false}else{_useProperties=true}}}else{throw"data provides is not an array"}this._hasData=function(){return _data===null?false:_data.length===0?false:true};this._getStr=function(s){var phrase=[];if(_trim){phrase.push("jQuery.trim(")}phrase.push("String("+s+")");if(_trim){phrase.push(")")}if(!_usecase){phrase.push(".toLowerCase()")}return phrase.join("")};this._strComp=function(val){if(typeof(val)=="string"){return".toString()"}else{return""}};this._group=function(f,u){return({field:f.toString(),unique:u,items:[]})};this._toStr=function(phrase){if(_trim){phrase=$.trim(phrase)}phrase=phrase.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return _usecase?phrase:phrase.toLowerCase()};this._funcLoop=function(func){var results=[];$.each(_data,function(i,v){results.push(func(v))});return results};this._append=function(s){var i;if(_query===null){_query=""}else{_query+=_queuedOperator===""?" && ":_queuedOperator}for(i=0;i<_orDepth;i++){_query+="("}if(_negate){_query+="!"}_query+="("+s+")";_negate=false;_queuedOperator="";_orDepth=0};this._setCommand=function(f,c){_lastCommand=f;_lastField=c};this._resetNegate=function(){_negate=false};this._repeatCommand=function(f,v){if(_lastCommand===null){return self}if(f!==null&&v!==null){return _lastCommand(f,v)}if(_lastField===null){return _lastCommand(f)}if(!_useProperties){return _lastCommand(f)}return _lastCommand(_lastField,f)};this._equals=function(a,b){return(self._compare(a,b,1)===0)};this._compare=function(a,b,d){var toString=Object.prototype.toString;if(d===undefined){d=1}if(a===undefined){a=null}if(b===undefined){b=null}if(a===null&&b===null){return 0}if(a===null&&b!==null){return 1}if(a!==null&&b===null){return -1}if(toString.call(a)==="[object Date]"&&toString.call(b)==="[object Date]"){if(a<b){return -d
}if(a>b){return d}return 0}if(!_usecase&&typeof(a)!=="number"&&typeof(b)!=="number"){a=String(a).toLowerCase();b=String(b).toLowerCase()}if(a<b){return -d}if(a>b){return d}return 0};this._performSort=function(){if(_sorting.length===0){return}_data=self._doSort(_data,0)};this._doSort=function(d,q){var by=_sorting[q].by,dir=_sorting[q].dir,type=_sorting[q].type,dfmt=_sorting[q].datefmt;if(q==_sorting.length-1){return self._getOrder(d,by,dir,type,dfmt)}q++;var values=self._getGroup(d,by,dir,type,dfmt);var results=[];for(var i=0;i<values.length;i++){var sorted=self._doSort(values[i].items,q);for(var j=0;j<sorted.length;j++){results.push(sorted[j])}}return results};this._getOrder=function(data,by,dir,type,dfmt){var sortData=[],_sortData=[],newDir=dir=="a"?1:-1,i,ab,j,findSortKey;if(type===undefined){type="text"}if(type=="float"||type=="number"||type=="currency"||type=="numeric"){findSortKey=function($cell){var key=parseFloat(String($cell).replace(_stripNum,""));return isNaN(key)?0:key}}else{if(type=="int"||type=="integer"){findSortKey=function($cell){return $cell?parseFloat(String($cell).replace(_stripNum,"")):0}}else{if(type=="date"||type=="datetime"){findSortKey=function($cell){return $.grid.parseDate(dfmt,$cell).getTime()}}else{if($.isFunction(type)){findSortKey=type}else{findSortKey=function($cell){if(!$cell){$cell=""}return $.trim(String($cell).toUpperCase())}}}}}$.each(data,function(i,v){ab=by!==""?$.grid.getAccessor(v,by):v;if(ab===undefined){ab=""}ab=findSortKey(ab,v);_sortData.push({vSort:ab,index:i})});_sortData.sort(function(a,b){a=a.vSort;b=b.vSort;return self._compare(a,b,newDir)});j=0;var nrec=data.length;while(j<nrec){i=_sortData[j].index;sortData.push(data[i]);j++}return sortData};this._getGroup=function(data,by,dir,type,dfmt){var results=[],group=null,last=null,val;$.each(self._getOrder(data,by,dir,type,dfmt),function(i,v){val=$.grid.getAccessor(v,by);if(val===undefined){val=""}if(!self._equals(last,val)){last=val;if(group!==null){results.push(group)}group=self._group(by,val)
}group.items.push(v)});if(group!==null){results.push(group)}return results};this.ignoreCase=function(){_usecase=false;return self};this.useCase=function(){_usecase=true;return self};this.trim=function(){_trim=true;return self};this.noTrim=function(){_trim=false;return self};this.execute=function(){var match=_query,results=[];if(match===null){return self}$.each(_data,function(){if(eval(match)){results.push(this)}});_data=results;return self};this.data=function(){return _data};this.select=function(f){self._performSort();if(!self._hasData()){return[]}self.execute();if($.isFunction(f)){var results=[];$.each(_data,function(i,v){results.push(f(v))});return results}return _data};this.hasMatch=function(){if(!self._hasData()){return false}self.execute();return _data.length>0};this.andNot=function(f,v,x){_negate=!_negate;return self.and(f,v,x)};this.orNot=function(f,v,x){_negate=!_negate;return self.or(f,v,x)};this.not=function(f,v,x){return self.andNot(f,v,x)};this.and=function(f,v,x){_queuedOperator=" && ";if(f===undefined){return self}return self._repeatCommand(f,v,x)};this.or=function(f,v,x){_queuedOperator=" || ";if(f===undefined){return self}return self._repeatCommand(f,v,x)};this.orBegin=function(){_orDepth++;return self};this.orEnd=function(){if(_query!==null){_query+=")"}return self};this.isNot=function(f){_negate=!_negate;return self.is(f)};this.is=function(f){self._append("this."+f);self._resetNegate();return self};this._compareValues=function(func,f,v,how,t){var fld;if(_useProperties){fld="jQuery.grid.getAccessor(this,'"+f+"')"}else{fld="this"}if(v===undefined){v=null}var val=v,swst=t.stype===undefined?"text":t.stype;if(v!==null){switch(swst){case"int":case"integer":val=(isNaN(Number(val))||val==="")?"0":val;fld="parseInt("+fld+",10)";val="parseInt("+val+",10)";break;case"float":case"number":case"numeric":val=String(val).replace(_stripNum,"");val=(isNaN(Number(val))||val==="")?"0":val;fld="parseFloat("+fld+")";val="parseFloat("+val+")";break;case"date":case"datetime":val=String($.grid.parseDate(t.newfmt||"Y-m-d",val).getTime());
fld='jQuery.grid.parseDate("'+t.srcfmt+'",'+fld+").getTime()";break;default:fld=self._getStr(fld);val=self._getStr('"'+self._toStr(val)+'"')}}self._append(fld+" "+how+" "+val+" || pinyinEngine.toPinyin("+fld+', false, "") '+how+" "+val);self._setCommand(func,f);self._resetNegate();return self};this.equals=function(f,v,t){return self._compareValues(self.equals,f,v,"==",t)};this.notEquals=function(f,v,t){return self._compareValues(self.equals,f,v,"!==",t)};this.isNull=function(f,v,t){return self._compareValues(self.equals,f,null,"===",t)};this.greater=function(f,v,t){return self._compareValues(self.greater,f,v,">",t)};this.less=function(f,v,t){return self._compareValues(self.less,f,v,"<",t)};this.greaterOrEquals=function(f,v,t){return self._compareValues(self.greaterOrEquals,f,v,">=",t)};this.lessOrEquals=function(f,v,t){return self._compareValues(self.lessOrEquals,f,v,"<=",t)};this.startsWith=function(f,v){var val=(v===undefined||v===null)?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;if(_useProperties){self._append(self._getStr("jQuery.grid.getAccessor(this,'"+f+"')")+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(v)+'"'))}else{length=_trim?$.trim(v.toString()).length:v.toString().length;self._append(self._getStr("this")+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(f)+'"'))}self._setCommand(self.startsWith,f);self._resetNegate();return self};this.endsWith=function(f,v){var val=(v===undefined||v===null)?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;if(_useProperties){self._append(self._getStr("jQuery.grid.getAccessor(this,'"+f+"')")+".substr("+self._getStr("jQuery.grid.getAccessor(this,'"+f+"')")+".length-"+length+","+length+') == "'+self._toStr(v)+'"')}else{self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(f)+'".length,"'+self._toStr(f)+'".length) == "'+self._toStr(f)+'"')}self._setCommand(self.endsWith,f);self._resetNegate();return self};this.contains=function(f,v){if(_useProperties){if(_usePinyin){self._append(self._getStr("jQuery.grid.getAccessor(this,'"+f+"')")+'.indexOf("'+self._toStr(v)+'",0) > -1 || '+self._getStr("pinyinEngine.toPinyin(jQuery.grid.getAccessor(this,'"+f+'\'), false, "")')+'.indexOf("'+self._toStr(v)+'",0) > -1')
}else{self._append(self._getStr("jQuery.grid.getAccessor(this,'"+f+"')")+'.indexOf("'+self._toStr(v)+'",0) > -1')}}else{if(_usePinyin){self._append(self._getStr("this")+'.indexOf("'+self._toStr(f)+'",0) > -1 || '+pinyinEngine.toPinyin(self._getStr("this"),false,"")+'.indexOf("'+self._toStr(v)+'",0) > -1')}else{self._append(self._getStr("this")+'.indexOf("'+self._toStr(f)+'",0) > -1')}}self._setCommand(self.contains,f);self._resetNegate();return self};this.groupBy=function(by,dir,type,datefmt){if(!self._hasData()){return null}return self._getGroup(_data,by,dir,type,datefmt)};this.orderBy=function(by,dir,stype,dfmt){dir=dir===undefined||dir===null?"a":$.trim(dir.toString().toLowerCase());if(stype===null||stype===undefined){stype="text"}if(dfmt===null||dfmt===undefined){dfmt="Y-m-d"}if(dir=="desc"||dir=="descending"){dir="d"}if(dir=="asc"||dir=="ascending"){dir="a"}_sorting.push({by:by,dir:dir,type:stype,datefmt:dfmt});return self};return self};return new QueryObject(source,null)},extend:function(methods){$.extend($.fn.grid,methods);if(!this.no_legacy_api){$.fn.extend(methods)}}});$.component("coral.grid",$.coral.grid,{setTreeNode:function(i,len){var that=this;if(!that.grid||!that.options.treeGrid){return}var expCol=that.options.expColInd,expanded=that.options.treeReader.expanded_field,isLeaf=that.options.treeReader.leaf_field,level=that.options.treeReader.level_field,icon=that.options.treeReader.icon_field,loaded=that.options.treeReader.loaded,lft,rgt,curLevel,ident,lftpos,twrap,ldat,lf;while(i<len){var ind=that.rows[i].id,dind=that.options._index[ind],expan;ldat=that.options.data[dind];if(that.options.treeGridModel=="nested"){if(!ldat[isLeaf]){lft=parseInt(ldat[that.options.treeReader.left_field],10);rgt=parseInt(ldat[that.options.treeReader.right_field],10);ldat[isLeaf]=(rgt===lft+1)?"true":"false";that.rows[i].cells[that.options._treeleafpos].innerHTML=ldat[isLeaf]}}curLevel=parseInt(ldat[level],10);if(that.options.tree_root_level===0){ident=curLevel+1;lftpos=curLevel
}else{ident=curLevel;lftpos=curLevel-1}twrap="<div class='tree-wrap tree-wrap-"+that.options.direction+"' style='width:"+(ident*18)+"px;'>";twrap+="<div style='"+(that.options.direction=="rtl"?"right:":"left:")+(lftpos*18)+"px;' class='coral-icon ";if(ldat[loaded]!==undefined){if(ldat[loaded]=="true"||ldat[loaded]===true){ldat[loaded]=true}else{ldat[loaded]=false}}if(ldat[isLeaf]=="true"||ldat[isLeaf]===true){twrap+=((ldat[icon]!==undefined&&ldat[icon]!=="")?ldat[icon]:that.options.treeIcons.leaf)+" tree-leaf treeclick";ldat[isLeaf]=true;lf="leaf"}else{ldat[isLeaf]=false;lf=""}ldat[expanded]=((ldat[expanded]=="true"||ldat[expanded]===true)?true:false)&&ldat[loaded];if(ldat[expanded]===false){twrap+=((ldat[isLeaf]===true)?"'":that.options.treeIcons.plus+" tree-plus treeclick'")}else{twrap+=((ldat[isLeaf]===true)?"'":that.options.treeIcons.minus+" tree-minus treeclick'")}twrap+="></div></div>";$(that.rows[i].cells[expCol]).wrapInner("<span class='cell-wrapper"+lf+"'></span>").prepend(twrap);if(curLevel!==parseInt(that.options.tree_root_level,10)){var pn=$(that.element).grid("getNodeParent",ldat);expan=pn&&pn.hasOwnProperty(expanded)?pn[expanded]:true;if(!expan){$(that.rows[i]).css("display","none")}}$(that.rows[i].cells[expCol]).find("div.treeclick").bind("click",function(e){var target=e.target||e.srcElement,ind2=$(target,that.rows).closest("tr.jqgrow")[0].id,pos=that.options._index[ind2];if(!that.options.data[pos][isLeaf]){if(that.options.data[pos][expanded]){$(that.element).grid("collapseRow",that.options.data[pos]);$(that.element).grid("collapseNode",that.options.data[pos])}else{$(that.element).grid("expandRow",that.options.data[pos]);$(that.element).grid("expandNode",that.options.data[pos])}}return false});if(that.options.ExpandColClick===true){$(that.rows[i].cells[expCol]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(e){var target=e.target||e.srcElement,ind2=$(target,that.rows).closest("tr.jqgrow")[0].id,pos=that.options._index[ind2];if(!that.options.data[pos][isLeaf]){if(that.options.data[pos][expanded]){$(that.element).grid("collapseRow",that.options.data[pos]);
$(that.element).grid("collapseNode",that.options.data[pos])}else{$(that.element).grid("expandRow",that.options.data[pos]);$(that.element).grid("expandNode",that.options.data[pos])}}$(that.element).grid("setSelection",ind2);return false})}i++}},setTreeGrid:function(){var that=this,i=0,pico,ecol=false,nm,key,dupcols=[];if(!that.options.treeGrid){return}if(!that.options.treedatatype){$.extend(that.options,{treedatatype:that.options.datatype})}that.options.subGrid=false;that.options.altRows=false;that.options.gridview=true;if(that.options.rowTotal===null){that.options.rowNum=10000}that.options.multiselect=false;that.options.rowList=[];that.options.expColInd=0;pico="coral-icon-triangle-1-"+(that.options.direction=="rtl"?"w":"e");that.options.treeIcons=$.extend({plus:pico,minus:"coral-icon-triangle-1-s",leaf:"coral-icon-radio-off"},that.options.treeIcons||{});if(that.options.treeGridModel=="nested"){that.options.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},that.options.treeReader)}else{if(that.options.treeGridModel=="adjacency"){that.options.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},that.options.treeReader)}}for(key in that.options.colModel){if(that.options.colModel.hasOwnProperty(key)){nm=that.options.colModel[key].name;if(nm==that.options.ExpandColumn&&!ecol){ecol=true;that.options.expColInd=i}i++;for(var tkey in that.options.treeReader){if(that.options.treeReader[tkey]==nm){dupcols.push(nm)}}}}$.each(that.options.treeReader,function(j,n){if(n&&$.inArray(n,dupcols)===-1){if(j==="leaf_field"){that.options._treeleafpos=i}i++;that.options.colNames.push(n);that.options.colModel.push({name:n,width:1,hidden:true,sortable:false,resizable:false,hidedlg:true,editable:true,search:false})}})},expandRow:function(record){var that=this;if(!that.grid||!that.options.treeGrid){return
}var childern=$(that.element).grid("getNodeChildren",record),expanded=that.options.treeReader.expanded_field,rows=that.rows;$(childern).each(function(){var id=$.grid.getAccessor(this,that.options.localReader.id);$(rows.namedItem(id)).css("display","");if(this[expanded]){$(that.element).grid("expandRow",this)}})},collapseRow:function(record){var that=this;if(!that.grid||!that.options.treeGrid){return}var childern=$(that.element).grid("getNodeChildren",record),expanded=that.options.treeReader.expanded_field,rows=that.rows;$(childern).each(function(){var id=$.grid.getAccessor(this,that.options.localReader.id);$(rows.namedItem(id)).css("display","none");if(this[expanded]){$(that.element).grid("collapseRow",this)}})},getRootNodes:function(){var result=[];var that=this;if(!that.grid||!that.options.treeGrid){return}switch(that.options.treeGridModel){case"nested":var level=that.options.treeReader.level_field;$(that.options.data).each(function(){if(parseInt(this[level],10)===parseInt(that.options.tree_root_level,10)){result.push(this)}});break;case"adjacency":var parent_id=that.options.treeReader.parent_id_field;$(that.options.data).each(function(){if(this[parent_id]===null||String(this[parent_id]).toLowerCase()=="null"){result.push(this)}});break}return result},getNodeDepth:function(rc){var ret=null;this.each(function(){if(!this.grid||!this.options.treeGrid){return}var $t=this;switch(that.options.treeGridModel){case"nested":var level=that.options.treeReader.level_field;ret=parseInt(rc[level],10)-parseInt(that.options.tree_root_level,10);break;case"adjacency":ret=$($t).jqGrid("getNodeAncestors",rc).length;break}});return ret},getNodeParent:function(rc){var result=null;var that=this;if(!that.grid||!that.options.treeGrid){return}switch(that.options.treeGridModel){case"nested":var lftc=that.options.treeReader.left_field,rgtc=that.options.treeReader.right_field,levelc=that.options.treeReader.level_field,lft=parseInt(rc[lftc],10),rgt=parseInt(rc[rgtc],10),level=parseInt(rc[levelc],10);
$(that.options.data).each(function(){if(parseInt(this[levelc],10)===level-1&&parseInt(this[lftc],10)<lft&&parseInt(this[rgtc],10)>rgt){result=this;return false}});break;case"adjacency":var parent_id=that.options.treeReader.parent_id_field,dtid=that.options.localReader.id;$(that.options.data).each(function(){if(this[dtid]==rc[parent_id]){result=this;return false}});break}return result},getNodeChildren:function(rc){var result=[];var that=this;if(!that.grid||!that.options.treeGrid){return}switch(that.options.treeGridModel){case"nested":var lftc=that.options.treeReader.left_field,rgtc=that.options.treeReader.right_field,levelc=that.options.treeReader.level_field,lft=parseInt(rc[lftc],10),rgt=parseInt(rc[rgtc],10),level=parseInt(rc[levelc],10);$(this.options.data).each(function(){if(parseInt(this[levelc],10)===level+1&&parseInt(this[lftc],10)>lft&&parseInt(this[rgtc],10)<rgt){result.push(this)}});break;case"adjacency":var parent_id=that.options.treeReader.parent_id_field,dtid=that.options.localReader.id;$(this.options.data).each(function(){if(this[parent_id]==rc[dtid]){result.push(this)}});break}return result},getFullTreeNode:function(rc){var result=[];this.each(function(){var $t=this,len;if(!$t.grid||!that.options.treeGrid){return}switch(that.options.treeGridModel){case"nested":var lftc=that.options.treeReader.left_field,rgtc=that.options.treeReader.right_field,levelc=that.options.treeReader.level_field,lft=parseInt(rc[lftc],10),rgt=parseInt(rc[rgtc],10),level=parseInt(rc[levelc],10);$(this.options.data).each(function(){if(parseInt(this[levelc],10)>=level&&parseInt(this[lftc],10)>=lft&&parseInt(this[lftc],10)<=rgt){result.push(this)}});break;case"adjacency":if(rc){result.push(rc);var parent_id=that.options.treeReader.parent_id_field,dtid=that.options.localReader.id;$(this.options.data).each(function(i){len=result.length;for(i=0;i<len;i++){if(result[i][dtid]==this[parent_id]){result.push(this);break}}})}break}});return result},getNodeAncestors:function(rc){var ancestors=[];
this.each(function(){if(!this.grid||!this.options.treeGrid){return}var parent=$(this).jqGrid("getNodeParent",rc);while(parent){ancestors.push(parent);parent=$(this).jqGrid("getNodeParent",parent)}});return ancestors},isVisibleNode:function(rc){var result=true;this.each(function(){var $t=this;if(!$t.grid||!that.options.treeGrid){return}var ancestors=$($t).jqGrid("getNodeAncestors",rc),expanded=that.options.treeReader.expanded_field;$(ancestors).each(function(){result=result&&this[expanded];if(!result){return false}})});return result},isNodeLoaded:function(rc){var result;var that=this;if(!that.grid||!that.options.treeGrid){return}var isLeaf=that.options.treeReader.leaf_field;if(rc!==undefined){if(rc.loaded!==undefined){result=rc.loaded}else{if(rc[isLeaf]||$(that.element).grid("getNodeChildren",rc).length>0){result=true}else{result=false}}}else{result=false}return result},expandNode:function(rc){if(!this.grid||!this.options.treeGrid){return}var expanded=this.options.treeReader.expanded_field,parent=this.options.treeReader.parent_id_field,loaded=this.options.treeReader.loaded,level=this.options.treeReader.level_field,lft=this.options.treeReader.left_field,rgt=this.options.treeReader.right_field;if(!rc[expanded]){var id=$.grid.getAccessor(rc,this.options.localReader.id);var rc1=$("#"+$.grid.coralID(id),this.grid.rowsView)[0];var position=this.options._index[id];if($(this.element).grid("isNodeLoaded",this.options.data[position])){rc[expanded]=true;$("div.treeclick",rc1).removeClass(this.options.treeIcons.plus+" tree-plus").addClass(this.options.treeIcons.minus+" tree-minus")}else{if(!this.grid.columnsView.loading){rc[expanded]=true;$("div.treeclick",rc1).removeClass(this.options.treeIcons.plus+" tree-plus").addClass(this.options.treeIcons.minus+" tree-minus");this.options.treeANode=rc1.rowIndex;this.options.datatype=this.options.treedatatype;if(this.options.treeGridModel=="nested"){$(this.element).grid("option",{postData:{nodeid:id,n_left:rc[lft],n_right:rc[rgt],n_level:rc[level]}})
}else{$(this.element).grid("option",{postData:{nodeid:id,parentid:rc[parent],n_level:rc[level]}})}$(this.element).grid("reload");rc[loaded]=true;if(this.options.treeGridModel=="nested"){$(this.element).grid("option",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}})}else{$(this.element).grid("option",{postData:{nodeid:"",parentid:"",n_level:""}})}}}}},collapseNode:function(rc){if(!this.grid||!this.options.treeGrid){return}var expanded=this.options.treeReader.expanded_field;if(rc[expanded]){rc[expanded]=false;var id=$.grid.getAccessor(rc,this.options.localReader.id);var rc1=$("#"+$.grid.coralID(id),this.grid.rowsView)[0];$("div.treeclick",rc1).removeClass(this.options.treeIcons.minus+" tree-minus").addClass(this.options.treeIcons.plus+" tree-plus")}},sortTree:function(sortname,newDir,st,datefmt){if(!this.grid||!this.options.treeGrid){return}var i,len,rec,records=[],that=this,query,roots,rt=$(that.element).grid("getRootNodes");query=$.grid.from(rt);query.orderBy(sortname,newDir,st,datefmt);roots=query.select();for(i=0,len=roots.length;i<len;i++){rec=roots[i];records.push(rec);$(that.element).grid("collectChildrenSortTree",records,rec,sortname,newDir,st,datefmt)}$.each(records,function(index){var id=$.grid.getAccessor(this,that.options.localReader.id);$("#"+$.grid.coralID(that.options.id)+" tbody tr:eq("+index+")").after($("tr#"+$.grid.coralID(id),that.grid.rowsView))});query=null;roots=null;records=null},collectChildrenSortTree:function(records,rec,sortname,newDir,st,datefmt){if(!this.grid||!this.options.treeGrid){return}var i,len,child,ch,query,children;ch=$(this.element).grid("getNodeChildren",rec);query=$.grid.from(ch);query.orderBy(sortname,newDir,st,datefmt);children=query.select();for(i=0,len=children.length;i<len;i++){child=children[i];records.push(child);$(this.element).grid("collectChildrenSortTree",records,child,sortname,newDir,st,datefmt)}},setTreeRow:function(rowid,data){var success=false;this.each(function(){var t=this;if(!t.grid||!t.options.treeGrid){return
}success=$(t).jqGrid("setRowData",rowid,data)});return success},delTreeNode:function(rowid){return this.each(function(){var $t=this,rid=that.options.localReader.id,left=that.options.treeReader.left_field,right=that.options.treeReader.right_field,myright,width,res,key;if(!$t.grid||!that.options.treeGrid){return}var rc=that.options._index[rowid];if(rc!==undefined){myright=parseInt(that.options.data[rc][right],10);width=myright-parseInt(that.options.data[rc][left],10)+1;var dr=$($t).jqGrid("getFullTreeNode",that.options.data[rc]);if(dr.length>0){for(var i=0;i<dr.length;i++){$($t).jqGrid("delRowData",dr[i][rid])}}if(that.options.treeGridModel==="nested"){res=$.jgrid.from(that.options.data).greater(left,myright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][left]=parseInt(res[key][left],10)-width}}}res=$.jgrid.from(that.options.data).greater(right,myright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][right]=parseInt(res[key][right],10)-width}}}}}})},addChildNode:function(nodeid,parentid,data){var $t=this[0];if(data){var expanded=that.options.treeReader.expanded_field,isLeaf=that.options.treeReader.leaf_field,level=that.options.treeReader.level_field,parent=that.options.treeReader.parent_id_field,left=that.options.treeReader.left_field,right=that.options.treeReader.right_field,loaded=that.options.treeReader.loaded,method,parentindex,parentdata,parentlevel,i,len,max=0,rowind=parentid,leaf,maxright;if(typeof nodeid==="undefined"||nodeid===null){i=that.options.data.length-1;if(i>=0){while(i>=0){max=Math.max(max,parseInt(that.options.data[i][that.options.localReader.id],10));i--}}nodeid=max+1}var prow=$($t).jqGrid("getInd",parentid);leaf=false;if(parentid===undefined||parentid===null||parentid===""){parentid=null;rowind=null;method="last";parentlevel=that.options.tree_root_level;i=that.options.data.length+1}else{method="after";parentindex=that.options._index[parentid];parentdata=that.options.data[parentindex];
parentid=parentdata[that.options.localReader.id];parentlevel=parseInt(parentdata[level],10)+1;var childs=$($t).jqGrid("getFullTreeNode",parentdata);if(childs.length){i=childs[childs.length-1][that.options.localReader.id];rowind=i;i=$($t).jqGrid("getInd",rowind)+1}else{i=$($t).jqGrid("getInd",parentid)+1}if(parentdata[isLeaf]){leaf=true;parentdata[expanded]=true;$($t.rows[prow]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(that.options.treeIcons.leaf+" tree-leaf").addClass(that.options.treeIcons.minus+" tree-minus");that.options.data[parentindex][isLeaf]=false;parentdata[loaded]=true}}len=i+1;data[expanded]=false;data[loaded]=true;data[level]=parentlevel;data[isLeaf]=true;if(that.options.treeGridModel==="adjacency"){data[parent]=parentid}if(that.options.treeGridModel==="nested"){var query,res,key;if(parentid!==null){maxright=parseInt(parentdata[right],10);query=$.jgrid.from(that.options.data);query=query.greaterOrEquals(right,maxright,{stype:"integer"});res=query.select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][left]=res[key][left]>maxright?parseInt(res[key][left],10)+2:res[key][left];res[key][right]=res[key][right]>=maxright?parseInt(res[key][right],10)+2:res[key][right]}}}data[left]=maxright;data[right]=maxright+1}else{maxright=parseInt($($t).jqGrid("getCol",right,false,"max"),10);res=$.jgrid.from(that.options.data).greater(left,maxright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][left]=parseInt(res[key][left],10)+2}}}res=$.jgrid.from(that.options.data).greater(right,maxright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][right]=parseInt(res[key][right],10)+2}}}data[left]=maxright+1;data[right]=maxright+2}}if(parentid===null||$($t).jqGrid("isNodeLoaded",parentdata)||leaf){$($t).jqGrid("addRowData",nodeid,data,method,rowind);$($t).jqGrid("setTreeNode",i,len)}if(parentdata&&!parentdata[expanded]){$($t.rows[prow]).find("div.treeclick").click()
}}},refreshDescription:function(html){if(this.options.toolbarOptions){if(this.options.description){$(".pager-description",this.element).html(html)}}},hideGridHeader:function(){this.element.find(".coral-grid-columns").hide()},showGridHeader:function(){this.element.find(".coral-grid-columns").show()},valid:function(rowid,colname){var res={},resall,getall=false,len,j=0;var that=this,nm,editable,ind;that.errorResults=[];var state;if(typeof(rowid)=="undefined"||!rowid){getall=true;resall=[];len=that.rows.length}else{ind=that.rows.namedItem(rowid);if(!ind){return res}len=1}while(j<len){if(getall){ind=that.rows[j]}if($(ind).hasClass("jqgrow")){$('td[role="gridcell"]',ind).each(function(i){nm=that.options.colModel[i].name;editable=that.options.colModel[i].editable;if(!colname||(colname&&nm==colname)){if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"){if(that.options.treeGrid===true&&nm==that.options.ExpandColumn){res[nm]=$.grid.htmlDecode($("span:first",this).html())}else{try{if(that.options.savedRow.length&&that.rows[that.options.savedRow[0].id].id==ind.id&&editable){state="edittype"}else{state=null}res[nm]=$.unformat.call(that,this,{rowId:ind.id,colModel:that.options.colModel[i]},i,"get",state)}catch(e){res[nm]=$.grid.htmlDecode($(this).html())}}var validateopitons=$.extend(that.options.colModel[i].formatoptions||{},that.options.colModel[i].editoptions||{});var event=$.Event();event.target=this;var data={validoptions:validateopitons,notComponent:!(state=="edittype"),showRequiredMark:$.noop,hasTips:false,component:(state=="edittype")?that.getCellComponent(ind.id,nm):$(this),element:$(this).find(".ctrl-init").length>0?$(this).find(".ctrl-init"):$(this),value:res[nm]};var error=$.validate.validateField(event,data);if(error.length){if(that.options.allowSaveOnError){$(this).addClass("coral-gridcell-error").attr("data-errors",error)}else{$(this).addClass("coral-gridcell-error")}that.errorResults.push({rowId:ind.id,rowIndex:j,cellIndex:i,errors:error})}else{$(this).removeClass("coral-gridcell-error").removeAttr("data-errors")
}}}});if(getall){resall.push(res);res={}}}j++}this.options.isValid=!(this.errorResults.length>0);return this.options.isValid},clearErrors:function(rowid,colname){var res={},resall,getall=false,len,j=0;var that=this,nm,editable,ind;this.errorResults=this.errorResults||[];if(typeof(rowid)=="undefined"||!rowid){getall=true;resall=[];len=that.rows.length;that.errorResults=[]}else{ind=that.rows.namedItem(rowid);if(!ind){return res}len=2;var k=that.errorResults.length;for(k;k>0;k--){if(that.errorResults[k-1].rowId==ind.id){that.errorResults.splice(k-1,1)}}}while(j<len){if(getall){ind=that.rows[j]}if($(ind).hasClass("jqgrow")){$('td[role="gridcell"]',ind).each(function(i){$(this).removeClass("coral-gridcell-error coral-validate-error").removeAttr("data-errors")})}j++}this.options.isValid=!(this.errorResults.length>0)},getCellErrors:function(){return that.errorResults},resizeFrozen:function(){var top=this.options.caption?$(this.grid.cDiv).outerHeight():0,hth=$(".coral-grid-htable","#"+$.grid.coralID(this.options.id)).outerHeight();if(this.options.toppager){top=top+$($t.grid.topDiv).outerHeight()}if(this.options.toolbar[0]===true){if(this.options.toolbar[1]!="bottom"){top=top+$(this.grid.uDiv).outerHeight()}}if(this.grid.fhDiv){$(this.grid.fhDiv).css({top:top});$(this.grid.fbDiv).css({top:(parseInt(top,10)+parseInt(hth,10))});$(this.grid.fbDiv).height($(this.grid.rowsView).height()-this.getScrollBarWidth()+2)}if(this.grid.rightfhDiv){$(this.grid.rightfhDiv).css({top:top});$(this.grid.rightfbDiv).css({top:(parseInt(top,10)+parseInt(hth,10))});$(this.grid.rightfbDiv).height($(this.grid.rowsView).height()-this.getScrollBarWidth()+2)}},setFrozenColumns:function(){if(!this.grid){return}var $t=this,cm=$t.options.colModel,i=0,len=cm.length,j=len-1,rightmaxfrozen=-1,maxfrozen=-1,frozen=false;if($t.options.subGrid===true||$t.options.treeGrid===true||$t.options.cellEdit===true||$t.options.sortable||$t.options.scroll||$t.options.grouping){return}if($t.options.rownumbers){i++}if($t.options.multiselect||$t.options.singleselect){i++
}while(i<len){if(cm[i].frozen===true){frozen=true;maxfrozen=i}else{break}i++}while(j>0){if(cm[j].frozen===true){frozen=true;rightmaxfrozen=j}else{break}j--}if(rightmaxfrozen>0){maxfrozen=-1}if(frozen){var top=$t.options.caption?$($t.grid.cDiv).outerHeight():0,hth=$(".coral-grid-htable","#"+$.grid.coralID($t.options.id)).outerHeight();if($t.options.toppager){top=top+$($t.grid.topDiv).outerHeight()}if($t.options.toolbar[0]===true){if($t.options.toolbar[1]!="bottom"){top=top+$($t.grid.uDiv).outerHeight()}}if(maxfrozen>=0){$t.grid.fhDiv=$('<div style="position:absolute;left:0px;top:'+top+'px;" class="frozen-div coral-state-default coral-grid-columns coral-grid-columns-view"></div>');$t.grid.fbDiv=$('<div style="position:absolute;left:0px;top:'+(parseInt(top,10)+parseInt(hth,10))+'px;overflow-y:hidden" class="frozen-bdiv coral-grid-rows coral-grid-rows-view"></div>');$("#"+$.grid.coralID($t.options.id)).append($t.grid.fhDiv)}if(rightmaxfrozen>=0){$t.grid.rightfhDiv=$('<div style="position:absolute;right:0;top:'+top+'px;" class="frozen-div coral-state-default coral-grid-columns coral-grid-columns-view"></div>');$t.grid.rightfbDiv=$('<div style="position:absolute;right:0;top:'+(parseInt(top,10)+parseInt(hth,10))+'px;overflow-y:hidden" class="frozen-bdiv coral-grid-rows coral-grid-rows-view"></div>');$("#"+$.grid.coralID($t.options.id)).append($t.grid.rightfhDiv)}var htbl=$(".coral-grid-htable","#"+$.grid.coralID($t.options.id)).clone(true);var righthtbl=$(".coral-grid-htable","#"+$.grid.coralID($t.options.id)).clone(true);$t.rightFrozenWidth=0;if($t.options.groupHeader){if(maxfrozen>=0){$("tr.jqg-first-row-header, tr.jqg-third-row-header",htbl).each(function(){$("th:gt("+maxfrozen+")",this).remove()})}if(rightmaxfrozen>=0){$("tr.jqg-first-row-header, tr.jqg-third-row-header",righthtbl).each(function(){$("th:lt("+rightmaxfrozen+")",this).remove()})}var swapfroz=-1,fdel=-1;$("tr.jqg-second-row-header th",htbl).each(function(){var cs=parseInt($(this).attr("colspan"),10);if(cs){swapfroz=swapfroz+cs;
fdel++}if(swapfroz===maxfrozen){return false}});if(swapfroz!==maxfrozen){fdel=maxfrozen}$("tr.jqg-second-row-header",htbl).each(function(){$("th:gt("+fdel+")",this).remove()})}else{if(maxfrozen>=0){$("tr",htbl).each(function(){$("th:gt("+maxfrozen+")",this).remove()})}if(rightmaxfrozen>=0){$("tr",righthtbl).each(function(){$("th:lt("+rightmaxfrozen+")",this).remove()})}}$(htbl).width(1);$(righthtbl).width(1);if(maxfrozen>=0){$($t.grid.fhDiv).append(htbl).mousemove(function(e){if($t.grid.resizing){$t.grid.dragMove(e);return false}})}if(rightmaxfrozen>=0){$($t.grid.rightfhDiv).append(righthtbl).mousemove(function(e){if($t.grid.resizing){$t.grid.dragMove(e);return false}})}$($t.element).bind("gridonresizestop.setFrozenColumns",function(e,ui){var index=ui.index,w=ui.newWidth;if(maxfrozen>=0){var rhth=$(".coral-grid-htable",$t.grid.fhDiv);$("th:eq("+index+")",rhth).width(w);var btd=$(".coral-grid-btable",$t.grid.fbDiv);$("tr:first td:eq("+index+")",btd).width(w)}if(rightmaxfrozen>=0){var rhth=$(".coral-grid-htable",$t.grid.rightfhDiv);$("th:eq("+(len-index-1)+")",rhth).width(w);var btd=$(".coral-grid-btable",$t.grid.rightfbDiv);$("tr:first td:eq("+(len-index-1)+")",btd).width(w);$t.resetFrozen()}});$($t.element).bind("gridonsortcol.setFrozenColumns",function(index,idxcol){if(maxfrozen>=0){var previousSelectedTh=$("tr.coral-grid-labels:last th:eq("+$t.options.lastsort+")",$t.grid.fhDiv),newSelectedTh=$("tr.coral-grid-labels:last th:eq("+idxcol+")",$t.grid.fhDiv);$("span.coral-grid-ico-sort",previousSelectedTh).addClass("coral-state-disabled");$(previousSelectedTh).attr("aria-selected","false");$("span.coral-icon-"+$t.options.sortorder,newSelectedTh).removeClass("coral-state-disabled");$(newSelectedTh).attr("aria-selected","true");if(!$t.options.viewsortcols[0]){if($t.options.lastsort!=idxcol){$("span.s-ico",previousSelectedTh).hide();$("span.s-ico",newSelectedTh).show()}}}if(rightmaxfrozen>=0){var previousSelectedTh=$("tr.coral-grid-labels:last th:eq("+$t.options.lastsort+")",$t.grid.rightfhDiv),newSelectedTh=$("tr.coral-grid-labels:last th:eq("+idxcol+")",$t.grid.rightfhDiv);
$("span.coral-grid-ico-sort",previousSelectedTh).addClass("coral-state-disabled");$(previousSelectedTh).attr("aria-selected","false");$("span.coral-icon-"+$t.options.sortorder,newSelectedTh).removeClass("coral-state-disabled");$(newSelectedTh).attr("aria-selected","true");if(!$t.options.viewsortcols[0]){if($t.options.lastsort!=idxcol){$("span.s-ico",previousSelectedTh).hide();$("span.s-ico",newSelectedTh).show()}}}});if(maxfrozen>=0){$("#"+$.grid.coralID($t.options.id)).append($t.grid.fbDiv)}if(rightmaxfrozen>=0){$("#"+$.grid.coralID($t.options.id)).append($t.grid.rightfbDiv)}jQuery($t.grid.rowsView).scroll(function(){if(maxfrozen>=0){jQuery($t.grid.fbDiv).scrollTop(jQuery(this).scrollTop())}if(rightmaxfrozen>=0){jQuery($t.grid.rightfbDiv).scrollTop(jQuery(this).scrollTop())}});if($t.options.hoverrows===true){$("#"+$.grid.coralID($t.options.id)).unbind("mouseover").unbind("mouseout")}$($t.element).bind("gridaftercomplete.setFrozenColumns",function(){$("#"+$.grid.coralID($t.options.id)+"_frozen").remove();var btbl,rightbtbl;if(maxfrozen>=0){btbl=$("#"+$.grid.coralID($t.options.id)+"_table").clone(true);jQuery($t.grid.fbDiv).height(jQuery($t.grid.rowsView).height()-$t.getScrollBarWidth()+2);$("tr",btbl).each(function(){$("td:gt("+maxfrozen+")",this).remove();!$t.options.singleselect||$("td:eq(0)>input",this).attr("name",$("td:eq(0)>input",this).attr("name")+"_forzen")});$(btbl).width(1).attr("id",$t.options.id+"_frozen");$($t.grid.fbDiv).append(btbl);if($t.options.hoverrows===true){$("tr.jqgrow",btbl).hover(function(){$(this).addClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)).addClass("coral-state-hover")},function(){$(this).removeClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)).removeClass("coral-state-hover")});$("tr.jqgrow","#"+$.grid.coralID($t.options.id)).hover(function(){$(this).addClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)+"_frozen").addClass("coral-state-hover")
},function(){$(this).removeClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)+"_frozen").removeClass("coral-state-hover")})}btbl=null}if(rightmaxfrozen>=0){if(($($t.grid.rowsView)[0].scrollHeight-$($t.grid.rowsView)[0].clientHeight)>0){$t.grid.rightfhDiv.css({right:($t.getScrollBarWidth()-2)+"px"});$t.grid.rightfbDiv.css({right:($t.getScrollBarWidth()-2)+"px"})}rightbtbl=$("#"+$.grid.coralID($t.options.id)+"_table").clone(true);jQuery($t.grid.rightfbDiv).height(jQuery($t.grid.rowsView).height()-$t.getScrollBarWidth()+2);$("tr",rightbtbl).each(function(){$("td:lt("+rightmaxfrozen+")",this).remove();!$t.options.singleselect||$("td:eq(0)>input",this).attr("name",$("td:eq(0)>input",this).attr("name")+"_forzen")});$(rightbtbl).width(1).attr("id",$t.options.id+"_frozen");$($t.grid.rightfbDiv).append(rightbtbl);if($t.options.hoverrows===true){$("tr.jqgrow",rightbtbl).hover(function(){$(this).addClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)).addClass("coral-state-hover")},function(){$(this).removeClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)).removeClass("coral-state-hover")});$("tr.jqgrow","#"+$.grid.coralID($t.options.id)).hover(function(){$(this).addClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)+"_frozen").addClass("coral-state-hover")},function(){$(this).removeClass("coral-state-hover");$("#"+$.grid.coralID(this.id),"#"+$.grid.coralID($t.options.id)+"_frozen").removeClass("coral-state-hover")})}rightbtbl=null}});$t.options.frozenColumns=true}},destroyFrozenColumns:function(){if(!this.grid){return}if(this.options.frozenColumns===true){var $t=this;$($t.grid.fhDiv).remove();$($t.grid.fbDiv).remove();$($t.grid.rightfhDiv).remove();$($t.grid.rightfbDiv).remove();$t.grid.fhDiv=null;$t.grid.fbDiv=null;$t.grid.rightfhDiv=null;$t.grid.rightfbDiv=null;$(this.element).unbind(".setFrozenColumns");if($t.options.hoverrows===true){var ptr;
$("#"+$.grid.coralID($t.options.id)).bind("mouseover",function(e){ptr=$(e.target).closest("tr.jqgrow");if($(ptr).attr("class")!=="coral-subgrid"){$(ptr).addClass("coral-state-hover")}}).bind("mouseout",function(e){ptr=$(e.target).closest("tr.jqgrow");$(ptr).removeClass("coral-state-hover")})}this.options.frozenColumns=false}}})})(jQuery);

(function(a){a.component("coral.grid",a.coral.grid,{editCell:function(k,p,i){var j=this,r,h,f,n;if(!j.grid||j.options.cellEdit!==true){return}p=parseInt(p,10);if(!j.options.knv){a(j.element).grid("GridNav")}if(j.options.savedRow.length>0){if(i===true){if(k==j.options.iRow&&p==j.options.iCol){return}}if(j.rows[j.options.savedRow[0].id]){if(!a(j.element).grid("saveCell",j.options.savedRow[0].id,j.options.savedRow[0].ic)){return}}}else{window.setTimeout(function(){a("#"+a.grid.coralID(j.options.knv)).attr("tabindex","-1").focus()},0)}n=j.options.colModel[p];r=n.name;if(r=="subgrid"||r=="cb"||r=="rn"){return}f=a("td:eq("+p+")",j.rows[k]);if(n.editable===true&&i===true&&!f.hasClass("not-editable-cell")){if(parseInt(j.options.iCol,10)>=0&&parseInt(j.options.iRow,10)>=0){a("td:eq("+j.options.iCol+")",j.rows[j.options.iRow]).removeClass("edit-cell coral-state-highlight");a(j.rows[j.options.iRow]).removeClass("selected-row coral-state-hover")}a(f).addClass("edit-cell coral-state-highlight");a(j.rows[k]).addClass("selected-row coral-state-hover");try{h=a.unformat.call(j,f,{rowId:j.rows[k].id,colModel:n},p)}catch(o){h=(n.edittype&&n.edittype=="textarea")?a(f).text():a(f).html()}if(j.options.autoencode){h=a.grid.htmlDecode(h)}if(!j._trigger("beforeEditCell",null,[{rowId:j.rows[k].id,name:r,cellValue:h,rowIndex:k,cellIndex:p}])){return}j.options.savedRow.push({id:k,ic:p,name:r,value:h});if(h==="&nbsp;"||h==="&#160;"||(h.length===1&&h.charCodeAt(0)===160)){h=""}if(a.isFunction(j.options.formatCell)){var g=j.options.formatCell.call(j,j.rows[k].id,r,h,k,p);if(g!==undefined){h=g}}var d=n.editoptions;d=a.extend({},d||{},{id:k+"_"+r,name:r});var b=a.grid.createEl.call(j,n.edittype,d,h,true,a.extend({},a.grid.ajaxOptions,j.options.ajaxSelectOptions||{}));a(f).html("").append(b).attr("tabindex","0");var e=function(s){if(s.keyCode===27){if(a("input.hasDatepicker",f).length>0){if(a(".coral-datepicker").is(":hidden")){a(j.element).grid("restoreCell",k,p)}else{a("input.hasDatepicker",f).datepicker("hide")
}}else{a(j.element).grid("restoreCell",k,p)}}if(s.keyCode===13){a(j.element).grid("saveCell",k,p);return false}if(s.keyCode===9){if(!j.grid.columnsView.loading){if(s.shiftKey){a(j.element).grid("prevCell",k,p)}else{a(j.element).grid("nextCell",k,p)}}else{return false}}s.stopPropagation()};var m={onKeyDown:e,value:a(b).val()};switch(n.edittype){case"text":case"textarea":d=a.extend({},d,m);a(b).textbox(d);break;case"datepicker":d=a.extend({},d,m);a(b).datepicker(d);break;case"radio":d=a.extend({},d,m);a(b).radio(d);if(a(b).val()=="Yes"){a(b).radio("check")}else{a(b).radio("uncheck")}break;case"checkbox":d=a.extend({},d,m);a(b).checkbox(d);if(a(b).val()=="Yes"){a(b).checkbox("check")}else{a(b).checkbox("uncheck")}break;case"autocomplete":var l=a(b).val();var q=typeof(d.source)=="string";d=a.extend({},d,m);var c=d.postMode||"value";d.postMode=c;d=a.extend({},d,{onKeyDown:e});a(b).autocomplete(d);if(q){d.postMode="text";a(b).autocomplete(d);a(b).autocomplete("setValue",l)}else{if(c=="value"){a(b).autocomplete("setValue",l)}else{a(b).autocomplete("setValue",l);a(b).autocomplete("setText",l)}}break;case"combobox":d=a.extend({},d,m);var c=d.postMode||"value";d=a.extend({},d,{onKeyDown:e});a(b).combobox(d);if(c=="value"){a(b).combobox("setValues",[a(b).val()])}else{a(b).combobox("setText",a(b).val())}break;case"combotree":d=a.extend({},d,m);a(b).combotree(d);break}window.setTimeout(function(){a(b).focus()},0);j._trigger("afterEditCell",null,[{rowId:j.rows[k].id,name:r,cellValue:h,rowIndex:k,celIndex:p}])}else{if(parseInt(j.options.iCol,10)>=0&&parseInt(j.options.iRow,10)>=0){a("td:eq("+j.options.iCol+")",j.rows[j.options.iRow]).removeClass("edit-cell coral-state-highlight");a(j.rows[j.options.iRow]).removeClass("selected-row coral-state-hover")}f.addClass("edit-cell coral-state-highlight");a(j.rows[k]).addClass("selected-row coral-state-hover");h=f.html().replace(/\&#160\;/ig,"");a(j.element).triggerHandler("jqGridSelectCell",[j.rows[k].id,r,h,k,p]);if(a.isFunction(j.options.onSelectCell)){j.options.onSelectCell.call(j,j.rows[k].id,r,h,k,p)
}}j.options.iCol=p;j.options.iRow=k},GridNav:function(){var g=this;if(!g.grid||g.options.cellEdit!==true){return}g.options.knv=g.options.id+"_kn";var f=a("<span style='width:0px;height:0px;background-color:black;' tabindex='0'><span tabindex='-1' style='width:0px;height:0px;background-color:grey' id='"+g.options.knv+"'></span></span>"),d,c;function e(p,n,o){if(o.substr(0,1)=="v"){var h=a(g.grid.rowsView)[0].clientHeight,q=a(g.grid.rowsView)[0].scrollTop,r=g.rows[p].offsetTop+g.rows[p].clientHeight,l=g.rows[p].offsetTop;if(o=="vd"){if(r>=h){a(g.grid.rowsView)[0].scrollTop=a(g.grid.rowsView)[0].scrollTop+g.rows[p].clientHeight}}if(o=="vu"){if(l<q){a(g.grid.rowsView)[0].scrollTop=a(g.grid.rowsView)[0].scrollTop-g.rows[p].clientHeight}}}if(o=="h"){var k=a(g.grid.rowsView)[0].clientWidth,j=a(g.grid.rowsView)[0].scrollLeft,i=g.rows[p].cells[n].offsetLeft+g.rows[p].cells[n].clientWidth,m=g.rows[p].cells[n].offsetLeft;if(i>=k+parseInt(j,10)){a(g.grid.rowsView)[0].scrollLeft=a(g.grid.rowsView)[0].scrollLeft+g.rows[p].cells[n].clientWidth}else{if(m<j){a(g.grid.rowsView)[0].scrollLeft=a(g.grid.rowsView)[0].scrollLeft-g.rows[p].cells[n].clientWidth}}}}function b(l,h){var k,j;if(h=="lft"){k=l+1;for(j=l;j>=0;j--){if(g.options.colModel[j].hidden!==true){k=j;break}}}if(h=="rgt"){k=l-1;for(j=l;j<g.options.colModel.length;j++){if(g.options.colModel[j].hidden!==true){k=j;break}}}return k}a(f).insertBefore(g.grid.columnsView);a("#"+g.options.knv).focus().keydown(function(h){c=h.keyCode;if(g.options.direction=="rtl"){if(c===37){c=39}else{if(c===39){c=37}}}switch(c){case 38:if(g.options.iRow-1>0){e(g.options.iRow-1,g.options.iCol,"vu");a(g.element).grid("editCell",g.options.iRow-1,g.options.iCol,false)}break;case 40:if(g.options.iRow+1<=g.rows.length-1){e(g.options.iRow+1,g.options.iCol,"vd");a(g.element).grid("editCell",g.options.iRow+1,g.options.iCol,false)}break;case 37:if(g.options.iCol-1>=0){d=b(g.options.iCol-1,"lft");e(g.options.iRow,d,"h");a(g.element).grid("editCell",g.options.iRow,d,false)
}break;case 39:if(g.options.iCol+1<=g.options.colModel.length-1){d=b(g.options.iCol+1,"rgt");e(g.options.iRow,d,"h");a(g.element).grid("editCell",g.options.iRow,d,false)}break;case 13:if(parseInt(g.options.iCol,10)>=0&&parseInt(g.options.iRow,10)>=0){a(g.element).grid("editCell",g.options.iRow,g.options.iCol,true)}break;default:return true}return false})},saveCell:function(g,f){var i=this,h;if(!i.grid||i.options.cellEdit!==true){return}if(i.options.savedRow.length>=1){h=0}else{h=null}if(h!==null){var q=a("td:eq("+f+")",i.rows[g]),o,b,k=i.options.colModel[f],c=k.name,j=a.grid.coralID(c);if(this.options.autoValid){var x=this.valid(i.rows[g].id,k.name);if(!this.options.allowSaveOnError&&!x){a.message("");return x}}var r=k.edittype;switch(r){case"select":if(!k.editoptions.multiple){o=a("#"+g+"_"+j+" option:selected",i.rows[g]).val();b=a("#"+g+"_"+j+" option:selected",i.rows[g]).text()}else{var w=a("#"+g+"_"+j,i.rows[g]),u=[];o=a(w).val();if(o){o.join(",")}else{o=""}a("option:selected",w).each(function(e,v){u[e]=a(v).text()});b=u.join(",")}if(k.formatter){b=o}break;case"checkbox":var s=["Yes","No"];if(k.editoptions){s=k.editoptions.value.split(":")}o=a("#"+g+"_"+j,i.rows[g]).is(":checked")?s[0]:s[1];b=o;break;case"password":case"text":case"textarea":o=a("#"+g+"_"+j,i.rows[g]).val();b=o;break;case"button":o=a("#"+g+"_"+j,i.rows[g]).val();b=o;break;case"custom":try{if(k.editoptions&&a.isFunction(k.editoptions.custom_value)){o=k.editoptions.custom_value.call(i,a(".customelement",q),"get");if(o===undefined){throw"e2"}else{b=o}}else{throw"e1"}}catch(y){if(y=="e1"){a.grid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.grid.edit.msg.nodefined,jQuery.jgrid.edit.bClose)}if(y=="e2"){a.grid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.grid.edit.msg.novalue,jQuery.jgrid.edit.bClose)}else{a.grid.info_dialog(jQuery.jgrid.errors.errcap,y.message,jQuery.jgrid.edit.bClose)}}break;case"datepicker":o=a("#"+g+"_"+j,i.rows[g]).val();b=o;var B=a("#"+g+"_"+j,i.rows[g]);
break;case"combobox":case"combotree":o=a("#"+g+"_"+j,i.rows[g])[r]("getValues").toString();b=a("#"+g+"_"+j,i.rows[g])[r]("getText");if(k.formatter){b=o}break;case"autocomplete":b=a("#"+g+"_"+j,i.rows[g])[r]("getText");if(typeof(k.editoptions.source)=="string"){o=b}else{o=a("#"+g+"_"+j,i.rows[g])[r]("getValue")}if(k.formatter&&k.postMode=="value"){b=o}break}if(b!==i.options.savedRow[h].value){var A=a(i).triggerHandler("jqGridBeforeSaveCell",[i.rows[g].id,c,o,g,f]);if(A){o=A;b=A}if(a.isFunction(i.options.beforeSaveCell)){var t=i.options.beforeSaveCell.call(i,i.rows[g].id,c,o,g,f);if(t){o=t;b=t}}var d=a.grid.checkValues(o,f,i);if(d[0]===true){var m=a(i).triggerHandler("jqGridBeforeSubmitCell",[i.rows[g].id,c,o,g,f])||{};if(a.isFunction(i.options.beforeSubmitCell)){m=i.options.beforeSubmitCell.call(i,i.rows[g].id,c,o,g,f);if(!m){m={}}}if(a("input.hasDatepicker",q).length>0){a("input.hasDatepicker",q).datepicker("hide")}if(i.options.cellsubmit=="remote"){if(i.options.cellurl){var z={};if(i.options.autoencode){o=a.grid.htmlEncode(o)}z[c]=o;var p,n,l;l=i.options.prmNames;p=l.id;n=l.oper;z[p]=a.grid.stripPref(i.options.idPrefix,i.rows[g].id);z[n]=l.editoper;z=a.extend(m,z);a("#lui_"+a.grid.coralID(i.options.id)).show();i.grid.columnsView.loading=true;a.ajax(a.extend({url:i.options.cellurl,data:a.isFunction(i.options.serializeCellData)?i.options.serializeCellData.call(i,z):z,type:"POST",complete:function(e,C){a("#lui_"+i.options.id).hide();i.grid.columnsView.loading=false;if(C=="success"){var v=a(i).triggerHandler("jqGridAfterSubmitCell",[i,e,z.id,c,o,g,f])||[true,""];if(v[0]===true&&a.isFunction(i.options.afterSubmitCell)){v=i.options.afterSubmitCell.call(i,e,z.id,c,o,g,f)}if(v[0]===true){a(q).empty();a(i.element).grid("setCell",i.rows[g].id,f,b,false,false,true);a(q).addClass("dirty-cell");a(i.rows[g]).addClass("edited");a(i).triggerHandler("jqGridAfterSaveCell",[i.rows[g].id,c,o,g,f]);if(a.isFunction(i.options.afterSaveCell)){i.options.afterSaveCell.call(i,i.rows[g].id,c,o,g,f)
}i.options.savedRow.splice(0,1)}else{a.grid.info_dialog(a.grid.errors.errcap,v[1],a.grid.edit.bClose);a(i.element).grid("restoreCell",g,f)}}},error:function(e,v,C){a("#lui_"+a.grid.coralID(i.options.id)).hide();i.grid.columnsView.loading=false;a(i).triggerHandler("jqGridErrorCell",[e,v,C]);if(a.isFunction(i.options.errorCell)){i.options.errorCell.call(i,e,v,C);a(i.element).grid("restoreCell",g,f)}else{a.grid.info_dialog(a.grid.errors.errcap,e.status+" : "+e.statusText+"<br/>"+v,a.grid.edit.bClose);a(i.element).grid("restoreCell",g,f)}}},a.grid.ajaxOptions,i.options.ajaxCellOptions||{}))}else{try{a.grid.info_dialog(a.grid.errors.errcap,a.grid.errors.nourl,a.grid.edit.bClose);a(i.element).grid("restoreCell",g,f)}catch(y){}}}if(i.options.cellsubmit=="clientArray"){a(q).empty();a(i.element).grid("setCell",i.rows[g].id,f,b,false,false,true);a(q).addClass("dirty-cell");a(i.rows[g]).addClass("edited");i._trigger("afterSaveCell",null,[{rowId:i.rows[g].id,name:c,cellValue:o,rowIndex:g,celIndex:f}]);i.options.savedRow.splice(0,1)}}else{try{window.setTimeout(function(){a.grid.info_dialog(a.grid.errors.errcap,o+" "+d[1],a.grid.edit.bClose)},100);a(i.element).grid("restoreCell",g,f)}catch(y){}}}else{a(i.element).grid("restoreCell",g,f)}}if(false){a("#"+a.grid.coralID(i.options.knv)).attr("tabindex","-1").focus()}else{window.setTimeout(function(){a("#"+a.grid.coralID(i.options.knv)).attr("tabindex","-1").focus()},0)}},restoreCell:function(e,c){var d=this,b;if(!d.grid||d.options.cellEdit!==true){return}if(d.options.savedRow.length>=1){b=0}else{b=null}if(b!==null){var f=a("td:eq("+c+")",d.rows[e]);a(f).empty().attr("tabindex","-1");a(d.element).grid("setCell",d.rows[e].id,c,d.options.savedRow[b].value,false,false,true);a(d).triggerHandler("jqGridAfterRestoreCell",[d.rows[e].id,d.options.savedRow[b].value,e,c]);if(a.isFunction(d.options.afterRestoreCell)){d.options.afterRestoreCell.call(d,d.rows[e].id,d.options.savedRow[b].value,e,c)}d.options.savedRow.splice(0,1)}window.setTimeout(function(){a("#"+d.options.knv).attr("tabindex","-1").focus()
},0)},nextCell:function(e,b){var d=this,f=false;if(!d.grid||d.options.cellEdit!==true){return}for(var c=b+1;c<d.options.colModel.length;c++){if(d.options.colModel[c].editable===true){f=c;break}}if(f!==false){a(d.element).grid("editCell",e,f,true)}else{if(d.options.savedRow.length>0){a(d.element).grid("saveCell",e,b)}}},prevCell:function(e,b){var d=this,f=false;if(!d.grid||d.options.cellEdit!==true){return}for(var c=b-1;c>=0;c--){if(d.options.colModel[c].editable===true){f=c;break}}if(f!==false){a(d.element).grid("editCell",e,f,true)}else{if(d.options.savedRow.length>0){a(d.element).grid("saveCell",e,b)}}},getChangedCells:function(f){var c=[];if(!f){f="all"}var d=this,b,e=true;if(!d.grid||d.options.cellEdit!==true){return}a(d.rows).each(function(g){var h={};if(a(this).hasClass("edited")){a("td",this).each(function(j){b=d.options.colModel[j].name;if(b!=="cb"&&b!=="subgrid"){if(a(this).hasClass("coral-gridcell-error")){e=false;return false}if(f=="dirty"){if(a(this).hasClass("dirty-cell")){try{h[b]=a.unformat.call(d,this,{rowId:d.rows[g].id,colModel:d.options.colModel[j]},j)}catch(k){h[b]=a.jgrid.htmlDecode(a(this).html())}}}else{try{h[b]=a.unformat.call(d,this,{rowId:d.rows[g].id,colModel:d.options.colModel[j]},j)}catch(k){h[b]=a.jgrid.htmlDecode(a(this).html())}}}});if(!e){return false}h.id=this.id;c.push(h)}});if(!e){c=[]}return c}})})(jQuery);

(function(a){a.coral.grid.inlineEdit=a.coral.grid.inlineEdit||{};a.component("coral.grid",a.coral.grid,{editRow:function(h,r,B,g,e,f,m,k,b){var u={},d=a.makeArray(arguments).slice(1);if(a.type(d[0])==="object"){u=d[0]}else{if(typeof r!=="undefined"){u.keys=r}if(a.isFunction(B)){u.oneditfunc=B}if(a.isFunction(g)){u.successfunc=g}if(typeof e!=="undefined"){u.url=e}if(typeof f!=="undefined"){u.extraparam=f}if(a.isFunction(m)){u.aftersavefunc=m}if(a.isFunction(k)){u.errorfunc=k}if(a.isFunction(b)){u.afterrestorefunc=b}}u=a.extend(true,{keys:false,oneditfunc:null,successfunc:null,url:"clientArray",extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:true,mtype:"POST"},a.coral.grid.inlineEdit,u);var y=this,c,z,v,w=0,t=null,l={},p,n;if(!y.grid){return}p=a(y.element).grid("getInd",h,true);y.options.editrow=h;y.editRowIndex=h;if(p===false){return}v=a(p).attr("editable")||"0";if(y._trigger("beforeInlineEditRow",null,[{rowId:h,options:u}])==false){return}if(v=="0"&&!a(p).hasClass("not-editable-row")){if(this.options.rowEditButtons){var A=a("<div class='row-editable coral-grid-rows'><div class='row-editable-btns coral-state-highlight'><div id='grid_edit_toolbar'></div></div></div>");var q=[];var j={type:"button",id:"update",label:a.grid.edit.bUpdate,name:"update",onClick:function(){var i=y.saveRow(p.id,null,"clientArray")}};var s={type:"button",id:"cancel",label:a.grid.edit.bCancel,name:"cancel",onClick:function(){y.restoreRow(p.id);A.remove();y._trigger("afterInlineCancelRow",null,[{rowId:p.id,options:u,isUpdated:!a(p.id).hasClass("new-row")}])}};for(var x=0;x<this.options.rowEditButtons.length;x++){if(this.options.rowEditButtons[x]=="update"){q.push(j)}else{if(this.options.rowEditButtons[x]=="cancel"){q.push(s)}else{q.push(this.options.rowEditButtons[x])}}}this.rowEditButtons=A;y.element.find(".row-editable").remove();y.element.append(A[0]);a("#grid_edit_toolbar").toolbar({data:q});A.position({my:"left-"+(A.outerWidth()/2)+" top-2",at:"right-"+(a(p).outerWidth()/2)+" top+"+(a(p).outerHeight()),collision:"fit",of:a(p)})
}n=y.options.colModel;a('td[role="gridcell"]',p).each(function(G){c=n[G].name;var H=y.options.treeGrid===true&&c==y.options.ExpandColumn;if(H){z=a("span:first",this).html()}else{try{z=a.unformat.call(y,this,{rowId:h,colModel:n[G]},G)}catch(L){z=(n[G].edittype&&n[G].edittype=="textarea")?a(this).text():a(this).html()}}if(c!="cb"&&c!="subgrid"&&c!="rn"){if(y.options.autoencode){z=a.grid.htmlDecode(z)}l[c]=z;if(n[G].editable===true){if(t===null){t=G}if(H){a("span:first",this).html("")}else{a(this).html("")}var C=a.extend({},n[G].editoptions||{},{id:h+"_"+c,name:c});if(!n[G].edittype){n[G].edittype="text"}if(z=="&nbsp;"||z=="&#160;"||(z.length==1&&z.charCodeAt(0)==160)){z=""}var o=a.grid.createEl.call(y,n[G].edittype,C,z,false,a.extend({},a.grid.ajaxOptions,y.options.ajaxSelectOptions||{}));a(o).addClass("editable");if(H){a("span:first",this).append(o)}else{a(this).append(o)}var D=n[G].editoptions||{};var E=D.postMode||"value";a.extend(D,{onValidError:function(N,i){a(o).parents("td").addClass("coral-gridcell-error");N.stopPropagation()},onValidSuccess:function(N,i){a(o).parents("td").removeClass("coral-gridcell-error");N.stopPropagation()},onKeyDown:function(N,i){},onClick:function(N,i){N.stopPropagation()},dataCustom:{rowId:h,gridId:y.options.id}});var K=n[G].edittype;switch(K){case"autocomplete":var J=a(o).val();var M=typeof(D.source)=="string";var I=D.onSelect;D=a.extend({},D,{onSelect:function(N,i){a(o).closest("td").attr("data-org",M?i.value:i.text);I&&I.apply(o,[N,i])}});if(M){D.postMode="text";a(o).autocomplete(D);a(o).autocomplete("setValue",J)}else{a(o).autocomplete(D);if(E=="value"){a(o).autocomplete("setValue",J)}else{a(o).autocomplete("setValue",J);a(o).autocomplete("setText",J)}}break;case"checkbox":a(o).checkbox(D);var F=["Yes","No"];if(D&&D.value){F=D.value.split(":")}if(a(o).val()==F[0]){a(o).checkbox("check")}else{a(o).checkbox("uncheck")}break;case"combobox":case"combotree":a(o)[K](D);if(E=="value"){a(o)[K]("setValues",a(o).val().split(","))}else{a(o)[K]("setText",a(o).val())
}D=null;break;case"text":case"textarea":a(o)["textbox"](D);break;default:a(o)[K](D);break}w++}}});if(w>0){l.id=h;y.options.savedRow.push(l);a(p).attr("editable","1");a("td:eq("+t+") input",p).focus();if(u.keys===true){a(p).bind("keydown",function(o){if(o.keyCode===27){a(y.element).grid("restoreRow",h,u.afterrestorefunc);if(y.options._inlinenav){try{a(y.element).grid("showAddEditButtons")}catch(D){}}return false}if(o.keyCode===13){var i=o.target;if(i.tagName=="TEXTAREA"){return true}if(a(y.element).grid("saveRow",h,u)){if(y.options._inlinenav){try{a(y.element).grid("showAddEditButtons")}catch(C){}}}return false}})}y._trigger("onInlineEditRow",null,[{rowId:h,options:u}])}}},saveRow:function(l,i,g,h,q,n,b){var d=a.makeArray(arguments).slice(1),z={};if(a.type(d[0])==="object"){z=d[0]}else{if(a.isFunction(i)){z.successfunc=i}if(typeof g!=="undefined"){z.url=g}if(typeof h!=="undefined"){z.extraparam=h}if(a.isFunction(q)){z.aftersavefunc=q}if(a.isFunction(n)){z.errorfunc=n}if(a.isFunction(b)){z.afterrestorefunc=b}}z=a.extend(true,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:true,mtype:"POST"},a.grid.inlineEdit,z);var m=false;var D=this,c,F={},y={},x={},A,j,f,t;if(!D.grid){return m}t=a(D.element).grid("getInd",l,true);if(t===false){return m}if(this.options.autoValid){var C=this.valid(t.id);if(!this.options.allowSaveOnError&&!C){a.message("");return C}}A=a(t).attr("editable");z.url=z.url?z.url:D.options.editurl;z.url=z.url?z.url:"clientArray";if(A==="1"){var r;a('td[role="gridcell"]',t).each(function(o){r=D.options.colModel[o];c=r.name;if(c!="cb"&&c!="subgrid"&&r.editable===true&&c!="rn"&&!a(this).hasClass("not-editable-cell")){var G=r.edittype;switch(G){case"checkbox":var k=["Yes","No"];if(r.editoptions){k=r.editoptions.value.split(":")}F[c]=a("input",this).is(":checked")?k[0]:k[1];break;case"datepicker":F[c]=a("input[type='hidden']",this).val();break;case"autocomplete":if(typeof(r.editoptions.source)=="string"){F[c]=a(".ctrl-init-"+G,this)[G]("getText")
}else{F[c]=a(".ctrl-init-"+G,this)[G]("getValue")}break;case"text":case"password":case"textarea":case"button":F[c]=a("input, textarea",this).val();break;case"combobox":case"combotree":F[c]=a(".ctrl-init-"+G,this)[G]("getValues").toString();y[c]=a(".ctrl-init-"+G,this)[G]("getText");if(r.formatter&&r.formatter==G){y={}}break;case"custom":try{if(r.editoptions&&a.isFunction(r.editoptions.custom_value)){F[c]=r.editoptions.custom_value.call(D,a(".customelement",this),"get");if(F[c]===undefined){throw"e2"}}else{throw"e1"}}catch(H){if(H=="e1"){a.grid.info_dialog(a.grid.errors.errcap,"function 'custom_value' "+a.grid.edit.msg.nodefined,a.grid.edit.bClose)}if(H=="e2"){a.grid.info_dialog(a.grid.errors.errcap,"function 'custom_value' "+a.grid.edit.msg.novalue,a.grid.edit.bClose)}else{a.grid.info_dialog(a.grid.errors.errcap,H.message,a.grid.edit.bClose)}}break}f=a.grid.checkValues(F[c],o,D);if(f[0]===false){f[1]=F[c]+" "+f[1];return false}if(D.options.autoencode){F[c]=a.grid.htmlEncode(F[c])}if(z.url!=="clientArray"&&r.editoptions){if(F[c]===""){x[c]="null"}}}});if(f[0]===false){try{var p=a.grid.findPos(a("#"+a.grid.coralID(l),D.grid.bDiv)[0]);a.grid.info_dialog(a.grid.errors.errcap,f[1],a.grid.edit.bClose,{left:p[0],top:p[1]})}catch(E){alert(f[1])}return m}var v,s,u;s=D.options.prmNames;u=s.oper;v=s.id;if(F){F[u]=s.editoper;F[v]=l;if(typeof(D.options.inlineData)=="undefined"){D.options.inlineData={}}F=a.extend({},F,D.options.inlineData,z.extraparam)}if(z.url=="clientArray"){if(D.options.autoencode){a.each(F,function(k,e){F[k]=a.grid.htmlDecode(e)})}var w=a(D.element).grid("setRowData",l,F);a(t).attr("editable","0");for(var B=0;B<D.options.savedRow.length;B++){if(D.options.savedRow[B].id==l){j=B;break}}if(j>=0){D.options.savedRow.splice(j,1)}m=w;if(m){D.options.editrow=null}if(D.options.rowEditButtons){D.rowEditButtons.hide()}D._trigger("afterInlineSaveRow",null,[{rowId:l,options:z,status:w}]);if(a.isFunction(z.aftersavefunc)){z.aftersavefunc.call(D,l,w)}a(t).unbind("keydown")}else{a("#lui_"+a.grid.coralID(D.options.id)).show();
x=a.extend({},F,x);x[v]=a.grid.stripPref(D.options.idPrefix,x[v]);a.ajax(a.extend({url:z.url,data:a.isFunction(D.options.serializeRowData)?D.options.serializeRowData.call(D,x):x,type:z.mtype,async:false,complete:function(G,H){a("#lui_"+a.grid.coralID(D.options.id)).hide();if(H==="success"){var o=true,I;I=D._trigger("inlineSuccessSaveRow",null,[{res:G,rowId:l,options:z}]);if(!a.isArray(I)){I=[true,F]}if(I[0]&&a.isFunction(z.successfunc)){I=z.successfunc.call(D,G)}if(a.isArray(I)){o=I[0];F=I[1]?I[1]:F}else{o=I}if(o===true){if(D.options.autoencode){a.each(F,function(J,k){F[J]=a.grid.htmlDecode(k)})}F=a.extend({},F,y);a(D.element).grid("setRowData",l,F);a(t).attr("editable","0");for(var e=0;e<D.options.savedRow.length;e++){if(D.options.savedRow[e].id==l){j=e;break}}if(j>=0){D.options.savedRow.splice(j,1)}a(D).triggerHandler("gridInlineAfterSaveRow",[l,G,F,z]);if(a.isFunction(z.aftersavefunc)){z.aftersavefunc.call(D,l,G)}m=true;D.options.editrow=null;if(D.rowEditButtons){D.rowEditButtons.hide()}D._trigger("afterInlineSaveRow",null,[{rowId:l,options:z,status:w}]);a(t).unbind("keydown")}else{a(D).triggerHandler("gridInlineErrorSaveRow",[l,G,H,null,z]);if(a.isFunction(z.errorfunc)){z.errorfunc.call(D,l,G,H,null)}if(z.restoreAfterError===true){a(D.element).grid("restoreRow",l,z.afterrestorefunc)}}}},error:function(k,o,G){a("#lui_"+a.grid.coralID(D.options.id)).hide();a(D).triggerHandler("gridInlineErrorSaveRow",[l,k,o,G,z]);if(a.isFunction(z.errorfunc)){z.errorfunc.call(D,l,k,o,G)}else{try{a.grid.info_dialog(a.grid.errors.errcap,'<div class="coral-state-error">'+k.responseText+"</div>",a.grid.edit.bClose,{buttonalign:"right"})}catch(H){alert(k.responseText)}}if(z.restoreAfterError===true){a(D.element).grid("restoreRow",l,z.afterrestorefunc)}}},a.grid.ajaxOptions,D.options.ajaxRowOptions||{}))}}if(m){a(t).removeClass("new-row")}return m},restoreRow:function(b,l){var m=a.makeArray(arguments).slice(1),c={};if(a.type(m[0])==="object"){c=m[0]}else{if(a.isFunction(l)){c.afterrestorefunc=l
}}c=a.extend(true,a.grid.inlineEdit,c);var h=this,i,d,g={};if(!h.grid){return}d=a(h.element).grid("getInd",b,true);if(h.options.editrow&&b==h.options.editrow){h.options.editrow=null;h.clearErrors(b)}if(d===false){return}for(var f=0;f<h.options.savedRow.length;f++){if(h.options.savedRow[f].id==b){i=f;break}}if(i>=0){if(a.isFunction(a.fn.datepicker)){try{a("input.hasDatepicker","#"+a.grid.coralID(d.id)).datepicker("hide")}catch(j){}}a.each(h.options.colModel,function(){if(this.editable===true&&this.name in h.options.savedRow[i]){g[this.name]=h.options.savedRow[i][this.name]}});a(h.element).grid("setRowData",b,g);a(d).attr("editable","0").unbind("keydown");h.options.savedRow.splice(i,1);if(a("#"+a.grid.coralID(b),"#"+a.grid.coralID(h.options.id)).hasClass("grid-new-row")){setTimeout(function(){a(h.element).grid("delRowData",b)},0)}}a(h).triggerHandler("gridInlineAfterRestoreRow",[b]);if(a.isFunction(c.afterrestorefunc)){c.afterrestorefunc.call(h,b)}},addRow:function(c){c=a.extend(true,{rowID:"new_row",initdata:{},position:"first",useDefValues:true,useFormatter:false,addRowParams:{extraparam:{}}},c||{});if(!this.grid){return}var e=this;if(c.useDefValues===true){a(e.options.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var g=this.editoptions.defaultValue,f=a.isFunction(g)?g.call(e):g;c.initdata[this.name]=f}})}a(e.element).grid("addRowData",c.rowID,c.initdata,c.position);a("#"+a.grid.coralID(c.rowID),"#"+a.grid.coralID(e.options.id)).addClass("grid-new-row");if(c.useFormatter){a("#"+a.grid.coralID(c.rowID)+" .coral-inline-edit","#"+a.grid.coralID(e.options.id)).click()}else{var b=e.options.prmNames,d=b.oper;c.addRowParams.extraparam[d]=b.addoper;a(e.element).grid("editRow",c.rowID,c.addRowParams);a(e.element).grid("setSelection",c.rowID)}},clearEdited:function(c){var b=a(this.getInd(c,true));b.removeClass("edited");b.children("td").removeClass("dirty-cell")},inlineNav:function(b,c){c=a.extend({edit:true,editicon:"coral-icon-pencil",add:true,addicon:"coral-icon-plus",save:true,saveicon:"coral-icon-disk",cancel:true,cancelicon:"coral-icon-cancel",addParams:{useFormatter:false,rowID:"new_row"},editParams:{},restoreAfterSelect:true},a.grid.nav,c||{});
return this.each(function(){if(!this.grid){return}var k=this,e,h=a.grid.coralID(k.options.id);k.options._inlinenav=true;if(c.addParams.useFormatter===true){var d=k.options.colModel,g;for(g=0;g<d.length;g++){if(d[g].formatter&&d[g].formatter==="actions"){if(d[g].formatoptions){var j={keys:false,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},f=a.extend(j,d[g].formatoptions);c.addParams.addRowParams={keys:f.keys,oneditfunc:f.onEdit,successfunc:f.onSuccess,url:f.url,extraparam:f.extraparam,aftersavefunc:f.afterSavef,errorfunc:f.onError,afterrestorefunc:f.afterRestore}}break}}}if(c.add){a(k.element).grid("navButtonAdd",b,{caption:c.addtext,title:c.addtitle,buttonicon:c.addicon,id:k.options.id+"_iladd",onClickButton:function(){a(k.element).grid("addRow",c.addParams);if(!c.addParams.useFormatter){a("#"+h+"_ilsave").removeClass("coral-state-disabled");a("#"+h+"_ilcancel").removeClass("coral-state-disabled");a("#"+h+"_iladd").addClass("coral-state-disabled");a("#"+h+"_iledit").addClass("coral-state-disabled")}}})}if(c.edit){a(k.element).grid("navButtonAdd",b,{caption:c.edittext,title:c.edittitle,buttonicon:c.editicon,id:k.options.id+"_iledit",onClickButton:function(){var i=a(k.element).grid("getGridParam","selrow");if(i){a(k.element).grid("editRow",i,c.editParams);a("#"+h+"_ilsave").removeClass("coral-state-disabled");a("#"+h+"_ilcancel").removeClass("coral-state-disabled");a("#"+h+"_iladd").addClass("coral-state-disabled");a("#"+h+"_iledit").addClass("coral-state-disabled")}else{a.grid.viewModal("#alertmod",{gbox:"#gbox_"+h,jqm:true});a("#jqg_alrt").focus()}}})}if(c.save){a(k.element).grid("navButtonAdd",b,{caption:c.savetext||"",title:c.savetitle||"Save row",buttonicon:c.saveicon,id:k.options.id+"_ilsave",onClickButton:function(){var l=k.options.savedRow[0].id;if(l){var i=k.options.prmNames,m=i.oper;if(!c.editParams.extraparam){c.editParams.extraparam={}}if(a("#"+a.grid.coralID(l),"#"+h).hasClass("grid-new-row")){c.editParams.extraparam[m]=i.addoper
}else{c.editParams.extraparam[m]=i.editoper}if(a(k.element).grid("saveRow",l,c.editParams)){a(k.element).grid("showAddEditButtons")}}else{a.grid.viewModal("#alertmod",{gbox:"#gbox_"+h,jqm:true});a("#jqg_alrt").focus()}}});a("#"+h+"_ilsave").addClass("coral-state-disabled")}if(c.cancel){a(k.element).grid("navButtonAdd",b,{caption:c.canceltext||"",title:c.canceltitle||"Cancel row editing",buttonicon:c.cancelicon,id:k.options.id+"_ilcancel",onClickButton:function(){var i=k.options.savedRow[0].id;if(i){a(k.element).grid("restoreRow",i,c.editParams);a(k.element).grid("showAddEditButtons")}else{a.grid.viewModal("#alertmod",{gbox:"#gbox_"+h,jqm:true});a("#jqg_alrt").focus()}}});a("#"+h+"_ilcancel").addClass("coral-state-disabled")}if(c.restoreAfterSelect===true){if(a.isFunction(k.options.beforeSelectRow)){e=k.options.beforeSelectRow}else{e=false}k.options.beforeSelectRow=function(m,l){var i=true;if(k.options.savedRow.length>0&&k.options._inlinenav===true&&(m!==k.options.selrow&&k.options.selrow!==null)){if(k.options.selrow==c.addParams.rowID){a(k.element).grid("delRowData",k.options.selrow)}else{a(k.element).grid("restoreRow",k.options.selrow,c.editParams)}a(k.element).grid("showAddEditButtons")}if(e){i=e.call(k,m,l)}return i}}})},showAddEditButtons:function(){return this.each(function(){if(!this.grid){return}var b=a.grid.coralID(this.options.id);a("#"+b+"_ilsave").addClass("coral-state-disabled");a("#"+b+"_ilcancel").addClass("coral-state-disabled");a("#"+b+"_iladd").removeClass("coral-state-disabled");a("#"+b+"_iledit").removeClass("coral-state-disabled")})}})})(jQuery);

(function(b){b.fmatter={};b.extend(b.fmatter,{isBoolean:function(c){return typeof c==="boolean"},isObject:function(c){return(c&&(typeof c==="object"||b.isFunction(c)))||false},isString:function(c){return typeof c==="string"},isNumber:function(c){return typeof c==="number"&&isFinite(c)},isNull:function(c){return c===null},isUndefined:function(c){return typeof c==="undefined"},isValue:function(c){return(this.isObject(c)||this.isString(c)||this.isNumber(c)||this.isBoolean(c))},isEmpty:function(c){if(!this.isString(c)&&this.isValue(c)){return false}else{if(!this.isValue(c)){return true}}c=b.trim(c).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return c===""}});b.fn.fmatter=function(h,i,g,c,d){var e=i;g=b.extend({},b.grid.formatter,g);try{e=b.fn.fmatter[h].call(this,i,g,c,d)}catch(f){}return e};b.fmatter.util={NumberFormat:function(e,c){if(!b.fmatter.isNumber(e)){e*=1}if(b.fmatter.isNumber(e)){var g=(e<0);var m=e+"";var j=(c.decimalSeparator)?c.decimalSeparator:".";var k;if(b.fmatter.isNumber(c.decimalPlaces)){var l=c.decimalPlaces;var f=Math.pow(10,l);m=Math.round(e*f)/f+"";k=m.lastIndexOf(".");if(l>0){if(k<0){m+=j;k=m.length-1}else{if(j!=="."){m=m.replace(".",j)}}while((m.length-1-k)<l){m+="0"}}}if(c.thousandsSeparator){var o=c.thousandsSeparator;k=m.lastIndexOf(j);k=(k>-1)?k:m.length;var n=m.substring(k);var d=-1;for(var h=k;h>0;h--){d++;if((d%3===0)&&(h!==k)&&(!g||(h>1))){n=o+n}n=m.charAt(h-1)+n}m=n}m=(c.prefix)?c.prefix+m:m;m=(c.suffix)?m+c.suffix:m;return m}else{return e}},DateFormat:function(K,O,Q,A){var p=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,E=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,M=/[^-+\dA-Z]/g,q=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),g=((typeof O==="string")?O.match(q):null),L=function(j,i){j=String(j);i=parseInt(i,10)||2;while(j.length<i){j="0"+j}return j},c={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},f=0,t,H,e,F=["i18n"];F.i18n={dayNames:A.dayNames,monthNames:A.monthNames};
if(K in A.masks){K=A.masks[K]}if(!isNaN(O-0)&&String(K).toLowerCase()=="u"){f=new Date(parseFloat(O)*1000)}else{if(O.constructor===Date){f=O}else{if(g!==null){f=new Date(parseInt(g[1],10));if(g[3]){var h=Number(g[5])*60+Number(g[6]);h*=((g[4]=="-")?1:-1);h-=f.getTimezoneOffset();f.setTime(Number(Number(f)+(h*60*1000)))}}else{O=String(O).split(/[\\\/:_;.,\t\T\s-]/);K=K.split(/[\\\/:_;.,\t\T\s-]/);for(H=0,e=K.length;H<e;H++){if(K[H]=="M"){t=b.inArray(O[H],F.i18n.monthNames);if(t!==-1&&t<12){O[H]=t+1}}if(K[H]=="F"){t=b.inArray(O[H],F.i18n.monthNames);if(t!==-1&&t>11){O[H]=t+1-12}}if(O[H]){c[K[H].toLowerCase()]=parseInt(O[H],10)}}if(c.f){c.m=c.f}if(c.m===0&&c.y===0&&c.d===0){return"&#160;"}c.m=parseInt(c.m,10)-1;var P=c.y;if(P>=70&&P<=99){c.y=1900+c.y}else{if(P>=0&&P<=69){c.y=2000+c.y}}f=new Date(c.y,c.m,c.d,c.h,c.i,c.s,c.u)}}}if(Q in A.masks){Q=A.masks[Q]}else{if(!Q){Q="Y-m-d"}}var x=f.getHours(),J=f.getMinutes(),I=f.getDate(),D=f.getMonth()+1,C=f.getTimezoneOffset(),B=f.getSeconds(),y=f.getMilliseconds(),v=f.getDay(),d=f.getFullYear(),m=(v+6)%7+1,r=(new Date(d,D-1,I)-new Date(d,0,1))/86400000,l={d:L(I),D:F.i18n.dayNames[v],j:I,l:F.i18n.dayNames[v+7],N:m,S:A.S(I),w:v,z:r,W:m<5?Math.floor((r+m-1)/7)+1:Math.floor((r+m-1)/7)||((new Date(d-1,0,1).getDay()+6)%7<4?53:52),F:F.i18n.monthNames[D-1+12],m:L(D),M:F.i18n.monthNames[D-1],n:D,t:"?",L:"?",o:"?",Y:d,y:String(d).substring(2),a:x<12?A.AmPm[0]:A.AmPm[1],A:x<12?A.AmPm[2]:A.AmPm[3],B:"?",g:x%12||12,G:x,h:L(x%12||12),H:L(x),i:L(J),s:L(B),u:y,e:"?",I:"?",O:(C>0?"-":"+")+L(Math.floor(Math.abs(C)/60)*100+Math.abs(C)%60,4),P:"?",T:(String(f).match(E)||[""]).pop().replace(M,""),Z:"?",c:"?",r:"?",U:Math.floor(f/1000)};return Q.replace(p,function(i){return i in l?l[i]:i.substring(1)})}};b.fn.fmatter.defaultFormat=function(f,e,c,d){return(b.fmatter.isValue(f)&&f!=="")?f:e.defaultValue?e.defaultValue:"&#160;"};b.fn.fmatter.email=function(f,e,c,d){if(!b.fmatter.isEmpty(f)){return'<a href="mailto:'+f+'">'+f+"</a>"}else{return b.fn.fmatter.defaultFormat(f,e)
}};b.fn.fmatter.combobox=function(g,e,c,d){var h=b.extend({},e.combobox),f;if(!b.fmatter.isUndefined(e.colModel.formatoptions)){h=b.extend({},h,e.colModel.formatoptions)}if(h.disabled===true){f='disabled="disabled"'}else{f=""}if(b.fmatter.isEmpty(g)||b.fmatter.isUndefined(g)){g=b.fn.fmatter.defaultFormat(g,h)}g=g+"";return'<input class="parseformatter" data-formatter="combobox" data-pos="'+e.pos+'" type="text" value="'+g+'" '+f+"/>"};b.fn.fmatter.combotree=function(g,e,c,d){var h=b.extend({},e.combotree),f;if(!b.fmatter.isUndefined(e.colModel.formatoptions)){h=b.extend({},h,e.colModel.formatoptions)}if(h.disabled===true){f='disabled="disabled"'}else{f=""}if(b.fmatter.isEmpty(g)||b.fmatter.isUndefined(g)){g=b.fn.fmatter.defaultFormat(g,h)}g=g+"";return'<input class="parseformatter" data-formatter="combotree" data-pos="'+e.pos+'" type="text" value="'+g+'" '+f+"/>"};b.fn.fmatter.autocomplete=function(g,e,c,d){var h=b.extend({},e.autocomplete),f;if(!b.fmatter.isUndefined(e.colModel.formatoptions)){h=b.extend({},h,e.colModel.formatoptions)}if(h.disabled===true){f='disabled="disabled"'}else{f=""}if(b.fmatter.isEmpty(g)||b.fmatter.isUndefined(g)){g=b.fn.fmatter.defaultFormat(g,h)}g=g+"";return'<input class="parseformatter" data-formatter="autocomplete" data-pos="'+e.pos+'" type="text" value="'+g+'" '+f+"/>"};b.fn.fmatter.toolbar=function(g,e,c,d){var h=b.extend({},e.toolbar),f;if(!b.fmatter.isUndefined(e.colModel.formatoptions)){h=b.extend({},h,e.colModel.formatoptions)}if(h.disabled===true){f='disabled="disabled"'}else{f=""}if(b.fmatter.isEmpty(g)||b.fmatter.isUndefined(g)){g=b.fn.fmatter.defaultFormat(g,h)}g=g+"";return'<div class="parseformatter" data-formatter="toolbar" data-pos="'+e.pos+'" '+f+"/>"};b.fn.fmatter.text=function(g,e,c,d){var h=b.extend({},e.textbox),f;if(!b.fmatter.isUndefined(e.colModel.formatoptions)){h=b.extend({},h,e.colModel.formatoptions)}if(h.disabled===true){f='disabled="disabled"'}else{f=""}if(b.fmatter.isEmpty(g)||b.fmatter.isUndefined(g)){g=b.fn.fmatter.defaultFormat(g,h)
}g=g+"";return'<input class="parseformatter" data-formatter="textbox" data-pos="'+e.pos+'" type="text" value="'+g+'" '+f+"/>"};b.fn.fmatter.textarea=function(g,e,c,d){var h=b.extend({},e.textbox),f;if(!b.fmatter.isUndefined(e.colModel.formatoptions)){h=b.extend({},h,e.colModel.formatoptions)}if(h.disabled===true){f='disabled="disabled"'}else{f=""}if(b.fmatter.isEmpty(g)||b.fmatter.isUndefined(g)){g=b.fn.fmatter.defaultFormat(g,h)}g=g+"";return'<textarea class="parseformatter" data-formatter="textbox" data-pos="'+e.pos+'" '+f+"/>"+g+"</textarea>"};b.fn.fmatter.convertCode=function(m,d,e,p){var t=d.colModel.formatoptions||d.colModel.editoptions||{},h=t.postMode||"value";b("#"+d.rowId,this.element).children("td[aria-describedby$='"+d.colModel.name+"']").attr("data-org",m);var g=t.data,c=t.dataStructure||"list",s=t.valueField||"value",k=t.textField||"text",o=t.separator||",";if(typeof(m)=="undefined"||m==null){return""}if(h!="value"){return m}if(d.colModel.edittype=="combobox"&&t.code){g=t.code}if(d.colModel.edittype=="combotree"&&t.code){g=t.code}if(d.colModel.edittype=="combotree"){c="tree"}if(d.colModel.edittype=="autocomplete"&&typeof(t.code)=="string"){g=t.code}if(d.colModel.edittype=="autocomplete"&&t.source){g=t.source}var f=[],r=false,q=m.toString().split(o);if(c=="tree"){for(var n=0;n<q.length;n++){a(g,q[n],f)}}else{for(var n=0;n<q.length;n++){for(var l=0;l<g.length;l++){if(g[l][s]==q[n]){f.push(g[l][k]);r=true}}if(!r&&!t.forceSelection){f.push(q[n])}r=false}}return f.join(o)};function a(f,c,e){for(var d=0;d<f.length;d++){if(f[d].id==c){e.push(f[d].name)}else{if(f[d].children){a(f[d].children,c,e)}}}}b.fn.fmatter.checkbox=function(f,d){var g=b.extend({},d.checkbox),e;var c=["Yes","No"];if(!b.fmatter.isUndefined(d.colModel.formatoptions)){g=b.extend({},g,d.colModel.formatoptions);if(d.colModel.formatoptions&&d.colModel.formatoptions.value){c=d.colModel.formatoptions.value.split(":")}}if(g.disabled===true){e='disabled="disabled"'}else{e=""}if(b.fmatter.isEmpty(f)||b.fmatter.isUndefined(f)){f=b.fn.fmatter.defaultFormat(f,g)
}f=f+"";return'<input class="parseformatter" data-formatter="checkbox" value=\''+f+"' data-pos=\""+d.pos+'" type="checkbox" '+e+"/>"};b.fn.afterFmatter=function(c){var d=this;b(".parseformatter",d.element).each(function(){b(this).removeClass("parseformatter");var i=b(this).attr("data-pos"),f=b(this).attr("data-formatter"),g=b.trim(b(this).val())==""?"":b(this).val(),h=b.extend({},d.options.colModel[i].formatoptions,{dataCustom:{rowId:b(this).closest("tr")[0].id,gridId:d.options.id}});b(this)[f](h);if(f=="combobox"||f=="combotree"){b(this)[f]("setValues",g.split(","))}if(f=="textbox"){b(this)[f]("setValue",g)}if(f=="toolbar"){}if(f=="checkbox"){var e=["Yes","No"];if(f&&d.options.colModel[i].formatoptions.value){e=d.options.colModel[i].formatoptions.value.split(":")}if(b(this).val()==e[0]){b(this)[f]("check")}else{b(this)[f]("uncheck")}}})};b.fn.fmatter.link=function(e,c){var f={target:c.target};var d="";if(!b.fmatter.isUndefined(c.colModel.formatoptions)){f=b.extend({},f,c.colModel.formatoptions)}if(f.target){d="target="+f.target}if(!b.fmatter.isEmpty(e)){return"<a "+d+' href="'+e+'">'+e+"</a>"}else{return b.fn.fmatter.defaultFormat(e,c)}};b.fn.fmatter.showlink=function(e,c){var g={baseLinkUrl:c.baseLinkUrl,showAction:c.showAction,addParam:c.addParam||"",target:c.target,idName:c.idName},d="",f;if(!b.fmatter.isUndefined(c.colModel.formatoptions)){g=b.extend({},g,c.colModel.formatoptions)}if(g.target){d="target="+g.target}f=g.baseLinkUrl+g.showAction+"?"+g.idName+"="+c.rowId+g.addParam;if(b.fmatter.isString(e)||b.fmatter.isNumber(e)){return"<a "+d+' href="'+f+'">'+e+"</a>"}else{return b.fn.fmatter.defaultFormat(e,c)}};b.fn.fmatter.integer=function(d,c){var e=b.extend({},c.integer);if(!b.fmatter.isUndefined(c.colModel.formatoptions)){e=b.extend({},e,c.colModel.formatoptions)}if(b.fmatter.isEmpty(d)){return e.defaultValue}return b.fmatter.util.NumberFormat(d,e)};b.fn.fmatter.number=function(d,c){var e=b.extend({},c.number);if(!b.fmatter.isUndefined(c.colModel.formatoptions)){e=b.extend({},e,c.colModel.formatoptions)
}if(b.fmatter.isEmpty(d)){return e.defaultValue}return b.fmatter.util.NumberFormat(d,e)};b.fn.fmatter.currency=function(d,c){var e=b.extend({},c.currency);if(!b.fmatter.isUndefined(c.colModel.formatoptions)){e=b.extend({},e,c.colModel.formatoptions)}if(b.fmatter.isEmpty(d)){return e.defaultValue}return b.fmatter.util.NumberFormat(d,e)};b.fn.fmatter.date=function(h,g,c,d){var i=b.extend({},g.date);if(!b.fmatter.isUndefined(g.colModel.formatoptions)){i=b.extend({},i,g.colModel.formatoptions)}var f=i.srcDateFormat||i.dateFormat;var e=b.datepicker.parseDate(f,h||"");return b.datepicker.formatDate(i.dateFormat,e)||""};b.fn.fmatter.select=function(h,c){h=h+"";var f=false,l=[],p,e;if(!b.fmatter.isUndefined(c.colModel.formatoptions)){f=c.colModel.formatoptions.value;p=c.colModel.formatoptions.separator===undefined?":":c.colModel.formatoptions.separator;e=c.colModel.formatoptions.delimiter===undefined?";":c.colModel.formatoptions.delimiter}else{if(!b.fmatter.isUndefined(c.colModel.editoptions)){f=c.colModel.editoptions.value;p=c.colModel.editoptions.separator===undefined?":":c.colModel.editoptions.separator;e=c.colModel.editoptions.delimiter===undefined?";":c.colModel.editoptions.delimiter}}if(f){var o=c.colModel.editoptions.multiple===true?true:false,n=[],m;if(o){n=h.split(",");n=b.map(n,function(i){return b.trim(i)})}if(b.fmatter.isString(f)){var d=f.split(e),g=0;for(var k=0;k<d.length;k++){m=d[k].split(p);if(m.length>2){m[1]=b.map(m,function(q,j){if(j>0){return q}}).join(p)}if(o){if(b.inArray(m[0],n)>-1){l[g]=m[1];g++}}else{if(b.trim(m[0])==b.trim(h)){l[0]=m[1];break}}}}else{if(b.fmatter.isObject(f)){if(o){l=b.map(n,function(i){return f[i]})}else{l[0]=f[h]||""}}}}h=l.join(", ");return h===""?b.fn.fmatter.defaultFormat(h,c):h};b.fn.fmatter.rowactions=function(m,h,i,k){var g={keys:false,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null,delOptions:{},editOptions:{}};m=b.grid.coralID(m);h=b.grid.coralID(h);var l=b("#"+h)[0].options.colModel[k];
if(!b.fmatter.isUndefined(l.formatoptions)){g=b.extend(g,l.formatoptions)}if(!b.fmatter.isUndefined(b("#"+h)[0].options.editOptions)){g.editOptions=b("#"+h)[0].options.editOptions}if(!b.fmatter.isUndefined(b("#"+h)[0].options.delOptions)){g.delOptions=b("#"+h)[0].options.delOptions}var e=b("#"+h)[0];var f=function(o,n){if(b.isFunction(g.afterSave)){g.afterSave.call(e,o,n)}b("tr#"+m+" div.coral-inline-edit, tr#"+m+" div.coral-inline-del","#"+h+".coral-grid-btable:first").show();b("tr#"+m+" div.coral-inline-save, tr#"+m+" div.coral-inline-cancel","#"+h+".coral-grid-btable:first").hide()},j=function(n){if(b.isFunction(g.afterRestore)){g.afterRestore.call(e,n)}b("tr#"+m+" div.coral-inline-edit, tr#"+m+" div.coral-inline-del","#"+h+".coral-grid-btable:first").show();b("tr#"+m+" div.coral-inline-save, tr#"+m+" div.coral-inline-cancel","#"+h+".coral-grid-btable:first").hide()};if(b("#"+m,"#"+h).hasClass("grid-new-row")){var d=e.options.prmNames,c=d.oper;g.extraparam[c]=d.addoper}switch(i){case"edit":b("#"+h).grid("editRow",m,g.keys,g.onEdit,g.onSuccess,g.url,g.extraparam,f,g.onError,j);b("tr#"+m+" div.coral-inline-edit, tr#"+m+" div.coral-inline-del","#"+h+".coral-grid-btable:first").hide();b("tr#"+m+" div.coral-inline-save, tr#"+m+" div.coral-inline-cancel","#"+h+".coral-grid-btable:first").show();b(e).triggerHandler("jqGridAfterGridComplete");break;case"save":if(b("#"+h).grid("saveRow",m,g.onSuccess,g.url,g.extraparam,f,g.onError,j)){b("tr#"+m+" div.coral-inline-edit, tr#"+m+" div.coral-inline-del","#"+h+".coral-grid-btable:first").show();b("tr#"+m+" div.coral-inline-save, tr#"+m+" div.coral-inline-cancel","#"+h+".coral-grid-btable:first").hide();b(e).triggerHandler("jqGridAfterGridComplete")}break;case"cancel":b("#"+h).grid("restoreRow",m,j);b("tr#"+m+" div.coral-inline-edit, tr#"+m+" div.coral-inline-del","#"+h+".coral-grid-btable:first").show();b("tr#"+m+" div.coral-inline-save, tr#"+m+" div.coral-inline-cancel","#"+h+".coral-grid-btable:first").hide();b(e).triggerHandler("jqGridAfterGridComplete");
break;case"del":b("#"+h).grid("delGridRow",m,g.delOptions);break;case"formedit":b("#"+h).grid("setSelection",m);b("#"+h).grid("editGridRow",m,g.editOptions);break}};b.fn.fmatter.actions=function(f,d){var h={keys:false,editbutton:true,delbutton:true,editformbutton:false};if(!b.fmatter.isUndefined(d.colModel.formatoptions)){h=b.extend(h,d.colModel.formatoptions)}var c=d.rowId,g="",e;if(typeof(c)=="undefined"||b.fmatter.isEmpty(c)){return""}if(h.editformbutton){e="onclick=jQuery.fn.fmatter.rowactions('"+c+"','"+d.gid+"','formedit',"+d.pos+"); onmouseover=jQuery(this).addClass('coral-state-hover'); onmouseout=jQuery(this).removeClass('coral-state-hover'); ";g=g+"<div title='"+b.grid.nav.edittitle+"' style='float:left;cursor:pointer;' class='coral-pg-div coral-inline-edit' "+e+"><span class='coral-icon coral-icon-pencil'></span></div>"}else{if(h.editbutton){e="onclick=jQuery.fn.fmatter.rowactions('"+c+"','"+d.gid+"','edit',"+d.pos+"); onmouseover=jQuery(this).addClass('coral-state-hover'); onmouseout=jQuery(this).removeClass('coral-state-hover') ";g=g+"<div title='"+b.grid.nav.edittitle+"' style='float:left;cursor:pointer;' class='coral-pg-div coral-inline-edit' "+e+"><span class='coral-icon coral-icon-pencil'></span></div>"}}if(h.delbutton){e="onclick=jQuery.fn.fmatter.rowactions('"+c+"','"+d.gid+"','del',"+d.pos+"); onmouseover=jQuery(this).addClass('coral-state-hover'); onmouseout=jQuery(this).removeClass('coral-state-hover'); ";g=g+"<div title='"+b.grid.nav.deltitle+"' style='float:left;margin-left:5px;' class='coral-pg-div coral-inline-del' "+e+"><span class='coral-icon coral-icon-trash'></span></div>"}e="onclick=jQuery.fn.fmatter.rowactions('"+c+"','"+d.gid+"','save',"+d.pos+"); onmouseover=jQuery(this).addClass('coral-state-hover'); onmouseout=jQuery(this).removeClass('coral-state-hover'); ";g=g+"<div title='"+b.grid.edit.bSubmit+"' style='float:left;display:none' class='coral-pg-div coral-inline-save' "+e+"><span class='coral-icon coral-icon-disk'></span></div>";e="onclick=jQuery.fn.fmatter.rowactions('"+c+"','"+d.gid+"','cancel',"+d.pos+"); onmouseover=jQuery(this).addClass('coral-state-hover'); onmouseout=jQuery(this).removeClass('coral-state-hover'); ";
g=g+"<div title='"+b.grid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='coral-pg-div coral-inline-cancel' "+e+"><span class='coral-icon coral-icon-cancel'></span></div>";return"<div style='margin-left:8px;'>"+g+"</div>"};b.unformat=function(f,o,k,e,d){var i,d=d||"formatter",g=o.colModel[d],h=o.colModel.formatoptions||{},n,m=/([\.\*\_\'\(\)\{\}\+\?\\])/g,j=o.colModel.unformat||(b.fn.fmatter[g]&&b.fn.fmatter[g].unformat);j=b.coral.toFunction(j);if(o.colModel.edittype=="combobox"&&o.colModel.revertCode||o.colModel.edittype=="combotree"&&o.colModel.revertCode||o.colModel.edittype=="autocomplete"&&o.colModel.revertCode||o.colModel.revertCode){if(g=="combobox"||g=="combotree"){}else{g="convertCode"}}if(typeof j!=="undefined"&&b.isFunction(j)){i=j.call(this,b(f).text(),o,f)}else{if(!b.fmatter.isUndefined(g)&&b.fmatter.isString(g)){var c=b.grid.formatter||{},l;switch(g){case"integer":h=b.extend({},c.integer,h);n=h.thousandsSeparator.replace(m,"\\$1");l=new RegExp(n,"g");i=b(f).text().replace(l,"");break;case"number":h=b.extend({},c.number,h);n=h.thousandsSeparator.replace(m,"\\$1");l=new RegExp(n,"g");i=b(f).text().replace(l,"").replace(h.decimalSeparator,".");break;case"currency":h=b.extend({},c.currency,h);n=h.thousandsSeparator.replace(m,"\\$1");l=new RegExp(n,"g");i=b(f).text();if(h.prefix&&h.prefix.length){i=i.substr(h.prefix.length)}if(h.suffix&&h.suffix.length){i=i.substr(0,i.length-h.suffix.length)}i=i.replace(l,"").replace(h.decimalSeparator,".");break;case"checkbox":i=b.unformat.checkbox(f,o,k,e);break;case"select":i=b.unformat.select(f,o,k,e);break;case"date":i=b.unformat.date(f,o,k,e);break;case"combobox":case"combotree":i=b.unformat[g](f,o,k,e);break;case"datepicker":i=b.unformat.datepicker(f,o,k,e);break;case"autocomplete":i=b.unformat.autocomplete(f,o,k,e);break;case"text":case"textarea":i=b.unformat.textbox(f,o,k,e);break;case"convertCode":if(e=="get"){if(o.colModel.revertCode==true){i=b.unformat.convertCode(f,o,k,e)}else{i=b(f).text()
}}else{if(o.colModel.postMode=="value"){i=b.unformat.convertCode(f,o,k,e)}else{i=b(f).text()}}break;case"actions":return"";default:i=b(f).text()}}}return i!==undefined?i:e===true?b(f).text():b.grid.htmlDecode(b(f).html())};b.unformat.autocomplete=function(e,j,h,d){var g=[];var i=b(e).text();if(d===true){return i}var f=b.extend({},!b.fmatter.isUndefined(j.colModel.formatoptions)?j.colModel.formatoptions:j.colModel.editoptions),k=f.separator===undefined?":":f.separator,c=f.delimiter===undefined?";":f.delimiter;if(j.colModel.revertCode){return b(e).find(".ctrl-init").autocomplete("getValue").toString()}else{return b(e).find(".ctrl-init").autocomplete("getText")}};b.unformat.combobox=function(e,j,h,d){var g=[];var i=b(e).text();if(d===true){return i}var f=b.extend({},!b.fmatter.isUndefined(j.colModel.formatoptions)?j.colModel.formatoptions:j.colModel.editoptions),k=f.separator===undefined?":":f.separator,c=f.delimiter===undefined?";":f.delimiter;if(j.colModel.revertCode){return b(e).find(".ctrl-init").combobox("getValue")}else{return b(e).find(".ctrl-init").combobox("getText")}};b.unformat.combotree=function(e,j,h,d){var g=[];var i=b(e).text();if(d===true){return i}var f=b.extend({},!b.fmatter.isUndefined(j.colModel.formatoptions)?j.colModel.formatoptions:j.colModel.editoptions),k=f.separator===undefined?":":f.separator,c=f.delimiter===undefined?";":f.delimiter;if(j.colModel.revertCode){return b(e).find(".ctrl-init").combotree("getValue").toString()}else{return b(e).find(".ctrl-init").combotree("getText")}};b.unformat.textbox=function(e,j,h,d){var g=[];var i=b(e).text();if(d===true){return i}var f=b.extend({},!b.fmatter.isUndefined(j.colModel.formatoptions)?j.colModel.formatoptions:j.colModel.editoptions),k=f.separator===undefined?":":f.separator,c=f.delimiter===undefined?";":f.delimiter;return b(e).find(".ctrl-init").textbox("getValue")};b.unformat.datepicker=function(e,j,h,d){var g=[];var i=b(e).text();if(d===true){return i}var f=b.extend({},!b.fmatter.isUndefined(j.colModel.formatoptions)?j.colModel.formatoptions:j.colModel.editoptions),k=f.separator===undefined?":":f.separator,c=f.delimiter===undefined?";":f.delimiter;
return b(e).find(".ctrl-init").datepicker("getValue")};b.unformat.convertCode=function(e,c,f,d){return b(e).attr("data-org")};b.unformat.select=function(h,s,n,e){var m=[];var q=b(h).text();if(e===true){return q}var l=b.extend({},!b.fmatter.isUndefined(s.colModel.formatoptions)?s.colModel.formatoptions:s.colModel.editoptions),t=l.separator===undefined?":":l.separator,d=l.delimiter===undefined?";":l.delimiter;if(l.value){var f=l.value,r=l.multiple===true?true:false,p=[],o;if(r){p=q.split(",");p=b.map(p,function(i){return b.trim(i)})}if(b.fmatter.isString(f)){var c=f.split(d),g=0;for(var k=0;k<c.length;k++){o=c[k].split(t);if(o.length>2){o[1]=b.map(o,function(u,j){if(j>0){return u}}).join(t)}if(r){if(b.inArray(o[1],p)>-1){m[g]=o[0];g++}}else{if(b.trim(o[1])==b.trim(q)){m[0]=o[0];break}}}}else{if(b.fmatter.isObject(f)||b.isArray(f)){if(!r){p[0]=q}m=b.map(p,function(j){var i;b.each(f,function(u,v){if(v==j){i=u;return false}});if(typeof(i)!="undefined"){return i}})}}return m.join(", ")}else{return q||""}};b.unformat.date=function(d,c){return b(d).attr("data-org");var e=b.grid.formatter.date||{};if(!b.fmatter.isUndefined(c.formatoptions)){e=b.extend({},e,c.formatoptions)}if(!b.fmatter.isEmpty(d)){return b.fmatter.util.DateFormat(e.newformat,d,e.srcformat,e)}else{return b.fn.fmatter.defaultFormat(d,c)}};b.unformat.checkbox=function(e,d){var f=b.extend({},!b.fmatter.isUndefined(d.colModel.formatoptions)?d.colModel.formatoptions:d.colModel.editoptions);var c=(f.value)?f.value.split(":"):["Yes","No"];return b("input",e).is(":checked")?c[0]:c[1]}})(jQuery);

(function(a,b){a.component("coral.textbox",a.coral.control,{version:a.coral.version,castProperties:["dataCustom","title","buttons","buttonOptions","triggers"],options:{swfPath:a.coral.contextPath+"/jquery-cui/resource/uploadify.swf",hasTips:false,showStar:true,showClose:false,dataCustom:null,value:"",formatter:"simple",readonly:false,disabled:false,required:false,isLabel:false,title:null,buttons:[],errMsg:null,errMsgPosition:"leftBottom",placeholder:"",type:"text",labelField:null,starBefore:false,onClick:null,onChange:null,onBlur:null,onFocus:null,onKeyDown:null,onKeyUp:null,onKeyPress:null,onEnter:null,onmouseenter:null,onmouseleave:null,onCreate:null,onValidSuccess:null,onValidError:null,onValidWarn:null,onUploadSuccess:null,buttonOptions:null,triggers:null,excluded:false},button:function(){if(null!==this.options.buttonOptions){return this.$button}},component:function(){return this.uiTextbox},focus:function(){if(this.options.disabled||this.options.isLabel||this.options.readonly){return false}if("hidden"==this.element.attr("type")){return}var c=this;this.element.focus();return true},_create:function(){var c=this;if(c.options.hasTips){c.options.title=true}if("hidden"!==this.element.attr("type")&&"file"!==this.element.attr("type")&&"password"!==this.element.attr("type")&&"text"!==this.element.attr("type")&&"INPUT"==this.element[0].tagName.toUpperCase()){this.element.attr("type","text")}this.element.addClass("ctrl-form-element");if(this.options.dataCustom){this.element.attr("data-custom",this.options.dataCustom)}this._initElement();this.setValue(this.element.val());this._bindEvents();if(null!==this.options.buttonOptions){this._outerButtons()}c._trigger("onCreate",null,[])},_outerButtons:function(){this.uiDialogOuterButtonPanel=a('<span class="coral-outerbuttonset coral-corner-all "></span>');this.component().append(this.uiDialogOuterButtonPanel);this._createButtons(this.options.buttonOptions,null,this.uiDialogOuterButtonPanel);this.component().css("padding-right",this.uiDialogOuterButtonPanel.outerWidth()+8)
},_getButtonEl:function(){return a("<button type='button'></button>").addClass("coral-textbox-button")},_initSimple:function(){var c=this,d=c.element.uniqueId().attr("id")},_initUpload:function(){var c=this,d=c.element.uniqueId().attr("id");c.select=[];a(this.element).wrap('<span class="coral-file-default"></span>').before("<span class='coral-file'>...</span>").before("<div id='"+d+"_upload'></div>").before("<div id='"+d+"_queue'></div>").hide();c.uploader=a("#"+d+"_upload");c.uploader.uploadify({swf:this.options.swfPath,uploader:c.options.uploadUrl,queueID:d+"_queue",height:"28",width:"800",buttonText:"",onDialogOpen:function(){c.select=[]},onDialogClose:function(){},onSelect:function(e){c.select.push(e.name);c.uiTextbox.find(".coral-file").html(c.select.join(","));c.uiTextbox.find("object").attr("title",c.select.join(","))},onCancel:function(e){},onQueueComplete:function(e){setTimeout(function(){a("#"+d+"_queue").dialog("close");c.select=[]},3500)},onUploadSuccess:function(f,g,e){c._trigger("onUploadSuccess",null,[{file:f,data:g,response:e}])},auto:false});a("#"+d+"_queue").dialog({autoOpen:false,modal:false,resizable:false,onOpen:function(){c.uploader.uploadify("upload","*")}})},upload:function(c){var d=this;var e=d.element[0].id;if(this.select.length==0){return}a("#"+e+"_queue").dialog("open")},cancel:function(c){this.uploader.uploadify("cancel")},clear:function(c){this.select=[];this.uiTextbox.find(".coral-file").html("...");this.uiTextbox.find("object").attr("title","...");this.uploader.uploadify("cancel")},_getIcon:function(g){var c=[];if(typeof g==="undefined"||g==null||g==""){return[]}if(typeof g=="object"){for(var f in g){var h={};h[g[f].icon]=g[f].click;c.push(h)}}else{var e=a.trim(g).split(",");for(var f in e){var d=e[f].split(" ");var h={};h[d[0]]=d[1];c.push(h)}}return c},_triggerClick:function(c,e,f){var d=this;var g=a.coral.toFunction(c);e=a.Event(e);return g.apply(d.element[0],[e].concat(f))},_updateLabel:function(c){this.uiLabel.html(c)},_initElement:function(){var g=this,d=g.options;
this.uiTextbox=a('<span class="coral-textbox"><span class="coral-textbox-border coral-corner-all"></span></span>').insertAfter(g.element);g.elementBorder=g.uiTextbox.find(".coral-textbox-border");g.element.appendTo(g.elementBorder);g.element.addClass("coral-textbox-default coral-validation-textbox");if(this.options.buttons.length>0){this._createButtonPanel()}if(d.labelField){this.uiLabel=a('<label class="coral-label">'+d.labelField+"</label>");this.elementBorder.before(this.uiLabel);this.uiTextbox.addClass("coral-hasLabel")}if("hidden"==this.element.attr("type")){g.uiTextbox.hide()}if("TEXTAREA"==this.element[0].tagName){g.element.addClass("coral-textbox-textarea")}else{g.element.addClass("coral-textbox-input")}if("file"==g.element.attr("type")){if("uploadify"==g.options.formatter){g._initUpload()}if("simple"==g.options.formatter){g._initSimple()}}var c=[],f=null;if((c=g._getIcon(g.options.icons)).length!=0){f=true}else{if((c=g._getIcon(g.options.texticons)).length!=0){f=false}}if(f!=null){this.uiDialogButtonPanel=a('<span class="coral-textbox-btn-icons coral-corner-right"></span>');g.elementBorder.append(this.uiDialogButtonPanel);for(var e in c){a.each(c[e],function(h,j){var i=a('<span class="coral-textbox-btn-ico icon"></span>');if(f){i.addClass(h)}else{i.addClass("coral-textbox-btn-textico").html(h)}i.bind("click"+g.eventNamespace,function(k){if(g.options.disabled){return}g._triggerClick(j,k,[{value:g.element.val()}])});g.uiDialogButtonPanel.append(i)})}}if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name")}else{if(this.options.name){this.element.attr("name",this.options.name)}}if("TEXTAREA"==this.element[0].tagName){if(a.trim(this.element.text())!=""){this.options.value=this.element.text()}else{if(this.options.value){this.element.text(this.options.value)}}}else{if(a.trim(this.element.val())!=""){this.options.value=this.element.val()
}else{if(this.options.value){this.element.val(this.options.value)}}}if(d.width!==""&&d.width!==b){this.uiTextbox.css("width",d.width)}if(d.height!==""&&d.height!==b){this._setOption("height",d.height)}if(typeof this.element.attr("readonly")!="undefined"){this.options.readonly=this.element.prop("readonly")}else{if(this.options.readonly){this.element.prop("readonly",this.options.readonly)}}if(this.element.prop("readonly")){this.component().addClass("coral-readonly")}if(typeof d.isLabel=="boolean"&&d.isLabel){this.element.prop("readonly",true);this.options.readonly=true;this.component().addClass("coral-isLabel");return}if(typeof d.disabled==="boolean"){this._setOption("disabled",d.disabled)}if(this.options.showClose){this.uiClose=a("<span class='coral-textbox-close icon icon-close2'></span>");this.elementBorder.append(this.uiClose);this.uiClose.css("right",this.uiDialogButtonPanel?this.uiDialogButtonPanel.outerWidth():0)}this.element.attr("placeholder",d.placeholder);if(d.placeholder&&""==this.element.val()){this._showPlaceholder()}this._updateTitle();this._refresh()},_updateTitle:function(){var d=this,c=this.options;if(c.title==true){d.element.attr("title",d.element.val())}else{if(c.title==false){d.element.attr("title","")}else{d.element.attr("title",c.title)}}},_showPlaceholder:function(){if(a.support.placeholder){return}var d=this,c=a("<span class='coral-textbox-placeholder-label'>"+d.options.placeholder+"</span>");a(d.element).after(c)},_hidePlaceholder:function(){if(a.support.placeholder){return}var c=this;c.uiTextbox.find(".coral-textbox-placeholder-label").remove()},_bindEvents:function(){var e=this,d=this.options;var c;this._on({"mouseenter.coral-textbox-border":function(f){if(typeof d.isLabel=="boolean"&&d.isLabel){return}if(typeof d.readonly=="boolean"&&d.readonly){return}e.component().addClass("coral-textbox-hover");this._trigger("onmouseenter",f,[])},"mouseleave.coral-textbox-border":function(f){if(typeof d.isLabel=="boolean"&&d.isLabel){return}if(typeof d.readonly=="boolean"&&d.readonly){return
}e.component().removeClass("coral-textbox-hover");this._trigger("onmouseleave",f,[])},click:function(f){this._trigger("onClick",f,[])},dblclick:function(f){this._trigger("onDblClick",f,[])},blur:function(g){this.component().removeClass("coral-state-focus");var h=a(e.element).attr("name"),f=a(e.element).val();if(""==this.element.val()){this._showPlaceholder()}if(c){c=false;return}this.setValue(this.element.val(),true);this._trigger("onBlur",g,[])},focus:function(f){this._trigger("onFocus",f,[]);if(d.isLabel||d.readonly){return}this.component().addClass("coral-state-focus")},keydown:function(f){if(d.isLabel||d.readonly){return}if(false==this._trigger("onKeyDown",f,[{value:this.element.val(),id:this.options.id}])){return false}this._hidePlaceholder();d.value=this.element.val()},keypress:function(f){if(d.isLabel||d.readonly){return}if(false==this._trigger("onKeyPress",f,[{value:this.element.val()}])){return false}if(f.keyCode==13&&d.onEnter){this._trigger("onEnter",f,[{value:this.element.val()}])}d.value=this.element.val()},keyup:function(f){if(d.isLabel||d.readonly){return}if(false==this._trigger("onKeyUp",f,[{value:this.element.val(),id:this.options.id}])){return false}this._keyup(f);d.value=this.element.val()},change:function(f){if(d.isLabel||d.readonly){return}},"click.coral-textbox-close":function(f){f.preventDefault();this.setValue("",true);if(this.options.placeholder){this._showPlaceholder()}this._trigger("onCloseClick",event,[])},"mousedown.coral-textbox-close":function(f){f.stopPropagation();c=true}})},_keyup:function(d){var c=this.options;if(c.disabled){return}return},_refresh:function(){var d=this,c=this.options},_setOption:function(f,h){var g=this;if(f==="id"||f==="name"||f==="type"){return}if(f==="labelField"){g._super(f,h);g._updateLabel(h);return}if(f==="title"){g._super(f,h);g._updateTitle();return}if(f==="hasTips"){g._super(f,h);g._updateTitle();return}if(f==="required"){g._super(f,h);return}if(f==="showStar"){if(typeof g.options.required==="boolean"&&!g.options.required){return
}g._super(f,h);return}if(f==="height"){this._super(f,h);if(h){this.element.outerHeight(h);this.uiTextbox.find(".coral-textbox-btn-textico").css({"line-height":(h-6)+"px",height:h+"px"})}return}if(f==="width"){if(typeof this.options.isLabel==="boolean"&&this.options.isLabel){return}this._super(f,h);if(h){this.uiTextbox.css("width",this.options.width)}return}if(f==="placeholder"){this._super(f,h);this.element.attr("placeholder",this.options.placeholder);if(this.getValue()==""){this._showPlaceholder()}}this._super(f,h);if(f=="texticons"){var d=g._getIcon(g.options.texticons);var c=a('<span class="coral-textbox-btn-icons coral-corner-right"></span>');g.elementBorder.find(".coral-textbox-btn-icons").replaceWith(c);for(var e in d){a.each(d[e],function(i,k){var j=a('<span class="coral-textbox-btn-ico icon"></span>').addClass("coral-textbox-btn-textico").html(i);j.bind("click"+g.eventNamespace,function(l){if(g.options.disabled){return}g._triggerClick(k,l,[{value:g.element.val()}])});c.append(j)})}}if(f==="value"){g._updateTitle();g.setValue(h)}if(f==="isLabel"){if(typeof h=="boolean"&&h){this.element.prop("readonly",true);this.component().removeClass("coral-readonly").addClass("coral-isLabel")}else{if(typeof h=="boolean"&&!h){this.element.prop("readonly",false);this.options.readonly=false;this.component().removeClass("coral-isLabel coral-readonly");if(typeof this.options.required=="boolean"&&this.options.required&&this.options.showStar){}}}return}if(f==="readonly"){if(typeof h=="boolean"&&h){a.validate.hideErrors(this.component());this.element.prop("readonly",true);this.component().removeClass("coral-isLabel").addClass("coral-readonly")}else{if(typeof h=="boolean"&&!h){this.element.prop("readonly",false);this.component().removeClass("coral-isLabel coral-readonly")}}return}if(f==="disabled"){if(h){a.validate.hideErrors(this.component());this.element.prop("disabled",true)}else{this.element.prop("disabled",false)}return}},_destroy:function(){this.uiTextbox.replaceWith(this.element);
this.element.removeClass("coral-textbox-default").removeClass("coral-validation-textbox").removeClass("coral-textbox-hover").removeClass("coral-textbox-textarea").removeClass("coral-textbox-input").removeAttr("placeholder").removeAttr("title").removeAttr("readonly").removeAttr("disabled")},disable:function(){this._setOption("disabled",true)},enable:function(){this._setOption("disabled",false)},getHtml:function(){return this.element.text()},setHtml:function(){this.element.text(value);this._updateTitle()},getValue:function(){if(this.element.is("textarea")){return this.element.text()}else{return this.element.val()}},setValue:function(d,c){if(this.element.is("textarea")){this.element.val(d);this.element.text(d)}else{this.element.val(d)}if(c&&this.previous!=d){this._trigger("onChange",null,[{value:d}])}this.previous=d;this._updateTitle();if(d!=""){this._hidePlaceholder()}},formValue:function(){var d={},c=this.element.attr("name");if(!c){return null}d[c]=this.getValue();return d}})})(jQuery);

(function(a,b){a.component("coral.toolbar",{version:"4.0.2",castProperties:["data","dataCustom","dropdownOptions"],options:{clickToDisplay:1,id:null,name:null,dataCustom:{},disabled:false,cls:null,url:null,method:"get",data:null,width:null,height:null,isOverflow:true,dropdownOptions:{button:{text:false,label:""},panelPosition:{my:"right top",at:"right bottom"},atGroup:0},align:0,autoDisplay:false,margin:5,onCreate:null,onClick:null,onLoad:null},_jion:function(e,d){var c=[];a.each(e,function(f,g){c.push(a(g))});a.each(d,function(f,g){c.push(a(g))});return c},_hideMenus:function(){a(".coral-tieredmenu").hide()},_create:function(){var c=this;this.groupLength=1;this._initElements();this._bindEvents()},_bindEvents:function(){var c=this;this._on(this.document,{mousedown:function(d){if(c.options.clickToDisplay==1&&c.options.autoDisplay){c.uiBox.toggleClass("coral-toolbar-click-active",false)}}})},_initElements:function(){var d=this,c=this.options;this.uiBox=a('<div class="coral-toolbar"></div>');this.uiBorder=a('<div class="coral-toolbar-border"></div>');this.uiBox.append(this.uiBorder);this.uiBox.insertAfter(this.element);this.element.appendTo(this.uiBorder);this.element.addClass("ctrl-init ctrl-init-toolbar");if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name")}else{if(this.options.name){this.element.attr("name",this.options.name)}}this.uiAfter=a("<button type='button' data-frozen='true' class='coral-toolbar-after-element ctrl-toolbar-element'></button>").menubutton({label:this.options.dropdownOptions.button.label,text:this.options.dropdownOptions.button.text,renderType:"button",icons:"icon-arrow-down2 right",data:[],position:this.options.dropdownOptions.panelPosition});this.uiAfter.menubutton("component").addClass("coral-toolbar-item-component coral-toolbar-after");this.uiAfter.menubutton("hide");
this._loadData();if(this.options.clickToDisplay==0){this.uiBox.addClass("coral-toolbar-click-active")}},_loadData:function(){var d=this,c=this.options;if(c.url){a.ajax({type:c.method,url:c.url,data:{},dataType:"json",success:function(e){d._initData(e)},error:function(){a.alert("Json Format Error!")}})}else{if(c.data){this._initData(c.data)}}},_initData:function(d){var c=this;if(typeof d==="object"){this._addItems(null,d);this._trigger("onLoad",null,{});this.isLoaded=true;this._setFrozenElements();this._position()}if(this.options.disabled){this._setDisabled(this.options.disabled)}},_addItems:function(g,d,l){if(typeof d!=="object"){return}var f=this,j=[],h=d.length;for(var e=0;e<h;e++){var c=d[e];if(c==""||!a.isEmptyObject(c)){j.push(f._createItem(c))}}this._appendItems(g,j,l);this._initItems(j);if(!this.element.find(".coral-toolbar-after-element").length){var m=this._getGroupNameByIndex(this.options.dropdownOptions.atGroup);var k=this.element.find("[group-role='"+m+"']");if(k.length){k.after(this.uiAfter.menubutton("component"))}else{this.element.append(this.uiAfter.menubutton("component"))}}},_createItem:function(c){var h=this,i=c,f=c.type||"button",g=null;if(c==="-"){f="seperator"}else{if(c==="->"){f="grouper"}else{if(c===""){f="blank"}else{if(c==="more"){f="more"}}}}var e=this._createEl(f);g=c;if(f==="button"&&typeof c.icon!=="undefined"&&c.icon!=""){var d=this._getIcon(c.icon);delete g.icon;if(null!=d.ico1&&null==d.ico2){g.icons=d.ico1}else{if(null==d.ico1&&null!=d.ico2){g.icons=d.ico2+" right"}else{if(null!=d.ico1&&null!=d.ico2){g.icons=d.ico1+" left, "+d.ico2+" right"}}}}return{$el:e,coralType:f,options:g}},_align:function(){if(this.groupLength!=1){return}var d=this.options;if(d.align=="center"){var c=this._createEl("grouper").attr("grouper-role","center"),e=this._createEl("grouper").attr("grouper-role","right");this.element.prepend(c);this.element.find("[group-role='left']").removeClass("group-left").addClass("group-center").attr("group-role","center");this.element.find(".ctrl-toolbar-element").attr("group","center");
this.element.append(e)}else{if(d.align=="right"){var e=this._createEl("grouper").attr("grouper-role","right");this.element.find("[group-role='left']").removeClass("group-left").addClass("group-right").attr("group-role","right");this.element.find(".ctrl-toolbar-element").attr("group","right");this.element.prepend(e)}}},_appendItems:function(m,o,q){var l=this;if(!this.isLoaded){var n=0;var c=l._createGrouper(n,this.groupLength);this.element.append(c);a.each(o,function(j,k){if(k.coralType=="grouper"){n+=1;c=l._createGrouper(n,l.groupLength);l.element.append(k.$el.attr("grouper-role",c.attr("group-role")));l.element.append(c)}else{c.append(k.$el.attr("group",c.attr("group-role")));if(k.options&&k.options.frozen==true){k.$el.attr("data-frozen",true)}}});this._align()}else{var r=this._getGroupNameByIndex(q);var p=this.element.find("[group-role='"+r+"']");var e=p.find(".ctrl-toolbar-element:not(.coral-toolbar-separator)").length;if(null==m||m==e){for(var h in o){o[h].$el.attr("group",r);o[h].$el.appendTo(p)}}else{if(m==0){for(var g in o){o[g].$el.attr("group",r);o[g].$el.prependTo(p)}}else{for(var f in o){o[f].$el.attr("group",r);var d=p.find(".ctrl-toolbar-element:eq("+m+")").attr("component-role");p.find(".ctrl-toolbar-element:eq("+m+")")[d]("component").before(o[f].$el)}}}}},_initItems:function(c){var h=this;for(var f in c){if(c[f].coralType==="seperator"||c[f].coralType==="grouper"||c[f].coralType==="blank"||c[f].coralType==="more"){continue}var e=c[f].$el,j=c[f].coralType.toLowerCase(),g=c[f].options;g.componentCls="coral-toolbar-item-component";if(c[f].coralType==="html"){e.attr("id",g.id).append(g.content);continue}e[j](g);var d={};d[j+"onclick"]=function(k,i){h._trigger("onClick",k,i)};h._on(e,d)}},_createEl:function(d){var c;switch(d){case"button":c=a("<button type='button'></button>");break;case"checkbox":c=a("<input type='checkbox' />");break;case"textbox":case"combobox":c=a("<input type='text' />");break;case"splitbutton":case"menubutton":c=a("<button type='button'></button>");
break;case"seperator":c=a("<div class='coral-toolbar-item-component coral-toolbar-separator coral-toolbar-separator-horizontal'></div>");break;case"grouper":this.groupLength+=1;c=a("<div class='coral-toolbar-item-component coral-toolbar-grouper'></div>");break;case"html":c=a("<div class='coral-toolbar-item-component coral-toolbar-html'></div>");break;case"blank":c=a("<span class='coral-toolbar-item-component coral-toolbar-blank'></span>");break;case"more":c=this.uiAfter.menubutton("component");return c;break;default:c=a("<span class='coral-toolbar-item-component'></span>");break}return c.addClass("ctrl-toolbar-element")},_createGrouper:function(c,d){var e=a();if(d==1||d==3){switch(c){case 0:e=a("<span class='coral-toolbar-group group-left' group-role='left'></span>");break;case 1:e=a("<span class='coral-toolbar-group group-center' group-role='center'></span>");break;case 2:e=a("<span class='coral-toolbar-group group-right' group-role='right'></span>");break;default:e=a("<span class='coral-toolbar-group' group-role='default'></span>");break}}else{if(d==2){switch(c){case 0:e=a("<span class='coral-toolbar-group group-left' group-role='left'></span>");break;case 1:e=a("<span class='coral-toolbar-group group-right' group-role='right'></span>");break;default:e=a("<span class='coral-toolbar-group' group-role='default'></span>");break}}}return e},_getGroupNameByIndex:function(c){if(typeof c!=="number"){return"left"}if(this.groupLength==1){return"left"}else{if(this.groupLength==2){return c==0?"left":"right"}else{if(this.groupLength==3){switch(c){case 0:return"left";case 1:return"center";case 2:return"right"}}}}},_getGrouper:function(){return this.element.find(".coral-toolbar-grouper")},_resetGrouper:function(){var c=this._getGrouper();if(c.length){c.width(1)}},_resetToolbarItems:function(){var d=this,c=this._getElements(2);this._resetGrouper();a.each(c,function(h,k){var g=a(k),f=d._getComponentByElement(g);f.css({left:""});if(f.hasClass("coral-menubutton-button-item")){var l=g.attr("group"),j=d.element.find("[group-role='"+l+"']");
if(j.find("[data-frozen='true']").length){var e=j.find("[data-frozen='true']:eq(0)");var m=d._getComponentByElement(e);m.before(f.removeClass("coral-menubutton-button-item"))}else{j.append(f.removeClass("coral-menubutton-button-item"))}}});this.uiAfter.menubutton("hide");this.uiBorder.css({width:"auto"})},_position:function(){if(!this.element.is(":visible")){this._resetToolbarItems();this.component().addClass("coral-toolbar-initHidden");return}else{this.component().removeClass("coral-toolbar-initHidden")}var d=this,c=this.options;this._resetGrouper();this.totalWidth=this._totalWidth();if(c.isOverflow&&this.uiBox.width()>0){this.uiBorder.width(this.uiBox.width())}else{this.uiBorder.width(Math.max(this.totalWidth,this.uiBox.width()))}if(this._toolbarWidth()-this.totalWidth<0){this.uiAfter.menubutton("show")}else{this.uiAfter.menubutton("hide")}this._positionItems(this.element)},_positionItems:function(c){var e=this,d=this.options,h=this.options.margin,g=false,i=0,f=a(),j={right:"auto"};this._prePosition();this.element.find(".coral-toolbar-item-component:not(.coral-state-hidden)").each(function(k,l){var m=a(l);if(g){return true}if(f.length){i=i+f.outerWidth()+h}j.left=i+"px";m.css(j);f=m});this._handlerDropdownItems()},_handlerDropdownItems:function(){var d=this,c=this._filter(this._getElements(0),".ctrl-init-splitbutton,.ctrl-init-menubutton");d._hideMenus();a.each(c,function(h,j){var g=a(j),f=d._getComponentByElement(g);try{switch(g.attr("component-role")){case"splitbutton":if(f.hasClass("coral-menubutton-button-item")){g.splitbutton("menu").tieredmenu("option",{my:"left top",at:"right top",of:g.splitbutton("uiDropdownButton")})}else{g.splitbutton("menu").tieredmenu("option",{my:"left top",at:"left bottom",of:g})}break;case"menubutton":if(f.hasClass("coral-menubutton-button-item")){g.menubutton("menu").tieredmenu("option",{my:"left top",at:"right top"})}else{g.menubutton("menu").tieredmenu("option",{my:"left top",at:"left bottom",})}break;default:break}}catch(e){console.log(" There is a error happened.")
}finally{}})},_getComponentByElement:function(d){var c=a(),e=d.attr("component-role");if(e){c=d[e]("component")}else{c=d}return c},_filter:function(d,c){var e=[];a.each(d,function(g,h){var f=a(h);if(f.is(c)){e.push(f)}});return e},_prePosition:function(){var d=this,c=this.options,h=this.options.margin,j=0,g=false,i=[],f=a(),e=[];if(this.uiAfter.is(":visible")){e=this._getElements(3)}else{e=this._getElements(2)}var e=this._jion(d._getFrozenElements(),d._filter(e,":not([data-frozen='true'])"));a.each(e,function(n,p){var m=d._getComponentByElement(a(p));var l=!m.hasClass("coral-menubutton-button-item");if(g){if(!l){return true}if(m.hasClass("coral-toolbar-grouper")||a(p).attr("data-frozen")=="true"){return true}i.push(m);return true}if(f.length){j=j+f.outerWidth()+h}if(!l){var o=d.element.find("[group-role='"+a(p).attr("group")+"']");if(o.attr("group-role")==a(p).attr("group")&&o.find("[data-frozen='true']").length){var k=o.find("[data-frozen='true']:eq(0)");if(k.attr("component-role")){k[k.attr("component-role")]("component").before(m.removeClass("coral-menubutton-button-item"))}else{k.before(m.removeClass("coral-menubutton-button-item"))}}else{m.removeClass("coral-menubutton-button-item").appendTo(o)}}if(j+m.outerWidth()>d._toolbarWidth()){g=true;if(m.hasClass("coral-toolbar-grouper")||a(p).attr("data-frozen")=="true"){return true}if(l){i.push(m)}else{d.uiAfter.menubutton("prepend",m)}return true}f=m});if(!this.isLoaded){d.uiAfter.menubutton("append",i)}else{d.uiAfter.menubutton("prepend",i)}this._setGrouperWidth()},_setGrouperWidth:function(){var h=this._getGrouper();var d=(this._toolbarWidth()-this._totalWidth(true,this.uiAfter.is(":visible"))-this.options.margin);var g=this._getWidthByGroupRole("left");var e=this._getWidthByGroupRole("right");var c=(d-g+e)/2;var f=(d-c);if(d<0){h.width(1);return}if(h.length==1){h.width(d)}else{if(h.length==2){if(c>0&&f>0&&!this.uiAfter.is(":visible")){a(h[0]).width(c+1);a(h[1]).width(f+1)}else{a(h[1]).width(d+1);a(h[0]).width(1)}}}},_getWidthByGroupRole:function(g){var f=this.options,e=0,d=this.element.find("[group-role='"+g+"']"),c=d.find(".coral-toolbar-item-component");
if(!d.length||!c.length){return 0}a.each(c,function(k,j){var h=a(j);e+=h.outerWidth()+f.margin;if(k==c.length-1){e-=f.margin}});return e},_toolbarWidth:function(){return this.uiBorder.innerWidth()},_setFrozenElements:function(){var d=this._getElements(3),c=false;a.each(d,function(f,g){var e=a(g);if(e.hasClass("coral-toolbar-after-element")){c=true}if(c&&!e.hasClass("coral-toolbar-grouper")){e.attr("data-frozen",true)}})},_getFrozenElements:function(){if(this.uiAfter.is(":visible")){return this.element.find("[data-frozen='true']")}else{return this.element.find("[data-frozen='true']:not(.coral-toolbar-after-element)")}},_getElements:function(d){var c=a(),e=this.element.find(".ctrl-toolbar-element"),f=this.uiAfter.menubutton("buttons").find(".ctrl-toolbar-element");c=this._jion(e,f);switch(d){case 0:c=this._filter(c,":not(.coral-toolbar-after-element,.coral-toolbar-grouper,.coral-toolbar-separator)");break;case 1:c=this._filter(c,":not(.coral-toolbar-after-element,.coral-toolbar-grouper)");break;case 2:c=this._filter(c,":not(.coral-toolbar-after-element)");break;case 3:break;default:break}return c},_getComponents:function(e,c){var d=a(),f=this.element.find(".coral-toolbar-item-component"),g=this.uiAfter.menubutton("buttonElements");d=this._jion(f,g);e=e||1;switch(e){case 0:d=this._filter(d,":not(.coral-toolbar-after,.coral-toolbar-grouper,.coral-toolbar-separator)");break;case 1:d=this._filter(d,":not(.coral-toolbar-after,.coral-toolbar-grouper)");break;case 2:d=this._filter(d,":not(.coral-toolbar-after)");break;case 3:break;default:break}if(!c){$itemAll=this._filter(d,".coral-state-hidden")}return d},getTotalWidth:function(c){return this._totalWidth(c)},_totalWidth:function(e,d){var g=this,f=this.options,c=0;var i=a();if(d){i=this.element.find(".coral-toolbar-item-component:not(.coral-state-hidden)")}else{i=this.element.find(".coral-toolbar-item-component:not(.coral-state-hidden,.coral-toolbar-after)")}var h=this.uiAfter.menubutton("buttons").find(".coral-toolbar-item-component:not(.coral-state-hidden)");
i.each(function(k,l){var j=a(l);c=c+j.outerWidth()+f.margin;if(k==i.length-1&&!h.length){c=c-f.margin}});if(e){return c-f.margin}this.uiAfter.menubutton("showPanel");h.each(function(k,l){var j=a(l);c=c+j.outerWidth()+f.margin;if(k==h.length-1){c=c-f.margin}});this.uiAfter.menubutton("hidePanel");return c},_getIcon:function(f){var e={ico1:null,ico2:null},d=[],c;if(f==null){return e}c=a.trim(f);if(c.indexOf(",")>=0){d=c.split(",");e.ico1=d[0]==""?null:d[0];e.ico2=d[1]==""?null:d[1]}else{e.ico1=c}return e},getLength:function(){return this._getElements(0).length},isExist:function(c){return this._getSubCoral(c)?true:false},_getGroupElementsLength:function(d){if(typeof d!=="number"||d>(this.groupLength-1)){return}var e=this._getGroupNameByIndex(d);var c=this.element.find("[group-role='"+e+"']");return c.find(".ctrl-toolbar-element:not(.coral-toolbar-separator)").length},add:function(d,g,f){if(typeof g!=="object"){return}if(typeof d==="string"){return this._addByParentId(d,g)}var f=f||0;var e=this,c=parseInt(d);if(((null!=d)&&isNaN(c))||c<0||c>this._getGroupElementsLength(f)){return}if(!a.isArray(g)){g=[g]}if(0==this._getGroupElementsLength(f)){d=null}this._addItems(d,g,f);this._refresh()},_addByParentId:function(c,f){var e=this._getSubCoral(c);if(e){var d=e.$el;switch(e.type){case"splitbutton":d.splitbutton("menu").tieredmenu("add",null,f);break;case"menubutton":d.menubutton("menu").tieredmenu("add",null,f);break;case"tieredmenu":d.tieredmenu("add",c,f);break;default:break}}},getSubCoral:function(c){var d=this;if(typeof c==="string"){return d._getSubCoral(c)}else{return d._getSubCoralByIndex(c)}},_getSubCoralByIndex:function(d){var e=this,c=parseInt(d);if(isNaN(c)||c<0||c>(this.getLength()-1)){return false}return e._getSubCoral(c)},_findElementsByAttr:function(d,c,f){var e=this,g=[];a.each(d,function(h,j){var i=a(j);if(f==i.attr(c)){g.push(i)}});return g},_getSubCoral:function(c){var e=this,k=this._findElementsByAttr(this._getElements(0),"id",c),g=null,i=this._findElementsByAttr(this._getElements(0),"component-role","splitbutton"),f=this._findElementsByAttr(this._getElements(0),"component-role","menubutton"),d=null,j=null,h=null;
if(typeof c==="number"){h=a(this._getElements(0)[c]);j={$el:h,type:h.attr("component-role")};return j}if(k.length){j={$el:k[0],type:k[0].attr("component-role")};return j}d=this._findSubCoralInMenuItems(i,c);if(i.length&&d){j={$el:d,type:"tieredmenu"};return j}d=this._findSubCoralInMenuItems(f,c);if(f.length&&d){j={$el:d,type:"tieredmenu"};return j}return j},_findSubCoralInMenuItems:function(d,e){if(!d.length){return}var c=null;a.each(d,function(g,j){var f=a(j),i=f.attr("component-role"),h=a(j)[i]("menu");if(h.find("[data-id='"+e+"']").length){c=h}});return c},removeAll:function(){var c=this;a.each(this._getElements(1),function(d,f){var e=a(f),g=e.attr("component-role");if(g){e[g]("destroy")}e.remove()});this._refresh()},remove:function(c){var d=this;if(typeof c==="string"){this._removeById(c)}else{this._removeByIndex(c)}this._refresh()},_removeById:function(g){var d=this,e=this._getSubCoral(g);if(e){var c=e.$el;if(c.hasClass("coral-toolbar-html")){c.remove();return}switch(e.type){case"tieredmenu":c.tieredmenu("removeItem",g);break;default:var f=c.attr("component-role");c[f]("destroy");c.remove();break}}},_removeByIndex:function(d){var c=parseInt(d);if(isNaN(c)||c<0||c>(this.getLength()-1)){return false}var e=a(this._getElements(0)[c]);var f=e.attr("component-role");if(f){e[f]("component").remove()}e.remove()},update:function(d,c){var e=this;if(typeof d==="string"){e._updateById(d,c)}else{e._updateByIndex(d,c)}this._refresh()},_updateById:function(f,c){var e=this._getSubCoral(f);if(e){var d=e.$el;switch(e.type){case"tieredmenu":d.tieredmenu("updateItem",f,c);break;case"button":d.button("update",c);break;case"splitbutton":d.splitbutton("button").button("update",c);break;case"menubutton":d.menubutton("button").button("update",c);break;default:break}}},_updateByIndex:function(e,d){var c=parseInt(e);if(isNaN(c)||c<0||c>(this.getLength()-1)){return false}var g=this._getSubCoral(e);if(g){var f=g.$el;switch(g.type){case"button":f.button("update",d);break;case"splitbutton":f.splitbutton("button").button("update",d);
break;case"menubutton":f.menubutton("button").button("update",d);break;default:break}}},component:function(){return this.uiBox},_uiBorder:function(){return this.uiBorder},disable:function(){this._setDisabled(true)},enable:function(){this._setDisabled(false)},_setDisabled:function(c){var e=this;var d=this._getElements(0);a.each(d,function(g,h){var f=a(h);if(f.hasClass("coral-toolbar-html")){return true}if(c){f[f.attr("component-role")]("disable")}else{f[f.attr("component-role")]("enable")}});this.options.disabled=!!c},disableItem:function(c){var d=this;if(typeof c==="string"){d._disableItemById(c)}else{d._disableItemByIndex(c)}},_disableItemById:function(g){var d=this,f=this._getSubCoral(g);if(f){var c=f.$el;if(c.hasClass("coral-toolbar-html")){return}switch(f.type){case"tieredmenu":c.tieredmenu("disableItem",g);break;default:var e=a(this._findElementsByAttr(this._getElements(0),"id",g)[0]);if(!e.length){return}e[e.attr("component-role")]("disable");break}}},_disableItemByIndex:function(d){var e=this,c=parseInt(d);if(isNaN(c)||c<0||c>(this.getLength()-1)){return false}var f=a(this._getElements(0)[c]);if(f.hasClass("coral-toolbar-html")){return false}if(!f.length){return false}f[f.attr("component-role")]("disable");return true},enableItem:function(c){var d=this;if(typeof c==="string"){d._enableItemById(c)}else{d._enableItemByIndex(c)}},_enableItemById:function(g){var d=this,f=this._getSubCoral(g);if(f){var c=f.$el;if(c.hasClass("coral-toolbar-html")){return}switch(f.type){case"tieredmenu":c.tieredmenu("enableItem",g);break;default:var e=a(this._findElementsByAttr(this._getElements(0),"id",g)[0]);if(!e.length){return}e[e.attr("component-role")]("enable");break}}},_enableItemByIndex:function(d){var e=this,c=parseInt(d);if(isNaN(c)||c<0||c>(this.getLength()-1)){return false}var f=a(this._getElements(0)[c]);if(f.hasClass("coral-toolbar-html")){return}if(!f.length){return false}f[f.attr("component-role")]("enable");return true},hide:function(c){var d=this;if(typeof c==="string"){d._hideById(c)
}else{d._hideByIndex(c)}this._refresh()},hideAll:function(){var c=this;a.each(this._getElements(1),function(d,f){var e=a(f).attr("component-role");if(e){a(f)[e]("hide")}else{a(f).hide()}});this._refresh()},_hideById:function(g){var d=this,f=this._getSubCoral(g);if(f){var c=f.$el;if(c.hasClass("coral-toolbar-html")){c.hide();return}switch(f.type){case"tieredmenu":c.tieredmenu("hideItem",g);break;default:var e=a(this._findElementsByAttr(this._getElements(0),"id",g)[0]);if(!e.length){return}e[e.attr("component-role")]("hide");break}}},_hideByIndex:function(d){var e=this,c=parseInt(d);if(isNaN(c)||c<0||c>(this.getLength()-1)){return false}var f=a(this._getElements(0)[c]);if(!f.length){return false}if(f.hasClass("coral-toolbar-html")){f.hide();return true}f[f.attr("component-role")]("hide");return true},show:function(c){var d=this;if(typeof c==="string"){d._showById(c)}else{d._showByIndex(c)}this._refresh()},showAll:function(){var c=this;a.each(this._getElements(1),function(d,f){var e=a(f).attr("component-role");if(e){a(f)[e]("show")}else{a(f).show()}});this._refresh()},_showById:function(g){var d=this,f=this._getSubCoral(g);if(f){var c=f.$el;if(c.hasClass("coral-toolbar-html")){c.show();return}switch(f.type){case"tieredmenu":c.tieredmenu("showItem",g);break;default:var e=a(this._findElementsByAttr(this._getElements(0),"id",g)[0]);if(!e.length){return}e[e.attr("component-role")]("show");break}}},_showByIndex:function(d){var f=this,c=parseInt(d);if(isNaN(c)||c<0||c>(this.getLength()-1)){return false}var g=a(this._getElements(0)[c]);var e=g.attr("component-role");if(!g.length){return false}if(e){g[e]("show")}else{g.show()}return true},_setOption:function(c,e){var d=this;if(c==="id"||c==="name"){return}if(c==="disabled"){this._setDisabled(e)}this._super(c,e)},refresh:function(){this._refresh()},_refresh:function(){this._position()}});a.fn.toolbar.defaults={width:"auto"}})(jQuery);

/*!
 * 4.0
 * 
 * JS
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 */
(function(a){a.component("coral.subfield",{version:"4.0.1",options:{title:"",lineCls:null,textCls:null,onClick:null},_create:function(){if(!this.element.jquery){this.element=a(this.element)}this.element.addClass("coral-subfield");this.fieldset=a('<fieldset class="coral-subfield-fieldset"></fieldset>').appendTo(this.element);if(this.options.lineCls){this.fieldset.addClass(this.options.lineCls)}this.legend=a('<legend class="coral-subfield-legend">'+this.options.title+"</legend>").appendTo(this.fieldset);if(this.options.textCls){this.legend.addClass(this.options.textCls)}this._bindEvent()},_bindEvent:function(){var b=this;this.legend.bind("click"+this.eventNamespace,function(c){if(b.options.disabled){c.preventDefault();c.stopImmediatePropagation()}else{b._trigger("onClick")}})},_setOption:function(b,c){if(b==="title"){this.setTitle(c)}},_destroy:function(){this.uiTitle.remove()},component:function(){return this.element},show:function(){this.component().show()},hide:function(){this.component().hide()},setTitle:function(b){a("legend",this.fieldset).html(b);this.options.title=b},getTitle:function(){return this.options.title}})})(jQuery);

/*!
 * 4.0.1
 *
 * JS:
 *	   jquery.coral.core.js
 *	   jquery.coral.component.js
 */
(function(f,h){var d,c="coral-button coral-component coral-state-default coral-corner-all",g="coral-button-text-icons coral-button-text-icon-primary coral-button-text-icon-secondary",b="coral-state-focus",e=function(){var i=f(this);setTimeout(function(){i.find(":coral-button").button("refresh")},1)},a=function(j){var i=j.name,k=j.form,l=f([]);if(i){i=i.replace(/'/g,"\\'");if(k){l=f(k).find("[name='"+i+"'][type=radio]")}else{l=f("[name='"+i+"'][type=radio]",j.ownerDocument).filter(function(){return !this.form})}}return l};f.component("coral.button",{version:"4.0.1",defaultElement:"<button>",options:{id:null,name:null,cls:null,disabled:null,text:true,label:null,icons:{primary:null,secondary:null},width:null,onCreate:null,onClick:null,onDblClick:null,onMouseEnter:null,onMouseLeave:null},_create:function(){this.options.icons=this._icons();this.element.addClass("ctrl-init ctrl-init-button");this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,e);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.prop("disabled")}else{this.element.prop("disabled",this.options.disabled)}this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var k=this,i=this.options,l=this.type==="checkbox"||this.type==="radio",j=!l?"coral-state-active":"";if(i.id){this.element.attr("id",i.id)}if(i.name){this.element.attr("name",i.name)}if(i.label===null){i.label=(this.type==="input"?this.buttonElement.val():this.buttonElement.html())}this._hoverable(this.buttonElement);this.buttonElement.addClass(c).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(i.disabled){return}if(this===d){f(this).addClass("coral-state-active")}k._trigger("onMouseEnter",null,{id:this.id,label:k.options.label})}).bind("mouseleave"+this.eventNamespace,function(){if(i.disabled){return}f(this).removeClass(j);k._trigger("onMouseLeave",null,{id:this.id,label:k.options.label})
}).bind("click"+this.eventNamespace,function(m){if(i.disabled){m.preventDefault();m.stopImmediatePropagation()}else{k._trigger("onClick",null,{id:this.id,label:k.options.label});if(typeof i.once=="boolean"&&i.once){k.element.button("disable")}}}).bind("dblclick"+this.eventNamespace,function(m){if(i.disabled){m.preventDefault();m.stopImmediatePropagation()}else{k._trigger("onDblClick",null,{id:this.id,label:k.options.label})}});this._on({focus:function(){this.buttonElement.addClass("coral-state-focus")},blur:function(){this.buttonElement.removeClass("coral-state-focus")}});if(l){this.element.bind("change"+this.eventNamespace,function(){k.refresh()})}if(this.type==="checkbox"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled){return false}})}else{if(this.type==="radio"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled){return false}f(this).addClass("coral-state-active");k.buttonElement.attr("aria-pressed","true");var m=k.element[0];a(m).not(m).map(function(){return f(this).button("component")[0]}).removeClass("coral-state-active").attr("aria-pressed","false")})}else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(i.disabled){return false}f(this).addClass("coral-state-active");d=this;k.document.one("mouseup",function(){d=null})}).bind("mouseup"+this.eventNamespace,function(){if(i.disabled){return false}f(this).removeClass("coral-state-active")}).bind("keydown"+this.eventNamespace,function(m){if(i.disabled){return false}if(m.keyCode===f.coral.keyCode.SPACE||m.keyCode===f.coral.keyCode.ENTER){f(this).addClass("coral-state-active")}}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){f(this).removeClass("coral-state-active")});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(m){if(m.keyCode===f.coral.keyCode.SPACE){f(this).click()}})}}}if(i.width){this.buttonElement.outerWidth(i.width)}this._setOption("disabled",i.disabled);this._resetButton()},_icons:function(){var l=this.options.icons,k=null,n=null,m=null,i=null;
if(l&&typeof l==="string"){k=l.split(",");if(k.length>0){n=f.trim(k[0]);i=j("right",n);if(null===i){m=j("left",n,true)}}if(k.length>1){n=f.trim(k[1]);m=((m===null)?j("left",n):m);if(null===i){i=j("right",n,true)}}}else{return l}function j(p,q,r){var o=q.split(" ");if(f.inArray(p,o)>-1){o=f.grep(o,function(s,t){return s!==p});return o.join(" ")}if(r){return q}return null}return{primary:m,secondary:i}},_determineButtonType:function(){var i,k,j;if(this.element.is("[type=checkbox]")){this.type="checkbox"}else{if(this.element.is("[type=radio]")){this.type="radio"}else{if(this.element.is("input")){this.type="input"}else{this.type="button"}}}if(this.type==="checkbox"||this.type==="radio"){i=this.element.parents().last();k="label[for='"+this.element.attr("id")+"']";this.buttonElement=i.find(k);if(!this.buttonElement.length){i=i.length?i.siblings():this.element.siblings();this.buttonElement=i.filter(k);if(!this.buttonElement.length){this.buttonElement=i.find(k)}}this.element.addClass("coral-helper-hidden-accessible");j=this.element.is(":checked");if(j){this.buttonElement.addClass("coral-state-active")}this.buttonElement.prop("aria-pressed",j)}else{this.buttonElement=this.element}},component:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("coral-helper-hidden-accessible");this.buttonElement.removeClass(c+" ui-state-active "+g).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".coral-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title")}},_setOption:function(i,j){this._super(i,j);if(i==="disabled"){this.component().toggleClass("coral-state-disabled",!!j);this.element.prop("disabled",!!j);if(j){if(this.type==="checkbox"||this.type==="radio"){this.buttonElement.removeClass("coral-state-focus")}else{this.buttonElement.removeClass("coral-state-focus coral-state-active")}}return}this._resetButton()},update:function(i){if(typeof i==="string"){this.element.find(".coral-button-text").html(i)}},refresh:function(){var i=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("coral-button-disabled");
if(i!==this.options.disabled){this._setOption("disabled",i)}if(this.type==="radio"){a(this.element[0]).each(function(){if(f(this).is(":checked")){f(this).button("component").addClass("coral-state-active").attr("aria-pressed","true")}else{f(this).button("component").removeClass("coral-state-active").attr("aria-pressed","false")}})}else{if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("coral-state-active").attr("aria-pressed","true")}else{this.buttonElement.removeClass("coral-state-active").attr("aria-pressed","false")}}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label)}return}var m=this.buttonElement.removeClass(g),k=f("<span></span>",this.document[0]).addClass("coral-button-text").html(this.options.label).appendTo(m.empty()).text(),j=this.options.icons,i=j.primary&&j.secondary,l=[];if(j.primary||j.secondary){if(this.options.text){l.push("coral-button-text-icon"+(i?"s":(j.primary?"-primary":"-secondary")))}if(j.primary){m.prepend("<span class='coral-button-icon-primary icon "+j.primary+"'></span>")}if(j.secondary){m.append("<span class='coral-button-icon-secondary icon "+j.secondary+"'></span>")}if(!this.options.text){l.push(i?"coral-button-icons-only":"coral-button-icon-only");if(!this.hasTitle){m.attr("title",f.trim(k))}}}else{l.push("coral-button-text-only")}m.addClass(l.join(" "))}});f.component("coral.buttonset",{version:"4.0.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(coral-button)"},_create:function(){this.element.addClass("coral-buttonset")},_init:function(){this.refresh()},_setOption:function(i,j){if(i==="disabled"){this.buttons.button("option",i,j)}this._super(i,j)},refresh:function(){var j=this.element.css("direction")==="rtl",i=this.element.find(this.options.items),k=i.filter(":coral-button");i.not(":coral-button").button();k.button("refresh");this.buttons=i.map(function(){return f(this).button("component")[0]
}).removeClass("coral-corner-all coral-corner-left coral-corner-right").filter(":first").addClass(j?"coral-corner-right":"coral-corner-left").end().filter(":last").addClass(j?"coral-corner-left":"coral-corner-right").end().end()},_destroy:function(){this.element.removeClass("coral-buttonset");this.buttons.map(function(){return f(this).button("component")[0]}).removeClass("coral-corner-left coral-corner-right").end().button("destroy")}})}(jQuery));

(function($){var timer=false,resizable=true;$(window).unbind(".coral-panel").bind("resize.coral-panel",function(){$.coral.beforeDoOverflow();if(!resizable){return}if(timer!==false){clearTimeout(timer)}timer=setTimeout(function(){resizable=false;var UI=$(".ctrl-init-layout:visible");if(UI.length){UI.layout("refresh");$.coral.doOverflow()}else{$.coral.refreshAllComponent("body")}timer=false;resizable=true},200)});$.component("coral.panel",{version:"4.0.2",options:{id:null,title:null,iconCls:null,width:"auto",height:"auto",left:null,top:null,cls:null,headerCls:null,bodyCls:null,style:{},href:null,cache:true,fit:false,border:true,doSize:true,noheader:false,content:null,collapsible:false,minimizable:false,maximizable:false,closable:false,collapsed:false,minimized:false,maximized:false,closed:false,tools:null,url:null,loadingMessage:"Loading...",extractor:function(content){var reg=/<body[^>]*>((.|[\n\r])*)<\/body>/im;var match=reg.exec(content);if(match){return match[1]}else{return content}},beforeOpen:$.noop,beforeClose:$.noop,beforeDestroy:$.noop,beforeCollapse:$.noop,beforeExpand:$.noop,onLoad:$.noop,onOpen:$.noop,onClose:$.noop,onDestroy:$.noop,onResize:$.noop,onMove:$.noop,onMaximize:$.noop,onRestore:$.noop,onMinimize:$.noop,onCollapse:$.noop,onExpand:$.noop},_create:function(){this.originalTitle=this.element.attr("title");this.element.removeAttr("title").addClass("ctrl-init ctrl-init-panel");this._createWrapper();this.isLoaded=false;this.element.appendTo(this.uiPanel);this._addHeader();this._setBorder();if(this.options.doSize==true){this.uiPanel.css("display","block");this._doSize()}if(this.options.closed==true||this.options.minimized==true){this.close()}else{this.open()}},_createWrapper:function(){var that=this;this.element.addClass("coral-panel-body");this.uiPanel=$('<div class="coral-panel"></div>').insertBefore(this.element)},_fit:function(fit){return $.coral.panel.fit(this.uiPanel,fit)},_doSize:function(options){var opts=this.options,panel=this.uiPanel,header=panel.children("div.coral-panel-header"),body=panel.children("div.coral-panel-body");
if(options){if(options.width){opts.width=options.width}if(options.height){opts.height=options.height}if(options.left!=null){opts.left=options.left}if(options.top!=null){opts.top=options.top}}opts.fit?$.extend(opts,this._fit()):this._fit(false);panel.css({left:opts.left,top:opts.top});if(!isNaN(opts.width)){panel.outerWidth(opts.width)}else{panel.width("auto")}header.add(body).outerWidth(panel.width());if(!isNaN(opts.height)){panel.outerHeight(opts.height);body.outerHeight(panel.height()-header.outerHeight())}else{body.height("auto")}panel.css("height","");this._trigger("onResize",null,{width:opts.width,height:opts.height});this._doResize()},_setBorder:function(){var opts=this.options,panel=this.uiPanel,header=this.header(),body=this.body();if(!$.isEmptyObject(opts.style)){panel.css(opts.style)}if(opts.border){header.removeClass("coral-panel-header-noborder");body.removeClass("coral-panel-body-noborder")}else{header.addClass("coral-panel-header-noborder");body.addClass("coral-panel-body-noborder")}header.addClass(opts.headerCls);body.addClass(opts.bodyCls)},_addHeader:function(){var opts=this.options,panel=this.uiPanel,that=this;if(opts.tools&&typeof opts.tools=="string"){panel.find(">div.coral-panel-header>div.coral-panel-tool .coral-panel-tool-a").appendTo(opts.tools)}panel.children("div.coral-panel-header").remove();if(opts.title&&!opts.noheader){var title=$('<div class="coral-panel-header"><div class="coral-panel-title">'+opts.title+"</div></div>").prependTo(panel);if(opts.iconCls){title.find(".coral-panel-title").addClass("coral-panel-with-icon");$('<div class="coral-panel-icon"></div>').addClass(opts.iconCls).appendTo(title)}var tool=$('<div class="coral-panel-tool"></div>').appendTo(title);tool.bind("click",function(e){e.stopPropagation()});if(opts.tools){if(typeof opts.tools=="string"){$(opts.tools).children().each(function(){$(this).addClass($(this).attr("iconCls")).addClass("coral-panel-tool-a").appendTo(tool)})}else{for(var i=0;i<opts.tools.length;i++){var t=$('<a href="javascript:void(0)"></a>').addClass(opts.tools[i].iconCls).appendTo(tool);
if(opts.tools[i].handler){t.bind("click",eval(opts.tools[i].handler))}}}}if(opts.collapsible){$('<a class="coral-panel-tool-collapse" href="javascript:void(0)"></a>').appendTo(tool).bind("click",function(){if(opts.collapsed==true){that.expand(true)}else{that.collapse(true)}return false})}if(opts.minimizable){$('<a class="coral-panel-tool-min" href="javascript:void(0)"></a>').appendTo(tool).bind("click",function(){that.minimize();return false})}if(opts.maximizable){$('<a class="coral-panel-tool-max" href="javascript:void(0)"></a>').appendTo(tool).bind("click",function(){if(opts.maximized==true){that.restore()}else{that.maximize()}return false})}if(opts.closable){$('<a class="coral-panel-tool-close" href="javascript:void(0)"></a>').appendTo(tool).bind("click",function(){that.close();return false})}panel.children("div.coral-panel-body").removeClass("coral-panel-body-noheader")}else{panel.children("div.coral-panel-body").addClass("coral-panel-body-noheader")}},_loadData:function(){var opts=this.options,that=this;if(opts.url){if(!that.isLoaded||!opts.cache){that.isLoaded=false;if(opts.loadingMessage){that.element.html($('<div class="coral-panel-loading"></div>').html(opts.loadingMessage))}$.ajax({url:opts.url,cache:false,dataType:"html",success:function(content){that.setContent(opts.extractor.call(that.element,content));that._trigger("onLoad",null,arguments);that.isLoaded=true}})}}else{if(opts.content){if(!that.isLoaded){that.setContent(opts.content);that.isLoaded=true}}}},_doResize:function(){$.coral.refreshAllComponent(this.element)},_destroy:function(forceDestroy){if(forceDestroy!=true){if(this._trigger("beforeDestroy")==false){return}}if(this.originalTitle){this.element.attr("title",this.originalTitle)}this.element.removeClass("coral-panel-body").detach();this.element.insertAfter(this.component());this.component().remove();this._trigger("onDestroy")},component:function(){return this.uiPanel},getOptions:function(){return this.options},header:function(){return this.uiPanel.find(">div.coral-panel-header")
},body:function(){return this.uiPanel.find(">div.coral-panel-body")},setTitle:function(title){this.options.title=title;this.header().find("div.coral-panel-title").html(title)},setContent:function(content){this.element.children().remove();this.element.html(content);if($.parser){$.parser.parse(this.element)}},open:function(forceOpen){var opts=this.options,restore=null;if(forceOpen!=true){if(this._trigger("beforeOpen",null)===false){return}}this.uiPanel.show();opts.closed=false;opts.minimized=false;restore=this.uiPanel.children("div.coral-panel-header").find("a.coral-panel-tool-restore");if(restore.length){opts.maximized=true}this._trigger("onOpen");if(opts.maximized==true){opts.maximized=false;this.maximize()}if(opts.collapsed==true){opts.collapsed=false;this.collapse()}if(!opts.collapsed){this._loadData();this._doResize()}},close:function(forceClose){var opts=this.options;var panel=this.uiPanel;if(forceClose!=true){if(this._trigger("beforeClose",null)==false){return}}this._fit(false);panel.hide();opts.closed=true;this._trigger("onClose")},refresh:function(url){this.isLoaded=false;if(url){this.options.url=url}this._loadData()},reLoad:function(url){this.refresh()},resize:function(options){this._doSize(options)},move:function(options){var opts=this.options;if(options){if(options.left!=null){opts.left=options.left}if(options.top!=null){opts.top=options.top}}this.uiPanel.css({left:opts.left,top:opts.top});this._trigger("onMove",null,{left:opts.left,top:opts.top})},maximize:function(){var opts=this.options;if(opts.maximized==true){return}this.uiPanel.children("div.coral-panel-header").find("a.coral-panel-tool-max").addClass("coral-panel-tool-restore");if(!this.original){this.original={width:opts.width,height:opts.height,left:opts.left,top:opts.top,fit:opts.fit}}opts.left=0;opts.top=0;opts.fit=true;this._doSize();opts.minimized=false;opts.maximized=true;this._trigger("onMaximize")},minimize:function(){this._fit(false);this.uiPanel.hide();this.options.minimized=true;this.options.maximized=false;
this._trigger("onMinimize")},restore:function(){if(this.options.maximized==false){return}this.uiPanel.show();this.uiPanel.children("div.coral-panel-header").find("a.coral-panel-tool-max").removeClass("coral-panel-tool-restore");$.extend(this.options,this.original);this._doSize();this.options.minimized=false;this.options.maximized=false;this.original=null;this._trigger("onRestore")},collapse:function(animate){var opts=this.options,body=this.body(),that=this;if(opts.collapsed==true){return}body.stop(true,true);if(that._trigger("beforeCollapse")==false){return}this.header().find("a.coral-panel-tool-collapse").addClass("coral-panel-tool-expand");if(animate==true){body.slideUp("normal",function(){opts.collapsed=true;that._trigger("onCollapse")})}else{body.hide();opts.collapsed=true;that._trigger("onCollapse")}},expand:function(animate){var opts=this.options,body=this.body(),that=this;if(opts.collapsed==false){return}body.stop(true,true);if(that._trigger("beforeExpand")==false){return}this.header().find("a.coral-panel-tool-collapse").removeClass("coral-panel-tool-expand");if(animate==true){body.slideDown("normal",function(){opts.collapsed=false;that._trigger("onExpand");that._loadData();that._doResize()})}else{body.show();opts.collapsed=false;that._trigger("onExpand");that._loadData();that._doResize()}}});$.coral.panel.fit=function($ele,fit){fit=(fit==undefined?true:fit);var jqUI=$ele.parent()[0];jqUI=$(jqUI);if(fit){if(!jqUI.hasClass("coral-panel-noscroll")){jqUI.addClass("coral-panel-noscroll");if(jqUI.attr("tagName")=="BODY"){$("html").addClass("coral-panel-fit")}}}else{if(jqUI.hasClass("coral-panel-noscroll")){jqUI.removeClass("coral-panel-noscroll");if(jqUI.attr("tagName")=="BODY"){$("html").removeClass("coral-panel-fit")}}}return{width:jqUI.width(),height:jqUI.height()}}})(jQuery);

/*!
 * 4.0
 * 
 * JS
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 *    jquery.coral.panel.js
 *    jquery.validatehelper.js
 *    jquery.coral.control.js
 */
(function(a){a(document).unbind(".coral-combobox").bind("mousedown.coral-combobox mousewheel.coral-combobox",function(g){var f=a(g.target).closest(".coral-combo-panel").length;var h=a(g.target).closest(".coral-combo").length;var d=a(g.target).closest(".coral-button").length;if(f||(h&&!d)){return}a(".coral-combo-wrapper:visible").hide();a(".coral-combo-iframePanel:visible").hide()});a.component("coral.combo",a.coral.control,{castProperties:["triggers"],version:"4.0.2",options:{panelRenderOnShow:false,popupDialog:false,showStar:true,showDirection:null,labelField:null,starBefore:false,isInited:false,id:null,iframePanel:false,buttons:[],name:null,forceSelection:true,width:"auto",height:22,placeholder:"",cls:"",required:false,errMsg:null,errMsgPosition:"leftBottom",isLabel:false,panelWidth:null,panelHeight:"auto",position:{my:"left top",at:"left bottom",collision:"none"},maxPanelHeight:200,multiple:false,separator:",",valueTextSeparator:"-",editable:false,readonly:false,readonlyInput:true,disabled:false,hasDownArrow:true,value:null,delay:200,zIndex:10000,showClose:false,enableFilter:false,enableSearch:false,enterFilter:true,query:null,onKeyUp:null,onKeyDown:null,onEnter:null,onBlur:null,onValidError:null,onValidSuccess:null,onShowPanel:a.noop,onHidePanel:a.noop,onChange:a.noop,triggers:null,excluded:false},_addCacheItem:function(b){if(typeof b!=="object"){return}if(typeof this.cache==="undefined"){this.cache={}}this.cache=a.extend({},this.cache,b)},_getCacheItem:function(b){if(typeof b!=="string"){return}if(this.cache&&this.cache[b]){return this.cache[b]}else{return null}},_removeCacheItem:function(b){if(this.cache&&this.cache[b]){delete this.cache[b]}},_create:function(){this._prepareInit();this._initCombo();this._initState();this._initData();this._bindEvent();this._setDefaultValue()},_prepareInit:function(){this.panelRendered=false;
this.element.hide();if(this.element.attr("id")){if(this.element.attr("id")!=this.options.id){this.options.id=this.element.attr("id")}}else{if(this.options.id){this.element.attr("id",this.options.id)}}if(!this.element.attr("id")){this.options.id=this.element.uniqueId().attr("id")}if(this.element.attr("name")&&this.options.name){if(this.element.attr("name")!=this.options.name){this.options.name=this.element.attr("name")}}else{if(!this.options.name&&this.element.attr("name")){this.options.name=this.element.attr("name")}}},_initCombo:function(){var d=null,c=null,f="",b="";this.uiCombo={combo:null,panel:null,previousValue:null};this.uiCombo.previousValue=null;this.uiCombo.combo=a("<span class='coral-combo coral-textbox'></span>").insertAfter(this.element);this.element.appendTo(this.uiCombo.combo);if(this.options.hasDownArrow){b="<span class='coral-combo-arrow coral-icon-arrow icon icon-arrow-down2'></span>"}if(this.options.showClose&&!this.options.required){f="<span class='coral-combo-close icon icon-close2'></span>"}this.elementBorder=a("<span class='coral-combo-border coral-textbox-border coral-corner-all'>"+f+b+"</span>").appendTo(this.uiCombo.combo);if(this.options.labelField){this.uiLabel=a('<label class="coral-label">'+this.options.labelField+"</label>");this.elementBorder.before(this.uiLabel);this.uiCombo.combo.addClass("coral-hasLabel")}this.uiCombo.textbox=a("<input type='text' autocomplete='off' class='coral-combo-text coral-combo-default coral-textbox-default'>").appendTo(this.elementBorder);var e="";if(this.options.name){this.element.removeAttr("name").attr("orgname",this.options.name);e=" name='"+this.options.name+"'"}c=a("<input type='hidden' "+e+" class='coral-combo-value'>").appendTo(this.uiCombo.combo);this.uiCombo.panel=a("<div class='coral-combo-panel'></div>").appendTo("body");if(this.options.iframePanel){this.uiCombo.iframePanel=a("<iframe class='coral-combo-iframePanel' style='position:absolute;height:auto;'></iframe>").appendTo("body")}this.uiCombo.pContent=a("<div class='coral-combo-content'></div>").appendTo(this.uiCombo.panel);
if(this.options.enableFilter){a("<div class='coral-combo-filter'><span class='coral-combo-filter-border'><input type='text' class='coral-combo-filterbox'></span><span class='coral-combo-search icon icon-search3'></span></div>").appendTo(this.uiCombo.panel)}var g="absolute";if(this.options.popupDialog){g="";this.uiCombo.popupDialog=a("<div class='coral-combo-popup-dialog'></div>").appendTo("body");this.uiCombo.popupInputbox=a("<input type='text' />").appendTo(this.uiCombo.popupDialog)}this.uiCombo.panel.css({position:g}).addClass("coral-combo-wrapper "+this.options.cls+"-panel coral-front").hide();if(this.options.enableSearch){this.uiCombo.textbox.prop("readonly",false);this.options.readonlyInput=false;this.endSearch=true}else{this.uiCombo.textbox.prop("readonly",this.options.readonlyInput)}this.uiCombo.textbox.attr("placeholder",this.options.placeholder);this._showPlaceholder();if(this.options.buttons.length>0){this._createButtonPanel()}},_initState:function(){this.options.isLabel==true?this._setIsLabel(this.options.isLabel):this._setReadonly(this.options.readonly);this._setDisabled(this.options.disabled);this.resize()},_initData:a.noop,_setDefaultValue:function(){if(!this.options.value){return}var b=this.options.onChange;this.options.onChange=a.noop;if(this.options.multiple){if(null!==this.options.value){if(typeof this.options.value=="object"){this.setValues(this.options.value)}else{this.setValues([this.options.value])}}this.options.originalValue=this.getValues()}else{this.setValues([this.options.value]);this.options.originalValue=this.options.value}this.options.onChange=b},_showPlaceholder:function(d){if(a.support.placeholder||this.component().find(".coral-textbox-placeholder-label").length){return}var c=this,d=d?d:c.options.placeholder,b=a("<span class='coral-textbox-placeholder-label'>"+d+"</span>");a(c.uiCombo.textbox).after(b)},_hidePlaceholder:function(){if(a.support.placeholder){return}var b=this;b.component().find(".coral-textbox-placeholder-label").remove()
},_setIsLabel:function(b){var c=this;if(true==b){this.component().removeClass("coral-readonly");this.component().addClass("coral-isLabel");this.uiCombo.textbox.prop("readonly",true);if(this.options.emptyText&&""==this.getValue()){this.uiCombo.textbox.val("")}this.hidePanel()}else{this.component().removeClass("coral-isLabel coral-readonly");this.uiCombo.textbox.prop("readonly",this.options.readonlyInput);this.options.readonly=false}this.options.isLabel=!!b},_setReadonly:function(b){if(b){this.element.prop("readonly",true);this.uiCombo.textbox.prop("readonly",true);this.uiCombo.combo.find(".coral-combo-text").prop("readonly",true)}else{a(this.element).prop("readonly",false);this.uiCombo.textbox.prop("readonly",false);if(this.options.readonlyInput){this.uiCombo.combo.find(".coral-combo-text").prop("readonly",true)}else{this.uiCombo.combo.find(".coral-combo-text").prop("readonly",false)}}this.options.readonly=!!b;this.uiCombo.combo.removeClass("coral-isLabel");this.uiCombo.combo.toggleClass("coral-readonly",this.options.readonly)},_setDisabled:function(b){if(b){this.element.prop("disabled",true);this.uiCombo.combo.find(".coral-combo-value").prop("disabled",true);this.uiCombo.combo.find(".coral-combo-text").prop("disabled",true)}else{a(this.element).prop("disabled",false);this.uiCombo.combo.find(".coral-combo-value").prop("disabled",false);this.uiCombo.combo.find(".coral-combo-text").prop("disabled",false)}this.options.disabled=!!b;this.uiCombo.combo.toggleClass(this.componentFullName+"-disabled coral-state-disabled",this.options.disabled)},_selectPrev:a.noop,_selectNext:a.noop,_doEnter:a.noop,_doQuery:a.noop,_addHighlight:function(c,b){if(b==""||!c.length){return}c=a(c);var e="",f=b.replace(/[\s]+/g," ").split(" "),d;c.each(function(h,i){var g=a(i);e=a(i).html();if(!g.children("input").length){for(var j=0;j<f.length;j++){d=new RegExp(""+f[j]+"","gmi");e=e.replace(d,'<span class="coral-keyword-highlight">'+f[j]+"</span>")}g.html(e)}})},_getTextFromHTML:function(b){if(typeof b==="undefined"){return
}b=b.replace(/<\/?[^>]*>/g,"");b=b.replace(/[ | ]*\n/g,"\n");b=b.replace(/&nbsp;/ig,"");return b},_removeHighlight:function(b){if(!b.length){return}b=a(b);var c=this;b.each(function(d,f){var g=a(f).parent();var e=g.html();g.html(c._getTextFromHTML(e))})},focus:function(){var c=this;if(this.options.disabled||this.options.readonly||this.options.isLabel){return false}this.uiCombo.textbox.focus();if(!this.isLoaded){var b={focus:{param:null}};this._addCacheItem(b);return true}return true},_bindEvent:function(){var g=this,f=this.options,i=this.uiCombo.combo,c=this.uiCombo.panel;if(this.options.disabled){this.element.addClass("coral-state-disabled")}this._off(g.component());var d;this._on({"click.coral-combo-close":function(j){j.preventDefault();g.clear();if(g.options.placeholder){g._showPlaceholder()}},"mouseenter.coral-combo-border":function(j){if(g.component().hasClass("coral-isLabel")||g.component().hasClass("coral-readonly")){return}g.uiCombo.combo.addClass("coral-textbox-hover")},"mouseleave.coral-combo-border":function(j){if(g.component().hasClass("coral-isLabel")||g.component().hasClass("coral-readonly")){return}g.uiCombo.combo.removeClass("coral-textbox-hover")},"focusin.coral-combo-text":function(j){if(this.options.readonly||this.options.isLabel){return}this.component().addClass("coral-state-focus")},"focusout.coral-combo-text":function(j){this.component().removeClass("coral-state-focus");g._trigger("onBlur",j)},"keydown.coral-combo-text":function(j){if(this.options.readonly||this.options.isLabel){return}g._hidePlaceholder();g._trigger("onKeyDown",j)},"keyup.coral-combo-text":function(j){if(this.options.readonly||this.options.isLabel){return}j.stopPropagation();var k=a(j.target).val();switch(j.keyCode){case 38:if(this.options.readonly==false){if(!c.is(":visible")){g.showPanel()}if(f.onSelectPrev){g._trigger("onSelectPrev",j)}else{g._selectPrev(j)}break}else{break}case 40:if(this.options.readonly==false){if(!c.is(":visible")){g.showPanel()}if(f.onSelectNext){g._trigger("onSelectNext",j)
}else{g._selectNext(j)}break}else{break}case 13:j.preventDefault();if(f.onEnter){g._trigger("onEnter",j)}else{g._doEnter(j)}break;case 9:if(!c.is(":visible")&&this.options.readonly==false){g.showPanel()}d=false;break;case 27:g.hidePanel();break;default:if(g.options.enableSearch){g._searchFilter(k);this.endSearch=false}break}g._trigger("onKeyUp",j)},"click.coral-combo-arrow, .coral-combo-text":function(j){j.stopPropagation();if(g.component().hasClass("coral-isLabel")||g.component().hasClass("coral-readonly")){return}if(g.options.popupDialog){a(".coral-combo-panel:visible").hide();g.showPanel();g.uiCombo.popupDialog.dialog("open")}else{if(c.is(":visible")){g.hidePanel()}else{a(".coral-combo-panel").not(c).hide();a(".coral-combo-iframePanel:visible").hide();g.showPanel()}}},"blur.coral-combo-text":function(l){var k=a(l.target);if(!g.options.forceSelection&&!g.option.multiple){var j=g._checkMathch(k.val());if(!j){g.setValues([k.val()])}else{g.setValues([j])}}if(this.options.enableSearch&&!this.endSearch){k.val("");g.setValues([""])}if(d||this.suppressBlurs){d=false;return}this._delay(function(){g.hidePanel()},200)},comboboxonshowpanel:function(j){d=true;this.uiCombo.panel.find(".coral-combo-filterbox").focus();this._delay(function(){d=false},200)},combotreeonshowpanel:function(j){d=true;this.uiCombo.panel.find(".coral-combo-filterbox").focus();this._delay(function(){d=false},200)},combogridonshowpanel:function(j){d=true;g.panel().find("div.coral-combobox-item").show();g._removeGridHighlights();g._scrollTo(g.getValue());g.grid().grid("refresh");this._delay(function(){d=false},200)}});if(g.options.enableFilter){var b=this.uiCombo.panel.find(".coral-combo-filterbox"),h=this.uiCombo.panel.find(".coral-combo-search");b.bind({click:function(j){j.preventDefault();d=true;this.focus()},keyup:function(j){j.preventDefault();if(!g.options.enterFilter){return}if(g.timer){clearTimeout(g.timer)}g.timer=setTimeout(function(){var k=b.val();g.uiCombo.previousValue=k;g.showPanel();if(f.query){f.query.call(g.element,k)
}else{g._doQuery(k)}},f.delay);j.stopPropagation();return false}});h.bind("click",e)}function e(){var j=b.val();g.uiCombo.previousValue=j;g.showPanel();if(f.query){f.query.call(g.element,j)}else{g._doQuery(j)}return false}},_searchFilter:a.noop,_filter:function(b){var d=this,c=this.options,e=b;d.uiCombo.previousValue=e;d.showPanel();if(c.query){c.query.call(d.element,e)}else{d._doQuery(e)}return false},_formatValue:function(b){return b},_setOption:function(b,c){if(b==="id"||b==="name"){return}if(b==="readonly"){this._setReadonly(c)}if(b==="disabled"){this._setDisabled(c)}this._super(b,c);if(b==="isLabel"){this._setIsLabel(c);return}},_destroy:function(){this.panel().remove();this.component().replaceWith(this.element);if(this.options.name){this.element.removeAttr("orgname").attr("name",this.options.name)}this.element.show()},component:function(){return this.uiCombo.combo},panel:function(){return this.uiCombo.panel},uiArrow:function(){return this.uiCombo.combo.find("span.coral-combo-arrow")},uiClose:function(){return this.uiCombo.combo.find("span.coral-combo-close")},uiBorder:function(){return this.component().find("span.coral-combo-border")},resize:function(f){var g=this.options,h=this.uiCombo.combo,d=this.uiCombo.panel,c=this.elementBorder;if(f){g.width=f}if(g.width=="auto"){return}if(isNaN(g.width)){var e=this.element.parent(":first"),b=null;f=this.element.outerWidth();if(e&&e.get(0).tagName!=="BODY"){b=e.outerWidth();if(b<f){f=b}}g.width=f}h.outerWidth(g.width)},_initPanel:function(){var e=this.options,f=this.uiCombo.combo,c=this.elementBorder,b=this.uiCombo.panel,d=e.panelHeight;if(!this.panelRendered){this._renderItems(this.options.data);this.uiCombo.pContent.html(this.lazyPanelHtml);this.panelRendered=true;this.lazyPanelHtml=""}b.css("width",(e.panelWidth?e.panelWidth:c.outerWidth()));b.css("height",d);if(isNaN(d)){this.uiCombo.pContent.css({"max-height":e.maxPanelHeight+"px"});this.uiCombo.popupDialogTree&&this.uiCombo.popupDialogTree.css({"max-height":e.maxPanelHeight+"px"})
}if(this.options.enableFilter&&!isNaN(d)){this.uiCombo.pContent.height(e.panelHeight-30)}else{if(d=="auto"){this.uiCombo.pContent.height("")}else{this.uiCombo.pContent.height(d-2)}}if(this.options.iframePanel){this.uiCombo.iframePanel.css("height",b.outerHeight())}},showPanel:function(){var g=this,b=this.options,d=this.uiCombo.combo,f=this.elementBorder,j=this.options.showDirection,c=this.uiCombo.panel,e=this.uiCombo.iframePanel||a();if(c.is(":hidden")){var i=a(".coral-front:visible").map(function(){return +a(this).css("z-index")}).get(),h=Math.max.apply(null,i);if(h>=+c.css("z-index")){c.css("z-index",h+1);if(this.options.iframePanel){e.css("z-index",h)}}if(!this._PanelInited){this._initPanel()}this._PanelInited=true;c.show(5,function(){g._trigger("onShowPanel",null,{});e.show();(function k(){if(c.is(":visible")){c.css({left:a.coral.getLeft(c,f),top:a.coral.getTop(c,d,j),width:(b.panelWidth?b.panelWidth:f.outerWidth())});if(g.options.iframePanel){e.css({left:a.coral.getLeft(e,f),top:a.coral.getTop(e,d,j),width:(b.panelWidth?b.panelWidth:f.outerWidth())})}setTimeout(k,200)}})()})}if(b.enableFilter){this.setValues(this.getValues())}},hidePanel:function(){var b=this;this.uiCombo.panel.hide();if(this.uiCombo.iframePanel){this.uiCombo.iframePanel.hide()}this._trigger("onHidePanel",null,{})},disable:function(){this._setDisabled(true)},enable:function(){this._setDisabled(false)},show:function(){this._super()},hide:function(){this._super();this.hidePanel()},hideErrors:function(){a.validate.hideErrors(this.uiBorder());this.component().removeClass("coral-combo-error")},clear:function(){var c=this.uiCombo.combo.find("input.coral-combo-value"),b=this.uiCombo.combo.find("input.coral-combo-text");this.currentValues=[];this.setValues([""],false,true)},getOldText:function(){return this.oldText},reset:function(){if(this.options.multiple){this.setValues(this.options.originalValue)}else{this.setValue(this.options.originalValue)}},getText:function(){return this.uiCombo.combo.find("input.coral-combo-text").val()
},_setText:function(b){var c=this.uiCombo.combo.find("input.coral-combo-text");c.val(b);this.uiCombo.previousValue=b},setText:function(h){var e=0,d=0,f=this.options.data,b=[],c=h.split(this.options.separator);for(e;e<c.length;e++){var g=c[e];for(d;d<f.length;d++){if(f[d][this.options.textField]==g){b.push(f[d][this.options.valueField]);break}}}if(b.length>0){this.setValues(b)}},getValues:function(){var b=[];this.uiCombo.combo.find("input.coral-combo-value").each(function(){b.push(a(this).val())});return b},getSelectedItems:function(){var e=this.getValues(),h=[];var c=this.options.data;for(var d=0;d<e.length;d++){for(var b=0;b<c.length;b++){var g=c[b];if(e[d]==g.id){for(var f in g){h.push(f+"="+g[f]+"\n")}}}}return h},setValues:function(n,k,h){var o=this.getValues(),l=null,f=0,b=[],d=[];n=n||[];this.oldValues=o;if(!k){var g=[],c="",m="";this.uiCombo.combo.find("input.coral-combo-value").remove();for(var f=0;f<n.length;f++){c="";m="";if(this.options.name){c=" name='"+this.options.name+"' "}g.push("<input type='hidden' "+c+" value='"+this._formatValue(n[f])+"' class='coral-combo-value' />")}this.uiCombo.combo.append(g.join(""))}for(f=0;f<o.length;f++){b[f]=o[f]}for(f=0;f<n.length;f++){for(var e=0;e<b.length;e++){if(n[f]==b[e]){d.push(n[f]);b.splice(e,1);break}}}if((d.length!=n.length||n.length!=o.length)&&(!k)&&h){if(this.options.placeholder){this._hidePlaceholder()}if(this.options.multiple){this._trigger("onChange",null,{value:n,newValue:n,newText:this.getText(),text:this.getText(),oldValue:o,oldText:this.getOldText()})}else{this._trigger("onChange",null,{value:n[0],newValue:n[0],newText:this.getText(),text:this.getText(),oldValue:o[0],oldText:this.getOldText()})}}},getValue:function(){var b=this.getValues();if(b.length){b=b.join(this.options.separator)}return b},setValue:function(b){b=b.split(this.options.separator);this.setValues(b)},refresh:function(){this.destroy();this.component().remove();this._create()}})})(jQuery);

(function(a){var b=0;a.component("coral.combobox",a.coral.combo,{version:"4.0.3",castProperties:["data","buttons"],options:{cls:"",valueField:"value",panelRenderOnShow:false,textField:"text",mode:"local",method:"post",url:null,data:[],buttons:[],showText:true,emptyText:null,postMode:"value",filter:function(f,h){var c=a(this).combobox("option","textField"),d=a(this).combobox("option","valueField"),g=(""+h[c]).toLowerCase(),e=(""+h[d]).toLowerCase(),f=f.toLowerCase();if(g.indexOf(f)>-1){return"text"}else{if(e.indexOf(f)>-1){return"value"}else{return false}}},formatter:function(d){var c=a(this).combobox("option","textField");return d[c]},loader:function(h,g,e){var f=this,c=a(this),d=c.combobox("option","url");if(!d){return false}a.ajax({type:c.combobox("option","method"),url:d,data:h,dataType:"json",success:function(i){g(i)},error:function(){e.apply(this,arguments)}});return false},beforeLoad:a.noop,onLoad:a.noop,onError:a.noop,onShowPanel:a.noop,beforeSelect:a.noop,onSelect:a.noop,unSelect:a.noop},_create:function(){var c=this,f=null;var e=new Date();this.data=this.data||[];b++;c.options.itemIdPrefix="combobox_i"+b;this.element.addClass("coral-form-element-combobox coral-validation-combobox ctrl-form-element");var d=a.coral.toFunction(this.options.onShowPanel);f=function(g){c.panel().find(".coral-combobox-item").show();d.apply(c.element,[g]);c._scrollTo(c.getValue())};this.options.onShowPanel=f;this._super();this.uiCombo.panel.unbind().bind("mouseover",function(g){a(g.target).closest(".coral-combobox-item").addClass("coral-combobox-item-hover")}).bind("mouseout",function(g){a(g.target).closest(".coral-combobox-item").removeClass("coral-combobox-item-hover")}).bind("mousedown",function(k){k.stopPropagation();var h=a(k.target).closest(".coral-combobox-item"),j=h.attr("value");if(!h.length||h.hasClass("coral-combobox-item-disabled")){return}var g=c.getRowIndex(j);if(false==c._trigger("beforeSelect",null,[{item:c.options.data[g]},{data:c.options.data[g]}])){return}if(c.options.multiple){c.oldText=c.uiCombo.textbox.val();
if(""==j){c.clear();c.select(j);c.hidePanel();return}else{if(c.options.emptyText){c.unselect("")}if(h.hasClass("coral-combobox-item-selected")){c.unselect(j)}else{c.select(j)}}}else{c.oldText=c.uiCombo.textbox.val();c.select(j);c.hidePanel()}return false});if(this.options.isLabel&&this.options.emptyText&&""==this.getValue()){this.uiCombo.textbox.val("")}},_initData:function(){if(this.options.url){return this._request(this.options.url)}if(this.options.data.length){return this.loadData(this.options.data)}return this.loadData(this._transformData())},_renderItems:function(h){var c=this.options,d=this.panel(),k=this,l={},f=[];var n=[];var o=a.coral.toFunction(this.options.formatter);for(var g=0;g<h.length;g++){var q=h[g],m=q[c.valueField],p=q[c.textField],j=!!q.hidden==true?"hidden":"",e=p;if(o){e=o.call(this.element,h[g])}n.push("<div class='coral-combobox-item "+j+" ' id='"+this.options.itemIdPrefix+"_"+g+"' value='"+m+"'>"+e+"</div>");if(q.selected&&a.inArray(m,f)==-1){f.push(m)}}this.lazyPanelHtml=n.join("");return f},loadData:function(f,g){var c=this.options,d=this.panel(),h=this,l=a.coral.toFunction(this.options.formatter),i={},e=[],j=null;if(!(f instanceof Array)){f=[]}this.data=(f||[]);this.uiCombo.pContent.empty();if(this.options.emptyText){if(!(f.length>0&&""===f[0][this.options.valueField])){i[this.options.valueField]="";i[this.options.textField]=this.options.emptyText;f.unshift(i)}}var k=[];if(!this.panelRenderOnShow){e=this._renderItems(this.data);this.uiCombo.pContent.html(this.lazyPanelHtml);this.panelRendered=true}if(this.options.value){e=this.options.value.split(",")}j=this.getOnlyValues();if(""!==j.toString()){e=j}if(e.length===0){e.push("")}if(c.multiple){this.setValues(e,g)}else{this.setValues([e[e.length-1]],g)}},localFilter:function(h){var g=this.getData(),f=this.panel().find(".coral-combobox-item");for(var d=0;d<g.length;d++){a(f[d]).hide();if(h.apply(this.element,[g[d]])){var c=g[d][this.options.valueField];var e=g[d][this.options.textField];a(f[d]).show()
}}},_setDefaultValue:a.noop,_scrollTo:function(f){var c=this.panel();var e=this.getEl(f);if(e.length){if(e.position().top<=0){var d=c.scrollTop()+e.position().top;c.scrollTop(d)}else{if(e.position().top+e.outerHeight()>c.height()){var d=c.scrollTop()+e.position().top+e.outerHeight()-c.height();c.scrollTop(d)}}}},_transformData:function(){var c=this.options;var d=[];a(">option",this.element).each(function(){var e={};e[c.valueField]=a(this).attr("value")!==undefined?a(this).attr("value"):a(this).html();e[c.textField]=a(this).html();e.selected=a(this).attr("selected");d.push(e)});return d},_checkMathch:function(e){var d=this.data;for(var c=0;c<d.length;c++){if(d[c][this.options.textField]==e){return d[c][this.options.valueField]}}return false},_request:function(c,h,g){var f=this.options,e=this,d=this.options.loader;if(a.isArray(c)){e.loadData(c,g)}else{if(c){f.url=c}h=h||{};if(this._trigger("beforeLoad",null,[h])==false){return}d.apply(this.element,[h,function(i){e.loadData(i,g);e._trigger("onLoad",null,[i]);e.isLoaded=true;e._loadedHandler()},function(){e._trigger("onError",null,arguments)}])}},_loadedHandler:function(){var d=this;var c=this._getCacheItem("setValues");if(c){this.setValues(c.values,c.remainText,c.triggerOnChange);this._removeCacheItem("setValues")}var e=this._getCacheItem("focus");if(e){this.focus();this._removeCacheItem("focus")}},_selectItems:function(d){var e=this.panel(),f=null,g=null,c=":last";if(d){c=":first"}f=e.find(".coral-combobox-item-selected:visible"+c);if(f.length){g=f.attr("value")}return g},_selectPrev:function(){var c=this.panel(),f=this._selectItems(true),e=c.find('.coral-combobox-item[value="'+f+'"]'),d=null,g=null;if(e.length){d=e.prev(":visible")}else{e=c.find(".coral-combobox-item:visible:last")}if(null!==d&&d.length==0){return}g=!!d?d.attr("value"):e.attr("value");if(this.options.multiple){if(null===d||e.hasClass("coral-combobox-item-selected")){this.select(g)}else{this.unselect(g)}}else{this.select(g)}e.focus();this._scrollTo(g)},_selectNext:function(){var c=this.panel(),f=this._selectItems(false),e=c.find('.coral-combobox-item[value="'+f+'"]'),d=null,g=null;
if(e.length){if(this.options.enableSearch){d=e.nextAll(":visible:eq(0)")}else{d=e.next(":visible")}}else{e=c.find(".coral-combobox-item:visible:first")}if(d&&d.length==0){return}g=d?d.attr("value"):e.attr("value");if(this.options.multiple){if(null===d||e.hasClass("coral-combobox-item-selected")){this.select(g)}else{this.unselect(g)}}else{this.select(g)}e.focus();this._scrollTo(g)},_doEnter:function(){var c=this.getOnlyValues();this.setValues(c,false,false);this.hidePanel()},_doQuery:function(f){var d=this.options,l=this.options.filter;if(d.enableSearch){if(d.multiple&&!f){this.setValues([],true,false)}else{this.setValues([f],true,false)}}if(d.mode=="remote"){this._request(null,{q:f},true)}else{var e=this.panel();var g=this.getData(),m=e.find(".coral-combobox-item");m.hide();if(d.enableSearch){var j=this.uiCombo.pContent.find("span.coral-keyword-highlight");this._removeHighlight(j)}for(var h=0;h<g.length;h++){var c=l.apply(this.element,[f,g[h]]);if(c){var k=g[h][d.valueField];var n=g[h][d.textField];if(c=="text"&&d.enableSearch){this._addHighlight(a(m[h]),f)}a(m[h]).show();if(n==f){this.setValues([k],true,false);a(m[h]).addClass("coral-combobox-item-selected")}}}}},_formatValue:function(h){var g=this.getData(),f=this.options,d=f.valueField,c=f.textField,e=0,j=null;if("text"===f.postMode||"value-text"===f.postMode){for(e=0;e<g.length;e++){j=g[e];if(""!=h&&h==j[d]){if("text"===f.postMode){return j[c]}if("value-text"===f.postMode){return h+f.valueTextSeparator+j[c]}}}}return h},_destroy:function(){this.element.removeClass("coral-validation-combobox");this.element.removeClass("coral-form-element-combobox");this._super()},getOnlyValues:function(){var g=this.getData(),c=this.options,d=[],h=0;if(!this.currentValues){return d}for(;h<this.currentValues.length;h++){var k=this.currentValues[h],f=0,l=c.valueField,e=c.textField,m=null;if("value-text"===c.postMode){k=k.split(c.valueTextSeparator)[0]}for(;g&&f<g.length;f++){m=g[f];if(m[l]==k||("text"===c.postMode&&m[e]==k)){d.push(m[l]);
break}}}return d},getData:function(){return this.data||[]},setValues:function(c,f,o){if(!this.isLoaded){var t={setValues:{values:c,remainText:f,triggerOnChange:o}};this._addCacheItem(t)}var n=this.options,v=this.getData(),k=this.panel(),q=f,s=0,r=0,u=this.getValues()||[],h=[],l=[],p=null,m=null;if(typeof(q)=="object"){f=q.remainText;o=q.triggerOnChange}this.currentValues=c;k.find(".coral-combobox-item-selected").removeClass("coral-combobox-item-selected");for(s=0;s<c.length;s++){p=c[s];m=p;var e=this.getRowIndex(p);if(e>-1){m=v[e][n.textField];var d=this._getItemByIndex(e).addClass("coral-combobox-item-selected");if(n.emptyText&&""==p){this.uiCombo.textbox.attr("placeholder",n.emptyText);this._showPlaceholder(n.emptyText);m=""}else{this._hidePlaceholder()}l.push(m);h.push(v[e][n.valueField])}else{if(e<0&&!this.options.forceSelection){l.push(m);h.push(p)}else{continue}}}if(!f){this._setText(l.join(n.separator))}var g=this._getMinus(h,c);if((g.length&&h.length)||!h.length){l=l.concat(g);this._setText(l.join(n.separator));h=c}this._super(h,f,o)},_getMinus:function(d,c){var e=[];a.each(c,function(f,g){if(a.inArray(g,d)==-1){e.push(g)}});return e},getEl:function(d){var c=this.getRowIndex(d);var e=c;return a("#"+this.options.itemIdPrefix+"_"+e)},_getItemByIndex:function(c){var d=c;return a("#"+this.options.itemIdPrefix+"_"+d)},getRowIndex:function(g,c){var e=this.options,f=this.getData(),c=c||"value";for(var d=0;d<f.length;d++){if(c=="value"){if(f[d][e.valueField]==g){return d}}if(c=="text"){if(f[d][e.textField]==g){return d}}if(c=="value-text"){if(f[d][e.valueField]==g.split(e.valueTextSeparator)[0]){return d}}}return -1},setValue:function(c){if(null===c){return}this.setValues([c],false,false)},clear:function(){var c=this.panel();this._super();c.find(".coral-combobox-item-selected").removeClass("coral-combobox-item-selected")},reset:function(){var c=this.options;if(c.multiple){this.setValues(c.originalValue,false,false)}else{this.setValue(c.originalValue)}},reload:function(c){this._request(c)
},select:function(g){var e=this.options,f=this.getData();if(e.multiple){var c=this.getOnlyValues();for(var d=0;d<c.length;d++){if(c[d]==g){return}}c.push(g);this.setValues(c,false,true)}else{this.setValues([g],false,true)}if(!this.endSearch){this.endSearch=true}for(var d=0;d<f.length;d++){if(f[d][e.valueField]==g){this._trigger("onSelect",null,[{item:f[d]}]);return}}},_searchFilter:function(c){var e=this,d=this.options,f=c;if(e.timer){clearTimeout(e.timer)}e.timer=setTimeout(function(){e._filter(f)},d.delay);return false},unselect:function(g){var e=this.options,f=this.getData(),c=this.getOnlyValues();for(var d=0;d<c.length;d++){if(c[d]==g){c.splice(d,1);this.setValues(c,false,true);break}}for(var d=0;d<f.length;d++){if(f[d][e.valueField]==g){this._trigger("onUnSelect",null,[{item:f[d]}]);return}}},showPanel:function(){if(this.options.enableSearch){var e=this.uiCombo.pContent.find("span.coral-keyword-highlight");this._removeHighlight(e)}var c=0,d;this._super();if(!this.hideValueArr){return}for(;c<this.hideValueArr.length;c++){d=this.hideValueArr[c];this.uiCombo.pContent.find('.coral-combobox-item[value="'+d+'"]').hide()}},addOption:function(h){var k=this,f=0,j=null,e=this.options.valueField,c=this.options.textField,d=h[e],g=h[c];if(!(e in h)||!(c in h)){if(a.message){a.message("JSON!")}return false}for(f=0;f<this.data.length;f++){if((h[e]==this.data[f][e])||(h[c]==this.data[f][c])){if(a.message){a.message("!")}return false}}j=a('<div class="coral-combobox-item"></div>');j.attr("value",d);if(this.options.formatter){j.html(this.options.formatter.call(this.element,h))}else{j.html(g)}if(this.data.length>0&&""==this.data[0][e]){this.data.splice(1,0,h);j.insertAfter(this.uiCombo.pContent.find(":first-child"))}else{this.data.unshift(h);j.prependTo(this.uiCombo.pContent)}return true},removeOption:function(e){var g=null,f=null,d=0,c=this.options.valueField,h=null;if(typeof e==="number"){if(e>this.data.length){return}g=this.data[d];h=e}if(typeof e==="string"){f=e}if(typeof e==="object"){if(!(c in e)){return
}f=e[c]}if(f!==null){for(;d<this.data.length;d++){if(f==this.data[d][c]){g=this.data[d];h=d;break}}}if(h!==null){this.data.splice(h,1);this.uiCombo.pContent.find('.coral-combobox-item[value="'+f+'"]').remove()}},clearOptinons:function(){this.uiCombo.pContent.empty();this.clear()},showOption:function(c){var d;if(typeof c==="number"){d=this.uiCombo.pContent.find(".coral-combobox-item:eq("+c+")")}else{if(typeof c==="string"){d=this.uiCombo.pContent.find('.coral-combobox-item[value="'+c+'"]')}else{if(typeof c==="object"){if(!(this.options.valueField in c)){return}d=this.uiCombo.pContent.find('.coral-combobox-item[value="'+c[this.options.valueField]+'"]')}else{this.uiCombo.pContent.find(".coral-combobox-item").removeClass("hidden");this.hideValueArr=null}}}if(d&&d.length>0){d.removeClass("hidden");if(this.hideValueArr){this.hideValueArr.splice(a.inArray(d.attr("value"),this.hideValueArr),1)}}},hideOption:function(c){if(!this.hideValueArr){this.hideValueArr=[]}var d;if(typeof c==="number"){d=this.uiCombo.pContent.find(".coral-combobox-item:eq("+c+")")}else{if(typeof c==="string"){d=this.uiCombo.pContent.find('.coral-combobox-item[value="'+c+'"]')}else{if(!(this.options.valueField in c)){return}d=this.uiCombo.pContent.find('.coral-combobox-item[value="'+c[this.options.valueField]+'"]')}}if(d&&d.length>0){d.addClass("hidden");this.hideValueArr.push(d.attr("value"))}}})})(jQuery);

/*!
 * 4.0
 * 
 * JS
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 */
(function(a,b){a.component("coral.splitbutton",a.coral.button,{version:"4.0.2",componentName:"splitbutton",castProperties:["menuOptions","dataCustom"],options:{id:null,name:null,label:null,cls:null,icons:{primary:null,secondary:null},width:null,text:true,disabled:false,menuOptions:{autoDisplay:false,popup:true},data:null,url:null,onCreate:null,onClick:null,onDblClick:null},component:function(){var c=this;return this.uiBox},uiBorder:function(){return this.uiBorder},uiDropdownButton:function(){return this.dropdownButton},menu:function(){return this.uiMenu},_create:function(){var c=this;this._initElements();this._super()},_initElements:function(){var g=this,f=this.options,e=this.options.menuOptions,h=this.options.data,c=this.options.url;this.element.addClass("ctrl-init ctrl-init-splitbutton coral-splitbutton-element");this.dropdownButton=a("<button class='coral-splitbutton-dropdownbutton' type='button'></button>").uniqueId();this.uiBorder=a('<span class="coral-splitbutton-border"></span>');this.uiBox=a('<span class="coral-splitbutton"></span>');this.uiBox.append(this.uiBorder);this.uiMenu=a('<ul class="coral-splitbutton-menu"></ul>');this.uiBox.insertAfter(this.element);this.uiBorder.append(this.element).append(this.dropdownButton);this.uiMenu.appendTo(a(document.body));if(f.width){this.uiBox.css({width:f.width})}if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)}else{this.options.id=this.element.uniqueId()}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name")}else{if(this.options.name){this.element.attr("name",this.options.name)}}this.triggerId=this.dropdownButton.attr("id");this._on(this.element,{buttononclick:function(j,i){g._trigger("onClick",j,i)}});this.dropdownButton.button({label:"",text:false,icons:"icon-arrow-down2",onClick:function(k,j){if(g._getToolbar().toolbar("option","clickToDisplay")==0){return
}if(!g._getToolbar().length||!g._getToolbar().toolbar("option","autoDisplay")){return}var i=g._getToolbar(true);if(i.length){i.toggleClass("coral-toolbar-click-active")}},onMouseEnter:function(k,j){if(!g._getToolbar().length||!g._getToolbar().toolbar("option","autoDisplay")){return}var i=g._getToolbar(true);if(i.hasClass("coral-toolbar-click-active")){if(a(".coral-tieredmenu:visible").length){g._hideMenus()}g.uiMenu.tieredmenu("show")}}});var d={};if(null!=h){d.data=h}if(null!=c){d.url=c}e=a.extend({},d,f.menuOptions,{id:this.element.attr("id")+"_tieredmenu",trigger:this.dropdownButton,of:this.element});this.uiMenu.tieredmenu(e);if(g._getToolbar().length&&g._getToolbar().toolbar("option","autoDisplay")){this.uiMenu.tieredmenu("component").bind("mouseleave",function(){g._hideMenus()})}this._on(this.uiMenu,{tieredmenuonclick:function(j,i){g._trigger("onClick",j,i)}})},_getToolbar:function(d){var f=this,e=this.options,c=a();if(this.element.hasClass("ctrl-toolbar-element")){c=d?this.element.parents(".coral-toolbar:eq(0)"):this.element.parents(".ctrl-init-toolbar:eq(0)")}return c},_hideMenus:function(){a(".coral-tieredmenu").hide()},_setOption:function(c,e){if(c==="id"||c==="name"){return}var d=this;if(c==="disabled"){this.element.toggleClass("coral-state-disabled",e);this.dropdownButton.button("option","disabled",e)}this._super(c,e)},_destroy:function(){this.uiBox.replaceWith(this.element);this.uiMenu.parent().remove();this.element.removeClass("ctrl-init ctrl-init-splitbutton coral-splitbutton-element")}})})(jQuery);

/*!
 * 4.0
 * 
 * JS
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 */
(function(a,b){a(document).unbind(".coral-menubutton").bind("mousedown.coral-menubutton mousewheel.coral-menubutton",function(c){if(a(c.target).closest("span.coral-menubutton,.coral-menubutton-buttons").length){return}a(".coral-menubutton-buttons").hide()});a.component("coral.menubutton",a.coral.button,{version:"4.0.2",castProperties:["menuOptions"],options:{id:null,name:null,label:null,cls:null,icons:{primary:null,secondary:null},width:null,text:true,disabled:false,renderType:"menu",menuOptions:{autoDisplay:false,popup:true},data:null,url:null,method:"get",position:{my:"left top",at:"left bottom"},onCreate:null,onClick:null,onDblClick:null,onLoad:null},showPanel:function(){var g=this,f=this.options;var c=a.extend(f.position,{of:this.element});var d=this.uiButtons.siblings(".coral-front:visible").map(function(){return +a(this).css("z-index")}).get(),e=Math.max.apply(null,d);if(e>=+this.uiButtons.css("z-index")){this.uiButtons.css("z-index",e+1)}this.uiButtons.css({position:"absolute",left:"",top:""}).position(c).show()},hidePanel:function(){this.uiButtons.hide()},_create:function(){this._initElements();this._super()},_getToolbar:function(d){var f=this,e=this.options,c=a();if(this.element.hasClass("ctrl-toolbar-element")){c=d?this.element.parents(".coral-toolbar:eq(0)"):this.element.parents(".ctrl-init-toolbar:eq(0)")}return c},_hideMenus:function(){a(".coral-tieredmenu").hide()},_initElements:function(){var d=this,c=this.options;this.element.addClass("ctrl-init ctrl-init-menubutton coral-menubutton-element");this.uiBorder=a('<span class="coral-menubutton-border"></span>');this.uiBox=a('<span class="coral-menubutton"></span>');this.uiBox.append(this.uiBorder);this.uiBox.insertAfter(this.element);this.uiBorder.append(this.element);if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)
}else{this.options.id=this.element.uniqueId().attr("id")}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name")}else{if(this.options.name){this.element.attr("name",this.options.name)}}this.options.onClick=function(h,g){if(c.renderType=="button"){if(!d.uiButtons.is(":visible")){d.showPanel()}else{d.hidePanel()}}if(!d._getToolbar().length||!d._getToolbar().toolbar("option","autoDisplay")){return}var f=d._getToolbar(true);if(f.length){f.toggleClass("coral-toolbar-click-active")}},this.options.onMouseEnter=function(h,g){if(!d._getToolbar().length||!d._getToolbar().toolbar("option","autoDisplay")){return}if(c.renderType=="button"){return}var f=d._getToolbar(true);if(f.hasClass("coral-toolbar-click-active")){if(a(".coral-tieredmenu:visible").length){d._hideMenus()}d.uiMenu.tieredmenu("show")}};this._on(this.element,{buttononclick:function(g,f){d._trigger("onClick",g,f)}});if(c.renderType=="button"){this.uiButtons=a("<div class='coral-menubutton-buttons coral-front'></div>").appendTo(a(document.body));this._loadData()}else{this.uiMenu=a('<ul class="coral-menubutton-menu"></ul>').appendTo(a(document.body));this._renderMenu()}},_renderMenu:function(){var g=this,f=this.options,e=this.options.menuOptions,h=this.options.data,c=this.options.url;var d={};if(null!=h){d.data=h}if(null!=c){d.url=c}e=a.extend({},d,f.menuOptions,{id:this.element.attr("id")+"_tieredmenu",trigger:this.element,of:this.element});this.uiMenu.tieredmenu(e);if(g._getToolbar().length&&g._getToolbar().toolbar("option","autoDisplay")){this.uiMenu.tieredmenu("component").bind("mouseleave",function(){g._hideMenus()})}this._on(this.uiMenu,{tieredmenuonclick:function(j,i){g._trigger("onClick",j,i)}})},_loadData:function(){var d=this,c=this.options;if(c.url){a.ajax({type:c.method,url:c.url,data:{},dataType:"json",success:function(e){d._initData(e)},error:function(){a.alert("Json Format Error!")}})}else{if(c.data){this._initData(c.data)}}},_initData:function(d){var c=this;if(typeof d==="object"){this._addItems(null,d)
}c._trigger("onLoad",null,{})},_addItems:function(f,j){if(typeof j!=="object"){return}var h=this,e=[],d=j.length;for(var g=0;g<d;g++){var c=j[g];if(!a.isEmptyObject(c)){e.push(h._createButton(c))}}this._appendItems(f,e);this._initItems(e)},_createButton:function(c){return{button:a("<button type='button'></button>").addClass("coral-menubutton-button-item"),options:c}},_appendItems:function(d,c){for(var e in c){c[e].button.appendTo(this.uiButtons)}},_initItems:function(c){var h=this;for(var f in c){var e=c[f].button,g=c[f].options;e.button(g);var d={};d.buttononclick=function(j,i){h._trigger("onClick",j,i)};h._on(e,d)}},add:function(c){},prepend:function(f){if(!f instanceof jQuery){return}var g=this,c=f.length;if(!(f instanceof Array)){f=[f]}for(var e=c-1;e>-1;e--){var d=f[e];d.css({margin:"",left:"",right:""}).removeClass("coral-menubutton-button-item").addClass("coral-menubutton-button-item").prependTo(g.uiButtons)}},append:function(f){if(!f instanceof jQuery){return}var g=this,c=f.length;if(!(f instanceof Array)){f=[f]}for(var e=c-1;e>-1;e--){var d=f[e];d.css({margin:"",left:"",right:""}).removeClass("coral-menubutton-button-item").addClass("coral-menubutton-button-item").prependTo(g.uiButtons)}},pop:function(){var e=this,d=this.options;if("button"!=d.renderType){return a()}var c=this.uiButtons.find(".coral-menubutton-button-item:eq(0)");if(c.length){return c.removeClass("coral-menubutton-button-item")}else{return a()}},component:function(){return this.uiBox},border:function(){return this.uiBorder},buttons:function(){return this.uiButtons},buttonElements:function(){return this.uiButtons.children()},menu:function(){return this.uiMenu},_bindEvents:function(){},_setOption:function(c,e){var d=this;if(c==="id"||c==="name"){return}if(c==="disabled"){this.element.toggleClass("coral-state-disabled",e)}this._super(c,e)},_destroy:function(){var c=this.options;this.uiBox.replaceWith(this.element);if(c.renderType=="buttons"){this.uiButtons.remove()}else{this.uiMenu.parent().remove()
}this.element.children().remove();this.element.removeClass("ctrl-init ctrl-init-menubutton coral-menubutton-element")}})})(jQuery);

(function(a){a.component("coral.combotree",a.coral.combo,{version:"4.0.3",castProperties:["data","rootNode","buttons"],options:{valueField:"value",textField:"text",panelRenderOnShow:false,mode:"local",method:"post",url:null,data:null,buttons:[],postMode:"value",multiple:false,simpleDataEnable:false,simpleDataIdKey:"id",simpleDataPIdKey:"pId",simpleDataRootPId:null,rootNode:false,radioType:"level",showRootNode:true,allowPushParent:true,traversal:false,cascadeCheck:false,formatter:function(c){var b=a(this).combotree("option","textField");return c[b]},loader:function(g,f,d){var e=this,b=a(this),c=b.combotree("option","url");if(!c){return false}a.ajax({type:b.combotree("option","method"),url:c,data:g,dataType:"json",success:function(h){f(h)},error:function(){d.apply(this,arguments)}})},beforeClick:null,beforeLoad:a.noop,onLoad:a.noop,onError:a.noop,onSelect:a.noop,unSelect:a.noop,onExpand:null,onClick:null},tree:function(){return a("#"+a(this.element).attr("id")+"_tree")},_filterLocalTree:function(b){var d=this,c=a("#"+a(this.element).attr("id")+"_tree");c.tree("filterNodesByParam",b)},_create:function(){var b=this,c=null;this.element.addClass("coral-form-element-combotree coral-validation-combotree coral-combobox-f ctrl-form-element");c=function(){};this.options.onShowPanel=c;this._super();if(this.options.popupDialog){this.uiCombo.popupInputbox=this.uiCombo.popupInputbox.textbox({componentCls:"coral-combo-popup-input",icons:[{icon:"icon-search",click:function(f,d){b._filterLocalTree({name:d.value})}}],onKeyUp:function(f,d){b._filterLocalTree({name:d.value});f.stopPropagation()}});this.uiCombo.popupDialog.dialog({autoOpen:false,title:"",height:"auto",width:"auto",modal:true,resizable:false,buttons:{"":function(g){var d=a.data(b.uiCombo.popupInputbox,"value"),f=a.data(b.uiCombo.popupInputbox,"text");if(d){b.setValues(d,f,true,true)}a(this).dialog("close")},"":function(d){a(this).dialog("close")}}})}},_getSetting:function(){var c=this;var b={simpleDataEnable:this.options.simpleDataEnable,simpleDataIdKey:this.options.simpleDataIdKey,simpleDataPIdKey:this.options.simpleDataPIdKey,simpleDataRootPId:this.options.simpleDataRootPId,checkable:this.options.multiple,radioType:this.options.radioType,showRootNode:this.options.showRootNode,rootNode:this.options.rootNode,chkboxType:this.options.cascadeCheck?{Y:"",N:""}:{Y:"ps",N:"ps"},beforeClick:function(f,e){if(!c.options.allowPushParent&&e.isParent){return false
}var d=a.coral.toFunction(c.options.beforeClick);if(!c.options.multiple){if(a.isFunction(d)){return d(f,e)}return true}else{return false}},onClick:function(l,k,j,h){var f=[];var d=[];f.push(j.name);d.push(j.id);if(c.options.traversal){var g=j.getParentNode();while(!!g){f.push(g.name);g=g.getParentNode()}}if(c.options.popupDialog){a.data(c.uiCombo.popupInputbox,"value",d.reverse());a.data(c.uiCombo.popupInputbox,"text",f.reverse())}else{c.setValues(d.reverse(),f.reverse(),true,true)}if(!c.options.multiple&&!j.isParent||!c.options.multiple&&c.options.allowPushParent){c.hidePanel()}c._trigger("onClick",l,{treeId:k,treeNode:j,clickFlag:h});c._trigger("onNodeClick",l,{treeId:k,treeNode:j,clickFlag:h});return false},beforeCheck:function(f,e){var d=c._trigger("beforeNodeCheck",null,{node:e});if(!d){return false}},onCheck:function(n,m,k){var h=[];var g=[];var f=a("#"+m).tree("getCheckedNodes",true);for(var j=0,d=f.length;j<d;j++){if(c.options.cascadeCheck||!f[j].getCheckStatus().half){if(!c.options.allowPushParent&&f[j].isParent){continue}h.push(f[j].name);g.push(f[j].id)}}if(c.options.popupDialog){a.data(c.uiCombo.popupInputbox,"value",g);a.data(c.uiCombo.popupInputbox,"text",h)}else{c.setValues(g,h,true,true)}c._trigger("onNodeCheck",n,{node:k});if(!this.endSearch){this.endSearch=true}},onLoad:function(k,j,n,f){var o=[];var m=[];var d=a("#"+j).tree("getCheckedNodes",true);for(var h=0,g=d.length;h<g;h++){if((d[h].getCheckStatus()!=null)&&(c.options.cascadeCheck||!d[h].getCheckStatus().half)){o.push(d[h].name);m.push(d[h].id)}}c._trigger("onLoad",k,{treeId:j,treeNode:n,msg:f});c.isLoaded=true;c._loadedHandler()},onExpand:function(g,f,d){c._trigger("onExpand",g,[{treeId:f,node:d}])}};return b},setPopupInput:function(b){this.uiCombo.popupInputbox.textbox("setValue",b.join(this.options.separator))},_initData:function(){var b=a('<ul id="'+a(this.element).attr("id")+'_tree"></ul>');if(this.options.popupDialog){b.appendTo(this.uiCombo.popupDialog);this.uiCombo.popupDialogTree=b}else{b.appendTo(this.uiCombo.pContent)
}this.uiCombo.panel.unbind().bind("mousedown",function(j){j.preventDefault()});var h=this._getSetting();if(typeof this.options.url=="string"&&this.options.url!==""){a.extend(h,{asyncEnable:true,asyncUrl:this.options.url,asyncAutoParam:"id,name"})}b.tree(h,this.options.data);var f=[];var e=[];var d=a("#"+a(this.element).attr("id")+"_tree").tree("getCheckedNodes",true);for(var g=0,c=d.length;g<c;g++){if((d[g].getCheckStatus()!=null)&&(this.options.cascadeCheck||!d[g].getCheckStatus().half)){f.push(d[g].name);e.push(d[g].id)}}if(e.length>0){this.setValues(e,f,false,true)}},_setDefaultValue:function(){if(null!==this.options.value&&""!=this.options.value){if(typeof this.options.value=="object"){this.setValues(this.options.value)}else{var b=this.options.value.split(this.options.separator);this.setValues(b)}}},_renderItems:function(b){},_scrollTo:function(e){var b=this.panel();var d=b.find('div.coral-combobox-item[value="'+e+'"]');if(d.length){if(d.position().top<=0){var c=b.scrollTop()+d.position().top;b.scrollTop(c)}else{if(d.position().top+d.outerHeight()>b.height()){var c=b.scrollTop()+d.position().top+d.outerHeight()-b.height();b.scrollTop(c)}}}},_request:function(b,h,f){var g=a("#"+a(this.element).attr("id")+"_tree");var e=this.options,d=this,c=this.options.loader;if(a.isArray(b)){d.loadData(b,f)}else{if(b){e.url=b}h=h||{};if(this._trigger("beforeLoad",null,[h])==false){return}c.apply(this.element,[h,function(j){d.loadData(j,f)},function(){d._trigger("onError",null,arguments)}])}},loadData:function(e,c){var d=a("#"+a(this.element).attr("id")+"_tree");d.tree("reload",e);var b=d.tree("getNodes");a.each(b,function(f,g){d.tree("expandNode",g,true)});this.setValues(this.currentValues)},getData:function(){return this.data},_loadedHandler:function(){this.setValues(this.currentValues)},setComboValues:function(b,c){this.setValues(b,c)},_setCombotree:function(c,f){this.suppressBlurs=true;c=this.currentValues;var e=this.options;var g=[];var b=a(this.element).attr("id");a("#"+b+"_tree").tree("cancelSelectedNode");
if(e.multiple){a("#"+b+"_tree").tree("checkAllNodes",false);for(i in c){var d=a("#"+b+"_tree").tree("getNodeByParam","id",c[i]);if(d){a("#"+b+"_tree").tree("checkNode",d,true,!e.cascadeCheck)}if(!f){var d=a("#"+b+"_tree").tree("getNodeByParam","id",c[i]);if(d){g.push(d.name)}else{g.push(c[i])}}}}else{for(i in c){var d=a("#"+b+"_tree").tree("getNodeByParam","id",c[i]);a("#"+b+"_tree").tree("selectNode",d);if(!f){var d=a("#"+b+"_tree").tree("getNodeByParam","id",c[i]);if(d){g.push(d.name)}else{g.push(c[i])}}}}if(!f){f=g}this._delay(function(){this.suppressBlurs=false},200);return f},setValues:function(b,e,g,f){this.currentValues=b;e=this._setCombotree(b,e);var d=this.options,c=[];if(e){this._setText(e.join(d.separator))}this._super(b,false,g)},setValue:function(b){b=b.split(this.options.separator);this.setValues(b,false,false,true)},_doQuery:function(d){if(d==""){return}var b=a(this.element).attr("id");var c=a("#"+b+"_tree").tree("getNodesByParamFuzzy","name",d,null);if(c.length>0){a("#"+b+"_tree").tree("selectNode",c[0])}else{a("#"+b+"_tree").tree("cancelSelectedNode")}},clear:function(){this._super();if(this.options.multiple){a("#"+a(this.element).attr("id")+"_tree").tree("checkAllNodes",false)}},reset:function(){var b=this.options;if(b.multiselect){this.setValues(b.originalValue,false,false,true)}else{this.setValue(b.originalValue)}},reload:function(b){this._request(b)},_destroy:function(){var b=this;this.element.removeClass("coral-validation-combotree");this.element.removeClass("coral-form-element-combotree");if(this.options.popupDialog){this.uiCombo.popupDialog.dialog("forceDestroy")}this._super()}})})(jQuery);

(function(a){a.component("coral.combogrid",a.coral.combo,{version:"4.0.3",castProperties:["colNames","colModel","data","buttonOptions","gridOptions","buttons"],options:{colNames:[],colModel:[],valueField:"id",panelRenderOnShow:false,textField:"name",multiple:false,selarrrow:[],buttons:[],url:null,sortable:false,data:[],onSelectRow:null,onSortableColums:null,onLoad:a.noop,onComplete:null,pager:false,buttonOptions:null,gridOptions:{}},grid:function(){return a("#combo_grid_"+a(this.element).attr("id"))},button:function(){if(null!==this.options.buttonOptions){return this.$button}},_destroy:function(){this.element.removeClass("coral-validation-combogrid");this.element.removeClass("coral-form-element-combogrid");this.grid().remove();this._super()},_searchFilter:function(j){this._removeGridHighlights();var h=this,b=this.options,d=this.options.textField,f=[],k=this.grid(),c=k.grid("option","multiselect");this.endSearch=false;var g=k.grid("option","colModel"),m="";for(var e in g){var l=g[e];if("cb"==l.name||"rn"==l.name){continue}if(""!=m){m+=","}m+='{"field":"'+l.name+'","op":"cn","data":"'+j+'"}'}f.filters='{"groupOp":"OR","rules":['+m+"]}";k.grid("option","localonce",true);a.extend(k.grid("option","postData"),f);k.grid("reload",{page:1});return false},reload:function(c){var b=this.grid(),d=b.grid("option","orgdatatype");if(typeof c==="string"){b.grid("option","url",c);if(d!="json"){b.grid("option","datatype","json");b.grid("reload");b.grid("option","datatype",d);return}}else{if(typeof c==="object"){if(d!="local"){b.grid("option","orgdatatype","local");b.grid("clearGridData");b.grid("addRowData",this.options.valueField,c);b.grid("option","orgdatatype",d);return}b.grid("option","data",c)}}b.grid("reload")},_loadedHandler:function(){var c=this;var b=this._getCacheItem("setValues");if(b){this.setValues(b.values,b.text,b.triggerOnChange);this._removeCacheItem("setValues")}this._addGridHighlights();var d=this._getCacheItem("focus");if(d){this.focus();this._removeCacheItem("focus")
}},_removeGridHighlights:function(){var d=this,b="combo_grid_"+a(d.element).attr("id"),c=this.grid().find(".coral-grid-btable tr td > span.coral-keyword-highlight");this._removeHighlight(c)},_getGridTds:function(){var d=this,c=this.grid(),b=c.grid("option","multiselect");if(b){return c.find(".coral-grid-btable tr.jqgrow > td")}else{return c.find(".coral-grid-btable").find("tr.jqgrow").children("td")}},_addGridHighlights:function(){if(!this.options.enableSearch||this.endSearch){return}var f=this,c="combo_grid_"+a(f.element).attr("id"),b=f.options.textField,e=this._getGridTds(),d=f.uiCombo.textbox.val();this._addHighlight(e,d)},_updateGridData:function(f){var c=this;var e=this.grid().grid("getRowData",f.rowId);var d=this._getTextFromHTML(e[this.options.valueField]);var g=this._getTextFromHTML(e[this.options.textField]);var b=a.inArray(d,this.gridValueArr);if(!this.options.multiple){this.gridValueArr=[d];this.gridTextArr=[g];this.gridRowIdArr=[f.rowId];return}if(!f.status){if(b!=-1){this.gridValueArr.splice(b,1);this.gridTextArr.splice(b,1);this.gridRowIdArr.splice(b,1)}}else{if(b==-1){this.gridValueArr.push(d);this.gridTextArr.push(g);this.gridRowIdArr.push(f.rowId)}}},_create:function(){var c=this,e=null,d;this.element.addClass("coral-form-element-combogrid coral-validation-combogrid ctrl-init ctrl-form-element ctrl-init-combogrid");this._super();var b=a();if(this.options.pager){grid=a('<div id="combo_grid_'+a(this.element).attr("id")+'"><div class="combo_grid_'+a(this.element).attr("id")+'"></div></div>').appendTo(this.uiCombo.pContent)}else{grid=a('<div id="combo_grid_'+a(this.element).attr("id")+'"></div>').appendTo(this.uiCombo.pContent)}this.gridValueArr=[];this.gridTextArr=[];this.gridRowIdArr=[];d={onSelectRow:function(g,f){c._updateGridData(f);c.setValues(c.gridValueArr,c.gridTextArr,true);if(!c.options.multiple&&g.originalEvent&&g.originalEvent.type=="click"){c.hidePanel()}},onLoad:function(g,f){c.isLoaded=true;c._loadedHandler();a.each(c.gridRowIdArr,function(j,h){c.grid().grid("setSelection",h,false,null)
})},fitStyle:"fill",sortable:this.options.sortable,colModel:this.options.colModel,colNames:this.options.colNames,multiselect:this.options.multiple,width:"auto"};d=a.extend({},d,this.options.gridOptions);if(null!=this.options.url){d.url=this.options.url;d.datatype="json"}else{d.data=this.options.data;d.datatype="local"}grid.grid(d);grid.grid("refresh");this.panelRendered=true;if(null!==this.options.buttonOptions){this.$button=this._getButtonEl();this.component().append(this.$button).addClass("coral-combogrid-hasButton");this.$button.button(this.options.buttonOptions)}},_getButtonEl:function(){return a("<button type='button'></button>").addClass("coral-combogrid-button")},_getRowDataByColName:function(g){var e=this,d=this.options,b=this.grid(),c=b.grid("option","data"),f=[];if(typeof g==="string"){g=[g]}a.each(c,function(j,m){var h={};for(var k in g){var l=g[k];h[l]=m[l]}f.push(h)});return f},_getTextArrByValueArr:function(j){var g=this,b=this.options,l=this.options.valueField,d=this.options.textField,c=this._getRowDataByColName([l,d]),k=[];for(var e in j){var h=j[e],f=false;a.each(c,function(i,m){if(h==m[l]){k.push(m[d]);f=true}});if(!f){k.push(j[e])}}return k},_setDefaultValue:function(){if(!this.options.value){return}var c=this,b=this.options,d=this.options.value;if(typeof d==="string"){d=d.split(b.separator)}this.setValues(d)},setValues:function(c,g,f){if(!this.isLoaded){var b={setValues:{values:c,text:g,triggerOnChange:f}};this._addCacheItem(b)}var e=this.options;var d=[];d=this._getTextArrByValueArr(c);if(g){this._setText(g.join(e.separator))}else{this._setText(d.join(e.separator))}this._super(c,false,f);if(this.options.enableSearch&&!this.endSearch){this.endSearch=true}},setValue:function(b){this.setValues([b],false,false)},getData:function(){return this.data||[]},_selectPrev:function(){var e=this,d=null,b=0,f=e.grid().grid("getDataIDs");selarrrow=e.grid().grid("option","selarrrow");if(e.options.multiple){if(e.selectedRow){for(var c=f.length;c>=0;c--){if(e.selectedRow==f[c]){b=(c==0?(f.length-1):(c-1));
e.selectedRow=f[b];break}}if(a.inArray(e.selectedRow,selarrrow)==-1){e.grid().grid("setSelection",e.selectedRow)}}else{e.selectedRow=f.length;e.grid().grid("setSelection",f.length)}e._scrollTo(e.selectedRow)}else{d=e.grid().grid("option","selrow");if(d){b=e.grid().grid("getInd",d);if(b>=0){e.grid().grid("setSelection",f[b-2])}}else{e.grid().grid("setSelection",f.length)}}e._scrollTo(d)},_selectNext:function(){var e=this,d=null,b=0,f=e.grid().grid("getDataIDs");selarrrow=e.grid().grid("option","selarrrow");if(e.options.multiple){if(e.selectedRow&&this.endSearch!=false){for(var c=0;c<f.length;c++){if(e.selectedRow==f[c]){b=(c==f.length-1?0:(c+1));e.selectedRow=f[b];break}}if(a.inArray(e.selectedRow,selarrrow)==-1){e.grid().grid("setSelection",e.selectedRow)}}else{e.selectedRow=f[0];e.grid().grid("setSelection",f[0])}e._scrollTo(e.selectedRow)}else{d=e.grid().grid("option","selrow");if(d){var b=e.grid().grid("getInd",d);if(b<f.length){e.grid().grid("setSelection",f[b])}}else{e.grid().grid("setSelection",f[0])}}e._scrollTo(d)},_doEnter:function(){if(!this.uiCombo.panel.is(":visible")){return}this.grid().grid("setSelection",this.selectedRow)},_scrollTo:function(e){var b=this.panel();var d=b.find('.coral-row-ltr[id="'+e+'"]');if(d.length){if(d.position().top<=0){var c=b.find(".coral-grid-rows-view").scrollTop()+d.position().top-d.outerHeight();b.find(".coral-grid-rows-view").scrollTop(c)}else{if(d.position().top+d.outerHeight()>b.find(".coral-grid-rows-view").height()){var c=b.find(".coral-grid-rows-view").scrollTop()+d.position().top+d.outerHeight()-b.find(".coral-grid-rows-view").height();b.find(".coral-grid-rows-view").scrollTop(c)}}}}})})(jQuery);

/*!
 * jQuery CORALI Datepicker 4.0.1
 *
 * Depends:
 *	jquery.ui.core.js
 */
(function(d,h){d.extend(d.coral,{datepicker:{version:"4.0.2"}});var g="coral-datepicker",f;function b(){this.componentName="datepicker";this.componentFullName="coral-datepicker";this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="coral-datepicker-divId";this._inlineClass="coral-datepicker-inline";this._appendClass="coral-datepicker-append";this._triggerClass="coral-datepicker-trigger";this._dialogClass="coral-datepicker-dialog";this._disableClass="coral-datepicker-disabled";this._unselectableClass="coral-datepicker-unselectable";this._currentClass="coral-datepicker-current-day";this._dayOverClass="coral-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"",prevText:"",nextText:"&#x3E;",currentText:"",monthNames:["1","2","3","4","5","6","7","8","9","10","11","12"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"yyyy-MM-dd",formatOptions:{ymdFormat:["dd","MMdd","yyyyMM","yyyyMMdd"],ymFormat:["yyyy","yyyyMM"],yFormat:["yyyy"]},firstDay:1,isRTL:false,showMonthAfterYear:true,yearSuffix:"",monthSuffix:""};this._defaults={showOn:"button",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:true,changeYear:true,complete:true,yearRange:"c-30:c+30",showOtherMonths:true,selectOtherMonths:true,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",validDate:true,minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:true,autoSize:false,disabled:false,isLabel:false,readonly:false,value:null,required:false,showStar:true,starBefore:false,errMsg:null,errMsgPosition:"leftBottom",startDateId:null,endDateId:null,onSelect:null,onChange:null,onFormatError:null,onFormatWarn:null,srcDateFormat:null,zIndex:null,name:null,triggers:null,excluded:false};
d.extend(this._defaults,this.regional[""]);this.regional.en=d.extend(true,{},this.regional[""]);this.regional["en-US"]=d.extend(true,{},this.regional.en);this.dpDiv=c(d("<div id='"+this._mainDivId+"' class='coral-datepicker coral-component coral-component-content coral-helper-clearfix coral-corner-all'></div>"));d(document).off(".coral-datepicker").on("mousedown.coral-datepicker","#"+this._mainDivId,function(j){if(d(j.target).hasClass("menuTimeSel")){j.stopPropagation();return}d(".menuSel").hide();j.stopPropagation()})}d.extend(b.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(j){a(this._defaults,j||{});return this},_componentDatepicker:function(j){return d(j).parent().parent()},_init:function(t,r){var l=this._get(r,"id"),j=d(t).attr("name")||this._get(r,"name")||"",v=this._get(r,"value"),m=this._get(r,"width"),w=this._get(r,"height"),x=this._get(r,"cls"),o=this._get(r,"labelField"),u=this._get(r,"componentCls");if(j){d(t).removeAttr("name")}var s=d("<input id='"+l+"_srcval' name='"+j+"' type='hidden' value='"+(v==null?"":v)+"'>");var p=d("<span id='"+l+"_span2' class='coral-textbox-border coral-corner-all'></span>");var q=d("<span id='"+l+"_span1' class='coral-textbox'></span>");d(t).addClass("coral-textbox-default coral-validation-datepicker");d(t).addClass("coral-form-element-datepicker ctrl-init ctrl-form-element ctrl-init-datepicker");if(w!=null){q.outerHeight(w);d(t).outerHeight("100%")}if(m!=null){q.outerWidth(m)}q.insertAfter(d(t)).addClass(u);s.appendTo(p);d(t).appendTo(p).addClass(x);p.appendTo(q);if(null!=o){var n=d('<label class="coral-label">'+o+"</label>");p.before(n);q.addClass("coral-hasLabel")}},_attachDatepicker:function(o,l){l=l||{};var p,n,m;p=o.nodeName.toLowerCase();n=(p==="div"||p==="span");if(!o.id){if(l.id){o.id=l.id}else{}l.id=d(o).uniqueId().attr("id")}else{if(l.id){o.id=l.id}else{l.id=d(o).uniqueId().attr("id")}}l.value=d(o).val()||l.value||"";m=this._newInst(d(o),n);
if(p==="input"){var j=d.parser.parseOptions(o,[],["dataCustom","formatOptions"]);d.extend(true,l,j)}if(l.startDateId){d("#"+l.startDateId).datepicker("option","endDateId",o.id)}l=d.extend({},this._defaults,d.fn.datepicker.defaults,l||{});if(l.dateFormat!=null&&l.srcDateFormat==null){l.srcDateFormat=l.dateFormat}m.settings=d.extend({},l||{});this._init(o,m);if(p==="input"){this._connectDatepicker(o,m)}else{if(n){this._inlineDatepicker(o,m)}}d.validate.addField(d(o),l)},_newInst:function(l,j){var m=l[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");this.dpDiv.css({display:"none"});l.attr("component-role",this.componentName);return{id:m,input:l,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:j,isShow:false,dpDiv:(!j?this.dpDiv:c(d("<div class='"+this._inlineClass+" coral-datepicker coral-datepicker-panel coral-component coral-component-content coral-helper-clearfix coral-corner-all'></div>")))}},_connectDatepicker:function(m,l){var j=d(m);l.append=d([]);l.trigger=d([]);if(j.hasClass(this.markerClassName)){return}this._attachments(j,l);j.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(l);d.data(m,g,l);if(l.settings.disabled){this._disableDatepicker(m)}if(l.settings.readonly){this._readonlyDatepicker(m,l.settings.readonly)}if(l.settings.isLabel){this._isLabelDatepicker(m,l.settings.isLabel)}},_processDefaultDate:function(q,p,j){if(j==""){p.selectedDay=p.currentDay=null;p.selectedMonth=p.currentMonth=null;p.selectedYear=p.currentYear=null;p.currentHur=null;p.currentMiu=null;p.currentSed=null;p.input.val("");return null}var l=q._get(p,"srcDateFormat");var o=null;try{o=q.parseDate(l,j,q._getFormatConfig(p))}catch(r){q._apply(p,"onFormatError",[j,p]);q._apply(p,"onFormatWarn",[j,p]);return null}p.selectedDay=p.currentDay=o.getDate();p.selectedMonth=p.currentMonth=o.getMonth();p.selectedYear=p.currentYear=o.getFullYear();p.currentHur=o.getHours();p.currentMiu=o.getMinutes();p.currentSed=o.getSeconds();
var n=q._daylightSavingAdjustWidthTime(new Date(p.currentYear,p.currentMonth,p.currentDay),[p.currentHur,p.currentMiu,p.currentSed]);var s=this.getFormatter(p.settings.value,this._get(p,"srcDateFormat"),this._getFormatConfig(p));var m="";if(p.settings.value!=""){m=this.completeFormate(s,l,p);m=this.formatDate(m,n,this._getFormatConfig(p))}p.input.val(m);return n},_attachments:function(p,n){var o=this;var r,q,t,m=this._get(n,"appendText"),l=this._get(n,"isRTL");if(n.append){n.append.remove()}if(m){n.append=d("<span class='"+this._appendClass+"'>"+m+"</span>");p[l?"before":"after"](n.append)}p.unbind("focus",this._showDatepicker);p.unbind("blur");p.unbind("mouseleave");p.unbind("mouseenter");p.unbind("attachments");if(n.trigger){n.trigger.remove()}var j=o._get(n,"defaultDate")||o._get(n,"value");if(""==p.parent().find("input[type='hidden']").val()&&typeof j==="string"&&j!=""){o._processDefaultDate(o,n,j);o._setHiddenInputValue(n)}else{var s=o._getHiddenInputValue(n);o._processDefaultDate(o,n,s)}r=this._get(n,"showOn");p.focus(function(u){o._inputFocus(n);if(r==="focus"||r==="both"){o._showDatepicker(u)}});if(r==="button"||r==="both"){q=this._get(n,"buttonText");n.trigger=d("<span/>").addClass("coral-icon-calendar icon icon-calendar4");p[l?"before":"after"](n.trigger);if(this._get(n,"isLabel")!=true){p.parent().addClass("coral-datepicker-no-close")}n.trigger.click(function(u){if(d.datepicker._datepickerShowing&&d.datepicker._lastInput===p[0]){d.datepicker._hideDatepicker()}else{if(d.datepicker._datepickerShowing&&d.datepicker._lastInput!==p[0]){d.datepicker._hideDatepicker()}else{}}d.datepicker._showDatepicker(p[0]);return false})}p.blur(function(u){o._inputBlur(n)});p.mouseleave(function(){if(n.settings.readonly||n.settings.isLabel||n.settings.disabled){return}p.parent().parent().removeClass("coral-textbox-hover")});p.mouseenter(function(){if(n.settings.readonly||n.settings.isLabel||n.settings.disabled){return}p.parent().parent().addClass("coral-textbox-hover")});p.bind("keyup.attachments",function(u){switch(u.keyCode){case 9:d.datepicker._showDatepicker(u);
break}})},_autoSize:function(q){if(this._get(q,"autoSize")&&!q.inline){var n,l,m,p,o=new Date(2009,12-1,20),j=this._get(q,"dateFormat");if(j.match(/[DM]/)){n=function(r){l=0;m=0;for(p=0;p<r.length;p++){if(r[p].length>l){l=r[p].length;m=p}}return m};o.setMonth(n(this._get(q,(j.match(/MM/)?"monthNames":"monthNamesShort"))));o.setDate(n(this._get(q,(j.match(/DD/)?"dayNames":"dayNamesShort")))+20-o.getDay())}q.input.attr("size",this._formatDate(q,o).length)}},_inlineDatepicker:function(l,j){var m=d(l);if(m.hasClass(this.markerClassName)){return}m.addClass(this.markerClassName).append(j.dpDiv);d.data(l,g,j);this._setDate(j,this._getDefaultDate(j),true);this._updateDatepicker(j);this._updateAlternate(j);if(j.settings.disabled){this._disableDatepicker(l)}j.dpDiv.css("display","block")},_dialogDatepicker:function(r,l,p,m,q){var j,u,o,t,s,n=this._dialogInst;if(!n){this.uuid+=1;j="dp"+this.uuid;this._dialogInput=d("<input type='text' id='"+j+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.keydown(this._doKeyDown);d("body").append(this._dialogInput);n=this._dialogInst=this._newInst(this._dialogInput,false);n.settings={};d.data(this._dialogInput[0],g,n)}a(n.settings,m||{});l=(l&&l.constructor===Date?this._formatDate(n,l):l);this._dialogInput.val(l);this._pos=(q?(q.length?q:[q.pageX,q.pageY]):null);if(!this._pos){u=document.documentElement.clientWidth;o=document.documentElement.clientHeight;t=document.documentElement.scrollLeft||document.body.scrollLeft;s=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(u/2)-100+t,(o/2)-150+s]}this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");n.settings.onSelect=p;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if(d.blockUI){d.blockUI(this.dpDiv)}d.data(this._dialogInput[0],g,n);return this},_destroyDatepicker:function(m){var n,j=d(m),l=d.data(m,g);d(m).parent().parent().replaceWith(j);if(!j.hasClass(this.markerClassName)){return
}n=m.nodeName.toLowerCase();d.removeData(m,g);if(n==="input"){l.append.remove();l.trigger.remove();j.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else{if(n==="div"||n==="span"){j.removeClass(this.markerClassName).empty()}}j.removeAttr("component-role").removeClass("coral-textbox-default coral-validation-datepicker coral-form-element-datepicker ctrl-init ctrl-form-element ctrl-init-datepicker").removeAttr("data-options")},_enableDatepicker:function(n){var o,m,j=d(n),l=d.data(n,g);if(!j.hasClass(this.markerClassName)){return}o=n.nodeName.toLowerCase();if(o==="input"){n.disabled=false;l.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""});j.parent().parent().removeClass("coral-state-disabled")}else{if(o==="div"||o==="span"){m=j.children("."+this._inlineClass);m.children().removeClass("coral-state-disabled");m.find("select.coral-datepicker-month, select.coral-datepicker-year").prop("disabled",false)}}this._disabledInputs=d.map(this._disabledInputs,function(p){return(p===n?null:p)})},_disableDatepicker:function(n){var o,m,j=d(n),l=d.data(n,g);if(!j.hasClass(this.markerClassName)){return}o=n.nodeName.toLowerCase();if(o==="input"){n.disabled=true;l.trigger.css({opacity:"0.5",cursor:"default"});j.parent().parent().addClass("coral-state-disabled")}else{if(o==="div"||o==="span"){m=j.children("."+this._inlineClass);m.children().addClass("coral-state-disabled");m.find("select.coral-datepicker-month, select.coral-datepicker-year").prop("disabled",true)}}this._disabledInputs=d.map(this._disabledInputs,function(p){return(p===n?null:p)});this._disabledInputs[this._disabledInputs.length]=n},_readonlyDatepicker:function(n,l){var m,j=d(n);if(!j.hasClass(this.markerClassName)){return}d(n).parent().parent().removeClass("coral-isLabel");d(n).parent().parent().toggleClass("coral-readonly",l);d.datepicker._readonly(n,l)
},_readonly:function(m,j){var n=m.nodeName.toLowerCase(),l=d.data(m,g);if(n==="input"&&j){m.readOnly=true;l.trigger.filter("button").each(function(){this.readOnly=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}if(n==="input"&&!j){if(d.datepicker._isIsLabelDatepicker(l)){return}m.readOnly=false;l.trigger.filter("button").each(function(){this.readOnly=false}).end().filter("img").css({opacity:"1.0",cursor:""})}},_isReadonlyDatepicker:function(j){if(d.datepicker._get(j,"readonly")){return d.datepicker._get(j,"readonly")}return false},_isIsLabelDatepicker:function(j){if(d.datepicker._get(j,"isLabel")){return d.datepicker._get(j,"isLabel")}return false},_isLabelDatepicker:function(o,l){var n,j=d(o),m=d.data(o,g);if(!j.hasClass(this.markerClassName)){return}var p=d.datepicker._get(m,"id");if(l){j.parent().removeClass("coral-datepicker-no-close");j.parent().parent().removeClass("coral-readonly");j.parent().parent().addClass("coral-isLabel")}else{j.parent().parent().removeClass("coral-isLabel coral-readonly");j.parent().addClass("coral-datepicker-no-close")}d.datepicker._set(m,"readonly",l);d.datepicker._set(m,"isLabel",l);d.datepicker._readonly(o,l)},_isDisabledDatepicker:function(l){if(!l){return false}for(var j=0;j<this._disabledInputs.length;j++){if(this._disabledInputs[j]===l){return true}}return false},_getInst:function(l){try{if("object"===l.nodeName.toLowerCase()){return false}return d.data(l,g)}catch(j){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(q,s,r){var p=this;var m,l,n,j,o=this._getInst(q);if(arguments.length===2&&typeof s==="string"){return(s==="defaults"?d.extend({},d.datepicker._defaults):(o?(s==="all"?d.extend({},o.settings):this._get(o,s)):null))}if(arguments.length===1){return o?d.extend({},o.settings):null}m=s||{};if(typeof s==="string"){m={};m[s]=r}if(o){if(this._curInst===o){this._hideDatepicker()}l=this._getDateDatepicker(q,true);n=this._getMinMaxDate(o,"min");j=this._getMinMaxDate(o,"max");a(o.settings,m);
if(n!==null&&m.dateFormat!==h&&m.minDate===h){o.settings.minDate=this._formatDate(o,n)}if(j!==null&&m.dateFormat!==h&&m.maxDate===h){o.settings.maxDate=this._formatDate(o,j)}if("disabled" in m){if(m.disabled){this._disableDatepicker(q)}else{this._enableDatepicker(q)}}if("readonly" in m){this._readonlyDatepicker(q,m.readonly)}if("isLabel" in m){this._isLabelDatepicker(q,m.isLabel)}if("showAnim" in m){return}this._attachments(d(q),o);this._autoSize(o);this._setDate(o,l);this._updateDatepicker(o);this._updateAlternate(o);this._setHiddenInputValue(o);d(q).trigger("onOptionChange",{key:s,value:m[s]})}},_validDatepicker:function(l){var j={hasTips:false,element:d(l)};return(d.validate.validateField(null,j).length>0?false:true)},_changeDatepicker:function(m,j,l){this._optionDatepicker(m,j,l)},_refreshDatepicker:function(l){var j=this._getInst(l);if(j){this._updateDatepicker(j)}},_setValueDatepicker:function(l,j){d(l).datepicker("option","value",j)},_getValueDatepicker:function(l,j){return d(l).datepicker("option","value")},_setDateDatepicker:function(m,j){var l=this._getInst(m);if(l){this._setDate(l,j);this._updateDatepicker(l);this._updateAlternate(l);this._setHiddenInputValue(l)}},_getDateDatepicker:function(m,j){var l=this._getInst(m);if(l&&!l.inline){this._setDateFromField(l,j)}return(l?this._getDate(l):null)},_getDateValueDatepicker:function(l){var j=this._getInst(l);return this._getHiddenInputValue(j)},_doKeyDown:function(o){var m,j,q,p=d.datepicker._getInst(o.target),r=true,n=p.dpDiv.is(".coral-datepicker-rtl");var l=d.datepicker._getHiddenInputValue(p);p._keyEvent=true;if(d.datepicker._datepickerShowing){switch(o.keyCode){case 9:d.datepicker._hideDatepicker();r=false;break;case 13:q=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",p.dpDiv);if(q[0]){d.datepicker._selectDay(o.target,p.selectedMonth,p.selectedYear,q[0])}m=d.datepicker._get(p,"onSelect");if(m){j=d.datepicker._formatDate(p)}else{d.datepicker._hideDatepicker()}return false;case 27:d.datepicker._hideDatepicker();
break;case 33:d.datepicker._adjustDate(o.target,(o.ctrlKey?-d.datepicker._get(p,"stepBigMonths"):-d.datepicker._get(p,"stepMonths")),"M");break;case 34:d.datepicker._adjustDate(o.target,(o.ctrlKey?+d.datepicker._get(p,"stepBigMonths"):+d.datepicker._get(p,"stepMonths")),"M");break;case 35:if(o.ctrlKey||o.metaKey){d.datepicker._clearDate(o.target)}r=o.ctrlKey||o.metaKey;break;case 36:if(o.ctrlKey||o.metaKey){d.datepicker._gotoToday(o.target)}r=o.ctrlKey||o.metaKey;break;case 37:if(o.ctrlKey||o.metaKey){d.datepicker._adjustDate(o.target,(n?+1:-1),"D")}r=o.ctrlKey||o.metaKey;if(o.originalEvent.altKey){d.datepicker._adjustDate(o.target,(o.ctrlKey?-d.datepicker._get(p,"stepBigMonths"):-d.datepicker._get(p,"stepMonths")),"M")}break;case 38:if(o.ctrlKey||o.metaKey){d.datepicker._adjustDate(o.target,-7,"D")}r=o.ctrlKey||o.metaKey;break;case 39:if(o.ctrlKey||o.metaKey){d.datepicker._adjustDate(o.target,(n?-1:+1),"D")}r=o.ctrlKey||o.metaKey;if(o.originalEvent.altKey){d.datepicker._adjustDate(o.target,(o.ctrlKey?+d.datepicker._get(p,"stepBigMonths"):+d.datepicker._get(p,"stepMonths")),"M")}break;case 40:if(o.ctrlKey||o.metaKey){d.datepicker._adjustDate(o.target,+7,"D")}r=o.ctrlKey||o.metaKey;break;default:r=false}}else{if(o.keyCode===36&&o.ctrlKey){d.datepicker._showDatepicker(this)}else{r=false;switch(o.keyCode){case 9:case 13:d.datepicker._setHiddenInputValue(p);datestr=d.datepicker._getHiddenInputValue(p);d.datepicker._change(p,l,datestr);break}d.datepicker._trigger(p,"onKeyDown",o,[{oldValue:l,value:p.input.val()}])}}if(r){o.preventDefault();o.stopPropagation()}},_change:function(n,j,m,l){if(j!=m){this._trigger(n,"onChange",l,[{oldValue:j,newValue:m,value:m}])}},_doKeyPress:function(j){},_doKeyUp:function(o){var m,p=d.datepicker._getInst(o.target);var l=d.datepicker._getHiddenInputValue(p);if(p.input.val()!==p.lastVal){try{if(p.input.val()==""){p.selectedDay=null;p.drawMonth=p.selectedMonth=null;p.drawYear=p.selectedYear=null;p.currentDay=null;p.currentMonth=null;p.currentYear=null;
p.currentHur=null;p.currentMiu=null;p.currentSed=null}m=d.datepicker.parseDate(d.datepicker._get(p,"dateFormat"),(p.input?p.input.val():null),d.datepicker._getFormatConfig(p));p.input.addClass("isEdit");if(m&&d.datepicker._checkDateRange(p,m)===0){d.datepicker._setDateFromField(p);d.datepicker._updateAlternate(p)}var j=p.input.val()}catch(n){var j=p.input.val();d.datepicker._apply(p,"onFormatError",[j,p]);d.datepicker._apply(p,"onFormatWarn",[j,p])}d.datepicker._trigger(p,"onKeyUp",o,[{oldValue:l,value:p.input.val()}])}return true},_trigger:function(o,p,m,n){var l,r,s={};n=n||{};m=d.Event(m);m.type=("datepicker"+p).toLowerCase();m.target=o.input[0];r=m.originalEvent;if(r){for(l in r){if(!(l in m)){m[l]=r[l]}}}d(m.target).trigger(m,n);var t=d.datepicker._get(o,p);var j=d.datepicker._get(o,"dataCustom");var q=d.coral.toFunction(t);m.data=m.data||{};d.extend(m.data,j);return !(d.isFunction(q)&&q.apply((o.input?o.input[0]:null),[m].concat(n))===false||m.isDefaultPrevented())},_checkDateRange:function(m,j){var l=this._getMinMaxDate(m,"min");var n=this._getMinMaxDate(m,"max");if(n!=null&&j>n){return 1}if(l!=null&&j<l){return 2}return 0},_srcDateFormatSeparator:function(j){var l="/";if(j.indexOf("/")>-1){return l}if(j.indexOf("-")>-1){l="-";return l}},_setHiddenInputValue:function(o){if(o.input.val()==""){o.input.parent().find("input[type='hidden']").val("");return}var j=this._get(o,"dateFormat");var n=n||this._get(o,"srcDateFormat");var q=this._srcDateFormatSeparator(n);if(o.currentYear==null||o.currentMonth==null){o.input.parent().find("input[type='hidden']").val("");return}var m=this._daylightSavingAdjustWidthTime(new Date(o.currentYear,o.currentMonth,o.currentDay),[o.currentHur,o.currentMiu,o.currentSed]);var p=this.getFormatter(o.input.val(),this._get(o,"srcDateFormat"),this._getFormatConfig(o));datestr=this.completeFormate(p,j,o);if(this._get(o,"complete")){var l=this.formatDate(n,m,this._getFormatConfig(o))}else{var l=this.formatDate(datestr,m,this._getFormatConfig(o));
if(l.indexOf("-")>-1){var l=l.indexOf(q)==-1?l.replace(/-/gm,q):l}if(l.indexOf("/")>-1){var l=l.indexOf(q)==-1?l.replace(/\//gm,q):l}}o.input.parent().find("input[type='hidden']").val(l)},_getHiddenInputValue:function(j){var l=this._get(j,"id");return j.input.parent().find("input[type='hidden']").val()},_createEditFormat:function(l){var j="";if(l!=null){if(this._isYearMonthMode(l)){j+="yyyy-MM"}else{j+="yyyy-MM-dd"}if(this._hasTime(l)){j+=" HH:mm:ss"}}return j},completeFormate:function(m,j,t){var r,q,p=null;var v=function(w){var x=w.indexOf("/")>-1?w.replace(/\//g,""):w.replace(/-/g,"");if(w.indexOf("d")==-1){for(i=0;i<x.length-1;i++){if(x[i]!=x[i+1]){var y=i}}if(w.indexOf("/")>-1){p="/"}if(w.indexOf("-")>-1){p="-"}if(w.indexOf("-")==-1&&w.indexOf("/")==-1){p=""}r=x.substr(0,y+1);q=x.substr(y+1,x.length);l=r+p+q}return l};if(this._get(t,"complete")){return j}else{if(j.indexOf("d")==-1){if(m.indexOf("M")==-1){return m}var l=v(j)}if(j.indexOf("d")>-1){var u=j.indexOf("y"),s=j.indexOf("d"),o=j.substr(s+2,j.length),n=j.substr(0,s-1);if(m.length==2){return m}if(m.indexOf("y")>-1&&m.indexOf("d")>-1){return j}if(m.indexOf("d")==-1){if(m.indexOf("M")==-1){return m}if(s==0){l=o}if(s==8){l=n}if(s==3){l=n+o}}else{if(u==0){l=j.substr(u+5,j.length)}if(u==6){l=j.substr(0,u-1)}}}return l}},_inputFocus:function(o){d.datepicker._componentDatepicker(o.input).addClass("coral-state-focus");var j=this._get(o,"dateFormat");if(d.datepicker._isReadonlyDatepicker(o)||d.datepicker._isIsLabelDatepicker(o)){return}var n="";var l=this._daylightSavingAdjustWidthTime(new Date(o.currentYear,o.currentMonth,o.currentDay),[o.currentHur,o.currentMiu,o.currentSed]);if(o.currentYear&&o.input.val()!==""){var m=this.getFormatter(o.input.val(),this._get(o,"srcDateFormat"),this._getFormatConfig(o));var n=this.completeFormate(m,j,o);n=this.formatDate(n,l,this._getFormatConfig(o))}o.input.val(n)},_inputBlur:function(q){d.datepicker._componentDatepicker(q.input).removeClass("coral-state-focus");var j=this._get(q,"dateFormat");
if(d.datepicker._isReadonlyDatepicker(q)||d.datepicker._isIsLabelDatepicker(q)){return}var n=this._getHiddenInputValue(q);var p="";var m=this._daylightSavingAdjustWidthTime(new Date(q.currentYear,q.currentMonth,q.currentDay),[q.currentHur,q.currentMiu,q.currentSed]);if((typeof q.currentYear!="undefined"||q.currentYear!=null)&&!q.isShow){var o=this.getFormatter(q.input.val(),this._get(q,"srcDateFormat"),this._getFormatConfig(q));if(""!=q.input.val()){p=this.completeFormate(o,j,q);p=this.formatDate(p,m,this._getFormatConfig(q))}q.input.val(p);this._setHiddenInputValue(q);if(p!==n){var r=this._get(q,"startDateId");var l=this._get(q,"endDateId");if(r){d("#"+r).datepicker("option","maxDate",p)}if(l){d("#"+l).datepicker("option","minDate",p)}}}d.datepicker._change(q,n,p,null);this._trigger(q,"onBlur",event,[{value:p}])},_focusDatepicker:function(j){j=j.target||j;if(j.nodeName.toLowerCase()!=="input"){j=d("input",j.parentNode)[0]}if(d.datepicker._isDisabledDatepicker(j)||d.datepicker._lastInput===j||d.datepicker._isReadonlyDatepicker(d.datepicker._getInst(j))||d.datepicker._isIsLabelDatepicker(d.datepicker._getInst(j))){return false}var l=d.datepicker._getInst(j);l.input.focus();return true},_showDatepicker:function(t){t=t.target||t;if(t.nodeName.toLowerCase()!=="input"){t=d("input",t.parentNode)[0]}if(d.datepicker._isDisabledDatepicker(t)||d.datepicker._lastInput===t||d.datepicker._isReadonlyDatepicker(d.datepicker._getInst(t))||d.datepicker._isIsLabelDatepicker(d.datepicker._getInst(t))){return}var r,o,s,n,q,l,p;r=d.datepicker._getInst(t);if(d.datepicker._curInst&&d.datepicker._curInst!==r){d.datepicker._curInst.dpDiv.stop(true,true);if(r&&d.datepicker._datepickerShowing){d.datepicker._hideDatepicker(d.datepicker._curInst.input[0])}}o=d.datepicker._get(r,"beforeShow");s=o?o.apply(t,[t,r]):{};if(s===false){return}a(r.settings,s);r.lastVal=null;d.datepicker._lastInput=t;d.datepicker._setDateFromField(r);if(d.datepicker._inDialog){t.value=""}if(!d.datepicker._pos){d.datepicker._pos=d.datepicker._findPos(t);
d.datepicker._pos[1]+=t.offsetHeight}n=false;d(t).parents().each(function(){n|=d(this).css("position")==="fixed";return !n});q={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;r.dpDiv.empty();r.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(r);q=d.datepicker._checkOffset(r,q,n);r.dpDiv.css({position:(d.datepicker._inDialog&&d.blockUI?"static":(n?"fixed":"absolute")),display:"none",left:q.left+"px",top:q.top+"px"});if(!r.isShow){r.isShow=true;if(!r.inline){l=d.datepicker._get(r,"showAnim");p=d.datepicker._get(r,"duration");if(this._get(r,"zIndex")!=null){r.dpDiv.zIndex(this._get(r,"zIndex"))}d.datepicker._datepickerShowing=true;if(d.effects&&d.effects.effect[l]){r.dpDiv.show(l,d.datepicker._get(r,"showOptions"),p)}else{r.dpDiv[l||"show"](l?p:null)}if(d.datepicker._shouldFocusInput(r)){r.input.focus()}d.datepicker._curInst=r}var j=d(r.dpDiv);(function m(){var u=d(t).parent().parent();if(r.isShow){j.css({left:d.coral.getLeft(j,u),top:d.coral.getTop(j,u)});setTimeout(m,200)}})()}r.dpDiv.find("#dpTimeSpinner").spinner("setValue",r.dpDiv.find("#dpTimeHour").val())},_updateDateTime:function(o){var r=this,u,m,q;var l=this._getMinMaxDate(o,"min");var j=this._getMinMaxDate(o,"max");var n=new Date(l);maxDay=new Date(j);var s=new Date(o.selectedYear,o.selectedMonth,o.selectedDay),p=new Date(n.getFullYear(),n.getMonth(),n.getDate()),t=new Date(maxDay.getFullYear(),maxDay.getMonth(),maxDay.getDate());o.dpDiv.find("#dpTimeSpinner").spinner({max:24,min:0,step:1,componentCls:"dptimespinner",onSpin:function(A,y){var x=d(this).spinner("getValue");if(d.datepicker.focusInput=="dpTimeHour"){o.dpDiv.find("#dpTimeHour").val(y.value);u=o.dpDiv.find("#dpTimeHour").val();if(new Date(s).getTime()==new Date(p).getTime()&&(l&&u<n.getHours())||(j&&u>maxDay.getHours())){o.dpDiv.find("#dpTimeHour").val(x);return false}}if(d.datepicker.focusInput=="dpTimeMinute"){o.dpDiv.find("#dpTimeMinute").val(y.value);var w=o.dpDiv.find("#dpTimeMinute").val();
var v=o.dpDiv.find("#dpTimeHour").val();if(new Date(s).getTime()==new Date(p).getTime()&&(l&&w<n.getMinutes()&&v<=n.getHours())||(j&&w>=maxDay.getMinutes()&&v>=maxDay.getHours())){o.dpDiv.find("#dpTimeMinute").val(x);return false}}if(d.datepicker.focusInput=="dpTimeSecond"){o.dpDiv.find("#dpTimeSecond").val(y.value);q=o.dpDiv.find("#dpTimeSecond").val();var v=o.dpDiv.find("#dpTimeHour").val(),z=o.dpDiv.find("#dpTimeMinute").val();if(new Date(s).getTime()==new Date(p).getTime()&&(l&&q<n.getSeconds()&&v<=n.getHours()&&z<=n.getMinutes())||(j&&q>maxDay.getSeconds()&&v>=maxDay.getHours()&&z>=maxDay.getMinutes())){o.dpDiv.find("#dpTimeSecond").val(x);return false}}}});o.dpDiv.find("#dpTimeSpinner").spinner("setValue",o.dpDiv.find("#dpTimeHour").val())},_updateDatepicker:function(n){this.maxRows=4;f=n;n.dpDiv.empty().append(this._generateHTML(n));this._updateDateTime(n);this._attachHandlers(n);this._attachTimeHandlers(n);var p,j=this._getNumberOfMonths(n),o=j[1],m=17,l=n.dpDiv.find("."+this._dayOverClass+" a");if(l.length>0){e.apply(l.get(0))}n.dpDiv.removeClass("coral-datepicker-multi-2 coral-datepicker-multi-3 coral-datepicker-multi-4").width("");if(o>1){n.dpDiv.addClass("coral-datepicker-multi-"+o).css("width",(m*o)+"em")}n.dpDiv[(j[0]!==1||j[1]!==1?"add":"remove")+"Class"]("coral-datepicker-multi");n.dpDiv[(this._get(n,"isRTL")?"add":"remove")+"Class"]("coral-datepicker-rtl");if(n===d.datepicker._curInst&&d.datepicker._datepickerShowing&&d.datepicker._shouldFocusInput(n)){}if(n.yearshtml){p=n.yearshtml;setTimeout(function(){if(p===n.yearshtml&&n.yearshtml){n.dpDiv.find("select.coral-datepicker-year:first").replaceWith(n.yearshtml)}p=n.yearshtml=null},0)}},_shouldFocusInput:function(j){return j.input&&j.input.is(":visible")&&!j.input.is(":disabled")&&!j.input.is(":focus")},_checkOffset:function(p,n,m){var o=p.dpDiv.outerWidth(),s=p.dpDiv.outerHeight(),r=p.input?p.input.outerWidth():0,j=p.input?p.input.outerHeight():0,q=document.documentElement.clientWidth+(m?0:d(document).scrollLeft()),l=document.documentElement.clientHeight+(m?0:d(document).scrollTop());
n.left-=(this._get(p,"isRTL")?(o-r):0);n.left-=(m&&n.left===p.input.offset().left)?d(document).scrollLeft():0;n.top-=(m&&n.top===(p.input.offset().top+j))?d(document).scrollTop():0;n.left-=Math.min(n.left,(n.left+o>q&&q>o)?Math.abs(n.left+o-q):0);n.top-=Math.min(n.top,(n.top+s>l&&l>s)?Math.abs(s+j):0);return n},_findPos:function(n){var j,m=this._getInst(n),l=this._get(m,"isRTL");while(n&&(n.type==="hidden"||n.nodeType!==1||d.expr.filters.hidden(n))){n=n[l?"previousSibling":"nextSibling"]}j=d(n).offset();return[j.left,j.top]},_hideDatepicker:function(m){var l,p,o,j,n=this._curInst;if(!n||(m&&n!==d.data(m,g))){return}n.isShow=false;if(this._datepickerShowing){l=this._get(n,"showAnim");p=this._get(n,"duration");o=function(){d.datepicker._tidyDialog(n)};if(d.effects&&(d.effects.effect[l]||d.effects[l])){n.dpDiv.hide(l,d.datepicker._get(n,"showOptions"),p,o)}else{n.dpDiv[(l==="slideDown"?"slideUp":(l==="fadeIn"?"fadeOut":"hide"))]((l?p:null),o)}if(!l){o()}this._datepickerShowing=false;j=this._get(n,"onClose");if(j){j.apply((n.input?n.input[0]:null),[(n.input?n.input.val():""),n])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(d.blockUI){d.unblockUI();d("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(j){j.dpDiv.removeClass(this._dialogClass).unbind(".coral-datepicker-calendar")},_checkExternalClick:function(l){if(!d.datepicker._curInst){return}var j=d(l.target),m=d.datepicker._getInst(j[0]);if(l.isDefaultPrevented()){return}if(((j[0].id!==d.datepicker._mainDivId&&j.parents("#"+d.datepicker._mainDivId).length===0&&!j.hasClass(d.datepicker.markerClassName)&&!j.closest("."+d.datepicker._triggerClass).length&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)))||(j.hasClass(d.datepicker.markerClassName)&&d.datepicker._curInst!==m)){d.datepicker._hideDatepicker()}},_adjustDate:function(o,n,m){var l=d(o),j=this._getInst(l[0]);if(this._isDisabledDatepicker(l[0])||d.datepicker._isReadonlyDatepicker(j)||d.datepicker._isIsLabelDatepicker(j)){return
}this._adjustInstDate(j,n+(m==="M"?this._get(j,"showCurrentAtPos"):0),m);this._updateDatepicker(j)},_gotoToday:function(p){var l,o=d(p),n=this._getInst(o[0]);if(this._get(n,"gotoCurrent")&&n.currentDay){n.selectedDay=n.currentDay;n.drawMonth=n.selectedMonth=n.currentMonth;n.drawYear=n.selectedYear=n.currentYear}else{l=new Date();n.selectedDay=l.getDate();n.drawMonth=n.selectedMonth=l.getMonth();n.drawYear=n.selectedYear=l.getFullYear()}this._notifyChange(n);this._adjustDate(o);var j=this._hasTime(this._get(n,"dateFormat"));var m=n.dpDiv.children("table").find(".coral-datepicker-today");this._selectDay(p,+m.attr("data-month"),+m.attr("data-year"),m[0])},_selectMonthYear:function(l,s,q,r){var p=d(l),o=this._getInst(p[0]);var m=this._isYearMonthMode(this._get(o,"dateFormat"));if(m===true){o["draw"+(q==="M"?"Month":"Year")]=parseInt(q==="M"?d(s).attr("data-month"):s.options[s.selectedIndex].value,10)}else{o["draw"+(q==="M"?"Month":"Year")]=parseInt(s.options[s.selectedIndex].value,10)}o["selected"+(q==="M"?"Month":"Year")]=o["draw"+(q==="M"?"Month":"Year")];var j=this._getHiddenInputValue(o);this._setMonthYearValue(this,o);var n=this._getHiddenInputValue(o);this._notifyChange(o);if(r){d.datepicker._change(o,j,n,null)}this._adjustDate(p)},_setMonthYearValue:function(n,m){var j=n._get(m,"dateFormat");if(n._isYearMonthMode(j)){m.currentYear=m.selectedYear;m.currentMonth=m.selectedMonth;m.currentDay=m.selectedDay=1;var l=n._formatDate(m);if(m.input){m.input.val(l)}n._setHiddenInputValue(m)}},_selectDay:function(m,r,s,n){var p,o,l;target=d(m);if(d(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])||d.datepicker._isReadonlyDatepicker(d.datepicker._getInst(target[0]))||d.datepicker._isIsLabelDatepicker(d.datepicker._getInst(target[0]))){return}p=this._getInst(target[0]);p.selectedDay=p.currentDay=d("a",n).html();p.selectedMonth=p.currentMonth=r;p.selectedYear=p.currentYear=s;dateFormat=this._get(p,"dateFormat");this._autoFixInput(this,p);var t=p.dpDiv.find("#dpTimeHour").val();
var j=p.dpDiv.find("#dpTimeMinute").val();var q=p.dpDiv.find("#dpTimeSecond").val();p.currentHur=t;p.currentMiu=j;p.currentSed=q;this._selectDate(m,this._formatDate(p,p.currentDay,p.currentMonth,p.currentYear));d(n).parent().parent().find("a").removeClass("coral-state-active");d(n).children("a").addClass("coral-state-active");this._updateDatepicker(p)},_clearDate:function(l){var j=d(l);this._selectDate(j,"")},_selectDate:function(m,p){var t,s=d(m),q=this._getInst(s[0]);var l=this._get(q,"dateFormat");var u=this._hasTime(l);p=(p!=null?p:this._formatDate(q));if(q.input){if(!u){q.input.val(p)}}this._updateAlternate(q);if(q.inline){this._updateDatepicker(q)}else{if(!u){this._hideDatepicker();this._lastInput=q.input[0];if(typeof(q.input[0])!=="object"){q.input.focus()}this._lastInput=null;var j=this._getHiddenInputValue(q);this._setHiddenInputValue(q);var o=this._getHiddenInputValue(q);if(o!==j){var n=this._get(q,"startDateId");var r=this._get(q,"endDateId");if(n){d("#"+n).datepicker("option","maxDate",o)}if(r){d("#"+r).datepicker("option","minDate",o)}d.datepicker._change(q,j,o,null)}}else{}}this._trigger(q,"onSelect",null,[{oldValue:j,newValue:o}])},_attachTimeHandlers:function(l){var j=this;l.dpDiv.find("#dpTimeEnsure").bind("mousedown",function(m){j._autoFixInput(j,l);d.datepicker._selectDateTime(l);m.preventDefault()});this._verifyInput(l,l.dpDiv.find("#dpTimeHour"),"H");this._verifyInput(l,l.dpDiv.find("#dpTimeMinute"),"m");this._verifyInput(l,l.dpDiv.find("#dpTimeSecond"),"s")},_autoFixInput:function(s,q){var p=0;var o=s._getMinMaxDate(q,"min");var j=s._getMinMaxDate(q,"max");var t=q.dpDiv.find("#dpTimeHour").val();var l=q.dpDiv.find("#dpTimeMinute").val();var r=q.dpDiv.find("#dpTimeSecond").val();t=t.replace(/[^0-9]/g,"");if(t==""){t=q.currentHur}l=l.replace(/[^0-9]/g,"");if(l==""){l=q.currentMiu}r=r.replace(/[^0-9]/g,"");if(r==""){r=q.currentSed}var n=new Date(q.currentYear,q.currentMonth,q.currentDay,t,l,r);var m=n;if(s._checkDateRange(q,n)===1){m=j}else{if(s._checkDateRange(q,n)===2){m=o
}}q.dpDiv.find("#dpTimeHour").val(m.getHours()||"00");q.dpDiv.find("#dpTimeMinute").val(m.getMinutes()||"00");q.dpDiv.find("#dpTimeSecond").val(m.getSeconds()||"00")},_verifyInput:function(p,l,n){var o=this,m=0,j=59;j=n=="H"?23:j;l.change(function(){o._autoFixInput(o,p)}).bind("paste",function(){o._autoFixInput(o,p)})},_selectDateTime:function(p){var m=this._getHiddenInputValue(p);var j=p.dpDiv.find("#dpTimeHour").val();var r=p.dpDiv.find("#dpTimeMinute").val();var n=p.dpDiv.find("#dpTimeSecond").val();p.currentHur=j;p.currentMiu=r;p.currentSed=n;if(p.selectedYear){}p.input.val(this._formatDate(p));this._setHiddenInputValue(p);this._updateAlternate(p);var o=this._getHiddenInputValue(p);d.datepicker._change(p,m,o,null);target=d(p.input[0]);if(target){var q=this._get(p,"startDateId");var l=this._get(p,"endDateId");if(q){d("#"+q).datepicker("option","maxDate",o)}if(l){d("#"+l).datepicker("option","minDate",o)}}this._hideDatepicker()},_hasTime:function(j){var l=(j+"");if(l.indexOf("H")!=-1||l.indexOf("m")!=-1||l.indexOf("s")!=-1){return true}return false},_hasHur:function(j){var l=(j+"");if(l.indexOf("H")!=-1){return true}return false},_hasMin:function(j){var l=(j+"");if(l.indexOf("m")!=-1){return true}return false},_hasSec:function(j){var l=(j+"");if(l.indexOf("s")!=-1){return true}return false},_isYearMonthMode:function(j){if(!this._hasTime(j)){return j.indexOf("d")==-1&&j.indexOf("D")==-1&&j.indexOf("W")==-1&&j.indexOf("w")==-1}return false},_updateAlternate:function(o){var n,m,j,l=this._get(o,"altField");if(l){n=this._get(o,"altFormat")||this._get(o,"dateFormat");m=this._getDate(o);j=this.formatDate(n,m,this._getFormatConfig(o));d(l).each(function(){d(this).val(j)})}},noWeekends:function(l){var j=l.getDay();return[(j>0&&j<6),""]},iso8601Week:function(j){var l,m=new Date(j.getTime());m.setDate(m.getDate()+4-(m.getDay()||7));l=m.getTime();m.setMonth(0);m.setDate(1);return Math.floor(Math.round((l-m)/86400000)/7)+1},searchIndex:function(o){var n=0,m=0,l=[];o=o.indexOf("/")>-1?o.replace(/\//g,""):o.replace(/-/g,"");
for(n=0;n<o.length-1;n++){if(o[n]!=o[n+1]){l.push(m+1);m++}m++}return l},getFormatter:function(v,u,m){var q=null,w=null;if(u.indexOf("y")>-1&&u.indexOf("M")>-1&&u.indexOf("d")>-1){q="ymdFormat"}if(u.indexOf("y")>-1&&u.indexOf("M")>-1&&u.indexOf("d")==-1){q="ymFormat"}if(u.indexOf("y")>-1&&u.indexOf("M")==-1&&u.indexOf("d")==-1){q="yFormat"}var l="yyyy-MM-dd";var s=m.inst?d.extend({},this._defaults.formatOptions,m.inst.settings.formatOptions):this._defaults.formatOptions;v=(typeof v==="object"?v.toString():v+"");if(v===""){return null}var n=v.indexOf("/")>-1?v.replace(/\//g,""):v.replace(/-/g,"");var p=v.split("/").length-1;str2=v.split("-").length-1;for(var o=0;o<s[q].length;o++){if(s[q][o].length==n.length){w=s[q][o]}}var j=function(x,y){if(p==x.length||str2==x.length){if(x.length==2){if((v.charAt(x[0])=="/"&&v.charAt(x[1])=="/")||(v.charAt(x[0])=="-"&&v.charAt(x[1])=="-")){return y}}else{if(x.length==1){if(v.charAt(x[0])=="/"||v.charAt(x[0])=="-"){return y}}}}else{return null}};if(w&&(v.indexOf("/")>-1||v.indexOf("-")>-1)){var r=this.searchIndex(w);var t=j(r,w);if(t){return t}r=this.searchIndex(u);t=j(r,u);if(t){return t}r=this.searchIndex(l);t=j(r,l);if(t){return t}}else{return(w?w:u)||null}},configDateFormat:function(q,r,l){var n=q;var s=q.split(" ");var m=s[1]||"";var p=r.split(" ");if(p[0].indexOf("/")>-1||p[0].indexOf("-")>-1){var j=p[0].indexOf("/")>-1?p[0].split("/"):p[0].split("-");for(var o=0;o<j.length;o++){if(j[o].length%2!=0){j[o]="0"+j[o]}p[0]=j.join("-")}}l.inst&&(l.inst.beforevalue=p);q=this.getFormatter(p[0],s[0],l);q+=n.substr(s[0].length,n.length);p[0]=p[0].indexOf("/")>-1?p[0].replace(/\//g,""):p[0].replace(/-/g,"");r=p.join(" ");return{format:q,value:r}},parseDate:function(H,C,K){if(H==null||C==null){throw"Invalid arguments"}K=K||{};C=(typeof C==="object"?C.toString():C+"");if(C===""){return null}var q=this.configDateFormat(H,C,K);H=q.format;C=q.value;var m=this._hasTime(H);var s,E,l,I=0,w=(K?K.shortYearCutoff:null)||this._defaults.shortYearCutoff,p=(typeof w!=="string"?w:new Date().getFullYear()%100+parseInt(w,10)),A=(K?K.dayNamesShort:null)||this._defaults.dayNamesShort,N=(K?K.dayNames:null)||this._defaults.dayNames,j=(K?K.monthNamesShort:null)||this._defaults.monthNamesShort,t=(K?K.monthNames:null)||this._defaults.monthNames,n=K.inst,v=-1,O=-1,G=-1,y=-1,P=-1,z=-1,L=-1,F=false,M,B=function(S){var T=(s+1<H.length&&H.charAt(s+1)===S);
if(T){s++}return T},r=function(S){var T=1;while(s+1<H.length&&H.charAt(s+1)==S){T++;s++}return T},R=function(U){var S=B(U),V=(U==="@"?14:(U==="!"?20:(U==="y"&&S?4:(U==="o"?3:2)))),X=(U==="y"?V:1),W=new RegExp("^\\d{"+X+","+V+"}"),T=C.substring(I).match(W);if(!T){throw"Missing number at position "+I}I+=T[0].length;return parseInt(T[0],10)},Q=function(T,U){if(I>C.length||I==C.length){return -1}var V=new RegExp("^\\d{1,"+U+"}"),S=C.substring(I).match(V);if(!S){throw"Missing number at position "+I}I+=S[0].length;return parseInt(S[0],10)},x=function(T,U,W){var S=-1,V=d.map(B(T)?W:U,function(Y,X){return[[X,Y]]}).sort(function(Y,X){return -(Y[1].length-X[1].length)});d.each(V,function(Y,Z){var X=Z[1];if(C.substr(I,X.length).toLowerCase()===X.toLowerCase()){S=Z[0];I+=X.length;return false}});if(S!==-1){return S+1}else{throw"Unknown name at position "+I}},D=function(){if(""!==C.charAt(I)&&C.charAt(I)!==H.charAt(s)){return;throw"Unexpected literal at position "+I}I++};for(s=0;s<H.length;s++){if(F){if(H.charAt(s)==="'"&&!B("'")){F=false}else{D()}}else{switch(H.charAt(s)){case"d":var J=r("d");G=Q("d",J);break;case"M":J=r("M");O=Q("M",J);break;case"y":J=r("y");v=Q("y",J);break;case"H":J=r("H");P=Q("H",J);break;case"m":J=r("m");z=Q("m",J);break;case"s":J=r("s");L=Q("s",J);break;default:D()}}}var o=this._get(n,"minDate");var u=this._get(n,"maxDate");if(G==-1){G=1;if(O==-1){O=1}}if(G!=-1&&O==-1){O=new Date().getMonth()+1}if(v===-1){v=new Date().getFullYear()}else{if(v<100){v+=new Date().getFullYear()-new Date().getFullYear()%100+(v<=p?0:-100)}}if(y>-1){O=1;G=y;do{E=this._getDaysInMonth(v,O-1);if(G<=E){break}O++;G-=E}while(true)}v=(v==-1?1:v);P=(P==-1?0:P);z=(z==-1?0:z);L=(L==-1?0:L);M=this._daylightSavingAdjustWidthTime(new Date(v,O-1,G),[P,z,L]);if((M.getFullYear()!==v||M.getMonth()+1!==O||M.getDate()!==G)||(m&&(M.getHours()!==P||M.getMinutes()!==z||M.getSeconds()!==L))){throw"Invalid date"}return M},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*10000000),formatDate:function(v,n,o){if(!n){return""
}var x,y=(o?o.dayNamesShort:null)||this._defaults.dayNamesShort,l=(o?o.dayNames:null)||this._defaults.dayNames,t=(o?o.monthNamesShort:null)||this._defaults.monthNamesShort,q=(o?o.monthNames:null)||this._defaults.monthNames,w=function(z){var A=(x+1<v.length&&v.charAt(x+1)===z);if(A){x++}return A},r=function(z){var A=1;while(x+1<v.length&&v.charAt(x+1)==z){A++;x++}return A},j=function(B,C,z){var A=""+C;if(w(B)){while(A.length<z){A="0"+A}}return A},s=function(z,B,A,C){return(w(z)?C[B]:A[B])},m="",u=false;if(n){for(x=0;x<v.length;x++){if(u){if(v.charAt(x)==="'"&&!w("'")){u=false}else{m+=v.charAt(x)}}else{switch(v.charAt(x)){case"d":m+=j("d",n.getDate(),2);break;case"D":m+=s("D",n.getDay(),y,l);break;case"M":var p=r("M");if(p==4){m+=q[n.getMonth()]}else{if(p==3){m+=q[n.getMonth()]}else{if(p==2){m+=(n.getMonth()+1>9?n.getMonth()+1:"0"+(n.getMonth()+1))}else{if(p==1){m+=n.getMonth()+1}}}}break;case"y":p=r("y");if(p==4){m+=n.getFullYear()}else{if(p==3){m+=(n.getFullYear()+"").substring(1,4)}else{if(p==2){m+=((n.getYear()%100<10?"0":"")+n.getYear()%100)}else{if(p==1){m+=n.getYear()%100}}}}break;case"H":p=r("H");if(p==2){m+=(n.getHours()>9?n.getHours():"0"+(n.getHours()))}else{if(p==1){m+=n.getHours()}}break;case"m":p=r("m");if(p==2){m+=(n.getMinutes()>9?n.getMinutes():"0"+(n.getMinutes()))}else{if(p==1){m+=n.getMinutes()}}break;case"s":p=r("s");if(p==2){m+=(n.getSeconds()>9?n.getSeconds():"0"+(n.getSeconds()))}else{if(p==1){m+=n.getSeconds()}}break;case"W":p=r("W");if(p==2){m+=(o.calculateWeek(n)>9?o.calculateWeek(n):"0"+o.calculateWeek(n))}else{if(p==1){m+=o.calculateWeek(n)}}break;case"w":m+=n.getDay();break;default:m+=v.charAt(x)}}}}return m},_possibleChars:function(o){var n,m="",l=false,j=function(p){var q=(n+1<o.length&&o.charAt(n+1)===p);if(q){n++}return q};for(n=0;n<o.length;n++){if(l){if(o.charAt(n)==="'"&&!j("'")){l=false}else{m+=o.charAt(n)}}else{switch(o.charAt(n)){case"d":case"m":case"y":case"@":case"H":case"M":case"s":m+="0123456789";break;case"D":case"W":return null;
case"'":if(j("'")){m+="'"}else{l=true}break;default:m+=o.charAt(n)}}}return m},_get:function(l,j){return l.settings[j]!==h?l.settings[j]:this._defaults[j]},_set:function(l,j,m){return l.settings[j]=m},_setDateFromField:function(u,j){if(u.input.val()===u.lastVal){return}var o=this._get(u,"dateFormat"),m=u.lastVal=u.input?u.input.val():null,n=this._getDefaultDate(u),s=n,r=u.input.val(),t=this._getFormatConfig(u);try{s=this.parseDate(o,r,t)||n}catch(l){s=n}u.selectedDay=s.getDate();u.drawMonth=u.selectedMonth=s.getMonth();u.drawYear=u.selectedYear=s.getFullYear();u.currentDay=s.getDate();u.currentMonth=s.getMonth();u.currentYear=s.getFullYear();u.currentHur=s.getHours();u.currentMiu=s.getMinutes();u.currentSed=s.getSeconds();this._adjustInstDate(u);this._setHiddenInputValue(u);var q=this._getHiddenInputValue(u);var p=this._get(u,"startDateId");var v=this._get(u,"endDateId");if(p){d("#"+p).datepicker("option","maxDate",q)}if(v){d("#"+v).datepicker("option","minDate",q)}},_getDefaultDate:function(j){return this._restrictMinMax(j,this._determineDate(j,this._get(j,"defaultDate"),new Date()))},_determineDate:function(p,n,m){var r=this;var o=function(w){var v=new Date();v.setDate(v.getDate()+w);return v},s=function(w){try{var x="yyyy-MM-dd";var E=r._get(p,"srcDateFormat");if(r._isYearMonthMode(E)){x="yyyy-MM"}if((w+"").length>10&&r._hasTime(E)){x+=" HH:mm:ss"}x=d.datepicker._get(p,"dateFormat");return d.datepicker.parseDate(x,w,d.datepicker._getFormatConfig(p))}catch(z){d.datepicker._apply(p,"onFormatError",[v,p]);d.datepicker._apply(p,"onFormatWarn",[v,p])}var v=(w.toLowerCase().match(/^c/)?d.datepicker._getDate(p):null)||new Date(),C=v.getFullYear(),A=v.getMonth(),D=v.getDate(),B=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,y=B.exec(w);while(y){switch(y[2]||"d"){case"d":case"D":D+=parseInt(y[1],10);break;case"w":case"W":D+=parseInt(y[1],10)*7;break;case"m":case"M":A+=parseInt(y[1],10);D=Math.min(D,d.datepicker._getDaysInMonth(C,A));break;case"y":case"Y":C+=parseInt(y[1],10);D=Math.min(D,d.datepicker._getDaysInMonth(C,A));
break}y=B.exec(w)}return new Date(C,A,D)},t=(n==null||n===""?m:(typeof n==="string"?s(n):(typeof n==="number"?(isNaN(n)?m:o(n)):new Date(n.getTime()))));t=(t&&t.toString()==="Invalid Date"?m:t);var u=0,l=0,q=0,j=0;if(t){u=t.getHours(),l=t.getMinutes(),q=t.getSeconds(),j=t.getMilliseconds();t.setHours(0);t.setMinutes(0);t.setSeconds(0);t.setMilliseconds(0)}return this._daylightSavingAdjustWidthTime(t,[u,l,q])},_daylightSavingAdjust:function(j,l){if(!j){return null}j.setHours(j.getHours()>12?j.getHours()+2:0);return j},_setDate:function(q,n,p){var j=!n,m=q.selectedMonth,o=q.selectedYear,l=this._restrictMinMax(q,this._determineDate(q,n,new Date()));q.selectedDay=q.currentDay=l.getDate();q.drawMonth=q.selectedMonth=q.currentMonth=l.getMonth();q.drawYear=q.selectedYear=q.currentYear=l.getFullYear();q.currentHur=l.getHours();q.currentMiu=l.getMinutes();q.currentSed=l.getSeconds();if((m!==q.selectedMonth||o!==q.selectedYear)&&!p){this._notifyChange(q)}this._adjustInstDate(q);if(q.input){q.input.val(j?"":this._formatDate(q))}},_getDate:function(l){var j=(!l.currentYear||(l.input&&l.input.val()==="")?null:this._daylightSavingAdjustWidthTime(new Date(l.currentYear,l.currentMonth,l.currentDay),[l.currentHur,l.currentMiu,l.currentSed]));return j},_daylightSavingAdjustWidthTime:function(m,j){var l=this._daylightSavingAdjust(m);if(l){l.setHours(j[0]);l.setMinutes(j[1]);l.setSeconds(j[2]);l.setMilliseconds(0)}return m},_attachHandlers:function(m){var n=this;var l=this._get(m,"stepMonths"),o="#"+m.id.replace(/\\\\/g,"\\");var j=this._isYearMonthMode(this._get(m,"dateFormat"));m.dpDiv.find("[data-handler]").map(function(){var p={prev:function(){if(j===true){d.datepicker._adjustDate(o,-1,"Y")}else{d.datepicker._adjustDate(o,-l,"M")}n._setMonthYearValue(n,m);return false},next:function(){if(j===true){d.datepicker._adjustDate(o,+1,"Y")}else{d.datepicker._adjustDate(o,+l,"M")}n._setMonthYearValue(n,m);return false},hide:function(){d.datepicker._hideDatepicker()},today:function(){d.datepicker._gotoToday(o);
return false},selectDay:function(){d.datepicker._selectDay(o,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonthAndHide:function(){d.datepicker._selectMonthYear(o,this,"M",true);d.datepicker._hideDatepicker();return false},selectMonth:function(){d.datepicker._selectMonthYear(o,this,"M");return false},selectYear:function(){d.datepicker._selectMonthYear(o,this,"Y");return false},focusTime:function(){if(d(this).prop("readonly")){return false}d.datepicker.focusInput=this.id;if(this.id=="dpTimeHour"){m.dpDiv.find("#dpTimeSpinner").spinner("option",{max:24,min:0,step:1,value:this.value});m.dpDiv.find(".menuSel").hide();m.dpDiv.find(".hourMenu").show()}if(this.id=="dpTimeMinute"){m.dpDiv.find("#dpTimeSpinner").spinner("option",{max:60,min:0,step:1,value:this.value});var r=d("#dpTimeHour").val();m.dpDiv.find(".minuteMenu").replaceWith(n._modifiedMin(m,r));m.dpDiv.find(".menuSel").hide();m.dpDiv.find(".minuteMenu").show()}if(this.id=="dpTimeSecond"){m.dpDiv.find("#dpTimeSpinner").spinner("option",{max:60,min:0,step:1,value:this.value});var r=d("#dpTimeHour").val();var q=d("#dpTimeMinute").val();m.dpDiv.find(".secondMenu").replaceWith(n._modifiedSed(m,r,q));m.dpDiv.find(".menuSel").hide();m.dpDiv.find(".secondMenu").show()}return false}};d(this).bind(this.getAttribute("data-event"),p[this.getAttribute("data-handler")]);d(m.dpDiv).off(".hourMenu").on("mousedown.hourMenu",".hourMenu",function(q){if(!d(q.target).hasClass("menuTimeSel")){return false}m.dpDiv.find("#dpTimeSpinner").spinner("option",{max:24,min:0,step:1,value:d(q.target).html()});m.dpDiv.find("#dpTimeHour").val(d(q.target).html());m.dpDiv.find(".menuSel").hide();n._autoFixInput(n,m);return false});d(m.dpDiv).off(".minuteMenu").on("mousedown.minuteMenu",".minuteMenu",function(q){if(!d(q.target).hasClass("menuTimeSel")){return false}m.dpDiv.find("#dpTimeSpinner").spinner("option",{max:60,min:0,step:1,value:d(q.target).html()});m.dpDiv.find("#dpTimeMinute").val(d(q.target).html());
m.dpDiv.find(".menuSel").hide();n._autoFixInput(n,m);return false});d(m.dpDiv).off(".secondMenu").on("mousedown.secondMenu",".secondMenu",function(q){if(!d(q.target).hasClass("menuTimeSel")){return false}m.dpDiv.find("#dpTimeSpinner").spinner("option",{max:60,min:0,step:1,value:d(q.target).html()});m.dpDiv.find("#dpTimeSecond").val(d(q.target).html());m.dpDiv.find(".menuSel").hide();n._autoFixInput(n,m);return false})})},_generateHTML:function(af){var F,E,aa,Q,p,aj,ad,V,am,N,aq,x,z,y,m,ai,u,I,al,l,Y,ar,H,M,w,q,ab,T,X,U,t,K,A,ae,ah,o,ak,ao,S,B,ag=new Date(),G=this._daylightSavingAdjustWidthTime(new Date(ag.getFullYear(),ag.getMonth(),ag.getDate()),[0,0,0]),an=this._get(af,"isRTL"),P=this._isYearMonthMode(this._get(af,"dateFormat")),ap=P==true?false:this._get(af,"showButtonPanel"),Z=this._get(af,"hideIfNoPrevNext"),L=this._get(af,"navigationAsDateFormat"),C=this._getNumberOfMonths(af),s=this._get(af,"showCurrentAtPos"),O=this._get(af,"stepMonths"),J=(C[0]!==1||C[1]!==1),n=this._daylightSavingAdjustWidthTime((!af.currentDay?new Date(9999,9,9):new Date(af.currentYear,af.currentMonth,af.currentDay)),[0,0,0]),r=this._getMinMaxDate(af,"min"),D=this._getMinMaxDate(af,"max"),j=af.drawMonth-s,ac=af.drawYear,R=this._get(af,"dateFormat");var W=this._hasTime(this._get(af,"dateFormat"));if(j<0){j+=12;ac--}if(D){F=this._daylightSavingAdjustWidthTime(new Date(D.getFullYear(),D.getMonth()-(C[0]*C[1])+1,D.getDate()),[af.currentHur,af.currentMiu,af.currentSed]);F=(r&&F<r?r:F);while(this._daylightSavingAdjustWidthTime(new Date(ac,j,1),[af.currentHur,af.currentMiu,af.currentSed])>F){j--;if(j<0){j=11;ac--}}}af.drawMonth=j;af.drawYear=ac;E=this._get(af,"prevText");E=(!L?E:this.formatDate(E,this._daylightSavingAdjustWidthTime(new Date(ac,j-O,1),[af.currentHur,af.currentMiu,af.currentSed]),this._getFormatConfig(af)));aa=(this._canAdjustMonth(af,-1,ac,j)?"<a class='coral-datepicker-prev coral-state-default coral-corner-all' data-handler='prev' data-event='mousedown' title='"+E+"'><span class='icon  icon-arrow-"+(an?"right2":"left")+"'></span></a>":(Z?"":"<a class='coral-datepicker-prev coral-state-default coral-corner-all coral-state-disabled' title='"+E+"'><span class='coral-icon coral-icon-circle-triangle-"+(an?"e":"w")+"'>"+E+"</span></a>"));
Q=this._get(af,"nextText");Q=(!L?Q:this.formatDate(Q,this._daylightSavingAdjustWidthTime(new Date(ac,j+O,1),[af.currentHur,af.currentMiu,af.currentSed]),this._getFormatConfig(af)));p=(this._canAdjustMonth(af,+1,ac,j)?"<a class='coral-datepicker-next coral-state-default coral-corner-all' data-handler='next' data-event='mousedown' title='"+Q+"'><span class='icon  icon-arrow-"+(an?"left":"right2")+"'></span></a>":(Z?"":"<a class='coral-datepicker-next coral-state-default coral-corner-all coral-state-disabled' title='"+Q+"'><span class='coral-icon coral-icon-circle-triangle-"+(an?"w":"e")+"'>"+Q+"</span></a>"));aj=this._get(af,"currentText");ad=(this._get(af,"gotoCurrent")&&af.currentDay?n:G);aj=(!L?aj:this.formatDate(aj,ad,this._getFormatConfig(af)));V="";am=(ap)?"<div class='coral-datepicker-buttonpane coral-component-content' "+(P?"style='display:none'":"")+">"+(an?V:"")+(this._isInRange(af,ad)?"<button type='button' class='coral-datepicker-current coral-state-default coral-priority-primary coral-corner-all' data-handler='today' data-event='mousedown'>"+aj+"</button>":"")+(an?"":V)+"</div>":"";var v="";!W||(v+='<button class="coral-datepicker-close coral-state-default coral-priority-secondary coral-corner-all" id="dpTimeEnsure"></button>');v+=(ap)?"<button type='button' class='coral-datepicker-current coral-state-default coral-priority-primary coral-corner-all' data-handler='today' data-event='mousedown'>"+aj+"</button>":"";N=parseInt(this._get(af,"firstDay"),10);N=(isNaN(N)?0:N);aq=this._get(af,"showWeek");x=this._get(af,"dayNames");z=this._get(af,"dayNamesMin");y=this._get(af,"monthNames");m=this._get(af,"monthNamesShort");ai=this._get(af,"beforeShowDay");u=this._get(af,"showOtherMonths");I=this._get(af,"selectOtherMonths");l=this._getDefaultDate(af);al=new Date(l.getFullYear(),l.getMonth(),l.getDate());Y="";ar;for(H=0;H<C[0];H++){M="";this.maxRows=4;for(w=0;w<C[1];w++){q=this._daylightSavingAdjustWidthTime(new Date(ac,j,af.selectedDay),[af.currentHur,af.currentMiu,af.currentSed]);
ab=" coral-corner-all";T="";if(J){T+="<div class='coral-datepicker-group";if(C[1]>1){switch(w){case 0:T+=" coral-datepicker-group-first";ab=" coral-corner-"+(an?"right":"left");break;case C[1]-1:T+=" coral-datepicker-group-last";ab=" coral-corner-"+(an?"left":"right");break;default:T+=" coral-datepicker-group-middle";ab="";break}}T+="'>"}T+="<div class='coral-datepicker-header coral-component-header coral-helper-clearfix"+ab+"'>"+(/all|left/.test(ab)&&H===0?(an?p:aa):"")+(/all|right/.test(ab)&&H===0?(an?aa:p):"")+this._generateMonthYearHeader(af,j,ac,r,D,H>0||w>0,y,m,P)+"</div>";if(P===true){T+=this._generateMonthHTML(af,j,ac,r,D,H>0||w>0,y,m,n,G)}T+="<table class='coral-datepicker-calendar' "+(P?"style='display:none'":"")+"><thead><tr>";X=(aq?"<th class='coral-datepicker-week-col'>"+this._get(af,"weekHeader")+"</th>":"");for(ar=0;ar<7;ar++){U=(ar+N)%7;X+="<th scope='col'"+((ar+N+6)%7>=5?" class='coral-datepicker-week-end'":"")+"><span title='"+x[U]+"'>"+z[U]+"</span></th>"}T+=X+"</tr></thead><tbody>";t=this._getDaysInMonth(ac,j,af);if(ac===af.selectedYear&&j===af.selectedMonth){af.selectedDay=Math.min(af.selectedDay,t)}K=(this._getFirstDayOfMonth(ac,j)-N+7)%7;A=Math.ceil((K+t)/7);ae=(J?this.maxRows>A?this.maxRows:A:A);this.maxRows=ae;ah=this._daylightSavingAdjustWidthTime(new Date(ac,j,1-K),[0,0,0]);for(o=0;o<ae;o++){T+="<tr>";ak=(!aq?"":"<td class='coral-datepicker-week-col'>"+this._get(af,"calculateWeek")(ah)+"</td>");for(ar=0;ar<7;ar++){ao=(ai?ai.apply((af.input?af.input[0]:null),[ah]):[true,""]);S=(ah.getMonth()!==j);B=(S&&!I)||!ao[0]||(r&&ah<=new Date(r.getFullYear(),r.getMonth(),r.getDate()-1))||(D&&ah>D);ak+="<td class='"+((ar+N+6)%7>=5?" coral-datepicker-week-end":"")+(S?" coral-datepicker-other-month":"")+((ah.getTime()===q.getTime()&&j===af.selectedMonth&&af._keyEvent)||(al.getTime()===ah.getTime()&&al.getTime()===q.getTime())?" "+this._dayOverClass:"")+(B?" "+this._unselectableClass+" coral-state-disabled":"")+(S&&!u?"":" "+ao[1]+(ah.getTime()===n.getTime()?" "+this._currentClass:"")+(ah.getTime()===G.getTime()?" coral-datepicker-today":""))+"'"+((!S||u)&&ao[2]?" title='"+ao[2].replace(/'/g,"&#39;")+"'":"")+(B?"":" data-handler='selectDay' data-event='mousedown' data-month='"+ah.getMonth()+"' data-year='"+ah.getFullYear()+"'")+">"+(S&&!u?"&#xa0;":(B?"<span class='coral-state-default'>"+ah.getDate()+"</span>":"<a class='coral-state-default"+(ah.getTime()===G.getTime()?" coral-state-highlight":"")+(ah.getTime()===n.getTime()?" coral-state-active":"")+(S?" coral-priority-secondary":"")+"' href='javascript:void(0);'>"+ah.getDate()+"</a>"))+"</td>";
ah.setDate(ah.getDate()+1);ah=this._daylightSavingAdjustWidthTime(ah,[0,0,0])}T+=ak+"</tr>"}j++;if(j>11){j=0;ac++}T+="</tbody></table>"+this._generateDateTimeHTML(af,R,v)+(J?"</div>"+((C[0]>0&&w===C[1]-1)?"<div class='coral-datepicker-row-break'></div>":""):"");M+=T}Y+=M}af._keyEvent=false;return Y},_generateMonthHTML:function(o,n,v,q,u,w,s,l,r,z){var t="<table class='coral-datepicker-calendar' ><tbody>";var B=0;var C="";var p="";var A=(q&&q.getFullYear()===v);var m=(u&&u.getFullYear()===v);for(var y=0;y<3;y++){t+="<tr>";for(var x=0;x<4;x++){if(B===z.getMonth()&&v===z.getFullYear()){C="coral-state-highlight"}else{C=""}if(B===n){p="coral-state-active"}else{p=""}if((!A||B>=q.getMonth())&&(!m||B<=u.getMonth())){t+="<td data-handler='selectMonthAndHide' data-event='mousedown' data-month='"+B+"'><a class='coral-state-default date-month "+C+" "+p+"' href='javascript:void(0);'>"+s[B++]+"</a></td>"}else{t+="<td class='"+this._unselectableClass+" coral-state-disabled'><span class='date-month' >"+s[B++]+"</span></td>"}}t+="</tr>"}return t+"</tbody></table>"},_generateDateTimeHTML:function(p,y,w){var q='style="display:none"';var l,I,A,F;var n=this._hasTime(y),J=this._hasHur(y),z=this._hasMin(y),H=this._hasSec(y);if(n){q='style="display:block"'}var G=new Date();var r=this._get(p,"minDate");var t=this._get(p,"maxDate");I=J?(p.currentHur||G.getHours()):"00";A=z?(p.currentMiu||G.getMinutes()):"00";F=H?(p.currentSed||G.getSeconds()):"00";var m=new Date(p.selectedYear,p.selectedMonth,p.selectedDay,I,A,F);var s=new Date(p.selectedYear,p.selectedMonth,p.selectedDay),v=new Date(r),o=new Date(t),x=new Date(v.getFullYear(),v.getMonth(),v.getDate()),C=new Date(o.getFullYear(),o.getMonth(),o.getDate());if(this._checkDateRange(p,m)===1){m=new Date(t);I=m.getHours();A=m.getMinutes();F=m.getSeconds()}else{if(this._checkDateRange(p,m)===2){m=new Date(r);I=m.getHours();A=m.getMinutes();F=m.getSeconds()}}d.datepicker.focusInput="dpTimeHour";var u=[];u.push("<div class='coral-datepicker-time' >");
u.push("<div class='menuSel hourMenu' style='display: none; margin-left: 6px; margin-top: -90px;'>");u.push("<table cellspacing='0' cellpadding='3' border='0<tr' nowrap='nowrap'><tbody>");var B=0;for(var E=0;E<4;E++){u.push("<tr nowrap='nowrap'></tr>");for(var D=0;D<6;D++){if((r&&B<new Date(r).getHours()&&new Date(s).getTime()==new Date(x).getTime())||(t&&B>new Date(t).getHours()&&new Date(s).getTime()==new Date(C).getTime())){u.push("<td nowrap='' class='menuTimeSel coral-state-disabled' data-handler='clickHour' data-event='click' ><span class='coral-state-default'>"+B+++"</span></td>")}else{u.push("<td nowrap='' class='menuTimeSel' data-handler='clickHour' data-event='click' >"+B+++"</td>")}}u.push("</tr>")}u.push("</tbody></table></div>");u.push("<div class='menuSel minuteMenu' style='display: none; margin-left: 6px; margin-top: -48px;'>");u.push("<table cellspacing='0' cellpadding='3' border='0<tr' nowrap='nowrap'><tbody>");B=0;for(var E=0;E<2;E++){u.push("<tr nowrap='nowrap'></tr>");for(var D=0;D<6;D++){if((r&&B<new Date(r).getMinutes()&&new Date(s).getTime()==new Date(x).getTime())||(t&&B>new Date(t).getMinutes()&&new Date(s).getTime()==new Date(C).getTime())){u.push("<td nowrap='' class='menuTimeSel coral-state-disabled' data-handler='clickMinute' data-event='click'><span class='coral-state-default'>"+B+"</span></td>")}else{u.push("<td nowrap='' class='menuTimeSel' data-handler='clickMinute' data-event='click' >"+B+"</td>")}B+=5}u.push("</tr>")}u.push("</tbody></table></div>");u.push("<div class='menuSel secondMenu' style='display: none; margin-left: 6px; margin-top: -48px;'>");u.push("<table cellspacing='0' cellpadding='3' border='0<tr' nowrap='nowrap'><tbody>");B=0;for(var E=0;E<2;E++){u.push("<tr nowrap='nowrap'></tr>");for(var D=0;D<6;D++){if((r&&B<new Date(r).getSeconds()&&new Date(s).getTime()==new Date(x).getTime())||(t&&B>new Date(t).getSeconds()&&new Date(s).getTime()==new Date(C).getTime())){u.push("<td nowrap='' class='menuTimeSel coral-state-disabled' data-handler='clickSecond' data-event='click'><span class='coral-state-default'>"+B+"</span></td>")
}else{u.push("<td nowrap='' class='menuTimeSel' data-handler='clickSecond' data-event='click' >"+B+"</td>")}B+=5}u.push("</tr>")}u.push("</tbody></table></div>");u.push("<table cellspacing='0' cellpadding='0' border='0'>");u.push("<tr>");u.push("<td class='datepicker-time-input'"+q+">");u.push("<input data-handler='focusTime' data-event='focus' id='dpTimeHour' class='datepicker-timeinput datepicker-time-tB1' "+(J?"":"readonly")+" value='"+I+"' maxlength='2'>");u.push("<input value=':' class='coral-datepicker-time-tm' readonly>");u.push("<input data-handler='focusTime' data-event='focus' id='dpTimeMinute' class='datepicker-timeinput datepicker-time-tE' "+(z?"":"readonly")+" value='"+A+"' maxlength='2'>");u.push("<input value=':' class='coral-datepicker-time-tm' readonly>");u.push("<input data-handler='focusTime' data-event='focus' id='dpTimeSecond' class='datepicker-timeinput datepicker-time-tB2' "+(H?"":"readonly")+" value='"+F+"' maxlength='2'>");u.push("<input id='dpTimeSpinner'/>");u.push("</td>");u.push("</tr>");u.push("</table></div>");u.push("<div class='coral-datepicker-time' >");u.push("<div cellspacing='0' cellpadding='0' border='0'></div>");u.push("<table cellspacing='0' cellpadding='0' border='0'>");u.push("<tr>");u.push("<td>"+w+"</td>");u.push("</tr>");u.push("</table></div>");return u.join("")},_modifiedMin:function(r,v){var n=this._get(r,"minDate");var l=this._get(r,"maxDate");var u=new Date(r.selectedYear,r.selectedMonth,r.selectedDay),o=new Date(n),s=new Date(l),t=new Date(o.getFullYear(),o.getMonth(),o.getDate()),w=new Date(s.getFullYear(),s.getMonth(),s.getDate());var q=[];q.push("<div class='menuSel minuteMenu' style='display: none; margin-left: 6px; margin-top: -48px;'>");q.push("<table cellspacing='0' cellpadding='3' border='0<tr' nowrap='nowrap'><tbody>");k=0;for(var p=0;p<2;p++){q.push("<tr nowrap='nowrap'></tr>");for(var m=0;m<6;m++){if((n&&k<new Date(n).getMinutes()&&new Date(u).getTime()==new Date(t).getTime()&&v==new Date(n).getHours())||(l&&k>new Date(l).getMinutes()&&new Date(u).getTime()==new Date(w).getTime()&&v==new Date(l).getHours())){q.push("<td nowrap='' class='menuTimeSel coral-state-disabled' data-handler='clickMinute' data-event='click'><span class='coral-state-default'>"+k+"</span></td>")
}else{q.push("<td nowrap='' class='menuTimeSel' data-handler='clickMinute' data-event='click' >"+k+"</td>")}k+=5}q.push("</tr>")}q.push("</tbody></table></div>");return q.join("")},_modifiedSed:function(r,w,v){var n=this._get(r,"minDate");var l=this._get(r,"maxDate");var u=new Date(r.selectedYear,r.selectedMonth,r.selectedDay),o=new Date(n),s=new Date(l),t=new Date(o.getFullYear(),o.getMonth(),o.getDate()),x=new Date(s.getFullYear(),s.getMonth(),s.getDate());var q=[];q.push("<div class='menuSel secondMenu' style='display: none; margin-left: 6px; margin-top: -48px;'>");q.push("<table cellspacing='0' cellpadding='3' border='0<tr' nowrap='nowrap'><tbody>");k=0;for(var p=0;p<2;p++){q.push("<tr nowrap='nowrap'></tr>");for(var m=0;m<6;m++){if((n&&k<new Date(n).getSeconds()&&new Date(u).getTime()==new Date(t).getTime()&&w==new Date(n).getHours()&&v==new Date(n).getMinutes())||(l&&k>new Date(l).getSeconds()&&new Date(u).getTime()==new Date(x).getTime()&&w==new Date(l).getHours()&&v==new Date(l).getMinutes())){q.push("<td nowrap='' class='menuTimeSel coral-state-disabled' data-handler='clickSecond' data-event='click'><span class='coral-state-default'>"+k+"</span></td>")}else{q.push("<td nowrap='' class='menuTimeSel' data-handler='clickSecond' data-event='click' >"+k+"</td>")}k+=5}q.push("</tr>")}q.push("</tbody></table></div>");return q.join("")},_generateMonthYearHeader:function(o,m,y,q,v,z,t,j,s){var D,l,E,B,p,A,w,r,n=this._get(o,"changeMonth"),F=this._get(o,"changeYear"),G=this._get(o,"showMonthAfterYear"),u="<div class='coral-datepicker-title'>",C="",x=this._get(o,"monthSuffix");if(z||!n){C+="<span class='coral-datepicker-month'>"+t[m]+"</span>"}else{D=(q&&q.getFullYear()===y);l=(v&&v.getFullYear()===y);C+="<select class='coral-datepicker-month' data-handler='selectMonth' data-event='change'>";for(E=0;E<12;E++){if((!D||E>=q.getMonth())&&(!l||E<=v.getMonth())){C+="<option value='"+E+"'"+(E===m?" selected='selected'":"")+">"+j[E]+"</option>"}}C+="</select>";C+=x}if(!G){u+=C+(z||!(n&&F)?"&#xa0;":"")
}if(!o.yearshtml){o.yearshtml="";if(z||!F){u+="<span class='coral-datepicker-year'>"+y+"</span>"}else{B=this._get(o,"yearRange").split(":");p=new Date().getFullYear();A=function(I){var H=(I.match(/c[+\-].*/)?y+parseInt(I.substring(1),10):(I.match(/[+\-].*/)?p+parseInt(I,10):parseInt(I,10)));return(isNaN(H)?p:H)};w=A(B[0]);r=Math.max(w,A(B[1]||""));w=(q?Math.max(w,q.getFullYear()):w);r=(v?Math.min(r,v.getFullYear()):r);o.yearshtml+="<select class='coral-datepicker-year' data-handler='selectYear' data-event='change'>";for(;w<=r;w++){o.yearshtml+="<option value='"+w+"'"+(w===y?" selected='selected'":"")+">"+w+"</option>"}o.yearshtml+="</select>";u+=o.yearshtml;o.yearshtml=null}}u+=this._get(o,"yearSuffix");if(G){u+=(z||!(n&&F)?"&#xa0;":"")+(s===false?C:"")}u+="</div>";return u},_adjustInstDate:function(n,q,p){var m=n.drawYear+(p==="Y"?q:0),o=n.drawMonth+(p==="M"?q:0),j=Math.min(n.selectedDay,this._getDaysInMonth(m,o,n))+(p==="D"?q:0),l=this._restrictMinMax(n,this._daylightSavingAdjustWidthTime(new Date(m,o,j),[n.currentHur,n.currentMiu,n.currentSed]));n.selectedDay=l.getDate();n.drawMonth=n.selectedMonth=l.getMonth();n.drawYear=n.selectedYear=l.getFullYear();if(p==="M"||p==="Y"){this._notifyChange(n)}},_restrictMinMax:function(n,l){var m=this._getMinMaxDate(n,"min"),o=this._getMinMaxDate(n,"max"),j=(m&&l<m?m:l);return(o&&j>o?o:j)},_notifyChange:function(l){var j=this._get(l,"onChangeMonthYear");if(j){j.apply((l.input?l.input[0]:null),[l.selectedYear,l.selectedMonth+1,l])}},_getNumberOfMonths:function(l){var j=this._get(l,"numberOfMonths");return(j==null?[1,1]:(typeof j==="number"?[1,j]:j))},_getMinMaxDate:function(l,j){return this._determineDate(l,this._get(l,j+"Date"),null)},_getDaysInMonth:function(j,m,l){return 32-this._daylightSavingAdjustWidthTime(new Date(j,m,32),[l.currentHur,l.currentMiu,l.currentSed]).getDate()},_getFirstDayOfMonth:function(j,l){return new Date(j,l,1).getDay()},_canAdjustMonth:function(n,p,m,o){var j=this._getNumberOfMonths(n),l=this._daylightSavingAdjustWidthTime(new Date(m,o+(p<0?p:j[0]*j[1]),1),[n.currentHur,n.currentMiu,n.currentSed]);
if(p<0){l.setDate(this._getDaysInMonth(l.getFullYear(),l.getMonth(),n))}return this._isInRange(n,l)},_isInRange:function(o,m){var l,r,n=this._getMinMaxDate(o,"min"),j=this._getMinMaxDate(o,"max"),s=null,p=null,q=this._get(o,"yearRange");if(q){l=q.split(":");r=new Date().getFullYear();s=parseInt(l[0],10);p=parseInt(l[1],10);if(l[0].match(/[+\-].*/)){s+=r}if(l[1].match(/[+\-].*/)){p+=r}}return((!n||m.getTime()>=n.getTime())&&(!j||m.getTime()<=j.getTime())&&(!s||m.getFullYear()>=s)&&(!p||m.getFullYear()<=p))},_getFormatConfig:function(j){var l=this._get(j,"shortYearCutoff");l=(typeof l!=="string"?l:new Date().getFullYear()%100+parseInt(l,10));return{shortYearCutoff:l,dayNamesShort:this._get(j,"dayNamesShort"),dayNames:this._get(j,"dayNames"),monthNamesShort:this._get(j,"monthNamesShort"),monthNames:this._get(j,"monthNames"),calculateWeek:this._get(j,"calculateWeek"),inst:j}},_formatDate:function(n,j,o,m){if(!j){n.currentDay=n.selectedDay;n.currentMonth=n.selectedMonth;n.currentYear=n.selectedYear}var l=(j?(typeof j==="object"?j:this._daylightSavingAdjustWidthTime(new Date(m,o,j),[n.currentHur,n.currentMiu,n.currentSed])):this._daylightSavingAdjustWidthTime(new Date(n.currentYear,n.currentMonth,n.currentDay),[n.currentHur,n.currentMiu,n.currentSed]));l.setHours(n.currentHur);l.setMinutes(n.currentMiu);l.setSeconds(n.currentSed);l.setMilliseconds(0);return this.formatDate(this._get(n,"dateFormat"),l,this._getFormatConfig(n))},_apply:function(n,l,j,m){var o=d.datepicker._get(n,l);if(o){if(typeof o==="string"){return window[o].apply((n.input?n.input[0]:null),[m].concat(j))}else{if(d.isFunction(o)){return o.apply((n.input?n.input[0]:null),[m].concat(j))}}}}});function c(l){var j="button, .coral-datepicker-prev, .coral-datepicker-next, .coral-datepicker-calendar td a, .menuTimeSel";var m="#coral-datepicker-divId";return l.delegate(j,"mouseout",function(){d(this).removeClass("coral-state-hover");if(this.className.indexOf("coral-datepicker-prev")!==-1){d(this).removeClass("coral-datepicker-prev-hover")
}if(this.className.indexOf("coral-datepicker-next")!==-1){d(this).removeClass("coral-datepicker-next-hover")}}).delegate(j,"mouseover",e)}function e(){if(!d.datepicker._isDisabledDatepicker(f.inline?f.dpDiv.parent()[0]:f.input[0])){d(this).parents(".coral-datepicker-calendar").find("a").removeClass("coral-state-hover");d(this).addClass("coral-state-hover");if(this.className.indexOf("coral-datepicker-prev")!==-1){d(this).addClass("coral-datepicker-prev-hover")}if(this.className.indexOf("coral-datepicker-next")!==-1){d(this).addClass("coral-datepicker-next-hover")}}}function a(m,l){d.extend(m,l);for(var j in l){if(l[j]==null){m[j]=l[j]}}return m}d.fn.datepicker=function(l){var m=this;if(!this.length){return this}if(!d.datepicker.initialized){d(document).mousedown(d.datepicker._checkExternalClick);d.datepicker.initialized=true}if(d("#"+d.datepicker._mainDivId).length===0){d("body").append(d.datepicker.dpDiv)}var j=Array.prototype.slice.call(arguments,1);if(typeof l==="string"&&(l==="isDisabled"||l==="getDate"||l==="getDateValue"||l==="widget"||l=="component")){return d.datepicker["_"+l+"Datepicker"].apply(d.datepicker,[this[0]].concat(j))}if(typeof l==="string"&&(l==="valid")){return d.datepicker["_"+l+"Datepicker"].apply(d.datepicker,[this[0]].concat(j))}if(l==="option"&&arguments.length===2&&typeof arguments[1]==="string"){var n=l;if(arguments[1]=="value"){n="getDateValue"}return d.datepicker["_"+n+"Datepicker"].apply(d.datepicker,[this[0]].concat(j))}this.each(function(){if(!d.data(this,g)){m=typeof l==="string"?d.datepicker["_"+l+"Datepicker"].apply(d.datepicker,[this].concat(j)):d.datepicker._attachDatepicker(this,l)}else{if(!!d.data(this,g)){m=typeof l==="string"?d.datepicker["_"+l+"Datepicker"].apply(d.datepicker,[this].concat(j)):d.datepicker._attachDatepicker(this,l)}}});return m};d.datepicker=new b();d.datepicker.initialized=false;d.datepicker.uuid=new Date().getTime();d.datepicker.version="4.0.1"})(jQuery);

/*!
 * 4.0
 * 
 * JS
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 */
(function(a){a.component("coral.checkbox",{version:"4.0.1",castProperties:["triggers"],options:{showStar:true,id:null,name:null,value:null,label:"",labelField:null,starBefore:false,title:"",width:"auto",height:null,disabled:false,required:false,readonly:false,checked:false,errMsg:null,errMsgPosition:"leftBottom",onValidError:null,onKeyDown:null,onValidSuccess:null,onChange:a.noop,triggers:null,excluded:false},_create:function(){var d=this,c=this.options;if(!d.element.jquery){d.element=a(d.element)}d.element.addClass("coral-form-element-checkbox");d.element.addClass("coral-validation-checkbox");typeof d.element.attr("id")=="undefined"&&!!d.options.id&&d.element.attr("id",d.options.id);d.options.id=d.element.uniqueId().attr("id");var b=d.element.attr("name");typeof b!="undefined"?(d.options.name=b):(d.element.attr("name",d.options.name));if(a.trim(d.element.val())!=""&&a.trim(d.element.val())!="on"){d.options.value=d.element.val()}else{if(d.options.value){d.element.val(d.options.value)}}if(d.options.name){d.nameMark="coral-checkbox-element-"+d._hashCode(d.options.name);d.element.addClass(d.nameMark)}d.uiCheckbox=a('<span class="coral-checkbox"></span>');d.uiLabel=a('<label class="coral-checkbox-label" for=\''+d.options.id+"'></label>");d.uiIcon=a('<span class="coral-checkbox-icon"></span>');d.uiText=a('<span class="coral-checkbox-text"></span>');d.uiLabel.append(d.uiIcon);d.uiLabel.append(this.uiText);if(d.options.label){d.uiText.append(d.options.label)}if(d.options.title){d.uiLabel.attr("title",d.options.title)}if(d.options.checked){d.uiIcon.addClass("icon icon-checkbox-checked");d.element.prop("checked",true)}else{d.uiIcon.addClass("icon icon-checkbox-unchecked");d.element.prop("checked",false)}d.element.after(d.uiCheckbox);d.uiCheckbox.append(d.element).append(d.uiLabel);if(c.labelField){this.uiLabelField=a('<label class="coral-label">'+c.labelField+"</label>");this.uiCheckbox.prepend(this.uiLabelField);
this.uiCheckbox.addClass("coral-hasLabel")}d._bindEvent();d._trigger("onCreate",null,[])},_getCheckboxs:function(){var c=this,b=c.element.closest("form");if(!c.nameMark){return c.element}if(b.length>0){return b.find(a("."+c.nameMark+":visible"))}else{return a("."+c.nameMark+":visible")}},_setDisabled:function(b){if(b){this.element.prop("disabled",true);this.uiCheckbox.addClass("coral-state-disabled")}else{this.element.prop("disabled",false);this.uiCheckbox.removeClass("coral-state-disabled")}this.options.disabled=(b?true:false)},_setReadonly:function(b){if(b){this.element.prop("readonly",true);this.uiCheckbox.addClass("coral-readonly")}else{this.element.prop("readonly",false);this.uiCheckbox.removeClass("coral-readonly")}this.options.readonly=!!b},focus:function(){var b=this;if(this.options.disabled||this.options.readonly){return false}this.element.focus();return true},_bindEvent:function(){var b=this;if(this.options.disabled){this._setDisabled(this.options.disabled)}this.element.bind("change",function(c){if(a(this).prop("checked")){b.uiIcon.removeClass("icon-checkbox-unchecked").addClass("icon-checkbox-checked")}else{b.uiIcon.removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked")}b._trigger("onChange",c,[{checked:!!b.element.prop("checked")}])}).bind("focus",function(c){b.uiCheckbox.addClass("coral-checkbox-highlight")}).bind("blur",function(){b.uiCheckbox.removeClass("coral-checkbox-highlight")}).bind("keydown"+this.eventNamespace,function(c){b._trigger("onKeyDown",c,{})});this.uiCheckbox.bind("mouseenter"+this.eventNamespace,function(){if(b.options.disabled||b.uiCheckbox.hasClass("coral-checkbox-highlight")||b.uiCheckbox.hasClass("coral-checkbox-highlight")){return}a(this).addClass("coral-checkbox-hover")}).bind("mouseleave"+this.eventNamespace,function(){if(b.options.disabled){return}a(this).removeClass("coral-checkbox-hover")});this.uiLabel.bind("click",function(c){if(b.options.readonly){return false}b._trigger("onClick",c,{})})},_setOption:function(b,c){if(b==="id"||b==="name"){return
}if(b==="readonly"){this._setReadonly(c)}if(b==="disabled"){this._setDisabled(c)}if(b==="label"){this.uiText.html(c)}this._super(b,c)},_destroy:function(){this.uiCheckbox.replaceWith(this.element);this.element.removeClass("coral-form-element-checkbox");this.element.removeClass("coral-validation-checkbox");this.element.removeClass(this.nameMark)},_hashCode:function(f){if(!f){return 0}f=""+f;var d=0,e=0,b=f.length;for(var c=0;c<b;c++){d=31*d+f.charCodeAt(e++);if(d>2147483647||d<2147483648){d=d&4294967295}}return d},component:function(){return this.uiCheckbox},disable:function(){this._setDisabled(true)},readonly:function(){this._setReadonly(true)},enable:function(){this._setDisabled(false)},show:function(){this.component().show()},hide:function(){this.component().hide()},reset:function(){if(this.options.multiple){this.setValues(this.options.originalValue)}else{this.setValue(this.options.originalValue)}},check:function(){if(this.uiIcon.hasClass("icon-checkbox-unchecked")){this.uiIcon.removeClass("icon-checkbox-unchecked").addClass("icon-checkbox-checked");this.element.prop("checked",true)}},uncheck:function(){if(this.uiIcon.hasClass("icon-checkbox-checked")){this.uiIcon.removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked");this.element.prop("checked",false)}},isChecked:function(){return this.element.prop("checked")},getValue:function(){return this.getValues()},getValues:function(){var c=this,b=[];c._getCheckboxs().each(function(){var d=a(this);if(d.checkbox("isChecked")){b.push(d.val())}});return b.toString()},refresh:function(){this._destroy();this._create()}})})(jQuery);

/*!
 * 4.0
 * 
 * JS
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 *    jquery.validatehelper.js
 */
(function(a){a.component("coral.checkboxlist",{version:"4.0.1",castProperties:["data","triggers"],options:{id:null,name:null,valueField:"value",textField:"text",required:false,showStar:true,labelField:null,starBefore:false,column:null,disabled:false,readonly:false,value:null,data:null,url:null,termSplit:";",itemSplit:":",errMsg:null,errMsgPosition:"leftBottom",repeatLayout:"table",itemWidth:"auto",onValidError:null,onKeyDown:null,onValidSuccess:null,triggers:null,excluded:false,onChange:a.noop},_create:function(){var f=this,c=null,b=null,g=null,e=this.options;if(!this.element.jquery){this.element=a(this.element)}this.element.addClass("coral-form-element-checkboxlist  ctrl-init ctrl-form-element ctrl-init-checkboxlist coral-validation-checkboxlist");typeof f.element.attr("id")=="undefined"&&!!f.options.id&&f.element.attr("id",f.options.id);f.options.id=f.element.uniqueId().attr("id");var d=f.element.attr("name");typeof d!="undefined"?(f.options.name=d):(f.element.attr("name",f.options.name));this.uiBoxlist=a('<span class="coral-checkboxlist"></span>');this.uiInput=a('<input type="hidden">');if(this.options.name){this.uiInput.attr("name",this.options.name)}if(this.options.value){this.uiInput.val(this.options.value)}this._proccessData();if(this.options.repeatLayout=="table"){if(this.options.column==null){this.options.column=3}this._createTable();this.uiTable.appendTo(this.uiBoxlist)}else{if(this.options.repeatLayout=="flow"){if(this.options.column==null){this.options.column=this.data.length}this._createBorder();this.uiBorder.appendTo(this.uiBoxlist)}}this.uiInput.appendTo(this.uiBoxlist);if(e.labelField){this.uiLabel=a('<label class="coral-label">'+e.labelField+"</label>");this.uiBoxlist.prepend(this.uiLabel);this.uiBoxlist.addClass("coral-hasLabel")}if(this.options.value){this.setValue(this.options.value,true)}this.uiBoxlist.insertAfter(this.element);
this.element.hide();this._bindEvent()},reload:function(b){},_proccessData:function(){var g=null,c=null,d=0,e=null,b=null,f=null;if(this.options.url){g=a.loadJson(this.options.url)}g=g||this.options.data;if(typeof g==="string"){c=g.split(this.options.termSplit);g=[];for(;d<c.length;d++){b=c[d];f=b.split(this.options.itemSplit);e={};e[this.options.valueField]=f[0];e[this.options.textField]=f[1];g.push(e)}}this.data=g},_createBorder:function(){var e=this,d=this.options,c=this.options.column,f=this.data;e.uiBorder=a('<span class="coral-checkboxlist-border"></span>');for(var b in f){if(b>(c-1)&&b%(c)==0){a("<br/>").appendTo(e.uiBorder)}e._createItem(f[b]).css("width",d.itemWidth).appendTo(e.uiBorder)}},_createTable:function(){this.uiTable=a("<table></table>");var e=0,d=0,h=this.data,c=h.length||0,f=this.options.column,g=0,k=null,b=null;if(!h||h.length<1){return}g=Math.ceil(c/f);for(;e<g;e++){k=a("<tr></tr>");for(d=0;d<f;d++){b=a("<td></td>");if((e*f+d)<c){this._createItem(h[(e*f+d)]).appendTo(b)}b.appendTo(k)}k.appendTo(this.uiTable)}},_createItem:function(c){var d=c.hidden==true?"hidden":"";var h=a("<span class='coral-checkbox "+d+"'></span>"),e=a("<span class='coral-checkbox-label'></span>"),b=a("<span class='coral-checkbox-icon'></span>"),f=c[this.options.valueField],g=c[this.options.textField];h.attr("data-value",f);e.append(b).append(g);e.appendTo(h);b.addClass("icon icon-checkbox-unchecked");return h},_bindEvent:function(){var b=this;if(this.options.disabled){this._setDisabled(this.options.disabled)}this.uiBoxlist.find(".coral-checkbox").each(function(){a(this).bind("mouseenter"+b.eventNamespace,function(){if(a(this).hasClass("coral-state-disabled")){return}a(this).addClass("coral-checkbox-hover")}).bind("mouseleave"+b.eventNamespace,function(){if(a(this).hasClass("coral-state-disabled")){return}a(this).removeClass("coral-checkbox-hover")}).bind("click"+b.eventNamespace,function(e){if(b.options.disabled){return}var f=a(this),c=f.find(".coral-checkbox-icon");if(f.hasClass("coral-state-disabled")){e.stopPropagation();
return}if(c.hasClass("icon-checkbox-checked")){c.removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked")}else{c.removeClass("icon-checkbox-unchecked").addClass("icon-checkbox-checked")}var d=b.getValue();b._changeValue();b._trigger("onChange",null,{value:b.uiInput.val(),oldValue:d,checked:c.hasClass("icon-checkbox-checked")});e.stopPropagation()}).bind("keydown"+this.eventNamespace,function(c){b._trigger("onKeyDown",c,{})})});this.uiBoxlist.find(".coral-checkbox-label").each(function(){a(this).bind("click"+b.eventNamespace,function(c){if(b.options.readonly){return false}})})},_changeValue:function(){var c=this,b=[];this.uiBoxlist.find(".coral-checkbox").each(function(){if(a(this).find(".coral-checkbox-icon").hasClass("icon-checkbox-checked")){b.push(a(this).attr("data-value"))}});this.uiInput.val(b.toString())},_setDisabled:function(b){b=!!b;this.uiBoxlist.find(".coral-checkbox").each(function(){a(this).toggleClass("coral-state-disabled",b)});this.options.disabled=b},_setReadonly:function(b){b=!!b;this.uiBoxlist.find(".coral-checkbox").each(function(){a(this).toggleClass("coral-readonly",b)});this.options.readonly=b},_setOption:function(b,c){if(b==="id"||b==="name"){return}if(b==="readonly"){this._setReadonly(c)}if(b==="disabled"){this._setDisabled(c);return}this._super(b,c)},_destroy:function(){this.component().remove();if(this.options.name){this.element.removeAttr("orgname").attr("name",this.options.name)}this.element.removeClass("coral-form-element-checkboxlist");this.element.removeClass("coral-validation-checkboxlist");this.element.show()},focus:function(){},component:function(){return this.uiBoxlist},disable:function(){this._setOption("disabled",true);this._setDisabled(true)},readonly:function(){this._setReadonly("readonly",true)},enable:function(){this._setOption("disabled",false);this._setDisabled(false)},disableItem:function(b){this.uiBoxlist.find('.coral-checkbox[data-value="'+b+'"]').toggleClass("coral-state-disabled",true)},enableItem:function(c){this.options.disabled=false;
var b=this.uiBoxlist.find('.coral-checkbox[data-value="'+c+'"]').toggleClass("coral-state-disabled",false)},show:function(){this.component().show()},hide:function(){this.component().hide()},getValue:function(){return this.uiInput.val()},setValue:function(f,e){var b=this.getValue()||[];this.uiBoxlist.find(".icon-checkbox-checked").each(function(){a(this).removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked")});var c=0,d=a.isArray(f)?f:((!f||typeof f!=="string"||""===a.trim(f))?[]:f.split(","));for(;c<d.length;c++){this.uiBoxlist.find('.coral-checkbox[data-value="'+d[c]+'"]').find(".coral-checkbox-icon").removeClass("icon-checkbox-unchecked").addClass("icon-checkbox-checked")}this.uiInput.val(d.toString())},invertCheck:function(c){var b=[];this.uiBoxlist.find(".icon-checkbox-checked").each(function(){a(this).removeClass("icon-checkbox-checked").addClass("coral-checkbox-temp")});this.uiBoxlist.find(".icon-checkbox-unchecked").each(function(){a(this).removeClass("icon-checkbox-unchecked").addClass("icon-checkbox-checked")});this.uiBoxlist.find(".coral-checkbox-temp").each(function(){a(this).removeClass("coral-checkbox-temp").addClass("icon-checkbox-unchecked")});this.uiBoxlist.find(".coral-checkbox").each(function(){if(a(this).find(".coral-checkbox-icon").hasClass("icon-checkbox-checked")){b.push(a(this).attr("data-value"))}});this.setValue(b,c)},checkAll:function(){var c=[],b=0,e=null,d=this.data;for(;b<d.length;b++){e=d[b];c.push(e[this.options.valueField])}this.setValue(c)},getText:function(c){var d=0,e=this.data,f=null,b=[];if(!c){c=this.getValue().split(",")}else{if(typeof c){c=c.split(",")}}for(;d<e.length;d++){f=e[d][this.options.valueField];if(a.inArray(f,c)>-1){b.push(e[d][this.options.textField])}}return b.toString()}})})(jQuery);

(function(a){a.component("coral.radio",{version:"4.0.1",castProperties:["triggers"],options:{showStar:true,id:null,name:null,width:"auto",height:24,label:"",starBefore:false,labelField:null,disabled:false,readonly:false,allowCancel:false,checked:false,required:false,isCheck:false,value:null,errMsg:null,errMsgPosition:"leftBottom",onValidError:null,onValidSuccess:null,onClick:null,onKeyDown:null,onChange:a.noop,triggers:null,excluded:false},_create:function(){var d=this,c=this.options;if(!d.element.jquery){d.element=a(d.element)}d.element.addClass("coral-form-element-radio");d.element.addClass("coral-validation-radio");typeof d.element.attr("id")=="undefined"&&!!d.options.id&&d.element.attr("id",d.options.id);d.options.id=d.element.uniqueId().attr("id");var b=d.element.attr("name");typeof b!="undefined"?(d.options.name=b):(d.element.attr("name",d.options.name));if(a.trim(d.element.val())!=""&&a.trim(d.element.val())!="on"){d.options.value=d.element.val()}else{if(d.options.value){d.element.val(d.options.value)}}d.nameMark="coral-radio-element-"+d._hashCode(d.options.name);d.element.addClass(d.nameMark);d.uiRadio=a('<span class="coral-radio"></span>');d.uiLabel=a('<label class="coral-radio-label" for='+d.options.id+"></label>");d.uiIcon=a('<span class="coral-radio-icon"></span>');d.uiLabel.append(d.uiIcon);if(d.options.label){d.uiLabel.append(d.options.label)}if(d.options.checked){d._getRadios().not(d.element).radio("uncheck");d.uiIcon.addClass("icon icon-radio-checked");d.element.prop("checked",true)}else{d.uiIcon.addClass("icon icon-radio-unchecked");d.element.prop("checked",false)}d.element.after(d.uiRadio);d.uiRadio.append(d.element).append(d.uiLabel);if(c.labelField){this.uiLabelField=a('<label class="coral-label">'+c.labelField+"</label>");this.uiRadio.prepend(this.uiLabelField);this.uiRadio.addClass("coral-hasLabel")}d._bindEvent()},_getRadios:function(){var c=this,b=c.element.closest("form");if(b.length>0){return b.find(a("."+c.nameMark+":visible"))}else{return a("."+c.nameMark+":visible")
}},_setDisabled:function(b){if(b){this.element.prop("disabled",true);this.uiRadio.addClass("coral-state-disabled")}else{this.element.prop("disabled",false);this.uiRadio.removeClass("coral-state-disabled")}this.options.disabled=(b?true:false)},_setReadonly:function(b){if(b){this.element.prop("reaonly",true);this.uiRadio.addClass("coral-readonly")}else{this.element.prop("readonly",false);this.uiRadio.removeClass("coral-state-readonly")}this.options.readonly=!!b},focus:function(){var b=this;if(this.options.disabled||this.options.readonly){return false}this.element.focus();return true},_bindEvent:function(){var c=this;if(this.options.disabled){this._setDisabled(this.options.disabled)}var b;this.element.bind("focus",function(){c.uiRadio.addClass("coral-radio-highlight")}).bind("blur",function(){c.uiRadio.removeClass("coral-radio-highlight")}).bind("click",function(d){if(c.options.disabled){return}c._trigger("onClick",null,{checked:!!c.element.prop("checked")});if(b){b=false;return false}}).bind("keydown"+this.eventNamespace,function(d){c._trigger("onKeyDown",d,{})});this.uiRadio.bind("mouseenter"+this.eventNamespace,function(){if(c.options.disabled){return}a(this).addClass("coral-radio-hover")}).bind("mouseleave"+this.eventNamespace,function(){if(c.options.disabled){return}a(this).removeClass("coral-radio-hover")});this.uiLabel.bind("click",function(d){if(c.options.readonly){return false}b=true;c.options.isCheck=a(c.element).prop("checked");if(!c.options.isCheck){c._clearCheckedState();c.uiIcon.removeClass("icon-radio-unchecked");c.uiIcon.addClass("icon-radio-checked");c.element.prop("checked",true);c._trigger("onChange",null,[{checked:!!c.element.prop("checked")}])}else{if(!c.options.allowCancel){d.preventDefault();return false}c._clearCheckedState();c.uiIcon.addClass("icon icon-radio-unchecked");c.element.prop("checked",false);c._trigger("onChange",null,[{checked:!!c.element.prop("checked")}])}})},clear:function(){},_clearCheckedState:function(){this._getRadios().each(function(){a(this).radio("component").find(".coral-radio-icon").removeClass("icon-radio-checked").addClass(" icon-radio-unchecked")
})},_hashCode:function(f){if(!f){return 0}f=""+f;var d=0,e=0,b=f.length;for(var c=0;c<b;c++){d=31*d+f.charCodeAt(e++);if(d>2147483647||d<2147483648){d=d&4294967295}}return d},_setOption:function(b,c){if(b==="id"||b==="name"){return}if(b==="readonly"){this._setReadonly(c)}if(b==="disabled"){this._setDisabled(c)}this._super(b,c)},_destroy:function(){this.uiRadio.replaceWith(this.element);this.element.removeClass("coral-form-element-radio");this.element.removeClass("coral-validation-radio");this.element.removeClass(this.nameMark)},component:function(){return this.uiRadio},disable:function(){this._setDisabled(true)},enable:function(){this._setDisabled(false)},show:function(){this.component().show()},hide:function(){this.component().hide()},check:function(){var b=this;if(this.uiIcon.hasClass("icon-radio-unchecked")){b._getRadios().each(function(){a(this).radio("component").find(".coral-radio-icon").removeClass("icon-radio-checked").addClass(" icon-radio-unchecked")});this.uiIcon.removeClass("icon-radio-unchecked").addClass("icon-radio-checked");this.element.prop("checked",true)}},uncheck:function(){if(this.uiIcon.hasClass("icon-radio-checked")){this.uiIcon.removeClass("icon-radio-checked").addClass("icon-radio-unchecked");this.element.prop("checked",false)}},isChecked:function(){return this.element.prop("checked")},setValue:function(b){if("on"===b){this.check()}else{this.uncheck()}},getValue:function(){if(this.isChecked()){return this.element.val()}return""},getValues:function(){var c=this,b=[];c._getRadios().each(function(){var d=a(this);if(d.radio("isChecked")){b.push(d.radio("getValue"))}});return b.toString()},refresh:function(){this._destroy();this._create()}})})(jQuery);

/*!
 * 4.0
 * 
 * JS
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 *    jquery.validatehelper.js
 */
(function(a){a.component("coral.radiolist",{version:"4.0.1",castProperties:["data","triggers"],options:{id:null,name:null,valueField:"value",textField:"text",required:false,labelField:null,starBefore:false,showStar:true,column:null,disabled:false,readonly:false,isCheck:false,allowCancel:false,value:null,valueIndex:null,data:[],url:null,termSplit:";",itemSplit:":",repeatLayout:"table",itemWidth:"auto",errMsg:null,errMsgPosition:"leftBottom",onLoad:null,onValidError:null,onKeyDown:null,onValidSuccess:null,triggers:null,excluded:false,onChange:a.noop},_create:function(){var f=this,c=null,b=null,g=null,e=this.options;if(!this.element.jquery){this.element=a(this.element)}this.element.addClass("coral-form-element-radiolist coral-validation-radiolist ctrl-init ctrl-form-element ctrl-init-radiolist");typeof f.element.attr("id")=="undefined"&&!!f.options.id&&f.element.attr("id",f.options.id);f.options.id=f.element.uniqueId().attr("id");var d=f.element.attr("name");typeof d!="undefined"?(f.options.name=d):(f.element.attr("name",f.options.name));this.uiBoxlist=a('<span class="coral-radiolist"></span>');this.uiInput=a('<input type="hidden">');if(this.options.name){this.uiInput.attr("name",this.options.name);this.element.removeAttr("name").attr("orgname",this.options.name)}this._proccessData();if(this.options.repeatLayout=="table"){if(this.options.column==null){this.options.column=3}this._createTable();this.uiTable.appendTo(this.uiBoxlist)}else{if(this.options.repeatLayout=="flow"){if(this.options.column==null){this.options.column=this.data.length}this._createBorder();this.uiBorder.appendTo(this.uiBoxlist)}}this.uiInput.appendTo(this.uiBoxlist);if(e.labelField){this.uiLabel=a('<label class="coral-label">'+e.labelField+"</label>");this.uiBoxlist.prepend(this.uiLabel);this.uiBoxlist.addClass("coral-hasLabel")}this.uiBoxlist.insertAfter(this.element);if(this.options.value){this.setValue(this.options.value)
}this.element.hide();this._bindEvent();if(this.options.url){this._trigger("onLoad",null,[{data:this.getData()}])}},_proccessData:function(){var c=this,b=this.options;if(b.url){a.ajax({type:"get",url:b.url,data:{},async:false,dataType:"json",success:function(d){c._initData(d)},error:function(){a.alert("Json Format Error!")}})}else{if(b.data){this._initData(b.data)}}},_initData:function(g){var c=null,d=0,e=null,b=null,f=null;if(typeof g==="string"){c=g.split(this.options.termSplit);g=[];for(;d<c.length;d++){b=c[d];f=b.split(this.options.itemSplit);e={};e[this.options.valueField]=f[0];e[this.options.textField]=f[1];g.push(e)}}this.data=g},getData:function(){return this.data},_createBorder:function(){var e=this,d=this.options,c=this.options.column,f=this.data;e.uiBorder=a('<span class="coral-radiolist-border"></span>');for(var b in f){if(b>(c-1)&&b%(c)==0){a("<br/>").appendTo(e.uiBorder)}e._createItem(f[b]).css("width",d.itemWidth).appendTo(e.uiBorder)}},_createTable:function(){this.uiTable=a("<table></table>");var e=0,d=0,h=this.data,c=h.length||0,f=this.options.column,g=0,k=null,b=null;if(!h||h.length<1){return}g=Math.ceil(c/f);for(;e<g;e++){k=a("<tr></tr>");for(d=0;d<f;d++){b=a("<td></td>");if((e*f+d)<c){this._createItem(h[(e*f+d)]).appendTo(b)}b.appendTo(k)}k.appendTo(this.uiTable)}},_createItem:function(c){var d=c.hidden==true?"hidden":"";var f=a("<span class='coral-radio "+d+"'></span>"),e=a("<label class='coral-radio-label'></label>"),b=a("<span class='coral-radio-icon'></span>"),g=c[this.options.valueField],h=c[this.options.textField];f.attr("value",g);e.append(b).append(h);e.appendTo(f);b.addClass("icon icon-radio-unchecked");return f},_bindEvent:function(){var b=this;if(this.options.disabled){this._setDisabled(this.options.disabled)}this._on({"mouseenter .coral-radio":function(d){if(b.options.readonly){return false}var c=a(d.target).closest(".coral-radio");if(a(c).hasClass("coral-state-disabled")){return}a(c).addClass("coral-radio-hover")},"mouseleave .coral-radio":function(d){if(b.options.readonly){return false
}var c=a(d.target).closest(".coral-radio");if(a(c).hasClass("coral-state-disabled")){return}a(c).removeClass("coral-radio-hover")},"keydown .coral-radio":function(c){b._trigger("onKeyDown",c,{})},"click .coral-radio":function(i){var f=a(i.target).closest(".coral-radio");if(b.options.readonly){return false}var g=f,c=g.find(".coral-radio-icon"),h=g.attr("value"),d=b.getValue();if(h==d){if(!this.options.allowCancel){return false}c.removeClass("icon-radio-checked").addClass("icon-radio-unchecked");b.uiInput.val("")}else{b.setValue(h);b._trigger("onChange",null,{value:h,checked:c.hasClass("icon-radio-checked")})}i.stopPropagation()}})},_setDisabled:function(b){b=!!b;this.uiBoxlist.find(".coral-radio").each(function(){a(this).toggleClass("coral-state-disabled",b)});this.options.disabled=b},_setReadonly:function(b){b=!!b;this.uiBoxlist.find(".coral-radio").each(function(){a(this).toggleClass("coral-readonly",b)});this.options.readonly=b},_setOption:function(b,c){if(b==="id"||b==="name"){return}if(b==="disabled"){this._setDisabled(c)}if(b==="readonly"){this._setReadonly(c)}this._super(b,c)},_destroy:function(){this.component().remove();if(this.options.name){this.element.removeAttr("orgname").attr("name",this.options.name)}this.element.removeClass("coral-form-element-radiolist");this.element.removeClass("coral-validation-radiolist");this.element.show()},focus:function(){},component:function(){return this.uiBoxlist},disable:function(){this._setDisabled(true)},readonly:function(){this._setReadonly(true)},enable:function(){this._setDisabled(false)},disableItem:function(b){this.uiBoxlist.find('.coral-radio[value="'+b+'"]').toggleClass("coral-state-disabled",true)},enableItem:function(b){this.options.disabled=false;this.uiBoxlist.find('.coral-radio[value="'+b+'"]').toggleClass("coral-state-disabled",false)},show:function(){this.component().show()},hide:function(){this.component().hide()},getValue:function(){return this.uiInput.val()},setValue:function(c){this.uiBoxlist.find(".icon-radio-checked").each(function(){a(this).removeClass("icon-radio-checked").addClass("icon-radio-unchecked")
});var b=this.uiBoxlist.find('.coral-radio[value="'+c+'"]').find(".coral-radio-icon").removeClass("icon-radio-unchecked").addClass("icon-radio-checked");this.uiBoxlist.find(".coral-radio").removeClass("coral-state-highlight");this.uiBoxlist.find('.coral-radio[value="'+c+'"]').addClass("coral-state-highlight");this.uiInput.val(c)},getText:function(e){var c=0,d=this.data,f=null,b=[];if(!e){e=this.getValue()}for(;c<d.length;c++){f=d[c][this.options.valueField];if(f==e){return(d[c][this.options.textField])}}return""}})})(jQuery);

/*!
 * 4.0.1
 *
 * JS:
 *   jquery.coral.code.js
 *   jquery.coral.component.js
 */
(function(a,b){a.component("coral.progressbar",{version:"4.0.1",options:{id:null,name:null,max:100,value:0,text:"{value}%",onChange:null,onComplete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.addClass("coral-progressbar coral-component coral-component-content coral-corner-all");this.valueDiv=a('<div class="coral-progressbar-value coral-component-header coral-corner-left"></div>').appendTo(this.element);this.textDiv=a('<div class="coral-progressbar-text"></div>').appendTo(this.valueDiv);this.valueWidth=this.element.width()-(this.valueDiv.outerWidth(true)-this.valueDiv.outerWidth());this._refreshValue()},_destroy:function(){this.element.removeClass("coral-progressbar coral-component coral-component-content coral-corner-all");this.valueDiv.remove()},value:function(c){if(c===b){return this.options.value}this.options.value=this._constrainedValue(c);this._refreshValue()},_constrainedValue:function(c){if(c===b){c=this.options.value}this.indeterminate=c===false;if(typeof c!=="number"){c=0}return(this.indeterminate?false:Math.min(this.options.max,Math.max(this.min,c)))},_setOptions:function(c){var d=c.value;delete c.value;this._super(c);this.options.value=this._constrainedValue(d);this._refreshValue()},_setOption:function(c,d){if(c==="max"){d=Math.max(this.min,d)}if(c==="disabled"){this.element.toggleClass("coral-state-disabled",!!d).attr("aria-disabled",d)}this._super(c,d)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var d=this.options.value,c=this._percentage().toFixed(0),g=this.options.text.replace(/{value}/,c),f=0,e=0;this.valueDiv.toggle(this.indeterminate||d>this.min).toggleClass("coral-corner-right",d===this.options.max).width(this.valueWidth*c/100);if(100==c){this.valueDiv.width("auto")}this.textDiv.html(g);f=(this.element.position().left+(this.element.outerWidth()-this.textDiv.outerWidth())/2);
e=(this.element.position().top+(this.element.outerHeight()-this.textDiv.outerHeight())/2);this.textDiv.position({of:this.element,my:f+" "+e,at:f+" "+e});this.element.toggleClass("coral-progressbar-indeterminate",this.indeterminate);if(this.indeterminate){if(!this.overlayDiv){this.overlayDiv=a("<div class='coral-progressbar-overlay'></div>").appendTo(this.valueDiv)}}else{if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null}}if(this.oldValue!==d){this.oldValue=d;this._trigger("onChange",null,{value:d,oldValue:this.oldValue})}if(d===this.options.max){this._trigger("onComplete")}}})})(jQuery);

/*!
 *
 * Depends:
 *	jquery.coral.core.js
 *	jquery.coral.component.js
 */
(function(a,b){a.component("coral.accordion",{version:"4.0.1",options:{active:0,animate:{params:{},duration:300,easing:"swing"},collapsible:false,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"icon-arrow-down",header:"icon-arrow-right2"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var c=this.options;c.icons=a.coral.toFunction(c.icons);this.prevShow=this.prevHide=a();this.element.addClass("coral-accordion ctrl-init ctrl-init-accordion coral-component coral-helper-reset").attr("role","tablist");if(!c.collapsible&&(c.active===false||c.active==null)){c.active=0}this._processPanels();if(c.active<0){c.active+=this.headers.length}this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:!this.active.length?a():this.active.next()}},_createIcons:function(){var d=this,c=this.options.icons;if(c){a("<span>").addClass("coral-accordion-header-icon icon "+c.header).prependTo(this.headers);this.active.children(".coral-accordion-header-icon").removeClass(c.header).addClass(c.activeHeader);this.headers.each(function(){var e=a.parser.parseOptions(this);if(e.collapsible==false){a(this).children(".coral-accordion-header-icon").remove()}else{a(this).addClass("coral-accordion-icons")}})}},_destroyIcons:function(){this.headers.removeClass("coral-accordion-icons").children(".coral-accordion-header-icon").remove()},_destroy:function(){var c;this.element.removeClass("coral-accordion coral-component coral-helper-reset").removeAttr("role");this.headers.removeClass("coral-accordion-header coral-accordion-header-active coral-state-default coral-corner-all coral-state-active coral-state-disabled coral-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId();
this._destroyIcons();c=this.headers.next().removeClass("coral-helper-reset coral-widget-content coral-corner-bottom coral-accordion-content coral-accordion-content-active coral-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId();if(this.options.heightStyle!=="content"){c.css("height","")}},_setOption:function(c,d){if(c==="active"){this._activate(d);return}if(c==="event"){if(this.options.event){this._off(this.headers,this.options.event)}this._setupEvents(d)}this._super(c,d);if(c==="collapsible"&&!d&&this.options.active===false){this._activate(0)}if(c==="icons"){this._destroyIcons();if(d){this._createIcons()}}if(c==="disabled"){this.element.toggleClass("coral-state-disabled",!!d).attr("aria-disabled",d);this.headers.add(this.headers.next()).toggleClass("coral-state-disabled",!!d)}},_keydown:function(f){if(f.altKey||f.ctrlKey){return}var g=a.coral.keyCode,e=this.headers.length,c=this.headers.index(f.target),d=false;switch(f.keyCode){case g.RIGHT:case g.DOWN:d=this.headers[(c+1)%e];break;case g.LEFT:case g.UP:d=this.headers[(c-1+e)%e];break;case g.SPACE:case g.ENTER:this._eventHandler(f);break;case g.HOME:d=this.headers[0];break;case g.END:d=this.headers[e-1];break}if(d){a(f.target).attr("tabIndex",-1);a(d).attr("tabIndex",0);d.focus();f.preventDefault()}},_panelKeyDown:function(c){if(c.keyCode===a.coral.keyCode.UP&&c.ctrlKey){a(c.currentTarget).prev().focus()}},refresh:function(){var c=this.options;this._processPanels();if((c.active===false&&c.collapsible===true)||!this.headers.length){c.active=false;this.active=a()}else{if(c.active===false){this._activate(0)}else{if(this.active.length&&!a.contains(this.element[0],this.active[0])){if(this.headers.length===this.headers.find(".coral-state-disabled").length){c.active=false;this.active=a()}else{this._activate(Math.max(0,c.active-1))}}else{c.active=this.headers.index(this.active)}}}this._destroyIcons();this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("coral-accordion-header coral-state-default coral-corner-all");
this.headers.next().addClass("coral-accordion-content coral-helper-reset coral-component-content coral-corner-bottom").filter(":not(.coral-accordion-content-active)").hide()},_refresh:function(){var f,d=this.options,c=d.heightStyle,e=this.element.parent();this.active=this._findActive(d.active).addClass("coral-accordion-header-active coral-state-active coral-corner-top").removeClass("coral-corner-all");this.active.next().addClass("coral-accordion-content-active").show();this.headers.attr("role","tab").each(function(){var j=a(this),i=j.uniqueId().attr("id"),g=j.next(),h=g.uniqueId().attr("id");j.attr("aria-controls",h);g.attr("aria-labelledby",i)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0)}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"})}this._createIcons();this._setupEvents(d.event);if(c==="fill"){f=e.height();this.element.siblings(":visible").each(function(){var h=a(this),g=h.css("position");if(g==="absolute"||g==="fixed"){return}f-=h.outerHeight(true)});this.headers.each(function(){f-=a(this).outerHeight(true)});this.headers.next().each(function(){a(this).height(Math.max(0,f-a(this).innerHeight()+a(this).height()))}).addClass("overflow-auto")}else{if(c==="auto"){f=0;this.headers.next().each(function(){f=Math.max(f,a(this).css("height","").height())}).height(f)}}this.headers.each(function(){var g=a.parser.parseOptions(this);if(g.collapsible==false){a(this).next().addClass("hidden")}})},_activate:function(c){var d=this._findActive(c)[0];if(d===this.active[0]){return}d=d||this.active[0];this._eventHandler({target:d,currentTarget:d,preventDefault:a.noop})},_findActive:function(c){return typeof c==="number"?this.headers.eq(c):a()},_setupEvents:function(d){var c={keydown:"_keydown"};if(d){a.each(d.split(" "),function(f,e){c[e]="_eventHandler"
})}this._off(this.headers.add(this.headers.next()));this._on(this.headers,c);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(c){var k=this.options,f=this.active,g=a(c.currentTarget),i=g[0]===f[0],d=i&&k.collapsible,e=d?a():g.next(),h=f.next(),j={oldHeader:f,oldPanel:h,newHeader:d?a():g,newPanel:e,headerOptions:a.parser.parseOptions((d?a():g))};c.preventDefault();if((i&&!k.collapsible)||(this._trigger("beforeActivate",c,j)===false)){return}k.active=d?false:this.headers.index(g);this.active=i?a():g;this._toggle(j);f.removeClass("coral-accordion-header-active coral-state-active");if(k.icons){f.children(".coral-accordion-header-icon").removeClass(k.icons.activeHeader).addClass(k.icons.header)}if(!i){g.removeClass("coral-corner-all").addClass("coral-accordion-header-active coral-state-active coral-corner-top");if(k.icons){g.children(".coral-accordion-header-icon").removeClass(k.icons.header).addClass(k.icons.activeHeader)}g.next().addClass("coral-accordion-content-active")}},_toggle:function(e){var c=e.newPanel,d=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=c;this.prevHide=d;if(this.options.animate){this._animate(c,d,e)}else{d.hide();c.show();this._toggleComplete(e)}d.attr({"aria-hidden":"true"});d.prev().attr("aria-selected","false");if(c.length&&d.length){d.prev().attr({tabIndex:-1,"aria-expanded":"false"})}else{if(c.length){this.headers.filter(function(){return a(this).attr("tabIndex")===0}).attr("tabIndex",-1)}}c.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(c,k,g){var j,i,f,h=this,l=0,m=c.length&&(!k.length||(c.index()<k.index())),e=this.options.animate||{},n=m&&e.down||e,d=function(){h._toggleComplete(g)};if(typeof n==="number"){f=n}if(typeof n==="string"){i=n}i=i||n.easing||e.easing;f=f||n.duration||e.duration;if(!k.length){return c.animate(this.showProps,f,i,d)
}if(!c.length){return k.animate(this.hideProps,f,i,d)}j=c.show().outerHeight();k.animate(this.hideProps,{duration:f,easing:i,step:function(o,p){p.now=Math.round(o)}});c.hide().animate(this.showProps,{duration:f,easing:i,complete:d,step:function(o,p){p.now=Math.round(o);if(p.prop!=="height"){l+=p.now}else{if(h.options.heightStyle!=="content"){l=0}}}})},_toggleComplete:function(d){var c=d.oldPanel;c.removeClass("coral-accordion-content-active").prev().removeClass("coral-corner-top").addClass("coral-corner-all");if(c.length){c.parent()[0].className=c.parent()[0].className}this._trigger("onActivate",null,d)}})})(jQuery);

(function(b,c){b.component("coral.autocomplete",b.coral.control,{version:"4.0.2",defaultElement:"<input>",castProperties:["source","buttons","rootNode","triggers"],options:{appendTo:null,autoFocus:false,allowRepeat:false,asyncType:"post",delay:300,maxLabelWidth:100,multiLineLabel:false,minLength:0,minHeight:1,height:"auto",multiple:false,position:{my:"left top",at:"left bottom",collision:"none"},value:"",text:"",forceSelection:false,defaultValue:"",postMode:"value",required:false,showStar:true,separator:",",buttons:[],errMsg:null,errMsgPosition:"leftBottom",panelHeight:"auto",maxPanelHeight:200,isLabel:false,source:null,valueField:"value",textField:"label",searchField:"valueField",onValidSuccess:null,onValidError:null,onChange:null,onBlur:null,onClose:null,onFocus:null,onOpen:null,oncancel:null,onResponse:null,onSearch:null,onSelect:null,triggers:null,excluded:false},requestIndex:0,pending:0,_create:function(){var d=this;this._prepareInit();this._initAutocomplete();this._initState();this._initSource();this._initData();this._bindEvent();this._setDefaultValue();this._setDefaultText();this.liveRegion=b("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("coral-helper-hidden-accessible").appendTo(this.document[0].body);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}});if(this.options.multiLineLabel){b(this.element).easyText({minWidth:10,maxWidth:200,maxChars:60});this._on(this.document,{click:function(e){if(this.options.readonly||this.options.isLabel){return}this._moveInput("last",e)}})}},_prepareInit:function(){this.lastSelectedItem={};this.selectedItems=[];this.isNewMenu=true},_initAutocomplete:function(){var f=this.options.render=="tree"?"autocompletetree":"autocomplete";if(this.options.multiLineLabel){var e=this,h=this.element[0].nodeName.toLowerCase(),g=h==="textarea",d=h==="input";this.ismultiLineLabel=g?true:d?false:this.element.prop("isContentEditable");this.autocompleteWrapper=b("<span class='coral-"+f+" coral-textboxlist coral-textbox'></span>").insertAfter(this.element);
this.elementBorder=b("<span class='coral-textbox-border coral-corner-all'></span>").css({minHeight:this.options.minHeight+"px",height:this.options.height,overflow:"auto"}).appendTo(this.autocompleteWrapper);this.valuebox=b("<input type='hidden'>").appendTo(this.elementBorder);this.valueMethod=this.valuebox[g||d?"val":"text"];this.textMethod=this.element[g||d?"val":"text"];this.element.addClass("coral-validation-"+f+" coral-autocomplete-input coral-autocomplete-text coral-textbox-default").attr("autocomplete","off");this.textboxlistUl=b("<ul class='coral-textboxlist-ul'><li class='coral-textboxlist-inputLi'></li></ul>");this.textboxlistUl.appendTo(this.elementBorder);this.element.appendTo(this.textboxlistUl.find(".coral-textboxlist-inputLi"));if(this.options.buttons.length>0){this._createButtonPanel()}if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name");this.valuebox.attr("name",this.options.name);this.element.removeAttr("name")}else{if(this.options.name){this.valuebox.attr("name",this.options.name)}}if(this.options.text){this.setText(this.options.text)}if(b.trim(this.valuebox.val())!=""){this.options.value=this.valuebox.val()}if(this.options.showPopup){}}else{var h=this.element[0].nodeName.toLowerCase(),g=h==="textarea",d=h==="input";this.ismultiLineLabel=g?true:d?false:this.element.prop("isContentEditable");this.autocompleteWrapper=b('<span class="coral-'+f+' coral-textbox" style="border-width: 0;"></span>').insertAfter(this.element);this.elementBorder=b('<span class="coral-textbox-border coral-corner-all"></span>').css({minHeight:this.options.minHeight+"px"}).appendTo(this.autocompleteWrapper);this.valuebox=b("<input type='hidden'>").appendTo(this.elementBorder);this.valueMethod=this.valuebox[g||d?"val":"text"];this.textMethod=this.element[g||d?"val":"text"];this.element.addClass("coral-validation-"+f+" coral-autocomplete-input coral-autocomplete-text coral-textbox-default coral-form-element-autocomplete").attr("autocomplete","off");
this.element.appendTo(this.elementBorder);if(this.options.buttons.length>0){this._createButtonPanel()}if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name");this.valuebox.attr("name",this.options.name);this.element.removeAttr("name")}else{if(this.options.name){this.valuebox.attr("name",this.options.name)}}if(this.options.text){this.setText(this.options.text)}if(b.trim(this.valuebox.val())!=""){this.options.value=this.valuebox.val()}}},_initState:function(){if(this.element.prop("readonly")||this.options.readonly){this.options.readonly=true;this.valuebox.prop("readonly",true);this.element.prop("readonly",true);this.component().addClass("coral-readonly")}if(this.options.isLabel){this.element.prop("readonly",true);this.valuebox.prop("readonly",true);this.component().addClass("coral-isLabel")}},_bindEvent:function(){var f=this,e,d,g;this._on(this.element,{mouseenter:function(h){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}f.autocompleteWrapper.addClass("coral-textbox-hover")},mouseleave:function(h){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}f.autocompleteWrapper.removeClass("coral-textbox-hover")},keyup:function(h){if(this.options.readonly||this.options.isLabel){return}this._trigger("onKeyUp",h,{})},keydown:function(h){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}if(this.element.prop("readOnly")){e=true;g=true;d=true;return}e=false;g=false;d=false;var i=b.coral.keyCode;switch(h.keyCode){case i.PAGE_UP:if(this.options.render=="tree"){break}e=true;this._move("previousPage",h);break;case i.PAGE_DOWN:if(this.options.render=="tree"){break}e=true;this._move("nextPage",h);break;case i.LEFT:e=true;this._moveItem("left",h);break;case i.RIGHT:e=true;this._moveItem("right",h);break;case i.UP:if(this.options.render=="tree"){break
}e=true;this._keyEvent("previous",h);break;case i.DOWN:if(this.options.render=="tree"){break}e=true;this._keyEvent("next",h);break;case i.ENTER:if(this.menu.active){e=true;h.preventDefault();this.menu.select(h)}break;case i.TAB:if(this.menu.active){this.menu.select(h)}break;case i.ESCAPE:if(this.menu.element.is(":visible")){if(!this.ismultiLineLabel){this.setValue(this.term,true)}this.close(h);h.preventDefault()}break;default:d=true;this._searchTimeout(h);break}this._trigger("onKeyDown",h,{})},keypress:function(h){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}if(e){e=false;if(!this.ismultiLineLabel||this.menu.element.is(":visible")){h.preventDefault()}return}if(d){return}if(this.options.render=="tree"){return}var i=b.coral.keyCode;switch(h.keyCode){case i.PAGE_UP:this._move("previousPage",h);break;case i.PAGE_DOWN:this._move("nextPage",h);break;case i.UP:this._keyEvent("previous",h);break;case i.DOWN:this._keyEvent("next",h);break;default:break}},input:function(h){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}if(g){g=false;h.preventDefault();return}this._searchTimeout(h)},focus:function(){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}this.selectedItem=null;this.previous=this.getValue();this.component().addClass("coral-state-focus")},blur:function(i){this.component().removeClass("coral-state-focus");if(f.options.disabled||f.options.isLabel||f.options.readonly){return}if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(i);if(!this.options.multiLineLabel){if(this.options.multiple){}else{if(!this.options.forceSelection){if(this.lastSelectedItem[this.options.textField]!=this.element.val()){this.setValue(this.element.val(),true)}}else{if(this.options.render=="tree"){}else{var h=b.grep(this.responseItems,function(j){return j[f.options.textField]==f.element.val()});if(!h.length){this.setValue("",true)}else{this.setValue(h[0][f.options.valueField],true)}}}}}this._trigger("onBlur",i,{item:this.selectedItem})
}});this._on(this.menu.element,{mousedown:function(h){if(this.options.readonly||this.options.isLabel){return}h.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];if(!b(h.target).closest(".coral-menu-item").length){this._delay(function(){var j=this;this.document.one("mousedown",function(k){if(k.target!==j.element[0]&&k.target!==i&&!b.contains(i,k.target)){j.close()}})})}},menuonfocus:function(j,k){if(this.options.readonly||this.options.isLabel){return}var h,i;if(this.isNewMenu){this.isNewMenu=false;if(j.originalEvent&&/^mouse/.test(j.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){b(j.target).trigger(j.originalEvent)});return}}i=k.item.data("coral-autocomplete-item");if(false!==this._trigger("onFocus",j,{item:i})){if(j.originalEvent&&/^key/.test(j.originalEvent.type)){}}h=k.item.attr("aria-label")||i[this.options.valueField];if(h&&b.trim(h).length){this.liveRegion.children().hide();b("<div>").text(h).appendTo(this.liveRegion)}},menuonselect:function(j,k){if(this.options.readonly||this.options.isLabel){return}var i=k.item.data("coral-autocomplete-item"),h=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=h;this._delay(function(){this.previous=h;this.selectedItem=i;f.lastSelectedItem=i})}f.lastSelectedItem=i;this.selectedItem=i;if(false!==this._trigger("onSelect",j,{item:i})){if(this.options.multiLineLabel){this.isMultiLabel(j,k)}else{if(this.options.postMode=="value"){this.setValue(i[this.options.valueField],true)}if(this.options.postMode=="text"){this.setValue(i[this.options.textField],true)}if(this.options.postMode=="value-text"){this.setValue(i[this.options.valueField]+"-"+i[this.options.textField],true)}}}this.term=this.getText();this.close(j)}});if(this.options.multiLineLabel){this._on({"click .coral-label-close":function(h){if(this.options.readonly||this.options.isLabel){return}this._removeLabel(h)},"click .coral-textboxlist-item":function(h){if(this.options.readonly||this.options.isLabel){return
}h.stopPropagation()},"click .coral-textbox-border":function(h){if(this.options.readonly||this.options.isLabel){return}this.element.focus()},"mouseenter .coral-label-close":function(h){b(h.target).addClass("coral-label-close-hover")},"mouseleave .coral-label-close":function(h){b(h.target).removeClass("coral-label-close-hover")},"focus .coral-textboxlist-item":function(h){if(this.options.readonly||this.options.isLabel){return}b(h.target).addClass("coral-state-active")},"blur .coral-textboxlist-item":function(h){b(h.target).removeClass("coral-state-active")},"keydown .coral-state-active":function(i){if(this.options.readonly||this.options.isLabel){return}var h=b.coral.keyCode;switch(i.keyCode){case h.LEFT:this._moveInput("left",i);break;case h.RIGHT:this._moveInput("right",i);break;case h.BACKSPACE:this._removeLabel(i);break;case h.DELETE:this._removeLabel(i);break;default:break}}})}},_initData:function(){var e=this;var d=this.options;this.menu=b("<ul>").addClass("coral-autocomplete-panel coral-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");if(isNaN(d.panelHeight)){b(".coral-autocomplete-panel").css({"max-height":d.maxPanelHeight+"px"})}},_setDefaultValue:function(){if(!this.options.value){return}this.setValue(this.options.value)},_setDefaultText:function(){if(!this.options.text){return}this.setText(this.options.text)},getLastSelectedItem:function(){return this.lastSelectedItem},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("coral-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(d,e){this._super(d,e);if(d==="isLabel"&&typeof e==="boolean"){this.element.prop("readonly",e);this.valuebox.prop("readonly",e);this.component().removeClass("coral-readonly");this.component().toggleClass("coral-isLabel",e)}if(d==="readonly"&&typeof e==="boolean"){this.element.prop("readonly",e);this.valuebox.prop("readonly",e);this.component().removeClass("coral-isLabel");
this.component().toggleClass("coral-readonly",e)}if(d==="source"){this._initSource()}if(d==="appendTo"){this.menu.element.appendTo(this._appendTo())}if(d==="disabled"&&e&&this.xhr){this.xhr.abort()}if(d==="value"){this.setValue(e)}},_appendTo:function(){var d=this.options.appendTo;if(d){d=d.jquery||d.nodeType?b(d):this.document.find(d).eq(0)}if(!d||!d[0]){d=this.element.closest(".coral-front")}if(!d.length){d=this.document[0].body}return d},_filter:function(f,e,d){d(b.coral.autocomplete.filter(f,e.term,this.options.valueField,this.options.textField,this.options.searchField))},_initSource:function(){var f,d,e=this;if(b.isArray(this.options.source)){f=this.options.source;this.source=function(h,g){e._filter(f,h,g)}}else{if(typeof this.options.source==="string"){d=this.options.source;this.source=function(h,g){if(e.xhr){e.xhr.abort()}if(this.element.attr("name")){h[this.element.attr("name")]=h.term}e.xhr=b.ajax({url:d,data:h,type:e.options.asyncType,dataType:"json",success:function(i){if(e.options.render!="tree"){g(i)}else{b(e.menu.element).tree("reload",i);g(i)}},error:function(){g([])}})}}else{this.source=this.options.source}}},_searchTimeout:function(d){clearTimeout(this.searching);this.searching=this._delay(function(){var f=this.term===this._term(),e=this.menu.element.is(":visible"),g=d.altKey||d.ctrlKey||d.metaKey||d.shiftKey;if(!f||(f&&!e&&!g)){this.selectedItem=null;this.search(null,d)}},this.options.delay)},_term:function(){if(this.options.multiLineLabel){return this.element.val()}return this.getText()},search:function(e,d){e=e!=null?e:this._term();this.term=this._term();if(e.length<this.options.minLength||(this.options.minLength>0&&b.trim(e)=="")){return this.close(d)}if(this._trigger("onSearch",d)===false){return}return this._search(e)},_search:function(d){this.pending++;this.element.addClass("coral-autocomplete-loading");this.cancelSearch=false;this.source({term:d},this._response())},_response:function(){var d=++this.requestIndex;return b.proxy(function(e){if(d===this.requestIndex){this.__response(e)
}this.pending--;if(!this.pending){this.element.removeClass("coral-autocomplete-loading")}},this)},__response:function(d){if(d){d=this._normalize(d)}this._trigger("onResponse",null,{content:d});if(!this.options.disabled&&d&&d.length&&!this.cancelSearch){this._suggest(d);this._trigger("onOpen")}else{this._close()}},close:function(d){this.cancelSearch=true;this._close(d)},_close:function(d){if(this.menu.element.is(":visible")){this.menu.element.hide();this.options.render!="tree"&&this.menu.blur();this.isNewMenu=true;this._trigger("onClose",d)}},_change:function(d){if(this.previous!==this.getValue()){this._trigger("onChange",d,{item:this.selectedItem,oldValue:this.previous,value:this.getValue(),text:this.getText(),lastSelectedItem:this.lastSelectedItem})}},_normalize:function(d){var e=this;if(d.length&&d[0][this.options.textField]&&d[0][this.options.valueField]){return d}return b.map(d,function(f){if(typeof f==="string"){return{label:f,value:f}}return b.extend({},f,{label:f.label||f.value,value:f.value||f.label})})},_suggest:function(e){var g=this.menu.element;if(this.options.render=="tree"){}else{this.menu.element.empty();this._renderMenu(g,e);this.isNewMenu=true;this.menu.refresh()}this.responseItems=e;g.show();var d=g.siblings(".coral-front:visible").map(function(){return +b(this).css("z-index")}).get(),f=Math.max.apply(null,d);if(f>=+g.css("z-index")){g.css("z-index",f+1)}this._resizeMenu();g.position(b.extend({of:this.elementBorder},this.options.position));if(this.options.autoFocus){this.menu.next()}},_resizeMenu:function(){var d=this.menu.element;d.outerWidth(Math.max(d.width("").outerWidth()+1,this.elementBorder.outerWidth()))},_renderMenu:function(e,d){var f=this;b.each(d,function(g,h){f._renderItemData(e,h)})},_renderItemData:function(d,e){return this._renderItem(d,e).data("coral-autocomplete-item",e)},_renderItem:function(d,e){return b("<li>").addClass(!!e.hidden==true?"hidden":"").text(e[this.options.textField]).appendTo(d)},_move:function(e,d){if(!this.menu.element.is(":visible")){this.search(null,d);
return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){if(!this.ismultiLineLabel){this.setValue("",true);this.setText(this.term)}this.menu.blur();return}this.menu[e](d)},component:function(){return this.autocompleteWrapper},_setLastSelectedItem:function(){var d=this.options;var e=this.getValue(),f=this.getText();this.lastSelectedItem={};this.lastSelectedItem[d.valueField]=e;this.lastSelectedItem[d.textField]=f},_text:function(f){maxLabelWidth=this.options.maxLabelWidth;if(this.options.multiLineLabel){if(f!=""&&!f){var e=[];b.each(this.textboxlistUl.find(".coral-textboxlist-item"),function(){e.push(b(this).text())});return e.join(",")}var d="";if(f!=""&&!(f instanceof Array)){f=f.split(this.options.separator)}if(f instanceof Array){b.each(f,function(g){f.splice(g,1,"<li tabindex='-1' class='coral-textboxlist-item'  style='  max-width:"+maxLabelWidth+"px;' title='"+this+"'>"+this+"<span class='coral-label-close icon icon-close2'></span></li>")});d=f.join("")}else{d="<li tabindex='-1' class='coral-textboxlist-item'  style='  max-width:"+maxLabelWidth+"px;' title='"+this+"' >"+f+"<span class='coral-label-close icon icon-close2'></span></li>"}if(f!=""){if(this.options.multiple){this.textboxlistUl.find(".coral-textboxlist-inputLi").before(d)}else{this.textboxlistUl.find(".coral-textboxlist-item").remove(".coral-textboxlist-item");this.textboxlistUl.find(".coral-textboxlist-inputLi").before(d)}}else{this.textboxlistUl.find(".coral-textboxlist-item").remove(".coral-textboxlist-item")}}else{return this.textMethod.apply(this.element,arguments)}},isMultiLabel:function(g,j,i){if(this.options.render=="tree"){var f=i,e=f.id,h=[]}else{var f=j.item.data("coral-autocomplete-item");var e=f[this.options.valueField],d=f[this.options.textField];text=this.getText(),nt=text==""?[]:text.split(","),nt.push(d)}var h=this.getOldValue();if(this.options.multiple){if(!this.options.allowRepeat&&b.inArray(e,h)>-1){return}if(this.options.postMode=="value"){h.push(e);
if(typeof this.options.source=="string"){this.setValue(h.join(","),true);this.setText(nt.join(","))}else{this.setValue(h.join(","),true)}}if(this.options.postMode=="text"){if(!this.options.allowRepeat&&b.inArray(d,h)>-1){return}if(h==""){this.setValue(d,true)}else{this.setValue(h+","+d,true)}}if(this.options.postMode=="value-text"){this.setValue(e+"-"+d,true)}}else{if(this.options.postMode=="value"){if(typeof this.options.source=="string"){this.setValue(e,true);this.setText(d)}else{this.setValue(e,true)}}if(this.options.postMode=="text"){this.setValue(d,true)}if(this.options.postMode=="value-text"){this.setValue(e+"-"+d,true)}}},getOldValue:function(){var f=this.options,e=[],h=[],d=0;if(!this.currentValues){return e}var h=this.currentValues.split(",");for(;d<h.length;d++){var g=h[d];e.push(g)}return e},setValue:function(d,f){var j=this,m,o,f,i;if(typeof d!=="string"){m=d.value;f=d.changed;i=d.removed}else{m=d}this.previous=this.getValue();if(this.options.multiLineLabel){var j=this;var k=this.element.closest("li.coral-textboxlist-inputLi"),p=k.index(),h=p,n=this.valuebox.val(m)==""?[]:this.valuebox.val(m);this.setText("");if(b.trim(m)==""){this.setText(m)}else{if("text"===this.options.postMode){this.setText(m)}else{if(b.trim(m)!==""&&b.isArray(this.options.source)){var l=(this.options.render=="tree")?b(this.menu.element).tree("transformToArray",this.options.source.concat()):this.options.source,e=[],g=b.grep(m.split(","),function(r){var q=false;b.each(l,function(s){if(r==l[s][j.options.valueField]){e.push(l[s][j.options.textField]);return true}});return q});if(e.length){this.setText(e)}}}}if(m==""){n=[]}this.valuebox.val(m);this.currentValues=m;this.element.val("")}else{if(b.trim(m)==""){this.setText(m)}else{if("text"===this.options.postMode){this.setText(m)}else{if(typeof this.options.source=="string"&&this.selectedItem){this.setText(this.selectedItem[this.options.textField])}else{if(b.trim(m)!==""&&b.isArray(this.options.source)){var l=this.options.source.concat();var g=b.grep(l,function(q){return q[j.options.valueField]==m
});if(g.length){this.setText(g[0][j.options.textField])}}else{if(b.trim(m)==""){this.setText(m)}}}}}this.valuebox.val(m);this.setText(m)}f&&this._change(null)},setText:function(d){this._text(d);this._setLastSelectedItem()},getValue:function(){if(this.options.multiLineLabel){return this.valuebox.val()}else{return this.valueMethod.apply(this.valuebox)}},getText:function(){return this._text()},focus:function(){if(this.options.disabled||this.options.readonly||this.options.isLabel){return false}this.element.focus()},_keyEvent:function(e,d){if(!this.ismultiLineLabel||this.menu.element.is(":visible")){this._move(e,d);d.preventDefault()}},_removeLabel:function(i){var g=this.element.closest("li.coral-textboxlist-inputLi"),m=b(i.target).closest("li.coral-textboxlist-item"),j=b(i.target).closest("li.coral-textboxlist-item:last");g.insertAfter(j);var l=g.index();var f=m.index();var h=f;if(f>l){h=f-1}var d=this.getText().split(",");d.splice(h,1);m.remove();var k=this.getValue().split(",");k.splice(h,1);this.selectedItems.splice(h,1);this.selectedItem=null;this.setValue(k.join(","),true);if(typeof this.options.source=="string"&&this.options.postMode=="value"){this.setText(d.join(","))}this._moveInput("last",i);this.element.val("");this.element.focus()},_moveInput:function(i,h){var d=this.element.closest("li.coral-textboxlist-inputLi");var f=b(h.target).closest("li.coral-textboxlist-item");var g=b(d).closest("li.coral-textboxlist-inputLi").nextAll("li.coral-textboxlist-item").last();switch(i){case"left":d.insertBefore(f);this.element.val("");this.element.focus();break;case"right":d.insertAfter(f);this.element.val("");this.element.focus();break;case"last":d.insertAfter(g);this.element.val("");break}},_moveItem:function(g,f){var d=this.element.closest("li.coral-textboxlist-inputLi");if(g=="left"&&d.prev().length&&b(d.find("input")).caret()==0){this.element.val("");d.prev().focus()}if(g=="right"&&d.next().length&&b(d.find("input")).caret()==d.find("input").val().length){this.element.val("");
d.next().focus()}}});b.extend(b.coral.autocomplete,{escapeRegex:function(d){return d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(j,f,e,d,i){var g=this;var h=new RegExp(b.coral.autocomplete.escapeRegex(f),"i");if(i){return b.grep(j,function(n){var l=h.test(n[d]||n[e]||n);var m=i.split(",");for(var k=0;k<m.length;k++){if(!l&&n[m[k]]){l=h.test(n[m[k]]);if(l){break}}}return l})}return b.grep(j,function(k){return h.test(k[d]||k[e]||k[i]||k)})}});b.component("coral.autocomplete",b.coral.autocomplete,{options:{messages:{noResults:"No search results.",results:function(d){return d+(d>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var d;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return}if(e&&e.length){d=this.options.messages.results(e.length)}else{d=this.options.messages.noResults}this.liveRegion.children().hide();b("<div>").text(d).appendTo(this.liveRegion)}});var a=b.coral.autocomplete})(jQuery);

/*!
 * 4.0 
 *
 * JS:
 *	jquery.coral.core.js
 *	jquery.coral.component.js
 *	jquery.coral.mouse.js
 *  jquery.coral.button.js
 *	jquery.coral.draggable.js
 *	jquery.coral.position.js
 *	jquery.coral.resizable.js
 */
(function(c,d){var a={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},b={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},e=null;c.component("coral.dialog",{version:"4.0.1",castProperties:["buttons"],options:{appendTo:"body",autoOpen:true,buttons:[],closeOnEscape:true,closeText:"",closeButtonClass:"icon-close2",closable:true,loadtext:" ...",maximumText:"",maximizable:false,maximized:false,restoreWidth:200,restoreHeight:200,dialogClass:"",draggable:true,hide:null,height:"auto",percent:false,manualResize:false,maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,zIndex:null,timeOut:0,position:{my:"center",at:"center",of:window,collision:"fit",using:function(g){var f=c(this).css(g).offset().top;if(f<0){c(this).css("top",g.top-f)}}},resizable:true,show:null,title:null,subTitle:null,type:null,wtype:"dialog",message:null,width:300,url:"",reLoadOnOpen:false,postData:[],asyncType:"post",beforeClose:null,onCreate:null,onClose:null,onDrag:null,onDragStart:null,onDragStop:null,onFocus:null,onLoad:null,onLoadError:null,onOpen:null,onResize:null,onResizeStart:null,onResizeStop:null,onConfirm:null,onCancel:null,autoFocus:false},_create:function(){var g=this;var f=/^(\d|[1-9]\d|100)%$/;if(f.test(this.options.height)){this.options.percent=this.options.height;this.options.height=this._percentToPx()}if(c.inArray(this.options.wtype,["dialog","message","alert","confirm"])<0){this.options.wtype="dialog"}if(this.options.wtype!=="dialog"){this.options.minHeight=null}this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.element.addClass("ctrl-init ctrl-init-dialog");
this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this.originalsubTitle=this.element.attr("subTitle");this.options.subTitle=this.options.subTitle||this.originalsubTitle;this._createWrapper();var h=this.options.isMessage?"alert-box":"coral-dialog-content";this.element.show().removeAttr("title").addClass(h+" coral-component-content").appendTo(this.uiDialog);if(this.options.wtype!=="dialog"){this.uiDialog.addClass("coral-messager")}switch(this.options.wtype){case"alert":this._createTitlebar();this._createButtonPanel();break;case"message":break;case"confirm":this._createTitlebar();this._createButtonPanel();break;case"dialog":this._createTitlebar();this._createLoading();this._createButtonPanel()}if(this.options.draggable&&c.fn.draggable){this._makeDraggable()}if(this.options.resizable&&c.fn.resizable){this._makeResizable()}this._isOpen=false;this._trackFocus()},_init:function(){if(this.options.autoOpen){this.open()}},_appendTo:function(){var f=this.options.appendTo;if(typeof f=="string"&&f=="parent"){return this.originalPosition.parent}if(f&&(f.jquery||f.nodeType)){return c(f)}return this.document.find(f||"body").eq(0)},forceDestroy:function(){var f=this;this._destroy(true)},_destroy:function(h){var g,f=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("coral-dialog-content coral-component-content").css(this.originalCss).detach();this.uiDialog.stop(true,true).remove();if(!h){if(this.originalTitle){this.element.attr("title",this.originalTitle)}g=f.parent.children().eq(f.index);if(g.length&&g[0]!==this.element[0]){g.before(this.element)}else{f.parent.append(this.element)}}},component:function(){return this.uiDialog},disable:c.noop,enable:c.noop,close:function(j){var i,h=this,g,f=this.originalPosition;if(this.options.reLoadOnOpen){this.loaded=false}if(!this._isOpen||this._trigger("beforeClose",j)===false){return
}this._hide(this.uiDialog,this.options.hide,function(){g=f.parent.children().eq(f.index);if(g.length&&g[0]!==h.element[0]){g.before(h.uiDialog)}else{f.parent.append(h.uiDialog)}if(h.options.destroyOnClose){h.element.html("")}if(h.options.url!=""&&h.options.reLoadOnOpen&&h.options.autoDestroy){h.element.html("")}h._isOpen=false;h._focusedElement=null;h._destroyOverlay();h._untrackInstance();if(h.opener.length&&h.opener[0].tagName.toLowerCase()!="object"&&!h.opener.filter(":focusable").focus().length){try{i=h.document[0].activeElement;if(i&&i.nodeName.toLowerCase()!=="body"){c(i).blur()}}catch(k){}}if("dialog"!==h.options.wtype){h.element.remove()}h._trigger("onClose",j)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(j,g){var i=false,f=this.uiDialog.siblings(".coral-front:visible").map(function(){return +c(this).css("z-index")}).get(),h=Math.max.apply(null,f);if(h>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",h+1);i=true}if(i&&!g){this._trigger("onFocus",j)}return i},open:function(){var h=this,g={panel:h.element};this.uiDialog.appendTo(this._appendTo());var i=this.options.url&&!h.loaded;if(i){c(h.element).loading({position:"overlay",text:""});h.loaded=true;c.ajax({url:this.options.url,type:this.options.asyncType,dataType:"html",data:this.options.postData,success:function(k,j,l){c(h.element).loading("hide");h.element.html(k);c(h.element).loading({text:"",position:"overlay"});if(c.coral.openTag==true){c.parser.parse(h.element)}c(h.element).loading("hide");h._trigger("onLoad",null,g);c.coral.refreshAllComponent(h.element)},error:function(l,j,k){h._trigger("onLoadError",null,[{xhr:l,st:j,err:k}])},beforeSend:function(k,j){}})}e=null;if(this._isOpen){if(this._moveToTop()){this._focusTabbable()}return}this._isOpen=true;this.opener=c(this.document[0].activeElement);this._size();this._position();this._createOverlay();this._moveToTop(null,true);if(this.overlay){this.overlay.css("z-index",this.uiDialog.css("z-index")-1)
}this._show(this.uiDialog,this.options.show,function(){h._focusTabbable();h._trigger("onFocus")});this._makeFocusTarget();this._trigger("onOpen");if(!i){c.coral.refreshAllComponent(this.element)}if(!isNaN(this.options.timeOut)&&this.options.timeOut>0){e=setTimeout(f,h.options.timeOut);this.uiDialog.hover(function(){if(e){clearTimeout(e)}},function(){e=setTimeout(f,h.options.timeOut)})}function f(){h.close()}},_focusTabbable:function(){if(!this.options.autoFocus){return}var f=this._focusedElement;if(!f){f=this.element.find("[autofocus]")}if(!f.length){f=this.element.find(":tabbable")}if(!f.length&&this.uiDialogButtonPane){f=this.uiDialogButtonPane.find(":tabbable")}if(!f.length&&this.uiDialogTitlebarClose){f=this.uiDialogTitlebarClose.filter(":tabbable")}if(!f.length){f=this.uiDialog}f.eq(0).focus()},_keepFocus:function(f){function g(){var i=this.document[0].activeElement,h=this.uiDialog[0]===i||c.contains(this.uiDialog[0],i);if(!h){this._focusTabbable()}}f.preventDefault();g.call(this);this._delay(g)},_createWrapper:function(){this.uiDialog=c("<div>").addClass("coral-dialog coral-component coral-component-content coral-corner-all coral-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this.element.parent());if(this.options.zIndex){this.uiDialog.css("z-index",this.options.zIndex)}this._on(this.uiDialog,{keydown:function(h){if(this.options.closeOnEscape&&!h.isDefaultPrevented()&&h.keyCode&&h.keyCode===c.coral.keyCode.ESCAPE){h.preventDefault();this.close(h);return}if(h.keyCode!==c.coral.keyCode.TAB||h.isDefaultPrevented()){return}var g=this.uiDialog.find(":tabbable"),i=g.filter(":first"),f=g.filter(":last");if((h.target===f[0]||h.target===this.uiDialog[0])&&!h.shiftKey){this._delay(function(){i.focus()});h.preventDefault()}else{if((h.target===i[0]||h.target===this.uiDialog[0])&&h.shiftKey){this._delay(function(){f.focus()});h.preventDefault()}}},mousedown:function(f){if(this._moveToTop(f)){this._focusTabbable()}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})
}},_createLoading:function(){var g=this,f=g.options;this.uiDialogLoading=c("<div class='coral-dialog-loading'>"+f.loadtext+"</div>").appendTo(this.uiDialog)},showLoading:function(){this.uiDialogLoading.show()},hideLoading:function(){this.uiDialogLoading.hide()},_createTitlebar:function(){var h=this,g=h.options,f;this.uiDialogTitlebar=c("<div>").addClass("coral-dialog-titlebar coral-component-header coral-corner-all coral-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(i){if(!c(i.target).closest(".coral-dialog-titlebar-close")&&!c(i.target).closest(".coral-dialog-titlebar-maximum")){this.uiDialog.focus()}}});if(this.options.maximizable){this.uiDialogTitlebarMaximum=c("<button type='button'></button>").button({label:this.options.maximumText,icons:{primary:"icon-expand3"},text:false}).addClass("coral-dialog-titlebar-maximum").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarMaximum,{click:function(i){i.preventDefault();if(!this.uiDialog.hasClass("coral-dialog-maximum")){this.maximize()}else{this.restore()}c.coral.refreshAllComponent(this.element);this._trigger("onMaximize",null,{width:c(window).outerWidth(),height:c(window).outerHeight()})}})}if(this.options.closable){this.uiDialogTitlebarClose=c("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:this.options.closeButtonClass},text:false}).addClass("coral-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(i){var j=c(i.target);j.removeClass("coral-state-hover");i.preventDefault();this.close(i)}})}f=c("<span>").uniqueId().addClass("coral-dialog-title").prependTo(this.uiDialogTitlebar);this._title(f);uiDialogsubTitle=c("<span>").uniqueId().addClass("coral-dialog-subTitle").prependTo(this.uiDialogTitlebar);this._subTitle(uiDialogsubTitle);this.uiDialog.attr({"aria-labelledby":f.attr("id")});if(this.options.maximizable&&this.options.maximized){this.maximize();c.coral.refreshAllComponent(this.element)
}},maximize:function(h){var g=this,f=this.options;f.restoreHeight=f.height;f.restoreWidth=f.width;c(g.element).dialog("option","width","100%");c(g.element).dialog("option","height","100%");g.uiDialog.addClass("coral-dialog-maximum");g.uiDialogTitlebarMaximum.find(".icon-expand3").removeClass("icon-expand3").addClass("icon-contract3")},minimize:function(){},restore:function(){var g=this,f=this.options;c(g.element).dialog("option","width",f.restoreWidth);c(g.element).dialog("option","height",f.restoreHeight);g.uiDialog.removeClass("coral-dialog-maximum");g.uiDialogTitlebarMaximum.find(".icon-contract3").removeClass("icon-contract3").addClass("icon-expand3")},_title:function(g){var f=c.coral.toFunction(this.options.titleFormat);if(!this.options.title){g.html("&#160;")}if(f){g.html(f.call(this.element,this.options.title))}else{g.text(this.options.title)}},_subTitle:function(f){if(!this.options.subTitle){f.html("&#160;")}f.text(this.options.subTitle)},_createButtonPanel:function(){this.uiDialogButtonPane=c("<div>").addClass("coral-dialog-buttonpane coral-component-content coral-helper-clearfix");this.uiButtonSet=c("<div>").addClass("coral-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var j=this,i=this.options.buttons,f=c.noop,h=c.noop;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(c.isEmptyObject(i)){i={}}if((c.isArray(i)&&!i.length)){this.uiDialog.removeClass("coral-dialog-buttons");return}var g=true;c.each(i,function(k,l){var m,o,n="coral-btn-primary";l=c.isFunction(l)?{click:l,text:k}:l;l=c.extend({type:"button"},l);m=l.click;l.click=function(){m.apply(j.element[0],arguments)};o={icons:l.icons,icons:l.cls,text:l.showText};if(l.id){o.id=l.id}if(g){o=c.extend({},o,{cls:n+" "+l.cls})}else{o=c.extend({},o,{cls:l.cls})}delete l.icons;delete l.cls;delete l.showText;c("<button></button>",l).button(o).appendTo(j.uiButtonSet);g=false});this.uiDialog.addClass("coral-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)
},_makeDraggable:function(){var h=this,g=this.options;function f(i){return{position:i.position,offset:i.offset}}this.uiDialog.draggable({cancel:".coral-dialog-content, .coral-dialog-titlebar-close",handle:".coral-dialog-titlebar",containment:"document",start:function(i,j){c(this).addClass("coral-dialog-dragging");h._blockFrames();h._trigger("onDragStart",i,f(j))},drag:function(i,j){h._trigger("onDrag",i,f(j))},stop:function(i,j){var l=j.offset.left-h.document.scrollLeft(),k=j.offset.top-h.document.scrollTop();g.position={my:"left top",at:"left"+(l>=0?"+":"")+l+" top"+(k>=0?"+":"")+k,of:h.window};c(this).removeClass("coral-dialog-dragging");h._unblockFrames();h._trigger("onDragStop",i,f(j))}})},_makeResizable:function(){var k=this,i=this.options,j=i.resizable,f=this.uiDialog.css("position"),h=typeof j==="string"?j:"n,e,s,w,se,sw,ne,nw";function g(l){return{originalPosition:l.originalPosition,originalSize:l.originalSize,position:l.position,size:l.size}}this.uiDialog.resizable({cancel:".coral-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:h,start:function(l,m){c(this).addClass("coral-dialog-resizing");k.manualResize=true;k._blockFrames();k._trigger("onResizeStart",l,g(m))},resize:function(l,m){c.coral.refreshAllComponent(k.element);k._trigger("onResize",l,g(m))},stop:function(l,m){var p=k.uiDialog.offset(),o=p.left-k.document.scrollLeft(),n=p.top-k.document.scrollTop();i.height=k.uiDialog.height();i.width=k.uiDialog.width();i.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" top"+(n>=0?"+":"")+n,of:k.window};c(this).removeClass("coral-dialog-resizing");k._unblockFrames();k._trigger("onResizeStop",l,g(m))}}).css("position",f)},_trackFocus:function(){this._on(this.component(),{focusin:function(f){this._makeFocusTarget();this._focusedElement=c(f.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var g=this._trackingInstances(),f=c.inArray(this,g);
if(f!==-1){g.splice(f,1)}},_trackingInstances:function(){var f=this.document.data("coral-dialog-instances");if(!f){f=[];this.document.data("coral-dialog-instances",f)}return f},_minHeight:function(){var f=this.options;return f.height==="auto"?f.minHeight:Math.min(f.minHeight,f.height)},_position:function(){var g=this.options.position,i=[0,0],h=[],f;if(g){if(typeof g==="string"||(typeof g==="object"&&"0" in g)){h=g.split?g.split(" "):[g[0],g[1]];if(h.length===1){h[1]=h[0]}c.each(["left","top"],function(k,j){if(+h[k]===h[k]){i[k]=h[k];h[k]=j}});g={my:h[0]+(i[0]<0?i[0]:"+"+i[0])+" "+h[1]+(i[1]<0?i[1]:"+"+i[1]),at:h.join(" ")}}g=c.extend({},c.coral.dialog.prototype.options.position,g)}else{g=c.coral.dialog.prototype.options.position}f=this.uiDialog.is(":visible");if(!f){this.uiDialog.show()}this.uiDialog.position(g);if(!f){this.uiDialog.hide()}},_setOptions:function(h){var i=this,g=false,f={};c.each(h,function(j,k){i._setOption(j,k);if(j in a){g=true}if(j in b){f[j]=k}});if(g&&!c(i.element).is(":hidden")){this._size();this._position()}if(this.uiDialog.is(":data(coral-resizable)")){this.uiDialog.resizable("option",f)}},_setOption:function(h,i){var g,j,f=this.uiDialog;if(h==="dialogClass"){f.removeClass(this.options.dialogClass).addClass(i)}if(h==="disabled"){return}this._super(h,i);if(h==="appendTo"){this.uiDialog.appendTo(this._appendTo())}if(h==="buttons"){this._createButtons()}if(h==="maximumText"){this.uiDialogTitlebarMaximum.button({label:""+i})}if(h==="closeText"){this.uiDialogTitlebarClose.button({label:""+i})}if(h==="draggable"){g=f.is(":data(coral-draggable)");if(g&&!i){f.draggable("destroy")}if(!g&&i){this._makeDraggable()}}if(h==="position"){this._position()}if(h==="resizable"){j=f.is(":data(coral-resizable)");if(j&&!i){f.resizable("destroy")}if(j&&typeof i==="string"){f.resizable("option","handles",i)}if(!j&&i!==false){this._makeResizable()}}if(h==="title"){this._title(this.uiDialogTitlebar.find(".coral-dialog-title"))}if(h==="subTitle"){this._subTitle(this.uiDialogTitlebar.find(".coral-dialog-subTitle"))
}},_size:function(){var f,h,j,g=this.options;this.element.hide().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(g.minWidth>g.width){g.width=g.minWidth}f=this.uiDialog.css({height:"auto",width:g.width}).outerHeight();this.element.show();h=Math.max(0,g.minHeight-f);j=typeof g.maxHeight==="number"?Math.max(0,g.maxHeight-f):"none";if(g.height==="auto"){this.element.css({minHeight:h,maxHeight:j,height:"auto"})}else{var i=/^(\d|[1-9]\d|100)%$/;if(i.test(this.options.height)){this.options.percent=this.options.height;this.element.height(Math.max(0,this._percentToPx()-f))}else{this.element.height(Math.max(0,this.options.height-f))}}if(this.uiDialog.is(":data(coral-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var f=c(this);return c("<div>").css({position:"absolute",width:f.outerWidth(),height:f.outerHeight()}).appendTo(f.parent()).offset(f.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_allowInteraction:function(f){if(c(f.target).closest(".coral-dialog").length){return true}return !!c(f.target).closest(".coral-datepicker").length},_createOverlay:function(){if(!this.options.modal){return}var f=true;this._delay(function(){f=false});if(!this.document.data("coral-dialog-overlays")){this._on(this.document,{focusin:function(g){if(f){return}if(!this._allowInteraction(g)){g.preventDefault();var h=this.document.find(".coral-dialog:visible:last .coral-dialog-content").data(this.componentFullName);if(h&&h._focusTabbable){h._focusTabbable()}}}})}this.overlay=c("<div>").addClass("coral-component-overlay coral-front").appendTo(this._appendTo());if(this.options.appendTo!="body"){this.overlay.css({position:"relative"})}this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("coral-dialog-overlays",(this.document.data("coral-dialog-overlays")||0)+1)},_destroyOverlay:function(){if(!this.options.modal){return
}if(this.overlay){var f=this.document.data("coral-dialog-overlays")-1;if(!f){this.document.unbind("focusin").removeData("coral-dialog-overlays")}else{this.document.data("coral-dialog-overlays",f)}this.overlay.remove();this.overlay=null}},buttonPanel:function(){return this.uiButtonSet},hide:function(){this._isOpen=false;this.component().hide()},_percentToPx:function(){var i=this,f=this.options,h=f.percent,g=c(window);maxHeight=g.height()*parseInt(h.substring(0,h.length-1))/100;return maxHeight},refresh:function(){var i=this,f=this.options,h=f.percent;var g=/^(\d|[1-9]\d|100)%$/;if(g.test(h)&&!f.manualResize){maxHeight=i._percentToPx();f.height=maxHeight;setTimeout(function(){c(i.element).dialog("option","height",maxHeight)},0)}else{}}})}(jQuery));

/*!
 * 4.0 
 *
 * JS:
 *	jquery.coral.core.js
 *	jquery.coral.component.js
 *	jquery.coral.mouse.js
 *  jquery.coral.button.js
 *	jquery.coral.draggable.js
 *	jquery.coral.position.js
 *	jquery.coral.resizable.js
 *	jquery.coral.dailog.js
 */
(function(a,b){a.messager={loading:{show:function(g){if(!g instanceof jQuery){g=a(g)}var f=g.attr("data-loading-id");if(!f){f=new Date().getTime();g.attr("data-loading-id","loading_"+f)}var h=a("<div id='loading_"+f+"' class='coral-loading'><div class='coral-loading-zone'></div><span class='coral-loading-text'>...</span></div>");var d=h.find(".coral-loading-zone");var c=h.find(".coral-loading-text");h.outerWidth(g.outerWidth());h.outerHeight(g.outerHeight());d.outerWidth(g.outerWidth());d.outerHeight(g.outerHeight());h.position({my:"left top",at:"left top",of:g});a(document.body).append(h);var e=(h.outerWidth()-c.outerWidth())/2;c.css({left:e})},hide:function(d){if(!d instanceof jQuery){d=a(d)}var c=d.attr("data-loading-id");if(!c){return}a("#"+c).remove();d.removeAttr("data-loading-id")}},_init:function(e,c){var d="";if(c.wtype=="messageBox"){e=a("<div class='coral-messagerBox'>"+(c.icons||"")+"<span class='coral-messagerBox-content'>"+c.message+"</span></div>").appendTo("body")}else{if(c.wtype=="message"){if(c.cls.indexOf("warning")>-1){c.icons="icon-warning2";d="<span class='icon icon-control coral-control-warning "+c.icons+"'></span>"}else{if(c.cls.indexOf("success")>-1){c.icons="icon-checkmark-circle2";d="<span class='icon icon-control coral-control-success "+c.icons+"'></span>"}else{if(c.cls.indexOf("danger")>-1){c.icons="icon-close3";d="<span class='icon icon-control coral-control-danger "+c.icons+"'></span>"}else{if(c.cls.indexOf("info")>-1){c.icons="icon-notification2";d="<span class='icon icon-control coral-control-info "+c.icons+"'></span>"}}}}e=a("<div class='hasIcon "+c.cls+"' role='alert'>"+d+"<span class='coral-alert-content'>"+c.message+"</span></div>").appendTo("body")}else{if(typeof c.message!=="undefined"&&c.wtype!="message"){if(c.type="question"){c.icons="icon-info";
d="<span class='icon icon-control coral-control-info "+c.icons+"'></span>"}else{if(c.type="alert"){c.icons="icon-info";d="<span class='icon icon-control coral-control-info "+c.icons+"'></span>"}}e=a("<div class='coral-messager-body'><span class='coral-messager-box'><span class='hasIcon coral-messager-box-content'>"+d+"<span class='coral-messager-content'>"+c.message+"</span></span></span></div>").appendTo("body")}}}return e},message:function(d,c,f){if(typeof d==="string"||typeof d==="boolean"||typeof d==="number"){d={message:d.toString(),wtype:"message"}}if(!f&&typeof c==="function"){f=c;c="info"}if(!c||a.inArray(c,["info","success","warning","error","question","danger","alert"])<0){c="info"}d=d||{};d.type=c;if(!d.cls){d.cls=c}d=a.extend(true,{autoOpen:true,title:"",isMessage:true,show:"slideDown",hide:"slideUp",cls:"info",modal:false,onClose:f,draggable:false,resizable:false,width:"auto",maxWidth:600,wtype:"message",timeOut:1999},a.message.defaults,d);var e=a.messager._init(e,d);e.css("max-width",d.maxWidth+"px");e.dialog(d);if(d.wtype==="message"){a.messager.messageInstances++;a.messager.messageHeights.push(e.outerHeight())}},messageBox:function(c,e){if(typeof c==="string"||typeof c==="boolean"||typeof c==="number"){c={message:c.toString(),wtype:"messageBox"}}c=c||{};c=a.extend(true,{autoOpen:true,title:"",show:"slideDown",hide:"slideUp",isMessage:true,modal:false,draggable:false,resizable:false,width:250,wtype:"messageBox",timeOut:1999},a.messageBox.defaults,c);var d=a.messager._init(d,c);d.dialog(c);return d},alert:function(c,e){if(typeof c==="string"||typeof c==="boolean"||typeof c==="number"){c={message:c.toString()}}c=a.extend(true,{modal:true,timeOut:0,title:"",isMessage:true,width:300,icons:"icon-notification2",wtype:"alert"},a.alert.defaults,c);if((c.timeOut<=0||isNaN(c.timeOut))&&!c.buttons){c.buttons={"":function(){a(this).dialog("close");if(typeof e==="function"){e(true)}return true}}}c.wtype="alert";c.type="alert";var d=a.messager._init(d,c);
d.dialog(c);return d},confirm:function(d,g){var c="",f="",h={};if(typeof d==="string"||typeof d==="boolean"||typeof d==="number"){d={message:d}}c=d.okText?d.okText:c;f=d.cancelText?d.cancelText:f;h[c]=function(){a(this).dialog("close");if(typeof g==="function"){g(true)}return false};h[f]=function(){a(this).dialog("close");if(typeof g==="function"){g(false)}return false};d.type="question";d.wtype="confirm";d=a.extend(true,{autoOpen:true,title:"",isMessage:true,width:300,show:"slideDown",modal:true,icons:"icon-question",buttons:h},a.confirm.defaults,d);var e=a.messager._init(e,d);e.dialog(d);return e},progress:function(d,g){var c="",f="",h={};if(typeof d==="string"||typeof d==="boolean"||typeof d==="number"){d={message:d}}c=d.okText?d.okText:c;f=d.cancelText?d.cancelText:f;h[c]=function(){a(this).dialog("close");if(typeof g==="function"){g(true)}return false};h[f]=function(){a(this).dialog("close");if(typeof g==="function"){g(false)}return false};d.type="question";d.wtype="confirm";d=a.extend(true,{autoOpen:true,title:"",isMessage:true,width:300,show:"slideDown",modal:true,icons:"icon-question",buttons:h},a.confirm.defaults,d);var e=a.messager._init(e,d);e.dialog(d);return e}};a.messager.messageInstances=0;a.messager.messageHeights=[];a.message=a.messager.message;a.messageBox=a.messager.messageBox;a.alert=a.messager.alert;a.confirm=a.messager.confirm;a.message.defaults={position:{my:"center",at:"center top+150",of:window}};a.messageBox.defaults={position:{my:"right bottom",at:"right bottom",of:window}};a.alert.defaults={position:{my:"center",at:"center top+200",of:window}};a.confirm.defaults={position:{my:"center",at:"center top+200",of:window}}}(jQuery));

(function(a,b){a.component("coral.form",{version:"4.0.2",options:{disabled:null,ajaxSubmit:false,novalidate:false,context:"",separator:",",container:"tooltip",requires:null,excluded:[":disabled",":hidden",":not(:visible)"],errTipsType:"first",onCreate:null,url:"",postData:{},target:"",focusFirst:false,showRequiredMark:null,hideRequiredMark:null,onChange:null,triggers:{},exclude:false},component:function(){return this.uiForm},_create:function(){var c=this;this.uiForm=a('<div class="coral-form"></div>');this._initElement();this._bindEvents();a.data(this.element,"modifiedData",{});a.data(this.element,"originalData",this._getForm());this.element.validate({excluded:this.options.excluded,errorMode:this.options.errorMode,showRequiredMark:this.options.showRequiredMark,hideRequiredMark:this.options.hideRequiredMark});if(this.options.focusFirst){this._focusFirst()}},_getFields:function(){return this.element.find(".ctrl-form-element")},_getFieldType:function(e){var c=a(e)[0].className.split(" "),d="";for(var f in c){if(c[f].indexOf("coral-validation-")>=0){d=c[f].substr(c[f].indexOf("coral-validation-")+17);return d}}return null},_bindEvents:function(){var e=this,d=this.options,c=this._getFields();c.each(function(f,i){var h=a(i);var g=e._getFieldType(h);h.off(".formonchange").on(g+"onchange.formonchange",function(l,n){if(l.type.indexOf("onchange")!=-1){var k=a(this)[g]("option","name"),m=a(this)[g]("getValue"),j={};j[k]=m;e.updateCoralData(j);e._trigger("onChange",null,{field:this,type:g})}})})},_initElement:function(){var c=this.options;this.uiBorder=a('<div class="coral-form-border"></div>');this.uiForm.addClass(c.cls);this.uiForm.append(this.uiBorder);this.uiForm.insertAfter(this.element);this.element.appendTo(this.uiBorder);this.element.addClass("coral-form-default");if(c.id!==""){this.element.attr("id",c.id)}if(c.name!==""){this.element.attr("name",c.name)}if(c.action!==""){this.element.attr("action",c.action)}if(c.method!==""){this.element.attr("method",c.method)}if(c.target!==""){this.element.attr("target",c.target)
}if(c.context!=""){this.element.attr("context",c.context)}else{this.element.attr("context","body")}},initRequires:function(){this._initRequires()},_initRequires:function(){var c=this,d=this.element.find(a("[class*='coral-validation-']")).parent(":visible").find(a("[class*='coral-validation-']"));d.each(function(){var e=this.className,i="",g=e.split(" ");for(var f in g){if(g[f].indexOf("coral-validation-")>=0){i=g[f].substr(g[f].indexOf("coral-validation-")+17);break}}var h=a(this)[i]("option","required");if(typeof h==="boolean"&&h){if(i=="datepicker"){a(this)[i]("component",a(this)).parent("td").prev().addClass("require")}else{a(this)[i]("component").parent("td").prev().addClass("require")}}})},_getCoralType:function(c){var e=a(c)[0].className.split(" "),f="";for(var d in e){if(e[d].indexOf("coral-validation-")>=0){f=e[d].substr(e[d].indexOf("coral-validation-")+17);return f}}},showRequire:function(c){var d=a(c),e=this._getCoralType(c);d[e]("component").parent("td").prev().addClass("require")},hideRequire:function(c){var d=a(c),e=this._getCoralType(c);d[e]("component").parent("td").prev().removeClass("require")},_setOption:function(c,d){if(c=="id"||c=="name"){return}this._super(c,d);return},saveOriginalCoralData:function(c){var d=this;a.each(c,function(e,f){d._updateCoralData("original",e,f)});return},updateCoralData:function(c){var d=this;a.each(c,function(e,f){d._updateCoralData("modified",e,f)});return},_updateCoralData:function(c,d,f){var e=a.data(this.element,c+"Data");e[d]=f;a.data(this.element,c+"Data",e);return},serialize:function(){return a(this.element).serialize()},serializeArray:function(){return a(this.element).serializeArray()},modifiedData:function(c){if((typeof c=="boolean"&&c)){return this._getSerialize("modified")}else{return a.data(this.element,"modifiedData")}},originalData:function(c){if((typeof c=="boolean"&&c)){return this._getSerialize("original")}else{return a.data(this.element,"originalData")}},formData:function(c){if((typeof c=="boolean"&&c)){return this.serialize()
}else{return this._getForm()}},getData:function(c){return this.formData(c)},_getSerialize:function(d){var e=a.data(this.element,d+"Data"),c="";a.each(e,function(g,h){if(typeof h!="Object"){c+=g+"="+h+"&"}else{for(var f in h){c+=g+"="+h[f]+"&"}}});return c.substr(0,c.length-1)},_getForm:function(){var d=this,e={},c=a(this.element).serializeArray();a(c).each(function(f,g){if(e[g.name]){e[g.name]=e[g.name]+d.options.separator+g.value}else{e[g.name]=g.value}});return e},_loadData:function(d){var c=this;this._updateData(d,"modified");this._updateData(d,"original");if(typeof d=="object"){a.each(d,function(e,f){if(!c._loadCoralData(e,f)){c._loadNormalData(e,f)}})}},_loadCoralData:function(f,j){var h=this;j=j==null?"":j;var c=h._getCoralFormData();var k=false;for(var e in c){var g=c[e];switch(g.coralType){case"radio":if(f==g.name){k=true;if(g.el.radio("option","value")==j&&j!=null){g.el.radio("check")}else{g.el.radio("uncheck")}}break;case"radiolist":if(f==g.name){k=true;if(j==null){j=""}g.el.radiolist("setValue",j)}break;case"checkbox":if(f==g.name){k=true;if(j==null){j=[""]}if(typeof j!="object"){if(typeof j==="string"){j=j.split(h.options.separator)}else{j=[j]}}for(var d in j){if(g.el.checkbox("option","value")==j[d]){g.el.checkbox("check");break}else{g.el.checkbox("uncheck")}}}break;case"checkboxlist":if(f==g.name){k=true;if(f==g.name){if(j==null){j=""}g.el.checkboxlist("setValue",j)}}break;case"combobox":if(f==g.name){k=true;if(typeof j!="object"){if(typeof j==="string"){j=j.split(h.options.separator)}else{j=[j]}}if(j!=null){g.el.combobox("setValues",j)}}break;case"combogrid":if(f==g.name){k=true;if(typeof j!="object"){if(typeof j==="string"){j=j.split(h.options.separator)}else{j=[j]}}if(j!=null){g.el.combogrid("setValues",j)}}break;case"combotree":if(f==g.name){k=true;if(typeof j!="object"){if(typeof j==="string"){j=j.split(h.options.separator)}else{j=[j]}}if(j!=null){g.el.combotree("setComboValues",j)}}break;case"datepicker":if(f==g.name){k=true;if(j!=null){g.el.datepicker("option","value",j)
}}break;case"autocomplete":if(f==g.name){k=true;if(j!=null){g.el.autocomplete("option","value",j)}}break;case"autocompletetree":if(f==g.name){k=true;if(j!=null){g.el.autocompletetree("option","value",j)}}break;default:if(f==g.name){k=true;if(j!=null){g.el[g.coralType]("option","value",j)}}break}}return k},_loadNormalData:function(e,g){var f=this,c=f._getNomalFormElements();for(var d in c){if(e==c[d].attr("name")){if(b!=c[d].attr("type")&&"radio"==c[d].attr("type")){if(g==c[d].attr("value")){c[d][0].checked=true}else{continue}}else{if(typeof g==="string"&&g.indexOf(f.options.separator)!=-1){g=g.split(f.options.separator)}a(f.element.find("[name="+e+"]")).val(g)}}}return},_getAllFromElements:function(){return this.element.find("[name]")},_getCoralFormData:function(){var c=[];this.element.find(".ctrl-form-element").each(function(){var g=a(this),e=null,f=0,d=["radio","checkbox","combobox","combotree","combogrid","datepicker","checkboxlist","radiolist","autocomplete","textboxlist","autocompletetree"],h=g.attr("component-role");e=g[h]("option","name");if(null!=e){c.push({el:g,name:e,coralType:h})}});return c},_getCoralFormElements:function(){return this.element.find(".coral-form-element")},_getCoralNameJson:function(){var d=this,c={};d._getCoralFormElements().each(function(){var e=a(this).attr("component-role");a(this)[e]("option","name")&&(c[name]=e)});return c},_getNomalFormElements:function(){var e=this,c=[],d=e._getCoralNameJson();e._getAllFromElements().each(function(){if(!d[a(this).attr("name")]){c.push(a(this))}});return c},_updateData:function(e,c){var d=a.data(this.element,c+"Data");if(typeof e=="object"){a.each(e,function(f,g){if("original"==c&&typeof d[f]!="undefined"){d[f]=g}else{if("modified"==c&&typeof d[f]!="undefined"){delete d[f]}}})}},resetData:function(){this.reset()},reset:function(){var c=this,d=a.data(this.element,"originalData");c._loadData(d);a.data(this.element,"modifiedData",{})},_isExclud:function(c,d){if(!d){return false}var f=d.length;for(var e=0;
e<f;e++){if("string"===typeof d[e]&&c.is(d[e])){return true}}return false},clear:function(d){var c={};if(d&&d.excluded&&d.excluded instanceof Array){for(var e in d.excluded){var f=d.excluded[e];c[f]=f}}a(this.element).find(".ctrl-form-element").each(function(g){var h=a(this).attr("component-role");if((a(this)[h]("option","readonly")&&c.readonly)||(a(this)[h]("option","isLabel")&&c.isLabel)||(a(this)[h]("option","disabled")&&c.disabled)){return}switch(h){case"radio":case"checkbox":a(this)[h]("uncheck");break;default:a(this)[h]("setValue","");break}});a.data(this.element,"modifiedData",{})},load:function(c){var e=this,d={},f=[],g=false;if(typeof(c)!=="string"){d=c;if(d.data){f=d.data}else{if(d.url){c=d.url;g=true}else{f=c}}}else{g=true}if(g){a.ajax({url:c,data:a.extend(true,{},this.options.postData,d.postData),async:false,dataType:"json",success:function(h){e._loadData(h);e._trigger(a.isFunction(d.onLoad)?d.onLoad:"onLoad",null,[h])},error:function(){e._trigger("onLoadError",null,[])}})}else{this._loadData(f);this._trigger(a.isFunction(d.onLoad)?d.onLoad:"onLoad",null,[{content:f}])}},loadData:function(c){this.load(c)},submit:function(c){c=c||{};if(false==this._trigger(a.isFunction(c.onSubmit)?c.onSubmit:"onSubmit",null,[])){return false}if(this.options.ajaxSubmit){a.ajax({type:"post",url:a.extend(true,{},this.options.url,c.url),data:a.extend(true,{},this.options.postData,c.postData,this.formData),dataType:"json",success:function(d){this._trigger(a.isFunction(c.onSuccess)?c.onSuccess:"onSuccess",null,[{content:d}])},error:function(){}})}else{if(this.valid()){this.element.submit()}else{return false}}},valid:function(){if(this.options.novalidate){return true}return this.element.validate("valid")},hideErrorTips:function(){a("div.coral-validate-state-error").remove()},_focusFirst:function(){var f=this,d=this.findFields();for(var e in d){var c=d[e];if(d[e] instanceof Array){if(true==a(c[0].element)[c[0].name]("focus")){return}}else{if(c.focus&&true==c.focus()){return}}}var g=this.element.find("[name]:not(:hidden,.ctrl-init,[readonly],[disabled])");
if(g.length){g[0].focus()}},findFields:function(){return a.coral.findComponent(".ctrl-form-element",this.element)},setIsLabel:function(g){var d=a.coral.findComponent(".ctrl-form-element",this.element),f=0,e=d.length;for(f;f<e;f++){var h=d[f];if(h instanceof Array){a(h[0].element)[h[0].name]("option","isLabel",g)}else{h._setOption("isLabel",g)}}},setReadOnly:function(g){var d=a.coral.findComponent(".ctrl-form-element",this.element),f=0,e=d.length;for(f;f<e;f++){var h=d[f];if(h instanceof Array){a(h[0].element)[h[0].name]("option","readonly",g)}else{h._setOption("readonly",g)}}},refresh:function(g){var f,d=this.options,c=d.heightStyle,e=this.uiForm.parent();if(c==="fill"){f=e.height();this.uiForm.siblings(":visible").each(function(){var i=a(this),h=i.css("position");if(h==="absolute"||h==="fixed"){return}f-=i.outerHeight(true)});this.element.height(Math.max(0,f-this.element.innerHeight()+this.element.height())).css("overflow","auto")}else{if(c==="auto"){this.element.height("")}}}})})(jQuery);

/*!
 * jQuery CORAL Tabs 4.0.1
 *
 *
 * Depends:
 *	jquery.coral.core.js
 *	jquery.coral.component.js
 */
(function(a,b){a.component("coral.tabs",{version:"4.0.1",delay:300,options:{active:0,collapsible:false,event:"click",loadonce:true,destroyAllonActive:false,heightStyle:"content",hide:null,show:null,method:"GET",newbtn:false,name:null,onTabNew:null,onActivate:null,onLoad:null,beforeActivate:null,beforeLoad:null,beforeTabClose:null,onTabClose:null},_create:function(){var d=this,c=this.options;if(c.method!=null&&c.method!=""){c.method=(c.method+"").toUpperCase()}else{c.method="GET"}this.running=false;this.element.addClass("coral-tabs ctrl-init ctrl-init-tabs coral-component coral-component-content coral-corner-all").toggleClass("coral-tabs-collapsible",c.collapsible);this._processTabs();if(typeof c.newbtn=="boolean"&&c.newbtn){this.addnewbtn()}c.active=this._initialActive();if(a.isArray(c.disabled)){c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".coral-state-disabled"),function(e){return d.tabs.index(e)}))).sort()}if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(c.active)}else{this.active=a()}this._refresh();if(this.active.length){this.load(c.active)}if(this.element.hasClass("coral-tabs-bottom")){a(".coral-tabs-bottom .coral-tabs-nav, .coral-tabs-bottom .coral-tabs-nav > *").removeClass("coral-corner-all coral-corner-top").addClass("coral-corner-bottom")}else{if(this.element.hasClass("coral-tabs-right")){this.element.addClass("coral-tabs-right coral-helper-clearfix").removeClass("coral-corner-top").addClass("coral-corner-left")}else{if(this.element.hasClass("coral-tabs-left")){this.element.removeClass("coral-corner-top").addClass("coral-tabs-left coral-helper-clearfix coral-corner-left")}}}},_isLocal:(function(){var c=/#.*$/;return function(e){var g,f;e=e.cloneNode(false);return e.hash.length>1&&e.href.indexOf("#")!=-1;g=e.href.replace(c,"");f=location.href.replace(c,"");try{g=decodeURIComponent(g)}catch(d){}try{f=decodeURIComponent(f)
}catch(d){}return e.hash.length>1&&g===f}})(),_initialActive:function(){var d=this.options.active,c=this.options.collapsible,e=location.hash.substring(1);if(d===null){if(e){this.tabs.each(function(f,g){if(a(g).attr("aria-controls")===e){d=f;return false}})}if(d===null){d=this.tabs.index(this.tabs.filter(".coral-state-active"))}if(d===null||d===-1){d=this.tabs.length?0:false}}if(d!==false){d=this.tabs.index(this.tabs.eq(d));if(d===-1){d=c?false:0}}if(!c&&d===false&&this.anchors.length){d=0}return d},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?a():this._getPanelForTab(this.active)}},_tabKeydown:function(e){var d=a(this.document[0].activeElement).closest("li"),c=this.tabs.index(d),f=true;if(this._handlePageNav(e)){return}switch(e.keyCode){case a.coral.keyCode.RIGHT:case a.coral.keyCode.DOWN:c++;break;case a.coral.keyCode.UP:case a.coral.keyCode.LEFT:f=false;c--;break;case a.coral.keyCode.END:c=this.anchors.length-1;break;case a.coral.keyCode.HOME:c=0;break;case a.coral.keyCode.SPACE:e.preventDefault();clearTimeout(this.activating);this._activate(c);return;case a.coral.keyCode.ENTER:e.preventDefault();clearTimeout(this.activating);this._activate(c===this.options.active?false:c);return;default:return}e.preventDefault();clearTimeout(this.activating);c=this._focusNextTab(c,f);if(!e.ctrlKey){d.attr("aria-selected","false");this.tabs.eq(c).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",c)},this.delay)}},_panelKeydown:function(c){if(this._handlePageNav(c)){return}if(c.ctrlKey&&c.keyCode===a.coral.keyCode.UP){c.preventDefault();this.active.focus()}},_handlePageNav:function(c){if(c.altKey&&c.keyCode===a.coral.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true}if(c.altKey&&c.keyCode===a.coral.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true}},_findNextTab:function(d,e){var c=this.tabs.length-1;function f(){if(d>c){d=0
}if(d<0){d=c}return d}while(a.inArray(f(),this.options.disabled)!==-1){d=e?d+1:d-1}return d},_focusNextTab:function(c,d){c=this._findNextTab(c,d);this.tabs.eq(c).focus();return c},_setOption:function(c,d){if(c==="active"){if(typeof d==="string"){this._activate(this._getIndex(d))}else{this._activate(d)}return}if(c==="disabled"){this._setupDisabled(d);return}this._super(c,d);if(c==="collapsible"){this.element.toggleClass("coral-tabs-collapsible",d);if(!d&&this.options.active===false){this._activate(0)}}if(c==="event"){this._setupEvents(d)}if(c==="heightStyle"){this._setupHeightStyle(d)}},_tabId:function(c){return c.attr("aria-controls")||"coral-tabs-"+getNextTabId()},_sanitizeSelector:function(c){return c?c.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var d=this.options,c=this.tablist.children(":has(a[href])");d.disabled=a.map(c.filter(".coral-state-disabled"),function(e){return c.index(e)});this._processTabs();if(d.active===false||!this.anchors.length){d.active=false;this.active=a()}else{if(this.active.length&&!a.contains(this.tablist[0],this.active[0])){if(this.tabs.length===d.disabled.length){d.active=false;this.active=a()}else{this._activate(this._findNextTab(Math.max(0,d.active-1),false))}}else{d.active=this.tabs.index(this.active)}}this._refresh()},_refresh:function(){var c=this;this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0)}else{this.active.addClass("coral-tabs-active coral-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})}},add:function(h){h=h||{};var g=this.options.disabled,e=null,l=null,k=h.label,j=h.ariaControls,n=false,c=h.href,d=h.closeable==b?false:h.closeable,m=d===true?"<span class='icon icon-close2'></span>":"",i=h.content;
if(g===true){return}if(typeof this.options.newbtn=="boolean"&&this.options.newbtn){this.tablist.find("> li:last").remove()}if(j){e=j}else{if(typeof c==="undefined"){e=a({}).uniqueId()[0].id}else{e=c;if(e.indexOf("#")==0){e=e.substr(1)}else{n=true}}}var f="<li><a href='#{href}'>"+k+"</a>{closespan}</li>";f=f.replace(/\{closespan\}/g,m);if(!n){l=a(f.replace(/#\{href\}/g,"#"+e))}else{l=a(f.replace(/#\{href\}/g,e));this.component().find(">.coral-tabs-nav").append(l);this.component().tabs("refresh");return}if(j){l.attr("aria-controls",j)}this.component().find(">.coral-tabs-nav").append(l);if(this.element.hasClass("coral-tabs-bottom")){this.component().find(">.coral-tabs-nav").before("<div id='"+e+"'>"+i+"</div>")}else{this.component().append("<div id='"+e+"'>"+i+"</div>")}this.component().tabs("refresh");if(typeof this.options.newbtn=="boolean"&&this.options.newbtn){this.addnewbtn()}},remove:function(c){if(this.options.disabled){return}if(c instanceof Array){for(var d in c){this._remove(c[d])}this._refresh()}else{this._remove(c)}},_remove:function(d){var e;if(typeof d=="undefined"){e=this.options.active}else{if(typeof d=="string"){e=this.getIndexById(d)}else{e=d}}var c=this._getList().find("> li:has(a[href])").eq(e).attr("aria-controls");this.component().find("li[aria-controls='"+c+"']").remove();this.component().find("div#"+c).remove()},addnewbtn:function(){var d=this;var c=a("<li class='coral-tabs-newbtn coral-corner-top'><a class='coral-tabs-anchor'><span class='icon icon-plus'></span></a></li>");c.unbind("click").bind("click",function(e){if(true===d.options.disabled){return}d._trigger("onTabNew",null,[])});this.tablist.append(c);d._hoverable(c)},_processTabs:function(){var c=this;this.tablist=this._getList().addClass("coral-tabs-nav coral-helper-reset coral-helper-clearfix coral-component-header coral-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(d){if(a(this).is(".coral-state-disabled")){d.preventDefault()}}).delegate(".coral-tabs-anchor","focus"+this.eventNamespace,function(){if(a(this).closest("li").is(".coral-state-disabled")){this.blur()
}});this.tabs=this.tablist.find("> li:has(a[href])").addClass("coral-state-default coral-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("coral-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=a();this.anchors.each(function(j,g){var d,e,h,f=a(g).uniqueId().attr("id"),k=a(g).closest("li"),l=k.attr("aria-controls");if(c._isLocal(g)){d=g.hash;h=d.substring(1);e=c.element.find(c._sanitizeSelector(d))}else{h=k.attr("aria-controls")||a({}).uniqueId()[0].id;d="#"+h;e=c.element.find(d);if(!e.length){e=c._createPanel(h);if(c.element.hasClass("coral-tabs-bottom")){e.insertBefore(c.panels[j-1]||c.tablist)}else{e.insertAfter(c.panels[j-1]||c.tablist)}}e.attr("aria-live","polite")}if(e.length){c.panels=c.panels.add(e)}if(l){k.data("coral-tabs-aria-controls",l)}k.attr({"aria-controls":h,"aria-labelledby":f});e.attr("aria-labelledby",f)});this.panels.addClass("coral-tabs-panel coral-component-content coral-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find(">ol,>ul").eq(0)},_createPanel:function(c){return a("<div>").attr("id",c).addClass("coral-tabs-panel coral-component-content coral-corner-bottom").data("coral-tabs-destroy",true)},_setupDisabled:function(e){if(a.isArray(e)){if(!e.length){e=false}else{if(e.length===this.anchors.length){e=true}}}for(var d=0,c;(c=this.tabs[d]);d++){if(e===true||a.inArray(d,e)!==-1){a(c).addClass("coral-state-disabled").attr("aria-disabled","true")}else{a(c).removeClass("coral-state-disabled").removeAttr("aria-disabled")}}this.options.disabled=e},_setupEvents:function(e){var d=this;var c={};if(e){a.each(e.split(" "),function(g,f){c[f]="_eventHandler"})}this._off(this.anchors.add(this.tabs).add(this.panels).add(this.tabs.children("span.icon-close2")));this._on(true,this.anchors,{click:function(f){f.preventDefault()}});this._on(this.anchors,c);this._on(this.tabs.children("span.icon-close2"),{click:"_tabClose"});this._on(this.panels,{keydown:"_panelKeydown"});
this._on(this.tabs,{keydown:"_tabKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_tabClose:function(h){var f=this;if(f.options.disabled===true){return}var g=a(h.target),j=g.closest("li"),c=j.attr("aria-controls"),i=f._getPanelForTab(j),d={currentTab:j,currentPanel:i,panelId:c};if(f._trigger("beforeTabClose",h,d)===false){return}j.remove();f.element.find("#"+c).remove();f._trigger("onTabClose",h,d);f.refresh()},_setupHeightStyle:function(c){var f,e,h=false,d=this.element.parent();if(c==="fill"){f=d.height();e=d.width();f-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").not("script").each(function(){var j=a(this),i=j.css("position");if(i==="absolute"||i==="fixed"){return}f-=j.outerHeight()});this.element.children().not(this.panels).each(function(){if(a(this).parent().hasClass("coral-tabs-right")||a(this).parent().hasClass("coral-tabs-left")){var i=a(this).css("position");h=true;if(i==="absolute"||i==="fixed"){return}e-=a(this).outerWidth(true);return}f-=a(this).outerHeight(true)});this.panels.each(function(){var i=a(this).outerHeight()-a(this).innerHeight();a(this).height(Math.max(0,f-i-a(this).innerHeight()+a(this).height()))}).addClass("overflow-auto");if(h){var g=this.element.children("ul");g.height(Math.max(0,f-g.innerHeight()+g.height()))}}else{if(c==="auto"){f=0;this.panels.each(function(){f=Math.max(f,a(this).height("").height());a(this).width("")}).height(f)}}},_eventHandler:function(c){var l=this.options,g=this.active,h=a(c.currentTarget),f=h.closest("li"),j=f[0]===g[0],d=j&&l.collapsible,e=d?a():this._getPanelForTab(f),i=!g.length?a():this._getPanelForTab(g),k={oldTab:g,oldPanel:i,newTab:d?a():f,newPanel:e};c.preventDefault();if(f.hasClass("coral-state-disabled")||f.hasClass("coral-tabs-loading")||this.running||(j&&!l.collapsible)||(this._trigger("beforeActivate",c,k)===false)){return}l.active=d?false:this.tabs.index(f);this.active=j?a():f;if(this.xhr){this.xhr.abort()}if(!i.length&&!e.length){a.error("jQuery UI Tabs: Mismatching fragment identifier.")
}if(e.length){this.load(this.tabs.index(f),c)}this._toggle(c,k)},_toggle:function(i,h){var g=this,c=h.newPanel,f=h.oldPanel;this.running=true;function e(){g.running=false;g._trigger("onActivate",i,h);a.coral.refreshAllComponent(c)}function d(){h.newTab.closest("li").addClass("coral-tabs-active coral-state-active");if(c.length&&g.options.show){g._show(c,g.options.show,e)}else{c.show();e()}}if(f.length&&this.options.hide){this._hide(f,this.options.hide,function(){h.oldTab.closest("li").removeClass("coral-tabs-active coral-state-active");d()})}else{h.oldTab.closest("li").removeClass("coral-tabs-active coral-state-active");f.hide();d()}f.attr("aria-hidden","true");h.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});if(c.length&&f.length){h.oldTab.attr("tabIndex",-1)}else{if(c.length){this.tabs.filter(function(){return a(this).attr("tabIndex")===0}).attr("tabIndex",-1)}}c.attr("aria-hidden","false");h.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(d){if(d==-1){return}var c,e=this._findActive(d);if(e[0]===this.active[0]){return}if(!e.length){e=this.active}c=e.find(".coral-tabs-anchor")[0];this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop})},_findActive:function(c){return c===false?a():this.tabs.eq(c)},_getIndex:function(c){if(typeof c==="string"){c=this.anchors.index(this.anchors.filter("[href$='"+c+"']"))}return c},getIdByIndex:function(d){var c=this.tablist.children("li").filter(function(){return a(this).hasClass("coral-state-default")});return c.eq(d).attr("aria-controls")},getIndexById:function(d){var c=this.tablist.children("li").filter(function(){return a(this).hasClass("coral-state-default")});return c.index(c.filter("[aria-controls$='"+d+"']"))},getAllTabId:function(){var c=[];this.tabs.filter("[aria-controls]").each(function(){var d=a(this).attr("aria-controls");if(""!=d){c.push(d)}});return c},_destroy:function(){if(this.xhr){this.xhr.abort()}this.element.removeClass("coral-tabs coral-component coral-component-content coral-corner-all coral-tabs-collapsible");
this.tablist.removeClass("coral-tabs-nav coral-helper-reset coral-helper-clearfix coral-component-header coral-corner-all").removeAttr("role");this.anchors.removeClass("coral-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();this.tablist.unbind(this.eventNamespace);this.tabs.add(this.panels).each(function(){if(a.data(this,"coral-tabs-destroy")){a(this).remove()}else{a(this).removeClass("coral-state-default coral-state-active coral-state-disabled coral-corner-top coral-corner-bottom coral-component-content coral-state-active coral-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}});this.tabs.each(function(){var c=a(this),d=c.data("coral-tabs-aria-controls");if(d){c.attr("aria-controls",d).removeData("coral-tabs-aria-controls")}else{c.removeAttr("aria-controls")}});this.panels.show();if(this.options.heightStyle!=="content"){this.panels.css("height","")}},enable:function(c){var d=this.options.disabled;if(d===false){return}if(c===b){d=false}else{c=this._getIndex(c);if(a.isArray(d)){d=a.map(d,function(e){return e!==c?e:null})}else{d=a.map(this.tabs,function(e,f){return f!==c?f:null})}}this._setupDisabled(d)},disable:function(c){var d=this.options.disabled;if(d===true){return}if(c===b){d=true}else{c=this._getIndex(c);if(a.inArray(c,d)!==-1){return}if(a.isArray(d)){d=a.merge([c],d).sort()}else{d=[c]}}this._setupDisabled(d)},_destroyOtherTabs:function(c){var d=this._getList().find("> li:has(a[href])").eq(c).attr("aria-controls");this.component().children("div:not(#"+d+")").children().remove()},load:function(e,i){e=this._getIndex(e);var h=this,f=this.tabs.eq(e),d=f.find(".coral-tabs-anchor"),c=this._getPanelForTab(f),g={tab:f,panel:c};if(this.options.destroyAllonActive){h._destroyOtherTabs(e)}if(h._isLocal(d[0])||a.data(d[0],"cache")){return}else{if(this.options.loadonce){a.data(d[0],"cache",true)
}}this.xhr=a.ajax(this._ajaxSettings(d,i,g));if(this.xhr&&this.xhr.statusText!=="canceled"){f.addClass("coral-tabs-loading");c.attr("aria-busy","true");this.xhr.success(function(j){setTimeout(function(){c.html(j);if(a.coral.openTag==true){a.parser.parse(c)}h._trigger("onLoad",i,g)},1)}).complete(function(k,j){setTimeout(function(){if(j==="abort"){h.panels.stop(false,true)}f.removeClass("coral-tabs-loading");c.removeAttr("aria-busy");if(k===h.xhr){delete h.xhr}},1)})}},_ajaxSettings:function(c,f,e){var d=this;return{url:c.attr("href"),beforeSend:function(h,g){return d._trigger("beforeLoad",f,a.extend({jqXHR:h,ajaxSettings:g},e))},type:d.options.method}},_getPanelForTab:function(c){var d=a(c).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+d))},getPanelForTab:function(c){return this._getPanelForTab(c)}})})(jQuery);

(function($,undefined){$.extend($.coral,{tree:{version:"4.0.2"}});var _final={className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch"},event:{NODECREATED:"tree_nodeCreated",CLICK:"tree_click",EXPAND:"tree_expand",COLLAPSE:"tree_collapse",ASYNC_SUCCESS:"tree_async_success",ASYNC_ERROR:"tree_async_error",REMOVE:"tree_remove",CHECK:"tree_check",DRAG:"tree_drag",DROP:"tree_drop",RENAME:"tree_rename",DRAGMOVE:"tree_dragmove"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul",CHECK:"_check",EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode",CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetTree",TMPTARGET_NODE:"tmpTargetNode"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"}},_option={treeId:"",treeObj:null,addDiyDom:null,autoCancelSelected:true,dblClickExpand:true,expandSpeed:"fast",fontCss:{},nameIsHTML:false,selectedMulti:true,showIcon:true,showLine:true,showTitle:true,txtSelectedEnable:false,rootInNode:false,showRootNode:true,rootNode:false,keyChildren:"children",keyName:"name",keyTitle:"",keyUrl:"url",simpleDataEnable:false,simpleDataIdKey:"id",simpleDataPIdKey:"pId",simpleDataRootPId:null,keepParent:false,keepLeaf:false,asyncEnable:false,asyncContentType:"application/x-www-form-urlencoded",asyncType:"post",asyncDataType:"text",asyncUrl:"",asyncAutoParam:[],asyncOtherParam:[],asyncDataFilter:null,checkable:false,autoCheckTrigger:false,chkStyle:_final.checkbox.STYLE,nocheckInherit:false,chkDisabledInherit:false,radioType:_final.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"},keyChecked:"checked",editable:false,editNameSelectAll:false,showRemoveBtn:true,showRenameBtn:true,removeTitle:"remove",renameTitle:"rename",dragStyle:"line",dragAutoExpandTrigger:false,dragIsCopy:true,dragIsMove:true,dragPrev:true,dragNext:true,dragInner:true,dragMinMoveSize:5,dragBorderMax:10,dragBorderMin:-5,dragMaxShowNodeNum:5,dragAutoOpenTime:500,addHoverDom:null,removeHoverDom:null,beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeReName:null,onDrag:null,onDragMove:null,onDrop:null,onReName:null,beforeCheck:null,onCheck:null,beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onLoadError:null,onLoad:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null};
$.tree={_coreInitRoot:function(setting){var root=$.tree._getRoot(setting);if(!root){root={};$.tree._setRoot(setting,root)}root[setting.keyChildren]=[];root.expandTriggerFlag=false;root.curSelectedList=[];root.noSelection=true;root.createdNodes=[];root.zId=0;root._ver=(new Date()).getTime()},_checkInitRoot:function(setting){var root=$.tree._getRoot(setting);root.radioCheckedList=[]},_editInitRoot:function(setting){var root=$.tree._getRoot(setting),roots=$.tree._getRoots();root.curEditNode=null;root.curEditInput=null;root.curHoverNode=null;root.dragFlag=0;root.dragNodeShowBefore=[];root.dragMaskList=new Array();roots.showHoverDom=true},_coreInitCache:function(setting){var cache=$.tree._getCache(setting);if(!cache){cache={};$.tree._setCache(setting,cache)}cache.nodes=[];cache.doms=[]},_checkInitCache:function(treeId){},_editInitCache:function(treeId){},_coreBindEvent:function(setting){var treeObj=setting.treeObj,cache=consts.event;treeObj.bind(cache.NODECREATED,function(event,treeId,node){$.tree._apply(setting.onNodeCreated,[event,treeId,node])});treeObj.bind(cache.CLICK,function(event,srcEvent,treeId,node,clickFlag){$.tree._apply(setting.onClick,[srcEvent,treeId,node,clickFlag])});treeObj.bind(cache.EXPAND,function(event,treeId,node){$.tree._apply(setting.onExpand,[event,treeId,node])});treeObj.bind(cache.COLLAPSE,function(event,treeId,node){$.tree._apply(setting.onCollapse,[event,treeId,node])});treeObj.bind(cache.ASYNC_SUCCESS,function(event,treeId,node,msg){$.tree._apply(setting.onLoad,[event,treeId,node,msg])});treeObj.bind(cache.ASYNC_ERROR,function(event,treeId,node,XMLHttpRequest,textStatus,errorThrown){$.tree._apply(setting.onLoadError,[event,treeId,node,XMLHttpRequest,textStatus,errorThrown])});treeObj.bind(cache.REMOVE,function(event,treeId,treeNode){$.tree._apply(setting.onRemove,[event,treeId,treeNode])})},_checkBindEvent:function(setting){var treeObj=setting.treeObj,cache=consts.event;treeObj.bind(cache.CHECK,function(event,srcEvent,treeId,node){event.srcEvent=srcEvent;
$.tree._apply(setting.onCheck,[event,treeId,node])})},_editBindEvent:function(setting){var treeObj=setting.treeObj;var cache=consts.event;treeObj.bind(cache.RENAME,function(event,treeId,treeNode,isCancel){$.tree._apply(setting.onReName,[event,treeId,treeNode,isCancel])});treeObj.bind(cache.DRAG,function(event,srcEvent,treeId,treeNodes){$.tree._apply(setting.onDrag,[srcEvent,treeId,treeNodes])});treeObj.bind(cache.DRAGMOVE,function(event,srcEvent,treeId,treeNodes){$.tree._apply(setting.onDragMove,[srcEvent,treeId,treeNodes])});treeObj.bind(cache.DROP,function(event,srcEvent,treeId,treeNodes,targetNode,moveType,isCopy){$.tree._apply(setting.onDrop,[srcEvent,treeId,treeNodes,targetNode,moveType,isCopy])})},_coreUnbindEvent:function(setting){var treeObj=setting.treeObj,cache=consts.event;treeObj.unbind(cache.NODECREATED).unbind(cache.CLICK).unbind(cache.EXPAND).unbind(cache.COLLAPSE).unbind(cache.ASYNC_SUCCESS).unbind(cache.ASYNC_ERROR).unbind(cache.REMOVE)},_checkUnbindEvent:function(setting){var treeObj=setting.treeObj;var cache=consts.event;treeObj.unbind(cache.CHECK)},_editUnbindEvent:function(setting){var treeObj=setting.treeObj;var cache=consts.event;treeObj.unbind(cache.RENAME);treeObj.unbind(cache.DRAG);treeObj.unbind(cache.DRAGMOVE);treeObj.unbind(cache.DROP)},_coreEventProxy:function(event){var target=event.target,setting=$.tree._getSetting(event.data.treeId),tId="",node=null,nodeEventType="",treeEventType="",nodeEventCallback=null,treeEventCallback=null,tmp=null;if($.tree._eqs(event.type,"mousedown")){treeEventType="mousedown"}else{if($.tree._eqs(event.type,"mouseup")){treeEventType="mouseup"}else{if($.tree._eqs(event.type,"contextmenu")){treeEventType="contextmenu"}else{if($.tree._eqs(event.type,"click")){if($.tree._eqs(target.tagName,"span")&&target.getAttribute("treeNode"+consts.id.SWITCH)!==null){tId=$.tree._getNodeMainDom(target).id;nodeEventType="switchNode"}else{tmp=$.tree._getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=$.tree._getNodeMainDom(tmp).id;
nodeEventType="clickNode"}}}else{if($.tree._eqs(event.type,"dblclick")){treeEventType="dblclick";tmp=$.tree._getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=$.tree._getNodeMainDom(tmp).id;nodeEventType="switchNode"}}}}}}if(treeEventType.length>0&&tId.length==0){tmp=$.tree._getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=$.tree._getNodeMainDom(tmp).id}}if(tId.length>0){node=$.tree._getNodeCache(setting,tId);switch(nodeEventType){case"switchNode":if(!node.isParent){nodeEventType=""}else{if($.tree._eqs(event.type,"click")||($.tree._eqs(event.type,"dblclick")&&$.tree._apply(setting.dblClickExpand,[setting.treeId,node],setting.dblClickExpand))){nodeEventCallback=$.tree._onSwitchNode}else{nodeEventType=""}}break;case"clickNode":nodeEventCallback=$.tree._onClickNode;break}}switch(treeEventType){case"mousedown":treeEventCallback=$.tree._onTreeMousedown;break;case"mouseup":treeEventCallback=$.tree._onTreeMouseup;break;case"dblclick":treeEventCallback=$.tree._onTreeDblclick;break;case"contextmenu":treeEventCallback=$.tree._onTreeContextmenu;break}var proxyResult={stop:false,node:node,nodeEventType:nodeEventType,nodeEventCallback:nodeEventCallback,treeEventType:treeEventType,treeEventCallback:treeEventCallback};return proxyResult},_checkEventProxy:function(e){var target=e.target,setting=$.tree._getSetting(e.data.treeId),tId="",node=null,nodeEventType="",treeEventType="",nodeEventCallback=null,treeEventCallback=null;if($.tree._eqs(e.type,"mouseover")){if(setting.checkable&&$.tree._eqs(target.tagName,"span")&&target.getAttribute("treeNode"+consts.id.CHECK)!==null){tId=$.tree._getNodeMainDom(target).id;nodeEventType="mouseoverCheck"}}else{if($.tree._eqs(e.type,"mouseout")){if(setting.checkable&&$.tree._eqs(target.tagName,"span")&&target.getAttribute("treeNode"+consts.id.CHECK)!==null){tId=$.tree._getNodeMainDom(target).id;nodeEventType="mouseoutCheck"}}else{if($.tree._eqs(e.type,"click")){if(setting.checkable&&$.tree._eqs(target.tagName,"span")&&target.getAttribute("treeNode"+consts.id.CHECK)!==null){tId=$.tree._getNodeMainDom(target).id;
nodeEventType="checkNode"}}}}if(tId.length>0){node=$.tree._getNodeCache(setting,tId);switch(nodeEventType){case"checkNode":nodeEventCallback=$.tree._onCheckNode;break;case"mouseoverCheck":nodeEventCallback=$.tree._onMouseoverCheck;break;case"mouseoutCheck":nodeEventCallback=$.tree._onMouseoutCheck;break}}var proxyResult={stop:nodeEventType==="checkNode",node:node,nodeEventType:nodeEventType,nodeEventCallback:nodeEventCallback,treeEventType:treeEventType,treeEventCallback:treeEventCallback};return proxyResult},_editEventProxy:function(e){var target=e.target,setting=$.tree._getSetting(e.data.treeId),relatedTarget=e.relatedTarget,tId="",node=null,nodeEventType="",treeEventType="",nodeEventCallback=null,treeEventCallback=null,tmp=null;if($.tree._eqs(e.type,"mouseover")){tmp=$.tree._getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=$.tree._getNodeMainDom(tmp).id;nodeEventType="hoverOverNode"}}else{if($.tree._eqs(e.type,"mouseout")){tmp=$.tree._getMDom(setting,relatedTarget,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(!tmp){tId="remove";nodeEventType="hoverOutNode"}}else{if($.tree._eqs(e.type,"mousedown")){tmp=$.tree._getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=$.tree._getNodeMainDom(tmp).id;nodeEventType="mousedownNode"}}}}if(tId.length>0){node=$.tree._getNodeCache(setting,tId);switch(nodeEventType){case"mousedownNode":nodeEventCallback=$.tree._onMousedownNode;break;case"hoverOverNode":nodeEventCallback=$.tree._onHoverOverNode;break;case"hoverOutNode":nodeEventCallback=$.tree._onHoverOutNode;break}}var proxyResult={stop:false,node:node,nodeEventType:nodeEventType,nodeEventCallback:nodeEventCallback,treeEventType:treeEventType,treeEventCallback:treeEventCallback};return proxyResult},_beforeA:function(setting,node,html){var checkedKey=setting.keyChecked;if(setting.checkable){$.tree._makeChkFlag(setting,node);html.push("<span ID='",node.tId,consts.id.CHECK,"' class='",$.tree._makeChkClass(setting,node),"' treeNode",consts.id.CHECK,(node.nocheck===true?" style='display:none;'":""),"></span>")
}},_coreInitNode:function(setting,level,node,parentNode,isFirstNode,isLastNode,openFlag){if(!node){return}var r=$.tree._getRoot(setting),childKey=setting.keyChildren;node.level=level;node.tId=setting.treeId+"_"+(++r.zId);node.parentTId=parentNode?parentNode.tId:null;node.open=(typeof node.open=="string")?$.tree._eqs(node.open,"true"):!!node.open;if(node[childKey]&&node[childKey].length>0){node.isParent=true;node.zAsync=true}else{node.isParent=(typeof node.isParent=="string")?$.tree._eqs(node.isParent,"true"):!!node.isParent;node.open=(node.isParent&&!setting.asyncEnable)?node.open:false;node.zAsync=!node.isParent}node.isFirstNode=isFirstNode;node.isLastNode=isLastNode;node.getParentNode=function(){return $.tree._getNodeCache(setting,node.parentTId)};node.getPreNode=function(){return $.tree._getPreNode(setting,node)};node.getNextNode=function(){return $.tree._getNextNode(setting,node)};node.isAjaxing=false;$.tree._fixPIdKeyValue(setting,node)},_checkInitNode:function(setting,level,node,parentNode,isFirstNode,isLastNode,openFlag){if(!node){return}var checkedKey=setting.keyChecked;if(typeof node[checkedKey]=="string"){node[checkedKey]=$.tree._eqs(node[checkedKey],"true")}node[checkedKey]=!!node[checkedKey];node.checkedOld=node[checkedKey];if(typeof node.nocheck=="string"){node.nocheck=$.tree._eqs(node.nocheck,"true")}node.nocheck=!!node.nocheck||(setting.nocheckInherit&&parentNode&&!!parentNode.nocheck);if(typeof node.chkDisabled=="string"){node.chkDisabled=$.tree._eqs(node.chkDisabled,"true")}node.chkDisabled=!!node.chkDisabled||(setting.chkDisabledInherit&&parentNode&&!!parentNode.chkDisabled);if(typeof node.halfCheck=="string"){node.halfCheck=$.tree._eqs(node.halfCheck,"true")}node.halfCheck=!!node.halfCheck;node.check_Child_State=-1;node.check_Focus=false;node.getCheckStatus=function(){return $.tree._getCheckStatus(setting,node)};if(setting.chkStyle==consts.radio.STYLE&&setting.radioType==consts.radio.TYPE_ALL&&node[checkedKey]){var r=$.tree._getRoot(setting);r.radioCheckedList.push(node)
}},_editInitNode:function(setting,level,node,parentNode,isFirstNode,isLastNode,openFlag){if(!node){return}node.isHover=false;node.editNameFlag=false},_checkTreeTools:function(setting,treeTools){treeTools.checkNode=function(node,checked,checkTypeFlag,callbackFlag){var checkedKey=this.setting.keyChecked;if(node.chkDisabled===true){return}if(checked!==true&&checked!==false){checked=!node[checkedKey]}callbackFlag=!!callbackFlag;if(node[checkedKey]===checked&&!checkTypeFlag){return}else{if(callbackFlag&&$.tree._apply(this.setting.beforeCheck,[this.setting.treeId,node],true)==false){return}}if($.tree._uCanDo(this.setting)&&this.setting.checkable&&node.nocheck!==true){node[checkedKey]=checked;var checkObj=$$(node,consts.id.CHECK,this.setting);if(checkTypeFlag||this.setting.chkStyle===consts.radio.STYLE){$.tree._checkNodeRelation(this.setting,node)}$.tree._setChkClass(this.setting,checkObj,node);$.tree._repairParentChkClassWithSelf(this.setting,node);if(callbackFlag){this.setting.treeObj.trigger(consts.event.CHECK,[null,this.setting.treeId,node])}}};treeTools.checkAllNodes=function(checked){$.tree._repairAllChk(this.setting,!!checked)};treeTools.getCheckedNodes=function(checked){var childKey=this.setting.keyChildren;checked=(checked!==false);return $.tree._getTreeCheckedNodes(this.setting,$.tree._getRoot(this.setting)[childKey],checked)};treeTools.getChangeCheckedNodes=function(){var childKey=this.setting.keyChildren;return $.tree._getTreeChangeCheckedNodes(this.setting,$.tree._getRoot(this.setting)[childKey])};treeTools.setChkDisabled=function(node,disabled,inheritParent,inheritChildren){disabled=!!disabled;inheritParent=!!inheritParent;inheritChildren=!!inheritChildren;$.tree._repairSonChkDisabled(this.setting,node,disabled,inheritChildren);$.tree._repairParentChkDisabled(this.setting,node.getParentNode(),disabled,inheritParent)};var _updateNode=treeTools.updateNode;treeTools.updateNode=function(node,checkTypeFlag){if(_updateNode){_updateNode.apply(treeTools,arguments)}if(!node||!this.setting.checkable){return
}var nObj=$$(node,this.setting);if(nObj.get(0)&&$.tree._uCanDo(this.setting)){var checkObj=$$(node,consts.id.CHECK,this.setting);if(checkTypeFlag==true||this.setting.chkStyle===consts.radio.STYLE){$.tree._checkNodeRelation(this.setting,node)}$.tree._setChkClass(this.setting,checkObj,node);$.tree._repairParentChkClassWithSelf(this.setting,node)}}},_editTreeTools:function(setting,treeTools){treeTools.cancelEditName=function(newName){var root=$.tree._getRoot(this.setting);if(!root.curEditNode){return}$.tree._cancelCurEditNode(this.setting,newName?newName:null,true)};treeTools.copyNode=function(targetNode,node,moveType,isSilent){if(!node){return null}if(targetNode&&!targetNode.isParent&&this.setting.keepLeaf&&moveType===consts.move.TYPE_INNER){return null}var _this=this,newNode=$.tree._clone(node);if(!targetNode){targetNode=null;moveType=consts.move.TYPE_INNER}if(moveType==consts.move.TYPE_INNER){function copyCallback(){$.tree._addNodes(_this.setting,targetNode,[newNode],isSilent)}if($.tree._canAsync(this.setting,targetNode)){$.tree._asyncNode(this.setting,targetNode,isSilent,copyCallback)}else{copyCallback()}}else{$.tree._addNodes(this.setting,targetNode.parentNode,[newNode],isSilent);$.tree._moveNode(this.setting,targetNode,newNode,moveType,false,isSilent)}return newNode};treeTools.editName=function(node){if(!node||!node.tId||node!==$.tree._getNodeCache(this.setting,node.tId)){return}if(node.parentTId){$.tree._expandCollapseParentNode(this.setting,node.getParentNode(),true)}$.tree._editNode(this.setting,node)};treeTools.moveNode=function(targetNode,node,moveType,isSilent){if(!node){return node}if(targetNode&&!targetNode.isParent&&this.setting.keepLeaf&&moveType===consts.move.TYPE_INNER){return null}else{if(targetNode&&((node.parentTId==targetNode.tId&&moveType==consts.move.TYPE_INNER)||$$(node,this.setting).find("#"+targetNode.tId).length>0)){return null}else{if(!targetNode){targetNode=null}}}var _this=this;function moveCallback(){$.tree._moveNode(_this.setting,targetNode,node,moveType,false,isSilent)
}if($.tree._canAsync(this.setting,targetNode)&&moveType===consts.move.TYPE_INNER){$.tree._asyncNode(this.setting,targetNode,isSilent,moveCallback)}else{moveCallback()}return node};treeTools.setEditable=function(editable){this.setting.editable=editable;return this.refresh()}},_addNodeCache:function(setting,node){$.tree._getCache(setting).nodes[$.tree._getNodeCacheId(node.tId)]=node},_getNodeCacheId:function(tId){return tId.substring(tId.lastIndexOf("_")+1)},_addNodesData:function(setting,parentNode,nodes){var childKey=setting.keyChildren;if(!parentNode[childKey]){parentNode[childKey]=[]}if(parentNode[childKey].length>0){parentNode[childKey][parentNode[childKey].length-1].isLastNode=false;$.tree._setNodeLineIcos(setting,parentNode[childKey][parentNode[childKey].length-1])}parentNode.isParent=true;if(setting.isInit&&!setting.showRootNode&&setting.rootNode){var children=(nodes.length&&nodes[0][childKey])?nodes[0][childKey]:[];if(children.length>0){parentNode[childKey]=parentNode[childKey].concat(children)}}else{parentNode[childKey]=parentNode[childKey].concat(nodes)}},_addSelectedNode:function(setting,node){var root=$.tree._getRoot(setting);if(!$.tree._isSelectedNode(setting,node)){root.curSelectedList.push(node)}},_addCreatedNode:function(setting,node){if(!!setting.onNodeCreated||!!setting.addDiyDom){var root=$.tree._getRoot(setting);root.createdNodes.push(node)}},_fixPIdKeyValue:function(setting,node){if(setting.simpleDataEnable){node[setting.simpleDataPIdKey]=node.parentTId?node.getParentNode()[setting.simpleDataIdKey]:setting.simpleDataRootPId}},_getAfterA:function(setting,node,array){for(var i=0,j=_init.afterA.length;i<j;i++){_init.afterA[i].apply(this,arguments)}},_getBeforeA:function(setting,node,array){for(var i=0,j=_init.beforeA.length;i<j;i++){_init.beforeA[i].apply(this,arguments)}},_getInnerAfterA:function(setting,node,array){for(var i=0,j=_init.innerAfterA.length;i<j;i++){_init.innerAfterA[i].apply(this,arguments)}},_getInnerBeforeA:function(setting,node,array){for(var i=0,j=_init.innerBeforeA.length;
i<j;i++){_init.innerBeforeA[i].apply(this,arguments)}},_getCache:function(setting){return caches[setting.treeId]},_getNextNode:function(setting,node){if(!node){return null}var childKey=setting.keyChildren,p=node.parentTId?node.getParentNode():$.tree._getRoot(setting);for(var i=0,l=p[childKey].length-1;i<=l;i++){if(p[childKey][i]===node){return(i==l?null:p[childKey][i+1])}}return null},_getNodeByParam:function(setting,nodes,key,value){if(!nodes||!key){return null}var childKey=setting.keyChildren;for(var i=0,l=nodes.length;i<l;i++){if(nodes[i][key]==value){return nodes[i]}var tmp=$.tree._getNodeByParam(setting,nodes[i][childKey],key,value);if(tmp){return tmp}}return null},_getNodeCache:function(setting,tId){if(!tId){return null}var n=caches[setting.treeId].nodes[$.tree._getNodeCacheId(tId)];return n?n:null},_getNodeName:function(setting,node){var nameKey=setting.keyName;return""+node[nameKey]},_getNodeTitle:function(setting,node){var t=setting.keyTitle===""?setting.keyName:setting.keyTitle;return""+node[t]},_getNodes:function(setting){return $.tree._getRoot(setting)[setting.keyChildren]},_getNodesByParam:function(setting,nodes,key,value){if(!nodes||!key){return[]}var childKey=setting.keyChildren,result=[];for(var i=0,l=nodes.length;i<l;i++){if(nodes[i][key]==value){result.push(nodes[i])}result=result.concat($.tree._getNodesByParam(setting,nodes[i][childKey],key,value))}return result},_getNodesByParamFuzzy:function(setting,nodes,key,value){if(!nodes||!key){return[]}var childKey=setting.keyChildren,result=[];value=value.toLowerCase();for(var i=0,l=nodes.length;i<l;i++){if(typeof nodes[i][key]=="string"&&nodes[i][key].toLowerCase().indexOf(value)>-1){result.push(nodes[i])}result=result.concat($.tree._getNodesByParamFuzzy(setting,nodes[i][childKey],key,value))}return result},_getNodesByFilter:function(setting,nodes,filter,isSingle,invokeParam){if(!nodes){return(isSingle?null:[])}var childKey=setting.keyChildren,result=isSingle?null:[];for(var i=0,l=nodes.length;i<l;i++){if($.tree._apply(filter,[nodes[i],invokeParam],false)){if(isSingle){return nodes[i]
}result.push(nodes[i])}var tmpResult=$.tree._getNodesByFilter(setting,nodes[i][childKey],filter,isSingle,invokeParam);if(isSingle&&!!tmpResult){return tmpResult}result=isSingle?tmpResult:result.concat(tmpResult)}return result},_getPreNode:function(setting,node){if(!node){return null}var childKey=setting.keyChildren,p=node.parentTId?node.getParentNode():$.tree._getRoot(setting);for(var i=0,l=p[childKey].length;i<l;i++){if(p[childKey][i]===node){return(i==0?null:p[childKey][i-1])}}return null},_getRadioCheckedList:function(setting){var checkedList=$.tree._getRoot(setting).radioCheckedList;for(var i=0,j=checkedList.length;i<j;i++){if(!$.tree._getNodeCache(setting,checkedList[i].tId)){checkedList.splice(i,1);i--;j--}}return checkedList},_getCheckStatus:function(setting,node){if(!setting.checkable||node.nocheck||node.chkDisabled){return null}var checkedKey=setting.keyChecked,r={checked:node[checkedKey],half:node.halfCheck?node.halfCheck:(setting.chkStyle==consts.radio.STYLE?(node.check_Child_State===2):(node[checkedKey]?(node.check_Child_State>-1&&node.check_Child_State<2):(node.check_Child_State>0)))};return r},_getTreeCheckedNodes:function(setting,nodes,checked,results){if(!nodes){return[]}var childKey=setting.keyChildren,checkedKey=setting.keyChecked,onlyOne=(checked&&setting.chkStyle==consts.radio.STYLE&&setting.radioType==consts.radio.TYPE_ALL);results=!results?[]:results;for(var i=0,l=nodes.length;i<l;i++){if(nodes[i].nocheck!==true&&nodes[i].chkDisabled!==true&&nodes[i][checkedKey]==checked){results.push(nodes[i]);if(onlyOne){break}}$.tree._getTreeCheckedNodes(setting,nodes[i][childKey],checked,results);if(onlyOne&&results.length>0){break}}return results},_getTreeChangeCheckedNodes:function(setting,nodes,results){if(!nodes){return[]}var childKey=setting.keyChildren,checkedKey=setting.keyChecked;results=!results?[]:results;for(var i=0,l=nodes.length;i<l;i++){if(nodes[i].nocheck!==true&&nodes[i].chkDisabled!==true&&nodes[i][checkedKey]!=nodes[i].checkedOld){results.push(nodes[i])
}$.tree._getTreeChangeCheckedNodes(setting,nodes[i][childKey],results)}return results},_getRoot:function(setting){return setting?roots[setting.treeId]:null},_getRoots:function(){return roots},_getSetting:function(treeId){return settings[treeId]},_getSettings:function(){return settings},_getTreeTools:function(treeId){var r=this._getRoot(this._getSetting(treeId));return r?r.treeTools:null},_initCache:function(setting){for(var i=0,j=_init.caches.length;i<j;i++){_init.caches[i].apply(this,arguments)}},_initNode:function(setting,level,node,parentNode,preNode,nextNode){for(var i=0,j=_init.nodes.length;i<j;i++){_init.nodes[i].apply(this,arguments)}},_initRoot:function(setting){for(var i=0,j=_init.roots.length;i<j;i++){_init.roots[i].apply(this,arguments)}},_isSelectedNode:function(setting,node){var root=$.tree._getRoot(setting);for(var i=0,j=root.curSelectedList.length;i<j;i++){if(node===root.curSelectedList[i]){return true}}return false},_removeNodeCache:function(setting,node){var childKey=setting.keyChildren;if(node[childKey]){for(var i=0,l=node[childKey].length;i<l;i++){arguments.callee(setting,node[childKey][i])}}$.tree._getCache(setting).nodes[$.tree._getNodeCacheId(node.tId)]=null},_removeSelectedNode:function(setting,node){var root=$.tree._getRoot(setting);for(var i=0,j=root.curSelectedList.length;i<j;i++){if(node===root.curSelectedList[i]||!$.tree._getNodeCache(setting,root.curSelectedList[i].tId)){root.curSelectedList.splice(i,1);i--;j--}}},_setCache:function(setting,cache){caches[setting.treeId]=cache},_setRoot:function(setting,root){roots[setting.treeId]=root},_setTreeTools:function(setting,treeTools){for(var i=0,j=_init.treeTools.length;i<j;i++){_init.treeTools[i].apply(this,arguments)}},_makeChkFlag:function(setting,node){if(!node){return}var childKey=setting.keyChildren,checkedKey=setting.keyChecked,chkFlag=-1;if(node[childKey]){for(var i=0,l=node[childKey].length;i<l;i++){var cNode=node[childKey][i];var tmp=-1;if(setting.chkStyle==consts.radio.STYLE){if(cNode.nocheck===true||cNode.chkDisabled===true){tmp=cNode.check_Child_State
}else{if(cNode.halfCheck===true){tmp=2}else{if(cNode[checkedKey]){tmp=2}else{tmp=cNode.check_Child_State>0?2:0}}}if(tmp==2){chkFlag=2;break}else{if(tmp==0){chkFlag=0}}}else{if(setting.chkStyle==consts.checkbox.STYLE){if(cNode.nocheck===true||cNode.chkDisabled===true){tmp=cNode.check_Child_State}else{if(cNode.halfCheck===true){tmp=1}else{if(cNode[checkedKey]){tmp=(cNode.check_Child_State===-1||cNode.check_Child_State===2)?2:1}else{tmp=(cNode.check_Child_State>0)?1:0}}}if(tmp===1){chkFlag=1;break}else{if(tmp===2&&chkFlag>-1&&i>0&&tmp!==chkFlag){chkFlag=1;break}else{if(chkFlag===2&&tmp>-1&&tmp<2){chkFlag=1;break}else{if(tmp>-1){chkFlag=tmp}}}}}}}}node.check_Child_State=chkFlag},_setSonNodeLevel:function(setting,parentNode,node){if(!node){return}var childKey=setting.keyChildren;node.level=(parentNode)?parentNode.level+1:0;if(!node[childKey]){return}for(var i=0,l=node[childKey].length;i<l;i++){if(node[childKey][i]){$.tree._setSonNodeLevel(setting,node,node[childKey][i])}}},_transformToArrayFormat:function(setting,nodes){if(!nodes){return[]}var childKey=setting.keyChildren,r=[];if($.tree._isArray(nodes)){for(var i=0,l=nodes.length;i<l;i++){r.push(nodes[i]);if(nodes[i][childKey]){r=r.concat($.tree._transformToArrayFormat(setting,nodes[i][childKey]))}}}else{r.push(nodes);if(nodes[childKey]){r=r.concat($.tree._transformToArrayFormat(setting,nodes[childKey]))}}return r},_transformToTreeFormat:function(setting,sNodes){var i,l,key=setting.simpleDataIdKey,parentKey=setting.simpleDataPIdKey,childKey=setting.keyChildren;if(!key||key==""||!sNodes){return[]}if($.tree._isArray(sNodes)){var r=[];var tmpMap=[];for(i=0,l=sNodes.length;i<l;i++){tmpMap[sNodes[i][key]]=sNodes[i]}for(i=0,l=sNodes.length;i<l;i++){if(tmpMap[sNodes[i][parentKey]]&&sNodes[i][key]!=sNodes[i][parentKey]){if(!tmpMap[sNodes[i][parentKey]][childKey]){tmpMap[sNodes[i][parentKey]][childKey]=[]}tmpMap[sNodes[i][parentKey]][childKey].push(sNodes[i])}else{r.push(sNodes[i])}}return r}else{return[sNodes]}},_bindEvent:function(setting){for(var i=0,j=_init.bind.length;
i<j;i++){_init.bind[i].apply(this,arguments)}},_unbindEvent:function(setting){for(var i=0,j=_init.unbind.length;i<j;i++){_init.unbind[i].apply(this,arguments)}},_bindTree:function(setting){var eventParam={treeId:setting.treeId},treeObj=setting.treeObj;if(!setting.txtSelectedEnable){treeObj.bind("selectstart",function(e){var node;var n=e.originalEvent.srcElement.nodeName.toLowerCase();return(n==="input"||n==="textarea")}).css({"-moz-user-select":"-moz-none"})}treeObj.bind("click",eventParam,$.tree._proxy);treeObj.bind("dblclick",eventParam,$.tree._proxy);treeObj.bind("mouseover",eventParam,$.tree._proxy);treeObj.bind("mouseout",eventParam,$.tree._proxy);treeObj.bind("mousedown",eventParam,$.tree._proxy);treeObj.bind("mouseup",eventParam,$.tree._proxy);treeObj.bind("contextmenu",eventParam,$.tree._proxy)},_unbindTree:function(setting){var treeObj=setting.treeObj;treeObj.unbind("click",$.tree._proxy);treeObj.unbind("dblclick",$.tree._proxy);treeObj.unbind("mouseover",$.tree._proxy);treeObj.unbind("mouseout",$.tree._proxy);treeObj.unbind("mousedown",$.tree._proxy);treeObj.unbind("mouseup",$.tree._proxy);treeObj.unbind("contextmenu",$.tree._proxy)},_doProxy:function(e){var results=[];for(var i=0,j=_init.proxys.length;i<j;i++){var proxyResult=_init.proxys[i].apply(this,arguments);results.push(proxyResult);if(proxyResult.stop){break}}return results},_proxy:function(e){var setting=$.tree._getSetting(e.data.treeId);if(!$.tree._uCanDo(setting,e)){return true}var results=$.tree._doProxy(e),r=true,x=false;for(var i=0,l=results.length;i<l;i++){var proxyResult=results[i];if(proxyResult.nodeEventCallback){x=true;r=proxyResult.nodeEventCallback.apply(proxyResult,[e,proxyResult.node])&&r}if(proxyResult.treeEventCallback){x=true;r=proxyResult.treeEventCallback.apply(proxyResult,[e,proxyResult.node])&&r}}return r},_onSwitchNode:function(event,node){var setting=$.tree._getSetting(event.data.treeId);if(node.open){if($.tree._apply(setting.beforeCollapse,[setting.treeId,node],true)==false){return true
}$.tree._getRoot(setting).expandTriggerFlag=true;$.tree._switchNode(setting,node)}else{if($.tree._apply(setting.beforeExpand,[setting.treeId,node],true)==false){return true}$.tree._getRoot(setting).expandTriggerFlag=true;$.tree._switchNode(setting,node)}return true},_onClickNode:function(event,node){var setting=$.tree._getSetting(event.data.treeId),clickFlag=((setting.autoCancelSelected&&(event.ctrlKey||event.metaKey))&&$.tree._isSelectedNode(setting,node))?0:(setting.autoCancelSelected&&(event.ctrlKey||event.metaKey)&&setting.selectedMulti)?2:1;if($.tree._apply(setting.beforeClick,[setting.treeId,node,clickFlag],true)==false){return true}if(clickFlag===0){$.tree._cancelPreSelectedNode(setting,node)}else{$.tree._selectNode(setting,node,clickFlag===2)}setting.treeObj.trigger(consts.event.CLICK,[event,setting.treeId,node,clickFlag]);return true},_onTreeMousedown:function(event,node){var setting=$.tree._getSetting(event.data.treeId);if($.tree._apply(setting.beforeMouseDown,[setting.treeId,node],true)){$.tree._apply(setting.onMouseDown,[event,setting.treeId,node])}return true},_onTreeMouseup:function(event,node){var setting=$.tree._getSetting(event.data.treeId);if($.tree._apply(setting.beforeMouseUp,[setting.treeId,node],true)){$.tree._apply(setting.onMouseUp,[event,setting.treeId,node])}return true},_onTreeDblclick:function(event,node){var setting=$.tree._getSetting(event.data.treeId);if($.tree._apply(setting.beforeDblClick,[setting.treeId,node],true)){$.tree._apply(setting.onDblClick,[event,setting.treeId,node])}return true},_onTreeContextmenu:function(event,node){var setting=$.tree._getSetting(event.data.treeId);if($.tree._apply(setting.beforeRightClick,[setting.treeId,node],true)){$.tree._apply(setting.onRightClick,[event,setting.treeId,node])}return(typeof setting.onRightClick)!="function"},_onCheckNode:function(event,node){if(node.chkDisabled===true){return false}var setting=$.tree._getSetting(event.data.treeId),checkedKey=setting.keyChecked;if($.tree._apply(setting.beforeCheck,[setting.treeId,node],true)==false){return true
}node[checkedKey]=!node[checkedKey];$.tree._checkNodeRelation(setting,node);var checkObj=$$(node,consts.id.CHECK,setting);$.tree._setChkClass(setting,checkObj,node);$.tree._repairParentChkClassWithSelf(setting,node);setting.treeObj.trigger(consts.event.CHECK,[event,setting.treeId,node]);return true},_onMouseoverCheck:function(event,node){if(node.chkDisabled===true){return false}var setting=$.tree._getSetting(event.data.treeId),checkObj=$$(node,consts.id.CHECK,setting);node.check_Focus=true;$.tree._setChkClass(setting,checkObj,node);return true},_onMouseoutCheck:function(event,node){if(node.chkDisabled===true){return false}var setting=$.tree._getSetting(event.data.treeId),checkObj=$$(node,consts.id.CHECK,setting);node.check_Focus=false;$.tree._setChkClass(setting,checkObj,node);return true},_onHoverOverNode:function(event,node){var setting=$.tree._getSetting(event.data.treeId),root=$.tree._getRoot(setting);if(root.curHoverNode!=node){$.tree._onHoverOutNode(event)}root.curHoverNode=node;$.tree._addHoverDom(setting,node)},_onHoverOutNode:function(event,node){var setting=$.tree._getSetting(event.data.treeId),root=$.tree._getRoot(setting);if(root.curHoverNode&&!$.tree._isSelectedNode(setting,root.curHoverNode)){$.tree._removeTreeDom(setting,root.curHoverNode);root.curHoverNode=null}},_onMousedownNode:function(eventMouseDown,_node){var i,l,setting=$.tree._getSetting(eventMouseDown.data.treeId),root=$.tree._getRoot(setting),roots=$.tree._getRoots();if(eventMouseDown.button==2||!setting.editable||(!setting.dragIsCopy&&!setting.dragIsMove)){return true}var target=eventMouseDown.target,_nodes=$.tree._getRoot(setting).curSelectedList,nodes=[];if(!$.tree._isSelectedNode(setting,_node)){nodes=[_node]}else{for(i=0,l=_nodes.length;i<l;i++){if(_nodes[i].editNameFlag&&$.tree._eqs(target.tagName,"input")&&target.getAttribute("treeNode"+consts.id.INPUT)!==null){return true}nodes.push(_nodes[i]);if(nodes[0].parentTId!==_nodes[i].parentTId){nodes=[_node];break}}}$.tree._editNodeBlur=true;
$.tree._cancelCurEditNode(setting);var doc=$(setting.treeObj.get(0).ownerDocument),body=$(setting.treeObj.get(0).ownerDocument.body),curNode,tmpArrow,tmpTarget,isOtherTree=false,targetSetting=setting,sourceSetting=setting,preNode,nextNode,preTmpTargetNodeId=null,preTmpMoveType=null,tmpTargetNodeId=null,moveType=consts.move.TYPE_INNER,mouseDownX=eventMouseDown.clientX,mouseDownY=eventMouseDown.clientY,startTime=(new Date()).getTime();if($.tree._uCanDo(setting)){doc.bind("mousemove",_docMouseMove)}function _docMouseMove(event){if(root.dragFlag==0&&Math.abs(mouseDownX-event.clientX)<setting.dragMinMoveSize&&Math.abs(mouseDownY-event.clientY)<setting.dragMinMoveSize){return true}var i,l,tmpNode,tmpDom,tmpNodes,childKey=setting.keyChildren;body.css("cursor","pointer");if(root.dragFlag==0){if($.tree._apply(setting.beforeDrag,[setting.treeId,nodes],true)==false){_docMouseUp(event);return true}for(i=0,l=nodes.length;i<l;i++){if(i==0){root.dragNodeShowBefore=[]}tmpNode=nodes[i];if(tmpNode.isParent&&tmpNode.open){$.tree._expandCollapseNode(setting,tmpNode,!tmpNode.open);root.dragNodeShowBefore[tmpNode.tId]=true}else{root.dragNodeShowBefore[tmpNode.tId]=false}}root.dragFlag=1;roots.showHoverDom=false;$.tree._showIfameMask(setting,true);var isOrder=true,lastIndex=-1;if(nodes.length>1){var pNodes=nodes[0].parentTId?nodes[0].getParentNode()[childKey]:$.tree._getNodes(setting);tmpNodes=[];for(i=0,l=pNodes.length;i<l;i++){if(root.dragNodeShowBefore[pNodes[i].tId]!==undefined){if(isOrder&&lastIndex>-1&&(lastIndex+1)!==i){isOrder=false}tmpNodes.push(pNodes[i]);lastIndex=i}if(nodes.length===tmpNodes.length){nodes=tmpNodes;break}}}if(isOrder){preNode=nodes[0].getPreNode();nextNode=nodes[nodes.length-1].getNextNode()}curNode=$$("<ul class='treeDragUL'></ul>",setting);for(i=0,l=nodes.length;i<l;i++){tmpNode=nodes[i];tmpNode.editNameFlag=false;$.tree._selectNode(setting,tmpNode,i>0);$.tree._removeTreeDom(setting,tmpNode);if(i>setting.dragMaxShowNodeNum-1){continue}tmpDom=$$("<li id='"+tmpNode.tId+"_tmp'></li>",setting);
tmpDom.append($$(tmpNode,consts.id.A,setting).clone());tmpDom.css("padding","0");tmpDom.children("#"+tmpNode.tId+consts.id.A).removeClass(consts.node.CURSELECTED);curNode.append(tmpDom);if(i==setting.dragMaxShowNodeNum-1){tmpDom=$$("<li id='"+tmpNode.tId+"_moretmp'><a>  ...  </a></li>",setting);curNode.append(tmpDom)}}curNode.attr("id",nodes[0].tId+consts.id.UL+"_tmp");curNode.addClass(setting.treeObj.attr("class"));curNode.appendTo(body);tmpArrow=$$("<span class='tmpTreeMove_arrow'></span>",setting);tmpArrow.attr("id","treeMove_arrow_tmp");tmpArrow.appendTo(body);setting.treeObj.trigger(consts.event.DRAG,[event,setting.treeId,nodes])}if(root.dragFlag==1){if(tmpTarget&&tmpArrow.attr("id")==event.target.id&&tmpTargetNodeId&&(event.clientX+doc.scrollLeft()+2)>($("#"+tmpTargetNodeId+consts.id.A,tmpTarget).offset().left)){var xT=$("#"+tmpTargetNodeId+consts.id.A,tmpTarget);event.target=(xT.length>0)?xT.get(0):event.target}else{if(tmpTarget){tmpTarget.removeClass(consts.node.TMPTARGET_TREE);if(tmpTargetNodeId){$("#"+tmpTargetNodeId+consts.id.A,tmpTarget).removeClass(consts.node.TMPTARGET_NODE+"_"+consts.move.TYPE_PREV).removeClass(consts.node.TMPTARGET_NODE+"_"+_final.move.TYPE_NEXT).removeClass(consts.node.TMPTARGET_NODE+"_"+_final.move.TYPE_INNER)}}}tmpTarget=null;tmpTargetNodeId=null;isOtherTree=false;targetSetting=setting;var settings=$.tree._getSettings();for(var s in settings){if(settings[s].treeId&&settings[s].editable&&settings[s].treeId!=setting.treeId&&(event.target.id==settings[s].treeId||$(event.target).parents("#"+settings[s].treeId).length>0)){isOtherTree=true;targetSetting=settings[s]}}var docScrollTop=doc.scrollTop(),docScrollLeft=doc.scrollLeft(),treeOffset=targetSetting.treeObj.offset(),scrollHeight=targetSetting.treeObj.get(0).scrollHeight,scrollWidth=targetSetting.treeObj.get(0).scrollWidth,dTop=(event.clientY+docScrollTop-treeOffset.top),dBottom=(targetSetting.treeObj.height()+treeOffset.top-event.clientY-docScrollTop),dLeft=(event.clientX+docScrollLeft-treeOffset.left),dRight=(targetSetting.treeObj.width()+treeOffset.left-event.clientX-docScrollLeft),isTop=(dTop<setting.dragBorderMax&&dTop>setting.dragBorderMin),isBottom=(dBottom<setting.dragBorderMax&&dBottom>setting.dragBorderMin),isLeft=(dLeft<setting.dragBorderMax&&dLeft>setting.dragBorderMin),isRight=(dRight<setting.dragBorderMax&&dRight>setting.dragBorderMin),isTreeInner=dTop>setting.dragBorderMin&&dBottom>setting.dragBorderMin&&dLeft>setting.dragBorderMin&&dRight>setting.dragBorderMin,isTreeTop=(isTop&&targetSetting.treeObj.scrollTop()<=0),isTreeBottom=(isBottom&&(targetSetting.treeObj.scrollTop()+targetSetting.treeObj.height()+10)>=scrollHeight),isTreeLeft=(isLeft&&targetSetting.treeObj.scrollLeft()<=0),isTreeRight=(isRight&&(targetSetting.treeObj.scrollLeft()+targetSetting.treeObj.width()+10)>=scrollWidth);
if(event.target&&$.tree._isChildOrSelf(event.target,targetSetting.treeId)){var targetObj=event.target;while(targetObj&&targetObj.tagName&&!$.tree._eqs(targetObj.tagName,"li")&&targetObj.id!=targetSetting.treeId){targetObj=targetObj.parentNode}var canMove=true;for(i=0,l=nodes.length;i<l;i++){tmpNode=nodes[i];if(targetObj.id===tmpNode.tId){canMove=false;break}else{if($$(tmpNode,setting).find("#"+targetObj.id).length>0){canMove=false;break}}}if(canMove&&event.target&&$.tree._isChildOrSelf(event.target,targetObj.id+consts.id.A)){tmpTarget=$(targetObj);tmpTargetNodeId=targetObj.id}}tmpNode=nodes[0];if(isTreeInner&&$.tree._isChildOrSelf(event.target,targetSetting.treeId)){if(!tmpTarget&&(event.target.id==targetSetting.treeId||isTreeTop||isTreeBottom||isTreeLeft||isTreeRight)&&(isOtherTree||(!isOtherTree&&tmpNode.parentTId))){tmpTarget=targetSetting.treeObj}if(isTop){targetSetting.treeObj.scrollTop(targetSetting.treeObj.scrollTop()-10)}else{if(isBottom){targetSetting.treeObj.scrollTop(targetSetting.treeObj.scrollTop()+10)}}if(isLeft){targetSetting.treeObj.scrollLeft(targetSetting.treeObj.scrollLeft()-10)}else{if(isRight){targetSetting.treeObj.scrollLeft(targetSetting.treeObj.scrollLeft()+10)}}if(tmpTarget&&tmpTarget!=targetSetting.treeObj&&tmpTarget.offset().left<targetSetting.treeObj.offset().left){targetSetting.treeObj.scrollLeft(targetSetting.treeObj.scrollLeft()+tmpTarget.offset().left-targetSetting.treeObj.offset().left)}}curNode.css({top:(event.clientY+docScrollTop+3)+"px",left:(event.clientX+docScrollLeft+3)+"px"});var dX=0;var dY=0;if(tmpTarget&&tmpTarget.attr("id")!=targetSetting.treeId){var tmpTargetNode=tmpTargetNodeId==null?null:$.tree._getNodeCache(targetSetting,tmpTargetNodeId),isCopy=((event.ctrlKey||event.metaKey)&&setting.dragIsMove&&setting.dragIsCopy)||(!setting.dragIsMove&&setting.dragIsCopy),isPrev=!!(preNode&&tmpTargetNodeId===preNode.tId),isNext=!!(nextNode&&tmpTargetNodeId===nextNode.tId),isInner=(tmpNode.parentTId&&tmpNode.parentTId==tmpTargetNodeId),canPrev=(isCopy||!isNext)&&$.tree._apply(targetSetting.dragPrev,[targetSetting.treeId,nodes,tmpTargetNode],!!targetSetting.dragPrev),canNext=(isCopy||!isPrev)&&$.tree._apply(targetSetting.dragNext,[targetSetting.treeId,nodes,tmpTargetNode],!!targetSetting.dragNext),canInner=(isCopy||!isInner)&&!(targetSetting.keepLeaf&&!tmpTargetNode.isParent)&&$.tree._apply(targetSetting.dragInner,[targetSetting.treeId,nodes,tmpTargetNode],!!targetSetting.dragInner);
if(!canPrev&&!canNext&&!canInner){tmpTarget=null;tmpTargetNodeId="";moveType=consts.move.TYPE_INNER;tmpArrow.css({display:"none"});if(window.TreeMoveTimer){clearTimeout(window.TreeMoveTimer);window.TreeMoveTargetNodeTId=null}}else{var tmpTargetA=$("#"+tmpTargetNodeId+consts.id.A,tmpTarget),tmpNextA=tmpTargetNode.isLastNode?null:$("#"+tmpTargetNode.getNextNode().tId+consts.id.A,tmpTarget.next()),tmpTop=tmpTargetA.offset().top,tmpLeft=tmpTargetA.offset().left,prevPercent=canPrev?(canInner?0.25:(canNext?0.5:1)):-1,nextPercent=canNext?(canInner?0.75:(canPrev?0.5:0)):-1,dY_percent=(event.clientY+docScrollTop-tmpTop)/tmpTargetA.height();if((prevPercent==1||dY_percent<=prevPercent&&dY_percent>=-0.2)&&canPrev){dX=1-tmpArrow.width();dY=tmpTop-tmpArrow.height()/2;moveType=consts.move.TYPE_PREV}else{if((nextPercent==0||dY_percent>=nextPercent&&dY_percent<=1.2)&&canNext){dX=1-tmpArrow.width();dY=(tmpNextA==null||(tmpTargetNode.isParent&&tmpTargetNode.open))?(tmpTop+tmpTargetA.height()-tmpArrow.height()/2):(tmpNextA.offset().top-tmpArrow.height()/2);moveType=consts.move.TYPE_NEXT}else{dX=5-tmpArrow.width();dY=tmpTop;moveType=consts.move.TYPE_INNER}}tmpArrow.css({display:"block",top:dY+"px",left:(tmpLeft+dX)+"px"});if(setting.dragStyle=="line"){if(consts.move.TYPE_INNER==moveType){tmpArrow.removeClass("preNext_line").addClass("inner_line")}else{tmpArrow.removeClass("inner_line").addClass("preNext_line")}}tmpTargetA.addClass(consts.node.TMPTARGET_NODE+"_"+moveType);if(preTmpTargetNodeId!=tmpTargetNodeId||preTmpMoveType!=moveType){startTime=(new Date()).getTime()}if(tmpTargetNode&&tmpTargetNode.isParent&&moveType==consts.move.TYPE_INNER){var startTimer=true;if(window.TreeMoveTimer&&window.TreeMoveTargetNodeTId!==tmpTargetNode.tId){clearTimeout(window.TreeMoveTimer);window.TreeMoveTargetNodeTId=null}else{if(window.TreeMoveTimer&&window.TreeMoveTargetNodeTId===tmpTargetNode.tId){startTimer=false}}if(startTimer){window.TreeMoveTimer=setTimeout(function(){if(moveType!=consts.move.TYPE_INNER){return
}if(tmpTargetNode&&tmpTargetNode.isParent&&!tmpTargetNode.open&&(new Date()).getTime()-startTime>targetSetting.dragAutoOpenTime&&$.tree._apply(targetSetting.beforeDragOpen,[targetSetting.treeId,tmpTargetNode],true)){$.tree._switchNode(targetSetting,tmpTargetNode);if(targetSetting.dragAutoExpandTrigger){targetSetting.treeObj.trigger(consts.event.EXPAND,[targetSetting.treeId,tmpTargetNode])}}},targetSetting.dragAutoOpenTime+50);window.TreeMoveTargetNodeTId=tmpTargetNode.tId}}}}else{moveType=consts.move.TYPE_INNER;if(tmpTarget&&$.tree._apply(targetSetting.dragInner,[targetSetting.treeId,nodes,null],!!targetSetting.dragInner)){tmpTarget.addClass(consts.node.TMPTARGET_TREE)}else{tmpTarget=null}tmpArrow.css({display:"none"});if(window.TreeMoveTimer){clearTimeout(window.TreeMoveTimer);window.TreeMoveTargetNodeTId=null}}preTmpTargetNodeId=tmpTargetNodeId;preTmpMoveType=moveType;setting.treeObj.trigger(consts.event.DRAGMOVE,[event,setting.treeId,nodes])}return false}doc.bind("mouseup",_docMouseUp);function _docMouseUp(event){if(window.TreeMoveTimer){clearTimeout(window.TreeMoveTimer);window.TreeMoveTargetNodeTId=null}preTmpTargetNodeId=null;preTmpMoveType=null;doc.unbind("mousemove",_docMouseMove);doc.unbind("mouseup",_docMouseUp);doc.unbind("selectstart",_docSelect);body.css("cursor","auto");if(tmpTarget){tmpTarget.removeClass(consts.node.TMPTARGET_TREE);if(tmpTargetNodeId){$("#"+tmpTargetNodeId+consts.id.A,tmpTarget).removeClass(consts.node.TMPTARGET_NODE+"_"+consts.move.TYPE_PREV).removeClass(consts.node.TMPTARGET_NODE+"_"+_final.move.TYPE_NEXT).removeClass(consts.node.TMPTARGET_NODE+"_"+_final.move.TYPE_INNER)}}$.tree._showIfameMask(setting,false);roots.showHoverDom=true;if(root.dragFlag==0){return}root.dragFlag=0;var i,l,tmpNode;for(i=0,l=nodes.length;i<l;i++){tmpNode=nodes[i];if(tmpNode.isParent&&root.dragNodeShowBefore[tmpNode.tId]&&!tmpNode.open){$.tree._expandCollapseNode(setting,tmpNode,!tmpNode.open);delete root.dragNodeShowBefore[tmpNode.tId]}}if(curNode){curNode.remove()
}if(tmpArrow){tmpArrow.remove()}var isCopy=((event.ctrlKey||event.metaKey)&&setting.dragIsMove&&setting.dragIsCopy)||(!setting.dragIsMove&&setting.dragIsCopy);if(!isCopy&&tmpTarget&&tmpTargetNodeId&&nodes[0].parentTId&&tmpTargetNodeId==nodes[0].parentTId&&moveType==consts.move.TYPE_INNER){tmpTarget=null}if(tmpTarget){var dragTargetNode=tmpTargetNodeId==null?null:$.tree._getNodeCache(targetSetting,tmpTargetNodeId);if($.tree._apply(setting.beforeDrop,[targetSetting.treeId,nodes,dragTargetNode,moveType,isCopy],true)==false){$.tree._selectNodes(sourceSetting,nodes);return}var newNodes=isCopy?$.tree._clone(nodes):nodes;function dropCallback(){if(isOtherTree){if(!isCopy){for(var i=0,l=nodes.length;i<l;i++){$.tree._removeNode(setting,nodes[i])}}if(moveType==consts.move.TYPE_INNER){$.tree._addNodes(targetSetting,dragTargetNode,newNodes)}else{$.tree._addNodes(targetSetting,dragTargetNode.getParentNode(),newNodes);if(moveType==consts.move.TYPE_PREV){for(i=0,l=newNodes.length;i<l;i++){$.tree._moveNode(targetSetting,dragTargetNode,newNodes[i],moveType,false)}}else{for(i=-1,l=newNodes.length-1;i<l;l--){$.tree._moveNode(targetSetting,dragTargetNode,newNodes[l],moveType,false)}}}}else{if(isCopy&&moveType==consts.move.TYPE_INNER){$.tree._addNodes(targetSetting,dragTargetNode,newNodes)}else{if(isCopy){$.tree._addNodes(targetSetting,dragTargetNode.getParentNode(),newNodes)}if(moveType!=consts.move.TYPE_NEXT){for(i=0,l=newNodes.length;i<l;i++){$.tree._moveNode(targetSetting,dragTargetNode,newNodes[i],moveType,false)}}else{for(i=-1,l=newNodes.length-1;i<l;l--){$.tree._moveNode(targetSetting,dragTargetNode,newNodes[l],moveType,false)}}}}$.tree._selectNodes(targetSetting,newNodes);$$(newNodes[0],setting).focus().blur();setting.treeObj.trigger(consts.event.DROP,[event,targetSetting.treeId,newNodes,dragTargetNode,moveType,isCopy])}if(moveType==consts.move.TYPE_INNER&&$.tree._canAsync(targetSetting,dragTargetNode)){$.tree._asyncNode(targetSetting,dragTargetNode,false,dropCallback)}else{dropCallback()
}}else{$.tree._selectNodes(sourceSetting,nodes);setting.treeObj.trigger(consts.event.DROP,[event,setting.treeId,nodes,null,null,null])}}doc.bind("selectstart",_docSelect);function _docSelect(){return false}if(eventMouseDown.preventDefault){eventMouseDown.preventDefault()}return true},_apply:function(fun,param,defaultValue){if(fun==defaultValue&&!$.isFunction(fun)){return defaultValue}if(typeof(fun)=="undefined"||fun==null){return defaultValue}var _fn=$.coral.toFunction(fun);if(!$.isFunction(_fn)){return defaultValue}var ret=_fn.apply(coralTree,param?param:[]);return typeof(ret)=="undefined"?defaultValue:ret},_canAsync:function(setting,node){var childKey=setting.keyChildren;return(setting.asyncEnable&&node&&node.isParent&&!(node.zAsync||(node[childKey]&&node[childKey].length>0)))},_clone:function(obj){if(obj===null){return null}var o=$.tree._isArray(obj)?[]:{};for(var i in obj){o[i]=(obj[i] instanceof Date)?new Date(obj[i].getTime()):(typeof obj[i]==="object"?arguments.callee(obj[i]):obj[i])}return o},_eqs:function(str1,str2){return str1.toLowerCase()===str2.toLowerCase()},_isArray:function(arr){return Object.prototype.toString.apply(arr)==="[object Array]"},_$:function(node,exp,setting){if(!!exp&&typeof exp!="string"){setting=exp;exp=""}if(typeof node=="string"){return $(node,setting?setting.treeObj.get(0).ownerDocument:null)}else{return $("#"+node.tId+exp,setting?setting.treeObj:null)}},_getMDom:function(setting,curDom,targetExpr){if(!curDom){return null}while(curDom&&curDom.id!==setting.treeId){for(var i=0,l=targetExpr.length;curDom.tagName&&i<l;i++){if($.tree._eqs(curDom.tagName,targetExpr[i].tagName)&&curDom.getAttribute(targetExpr[i].attrName)!==null){return curDom}}curDom=curDom.parentNode}return null},_getNodeMainDom:function(target){return($(target).parent("li").get(0)||$(target).parentsUntil("li").parent().get(0))},_isChildOrSelf:function(dom,parentId){return($(dom).closest("#"+parentId).length>0)},_uCanDo:function(setting,e){return true},_getAbs:function(obj){var oRect=obj.getBoundingClientRect(),scrollTop=document.body.scrollTop+document.documentElement.scrollTop,scrollLeft=document.body.scrollLeft+document.documentElement.scrollLeft;
return[oRect.left+scrollLeft,oRect.top+scrollTop]},_inputFocus:function(inputObj){if(inputObj.get(0)){inputObj.focus();$.tree._setCursorPosition(inputObj.get(0),inputObj.val().length)}},_inputSelect:function(inputObj){if(inputObj.get(0)){inputObj.focus();inputObj.select()}},_setCursorPosition:function(obj,pos){if(obj.setSelectionRange){obj.focus();obj.setSelectionRange(pos,pos)}else{if(obj.createTextRange){var range=obj.createTextRange();range.collapse(true);range.moveEnd("character",pos);range.moveStart("character",pos);range.select()}}},_showIfameMask:function(setting,showSign){var root=$.tree._getRoot(setting);while(root.dragMaskList.length>0){root.dragMaskList[0].remove();root.dragMaskList.shift()}if(showSign){var iframeList=$$("iframe",setting);for(var i=0,l=iframeList.length;i<l;i++){var obj=iframeList.get(i),r=$.tree._getAbs(obj),dragMask=$$("<div id='treeMask_"+i+"' class='treeMask' style='top:"+r[1]+"px; left:"+r[0]+"px; width:"+obj.offsetWidth+"px; height:"+obj.offsetHeight+"px;'></div>",setting);dragMask.appendTo($$("body",setting));root.dragMaskList.push(dragMask)}}},_addNodes:function(setting,parentNode,newNodes,isSilent){if(setting.keepLeaf&&parentNode&&!parentNode.isParent){return}if(!$.tree._isArray(newNodes)){newNodes=[newNodes]}if(setting.simpleDataEnable){newNodes=$.tree._transformToTreeFormat(setting,newNodes)}if(parentNode){var target_switchObj=$$(parentNode,consts.id.SWITCH,setting),target_icoObj=$$(parentNode,consts.id.ICON,setting),target_ulObj=$$(parentNode,consts.id.UL,setting);if(!parentNode.open){$.tree._replaceSwitchClass(parentNode,target_switchObj,consts.folder.CLOSE);$.tree._replaceIcoClass(parentNode,target_icoObj,consts.folder.CLOSE);parentNode.open=false;target_ulObj.css({display:"none"})}$.tree._addNodesData(setting,parentNode,newNodes);$.tree._createNodes(setting,parentNode.level+1,newNodes,parentNode);if(!isSilent){$.tree._expandCollapseParentNode(setting,parentNode,true)}}else{$.tree._addNodesData(setting,$.tree._getRoot(setting),newNodes);
$.tree._createNodes(setting,0,newNodes,null)}},_appendNodes:function(setting,level,nodes,parentNode,initFlag,openFlag){if(!nodes){return[]}var html=[],childKey=setting.keyChildren;for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i];if(initFlag){var tmpPNode=(parentNode)?parentNode:$.tree._getRoot(setting),tmpPChild=tmpPNode[childKey],isFirstNode=((tmpPChild.length==nodes.length)&&(i==0)),isLastNode=(i==(nodes.length-1));$.tree._initNode(setting,level,node,parentNode,isFirstNode,isLastNode,openFlag);$.tree._addNodeCache(setting,node)}var childHtml=[];if(node[childKey]&&node[childKey].length>0){childHtml=$.tree._appendNodes(setting,level+1,node[childKey],node,initFlag,openFlag&&node.open)}if(openFlag){$.tree._makeDOMNodeMainBefore(html,setting,node);$.tree._makeDOMNodeLine(html,setting,node);$.tree._getBeforeA(setting,node,html);$.tree._makeDOMNodeNameBefore(html,setting,node);$.tree._getInnerBeforeA(setting,node,html);$.tree._makeDOMNodeIcon(html,setting,node);$.tree._getInnerAfterA(setting,node,html);$.tree._makeDOMNodeNameAfter(html,setting,node);$.tree._getAfterA(setting,node,html);if(node.isParent&&node.open){$.tree._makeUlHtml(setting,node,html,childHtml.join(""))}$.tree._makeDOMNodeMainAfter(html,setting,node);$.tree._addCreatedNode(setting,node)}}return html},_appendParentULDom:function(setting,node){var html=[],nObj=$$(node,setting);if(!nObj.get(0)&&!!node.parentTId){$.tree._appendParentULDom(setting,node.getParentNode());nObj=$$(node,setting)}var ulObj=$$(node,consts.id.UL,setting);if(ulObj.get(0)){ulObj.remove()}var childKey=setting.keyChildren,childHtml=$.tree._appendNodes(setting,node.level+1,node[childKey],node,false,true);$.tree._makeUlHtml(setting,node,html,childHtml.join(""));nObj.append(html.join(""))},_asyncNode:function(setting,node,isSilent,callback,opts){var opts=opts||{};var i,l;if(node&&!node.isParent){$.tree._apply(callback);return false}else{if(node&&node.isAjaxing){return false}else{if($.tree._apply(setting.beforeAsync,[setting.treeId,node],true)==false){$.tree._apply(callback);
return false}}}if(node){node.isAjaxing=true;var icoObj=$$(node,consts.id.ICON,setting);icoObj.attr({style:"","class":consts.className.BUTTON+" "+consts.className.ICO_LOADING})}var tmpParam={},asyncOtherParam=opts.asyncOtherParam||setting.asyncOtherParam;var autoParams=setting.asyncAutoParam.split(",");for(i=0,l=autoParams.length;node&&i<l;i++){var pKey=autoParams[i].split("="),spKey=pKey;if(pKey.length>1){spKey=pKey[1];pKey=pKey[0]}tmpParam[spKey]=node[pKey]}if($.tree._isArray(asyncOtherParam)){for(i=0,l=asyncOtherParam.length;i<l;i+=2){tmpParam[asyncOtherParam[i]]=asyncOtherParam[i+1]}}else{for(var p in asyncOtherParam){tmpParam[p]=asyncOtherParam[p]}}var _tmpV=$.tree._getRoot(setting)._ver,asyncUrl=$.tree._apply(setting.asyncUrl,[setting.treeId,node],setting.asyncUrl);$.ajax({contentType:setting.asyncContentType,type:setting.asyncType,url:asyncUrl,data:tmpParam,dataType:setting.asyncDataType,success:function(msg){if(_tmpV!=$.tree._getRoot(setting)._ver){return}var newNodes=[];try{if(!msg||msg.length==0){newNodes=[]}else{if(typeof msg=="string"){newNodes=eval("("+msg+")")}else{newNodes=msg}}}catch(err){newNodes=msg}if(node){node.isAjaxing=null;node.zAsync=true}$.tree._setNodeLineIcos(setting,node);if(newNodes&&newNodes!==""){newNodes=$.tree._apply(setting.asyncDataFilter,[setting.treeId,node,newNodes],newNodes);$.tree._addNodes(setting,node,!!newNodes?$.tree._clone(newNodes):[],!!isSilent)}else{$.tree._addNodes(setting,node,[],!!isSilent)}if(opts.onLoad){$.tree._apply(opts.onLoad,[setting.treeId,node,msg])}else{setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg])}$.tree._apply(callback)},error:function(XMLHttpRequest,textStatus,errorThrown){if(_tmpV!=$.tree._getRoot(setting)._ver){return}if(node){node.isAjaxing=null}$.tree._setNodeLineIcos(setting,node);setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,XMLHttpRequest,textStatus,errorThrown])}});return true},_addEditBtn:function(setting,node){if(node.editNameFlag||$$(node,consts.id.EDIT,setting).length>0){return
}if(!$.tree._apply(setting.showRenameBtn,[setting.treeId,node],setting.showRenameBtn)){return}var aObj=$$(node,consts.id.A,setting),editStr="<span class='"+consts.className.BUTTON+" edit' id='"+node.tId+consts.id.EDIT+"' title='"+$.tree._apply(setting.renameTitle,[setting.treeId,node],setting.renameTitle)+"' treeNode"+consts.id.EDIT+" style='display:none;'></span>";aObj.append(editStr);$$(node,consts.id.EDIT,setting).bind("click",function(){if(!$.tree._uCanDo(setting)||$.tree._apply(setting.beforeEditName,[setting.treeId,node],true)==false){return false}$.tree._editNode(setting,node);return false}).show()},_addRemoveBtn:function(setting,node){if(node.editNameFlag||$$(node,consts.id.REMOVE,setting).length>0){return}if(!$.tree._apply(setting.showRemoveBtn,[setting.treeId,node],setting.showRemoveBtn)){return}var aObj=$$(node,consts.id.A,setting),removeStr="<span class='"+consts.className.BUTTON+" remove' id='"+node.tId+consts.id.REMOVE+"' title='"+$.tree._apply(setting.removeTitle,[setting.treeId,node],setting.removeTitle)+"' treeNode"+consts.id.REMOVE+" style='display:none;'></span>";aObj.append(removeStr);$$(node,consts.id.REMOVE,setting).bind("click",function(){if(!$.tree._uCanDo(setting)||$.tree._apply(setting.beforeRemove,[setting.treeId,node],true)==false){return false}$.tree._removeNode(setting,node);setting.treeObj.trigger(consts.event.REMOVE,[setting.treeId,node]);return false}).bind("mousedown",function(eventMouseDown){return true}).show()},_addHoverDom:function(setting,node){if($.tree._getRoots().showHoverDom){node.isHover=true;if(setting.editable){$.tree._addEditBtn(setting,node);$.tree._addRemoveBtn(setting,node)}$.tree._apply(setting.addHoverDom,[setting.treeId,node])}},_cancelPreSelectedNode:function(setting,node){var list=$.tree._getRoot(setting).curSelectedList;for(var i=0,j=list.length-1;j>=i;j--){if(!node||node===list[j]){$$(list[j],consts.id.A,setting).removeClass(consts.node.CURSELECTED);if(node){$.tree._removeSelectedNode(setting,node);break}}}if(!node){$.tree._getRoot(setting).curSelectedList=[]
}},_createNodeCallback:function(setting){if(!!setting.onNodeCreated||!!setting.addDiyDom){var root=$.tree._getRoot(setting);while(root.createdNodes.length>0){var node=root.createdNodes.shift();$.tree._apply(setting.addDiyDom,[setting.treeId,node]);if(!!setting.onNodeCreated){setting.treeObj.trigger(consts.event.NODECREATED,[setting.treeId,node])}}}},_createRootNodes:function(setting,nodes){if(setting.isInit){if(setting.showRootNode==true){if(setting.rootNode&&typeof(setting.rootNode)!=="boolean"){setting.rootNode.children=nodes;nodes=[setting.rootNode]}}else{if(typeof(setting.rootNode)=="boolean"&&setting.rootNode&&nodes.length==1){if(nodes[0].children&&nodes[0].children.length>0){nodes=nodes[0].children}else{nodes=[]}}}}return nodes},_createNodes:function(setting,level,nodes,parentNode){nodes=$.tree._createRootNodes(setting,nodes);if(!nodes||nodes.length==0){return}var root=$.tree._getRoot(setting),childKey=setting.keyChildren,openFlag=!parentNode||parentNode.open||!!$$(parentNode[childKey][0],setting).get(0);root.createdNodes=[];var treeHtml=$.tree._appendNodes(setting,level,nodes,parentNode,true,openFlag);if(!parentNode){setting.treeObj.append(treeHtml.join(""))}else{var ulObj=$$(parentNode,consts.id.UL,setting);if(ulObj.get(0)){ulObj.append(treeHtml.join(""))}}setting.isInit=false;$.tree._createNodeCallback(setting)},_checkNodeRelation:function(setting,node){var pNode,i,l,childKey=setting.keyChildren,checkedKey=setting.keyChecked,r=consts.radio;if(setting.chkStyle==r.STYLE){var checkedList=$.tree._getRadioCheckedList(setting);if(node[checkedKey]){if(setting.radioType==r.TYPE_ALL){for(i=checkedList.length-1;i>=0;i--){pNode=checkedList[i];if(pNode[checkedKey]&&pNode!=node){pNode[checkedKey]=false;checkedList.splice(i,1);$.tree._setChkClass(setting,$$(pNode,consts.id.CHECK,setting),pNode);if(pNode.parentTId!=node.parentTId){$.tree._repairParentChkClassWithSelf(setting,pNode)}}}checkedList.push(node)}else{var parentNode=(node.parentTId)?node.getParentNode():$.tree._getRoot(setting);
for(i=0,l=parentNode[childKey].length;i<l;i++){pNode=parentNode[childKey][i];if(pNode[checkedKey]&&pNode!=node){pNode[checkedKey]=false;$.tree._setChkClass(setting,$$(pNode,consts.id.CHECK,setting),pNode)}}}}else{if(setting.radioType==r.TYPE_ALL){for(i=0,l=checkedList.length;i<l;i++){if(node==checkedList[i]){checkedList.splice(i,1);break}}}}}else{if(node[checkedKey]&&(!node[childKey]||node[childKey].length==0||setting.chkboxType.Y.indexOf("s")>-1)){$.tree._setSonNodeCheckBox(setting,node,true)}if(!node[checkedKey]&&(!node[childKey]||node[childKey].length==0||setting.chkboxType.N.indexOf("s")>-1)){$.tree._setSonNodeCheckBox(setting,node,false)}if(node[checkedKey]&&setting.chkboxType.Y.indexOf("p")>-1){$.tree._setParentNodeCheckBox(setting,node,true)}if(!node[checkedKey]&&setting.chkboxType.N.indexOf("p")>-1){$.tree._setParentNodeCheckBox(setting,node,false)}}},_cancelCurEditNode:function(setting,forceName,isCancel){var root=$.tree._getRoot(setting),nameKey=setting.keyName,node=root.curEditNode;if(node){var inputObj=root.curEditInput,newName=forceName?forceName:(isCancel?node[nameKey]:inputObj.val());if($.tree._apply(setting.beforeReName,[setting.treeId,node,newName,isCancel],true)===false){return false}else{node[nameKey]=newName;setting.treeObj.trigger(consts.event.RENAME,[setting.treeId,node,isCancel])}var aObj=$$(node,consts.id.A,setting);aObj.removeClass(consts.node.CURSELECTED_EDIT);inputObj.unbind();$.tree._setNodeName(setting,node);node.editNameFlag=false;root.curEditNode=null;root.curEditInput=null;$.tree._selectNode(setting,node,false)}root.noSelection=true;return true},_editNode:function(setting,node){var root=$.tree._getRoot(setting);$.tree._editNodeBlur=false;if($.tree._isSelectedNode(setting,node)&&root.curEditNode==node&&node.editNameFlag){setTimeout(function(){$.tree._inputFocus(root.curEditInput)},0);return}var nameKey=setting.keyName;node.editNameFlag=true;$.tree._removeTreeDom(setting,node);$.tree._cancelCurEditNode(setting);$.tree._selectNode(setting,node,false);
$$(node,consts.id.SPAN,setting).html("<input type=text class='rename' id='"+node.tId+consts.id.INPUT+"' treeNode"+consts.id.INPUT+" >");var inputObj=$$(node,consts.id.INPUT,setting);inputObj.attr("value",node[nameKey]);if(setting.editNameSelectAll){$.tree._inputSelect(inputObj)}else{$.tree._inputFocus(inputObj)}inputObj.bind("blur",function(event){if(!$.tree._editNodeBlur){$.tree._cancelCurEditNode(setting)}}).bind("keydown",function(event){if(event.keyCode=="13"){$.tree._editNodeBlur=true;$.tree._cancelCurEditNode(setting)}else{if(event.keyCode=="27"){$.tree._cancelCurEditNode(setting,null,true)}}}).bind("click",function(event){return false}).bind("dblclick",function(event){return false});$$(node,consts.id.A,setting).addClass(consts.node.CURSELECTED_EDIT);root.curEditInput=inputObj;root.noSelection=false;root.curEditNode=node},_destroy:function(setting){if(!setting){return}$.tree._initCache(setting);$.tree._initRoot(setting);$.tree._unbindTree(setting);$.tree._unbindEvent(setting);setting.treeObj.empty();delete settings[setting.treeId]},_expandCollapseNode:function(setting,node,expandFlag,animateFlag,callback){var root=$.tree._getRoot(setting),childKey=setting.keyChildren;if(!node){$.tree._apply(callback,[]);return}if(root.expandTriggerFlag){var _callback=callback;callback=function(){if(_callback){_callback()}if(node.open){setting.treeObj.trigger(consts.event.EXPAND,[setting.treeId,node])}else{setting.treeObj.trigger(consts.event.COLLAPSE,[setting.treeId,node])}};root.expandTriggerFlag=false}if(!node.open&&node.isParent&&((!$$(node,consts.id.UL,setting).get(0))||(node[childKey]&&node[childKey].length>0&&!$$(node[childKey][0],setting).get(0)))){$.tree._appendParentULDom(setting,node);$.tree._createNodeCallback(setting)}if(node.open==expandFlag){$.tree._apply(callback,[]);return}var ulObj=$$(node,consts.id.UL,setting),switchObj=$$(node,consts.id.SWITCH,setting),icoObj=$$(node,consts.id.ICON,setting);if(node.isParent){node.open=!node.open;if(node.iconOpen&&node.iconClose){icoObj.attr("style",$.tree._makeNodeIcoStyle(setting,node))
}if(node.open){$.tree._replaceSwitchClass(node,switchObj,consts.folder.OPEN);$.tree._replaceIcoClass(node,icoObj,consts.folder.OPEN);if(animateFlag==false||setting.expandSpeed==""){ulObj.show();$.tree._apply(callback,[])}else{if(node[childKey]&&node[childKey].length>0){ulObj.slideDown(setting.expandSpeed,callback)}else{ulObj.show();$.tree._apply(callback,[])}}}else{$.tree._replaceSwitchClass(node,switchObj,consts.folder.CLOSE);$.tree._replaceIcoClass(node,icoObj,consts.folder.CLOSE);if(animateFlag==false||setting.expandSpeed==""||!(node[childKey]&&node[childKey].length>0)){ulObj.hide();$.tree._apply(callback,[])}else{ulObj.slideUp(setting.expandSpeed,callback)}}}else{$.tree._apply(callback,[])}},_expandCollapseParentNode:function(setting,node,expandFlag,animateFlag,callback){if(!node){return}if(!node.parentTId){$.tree._expandCollapseNode(setting,node,expandFlag,animateFlag,callback);return}else{$.tree._expandCollapseNode(setting,node,expandFlag,animateFlag)}if(node.parentTId){$.tree._expandCollapseParentNode(setting,node.getParentNode(),expandFlag,animateFlag,callback)}},_expandCollapseSonNode:function(setting,node,expandFlag,animateFlag,callback){var root=$.tree._getRoot(setting),childKey=setting.keyChildren,treeNodes=(node)?node[childKey]:root[childKey],selfAnimateSign=(node)?false:animateFlag,expandTriggerFlag=$.tree._getRoot(setting).expandTriggerFlag;$.tree._getRoot(setting).expandTriggerFlag=false;if(treeNodes){for(var i=0,l=treeNodes.length;i<l;i++){if(treeNodes[i]){$.tree._expandCollapseSonNode(setting,treeNodes[i],expandFlag,selfAnimateSign)}}}$.tree._getRoot(setting).expandTriggerFlag=expandTriggerFlag;$.tree._expandCollapseNode(setting,node,expandFlag,animateFlag,callback)},_makeDOMNodeIcon:function(html,setting,node){var nameStr=$.tree._getNodeName(setting,node),name=setting.nameIsHTML?nameStr:nameStr.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");html.push("<span id='",node.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",$.tree._makeNodeIcoClass(setting,node),"' style='",$.tree._makeNodeIcoStyle(setting,node),"'></span><span id='",node.tId,consts.id.SPAN,"'>",name,"</span>")
},_makeDOMNodeLine:function(html,setting,node){html.push("<span id='",node.tId,consts.id.SWITCH,"' title='' class='",$.tree._makeNodeLineClass(setting,node),"' treeNode",consts.id.SWITCH,"></span>")},_makeDOMNodeMainAfter:function(html,setting,node){html.push("</li>")},_makeDOMNodeMainBefore:function(html,setting,node){html.push("<li ",(node.hidden?"style='display:none;' ":""),"id='",node.tId,"' class='",consts.className.LEVEL,node.level,"' tabindex='0' hidefocus='true' treenode>")},_makeDOMNodeNameAfter:function(html,setting,node){html.push("</a>")},_makeDOMNodeNameBefore:function(html,setting,node){var title=$.tree._getNodeTitle(setting,node),url=$.tree._makeNodeUrl(setting,node),fontcss=$.tree._makeNodeFontCss(setting,node),fontStyle=[];for(var f in fontcss){fontStyle.push(f,":",fontcss[f],";")}html.push("<a id='",node.tId,consts.id.A,"' class='",consts.className.LEVEL,node.level,"' treeNode",consts.id.A,' onclick="',(node.click||""),'" ',((url!=null&&url.length>0)?"href='"+url+"'":"")," target='",$.tree._makeNodeTarget(node),"' style='",fontStyle.join(""),"'");if($.tree._apply(setting.showTitle,[setting.treeId,node],setting.showTitle)&&title){html.push("title='",title.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'")}html.push(">")},_makeNodeFontCss:function(setting,node){var fontCss=$.tree._apply(setting.fontCss,[setting.treeId,node],setting.fontCss);return(fontCss&&((typeof fontCss)!="function"))?fontCss:{}},_makeNodeIcoClass:function(setting,node){var icoCss=["ico"];if(!node.isAjaxing){icoCss[0]=(node.iconSkin?node.iconSkin+"_":"")+icoCss[0];if(node.isParent){icoCss.push(node.open?consts.folder.OPEN:consts.folder.CLOSE)}else{icoCss.push(consts.folder.DOCU)}}return consts.className.BUTTON+" "+icoCss.join("_")},_makeNodeIcoStyle:function(setting,node){var icoStyle=[];if(!node.isAjaxing){var icon=(node.isParent&&node.iconOpen&&node.iconClose)?(node.open?node.iconOpen:node.iconClose):node.icon;if(icon){icoStyle.push("background:url(",icon,") 0 0 no-repeat;")
}if(setting.showIcon==false||!$.tree._apply(setting.showIcon,[setting.treeId,node],true)){icoStyle.push("width:0px;height:0px;")}}return icoStyle.join("")},_makeNodeLineClass:function(setting,node){var lineClass=[];if(setting.showLine){if(node.level==0&&node.isFirstNode&&node.isLastNode){lineClass.push(consts.line.ROOT)}else{if(node.level==0&&node.isFirstNode){lineClass.push(consts.line.ROOTS)}else{if(node.isLastNode){lineClass.push(consts.line.BOTTOM)}else{lineClass.push(consts.line.CENTER)}}}}else{lineClass.push(consts.line.NOLINE)}if(node.isParent){lineClass.push(node.open?consts.folder.OPEN:consts.folder.CLOSE)}else{lineClass.push(consts.folder.DOCU)}return $.tree._makeNodeLineClassEx(node)+lineClass.join("_")},_makeNodeLineClassEx:function(node){return consts.className.BUTTON+" "+consts.className.LEVEL+node.level+" "+consts.className.SWITCH+" "},_makeNodeTarget:function(node){return(node.target||"_blank")},_makeNodeUrl:function(setting,node){var urlKey=setting.keyUrl;return node[urlKey]?node[urlKey]:null},_makeUlHtml:function(setting,node,html,content){html.push("<ul id='",node.tId,consts.id.UL,"' class='",consts.className.LEVEL,node.level," ",$.tree._makeUlLineClass(setting,node),"' style='display:",(node.open?"block":"none"),"'>");html.push(content);html.push("</ul>")},_makeUlLineClass:function(setting,node){return((setting.showLine&&!node.isLastNode)?consts.line.LINE:"")},_makeChkClass:function(setting,node){var checkedKey=setting.keyChecked,c=consts.checkbox,r=consts.radio,fullStyle="";if(node.chkDisabled===true){fullStyle=c.DISABLED}else{if(node.halfCheck){fullStyle=c.PART}else{if(setting.chkStyle==r.STYLE){fullStyle=(node.check_Child_State<1)?c.FULL:c.PART}else{fullStyle=node[checkedKey]?((node.check_Child_State===2||node.check_Child_State===-1)?c.FULL:c.PART):((node.check_Child_State<1)?c.FULL:c.PART)}}}var chkName=setting.chkStyle+"_"+(node[checkedKey]?c.TRUE:c.FALSE)+"_"+fullStyle;chkName=(node.check_Focus&&node.chkDisabled!==true)?chkName+"_"+c.FOCUS:chkName;
return consts.className.BUTTON+" "+c.DEFAULT+" "+chkName},_moveNode:function(setting,targetNode,node,moveType,animateFlag,isSilent){var root=$.tree._getRoot(setting),childKey=setting.keyChildren;if(targetNode==node){return}if(setting.keepLeaf&&targetNode&&!targetNode.isParent&&moveType==consts.move.TYPE_INNER){return}var oldParentNode=(node.parentTId?node.getParentNode():root),targetNodeIsRoot=(targetNode===null||targetNode==root);if(targetNodeIsRoot&&targetNode===null){targetNode=root}if(targetNodeIsRoot){moveType=consts.move.TYPE_INNER}var targetParentNode=(targetNode.parentTId?targetNode.getParentNode():root);if(moveType!=consts.move.TYPE_PREV&&moveType!=consts.move.TYPE_NEXT){moveType=consts.move.TYPE_INNER}if(moveType==consts.move.TYPE_INNER){if(targetNodeIsRoot){node.parentTId=null}else{if(!targetNode.isParent){targetNode.isParent=true;targetNode.open=!!targetNode.open;$.tree._setNodeLineIcos(setting,targetNode)}node.parentTId=targetNode.tId}}var targetObj,target_ulObj;if(targetNodeIsRoot){targetObj=setting.treeObj;target_ulObj=targetObj}else{if(!isSilent&&moveType==consts.move.TYPE_INNER){$.tree._expandCollapseNode(setting,targetNode,true,false)}else{if(!isSilent){$.tree._expandCollapseNode(setting,targetNode.getParentNode(),true,false)}}targetObj=$$(targetNode,setting);target_ulObj=$$(targetNode,consts.id.UL,setting);if(!!targetObj.get(0)&&!target_ulObj.get(0)){var ulstr=[];$.tree._makeUlHtml(setting,targetNode,ulstr,"");targetObj.append(ulstr.join(""))}target_ulObj=$$(targetNode,consts.id.UL,setting)}var nodeDom=$$(node,setting);if(!nodeDom.get(0)){nodeDom=$.tree._appendNodes(setting,node.level,[node],null,false,true).join("")}else{if(!targetObj.get(0)){nodeDom.remove()}}if(target_ulObj.get(0)&&moveType==consts.move.TYPE_INNER){target_ulObj.append(nodeDom)}else{if(targetObj.get(0)&&moveType==consts.move.TYPE_PREV){targetObj.before(nodeDom)}else{if(targetObj.get(0)&&moveType==consts.move.TYPE_NEXT){targetObj.after(nodeDom)}}}var i,l,tmpSrcIndex=-1,tmpTargetIndex=0,oldNeighbor=null,newNeighbor=null,oldLevel=node.level;
if(node.isFirstNode){tmpSrcIndex=0;if(oldParentNode[childKey].length>1){oldNeighbor=oldParentNode[childKey][1];oldNeighbor.isFirstNode=true}}else{if(node.isLastNode){tmpSrcIndex=oldParentNode[childKey].length-1;oldNeighbor=oldParentNode[childKey][tmpSrcIndex-1];oldNeighbor.isLastNode=true}else{for(i=0,l=oldParentNode[childKey].length;i<l;i++){if(oldParentNode[childKey][i].tId==node.tId){tmpSrcIndex=i;break}}}}if(tmpSrcIndex>=0){oldParentNode[childKey].splice(tmpSrcIndex,1)}if(moveType!=consts.move.TYPE_INNER){for(i=0,l=targetParentNode[childKey].length;i<l;i++){if(targetParentNode[childKey][i].tId==targetNode.tId){tmpTargetIndex=i}}}if(moveType==consts.move.TYPE_INNER){if(!targetNode[childKey]){targetNode[childKey]=new Array()}if(targetNode[childKey].length>0){newNeighbor=targetNode[childKey][targetNode[childKey].length-1];newNeighbor.isLastNode=false}targetNode[childKey].splice(targetNode[childKey].length,0,node);node.isLastNode=true;node.isFirstNode=(targetNode[childKey].length==1)}else{if(targetNode.isFirstNode&&moveType==consts.move.TYPE_PREV){targetParentNode[childKey].splice(tmpTargetIndex,0,node);newNeighbor=targetNode;newNeighbor.isFirstNode=false;node.parentTId=targetNode.parentTId;node.isFirstNode=true;node.isLastNode=false}else{if(targetNode.isLastNode&&moveType==consts.move.TYPE_NEXT){targetParentNode[childKey].splice(tmpTargetIndex+1,0,node);newNeighbor=targetNode;newNeighbor.isLastNode=false;node.parentTId=targetNode.parentTId;node.isFirstNode=false;node.isLastNode=true}else{if(moveType==consts.move.TYPE_PREV){targetParentNode[childKey].splice(tmpTargetIndex,0,node)}else{targetParentNode[childKey].splice(tmpTargetIndex+1,0,node)}node.parentTId=targetNode.parentTId;node.isFirstNode=false;node.isLastNode=false}}}$.tree._fixPIdKeyValue(setting,node);$.tree._setSonNodeLevel(setting,node.getParentNode(),node);$.tree._setNodeLineIcos(setting,node);$.tree._repairNodeLevelClass(setting,node,oldLevel);if(!setting.keepParent&&oldParentNode[childKey].length<1){oldParentNode.isParent=false;
oldParentNode.open=false;var tmp_ulObj=$$(oldParentNode,consts.id.UL,setting),tmp_switchObj=$$(oldParentNode,consts.id.SWITCH,setting),tmp_icoObj=$$(oldParentNode,consts.id.ICON,setting);$.tree._replaceSwitchClass(oldParentNode,tmp_switchObj,consts.folder.DOCU);$.tree._replaceIcoClass(oldParentNode,tmp_icoObj,consts.folder.DOCU);tmp_ulObj.css("display","none")}else{if(oldNeighbor){$.tree._setNodeLineIcos(setting,oldNeighbor)}}if(newNeighbor){$.tree._setNodeLineIcos(setting,newNeighbor)}if(!!setting.check&&setting.checkable&&$.tree._repairChkClass){$.tree._repairChkClass(setting,oldParentNode);$.tree._repairParentChkClassWithSelf(setting,oldParentNode);if(oldParentNode!=node.parent){$.tree._repairParentChkClassWithSelf(setting,node)}}if(!isSilent){$.tree._expandCollapseParentNode(setting,node.getParentNode(),true,animateFlag)}},_removeChildNodes:function(setting,node){if(!node){return}var childKey=setting.keyChildren,nodes=node[childKey];if(!nodes){return}for(var i=0,l=nodes.length;i<l;i++){$.tree._removeNodeCache(setting,nodes[i])}$.tree._removeSelectedNode(setting);delete node[childKey];if(!setting.keepParent){node.isParent=false;node.open=false;var tmp_switchObj=$$(node,consts.id.SWITCH,setting),tmp_icoObj=$$(node,consts.id.ICON,setting);$.tree._replaceSwitchClass(node,tmp_switchObj,consts.folder.DOCU);$.tree._replaceIcoClass(node,tmp_icoObj,consts.folder.DOCU);$$(node,consts.id.UL,setting).remove()}else{$$(node,consts.id.UL,setting).empty()}},_showNode:function(setting,node,options){node.hidden=false;$.tree._initShowForExCheck(setting,node);$$(node,setting).show();if(typeof options!=="undefined"&&typeof options.showParents!=="undefined"&&options.showParents&&null!==node.getParentNode()){$.tree._showNode(setting,node.getParentNode(),options)}},_initShowForExCheck:function(setting,n){if(!n.hidden&&setting.checkable){if(typeof n._nocheck!="undefined"){n.nocheck=n._nocheck;delete n._nocheck}if($.tree._setChkClass){var checkObj=$$(n,consts.id.CHECK,setting);$.tree._setChkClass(setting,checkObj,n)
}if($.tree._repairParentChkClassWithSelf){$.tree._repairParentChkClassWithSelf(setting,n)}}},_showNodes:function(setting,nodes,options){if(!nodes||nodes.length==0){return}var pList={},i,j;for(i=0,j=nodes.length;i<j;i++){var n=nodes[i];if(!pList[n.parentTId]){var pn=n.getParentNode();pList[n.parentTId]=(pn===null)?$.tree._getRoot(setting):n.getParentNode()}$.tree._showNode(setting,n,options)}for(var tId in pList){var children=pList[tId][setting.keyChildren];$.tree._setFirstNodeForShow(setting,children);$.tree._setLastNodeForShow(setting,children)}},_setFirstNodeForShow:function(setting,nodes){var n,i,j,first,old;for(i=0,j=nodes.length;i<j;i++){n=nodes[i];if(!first&&!n.hidden&&n.isFirstNode){first=n;break}else{if(!first&&!n.hidden&&!n.isFirstNode){n.isFirstNode=true;first=n;$.tree._setNodeLineIcos(setting,n)}else{if(first&&n.isFirstNode){n.isFirstNode=false;old=n;$.tree._setNodeLineIcos(setting,n);break}else{n=null}}}}return{"new":first,old:old}},_setLastNodeForShow:function(setting,nodes){var n,i,j,last,old;for(i=nodes.length-1;i>=0;i--){n=nodes[i];if(!last&&!n.hidden&&n.isLastNode){last=n;break}else{if(!last&&!n.hidden&&!n.isLastNode){n.isLastNode=true;last=n;$.tree._setNodeLineIcos(setting,n)}else{if(last&&n.isLastNode){n.isLastNode=false;old=n;$.tree._setNodeLineIcos(setting,n);break}else{n=null}}}}return{"new":last,old:old}},_hideNode:function(setting,node,options){node.hidden=true;node.isFirstNode=false;node.isLastNode=false;$.tree._initHideForExCheck(setting,node);$.tree._cancelPreSelectedNode(setting,node);$$(node,setting).hide()},_initHideForExCheck:function(setting,n){if(n.hidden&&setting.checkable){if(typeof n._nocheck=="undefined"){n._nocheck=!!n.nocheck;n.nocheck=true}n.check_Child_State=-1;if($.tree._repairParentChkClassWithSelf){$.tree._repairParentChkClassWithSelf(setting,n)}}},_hideNodes:function(setting,nodes,options){if(!nodes||nodes.length==0){return}var pList={},i,j;for(i=0,j=nodes.length;i<j;i++){var n=nodes[i];if((n.isFirstNode||n.isLastNode)&&!pList[n.parentTId]){var pn=n.getParentNode();
pList[n.parentTId]=(pn===null)?$.tree._getRoot(setting):n.getParentNode()}$.tree._hideNode(setting,n,options)}for(var tId in pList){var children=pList[tId][setting.keyChildren];$.tree._setFirstNodeForHide(setting,children);$.tree._setLastNodeForHide(setting,children)}},_setFirstNodeForHide:function(setting,nodes){var n,i,j;for(i=0,j=nodes.length;i<j;i++){n=nodes[i];if(n.isFirstNode){break}if(!n.hidden&&!n.isFirstNode){n.isFirstNode=true;$.tree._setNodeLineIcos(setting,n);break}else{n=null}}return n},_setLastNodeForHide:function(setting,nodes){var n,i;for(i=nodes.length-1;i>=0;i--){n=nodes[i];if(n.isLastNode){break}if(!n.hidden&&!n.isLastNode){n.isLastNode=true;$.tree._setNodeLineIcos(setting,n);break}else{n=null}}return n},_setFirstNode:function(setting,parentNode){var childKey=setting.keyChildren,childLength=parentNode[childKey].length;if(childLength>0){parentNode[childKey][0].isFirstNode=true}},_setLastNode:function(setting,parentNode){var childKey=setting.keyChildren,childLength=parentNode[childKey].length;if(childLength>0){parentNode[childKey][childLength-1].isLastNode=true}},_removeNode:function(setting,node){var root=$.tree._getRoot(setting),childKey=setting.keyChildren,parentNode=(node.parentTId)?node.getParentNode():root;node.isFirstNode=false;node.isLastNode=false;node.getPreNode=function(){return null};node.getNextNode=function(){return null};if(!$.tree._getNodeCache(setting,node.tId)){return}$$(node,setting).remove();$.tree._removeNodeCache(setting,node);$.tree._removeSelectedNode(setting,node);for(var i=0,l=parentNode[childKey].length;i<l;i++){if(parentNode[childKey][i].tId==node.tId){parentNode[childKey].splice(i,1);break}}$.tree._setFirstNode(setting,parentNode);$.tree._setLastNode(setting,parentNode);var tmp_ulObj,tmp_switchObj,tmp_icoObj,childLength=parentNode[childKey].length;if(!setting.keepParent&&childLength==0){parentNode.isParent=false;parentNode.open=false;tmp_ulObj=$$(parentNode,consts.id.UL,setting);tmp_switchObj=$$(parentNode,consts.id.SWITCH,setting);
tmp_icoObj=$$(parentNode,consts.id.ICON,setting);$.tree._replaceSwitchClass(parentNode,tmp_switchObj,consts.folder.DOCU);$.tree._replaceIcoClass(parentNode,tmp_icoObj,consts.folder.DOCU);tmp_ulObj.css("display","none")}else{if(setting.showLine&&childLength>0){var newLast=parentNode[childKey][childLength-1];tmp_ulObj=$$(newLast,consts.id.UL,setting);tmp_switchObj=$$(newLast,consts.id.SWITCH,setting);tmp_icoObj=$$(newLast,consts.id.ICON,setting);if(parentNode==root){if(parentNode[childKey].length==1){$.tree._replaceSwitchClass(newLast,tmp_switchObj,consts.line.ROOT)}else{var tmp_first_switchObj=$$(parentNode[childKey][0],consts.id.SWITCH,setting);$.tree._replaceSwitchClass(parentNode[childKey][0],tmp_first_switchObj,consts.line.ROOTS);$.tree._replaceSwitchClass(newLast,tmp_switchObj,consts.line.BOTTOM)}}else{$.tree._replaceSwitchClass(newLast,tmp_switchObj,consts.line.BOTTOM)}tmp_ulObj.removeClass(consts.line.LINE)}}},_replaceIcoClass:function(node,obj,newName){if(!obj||node.isAjaxing){return}var tmpName=obj.attr("class");if(tmpName==undefined){return}var tmpList=tmpName.split("_");switch(newName){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:tmpList[tmpList.length-1]=newName;break}obj.attr("class",tmpList.join("_"))},_replaceSwitchClass:function(node,obj,newName){if(!obj){return}var tmpName=obj.attr("class");if(tmpName==undefined){return}var tmpList=tmpName.split("_");switch(newName){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:tmpList[0]=$.tree._makeNodeLineClassEx(node)+newName;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:tmpList[1]=newName;break}obj.attr("class",tmpList.join("_"));if(newName!==consts.folder.DOCU){obj.removeAttr("disabled")}else{obj.attr("disabled","disabled")}},_repairAllChk:function(setting,checked){if(setting.checkable&&setting.chkStyle===consts.checkbox.STYLE){var checkedKey=setting.keyChecked,childKey=setting.keyChildren,root=$.tree._getRoot(setting);
for(var i=0,l=root[childKey].length;i<l;i++){var node=root[childKey][i];if(node.nocheck!==true&&node.chkDisabled!==true){node[checkedKey]=checked}$.tree._setSonNodeCheckBox(setting,node,checked)}}},_repairChkClass:function(setting,node){if(!node){return}$.tree._makeChkFlag(setting,node);if(node.nocheck!==true){var checkObj=$$(node,consts.id.CHECK,setting);$.tree._setChkClass(setting,checkObj,node)}},_repairParentChkClass:function(setting,node){if(!node||!node.parentTId){return}var pNode=node.getParentNode();$.tree._repairChkClass(setting,pNode);$.tree._repairParentChkClass(setting,pNode)},_repairParentChkClassWithSelf:function(setting,node){if(!node){return}var childKey=setting.keyChildren;if(node[childKey]&&node[childKey].length>0){$.tree._repairParentChkClass(setting,node[childKey][0])}else{$.tree._repairParentChkClass(setting,node)}},_repairSonChkDisabled:function(setting,node,chkDisabled,inherit){if(!node){return}var childKey=setting.keyChildren;if(node.chkDisabled!=chkDisabled){node.chkDisabled=chkDisabled}$.tree._repairChkClass(setting,node);if(node[childKey]&&inherit){for(var i=0,l=node[childKey].length;i<l;i++){var sNode=node[childKey][i];$.tree._repairSonChkDisabled(setting,sNode,chkDisabled,inherit)}}},_repairParentChkDisabled:function(setting,node,chkDisabled,inherit){if(!node){return}if(node.chkDisabled!=chkDisabled&&inherit){node.chkDisabled=chkDisabled}$.tree._repairChkClass(setting,node);$.tree._repairParentChkDisabled(setting,node.getParentNode(),chkDisabled,inherit)},_selectNode:function(setting,node,addFlag){if(!addFlag){$.tree._cancelPreSelectedNode(setting)}$$(node,consts.id.A,setting).addClass(consts.node.CURSELECTED);$.tree._addSelectedNode(setting,node)},_setNodeFontCss:function(setting,treeNode){var aObj=$$(treeNode,consts.id.A,setting),fontCss=$.tree._makeNodeFontCss(setting,treeNode);if(fontCss){aObj.css(fontCss)}},_setNodeLineIcos:function(setting,node){if(!node){return}var switchObj=$$(node,consts.id.SWITCH,setting),ulObj=$$(node,consts.id.UL,setting),icoObj=$$(node,consts.id.ICON,setting),ulLine=$.tree._makeUlLineClass(setting,node);
if(ulLine.length==0){ulObj.removeClass(consts.line.LINE)}else{ulObj.addClass(ulLine)}switchObj.attr("class",$.tree._makeNodeLineClass(setting,node));if(node.isParent){switchObj.removeAttr("disabled")}else{switchObj.attr("disabled","disabled")}icoObj.removeAttr("style");icoObj.attr("style",$.tree._makeNodeIcoStyle(setting,node));icoObj.attr("class",$.tree._makeNodeIcoClass(setting,node))},_setNodeName:function(setting,node){var title=$.tree._getNodeTitle(setting,node),nObj=$$(node,consts.id.SPAN,setting);nObj.empty();if(setting.nameIsHTML){nObj.html($.tree._getNodeName(setting,node))}else{nObj.text($.tree._getNodeName(setting,node))}if($.tree._apply(setting.showTitle,[setting.treeId,node],setting.showTitle)){var aObj=$$(node,consts.id.A,setting);aObj.attr("title",!title?"":title)}},_setNodeTarget:function(setting,node){var aObj=$$(node,consts.id.A,setting);aObj.attr("target",$.tree._makeNodeTarget(node))},_setNodeUrl:function(setting,node){var aObj=$$(node,consts.id.A,setting),url=$.tree._makeNodeUrl(setting,node);if(url==null||url.length==0){aObj.removeAttr("href")}else{aObj.attr("href",url)}},_switchNode:function(setting,node){if(node.open||!$.tree._canAsync(setting,node)){$.tree._expandCollapseNode(setting,node,!node.open)}else{if(setting.asyncEnable){if(!$.tree._asyncNode(setting,node)){$.tree._expandCollapseNode(setting,node,!node.open);return}}else{if(node){$.tree._expandCollapseNode(setting,node,!node.open)}}}},_setChkClass:function(setting,obj,node){if(!obj){return}if(node.nocheck===true){obj.hide()}else{obj.show()}obj.attr("class",$.tree._makeChkClass(setting,node))},_setParentNodeCheckBox:function(setting,node,value,srcNode){var childKey=setting.keyChildren,checkedKey=setting.keyChecked,checkObj=$$(node,consts.id.CHECK,setting);if(!srcNode){srcNode=node}$.tree._makeChkFlag(setting,node);if(node.nocheck!==true&&node.chkDisabled!==true){node[checkedKey]=value;$.tree._setChkClass(setting,checkObj,node);if(setting.autoCheckTrigger&&node!=srcNode){setting.treeObj.trigger(consts.event.CHECK,[null,setting.treeId,node])
}}if(node.parentTId){var pSign=true;if(!value){var pNodes=node.getParentNode()[childKey];for(var i=0,l=pNodes.length;i<l;i++){if((pNodes[i].nocheck!==true&&pNodes[i].chkDisabled!==true&&pNodes[i][checkedKey])||((pNodes[i].nocheck===true||pNodes[i].chkDisabled===true)&&pNodes[i].check_Child_State>0)){pSign=false;break}}}if(pSign){$.tree._setParentNodeCheckBox(setting,node.getParentNode(),value,srcNode)}}},_setSonNodeCheckBox:function(setting,node,value,srcNode){if(!node){return}var childKey=setting.keyChildren,checkedKey=setting.keyChecked,checkObj=$$(node,consts.id.CHECK,setting);if(!srcNode){srcNode=node}var hasDisable=false;if(node[childKey]){for(var i=0,l=node[childKey].length;i<l&&node.chkDisabled!==true;i++){var sNode=node[childKey][i];$.tree._setSonNodeCheckBox(setting,sNode,value,srcNode);if(sNode.chkDisabled===true){hasDisable=true}}}if(node!=$.tree._getRoot(setting)&&node.chkDisabled!==true){if(hasDisable&&node.nocheck!==true){$.tree._makeChkFlag(setting,node)}if(node.nocheck!==true&&node.chkDisabled!==true){node[checkedKey]=value;if(!hasDisable){node.check_Child_State=(node[childKey]&&node[childKey].length>0)?(value?2:0):-1}}else{node.check_Child_State=-1}$.tree._setChkClass(setting,checkObj,node);if(setting.autoCheckTrigger&&node!=srcNode&&node.nocheck!==true&&node.chkDisabled!==true){setting.treeObj.trigger(consts.event.CHECK,[null,setting.treeId,node])}}},_removeEditBtn:function(setting,node){$$(node,consts.id.EDIT,setting).unbind().remove()},_removeRemoveBtn:function(setting,node){$$(node,consts.id.REMOVE,setting).unbind().remove()},_removeTreeDom:function(setting,node){node.isHover=false;$.tree._removeEditBtn(setting,node);$.tree._removeRemoveBtn(setting,node);$.tree._apply(setting.removeHoverDom,[setting.treeId,node])},_repairNodeLevelClass:function(setting,node,oldLevel){if(oldLevel===node.level){return}var liObj=$$(node,setting),aObj=$$(node,consts.id.A,setting),ulObj=$$(node,consts.id.UL,setting),oldClass=consts.className.LEVEL+oldLevel,newClass=consts.className.LEVEL+node.level;
liObj.removeClass(oldClass);liObj.addClass(newClass);aObj.removeClass(oldClass);aObj.addClass(newClass);ulObj.removeClass(oldClass);ulObj.addClass(newClass)},_selectNodes:function(setting,nodes){for(var i=0,l=nodes.length;i<l;i++){$.tree._selectNode(setting,nodes[i],i>0)}}};var settings={},roots={},caches={},_init={bind:[$.tree._coreBindEvent,$.tree._checkBindEvent,$.tree._editBindEvent],unbind:[$.tree._coreUnbindEvent,$.tree._checkUnbindEvent,$.tree._editUnbindEvent],caches:[$.tree._coreInitCache,$.tree._checkInitCache,$.tree._editInitCache],nodes:[$.tree._coreInitNode,$.tree._checkInitNode,$.tree._editInitNode],proxys:[$.tree._checkEventProxy,$.tree._coreEventProxy,$.tree._editEventProxy],roots:[$.tree._coreInitRoot,$.tree._checkInitRoot,$.tree._editInitRoot],beforeA:[$.tree._beforeA],afterA:[],innerBeforeA:[],innerAfterA:[],treeTools:[$.tree._checkTreeTools,$.tree._editTreeTools]};$.coral.tree={componentName:"tree",consts:_final,getTreeObj:function(treeId){var o=$.tree._getTreeTools(treeId);return o?o:null},destroy:function(treeId){if(!!treeId&&treeId.length>0){$.tree._destroy($.tree._getSetting(treeId))}else{for(var s in settings){$.tree._destroy(settings[s])}}},init:function(obj,optionData,nodeData){if(!obj.hasClass("coral-tree")){obj.addClass("coral-tree")}var setting=$.tree._clone(_option);$.extend(true,setting,optionData);setting.treeId=$(obj).uniqueId().attr("id");setting.treeObj=obj;setting.treeObj.empty();settings[setting.treeId]=setting;if(setting.cls){$(obj).addClass(setting.cls)}if(setting.componentCls){$(obj).addClass(setting.componentCls)}if(typeof document.body.style.maxHeight==="undefined"){setting.expandSpeed=""}$.tree._initRoot(setting);var root=$.tree._getRoot(setting),childKey=setting.keyChildren;nodeData=nodeData?$.tree._clone($.tree._isArray(nodeData)?nodeData:[nodeData]):[];if(setting.simpleDataEnable){root[childKey]=$.tree._transformToTreeFormat(setting,nodeData)}else{root[childKey]=nodeData}$.tree._initCache(setting);$.tree._unbindTree(setting);
$.tree._bindTree(setting);$.tree._unbindEvent(setting);$.tree._bindEvent(setting);var treeTools={setting:setting,option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.extend({},treeTools.setting)}if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.extend({},treeTools.setting[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]]}key=parts.pop();if(arguments.length===1){return curOption[key]===undefined?null:curOption[key]}curOption[key]=value}else{if(arguments.length===1){return treeTools.setting[key]===undefined?null:treeTools.setting[key]}options[key]=value}}this._setOptions(options);return this},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key])}return this},_setOption:function(key,value){treeTools.setting[key]=value;return this},addNodes:function(parentNode,newNodes,isSilent){if(!newNodes){return null}if(!parentNode){parentNode=null}if(parentNode&&!parentNode.isParent&&setting.keepLeaf){return null}var xNewNodes=$.tree._clone($.tree._isArray(newNodes)?newNodes:[newNodes]);function addCallback(){$.tree._addNodes(setting,parentNode,xNewNodes,(isSilent==true))}if($.tree._canAsync(setting,parentNode)){$.tree._asyncNode(setting,parentNode,isSilent,addCallback)}else{addCallback()}return xNewNodes},cancelSelectedNode:function(node){$.tree._cancelPreSelectedNode(setting,node)},destroy:function(){$.tree._destroy(setting)},expandAll:function(expandFlag){expandFlag=!!expandFlag;$.tree._expandCollapseSonNode(setting,null,expandFlag,true);return expandFlag},expandNode:function(node,expandFlag,sonSign,focus,callbackFlag){if(!node||!node.isParent){return null}if(expandFlag!==true&&expandFlag!==false){expandFlag=!node.open}callbackFlag=!!callbackFlag;if(callbackFlag&&expandFlag&&($.tree._apply(setting.beforeExpand,[setting.treeId,node],true)==false)){return null}else{if(callbackFlag&&!expandFlag&&($.tree._apply(setting.beforeCollapse,[setting.treeId,node],true)==false)){return null
}}if(expandFlag&&node.parentTId){$.tree._expandCollapseParentNode(setting,node.getParentNode(),expandFlag,false)}if(expandFlag===node.open&&!sonSign){return null}$.tree._getRoot(setting).expandTriggerFlag=callbackFlag;if(!$.tree._canAsync(setting,node)&&sonSign){$.tree._expandCollapseSonNode(setting,node,expandFlag,true,function(){if(focus!==false){try{$$(node,setting).focus().blur()}catch(e){}}})}else{node.open=!expandFlag;$.tree._switchNode(this.setting,node);if(focus!==false){try{$$(node,setting).focus().blur()}catch(e){}}}return expandFlag},getNodes:function(){return $.tree._getNodes(setting)},getNodeByParam:function(key,value,parentNode){if(!key){return null}return $.tree._getNodeByParam(setting,parentNode?parentNode[setting.keyChildren]:$.tree._getNodes(setting),key,value)},getNodeByTId:function(tId){return $.tree._getNodeCache(setting,tId)},getNodesByParam:function(key,value,parentNode){if(!key){return null}return $.tree._getNodesByParam(setting,parentNode?parentNode[setting.keyChildren]:$.tree._getNodes(setting),key,value)},getNodesByParamFuzzy:function(key,value,parentNode){if(!key){return null}return $.tree._getNodesByParamFuzzy(setting,parentNode?parentNode[setting.keyChildren]:$.tree._getNodes(setting),key,value)},getNodesByFilter:function(filter,isSingle,parentNode,invokeParam){isSingle=!!isSingle;if(!filter||(typeof filter!="function")){return(isSingle?null:[])}return $.tree._getNodesByFilter(setting,parentNode?parentNode[setting.keyChildren]:$.tree._getNodes(setting),filter,isSingle,invokeParam)},getNodeIndex:function(node){if(!node){return null}var childKey=setting.keyChildren,parentNode=(node.parentTId)?node.getParentNode():$.tree._getRoot(setting);for(var i=0,l=parentNode[childKey].length;i<l;i++){if(parentNode[childKey][i]==node){return i}}return -1},getSelectedNodes:function(){var r=[],list=$.tree._getRoot(setting).curSelectedList;for(var i=0,l=list.length;i<l;i++){r.push(list[i])}return r},isSelectedNode:function(node){return $.tree._isSelectedNode(setting,node)
},reAsyncChildNodes:function(parentNode,reloadType,isSilent,opts){if(!this.setting.asyncEnable){return}var isRoot=!parentNode;if(isRoot){parentNode=$.tree._getRoot(setting)}if(reloadType=="refresh"){var childKey=this.setting.keyChildren;for(var i=0,l=parentNode[childKey]?parentNode[childKey].length:0;i<l;i++){$.tree._removeNodeCache(setting,parentNode[childKey][i])}$.tree._removeSelectedNode(setting);parentNode[childKey]=[];if(isRoot){this.setting.treeObj.empty()}else{var ulObj=$$(parentNode,consts.id.UL,setting);ulObj.empty()}}$.tree._asyncNode(this.setting,isRoot?null:parentNode,!!isSilent,null,opts)},reLoadChildNodes:function(parentNode,reloadType,isSilent,newNodes){if(this.setting.asyncEnable){return}var isRoot=!parentNode;if(isRoot){parentNode=$.tree._getRoot(setting)}if(reloadType=="refresh"){var childKey=this.setting.keyChildren;for(var i=0,l=parentNode[childKey]?parentNode[childKey].length:0;i<l;i++){$.tree._removeNodeCache(setting,parentNode[childKey][i])}$.tree._removeSelectedNode(setting);parentNode[childKey]=[];if(isRoot){this.setting.treeObj.empty()}else{var ulObj=$$(parentNode,consts.id.UL,setting);ulObj.empty()}}treeTools.addNodes(isRoot?null:parentNode,newNodes,!!isSilent)},refresh:function(){this.setting.treeObj.empty();var root=$.tree._getRoot(setting),nodes=root[setting.keyChildren];$.tree._initRoot(setting);root[setting.keyChildren]=nodes;$.tree._initCache(setting);$.tree._createNodes(setting,0,root[setting.keyChildren])},reload:function(opts){opts=opts||{};var that=this,url,nodes=[],isUrl=false;if(typeof(opts)!=="string"){if(opts.data){nodes=opts.data}else{nodes=opts}}else{isUrl=true}this.setting.isInit=true;if(isUrl||this.setting.asyncEnable){treeTools.reAsyncChildNodes(null,"refresh",null,opts)}else{treeTools.reLoadChildNodes(null,"refresh",null,nodes);$.tree._apply(opts.onLoad,[null,this.setting.treeId])}},removeChildNodes:function(node){if(!node){return null}var childKey=setting.keyChildren,nodes=node[childKey];$.tree._removeChildNodes(setting,node);
return nodes?nodes:null},_pinyinEngine:function(){return new pinyinEngine()},_pinyinSetCache:function(engine,key,dataArr){for(var i in dataArr){engine.setCache([dataArr[i][key]],dataArr[i])}return engine},_pinyinSearch:function(engine,keyword,callback){var dataResult=[];engine.search(keyword,function(data){dataResult.push(data)});callback(dataResult)},filterNodesByParam:function(keysObj){var that=this,nodes=that.getNodes(),nodesArr=[],nodesFilter=[];that.expandAll(true);nodesArr=that.transformToArray(nodes);var engine=that._pinyinEngine();engine=that._pinyinSetCache(engine,"name",nodesArr);that.hideNodes(nodesArr);if(typeof keysObj==="object"){$.each(keysObj,function(k,v){if(k=="name"){that._pinyinSearch(engine,v,function(dataFilter){that.showNodes(dataFilter,{showParents:true})})}})}},showNodes:function(nodes,options){$.tree._showNodes(setting,nodes,options)},showNode:function(node,options){if(!node){return}$.tree._showNodes(setting,[node],options)},hideNodes:function(nodes,options){$.tree._hideNodes(setting,nodes,options)},hideNode:function(node,options){if(!node){return}$.tree._hideNodes(setting,[node],options)},removeNode:function(node,callbackFlag){if(!node){return}callbackFlag=!!callbackFlag;if(callbackFlag&&$.tree._apply(setting.beforeRemove,[setting.treeId,node],true)==false){return}$.tree._removeNode(setting,node);if(callbackFlag){this.setting.treeObj.trigger(consts.event.REMOVE,[setting.treeId,node])}},selectNode:function(node,addFlag){if(!node){return}if($.tree._uCanDo(setting)){addFlag=setting.selectedMulti&&addFlag;if(node.parentTId){$.tree._expandCollapseParentNode(setting,node.getParentNode(),true,false,function(){try{$$(node,setting).focus().blur()}catch(e){}})}else{try{$$(node,setting).focus().blur()}catch(e){}}$.tree._selectNode(setting,node,addFlag)}},transformToTreeNodes:function(simpleNodes){return $.tree._transformToTreeFormat(setting,simpleNodes)},transformToArray:function(nodes){return $.tree._transformToArrayFormat(setting,nodes)},updateNode:function(node,checkTypeFlag){if(!node){return
}var nObj=$$(node,setting);if(nObj.get(0)&&$.tree._uCanDo(setting)){$.tree._setNodeName(setting,node);$.tree._setNodeTarget(setting,node);$.tree._setNodeUrl(setting,node);$.tree._setNodeLineIcos(setting,node);$.tree._setNodeFontCss(setting,node)}}};root.treeTools=treeTools;$.tree._setTreeTools(setting,treeTools);setting.isInit=true;if(root[childKey]&&root[childKey].length>0){$.tree._createNodes(setting,0,root[childKey])}else{if(setting.asyncEnable&&setting.asyncUrl&&setting.asyncUrl!==""){$.tree._asyncNode(setting)}}return treeTools}};var coralTree=$.coral.tree,$$=$.tree._$,consts=coralTree.consts;var _createNodes=$.tree._createNodes;$.tree._createNodes=function(setting,level,nodes,parentNode){if(_createNodes){_createNodes.apply($.tree,arguments)}if(!nodes){return}if($.tree._repairParentChkClassWithSelf){$.tree._repairParentChkClassWithSelf(setting,parentNode)}};var _removeNode=$.tree._removeNode;$.tree._removeNode=function(setting,node){var parentNode=node.getParentNode();if(_removeNode){_removeNode.apply($.tree,arguments)}if(!node||!parentNode){return}$.tree._repairChkClass(setting,parentNode);$.tree._repairParentChkClass(setting,parentNode)};var _appendNodes=$.tree._appendNodes;$.tree._appendNodes=function(setting,level,nodes,parentNode,initFlag,openFlag){var html="";if(_appendNodes){html=_appendNodes.apply($.tree,arguments)}if(parentNode){$.tree._makeChkFlag(setting,parentNode)}return html};var _cancelPreSelectedNode=$.tree._cancelPreSelectedNode;$.tree._cancelPreSelectedNode=function(setting,node){var list=$.tree._getRoot(setting).curSelectedList;for(var i=0,j=list.length;i<j;i++){if(!node||node===list[i]){$.tree._removeTreeDom(setting,list[i]);if(node){break}}}if(_cancelPreSelectedNode){_cancelPreSelectedNode.apply($.tree,arguments)}};var _makeNodeUrl=$.tree._makeNodeUrl;$.tree._makeNodeUrl=function(setting,node){return setting.editable?null:(_makeNodeUrl.apply($.tree,arguments))};var _removeNode1=$.tree._removeNode;$.tree._removeNode=function(setting,node){var root=$.tree._getRoot(setting);
if(root.curEditNode===node){root.curEditNode=null}if(_removeNode1){_removeNode1.apply($.tree,arguments)}};var _selectNode=$.tree._selectNode;$.tree._selectNode=function(setting,node,addFlag){var root=$.tree._getRoot(setting);if($.tree._isSelectedNode(setting,node)&&root.curEditNode==node&&node.editNameFlag){return false}if(_selectNode){_selectNode.apply($.tree,arguments)}$.tree._addHoverDom(setting,node);return true};var _uCanDo=$.tree._uCanDo;$.tree._uCanDo=function(setting,e){var root=$.tree._getRoot(setting);if(e&&($.tree._eqs(e.type,"mouseover")||$.tree._eqs(e.type,"mouseout")||$.tree._eqs(e.type,"mousedown")||$.tree._eqs(e.type,"mouseup"))){return true}if(root.curEditNode){$.tree._editNodeBlur=false;root.curEditInput.focus()}return(!root.curEditNode)&&(_uCanDo?_uCanDo.apply($.tree,arguments):true)};$.fn.tree=function(options){var returnValue=this;if(!this.length){return this}var otherArgs=Array.prototype.slice.call(arguments,1);var args=Array.prototype.slice.call(arguments,0);this.each(function(){var isMethodCall=typeof options==="string";options=options||{};var methodValue,parseOptions=$.parser.parseOptions(this,[],["data","rootNode","chkboxType"]);_options=$.extend({},$.fn.tree.defaults||{},parseOptions);if(isMethodCall){var treeobj=$.coral.tree.getTreeObj($(this).attr("id"));methodValue=treeobj[options].apply(treeobj,[].concat(otherArgs));if(methodValue!==undefined){returnValue=methodValue}return}else{_options=$.extend({},_options,options);var node=args[1]||_options.data;$.coral.tree.init($(this),_options,node)}});return returnValue}})(jQuery);

(function(a){a.component("coral.layout",{version:"4.0.1",options:{onCreate:null,fit:false},layoutPanelDefault:{region:null,split:false,collapsedSize:28,minWidth:10,minHeight:10,maxWidth:10000,maxHeight:10000},_flag:false,_refresh:function(){var f=this;var b=this.element;var k=f.options;var e=f.panels;var c=a(b);if(b.tagName=="BODY"){this._fit()}else{k.fit?c.css(this._fit()):this._fit(false)}var g={top:0,left:0,width:c.width(),height:c.height()};j(this._isPanelVisible(e.expandNorth)?e.expandNorth:e.north,"n");j(this._isPanelVisible(e.expandSouth)?e.expandSouth:e.south,"s");h(this._isPanelVisible(e.expandEast)?e.expandEast:e.east,"e");h(this._isPanelVisible(e.expandWest)?e.expandWest:e.west,"w");e.center.panel("resize",g);function d(l){var m=l.panel("getOptions");return Math.min(Math.max(m.height,m.minHeight),m.maxHeight)}function i(m){var l=m.panel("getOptions");return Math.min(Math.max(l.width,l.minWidth),l.maxWidth)}function j(l,m){if(!l.length||!f._isPanelVisible(l)){return}var n=l.panel("getOptions");var o=d(l);l.panel("resize",{width:c.width(),height:o,left:0,top:(m=="n"?0:c.height()-o)});g.height-=o;if(m=="n"){g.top+=o;if(!n.split&&n.border){g.top--}}if(!n.split&&n.border){g.height++}}function h(m,n){if(!m.length||!f._isPanelVisible(m)){return}var o=m.panel("getOptions");var l=i(m);m.panel("resize",{width:l,height:g.height,left:(n=="e"?c.width()-l:0),top:g.top});g.width-=l;if(n=="w"){g.left+=l;if(!o.split&&o.border){g.left--}}if(!o.split&&o.border){g.width++}}},_create:function(){this.panels={center:a(),north:a(),south:a(),east:a(),west:a()};var d=this;var b=this.element;this.element.addClass("ctrl-init ctrl-init-layout");var e=a(b);e.addClass("coral-layout");function c(f){f.children("div").each(function(){var g=a.parser.parseOptions(this,[]);if("north,south,east,west,center".indexOf(g.region)>=0){d._add(b,g,this)}})}e.children("form").length?c(e.children("form")):c(e);e.append('<div class="coral-layout-split-proxy-h"></div><div class="coral-layout-split-proxy-v"></div>');
this._refresh();this._initCollapse()},_add:function(b,l,k){var g=this;l.region=l.region||"center";var h=this.panels;var e=a(b);var f=l.region;if(h[f].length){return}var c=a(k);if(!c.length){c=a("<div></div>").appendTo(e)}var j=a.extend({},this.layoutPanelDefault,{width:(c.length?parseInt(c[0].style.width)||c.outerWidth():"auto"),height:(c.length?parseInt(c[0].style.height)||c.outerHeight():"auto"),doSize:false,collapsible:true,componentCls:("coral-layout-panel coral-layout-panel-"+f),bodyCls:"coral-layout-body",onOpen:function(){var p=a(this).panel("header").children("div.coral-panel-tool");p.children("a.coral-panel-tool-collapse").hide();var o={north:"up",south:"down",east:"right2",west:"left"};if(!o[f]){return}var m="icon-arrow-"+o[f];var n=p.children("a."+m);if(!n.length){n=a('<a href="javascript:void(0)"></a>').addClass("icon "+m).appendTo(p);n.bind("click",{dir:f},function(q){g._collapse(q.data.dir);return false})}a(this).panel("getOptions").collapsible?n.show():n.hide()}},l);c.panel(j);h[f]=c;if(c.panel("getOptions").split){var i=c.panel("component");i.addClass("coral-layout-split-"+f);var d="";if(f=="north"){d="s"}if(f=="south"){d="n"}if(f=="east"){d="w"}if(f=="west"){d="e"}i.resizable(a.extend({handles:d,start:function(o){g._flag=true;if(f=="north"||f=="south"){var m=a(">div.coral-layout-split-proxy-v",b)}else{var m=a(">div.coral-layout-split-proxy-h",b)}var n=0;var p={display:"block"};if(f=="north"){p.top=parseInt(i.css("top"))+i.outerHeight()-m.height();p.left=parseInt(i.css("left"));p.width=i.outerWidth();p.height=m.height()}else{if(f=="south"){p.top=parseInt(i.css("top"));p.left=parseInt(i.css("left"));p.width=i.outerWidth();p.height=m.height()}else{if(f=="east"){p.top=parseInt(i.css("top"))||0;p.left=parseInt(i.css("left"))||0;p.width=m.width();p.height=i.outerHeight()}else{if(f=="west"){p.top=parseInt(i.css("top"))||0;p.left=i.outerWidth()-m.width();p.width=m.width();p.height=i.outerHeight()}}}}m.css(p);a('<div class="coral-layout-mask"></div>').css({left:0,top:0,width:e.width(),height:e.height()}).appendTo(e)
},resize:function(n){if(f=="north"||f=="south"){var m=a(">div.coral-layout-split-proxy-v",b);m.css("top",n.pageY-a(b).offset().top-m.height()/2)}else{var m=a(">div.coral-layout-split-proxy-h",b);m.css("left",n.pageX-a(b).offset().left-m.width()/2)}return false},helper:"coral-resizable-helper",stop:function(n,m){e.children("div.coral-layout-split-proxy-v,div.coral-layout-split-proxy-h").hide();c.panel("resize",m.size);g._refresh();g._flag=false;e.find(">div.coral-layout-mask").remove()}},l))}},_remove:function(c){var b=this.panels;if(b[c].length){b[c].panel("destroy");a(b[c]).remove();b[c]=a();var d="expand"+c.substring(0,1).toUpperCase()+c.substring(1);if(b[d]){b[d].panel("destroy");a(b[c]).remove();b[d]=undefined}}},_collapse:function(j,l){var h=this;var d=this.element;if(l==undefined){l="normal"}var i=this.panels;var c=i[j];var k=c.panel("getOptions");if(k.beforeCollapse.call(c)==false){return}var f="expand"+j.substring(0,1).toUpperCase()+j.substring(1);if(!i[f]){i[f]=e(j);i[f].panel("component").bind("click",function(){var m=g();c.panel("expand",false).panel("open").panel("resize",m.collapse);c.panel("component").animate(m.expand,function(){a(this).unbind(".layout").bind("mouseleave.layout",{region:j},function(n){if(h._flag==true){return}h._collapse(n.data.region)})});return false})}var b=g();if(!this._isPanelVisible(i[f])){i.center.panel("resize",b.resizeC)}c.panel("component").animate(b.collapse,l,function(){c.panel("collapse",false).panel("close");i[f].panel("open").panel("resize",b.expandP);a(this).unbind(".layout")});function e(n){var m;if(n=="east"){m="icon icon-arrow-left"}else{if(n=="west"){m="icon icon-arrow-right2"}else{if(n=="north"){m="icon icon-arrow-down"}else{if(n=="south"){m="icon icon-arrow-up"}}}}var o=a("<div></div>").appendTo(d);o.panel(a.extend({},h.layoutPanelDefault,{componentCls:("coral-layout-expand coral-layout-expand-"+n),title:"&nbsp;",closed:true,minWidth:0,minHeight:0,doSize:false,tools:[{iconCls:m,handler:function(){h._expand(j);return false
}}]}));o.panel("component").hover(function(){a(this).addClass("coral-layout-expand-over")},function(){a(this).removeClass("coral-layout-expand-over")});return o}function g(){var q=a(d);var n=i.center.panel("getOptions");var m=k.collapsedSize;if(j=="east"){var p=n.width+k.width-m;if(k.split||!k.border){p++}return{resizeC:{width:p},expand:{left:q.width()-k.width},expandP:{top:n.top,left:q.width()-m,width:m,height:n.height},collapse:{left:q.width(),top:n.top,height:n.height}}}else{if(j=="west"){var p=n.width+k.width-m;if(k.split||!k.border){p++}return{resizeC:{width:p,left:m-1},expand:{left:0},expandP:{left:0,top:n.top,width:m,height:n.height},collapse:{left:-k.width,top:n.top,height:n.height}}}else{if(j=="north"){var o=n.height;if(!h._isPanelVisible(i.expandNorth)){o+=k.height-m+((k.split||!k.border)?1:0)}i.east.add(i.west).add(i.expandEast).add(i.expandWest).panel("resize",{top:m-1,height:o});return{resizeC:{top:m-1,height:o},expand:{top:0},expandP:{top:0,left:0,width:q.width(),height:m},collapse:{top:-k.height,width:q.width()}}}else{if(j=="south"){var o=n.height;if(!h._isPanelVisible(i.expandSouth)){o+=k.height-m+((k.split||!k.border)?1:0)}i.east.add(i.west).add(i.expandEast).add(i.expandWest).panel("resize",{height:o});return{resizeC:{height:o},expand:{top:q.height()-k.height},expandP:{top:q.height()-m,left:0,width:q.width(),height:m},collapse:{top:q.height(),width:q.width()}}}}}}}},_expand:function(h){var f=this;var c=this.element;var g=this.panels;var b=g[h];var i=b.panel("getOptions");if(i.beforeExpand.call(b)==false){return}var j=e();var d="expand"+h.substring(0,1).toUpperCase()+h.substring(1);if(g[d]){g[d].panel("close");b.panel("component").stop(true,true);b.panel("expand",false).panel("open").panel("resize",j.collapse);b.panel("component").animate(j.expand,function(){f._refresh()})}function e(){var l=a(c);var k=g.center.panel("getOptions");if(h=="east"&&g.expandEast){return{collapse:{left:l.width(),top:k.top,height:k.height},expand:{left:l.width()-g.east.panel("getOptions").width}}
}else{if(h=="west"&&g.expandWest){return{collapse:{left:-g.west.panel("getOptions").width,top:k.top,height:k.height},expand:{left:0}}}else{if(h=="north"&&g.expandNorth){return{collapse:{top:-g.north.panel("getOptions").height,width:l.width()},expand:{top:0}}}else{if(h=="south"&&g.expandSouth){return{collapse:{top:l.height(),width:l.width()},expand:{top:l.height()-g.south.panel("getOptions").height}}}}}}}},_isPanelVisible:function(b){if(!b){return false}if(b.length){return b.panel("component").is(":visible")}else{return false}},_initCollapse:function(){var b=this.panels;if(b.east.length&&b.east.panel("getOptions").collapsed){this._collapse("east",0)}if(b.west.length&&b.west.panel("getOptions").collapsed){this._collapse("west",0)}if(b.north.length&&b.north.panel("getOptions").collapsed){this._collapse("north",0)}if(b.south.length&&b.south.panel("getOptions").collapsed){this._collapse("south",0)}},_fit:function(b){return a.coral.panel.fit(this.element,b)},_destroy:function(){this.element.children().remove();this.element.detach()},refresh:function(){this._refresh()},panel:function(b){return this.panels[b]},collapse:function(b){this._collapse(b)},expand:function(b){this._expand(b)},add:function(b){this._add(this.element,b);this._refresh();if(this.panels[b.region].panel("getOptions").collapsed){this._collapse(b.region,0)}},remove:function(b){this._remove(b);this._refresh()},resize:function(h,i){var g=h;var c=this.element;if(i!==undefined){var d=this.panels[i];var j=d.panel("component").outerHeight();var e=d.panel("component").outerWidth();d.panel("resize",h);var b=d.panel("component").outerHeight();var f=d.panel("component").outerWidth();g.height=a(c).height()+b-j;g.width=a(c).width()+f-e}a(c).css(g);this._refresh()}})})(jQuery);

(function(a){a.component("coral.basemenu",{options:{popup:false,trigger:null,my:"left top",at:"left bottom",of:null,triggerEvent:"click",data:null,onClick:null,onCreate:null,url:null,method:null},_create:function(){if(this.options.popup){this._initPopup()}},_generateULContent:function(){var d=this;if(this.element.children().length==0&&this.options.data!=null){var b="";var c=(typeof this.options.data==="string")?a.parseJSON(this.options.data):this.options.data;b=this._generateHTML(b,c);if(b.length>7){b=b.substring(4);b=b.substring(0,b.length-5)}this.element.html(b)}else{if(this.element.children().length==0&&this.options.url!=null){var b="";a.ajax({type:"get",url:d.options.url,async:false,data:null,dataType:"json",success:function(f){var e="";e=d._generateHTML(e,f);if(e.length>7){e=e.substring(4);e=e.substring(0,e.length-5)}d.element.html(e)},error:function(){}})}}},_generateHTML:function(d,e){d+="<ul>";for(var c=0;c<e.length;c++){if(e[c].id!=""){d+='<li data-id="'+e[c].id+'">'}else{d+="<li>"}d+=this._generateANode(e[c]);var b=e[c].items;if(typeof b!=="undefined"&&b instanceof Array&&b.length>0){d=this._generateHTML(d,b)}d+="</li>"}d+="</ul>";return d},_generateANode:function(b){var c="<a";if(b.iconclass!=""){c+=" data-icon='"+b.iconclass+"'"}if(b.name!=""){c+=" data-name='"+b.name+"'"}if(b.disabled!=""){c+=" data-disabled='"+b.disabled+"'"}if(b.url!=""){c+=" data-url='"+b.url+"'"}if(b.target!=""){c+=" data-target='"+b.target+"'"}c+=">";if(b.name!=""){c+=b.name}c+="</a>";return c},_initPopup:function(){var b=this;this.options.trigger=typeof this.options.trigger==="string"?a("#"+this.options.trigger):this.options.trigger;this.element.closest(".coral-menu").addClass("coral-menu-dynamic coral-shadow").appendTo(document.body);this.positionConfig={my:this.options.my,at:this.options.at,of:this.options.of?this.options.of:this.options.trigger};this.options.trigger.on(this.options.triggerEvent+".coral-menu",function(d){if(b.options.disabled===true){return}var c=a(this);if(b.element.is(":visible")){b.hide()
}else{b.show()}d.preventDefault()});a(document.body).on("click.coral-menu",function(f){var c=b.element.closest(".coral-menu");if(c.is(":hidden")){return}var d=a(f.target);if(d.is(b.options.trigger.get(0))||b.options.trigger.has(d).length>0){return}var g=c.offset();if(f.pageX<g.left||f.pageX>g.left+c.width()||f.pageY<g.top||f.pageY>g.top+c.height()){b.hide(f)}});a(window).on("resize.coral-menu",function(){if(b.element.closest(".coral-menu").is(":visible")){b.align()}})},show:function(){this.align();this.element.closest(".coral-menu").css("z-index",++a.coral.zindex).show()},hide:function(){this.element.closest(".coral-menu").fadeOut("fast")},align:function(){this.element.closest(".coral-menu").css({left:"",top:""}).position({my:this.options.my,at:this.options.at,of:this.options.of?this.options.of:this.options.trigger})},_apply:function(d,c,b){if(typeof d==="string"){return window[d].apply(c,[b])}else{if(a.isFunction(d)){return d.apply(c,[b])}}},_setMenuItemLinkDisabled:function(b){if(b.data("disabled")===true){b.toggleClass(this.componentFullName+"-disabled coral-state-disabled",true).attr("aria-disabled",true)}else{b.toggleClass(this.componentFullName+"-disabled coral-state-disabled",false).attr("aria-disabled",false)}},_bindMenuItemClick:function(c){var b=c.options.onClick;c.links.on("click",function(){if(c.options.disabled===true){return}var d={};if(a(this).parent("li").attr("data-id")!=null){d.id=a(this).parent("li").attr("data-id")}if(a(this).attr("data-target")!=null){d.target=a(this).attr("data-target")}if(a(this).attr("data-name")!=null){d.name=a(this).attr("data-name")}if(a(this).attr("data-url")!=null){d.url=a(this).attr("data-url")}if(a(this).find(":checkbox,:radio").length>0){d.hasChk=true;d.checked=a(this).find(":checkbox,:radio").prop("checked")}else{d.hasChk=false}var e={target:c,currentTarget:c,preventDefault:a.noop};c._trigger("onClick",e,d)})},setActiveMenu:function(c){var b=this;if(c==null||c.length==0){return}a.each(c,function(){var d=b.element.find("[data-name='"+this+"']");
d.parent().addClass("coral-menuitem-current")})},setCurrenMenu:function(b){if(b==null||b.length==0){return}this.element.find(">li>a").each(function(){var d=a(this),c=d.attr("data-name");if(c!==b){return}d.parent().addClass("coral-menuitem-current");a(this).parent().siblings().removeClass("coral-menuitem-current")})}})})(jQuery);$.component("coral.navigationmenu",$.coral.basemenu,{options:{collapsible:true,active:0,textAlign:"left",role:"navigationmenu",menus:"ul",icons:{activeHeader:"icon-arrow-down",header:"icon-arrow-right2"},header:"> li > :first-child,> :not(li):even"},_activate:function(a){var b=this._findActive(a)[0];if(b===this.active[0]){return}b=b||this.active[0];this._eventHandler({target:b,currentTarget:b,preventDefault:$.noop})},_findActive:function(a){return typeof a==="number"?this.headers.eq(a):$()},_setOption:function(a,b){if(a==="active"){this._activate(b);return}this._super(a,b)},_create:function(){var a=this;this._generateULContent();this._render();this.links=this.element.find(".coral-menuitem-link:not(.coral-state-disabled)");this._on({"mousedown .coral-navigationmenu-header":function(b){b.preventDefault()},"click .coral-menuitem-link":function(c){c.preventDefault();var e=$(c.target).closest(".coral-menuitem-link"),b=$(c.target).closest(".coral-menu-parent");if(b.not(".coral-state-disabled").length){b.siblings().find(">ul").attr("aria-expanded",false).slideUp();b.find(">.icon").removeClass(a.options.icons.activeHeader).addClass(a.options.icons.header);if(!c.isPropagationStopped()){this.mouseHandled=true}var d=b.find(">ul");if(!e.parent().hasClass("coral-menu-parent")){this.oldActive=this.active||$();this.active=e;this.oldActive.removeClass("coral-state-highlight");ui={item:this.active,target:this.active.attr("href")};this.active.addClass("coral-state-highlight");this._trigger("onSelect",c,ui)}else{if(d.attr("aria-expanded")=="true"){d.attr("aria-expanded",false).slideUp()}else{d.attr("aria-expanded",true).slideDown();b.find(">.icon").removeClass(a.options.icons.header).addClass(a.options.icons.activeHeader)
}}}},"mouseenter .coral-menuitem-link":function(c){c.preventDefault();var d=$(c.target).closest(".coral-menuitem-link");var b=$(c.target).closest(".coral-menu-parent");if(b.not(".coral-state-disabled").length){if(!d.parent().hasClass("coral-menu-parent")){d.addClass("coral-state-hover")}}},"mouseleave .coral-menuitem-link":function(c){c.preventDefault();var d=$(c.target).closest(".coral-menuitem-link");var b=$(c.target).closest(".coral-menu-parent");if(b.not(".coral-state-disabled").length){if(!d.parent().hasClass("coral-menu-parent")){d.removeClass("coral-state-hover")}}}});this._super()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("coral-navigationmenu-header coral-state-default")},_render:function(){var c=this;this.element.addClass("coral-helper-reset coral-navigationmenu coral-menu").attr("role","navigationmenu");this.element.uniqueId();this.options.id=this.element.attr("id");this._processPanels();submenus=this.element.find(this.options.menus);submenus.filter(":not(.coral-menu)").addClass("coral-menu-list coral-helper-reset").attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=$(this),d=e.parent();d.attr("aria-haspopup","true");e.attr("aria-labelledby",d.attr("id"))});menus=submenus.add(this.element);items=menus.find(this.options.items);items.not(".coral-menu-item").each(function(){var d=$(this);if(that._isDivider(d)){d.addClass("coral-component-content coral-menu-divider")}});this.element.find("li").each(function(){var g=$(this),e=g.children("a"),f=e.data("icon"),h=typeof(g.parent().parent("li").attr("data-level"))=="undefined"?0:parseInt(g.parent().parent("li").attr("data-level"))+1;e.addClass("coral-menuitem-link coral-state-default coral-corner-all").contents().wrap('<span class="coral-menuitem-text" />');g.addClass("coral-menuitem coral-component coral-corner-all").attr("data-level",h).addClass("level"+h);if(g.children("ul").length>0){var d=g.children("ul");g.addClass("coral-menu-parent");
d.addClass("coral-menu-list coral-helper-reset");e.prepend('<span style="float:left;" class="coral-icon-arrow-down icon icon-arrow-down2"></span>')}else{if(c.options.textAlign=="right"){e.prepend('<span style="float:left;visibility:hidden;" class="icon icon-arrow-down2"></span>')}}if(c.options.textAlign=="right"){$("<span class='coral-empty' style='width:"+h*16+"px;height:"+16+"px;'></span>").prependTo(e)}});var a=".coral-navigationmenu li > a[data-target='"+this.options.active+"'], .coral-navigationmenu li > a[href='"+this.options.active+"']";var b=$(a);b.parents("ul").show();if(!b.parent().hasClass("coral-menu-parent")){b.addClass("coral-state-highlight");this.oldActive=b;this.active=b}}});(function(a){var b=a.component("coral.menu",{version:"4.0.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"coral-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",onBlur:null,onFocus:null,onSelect:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("coral-menu coral-component coral-component-content").toggleClass("coral-menu-icons",!!this.element.find(".coral-icon").length).attr({role:this.options.role,tabIndex:0});if(this.options.disabled){this.element.addClass("coral-state-disabled").attr("aria-disabled","true")}this._on({"mousedown .coral-menu-item":function(c){c.preventDefault()},"click .coral-menu-item":function(c){var d=a(c.target);if(!this.mouseHandled&&d.not(".coral-state-disabled").length){this.select(c);if(!c.isPropagationStopped()){this.mouseHandled=true}if(d.has(".coral-menu").length){this.expand(c)}else{if(!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".coral-menu").length){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".coral-menu").length===1){clearTimeout(this.timer)}}}}},"mouseenter .coral-menu-item":function(c){if(this.previousFilter){return}var d=a(c.currentTarget);d.siblings(".coral-state-active").removeClass("coral-state-active");
this.focus(c,d)},mouseleave:"collapseAll","mouseleave .coral-menu":"collapseAll",focus:function(e,c){var d=this.active||this.element.find(this.options.items).eq(0);if(!c){this.focus(e,d)}},blur:function(c){this._delay(function(){if(!a.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(c)}})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(c){if(this._closeOnDocumentClick(c)){this.collapseAll(c)}this.mouseHandled=false}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".coral-menu").addBack().removeClass("coral-menu coral-component coral-component-content coral-menu-icons coral-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".coral-menu-item").removeClass("coral-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("coral-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var c=a(this);if(c.data("coral-menu-submenu-carat")){c.remove()}});this.element.find(".coral-menu-divider").removeClass("coral-menu-divider coral-component-content")},_keydown:function(g){var d,f,h,e,c=true;switch(g.keyCode){case a.coral.keyCode.PAGE_UP:this.previousPage(g);break;case a.coral.keyCode.PAGE_DOWN:this.nextPage(g);break;case a.coral.keyCode.HOME:this._move("first","first",g);break;case a.coral.keyCode.END:this._move("last","last",g);break;case a.coral.keyCode.UP:this.previous(g);break;case a.coral.keyCode.DOWN:this.next(g);break;case a.coral.keyCode.LEFT:this.collapse(g);break;case a.coral.keyCode.RIGHT:if(this.active&&!this.active.is(".coral-state-disabled")){this.expand(g)}break;case a.coral.keyCode.ENTER:case a.coral.keyCode.SPACE:this._activate(g);break;case a.coral.keyCode.ESCAPE:this.collapse(g);break;default:c=false;f=this.previousFilter||"";h=String.fromCharCode(g.keyCode);
e=false;clearTimeout(this.filterTimer);if(h===f){e=true}else{h=f+h}d=this._filterMenuItems(h);d=e&&d.index(this.active.next())!==-1?this.active.nextAll(".coral-menu-item"):d;if(!d.length){h=String.fromCharCode(g.keyCode);d=this._filterMenuItems(h)}if(d.length){this.focus(g,d);this.previousFilter=h;this.filterTimer=this._delay(function(){delete this.previousFilter},1000)}else{delete this.previousFilter}}if(c){g.preventDefault()}},_activate:function(c){if(!this.active.is(".coral-state-disabled")){if(this.active.is("[aria-haspopup='true']")){this.expand(c)}else{this.select(c)}}},refresh:function(){var g,d,f=this,e=this.options.icons.submenu,c=this.element.find(this.options.menus);this.element.toggleClass("coral-menu-icons",!!this.element.find(".coral-icon").length);c.filter(":not(.coral-menu)").addClass("coral-menu coral-component coral-component-content coral-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var j=a(this),i=j.parent(),h=a("<span>").addClass("coral-menu-icon coral-icon "+e).data("coral-menu-submenu-carat",true);i.attr("aria-haspopup","true").prepend(h);j.attr("aria-labelledby",i.attr("id"))});g=c.add(this.element);d=g.find(this.options.items);d.not(".coral-menu-item").each(function(){var h=a(this);if(f._isDivider(h)){h.addClass("coral-component-content coral-menu-divider")}});d.not(".coral-menu-item, .coral-menu-divider").addClass("coral-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});d.filter(".coral-state-disabled").attr("aria-disabled","true");if(this.active&&!a.contains(this.element[0],this.active[0])){this.blur()}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(c,d){if(c==="icons"){this.element.find(".coral-menu-icon").removeClass(this.options.icons.submenu).addClass(d.submenu)}if(c==="disabled"){this.element.toggleClass("coral-state-disabled",!!d).attr("aria-disabled",d)}this._super(c,d)},focus:function(d,c){var f,e;this.blur(d,d&&d.type==="focus");
this._scrollIntoView(c);this.active=c.first();e=this.active.addClass("coral-state-focus").removeClass("coral-state-active");if(this.options.role){this.element.attr("aria-activedescendant",e.attr("id"))}this.active.parent().closest(".coral-menu-item").addClass("coral-state-active");if(d&&d.type==="keydown"){this._close()}else{this.timer=this._delay(function(){this._close()},this.delay)}f=c.children(".coral-menu");if(f.length&&d&&(/^mouse/.test(d.type))){this._startOpening(f)}this.activeMenu=c.parent();this._trigger("onFocus",d,{item:c})},_scrollIntoView:function(f){var i,e,g,c,d,h;if(this._hasScroll()){i=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0;e=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0;g=f.offset().top-this.activeMenu.offset().top-i-e;c=this.activeMenu.scrollTop();d=this.activeMenu.height();h=f.outerHeight();if(g<0){this.activeMenu.scrollTop(c+g)}else{if(g+h>d){this.activeMenu.scrollTop(c+g-d+h)}}}},blur:function(d,c){if(!c){clearTimeout(this.timer)}if(!this.active){return}this.active.removeClass("coral-state-focus");this.active=null;this._trigger("onBlur",d,{item:this.active})},_startOpening:function(c){clearTimeout(this.timer);if(c.attr("aria-hidden")!=="true"){return}this.timer=this._delay(function(){this._close();this._open(c)},this.delay)},_open:function(d){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".coral-menu").not(d.parents(".coral-menu")).hide().attr("aria-hidden","true");d.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(d,c){clearTimeout(this.timer);this.timer=this._delay(function(){var e=c?this.element:a(d&&d.target).closest(this.element.find(".coral-menu"));if(!e.length){e=this.element}this._close(e);this.blur(d);this.activeMenu=e},this.delay)},_close:function(c){if(!c){c=this.active?this.active.parent():this.element}c.find(".coral-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".coral-state-active").not(".coral-state-focus").removeClass("coral-state-active")
},_closeOnDocumentClick:function(c){return !a(c.target).closest(".coral-menu").length},_isDivider:function(c){return !/[^\-\u2014\u2013\s]/.test(c.text())},collapse:function(d){var c=this.active&&this.active.parent().closest(".coral-menu-item",this.element);if(c&&c.length){this._close();this.focus(d,c)}},expand:function(d){var c=this.active&&this.active.children(".coral-menu ").find(this.options.items).first();if(c&&c.length){this._open(c.parent());this._delay(function(){this.focus(d,c)})}},next:function(c){this._move("next","first",c)},previous:function(c){this._move("prev","last",c)},isFirstItem:function(){return this.active&&!this.active.prevAll(".coral-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".coral-menu-item").length},_move:function(f,d,e){var c;if(this.active){if(f==="first"||f==="last"){c=this.active[f==="first"?"prevAll":"nextAll"](".coral-menu-item").eq(-1)}else{c=this.active[f+"All"](".coral-menu-item").eq(0)}}if(!c||!c.length||!this.active){c=this.activeMenu.find(this.options.items)[d]()}this.focus(e,c)},nextPage:function(e){var d,f,c;if(!this.active){this.next(e);return}if(this.isLastItem()){return}if(this._hasScroll()){f=this.active.offset().top;c=this.element.height();this.active.nextAll(".coral-menu-item").each(function(){d=a(this);return d.offset().top-f-c<0});this.focus(e,d)}else{this.focus(e,this.activeMenu.find(this.options.items)[!this.active?"first":"last"]())}},previousPage:function(e){var d,f,c;if(!this.active){this.next(e);return}if(this.isFirstItem()){return}if(this._hasScroll()){f=this.active.offset().top;c=this.element.height();this.active.prevAll(".coral-menu-item").each(function(){d=a(this);return d.offset().top-f+c>0});this.focus(e,d)}else{this.focus(e,this.activeMenu.find(this.options.items).first())}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(c){this.active=this.active||a(c.target).closest(".coral-menu-item");var d={item:this.active};
if(!this.active.has(".coral-menu").length){this.collapseAll(c,true)}this._trigger("onSelect",c,d)},_filterMenuItems:function(e){var c=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),d=new RegExp("^"+c,"i");return this.activeMenu.find(this.options.items).filter(".coral-menu-item").filter(function(){return d.test(a.trim(a(this).text()))})}})})(jQuery);(function(a){a.component("coral.breadcrumb",{_create:function(){this.element.wrap('<div class="coral-breadcrumb coral-module coral-component coral-component-header coral-helper-clearfix coral-corner-all" role="menu">');this.element.children("li").each(function(c){var d=a(this);d.attr("role","menuitem");var b=d.children("a");b.addClass("coral-menuitem-link coral-corner-all").contents().wrap('<span class="coral-menuitem-text" />');if(c>0){d.before('<li class="coral-breadcrumb-chevron coral-icon coral-icon-triangle-1-e"></li>')}else{b.addClass("coral-icon coral-icon-home")}})}})})(jQuery);(function(a){a.component("coral.tieredmenu",a.coral.basemenu,{options:{autoDisplay:true},_create:function(){this._generateULContent();this._render();this.links=this.element.find(".coral-menuitem-link");this._bindEvents();this._super()},_render:function(){var b=this;this.element.addClass("coral-menu-list coral-helper-reset").wrap('<div class="coral-tieredmenu coral-menu coral-component coral-component-content coral-corner-all coral-helper-clearfix" />');if(this.options.id){this.element.parent().attr("id",this.options.id)}else{this.element.parent().uniqueId();this.options.id=this.element.parent().attr("id")}this.element.find("li").each(function(){var e=a(this),c=e.children("a"),d=c.data("icon");b._setMenuItemLinkDisabled(c);c.addClass("coral-menuitem-link coral-corner-all").contents().wrap('<span class="coral-menuitem-text" />');if(d){c.prepend('<span class="coral-menuitem-icon coral-icon '+d+'"></span>')}e.addClass("coral-menuitem coral-component coral-corner-all");if(e.children("ul").length>0){e.addClass("coral-menu-parent");e.children("ul").addClass("coral-component-content coral-menu-list coral-corner-all coral-helper-clearfix coral-menu-child coral-shadow");
c.prepend('<span class="coral-icon coral-icon-triangle-1-e"></span>')}})},_bindEvents:function(){this._bindItemEvents();this._bindDocumentHandler()},_bindMenuItemClick:function(d,c){var b=[];if(typeof c==="boolean"&&!c){b=this.element.find("> .coral-menuitem > .coral-menuitem-link")}d.links.not(b).on("click",function(){if(d.options.disabled===true||a(this).hasClass("coral-state-disabled")){return}var e={};if(a(this).parent("li").attr("data-id")!=null){e.id=a(this).parent("li").attr("data-id")}if(a(this).attr("data-target")!=null){e.target=a(this).attr("data-target")}if(a(this).attr("data-name")!=null){e.name=a(this).attr("data-name")}if(a(this).attr("data-url")!=null){e.url=a(this).attr("data-url")}if(a(this).find(":checkbox,:radio").length>0){e.hasChk=true;e.checked=a(this).find(":checkbox,:radio").prop("checked")}else{e.hasChk=false}var f={target:d,currentTarget:d,preventDefault:a.noop};d._trigger("onClick",f,e);d.hide()})},_bindItemEvents:function(){var b=this;this.links.on("mouseenter.coral-menu",function(){if(b.options.disabled===true||a(this).hasClass("coral-state-disabled")){return}var c=a(this),e=c.parent(),d=b.options.autoDisplay,f=e.siblings(".coral-menuitem-active");if(f.length===1){b._deactivate(f)}if(d||b.active){if(e.hasClass("coral-menuitem-active")){b._reactivate(e)}else{b._activate(e)}}else{b._highlight(e)}});if(this.options.autoDisplay===false){this.rootLinks=this.element.find("> .coral-menuitem > .coral-menuitem-link");this.rootLinks.data("primecoral-tieredmenu-rootlink",this.options.id).find("*").data("primecoral-tieredmenu-rootlink",this.options.id);this.rootLinks.on("click.coral-menu",function(i){if(b.options.disabled===true||a(this).hasClass("coral-state-disabled")){return}var g=a(this),h=g.parent(),d=h.children("ul.coral-menu-child");if(d.length===1){if(d.is(":visible")){b.active=false;b._deactivate(h)}else{b.active=true;b._highlight(h);b._showSubmenu(h,d)}}var c={};if(a(this).parent("li").attr("data-id")!=null){c.id=a(this).parent("li").attr("data-id")
}if(a(this).attr("data-target")!=null){c.target=a(this).attr("data-target")}if(a(this).attr("data-name")!=null){c.name=a(this).attr("data-name")}if(a(this).attr("data-url")!=null){c.url=a(this).attr("data-url")}if(a(this).find(":checkbox,:radio").length>0){c.hasChk=true;c.checked=a(this).find(":checkbox,:radio").prop("checked")}else{c.hasChk=false}var f={target:b,currentTarget:b,preventDefault:a.noop};b._trigger("onClick",f,c);if(!a(this).parent("li").hasClass("coral-menu-parent")){b.hide()}});this._bindMenuItemClick(b,false)}else{this._bindMenuItemClick(b,true)}this.element.parent().find("ul.coral-menu-list").on("mouseleave.coral-menu",function(c){if(b.activeitem){b._deactivate(b.activeitem)}c.stopPropagation()})},add:function(b,d){if((typeof b!=="string"&&typeof b!=="number"&&b!==null)||(typeof d!=="object")){return}var c=this;if(typeof b==="string"||b==null){this._addByParentId(b,d)}else{if(typeof b==="number"){this._addByIndex(b,d)}}},_addByParentId:function(c,e){var d=this,b=this.element.find(".coral-menuitem").filter("[data-id$='"+c+"']");if(!b.length&&c!==null){return}if(c===null){this.element.append(this._getAddHTML(e,false));var f=this._renderAddHTML();this._bindAddItemEvents(f);this._bindLinkRootEvents(a(f[0]))}else{if(this._hasChildren(b)){b.children("ul").append(this._getAddHTML(e,false))}else{b.append(this._getAddHTML(e,true))}var g=this._renderAddHTML(b);this._bindAddItemEvents(g)}},_getAddHTML:function(e,f){var d="";if(!(e instanceof Array)){e=[e]}if(typeof f==="boolean"&&f){d+="<ul>"}for(var c=0;c<e.length;c++){if(e[c].id!=""){d+='<li data-id="'+e[c].id+'">'}else{d+="<li>"}d+=this._generateANode(e[c]);var b=e[c].items;if(b.length>0){d=this._generateHTML(d,b)}d+="</li>"}if(typeof f==="boolean"&&f){d+="</ul>"}return d},_renderAddHTML:function(b){var c=this,d=this.element.find("li").not(".coral-menuitem");if(b&&!b.children("ul").hasClass("coral-menu-list")){b.addClass("coral-menu-parent");b.children("ul").addClass("coral-component-content coral-menu-list coral-corner-all coral-helper-clearfix coral-menu-child coral-shadow");
b.children("a").prepend('<span class="coral-icon coral-icon-triangle-1-e"></span>')}d.each(function(){var g=a(this),e=g.children("a"),f=e.data("icon");c._setMenuItemLinkDisabled(e);e.addClass("coral-menuitem-link coral-corner-all").contents().wrap('<span class="coral-menuitem-text" />');if(f){e.prepend('<span class="coral-menuitem-icon coral-icon '+f+'"></span>')}g.addClass("coral-menuitem coral-component coral-corner-all");if(g.children("ul").length>0){g.addClass("coral-menu-parent");g.children("ul").addClass("coral-component-content coral-menu-list coral-corner-all coral-helper-clearfix coral-menu-child coral-shadow");e.prepend('<span class="coral-icon coral-icon-triangle-1-e"></span>')}});return d.find(".coral-menuitem-link")},_bindLinkRootEvents:function(c){var b=this;c.data("primecoral-tieredmenu-rootlink",this.options.id).find("*").data("primecoral-tieredmenu-rootlink",this.options.id);c.on("click.coral-menu",function(h){if(b.options.disabled===true||a(this).hasClass("coral-state-disabled")){return}var f=a(this),g=f.parent(),d=g.children("ul.coral-menu-child");if(d.length===1){if(d.is(":visible")){b.active=false;b._deactivate(g)}else{b.active=true;b._highlight(g);b._showSubmenu(g,d)}}})},_bindAddItemEvents:function(c){var b=this;c.on("click",function(){if(b.options.disabled===true||a(this).hasClass("coral-state-disabled")){return}var d={};if(a(this).parent("li").attr("data-id")!=null){d.id=a(this).parent("li").attr("data-id")}if(a(this).attr("data-target")!=null){d.target=a(this).attr("data-target")}if(a(this).attr("data-name")!=null){d.name=a(this).attr("data-name")}if(a(this).attr("data-url")!=null){d.url=a(this).attr("data-url")}if(a(this).find(":checkbox,:radio").length>0){d.hasChk=true;d.checked=a(this).find(":checkbox,:radio").prop("checked")}else{d.hasChk=false}var e={target:b,currentTarget:b,preventDefault:a.noop};b._trigger("onClick",e,d);b.hide()});c.on("mouseenter",function(){if(b.options.disabled===true||a(this).hasClass("coral-state-disabled")){return
}var d=a(this),f=d.parent(),e=b.options.autoDisplay;var g=f.siblings(".coral-menuitem-active");if(g.length===1){b._deactivate(g)}if(e||b.active){if(f.hasClass("coral-menuitem-active")){b._reactivate(f)}else{b._activate(f)}}else{b._highlight(f)}});c.parents("li").find("ul.coral-menu-list").on("mouseleave.coral-menu",function(d){if(b.activeitem){b._deactivate(b.activeitem)}d.stopPropagation()})},_hasChildren:function(b){if(b.hasClass("coral-menu-parent")){return true}else{return false}},_getLength:function(){return this.element.children("li").length},_addByIndex:function(c,e){var d=this,b=parseInt(c);if(b<0||b>this._getLength()){return}if(this._getLength()==0||b==this._getLength()){this.element.append(this._getAddHTML(e,false))}else{this.element.children("li:eq("+b+")").before(this._getAddHTML(e,false))}var f=this._renderAddHTML();this._bindAddItemEvents(f);this._bindLinkRootEvents(a(f[0]))},remove:function(){var b=this.element.children("li");if(!b.length){return}b.remove()},removeItem:function(b){var c=this;if(typeof b==="string"){this._removeById(b)}else{this._removeByIndex(b)}},_removeById:function(c){var b=this.element.find(".coral-menuitem").filter("[data-id$='"+c+"']");if(!b.length){return}if(!b.siblings("li").length){b.parent("ul").remove()}else{b.remove()}},_removeByIndex:function(c){var b=parseInt(c);if(b<0||b>(this._getLength()-1)){return}var d=this.element.children("li.coral-menuitem:eq("+b+")");if(!d.length){return}d.remove()},updateItem:function(c,b){var d=this;if(typeof c==="string"){this._updateById(c,b)}else{this._updateByIndex(c,b)}},_updateById:function(d,b){var c=this.element.find(".coral-menuitem").filter("[data-id$='"+d+"']");if(!c.length){return}c.children(".coral-menuitem-link").children(".coral-menuitem-text").html(b)},_updateByIndex:function(d,c){var b=parseInt(d);if(b<0||b>(this._getLength()-1)){return}var e=this.element.children("li.coral-menuitem:eq("+b+")");if(!e.length){return}e.children(".coral-menuitem-link").children(".coral-menuitem-text").html(c)
},_bindDocumentHandler:function(){var b=this;a(document.body).on("click.coral-menu",function(d){var c=a(d.target);if(c.data("primecoral-tieredmenu-rootlink")===b.options.id){return}b.active=false;b.element.find("li.coral-menuitem-active").each(function(){b._deactivate(a(this),true)})})},enable:function(){var b=this.element.find(".coral-menuitem");if(!b.length){return}b.children(".coral-menuitem-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",false).attr("aria-disabled",false)},enableItem:function(b){var c=this;if(typeof b==="string"){this._enableItemById(b)}else{this._enableItemByIndex(b)}},_enableItemById:function(c){var b=this.element.find(".coral-menuitem").filter("[data-id$='"+c+"']");if(!b.length){return}b.children(".coral-menuitem-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",false).attr("aria-disabled",false)},_enableItemByIndex:function(c){var b=parseInt(c);if(b<0||b>(this._getLength()-1)){return}var d=this.element.children("li.coral-menuitem:eq("+b+")");if(!d.length){return}d.children(".coral-menuitem-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",false).attr("aria-disabled",false)},disable:function(){var b=this.element.find(".coral-menuitem");if(!b.length){return}b.children(".coral-menuitem-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",true).attr("aria-disabled",true)},disableItem:function(b){var c=this;if(typeof b==="string"){return this._disableItemById(b)}else{return this._disableItemByIndex(b)}},_disableItemById:function(c){var b=this.element.find(".coral-menuitem").filter("[data-id$='"+c+"']");if(!b.length){return}b.children(".coral-menuitem-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",true).attr("aria-disabled",true)},_disableItemByIndex:function(c){var b=parseInt(c);if(b<0||b>(this._getLength()-1)){return}var d=this.element.children("li.coral-menuitem:eq("+b+")");if(!d.length){return}d.children(".coral-menuitem-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",true).attr("aria-disabled",true)
},hideAll:function(){var b=this.element.children("li");if(!b.length){return}b.hide()},hideItem:function(b){var c=this;if(typeof b==="string"){return c._hideById(b)}else{return c._hideByIndex(b)}},_hideById:function(c){var b=this.element.find(".coral-menuitem").filter("[data-id$='"+c+"']");if(!b.length){return}b.toggleClass("coral-tieredmenu-hidden",true)},_hideByIndex:function(c){var b=parseInt(c);if(b<0||b>(this._getLength()-1)){return}var d=this.element.children("li.coral-menuitem:eq("+b+")");if(!d.length){return}d.toggleClass("coral-tieredmenu-hidden",true)},showAll:function(){var b=this.element.children("li");if(!b.length){return}b.show()},showItem:function(b){var c=this;if(typeof b==="string"){return c._showById(b)}else{return c._showByIndex(b)}},_showById:function(c){var b=this.element.find(".coral-menuitem").filter("[data-id$='"+c+"']");if(!b.length){return}b.toggleClass("coral-tieredmenu-hidden",false)},_showByIndex:function(c){var b=parseInt(c);if(b<0||b>(this._getLength()-1)){return}var d=this.element.children("li.coral-menuitem:eq("+b+")");if(!d.length){return}d.toggleClass("coral-tieredmenu-hidden",false)},_deactivate:function(c,b){this.activeitem=null;c.children("a.coral-menuitem-link").removeClass("coral-state-hover");c.removeClass("coral-menuitem-active");if(b){c.children("ul.coral-menu-child:visible").fadeOut("fast")}else{c.children("ul.coral-menu-child:visible").hide()}},_activate:function(c){this._highlight(c);var b=c.children("ul.coral-menu-child");if(b.length===1){this._showSubmenu(c,b)}},_reactivate:function(e){this.activeitem=e;var d=e.children("ul.coral-menu-child"),c=d.children("li.coral-menuitem-active:first"),b=this;if(c.length===1){b._deactivate(c)}},_highlight:function(b){this.activeitem=b;b.children("a.coral-menuitem-link").addClass("coral-state-hover");b.addClass("coral-menuitem-active")},_showSubmenu:function(c,b){if(!b.children("li:not(.coral-tieredmenu-hidden)").length){return}if(this.options.disabled===true){return}b.css({left:c.outerWidth(),top:0,"z-index":++a.coral.zindex});
b.show()}})})(jQuery);(function(a){a.component("coral.menubar",a.coral.tieredmenu,{options:{autoDisplay:true},component:function(){return this.element.parent()},_create:function(){this._super();this.options.id=this.element.parent().removeAttr("id").uniqueId();this.element.parent().removeClass("coral-tieredmenu").addClass("coral-menubar");this.element.find(">li>ul").addClass("coral-dropdown-menu")},_showSubmenu:function(f,d){var e=a(window),c=null,b={"z-index":++a.coral.zindex};if(f.parent().hasClass("coral-menu-child")){b.left=f.outerWidth();b.top=0;c=f.offset().top-e.scrollTop()}else{b.left=0;b.top=f.outerHeight();c=f.offset().top+b.top-e.scrollTop()}d.css("height","auto");if((c+d.outerHeight())>e.height()){b.overflow="auto";b.height=e.height()-(c+20)}d.css(b).show()}})})(jQuery);(function(a){a.component("coral.slidemenu",a.coral.basemenu,{_create:function(){this._generateULContent();this._render();this.rootList=this.element;this.content=this.element.parent();this.wrapper=this.content.parent();this.container=this.wrapper.parent();this.submenus=this.container.find("ul.coral-menu-list");this.links=this.element.find("a.coral-menuitem-link:not(.coral-state-disabled)");this.backward=this.wrapper.children("div.coral-slidemenu-backward");this.stack=[];this.jqWidth=this.container.width();var b=this;if(!this.element.hasClass("coral-menu-dynamic")){this._applyDimensions()}this._super();this._bindEvents()},_render:function(){var b=this;this.element.addClass("coral-menu-list coral-helper-reset").wrap('<div class="coral-menu coral-slidemenu coral-component coral-component-content coral-corner-all coral-helper-clearfix"/>').wrap('<div class="coral-slidemenu-wrapper" />').after('<div class="coral-slidemenu-backward coral-component-header coral-corner-all coral-helper-clearfix">\n                    <span class="coral-icon coral-icon-triangle-1-w"></span>Back</div>').wrap('<div class="coral-slidemenu-content" />');this.element.parent().uniqueId();this.options.id=this.element.parent().attr("id");
this.element.find("li").each(function(){var e=a(this),c=e.children("a"),d=c.data("icon");b._setMenuItemLinkDisabled(c);c.addClass("coral-menuitem-link coral-corner-all").contents().wrap('<span class="coral-menuitem-text" />');if(d){c.prepend('<span class="coral-menuitem-icon coral-icon '+d+'"></span>')}e.addClass("coral-menuitem coral-component coral-corner-all");if(e.children("ul").length>0){e.addClass("coral-menu-parent");e.children("ul").addClass("coral-component-content coral-menu-list coral-corner-all coral-helper-clearfix coral-menu-child coral-shadow");c.prepend('<span class="coral-icon coral-icon-triangle-1-e"></span>')}})},_bindEvents:function(){var b=this;this._bindMenuItemClick(b);this.links.on("mouseenter.coral-menu",function(){a(this).addClass("coral-state-hover")}).on("mouseleave.coral-menu",function(){a(this).removeClass("coral-state-hover")}).on("click.coral-menu",function(){var d=a(this),c=d.next();if(c.length==1){b._forward(c)}});this.backward.on("click.coral-menu",function(){b._back()})},_forward:function(c){var d=this;this._push(c);var b=-1*(this._depth()*this.jqWidth);c.show().css({left:this.jqWidth});this.rootList.animate({left:b},300,"easeInOutCirc",function(){if(d.backward.is(":hidden")){d.backward.fadeIn("fast")}})},_back:function(){var d=this,c=this._pop(),e=this._depth();var b=-1*(e*this.jqWidth);this.rootList.animate({left:b},300,"easeInOutCirc",function(){c.hide();if(e===0){d.backward.fadeOut("fast")}})},_push:function(b){this.stack.push(b)},_pop:function(){return this.stack.pop()},_last:function(){return this.stack[this.stack.length-1]},_depth:function(){return this.stack.length},_applyDimensions:function(){this.submenus.width(this.container.width());this.wrapper.height(this.rootList.outerHeight(true)+this.backward.outerHeight(true));this.content.height(this.rootList.outerHeight(true));this.rendered=true},show:function(){this.align();this.container.css("z-index",++a.coral.zindex).show();if(!this.rendered){this._applyDimensions()}}})})(jQuery);
(function(a){a.component("coral.contextmenu",a.coral.tieredmenu,{options:{autoDisplay:true,target:null,event:"contextmenu"},_create:function(){this._super();this.element.parent().removeClass("coral-tieredmenu").addClass("coral-contextmenu coral-menu-dynamic coral-shadow coral-contextmenu");var b=this;this.options.target=typeof this.options.target==="string"?a("#"+this.options.target):this.options.target;this.options.target=this.options.target||a(document);if(!this.element.parent().parent().is(document.body)){this.element.parent().appendTo("body")}this.options.target.on(this.options.event+".coral-contextmenu",function(c){b.show(c)})},_bindItemEvents:function(){this._super();var b=this;this.links.bind("click",function(){if(a(this).parent().hasClass("coral-menu-parent")){return false}b._hide()})},_bindDocumentHandler:function(){var b=this;a(document.body).bind("click.coral-contextmenu",function(c){if(b.element.parent().is(":hidden")){return}b._hide()})},show:function(h){if(this.options.disabled===true){h.preventDefault();h.stopPropagation();return}a(document.body).children(".coral-contextmenu:visible").hide();var g=a(window),f=h.pageX,d=h.pageY,c=this.element.parent().outerWidth(),b=this.element.parent().outerHeight();if((f+c)>(g.width())+g.scrollLeft()){f=f-c}if((d+b)>(g.height()+g.scrollTop())){d=d-b}if(this.options.beforeShow){this.options.beforeShow.call(this)}this.element.parent().css({left:f,top:d,"z-index":++a.coral.zindex}).show();h.preventDefault();h.stopPropagation()},_hide:function(){var b=this;this.element.parent().find("li.coral-menuitem-active").each(function(){b._deactivate(a(this),true)});this.element.parent().fadeOut("fast")},isVisible:function(){return this.element.parent().is(":visible")},getTarget:function(){return this.jqTarget}})})(jQuery);(function(a){a.component("coral.navigatemenubase",a.coral.basemenu,{options:{autoDisplay:true},_create:function(){this._generateULContent();this._render();this.links=this.element.find(".coral-menuitem-link:not(.coral-state-disabled)");
this._bindEvents();this._super()},_render:function(){var b=this;this.element.addClass("coral-menu-list coral-helper-reset").wrap('<div class="coral-tieredmenu coral-menu coral-component coral-component-content coral-corner-all coral-helper-clearfix" />');this.element.parent().uniqueId();this.options.id=this.element.parent().attr("id");this.element.find("li").each(function(){var e=a(this),c=e.children("a"),d=c.data("icon");b._setMenuItemLinkDisabled(c);c.addClass("coral-menuitem-link coral-corner-all").contents().wrap('<span class="coral-menuitem-text" />');if(d){c.prepend('<span class="coral-menuitem-icon coral-icon '+d+'"></span>')}e.addClass("coral-menuitem coral-component coral-corner-all");if(e.children("ul").length>0){e.addClass("coral-menu-parent");e.css("position","static");e.children("ul").css("width","100%");e.find("ul li").css("width","auto");e.find("ul li a").css("width","auto");e.children("ul").addClass("coral-component-content coral-menu-list coral-corner-all coral-helper-clearfix coral-menu-child coral-shadow");c.prepend('<span class="coral-icon coral-icon-triangle-1-e"></span>')}})},_bindEvents:function(){this._bindItemEvents();this._bindDocumentHandler()},_bindItemEvents:function(){var b=this;this._bindMenuItemClick(b);this.links.on("mouseenter.coral-menu",function(){if(b.options.disabled===true){return}var c=a(this),e=c.parent(),d=b.options.autoDisplay;var f=e.siblings(".coral-menuitem-active");if(f.length===1){b._deactivate(f)}if(d||b.active){if(e.hasClass("coral-menuitem-active")){b._reactivate(e)}else{b._activate(e)}}else{b._highlight(e)}});if(this.options.autoDisplay===false){this.rootLinks=this.element.find("> .coral-menuitem > .coral-menuitem-link");this.rootLinks.data("primecoral-tieredmenu-rootlink",this.options.id).find("*").data("primecoral-tieredmenu-rootlink",this.options.id);this.rootLinks.on("click.coral-menu",function(g){var d=a(this),f=d.parent(),c=f.children("ul.coral-menu-child");if(c.length===1){if(c.is(":visible")){b.active=false;
b._deactivate(f)}else{b.active=true;b._highlight(f);b._showSubmenu(f,c)}}})}this.element.parent().find("ul.coral-menu-list").on("mouseleave.coral-menu",function(c){if(b.activeitem){}c.stopPropagation()})},_bindDocumentHandler:function(){var b=this;a(document.body).on("click.coral-menu ",function(d){var c=a(d.target);if(c.data("primecoral-tieredmenu-rootlink")===b.options.id){return}if(c.is("[type='checkbox']")){return}b.active=false;b.element.find("li.coral-menuitem-active").each(function(){if(b.options.fixmenu==="false"){b._deactivate(a(this),true)}})})},_deactivate:function(c,b){this.activeitem=null;c.children("a.coral-menuitem-link").removeClass("coral-state-hover");c.removeClass("coral-menuitem-active");if(b){c.children("ul.coral-menu-child:visible").fadeOut("fast")}else{c.children("ul.coral-menu-child:visible").hide()}},_activate:function(c){this._highlight(c);var b=c.children("ul.coral-menu-child");if(b.length===1){this._showSubmenu(c,b)}},_reactivate:function(e){this.activeitem=e;var d=e.children("ul.coral-menu-child"),c=d.children("li.coral-menuitem-active:first"),b=this;if(c.length===1){b._deactivate(c)}},_highlight:function(b){this.activeitem=b;b.children("a.coral-menuitem-link").addClass("coral-state-hover");b.addClass("coral-menuitem-active")},_showSubmenu:function(c,b){if(this.options.disabled===true){return}b.css({left:c.outerWidth(),top:0,"z-index":++a.coral.zindex});b.show()}})})(jQuery);(function(a){a.component("coral.navigatemenu",a.coral.navigatemenubase,{options:{autoDisplay:true,checkable:null,fixmenu:null},_generateHTML:function(e,f){e+="<ul>";for(var d=0;d<f.length;d++){e+="<li>";e+=this._generateANode(f[d]);var c=f[d].name;var b=f[d].items;if(b.length>0){e=this._generateLast(e,b,c)}e+="</li>"}e+="</ul>";return e},_generateLast:function(d,e,b){d+="<ul>";for(var c=0;c<e.length;c++){d+="<li>";d+=this._generateChbNode(e[c],b);d+="</li>"}d+="</ul>";return d},_generateChbNode:function(f,c){var g="<a";if(f.iconclass!=""){}if(f.name!=""){g+=" data-name='"+f.name+"'"
}if(f.disabled!=""){g+=" data-disabled='"+f.disabled+"'"}if(f.url!=""){g+=" href='"+f.url+"'"}if(f.target!=""){g+=" target='"+f.target+"'"}g+=">";var e=f.checked===true?"checked":"";var b=f.disabled=="true"?"disabled=true":"";var d="<input type='radio' "+b+" name='"+c+"' "+e+" data-id='"+this.element[0].id+"_"+f.name+"'/>";if(this.options.checkable===true){d="<input type='checkbox' "+b+" "+e+" data-id='"+this.element[0].id+"_"+f.name+"'/>"}g+=d;if(f.name!=""){g+=f.name}g+="</a>";return g},_create:function(){this._super();this.element.parent().removeClass("coral-tieredmenu").addClass("coral-navigatemenu");if(this.options.fixmenu!=="false"){var c=a(this.links[0]).parent(":first").find("ul").outerHeight();var b=this.element.parent().outerHeight();this.element.parent().outerHeight(c+b-3)}if(this.options.fixmenu!=="false"){this._activate(a(this.links[0]).parent());a(this.links[0]).parent(":first").find("ul").css("height","auto")}},_showSubmenu:function(f,d){var e=a(window),c=null,b={"z-index":++a.coral.zindex};if(f.parent().hasClass("coral-menu-child")){b.left=f.outerWidth();b.top=0;c=f.offset().top-e.scrollTop()}else{b.left=0;b.top=this.element.parent().outerHeight();c=f.offset().top+b.top-e.scrollTop()}d.css("height","auto");if((c+d.outerHeight())>e.height()){b.overflow="auto";b.height=e.height()-(c+20)}d.css(b).show()},check:function(b,c){a("[data-id='"+this.element[0].id+"_"+b+"']").prop("checked",c)}})})(jQuery);

(function(b,c){b.component("coral.autocomplete",b.coral.control,{version:"4.0.2",defaultElement:"<input>",castProperties:["source","buttons","rootNode","triggers"],options:{appendTo:null,autoFocus:false,allowRepeat:false,asyncType:"post",delay:300,maxLabelWidth:100,multiLineLabel:false,minLength:0,minHeight:1,height:"auto",multiple:false,position:{my:"left top",at:"left bottom",collision:"none"},value:"",text:"",forceSelection:false,defaultValue:"",postMode:"value",required:false,showStar:true,separator:",",buttons:[],errMsg:null,errMsgPosition:"leftBottom",panelHeight:"auto",maxPanelHeight:200,isLabel:false,source:null,valueField:"value",textField:"label",searchField:"valueField",onValidSuccess:null,onValidError:null,onChange:null,onBlur:null,onClose:null,onFocus:null,onOpen:null,oncancel:null,onResponse:null,onSearch:null,onSelect:null,triggers:null,excluded:false},requestIndex:0,pending:0,_create:function(){var d=this;this._prepareInit();this._initAutocomplete();this._initState();this._initSource();this._initData();this._bindEvent();this._setDefaultValue();this._setDefaultText();this.liveRegion=b("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("coral-helper-hidden-accessible").appendTo(this.document[0].body);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}});if(this.options.multiLineLabel){b(this.element).easyText({minWidth:10,maxWidth:200,maxChars:60});this._on(this.document,{click:function(e){if(this.options.readonly||this.options.isLabel){return}this._moveInput("last",e)}})}},_prepareInit:function(){this.lastSelectedItem={};this.selectedItems=[];this.isNewMenu=true},_initAutocomplete:function(){var f=this.options.render=="tree"?"autocompletetree":"autocomplete";if(this.options.multiLineLabel){var e=this,h=this.element[0].nodeName.toLowerCase(),g=h==="textarea",d=h==="input";this.ismultiLineLabel=g?true:d?false:this.element.prop("isContentEditable");this.autocompleteWrapper=b("<span class='coral-"+f+" coral-textboxlist coral-textbox'></span>").insertAfter(this.element);
this.elementBorder=b("<span class='coral-textbox-border coral-corner-all'></span>").css({minHeight:this.options.minHeight+"px",height:this.options.height,overflow:"auto"}).appendTo(this.autocompleteWrapper);this.valuebox=b("<input type='hidden'>").appendTo(this.elementBorder);this.valueMethod=this.valuebox[g||d?"val":"text"];this.textMethod=this.element[g||d?"val":"text"];this.element.addClass("coral-validation-"+f+" coral-autocomplete-input coral-autocomplete-text coral-textbox-default").attr("autocomplete","off");this.textboxlistUl=b("<ul class='coral-textboxlist-ul'><li class='coral-textboxlist-inputLi'></li></ul>");this.textboxlistUl.appendTo(this.elementBorder);this.element.appendTo(this.textboxlistUl.find(".coral-textboxlist-inputLi"));if(this.options.buttons.length>0){this._createButtonPanel()}if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name");this.valuebox.attr("name",this.options.name);this.element.removeAttr("name")}else{if(this.options.name){this.valuebox.attr("name",this.options.name)}}if(this.options.text){this.setText(this.options.text)}if(b.trim(this.valuebox.val())!=""){this.options.value=this.valuebox.val()}if(this.options.showPopup){}}else{var h=this.element[0].nodeName.toLowerCase(),g=h==="textarea",d=h==="input";this.ismultiLineLabel=g?true:d?false:this.element.prop("isContentEditable");this.autocompleteWrapper=b('<span class="coral-'+f+' coral-textbox" style="border-width: 0;"></span>').insertAfter(this.element);this.elementBorder=b('<span class="coral-textbox-border coral-corner-all"></span>').css({minHeight:this.options.minHeight+"px"}).appendTo(this.autocompleteWrapper);this.valuebox=b("<input type='hidden'>").appendTo(this.elementBorder);this.valueMethod=this.valuebox[g||d?"val":"text"];this.textMethod=this.element[g||d?"val":"text"];this.element.addClass("coral-validation-"+f+" coral-autocomplete-input coral-autocomplete-text coral-textbox-default coral-form-element-autocomplete").attr("autocomplete","off");
this.element.appendTo(this.elementBorder);if(this.options.buttons.length>0){this._createButtonPanel()}if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name");this.valuebox.attr("name",this.options.name);this.element.removeAttr("name")}else{if(this.options.name){this.valuebox.attr("name",this.options.name)}}if(this.options.text){this.setText(this.options.text)}if(b.trim(this.valuebox.val())!=""){this.options.value=this.valuebox.val()}}},_initState:function(){if(this.element.prop("readonly")||this.options.readonly){this.options.readonly=true;this.valuebox.prop("readonly",true);this.element.prop("readonly",true);this.component().addClass("coral-readonly")}if(this.options.isLabel){this.element.prop("readonly",true);this.valuebox.prop("readonly",true);this.component().addClass("coral-isLabel")}},_bindEvent:function(){var f=this,e,d,g;this._on(this.element,{mouseenter:function(h){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}f.autocompleteWrapper.addClass("coral-textbox-hover")},mouseleave:function(h){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}f.autocompleteWrapper.removeClass("coral-textbox-hover")},keyup:function(h){if(this.options.readonly||this.options.isLabel){return}this._trigger("onKeyUp",h,{})},keydown:function(h){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}if(this.element.prop("readOnly")){e=true;g=true;d=true;return}e=false;g=false;d=false;var i=b.coral.keyCode;switch(h.keyCode){case i.PAGE_UP:if(this.options.render=="tree"){break}e=true;this._move("previousPage",h);break;case i.PAGE_DOWN:if(this.options.render=="tree"){break}e=true;this._move("nextPage",h);break;case i.LEFT:e=true;this._moveItem("left",h);break;case i.RIGHT:e=true;this._moveItem("right",h);break;case i.UP:if(this.options.render=="tree"){break
}e=true;this._keyEvent("previous",h);break;case i.DOWN:if(this.options.render=="tree"){break}e=true;this._keyEvent("next",h);break;case i.ENTER:if(this.menu.active){e=true;h.preventDefault();this.menu.select(h)}break;case i.TAB:if(this.menu.active){this.menu.select(h)}break;case i.ESCAPE:if(this.menu.element.is(":visible")){if(!this.ismultiLineLabel){this.setValue(this.term,true)}this.close(h);h.preventDefault()}break;default:d=true;this._searchTimeout(h);break}this._trigger("onKeyDown",h,{})},keypress:function(h){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}if(e){e=false;if(!this.ismultiLineLabel||this.menu.element.is(":visible")){h.preventDefault()}return}if(d){return}if(this.options.render=="tree"){return}var i=b.coral.keyCode;switch(h.keyCode){case i.PAGE_UP:this._move("previousPage",h);break;case i.PAGE_DOWN:this._move("nextPage",h);break;case i.UP:this._keyEvent("previous",h);break;case i.DOWN:this._keyEvent("next",h);break;default:break}},input:function(h){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}if(g){g=false;h.preventDefault();return}this._searchTimeout(h)},focus:function(){if(f.options.disabled||f.options.isLabel||f.options.readonly){return}this.selectedItem=null;this.previous=this.getValue();this.component().addClass("coral-state-focus")},blur:function(i){this.component().removeClass("coral-state-focus");if(f.options.disabled||f.options.isLabel||f.options.readonly){return}if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(i);if(!this.options.multiLineLabel){if(this.options.multiple){}else{if(!this.options.forceSelection){if(this.lastSelectedItem[this.options.textField]!=this.element.val()){this.setValue(this.element.val(),true)}}else{if(this.options.render=="tree"){}else{var h=b.grep(this.responseItems,function(j){return j[f.options.textField]==f.element.val()});if(!h.length){this.setValue("",true)}else{this.setValue(h[0][f.options.valueField],true)}}}}}this._trigger("onBlur",i,{item:this.selectedItem})
}});this._on(this.menu.element,{mousedown:function(h){if(this.options.readonly||this.options.isLabel){return}h.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];if(!b(h.target).closest(".coral-menu-item").length){this._delay(function(){var j=this;this.document.one("mousedown",function(k){if(k.target!==j.element[0]&&k.target!==i&&!b.contains(i,k.target)){j.close()}})})}},menuonfocus:function(j,k){if(this.options.readonly||this.options.isLabel){return}var h,i;if(this.isNewMenu){this.isNewMenu=false;if(j.originalEvent&&/^mouse/.test(j.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){b(j.target).trigger(j.originalEvent)});return}}i=k.item.data("coral-autocomplete-item");if(false!==this._trigger("onFocus",j,{item:i})){if(j.originalEvent&&/^key/.test(j.originalEvent.type)){}}h=k.item.attr("aria-label")||i[this.options.valueField];if(h&&b.trim(h).length){this.liveRegion.children().hide();b("<div>").text(h).appendTo(this.liveRegion)}},menuonselect:function(j,k){if(this.options.readonly||this.options.isLabel){return}var i=k.item.data("coral-autocomplete-item"),h=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=h;this._delay(function(){this.previous=h;this.selectedItem=i;f.lastSelectedItem=i})}f.lastSelectedItem=i;this.selectedItem=i;if(false!==this._trigger("onSelect",j,{item:i})){if(this.options.multiLineLabel){this.isMultiLabel(j,k)}else{if(this.options.postMode=="value"){this.setValue(i[this.options.valueField],true)}if(this.options.postMode=="text"){this.setValue(i[this.options.textField],true)}if(this.options.postMode=="value-text"){this.setValue(i[this.options.valueField]+"-"+i[this.options.textField],true)}}}this.term=this.getText();this.close(j)}});if(this.options.multiLineLabel){this._on({"click .coral-label-close":function(h){if(this.options.readonly||this.options.isLabel){return}this._removeLabel(h)},"click .coral-textboxlist-item":function(h){if(this.options.readonly||this.options.isLabel){return
}h.stopPropagation()},"click .coral-textbox-border":function(h){if(this.options.readonly||this.options.isLabel){return}this.element.focus()},"mouseenter .coral-label-close":function(h){b(h.target).addClass("coral-label-close-hover")},"mouseleave .coral-label-close":function(h){b(h.target).removeClass("coral-label-close-hover")},"focus .coral-textboxlist-item":function(h){if(this.options.readonly||this.options.isLabel){return}b(h.target).addClass("coral-state-active")},"blur .coral-textboxlist-item":function(h){b(h.target).removeClass("coral-state-active")},"keydown .coral-state-active":function(i){if(this.options.readonly||this.options.isLabel){return}var h=b.coral.keyCode;switch(i.keyCode){case h.LEFT:this._moveInput("left",i);break;case h.RIGHT:this._moveInput("right",i);break;case h.BACKSPACE:this._removeLabel(i);break;case h.DELETE:this._removeLabel(i);break;default:break}}})}},_initData:function(){var e=this;var d=this.options;this.menu=b("<ul>").addClass("coral-autocomplete-panel coral-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");if(isNaN(d.panelHeight)){b(".coral-autocomplete-panel").css({"max-height":d.maxPanelHeight+"px"})}},_setDefaultValue:function(){if(!this.options.value){return}this.setValue(this.options.value)},_setDefaultText:function(){if(!this.options.text){return}this.setText(this.options.text)},getLastSelectedItem:function(){return this.lastSelectedItem},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("coral-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(d,e){this._super(d,e);if(d==="isLabel"&&typeof e==="boolean"){this.element.prop("readonly",e);this.valuebox.prop("readonly",e);this.component().removeClass("coral-readonly");this.component().toggleClass("coral-isLabel",e)}if(d==="readonly"&&typeof e==="boolean"){this.element.prop("readonly",e);this.valuebox.prop("readonly",e);this.component().removeClass("coral-isLabel");
this.component().toggleClass("coral-readonly",e)}if(d==="source"){this._initSource()}if(d==="appendTo"){this.menu.element.appendTo(this._appendTo())}if(d==="disabled"&&e&&this.xhr){this.xhr.abort()}if(d==="value"){this.setValue(e)}},_appendTo:function(){var d=this.options.appendTo;if(d){d=d.jquery||d.nodeType?b(d):this.document.find(d).eq(0)}if(!d||!d[0]){d=this.element.closest(".coral-front")}if(!d.length){d=this.document[0].body}return d},_filter:function(f,e,d){d(b.coral.autocomplete.filter(f,e.term,this.options.valueField,this.options.textField,this.options.searchField))},_initSource:function(){var f,d,e=this;if(b.isArray(this.options.source)){f=this.options.source;this.source=function(h,g){e._filter(f,h,g)}}else{if(typeof this.options.source==="string"){d=this.options.source;this.source=function(h,g){if(e.xhr){e.xhr.abort()}if(this.element.attr("name")){h[this.element.attr("name")]=h.term}e.xhr=b.ajax({url:d,data:h,type:e.options.asyncType,dataType:"json",success:function(i){if(e.options.render!="tree"){g(i)}else{b(e.menu.element).tree("reload",i);g(i)}},error:function(){g([])}})}}else{this.source=this.options.source}}},_searchTimeout:function(d){clearTimeout(this.searching);this.searching=this._delay(function(){var f=this.term===this._term(),e=this.menu.element.is(":visible"),g=d.altKey||d.ctrlKey||d.metaKey||d.shiftKey;if(!f||(f&&!e&&!g)){this.selectedItem=null;this.search(null,d)}},this.options.delay)},_term:function(){if(this.options.multiLineLabel){return this.element.val()}return this.getText()},search:function(e,d){e=e!=null?e:this._term();this.term=this._term();if(e.length<this.options.minLength||(this.options.minLength>0&&b.trim(e)=="")){return this.close(d)}if(this._trigger("onSearch",d)===false){return}return this._search(e)},_search:function(d){this.pending++;this.element.addClass("coral-autocomplete-loading");this.cancelSearch=false;this.source({term:d},this._response())},_response:function(){var d=++this.requestIndex;return b.proxy(function(e){if(d===this.requestIndex){this.__response(e)
}this.pending--;if(!this.pending){this.element.removeClass("coral-autocomplete-loading")}},this)},__response:function(d){if(d){d=this._normalize(d)}this._trigger("onResponse",null,{content:d});if(!this.options.disabled&&d&&d.length&&!this.cancelSearch){this._suggest(d);this._trigger("onOpen")}else{this._close()}},close:function(d){this.cancelSearch=true;this._close(d)},_close:function(d){if(this.menu.element.is(":visible")){this.menu.element.hide();this.options.render!="tree"&&this.menu.blur();this.isNewMenu=true;this._trigger("onClose",d)}},_change:function(d){if(this.previous!==this.getValue()){this._trigger("onChange",d,{item:this.selectedItem,oldValue:this.previous,value:this.getValue(),text:this.getText(),lastSelectedItem:this.lastSelectedItem})}},_normalize:function(d){var e=this;if(d.length&&d[0][this.options.textField]&&d[0][this.options.valueField]){return d}return b.map(d,function(f){if(typeof f==="string"){return{label:f,value:f}}return b.extend({},f,{label:f.label||f.value,value:f.value||f.label})})},_suggest:function(e){var g=this.menu.element;if(this.options.render=="tree"){}else{this.menu.element.empty();this._renderMenu(g,e);this.isNewMenu=true;this.menu.refresh()}this.responseItems=e;g.show();var d=g.siblings(".coral-front:visible").map(function(){return +b(this).css("z-index")}).get(),f=Math.max.apply(null,d);if(f>=+g.css("z-index")){g.css("z-index",f+1)}this._resizeMenu();g.position(b.extend({of:this.elementBorder},this.options.position));if(this.options.autoFocus){this.menu.next()}},_resizeMenu:function(){var d=this.menu.element;d.outerWidth(Math.max(d.width("").outerWidth()+1,this.elementBorder.outerWidth()))},_renderMenu:function(e,d){var f=this;b.each(d,function(g,h){f._renderItemData(e,h)})},_renderItemData:function(d,e){return this._renderItem(d,e).data("coral-autocomplete-item",e)},_renderItem:function(d,e){return b("<li>").addClass(!!e.hidden==true?"hidden":"").text(e[this.options.textField]).appendTo(d)},_move:function(e,d){if(!this.menu.element.is(":visible")){this.search(null,d);
return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){if(!this.ismultiLineLabel){this.setValue("",true);this.setText(this.term)}this.menu.blur();return}this.menu[e](d)},component:function(){return this.autocompleteWrapper},_setLastSelectedItem:function(){var d=this.options;var e=this.getValue(),f=this.getText();this.lastSelectedItem={};this.lastSelectedItem[d.valueField]=e;this.lastSelectedItem[d.textField]=f},_text:function(f){maxLabelWidth=this.options.maxLabelWidth;if(this.options.multiLineLabel){if(f!=""&&!f){var e=[];b.each(this.textboxlistUl.find(".coral-textboxlist-item"),function(){e.push(b(this).text())});return e.join(",")}var d="";if(f!=""&&!(f instanceof Array)){f=f.split(this.options.separator)}if(f instanceof Array){b.each(f,function(g){f.splice(g,1,"<li tabindex='-1' class='coral-textboxlist-item'  style='  max-width:"+maxLabelWidth+"px;' title='"+this+"'>"+this+"<span class='coral-label-close icon icon-close2'></span></li>")});d=f.join("")}else{d="<li tabindex='-1' class='coral-textboxlist-item'  style='  max-width:"+maxLabelWidth+"px;' title='"+this+"' >"+f+"<span class='coral-label-close icon icon-close2'></span></li>"}if(f!=""){if(this.options.multiple){this.textboxlistUl.find(".coral-textboxlist-inputLi").before(d)}else{this.textboxlistUl.find(".coral-textboxlist-item").remove(".coral-textboxlist-item");this.textboxlistUl.find(".coral-textboxlist-inputLi").before(d)}}else{this.textboxlistUl.find(".coral-textboxlist-item").remove(".coral-textboxlist-item")}}else{return this.textMethod.apply(this.element,arguments)}},isMultiLabel:function(g,j,i){if(this.options.render=="tree"){var f=i,e=f.id,h=[]}else{var f=j.item.data("coral-autocomplete-item");var e=f[this.options.valueField],d=f[this.options.textField];text=this.getText(),nt=text==""?[]:text.split(","),nt.push(d)}var h=this.getOldValue();if(this.options.multiple){if(!this.options.allowRepeat&&b.inArray(e,h)>-1){return}if(this.options.postMode=="value"){h.push(e);
if(typeof this.options.source=="string"){this.setValue(h.join(","),true);this.setText(nt.join(","))}else{this.setValue(h.join(","),true)}}if(this.options.postMode=="text"){if(!this.options.allowRepeat&&b.inArray(d,h)>-1){return}if(h==""){this.setValue(d,true)}else{this.setValue(h+","+d,true)}}if(this.options.postMode=="value-text"){this.setValue(e+"-"+d,true)}}else{if(this.options.postMode=="value"){if(typeof this.options.source=="string"){this.setValue(e,true);this.setText(d)}else{this.setValue(e,true)}}if(this.options.postMode=="text"){this.setValue(d,true)}if(this.options.postMode=="value-text"){this.setValue(e+"-"+d,true)}}},getOldValue:function(){var f=this.options,e=[],h=[],d=0;if(!this.currentValues){return e}var h=this.currentValues.split(",");for(;d<h.length;d++){var g=h[d];e.push(g)}return e},setValue:function(d,f){var j=this,m,o,f,i;if(typeof d!=="string"){m=d.value;f=d.changed;i=d.removed}else{m=d}this.previous=this.getValue();if(this.options.multiLineLabel){var j=this;var k=this.element.closest("li.coral-textboxlist-inputLi"),p=k.index(),h=p,n=this.valuebox.val(m)==""?[]:this.valuebox.val(m);this.setText("");if(b.trim(m)==""){this.setText(m)}else{if("text"===this.options.postMode){this.setText(m)}else{if(b.trim(m)!==""&&b.isArray(this.options.source)){var l=(this.options.render=="tree")?b(this.menu.element).tree("transformToArray",this.options.source.concat()):this.options.source,e=[],g=b.grep(m.split(","),function(r){var q=false;b.each(l,function(s){if(r==l[s][j.options.valueField]){e.push(l[s][j.options.textField]);return true}});return q});if(e.length){this.setText(e)}}}}if(m==""){n=[]}this.valuebox.val(m);this.currentValues=m;this.element.val("")}else{if(b.trim(m)==""){this.setText(m)}else{if("text"===this.options.postMode){this.setText(m)}else{if(typeof this.options.source=="string"&&this.selectedItem){this.setText(this.selectedItem[this.options.textField])}else{if(b.trim(m)!==""&&b.isArray(this.options.source)){var l=this.options.source.concat();var g=b.grep(l,function(q){return q[j.options.valueField]==m
});if(g.length){this.setText(g[0][j.options.textField])}}else{if(b.trim(m)==""){this.setText(m)}}}}}this.valuebox.val(m);this.setText(m)}f&&this._change(null)},setText:function(d){this._text(d);this._setLastSelectedItem()},getValue:function(){if(this.options.multiLineLabel){return this.valuebox.val()}else{return this.valueMethod.apply(this.valuebox)}},getText:function(){return this._text()},focus:function(){if(this.options.disabled||this.options.readonly||this.options.isLabel){return false}this.element.focus()},_keyEvent:function(e,d){if(!this.ismultiLineLabel||this.menu.element.is(":visible")){this._move(e,d);d.preventDefault()}},_removeLabel:function(i){var g=this.element.closest("li.coral-textboxlist-inputLi"),m=b(i.target).closest("li.coral-textboxlist-item"),j=b(i.target).closest("li.coral-textboxlist-item:last");g.insertAfter(j);var l=g.index();var f=m.index();var h=f;if(f>l){h=f-1}var d=this.getText().split(",");d.splice(h,1);m.remove();var k=this.getValue().split(",");k.splice(h,1);this.selectedItems.splice(h,1);this.selectedItem=null;this.setValue(k.join(","),true);if(typeof this.options.source=="string"&&this.options.postMode=="value"){this.setText(d.join(","))}this._moveInput("last",i);this.element.val("");this.element.focus()},_moveInput:function(i,h){var d=this.element.closest("li.coral-textboxlist-inputLi");var f=b(h.target).closest("li.coral-textboxlist-item");var g=b(d).closest("li.coral-textboxlist-inputLi").nextAll("li.coral-textboxlist-item").last();switch(i){case"left":d.insertBefore(f);this.element.val("");this.element.focus();break;case"right":d.insertAfter(f);this.element.val("");this.element.focus();break;case"last":d.insertAfter(g);this.element.val("");break}},_moveItem:function(g,f){var d=this.element.closest("li.coral-textboxlist-inputLi");if(g=="left"&&d.prev().length&&b(d.find("input")).caret()==0){this.element.val("");d.prev().focus()}if(g=="right"&&d.next().length&&b(d.find("input")).caret()==d.find("input").val().length){this.element.val("");
d.next().focus()}}});b.extend(b.coral.autocomplete,{escapeRegex:function(d){return d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(j,f,e,d,i){var g=this;var h=new RegExp(b.coral.autocomplete.escapeRegex(f),"i");if(i){return b.grep(j,function(n){var l=h.test(n[d]||n[e]||n);var m=i.split(",");for(var k=0;k<m.length;k++){if(!l&&n[m[k]]){l=h.test(n[m[k]]);if(l){break}}}return l})}return b.grep(j,function(k){return h.test(k[d]||k[e]||k[i]||k)})}});b.component("coral.autocomplete",b.coral.autocomplete,{options:{messages:{noResults:"No search results.",results:function(d){return d+(d>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var d;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return}if(e&&e.length){d=this.options.messages.results(e.length)}else{d=this.options.messages.noResults}this.liveRegion.children().hide();b("<div>").text(d).appendTo(this.liveRegion)}});var a=b.coral.autocomplete})(jQuery);

(function(){var a={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(c,b){a[b]=function(d){return Math.pow(d,c+2)}});$.extend(a,{Sine:function(b){return 1-Math.cos(b*Math.PI/2)},Circ:function(b){return 1-Math.sqrt(1-b*b)},Elastic:function(b){return b===0||b===1?b:-Math.pow(2,8*(b-1))*Math.sin(((b-1)*80-7.5)*Math.PI/15)},Back:function(b){return b*b*(3*b-2)},Bounce:function(d){var b,c=4;while(d<((b=Math.pow(2,--c))-1)/11){}return 1/Math.pow(4,3-c)-7.5625*Math.pow((b*3-2)/22-d,2)}});$.each(a,function(c,b){$.easing["easeIn"+c]=b;$.easing["easeOut"+c]=function(d){return 1-b(1-d)};$.easing["easeInOut"+c]=function(d){return d<0.5?b(d*2)/2:1-b(d*-2+2)/2}})})();

var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,e=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(e),j=c?/mac/.test(c):/mac/.test(e),g=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",f=[0,0,0],k=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){k=aB.plugins[ab].description;if(k&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;d=false;k=k.replace(/^.*\s+(\S+\s+\S+$)/,"$1");f[0]=parseInt(k.replace(/^(.*)\..*$/,"$1"),10);f[1]=parseInt(k.replace(/^.*\.(.*)\s.*$/,"$1"),10);f[2]=/[a-zA-Z]/.test(k)?parseInt(k.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var i=new ActiveXObject(X);if(i){k=i.GetVariable("$version");if(k){d=true;k=k.split(" ")[1].split(",");f=[parseInt(k[0],10),parseInt(k[1],10),parseInt(k[2],10)]}}}catch(b){}}}return{w3:a,pv:f,wk:g,ie:d,win:h,mac:j}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));
b.parentNode.removeChild(b)}catch(a){return}ak=true;var d=Z.length;for(var c=0;c<d;c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var d=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=d.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var e=a.GetVariable("$version");if(e){e=e.split(" ")[1].split(",");ah.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}d.removeChild(b);a=null;am()})()}else{am()}}function am(){var g=aG.length;if(g>0){for(var h=0;h<g;h++){var c=aG[h].id;var l=aG[h].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var i=aS(c);if(i){if(ao(aG[h].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(l){a.success=true;a.ref=av(c);l(a)}}else{if(aG[h].expressInstall&&au()){var e={};e.data=aG[h].expressInstall;e.width=i.getAttribute("width")||"0";e.height=i.getAttribute("height")||"0";if(i.getAttribute("class")){e.styleclass=i.getAttribute("class")}if(i.getAttribute("align")){e.align=i.getAttribute("align")}var f={};var d=i.getElementsByTagName("param");var k=d.length;for(var j=0;j<k;j++){if(d[j].getAttribute("name").toLowerCase()!="movie"){f[d[j].getAttribute("name")]=d[j].getAttribute("value")}}ae(e,f,c,l)}else{aF(i);if(l){l(a)}}}}}else{ay(c,true);if(l){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b}l(a)}}}}}function av(b){var d=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c}else{var a=c.getElementsByTagName(aD)[0];if(a){d=a}}}return d}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(f,d,h,e){aU=true;
ap=e||null;at={success:false,id:h};var a=aS(h);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null}else{aJ=a;ad=h}f.id=ac;if(typeof f.width==aq||(!/%$/.test(f.width)&&parseInt(f.width,10)<310)){f.width="310"}if(typeof f.height==aq||(!/%$/.test(f.height)&&parseInt(f.height,10)<137)){f.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof d.flashvars!=aq){d.flashvars+="&"+c}else{d.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var g=ar("div");h+="SWFObjectNew";g.setAttribute("id",h);a.parentNode.insertBefore(g,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}aA(f,d,h)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var d=ar("div");if(ah.win&&ah.ie){d.innerHTML=b.innerHTML}else{var e=b.getElementsByTagName(aD)[0];if(e){var a=e.childNodes;if(a){var f=a.length;for(var c=0;c<f;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true))}}}}}return d}function aA(e,g,c){var d,a=aS(c);if(ah.wk&&ah.wk<312){return d}if(a){if(typeof e.id==aq){e.id=c}if(ah.ie&&ah.win){var f="";for(var i in e){if(e[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){g.movie=e[i]}else{if(i.toLowerCase()=="styleclass"){f+=' class="'+e[i]+'"'}else{if(i.toLowerCase()!="classid"){f+=" "+i+'="'+e[i]+'"'}}}}}var h="";for(var j in g){if(g[j]!=Object.prototype[j]){h+='<param name="'+j+'" value="'+g[j]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>";ag[ag.length]=e.id;d=aS(e.id)}else{var b=ar(aD);b.setAttribute("type",aE);
for(var k in e){if(e[k]!=Object.prototype[k]){if(k.toLowerCase()=="styleclass"){b.setAttribute("class",e[k])}else{if(k.toLowerCase()!="classid"){b.setAttribute(k,e[k])}}}}for(var l in g){if(g[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"){aQ(b,l,g[l])}}a.parentNode.replaceChild(b,a);d=b}}return d}function aQ(b,d,c){var a=ar("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function az(b,f,a,c){if(ah.ie&&ah.mac){return}var e=aL.getElementsByTagName("head")[0];if(!e){return}var g=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=g){var d=ar("style");d.setAttribute("type","text/css");d.setAttribute("media",g);aH=e.appendChild(d);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=g}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,f)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+f+"}"))}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;
for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var d=ag.length;for(var c=0;c<d;c++){aw(ag[c])}for(var e in ah){ah[e]=null}ah=null;for(var f in swfobject){swfobject[f]=null}swfobject=null})}}();return{registerObject:function(a,e,c,b){if(ah.w3&&a&&e){var d={};d.id=a;d.swfVersion=e;d.expressInstall=c;d.callbackFn=b;aG[aG.length]=d;ay(a,false)}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)}},embedSWF:function(k,e,h,f,c,a,b,i,g,j){var d={success:false,id:e};if(ah.w3&&!(ah.wk&&ah.wk<312)&&k&&e&&h&&f&&c){ay(e,false);aj(function(){h+="";f+="";var q={};if(g&&typeof g===aD){for(var o in g){q[o]=g[o]}}q.data=k;q.width=h;q.height=f;var n={};if(i&&typeof i===aD){for(var p in i){n[p]=i[p]}}if(b&&typeof b===aD){for(var l in b){if(typeof n.flashvars!=aq){n.flashvars+="&"+l+"="+b[l]}else{n.flashvars=l+"="+b[l]}}}if(ao(c)){var m=aA(q,n,e);if(q.id==e){ay(e,true)}d.success=true;d.ref=m}else{if(a&&au()){q.data=a;ae(q,n,e,j);return}else{ay(e,true)}}if(j){j(d)}})}else{if(j){j(d)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c)}},removeSWF:function(a){if(ah.w3){aw(a)}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}();var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(b){this.initSWFUpload(b)
}}SWFUpload.prototype.initSWFUpload=function(c){try{this.customSettings={};this.settings=c;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(d){delete SWFUpload.instances[this.movieName];throw d}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(e){if(typeof(e)!=="string"||e.match(/^https?:\/\//i)||e.match(/^\//)){return e}var f=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var d=window.location.pathname.lastIndexOf("/");if(d<=0){path="/"}else{path=window.location.pathname.substr(0,d)+"/"}return path+e};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(c,d){this.settings[c]=(this.settings[c]==undefined)?d:this.settings[c]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");
this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=this.settings.button_image_url?SWFUpload.completeURL(this.settings.button_image_url):this.settings.button_image_url
}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var d,c;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}d=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(d==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}c=document.createElement("div");c.innerHTML=this.getFlashHTML();d.parentNode.replaceChild(c.firstChild,d);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var c=this.buildParamString();var d=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(d),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(c),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")
};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var f=this.settings.post_params;var d=[];if(typeof(f)==="object"){for(var e in f){if(f.hasOwnProperty(e)){d.push(encodeURIComponent(e.toString())+"="+encodeURIComponent(f[e].toString()))}}}return d.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var g=null;g=this.getMovieElement();if(g&&typeof(g.CallFunction)==="unknown"){for(var j in g){try{if(typeof(g[j])==="function"){g[j]=null}}catch(h){}}try{g.parentNode.removeChild(g)}catch(f){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(i){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))
};SWFUpload.prototype.addSetting=function(d,f,e){if(f==undefined){return(this.settings[d]=e)}else{return(this.settings[d]=f)}};SWFUpload.prototype.getSetting=function(b){if(this.settings[b]!=undefined){return this.settings[b]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(b){this.callFlash("StartUpload",[b])};SWFUpload.prototype.cancelUpload=function(d,c){if(c!==false){c=true}this.callFlash("CancelUpload",[d,c])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(b){this.callFlash("SetStats",[b])};SWFUpload.prototype.getFile=function(b){if(typeof(b)==="number"){return this.callFlash("GetFileByIndex",[b])}else{return this.callFlash("GetFile",[b])}};SWFUpload.prototype.addFileParam=function(e,d,f){return this.callFlash("AddFileParam",[e,d,f])};SWFUpload.prototype.removeFileParam=function(d,c){this.callFlash("RemoveFileParam",[d,c])};SWFUpload.prototype.setUploadURL=function(b){this.settings.upload_url=b.toString();this.callFlash("SetUploadURL",[b])};SWFUpload.prototype.setPostParams=function(b){this.settings.post_params=b;this.callFlash("SetPostParams",[b])};SWFUpload.prototype.addPostParam=function(d,c){this.settings.post_params[d]=c;this.callFlash("SetPostParams",[this.settings.post_params])
};SWFUpload.prototype.removePostParam=function(b){delete this.settings.post_params[b];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(d,c){this.settings.file_types=d;this.settings.file_types_description=c;this.callFlash("SetFileTypes",[d,c])};SWFUpload.prototype.setFileSizeLimit=function(b){this.settings.file_size_limit=b;this.callFlash("SetFileSizeLimit",[b])};SWFUpload.prototype.setFileUploadLimit=function(b){this.settings.file_upload_limit=b;this.callFlash("SetFileUploadLimit",[b])};SWFUpload.prototype.setFileQueueLimit=function(b){this.settings.file_queue_limit=b;this.callFlash("SetFileQueueLimit",[b])};SWFUpload.prototype.setFilePostName=function(b){this.settings.file_post_name=b;this.callFlash("SetFilePostName",[b])};SWFUpload.prototype.setUseQueryString=function(b){this.settings.use_query_string=b;this.callFlash("SetUseQueryString",[b])};SWFUpload.prototype.setRequeueOnError=function(b){this.settings.requeue_on_error=b;this.callFlash("SetRequeueOnError",[b])};SWFUpload.prototype.setHTTPSuccess=function(b){if(typeof b==="string"){b=b.replace(" ","").split(",")}this.settings.http_success=b;this.callFlash("SetHTTPSuccess",[b])};SWFUpload.prototype.setAssumeSuccessTimeout=function(b){this.settings.assume_success_timeout=b;this.callFlash("SetAssumeSuccessTimeout",[b])};SWFUpload.prototype.setDebugEnabled=function(b){this.settings.debug_enabled=b;this.callFlash("SetDebugEnabled",[b])};SWFUpload.prototype.setButtonImageURL=function(b){if(b==undefined){b=""}this.settings.button_image_url=b;this.callFlash("SetButtonImageURL",[b])};SWFUpload.prototype.setButtonDimensions=function(f,e){this.settings.button_width=f;this.settings.button_height=e;var d=this.getMovieElement();if(d!=undefined){d.style.width=f+"px";d.style.height=e+"px"}this.callFlash("SetButtonDimensions",[f,e])};SWFUpload.prototype.setButtonText=function(b){this.settings.button_text=b;this.callFlash("SetButtonText",[b])};SWFUpload.prototype.setButtonTextPadding=function(c,d){this.settings.button_text_top_padding=d;
this.settings.button_text_left_padding=c;this.callFlash("SetButtonTextPadding",[c,d])};SWFUpload.prototype.setButtonTextStyle=function(b){this.settings.button_text_style=b;this.callFlash("SetButtonTextStyle",[b])};SWFUpload.prototype.setButtonDisabled=function(b){this.settings.button_disabled=b;this.callFlash("SetButtonDisabled",[b])};SWFUpload.prototype.setButtonAction=function(b){this.settings.button_action=b;this.callFlash("SetButtonAction",[b])};SWFUpload.prototype.setButtonCursor=function(b){this.settings.button_cursor=b;this.callFlash("SetButtonCursor",[b])};SWFUpload.prototype.queueEvent=function(d,f){if(f==undefined){f=[]}else{if(!(f instanceof Array)){f=[f]}}var e=this;if(typeof this.settings[d]==="function"){this.eventQueue.push(function(){this.settings[d].apply(this,f)});setTimeout(function(){e.executeNextEvent()},0)}else{if(this.settings[d]!==null){throw"Event handler "+d+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var b=this.eventQueue?this.eventQueue.shift():null;if(typeof(b)==="function"){b.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(l){var j=/[$]([0-9a-f]{4})/i;var i={};var k;if(l!=undefined){for(var h in l.post){if(l.post.hasOwnProperty(h)){k=h;var g;while((g=j.exec(k))!==null){k=k.replace(g[0],String.fromCharCode(parseInt("0x"+g[1],16)))}i[k]=l.post[h]}}l.post=i}return l};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(b){return false}};SWFUpload.prototype.flashReady=function(){var b=this.getMovieElement();if(!b){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(b);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(c){try{if(this.movieElement&&typeof(c.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var a in c){try{if(typeof(c[a])==="function"&&a[0]>="A"&&a[0]<="Z"){c[a]=null
}}catch(d){}}}}catch(b){}window.__flash__removeCallback=function(g,e){try{if(g){g[e]=null}}catch(f){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("file_queued_handler",b)};SWFUpload.prototype.fileQueueError=function(e,f,d){e=this.unescapeFilePostParams(e);this.queueEvent("file_queue_error_handler",[e,f,d])};SWFUpload.prototype.fileDialogComplete=function(d,f,e){this.queueEvent("file_dialog_complete_handler",[d,f,e])};SWFUpload.prototype.uploadStart=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("return_upload_start_handler",b)};SWFUpload.prototype.returnUploadStart=function(d){var c;if(typeof this.settings.upload_start_handler==="function"){d=this.unescapeFilePostParams(d);c=this.settings.upload_start_handler.call(this,d)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(c===undefined){c=true}c=!!c;this.callFlash("ReturnUploadStart",[c])};SWFUpload.prototype.uploadProgress=function(e,f,d){e=this.unescapeFilePostParams(e);this.queueEvent("upload_progress_handler",[e,f,d])};SWFUpload.prototype.uploadError=function(e,f,d){e=this.unescapeFilePostParams(e);this.queueEvent("upload_error_handler",[e,f,d])};SWFUpload.prototype.uploadSuccess=function(d,e,f){d=this.unescapeFilePostParams(d);this.queueEvent("upload_success_handler",[d,e,f])};SWFUpload.prototype.uploadComplete=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("upload_complete_handler",b)};SWFUpload.prototype.debug=function(b){this.queueEvent("debug_handler",b)};SWFUpload.prototype.debugMessage=function(h){if(this.settings.debug){var f,g=[];if(typeof h==="object"&&typeof h.name==="string"&&typeof h.message==="string"){for(var e in h){if(h.hasOwnProperty(e)){g.push(e+": "+h[e])}}f=g.join("\n")||"";g=f.split("\n");f="EXCEPTION: "+g.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(f)}else{SWFUpload.Console.writeLine(h)
}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(g){var e,f;try{e=document.getElementById("SWFUpload_Console");if(!e){f=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(f);e=document.createElement("textarea");e.id="SWFUpload_Console";e.style.fontFamily="monospace";e.setAttribute("wrap","off");e.wrap="off";e.style.overflow="auto";e.style.width="700px";e.style.height="350px";e.style.margin="5px";f.appendChild(e)}e.value+=g+"\n";e.scrollTop=e.scrollHeight-e.clientHeight}catch(h){alert("Exception: "+h.name+" Message: "+h.message)}};(function(c){var b={init:function(d,e){return this.each(function(){var n=c(this);var m=n.clone();var j=c.extend({id:n.attr("id"),swf:"uploadify.swf",uploader:"uploadify.php",auto:true,buttonClass:"",buttonCursor:"hand",buttonImage:null,buttonText:"SELECT FILES",checkExisting:false,debug:false,fileObjName:"Filedata",fileSizeLimit:0,fileTypeDesc:"All Files",fileTypeExts:"*.*",height:30,itemTemplate:false,method:"post",multi:true,formData:{},preventCaching:true,progressData:"percentage",queueID:false,queueSizeLimit:999,removeCompleted:true,removeTimeout:3,requeueErrors:false,successTimeout:30,uploadLimit:0,width:120,overrideEvents:[]},d);var g={assume_success_timeout:j.successTimeout,button_placeholder_id:j.id,button_width:j.width,button_height:j.height,button_text:null,button_text_style:null,button_text_top_padding:0,button_text_left_padding:0,button_action:(j.multi?SWFUpload.BUTTON_ACTION.SELECT_FILES:SWFUpload.BUTTON_ACTION.SELECT_FILE),button_disabled:false,button_cursor:(j.buttonCursor=="arrow"?SWFUpload.CURSOR.ARROW:SWFUpload.CURSOR.HAND),button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,debug:j.debug,requeue_on_error:j.requeueErrors,file_post_name:j.fileObjName,file_size_limit:j.fileSizeLimit,file_types:j.fileTypeExts,file_types_description:j.fileTypeDesc,file_queue_limit:j.queueSizeLimit,file_upload_limit:j.uploadLimit,flash_url:j.swf,prevent_swf_caching:j.preventCaching,post_params:j.formData,upload_url:j.uploader,use_query_string:(j.method=="get"),file_dialog_complete_handler:a.onDialogClose,file_dialog_start_handler:a.onDialogOpen,file_queued_handler:a.onSelect,file_queue_error_handler:a.onSelectError,swfupload_loaded_handler:j.onSWFReady,upload_complete_handler:a.onUploadComplete,upload_error_handler:a.onUploadError,upload_progress_handler:a.onUploadProgress,upload_start_handler:a.onUploadStart,upload_success_handler:a.onUploadSuccess};
if(e){g=c.extend(g,e)}g=c.extend(g,j);var o=swfobject.getFlashPlayerVersion();var h=(o.major>=9);if(h){window["uploadify_"+j.id]=new SWFUpload(g);var i=window["uploadify_"+j.id];n.data("uploadify",i);var l=c("<div />",{id:j.id,"class":"uploadify",css:{height:j.height+"px",width:j.width+"px"}});c("#"+i.movieName).wrap(l);l=c("#"+j.id);l.data("uploadify",i);var f=c("<div />",{id:j.id+"-button","class":"uploadify-button "+j.buttonClass});if(j.buttonImage){f.css({"background-image":"url('"+j.buttonImage+"')","text-indent":"-9999px"})}f.html('<span class="uploadify-button-text">'+j.buttonText+"</span>").css({height:j.height+"px","line-height":j.height+"px",width:j.width+"px"});l.append(f);c("#"+i.movieName).css({position:"absolute","z-index":1});if(!j.queueID){var k=c("<div />",{id:j.id+"-queue","class":"uploadify-queue"});l.after(k);i.settings.queueID=j.id+"-queue";i.settings.defaultQueue=true}i.queueData={files:{},filesSelected:0,filesQueued:0,filesReplaced:0,filesCancelled:0,filesErrored:0,uploadsSuccessful:0,uploadsErrored:0,averageSpeed:0,queueLength:0,queueSize:0,uploadSize:0,queueBytesUploaded:0,uploadQueue:[],errorMsg:"Some files were not added to the queue:"};i.original=m;i.wrapper=l;i.button=f;i.queue=k;if(j.onInit){j.onInit.call(n,i)}}else{if(j.onFallback){j.onFallback.call(n)}}})},cancel:function(d,f){var e=arguments;this.each(function(){var l=c(this),i=l.data("uploadify"),j=i.settings,h=-1;if(e[0]){if(e[0]=="*"){var g=i.queueData.queueLength;c("#"+j.queueID).find(".uploadify-queue-item").each(function(){h++;if(e[1]===true){i.cancelUpload(c(this).attr("id"),false)}else{i.cancelUpload(c(this).attr("id"))}c(this).find(".data").removeClass("data").html(" - Cancelled");c(this).find(".uploadify-progress-bar").remove();c(this).delay(1000+100*h).fadeOut(500,function(){c(this).remove()})});i.queueData.queueSize=0;i.queueData.queueLength=0;if(j.onClearQueue){j.onClearQueue.call(l,g)}}else{for(var m=0;m<e.length;m++){i.cancelUpload(e[m]);c("#"+e[m]).find(".data").removeClass("data").html(" - Cancelled");
c("#"+e[m]).find(".uploadify-progress-bar").remove();c("#"+e[m]).delay(1000+100*m).fadeOut(500,function(){c(this).remove()})}}}else{var k=c("#"+j.queueID).find(".uploadify-queue-item").get(0);$item=c(k);i.cancelUpload($item.attr("id"));$item.find(".data").removeClass("data").html(" - Cancelled");$item.find(".uploadify-progress-bar").remove();$item.delay(1000).fadeOut(500,function(){c(this).remove()})}})},destroy:function(){this.each(function(){var f=c(this),d=f.data("uploadify"),e=d.settings;d.destroy();if(e.defaultQueue){c("#"+e.queueID).remove()}c("#"+e.id).replaceWith(d.original);if(e.onDestroy){e.onDestroy.call(this)}delete d})},disable:function(d){this.each(function(){var g=c(this),e=g.data("uploadify"),f=e.settings;if(d){e.button.addClass("disabled");if(f.onDisable){f.onDisable.call(this)}}else{e.button.removeClass("disabled");if(f.onEnable){f.onEnable.call(this)}}e.setButtonDisabled(d)})},settings:function(e,g,h){var d=arguments;var f=g;this.each(function(){var k=c(this),i=k.data("uploadify"),j=i.settings;if(typeof(d[0])=="object"){for(var l in g){setData(l,g[l])}}if(d.length===1){f=j[e]}else{switch(e){case"uploader":i.setUploadURL(g);break;case"formData":if(!h){g=c.extend(j.formData,g)}i.setPostParams(j.formData);break;case"method":if(g=="get"){i.setUseQueryString(true)}else{i.setUseQueryString(false)}break;case"fileObjName":i.setFilePostName(g);break;case"fileTypeExts":i.setFileTypes(g,j.fileTypeDesc);break;case"fileTypeDesc":i.setFileTypes(j.fileTypeExts,g);break;case"fileSizeLimit":i.setFileSizeLimit(g);break;case"uploadLimit":i.setFileUploadLimit(g);break;case"queueSizeLimit":i.setFileQueueLimit(g);break;case"buttonImage":i.button.css("background-image",settingValue);break;case"buttonCursor":if(g=="arrow"){i.setButtonCursor(SWFUpload.CURSOR.ARROW)}else{i.setButtonCursor(SWFUpload.CURSOR.HAND)}break;case"buttonText":c("#"+j.id+"-button").find(".uploadify-button-text").html(g);break;case"width":i.setButtonDimensions(g,j.height);break;case"height":i.setButtonDimensions(j.width,g);
break;case"multi":if(g){i.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILES)}else{i.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILE)}break}j[e]=g}});if(d.length===1){return f}},stop:function(){this.each(function(){var e=c(this),d=e.data("uploadify");d.queueData.averageSpeed=0;d.queueData.uploadSize=0;d.queueData.bytesUploaded=0;d.queueData.uploadQueue=[];d.stopUpload()})},upload:function(){var d=arguments;this.each(function(){var f=c(this),e=f.data("uploadify");e.queueData.averageSpeed=0;e.queueData.uploadSize=0;e.queueData.bytesUploaded=0;e.queueData.uploadQueue=[];if(d[0]){if(d[0]=="*"){e.queueData.uploadSize=e.queueData.queueSize;e.queueData.uploadQueue.push("*");e.startUpload()}else{for(var g=0;g<d.length;g++){e.queueData.uploadSize+=e.queueData.files[d[g]].size;e.queueData.uploadQueue.push(d[g])}e.startUpload(e.queueData.uploadQueue.shift())}}else{e.startUpload()}})}};var a={onDialogOpen:function(){var d=this.settings;this.queueData.errorMsg="Some files were not added to the queue:";this.queueData.filesReplaced=0;this.queueData.filesCancelled=0;if(d.onDialogOpen){d.onDialogOpen.call(this)}},onDialogClose:function(d,f,g){var e=this.settings;this.queueData.filesErrored=d-f;this.queueData.filesSelected=d;this.queueData.filesQueued=f-this.queueData.filesCancelled;this.queueData.queueLength=g;if(c.inArray("onDialogClose",e.overrideEvents)<0){if(this.queueData.filesErrored>0){alert(this.queueData.errorMsg)}}if(e.onDialogClose){e.onDialogClose.call(this,this.queueData)}if(e.auto){c("#"+e.id).uploadify("upload","*")}},onSelect:function(h){var i=this.settings;var f={};for(var g in this.queueData.files){f=this.queueData.files[g];if(f.uploaded!=true&&f.name==h.name){var e=confirm('The file named "'+h.name+'" is already in the queue.\nDo you want to replace the existing item in the queue?');if(!e){this.cancelUpload(h.id);this.queueData.filesCancelled++;return false}else{c("#"+f.id).remove();this.cancelUpload(f.id);this.queueData.filesReplaced++}}}var j=Math.round(h.size/1024);
var o="KB";if(j>1000){j=Math.round(j/1000);o="MB"}var l=j.toString().split(".");j=l[0];if(l.length>1){j+="."+l[1].substr(0,2)}j+=o;var k=h.name;if(k.length>25){k=k.substr(0,25)+"..."}itemData={fileID:h.id,instanceID:i.id,fileName:k,fileSize:j};if(i.itemTemplate==false){i.itemTemplate='<div id="${fileID}" class="uploadify-queue-item">					<div class="cancel">						<a href="javascript:$(\'#${instanceID}\').uploadify(\'cancel\', \'${fileID}\')">X</a>					</div>					<span class="fileName">${fileName} (${fileSize})</span><span class="data"></span>					<div class="uploadify-progress">						<div class="uploadify-progress-bar"><!--Progress Bar--></div>					</div>				</div>'}if(c.inArray("onSelect",i.overrideEvents)<0){itemHTML=i.itemTemplate;for(var m in itemData){itemHTML=itemHTML.replace(new RegExp("\\$\\{"+m+"\\}","g"),itemData[m])}c("#"+i.queueID).append(itemHTML)}this.queueData.queueSize+=h.size;this.queueData.files[h.id]=h;if(i.onSelect){i.onSelect.apply(this,arguments)}},onSelectError:function(d,g,f){var e=this.settings;if(c.inArray("onSelectError",e.overrideEvents)<0){switch(g){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:if(e.queueSizeLimit>f){this.queueData.errorMsg+="\nThe number of files selected exceeds the remaining upload limit ("+f+")."}else{this.queueData.errorMsg+="\nThe number of files selected exceeds the queue size limit ("+e.queueSizeLimit+")."}break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+d.name+'" exceeds the size limit ('+e.fileSizeLimit+").";break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:this.queueData.errorMsg+='\nThe file "'+d.name+'" is empty.';break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+d.name+'" is not an accepted file type ('+e.fileTypeDesc+").";break}}if(g!=SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED){delete this.queueData.files[d.id]}if(e.onSelectError){e.onSelectError.apply(this,arguments)}},onQueueComplete:function(){if(this.settings.onQueueComplete){this.settings.onQueueComplete.call(this,this.settings.queueData)
}},onUploadComplete:function(f){var g=this.settings,d=this;var e=this.getStats();this.queueData.queueLength=e.files_queued;if(this.queueData.uploadQueue[0]=="*"){if(this.queueData.queueLength>0){this.startUpload()}else{this.queueData.uploadQueue=[];if(g.onQueueComplete){g.onQueueComplete.call(this,this.queueData)}}}else{if(this.queueData.uploadQueue.length>0){this.startUpload(this.queueData.uploadQueue.shift())}else{this.queueData.uploadQueue=[];if(g.onQueueComplete){g.onQueueComplete.call(this,this.queueData)}}}if(c.inArray("onUploadComplete",g.overrideEvents)<0){if(g.removeCompleted){switch(f.filestatus){case SWFUpload.FILE_STATUS.COMPLETE:setTimeout(function(){if(c("#"+f.id)){d.queueData.queueSize-=f.size;d.queueData.queueLength-=1;delete d.queueData.files[f.id];c("#"+f.id).fadeOut(500,function(){c(this).remove()})}},g.removeTimeout*1000);break;case SWFUpload.FILE_STATUS.ERROR:if(!g.requeueErrors){setTimeout(function(){if(c("#"+f.id)){d.queueData.queueSize-=f.size;d.queueData.queueLength-=1;delete d.queueData.files[f.id];c("#"+f.id).fadeOut(500,function(){c(this).remove()})}},g.removeTimeout*1000)}break}}else{f.uploaded=true}}if(g.onUploadComplete){g.onUploadComplete.call(this,f)}},onUploadError:function(e,i,h){var f=this.settings;var g="Error";switch(i){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:g="HTTP Error ("+h+")";break;case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:g="Missing Upload URL";break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:g="IO Error";break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:g="Security Error";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:alert("The upload limit has been reached ("+h+").");g="Exceeds Upload Limit";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:g="Failed";break;case SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND:break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:g="Validation Error";break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:g="Cancelled";this.queueData.queueSize-=e.size;this.queueData.queueLength-=1;if(e.status==SWFUpload.FILE_STATUS.IN_PROGRESS||c.inArray(e.id,this.queueData.uploadQueue)>=0){this.queueData.uploadSize-=e.size
}if(f.onCancel){f.onCancel.call(this,e)}delete this.queueData.files[e.id];break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:g="Stopped";break}if(c.inArray("onUploadError",f.overrideEvents)<0){if(i!=SWFUpload.UPLOAD_ERROR.FILE_CANCELLED&&i!=SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED){c("#"+e.id).addClass("uploadify-error")}c("#"+e.id).find(".uploadify-progress-bar").css("width","1px");if(i!=SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND&&e.status!=SWFUpload.FILE_STATUS.COMPLETE){c("#"+e.id).find(".data").html(" - "+g)}}var d=this.getStats();this.queueData.uploadsErrored=d.upload_errors;if(f.onUploadError){f.onUploadError.call(this,e,i,h,g)}},onUploadProgress:function(g,m,j){var h=this.settings;var e=new Date();var n=e.getTime();var k=n-this.timer;if(k>500){this.timer=n}var i=m-this.bytesLoaded;this.bytesLoaded=m;var d=this.queueData.queueBytesUploaded+m;var p=Math.round(m/j*100);var o="KB/s";var l=0;var f=(i/1024)/(k/1000);f=Math.floor(f*10)/10;if(this.queueData.averageSpeed>0){this.queueData.averageSpeed=Math.floor((this.queueData.averageSpeed+f)/2)}else{this.queueData.averageSpeed=Math.floor(f)}if(f>1000){l=(f*0.001);this.queueData.averageSpeed=Math.floor(l);o="MB/s"}if(c.inArray("onUploadProgress",h.overrideEvents)<0){if(h.progressData=="percentage"){c("#"+g.id).find(".data").html(" - "+p+"%")}else{if(h.progressData=="speed"&&k>500){c("#"+g.id).find(".data").html(" - "+this.queueData.averageSpeed+o)}}c("#"+g.id).find(".uploadify-progress-bar").css("width",p+"%")}if(h.onUploadProgress){h.onUploadProgress.call(this,g,m,j,d,this.queueData.uploadSize)}},onUploadStart:function(d){var e=this.settings;var f=new Date();this.timer=f.getTime();this.bytesLoaded=0;if(this.queueData.uploadQueue.length==0){this.queueData.uploadSize=d.size}if(e.checkExisting){c.ajax({type:"POST",async:false,url:e.checkExisting,data:{filename:d.name},success:function(h){if(h==1){var g=confirm('A file with the name "'+d.name+'" already exists on the server.\nWould you like to replace the existing file?');
if(!g){this.cancelUpload(d.id);c("#"+d.id).remove();if(this.queueData.uploadQueue.length>0&&this.queueData.queueLength>0){if(this.queueData.uploadQueue[0]=="*"){this.startUpload()}else{this.startUpload(this.queueData.uploadQueue.shift())}}}}}})}if(e.onUploadStart){e.onUploadStart.call(this,d)}},onUploadSuccess:function(f,h,d){var g=this.settings;var e=this.getStats();this.queueData.uploadsSuccessful=e.successful_uploads;this.queueData.queueBytesUploaded+=f.size;if(c.inArray("onUploadSuccess",g.overrideEvents)<0){c("#"+f.id).find(".data").html(" - ")}if(g.onUploadSuccess){g.onUploadSuccess.call(this,f,h,d)}}};c.fn.uploadify=function(d){if(b[d]){return b[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="object"||!d){return b.init.apply(this,arguments)}else{c.error("The method "+d+" does not exist in $.uploadify")}}}})($);

(function(a,b){a.component("coral.uploader",{version:a.coral.version,castProperties:["dataCustom","formData","overrideEvents","buttons","itemTemplate"],options:{id:"",swf:a.coral.contextPath+"/jquery-cui/resource/uploadify.swf",uploader:"",auto:true,buttonClass:"",buttonCursor:"hand",buttonImage:null,buttonText:"SELECT FILES",checkExisting:false,debug:false,fileObjName:"Filedata",fileSizeLimit:0,fileTypeDesc:"All Files",fileTypeExts:"*.*",heigh:30,itemTemplate:false,method:"post",multi:true,formData:{},preventCaching:true,progressData:"percentage",queueID:false,queueSizeLimit:999,removeCompleted:true,removeTimeout:3,requeueError:false,successTimeout:30,uploadLimit:0,width:120,cls:"",displayStyle:"original",emptyText:"...",delay:1000,buttons:null,overrideEvents:[],onCancel:null,onClearQueue:null,onDestroy:null,onDialogClose:null,onDialogOpen:null,onDisable:null,onEnable:null,onFallback:null,onInit:null,onQueueComplete:null,onSelectError:null,onSelect:null,onSWFReady:null,onUploadComplete:null,onUploadError:null,onUploadSuccess:null,onUploadProgress:null,onUploadStart:null},_create:function(){var c=this;c._initElement()},_initElement:function(){var e=this,d=e.options,c={};if(typeof e.element.attr("id")!="undefined"){d.id=e.element.attr("id")}else{if(d.id){e.element.attr("id",d.id)}}if(typeof e.element.attr("name")!="undefined"){d.name=e.element.attr("name")}else{if(d.name){e.element.attr("name",d.name)}}delete d.id;c=e.getEventsObj();d=a.extend({},d,c);this._initUploder(d);d.id=e.element.attr("id")},component:function(){return this.uiUploader},destroy:function(){this.uploader.uploadify("destroy")},disable:function(c){this.uploader.uploadify("disable",c)},settings:function(c,d,e){this.uploader.uploadify("settings",c,d,e)},stop:function(){this.uploader.uploadify("stop")},upload:function(c){if("original"==this.options.displayStyle||!this._isQueueDialog()){this.uploader.uploadify("upload",c);return}if(this.select.length==0){return}var d=this,e=this.element.attr("id");a("#"+e+"_queue").dialog("open")
},cancel:function(){this.uploader.uploadify("cancel")},clear:function(c){if("custom"==this.options.displayStyle){this.select=[];this.uiUploader.find(".coral-file").html("...");this.uiUploader.find("object").attr("title","...")}this.uploader.uploadify("cancel");this.clearQueue()},clearQueue:function(){this.uploader.clearQueue()},uploadify:function(){return this.uploader},queueData:function(){return this.uploader.data("uploadify").queueData},_getButtons:function(){if(typeof this.options.buttons==="object"){return this.options.buttons}if(typeof this.options.buttons!=="string"){return[]}var k=this,j=this.options,h=this.options.buttons,d=[];var f=a.trim(h).split(",");for(var e in f){var c={},g=f[e].split(" ");c.label=g[0];c.click=g[1];d.push(c)}return d},_triggerClick:function(c,e,f){var d=this;var g=a.coral.toFunction(c);e=a.Event(e);return g.apply(d.element[0],[e].concat(f))},_createButtons:function(){var f=this,e=this.options,d=this._getButtons();var c=a('<span class="coral-uploader-btn-icons coral-corner-right"></span>');f.uiBorder.append(c);a.each(d,function(j,l){var i=l.label,m=l.id,k=l.click,h={},g=a('<span class="coral-uploader-btn-ico icon coral-uploader-btn-textico"></span>');if(i){g.html(i);h.label=i}if(m){g.attr("data-id",m);h.id=m}g.bind("click"+f.eventNamespace,function(n){if(f.options.disabled){return}f._triggerClick(k,n,h)});c.append(g)})},_initUploder:function(c){var e=this,f=e.element.attr("id");e.uiUploader=a('<span class="coral-uploader"></span>');e.uiBorder=a('<span class="coral-uploader-border coral-corner-all"></span>');e.uploader=a('<div id="'+f+'_uploader"></div>');e.element.after(e.uiUploader);e.uiUploader.append(e.uiBorder);e.uiBorder.append(e.element);e.element.hide();if(c.displayStyle=="original"){e.element.before(e.uploader);this.uploader.uploadify(c);return}this.uiUploader.addClass("coral-uploader-custom coral-textbox");this.uiBorder.addClass("coral-textbox-border");if(c.buttons){this._createButtons()}e.select=[];a(this.element).wrap('<span class="coral-file-default"></span>').before("<span class='coral-file'>"+c.emptyText+"</span>").before(e.uploader);
var d=a.extend(c,{height:28,width:800});if(!d.queueID){a(this.element).before("<div id='"+f+"_queue'></div>");a("#"+f+"_queue").dialog({autoOpen:false,title:"",modal:false,resizable:false,onOpen:function(){e.uploader.uploadify("upload","*")}});c.queueID=f+"_queue";this.hasDialog=true}e.uploader.uploadify(d)},_isQueueDialog:function(){return this.hasDialog},_reloadUploader:function(){var d=this,c=this.options;delete c.id;d.uploader.uploadify(c);c.id=d.element.attr("id")},getEventsObj:function(){var d=this,c=this.options,e=this.element.attr("id");return{onCancel:function(f){d._trigger("onCancel",null,[{file:f}])},onClearQueue:function(f){d._trigger("onClearQueue",null,[{queueItemCount:f}])},onDestroy:function(){d._trigger("onDestroy",null,[])},onDialogClose:function(f){if("custom"==c.displayStyle&&c.auto&&d._isQueueDialog()){a("#"+e+"_queue").dialog("open")}d._trigger("onDialogClose",null,[{queueData:f}])},onDialogOpen:function(){if("custom"==c.displayStyle){d.select=[]}d._trigger("onDialogOpen",null,[])},onDisable:function(){d._trigger("onDisable",null,[])},onEnable:function(){d._trigger("onEnable",null,[])},onFallback:function(){d._trigger("onFallback ",null,[])},onInit:function(f){d._trigger("onInit",null,[{swfuploadify:f}])},onQueueComplete:function(f){var g=d.element.attr("id");if("custom"==c.displayStyle&&d._isQueueDialog()){setTimeout(function(){a("#"+g+"_queue").dialog("close");d.select=[]},c.delay)}d._trigger("onQueueComplete",null,[{queueData:f}])},onSelectError:function(f,h,g){d._trigger("onSelectError",null,[{arguments:arguments}])},onSelect:function(f){if("custom"==c.displayStyle){d.select.push(f.name);d.uiUploader.find(".coral-file").html(d.select.join(","));d.uiUploader.find("object").attr("title",d.select.join(","))}d._trigger("onSelect",null,[{file:f}])},onSWFReady:function(){d._trigger("onSWFReady",null,[])},onUploadComplete:function(f){d._trigger("onUploadComplete",null,[{file:f}])},onUploadError:function(f,i,h,g){d._trigger("onUploadError",null,[{file:f,errorCode:i,errorMsg:h,errorString:g}])
},onUploadSuccess:function(g,h,f){d._trigger("onUploadSuccess",null,[{file:g,data:h,response:f}])},onUploadProgress:function(g,j,f,i,h){d._trigger("onUploadProgress",null,[{file:g,fileBytesLoaded:j,fileTotalBytes:f,queueBytesLoaded:i,uploadSize:h}])},onUploadStart:function(f){d._trigger("onUploadStart",null,[{file:f}])}}},_setOption:function(c,e){var d=this;if(c==="id"||c==="name"){return}this._super(c,e);if(c==="emptyText"){this.uiUploader.find(".coral-file").html(e);return}d.settings(c,e)},_destroy:function(){var c=this;c.uiUploader.replaceWith(c.element)}})})(jQuery);

var tooltip=$.component("coral.tooltip",{version:"4.0.1",options:{content:function(){var a=$(this).attr("title")||"";return $("<a>").text(a).html()},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,tooltipClass:null,track:false,onClose:null,onOpen:null},_addDescribedBy:function(b,c){var a=(b.attr("aria-describedby")||"").split(/\s+/);a.push(c);b.data("coral-tooltip-id",c).attr("aria-describedby",$.trim(a.join(" ")))},_removeDescribedBy:function(c){var d=c.data("coral-tooltip-id"),b=(c.attr("aria-describedby")||"").split(/\s+/),a=$.inArray(d,b);if(a!==-1){b.splice(a,1)}c.removeData("coral-tooltip-id");b=$.trim(b.join(" "));if(b){c.attr("aria-describedby",b)}else{c.removeAttr("aria-describedby")}},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};if(this.options.disabled){this._disable()}this.liveRegion=$("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("coral-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(a,c){var b=this;if(a==="disabled"){this[c?"_disable":"_enable"]();this.options[a]=c;return}this._super(a,c);if(a==="content"){$.each(this.tooltips,function(e,d){b._updateContent(d)})}},_disable:function(){var a=this;$.each(this.tooltips,function(d,b){var c=$.Event("blur");c.target=c.currentTarget=b[0];a.close(c,true)});this.element.find(this.options.items).addBack().each(function(){var b=$(this);if(b.is("[title]")){b.data("coral-tooltip-title",b.attr("title")).removeAttr("title")}})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var a=$(this);if(a.data("coral-tooltip-title")){a.attr("title",a.data("coral-tooltip-title"))}})},open:function(b){var a=this,c=$(b?b.target:this.element).closest(this.options.items);if(!c.length||c.data("coral-tooltip-id")){return}if(c.attr("title")){c.data("coral-tooltip-title",c.attr("title"))}c.data("coral-tooltip-open",true);
if(b&&b.type==="mouseover"){c.parents().each(function(){var e=$(this),d;if(e.data("coral-tooltip-open")){d=$.Event("blur");d.target=d.currentTarget=this;a.close(d,true)}if(e.attr("title")){e.uniqueId();a.parents[this.id]={element:this,title:e.attr("title")};e.attr("title","")}})}this._updateContent(c,b)},_updateContent:function(f,e){var d,a=this.options.content,c=this,b=e?e.type:null;if(typeof a==="string"){return this._open(e,f,a)}d=a.call(f[0],function(g){if(!f.data("coral-tooltip-open")){return}c._delay(function(){if(e){e.type=b}this._open(e,f,g)})});if(d){this._open(e,f,d)}},_open:function(a,d,e){var i,h,g,b,f=$.extend({},this.options.position);if(!e){return}i=this._find(d);if(i.length){i.find(".coral-tooltip-content").html(e);return}if(d.is("[title]")){if(a&&a.type==="mouseover"){d.attr("title","")}else{d.removeAttr("title")}}i=this._tooltip(d);this._addDescribedBy(d,i.attr("id"));i.find(".coral-tooltip-content").html(e);this.liveRegion.children().hide();if(e.clone){b=e.clone();b.removeAttr("id").find("[id]").removeAttr("id")}else{b=e}$("<div>").html(b).appendTo(this.liveRegion);function c(j){f.of=j;if(i.is(":hidden")){return}i.position(f)}if(this.options.track&&a&&/^mouse/.test(a.type)){this._on(this.document,{mousemove:c});c(a)}else{i.position($.extend({of:d},this.options.position))}this.hiding=false;this.closing=false;i.hide();this._show(i,this.options.show);if(this.options.show&&this.options.show.delay){g=this.delayedShow=setInterval(function(){if(i.is(":visible")){c(f.of);clearInterval(g)}},$.fx.interval)}this._trigger("onOpen",a,{tooltip:i});h={keyup:function(j){if(j.keyCode===$.coral.keyCode.ESCAPE){var k=$.Event(j);k.currentTarget=d[0];this.close(k,true)}}};if(d[0]!==this.element[0]){h.remove=function(){this._removeTooltip(i)}}if(!a||a.type==="mouseover"){h.mouseleave="close"}if(!a||a.type==="focusin"){h.focusout="close"}this._on(true,d,h)},close:function(b){var a=this,d=$(b?b.currentTarget:this.element),c=this._find(d);if(this.closing){return}clearInterval(this.delayedShow);
if(d.data("coral-tooltip-title")&&!d.attr("title")){d.attr("title",d.data("coral-tooltip-title"))}this._removeDescribedBy(d);this.hiding=true;c.stop(true);this._hide(c,this.options.hide,function(){a._removeTooltip($(this));this.hiding=false;this.closing=false});d.removeData("coral-tooltip-open");this._off(d,"mouseleave focusout keyup");if(d[0]!==this.element[0]){this._off(d,"remove")}this._off(this.document,"mousemove");if(b&&b.type==="mouseleave"){$.each(this.parents,function(f,e){$(e.element).attr("title",e.title);delete a.parents[f]})}this.closing=true;this._trigger("onClose",b,{tooltip:c});if(!this.hiding){this.closing=false}},_tooltip:function(a){var b=$("<div>").attr("role","tooltip").addClass("coral-tooltip coral-component coral-corner-all coral-component-content "+(this.options.tooltipClass||"")),c=b.uniqueId().attr("id");$("<div>").addClass("coral-tooltip-content").appendTo(b);b.appendTo(this.document[0].body);this.tooltips[c]=a;return b},_find:function(a){var b=a.data("coral-tooltip-id");return b?$("#"+b):$()},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_destroy:function(){var a=this;$.each(this.tooltips,function(d,b){var c=$.Event("blur");c.target=c.currentTarget=b[0];a.close(c,true);$("#"+d).remove();if(b.data("coral-tooltip-title")){if(!b.attr("title")){b.attr("title",b.data("coral-tooltip-title"))}b.removeData("coral-tooltip-title")}});this.liveRegion.remove()}});

/*!
 * jQuery UI Spinner 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/spinner/
 */
function spinner_modifier(a){return function(){var b=this.element.val();a.apply(this,arguments);this._refresh();if(b!==this.element.val()){this._trigger("onChange")}}}var spinner=$.component("coral.spinner",{version:"4.0.3",castProperties:["triggers"],defaultElement:"<input>",componentEventPrefix:"spin",options:{culture:null,icons:{down:"icon-arrow-down2",up:"icon-arrow-up2"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,onChange:null,onSpin:null,onStart:null,onStop:null,triggers:null,excluded:false},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);if(this.value()!==""){this._value(this.element.val(),true)}this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var a={},b=this.element;$.each(["min","max","step"],function(c,d){var e=b.attr(d);if(e!==undefined&&e.length){a[d]=e}});return a},_events:{keydown:function(a){if(this._start(a)&&this._keydown(a)){a.preventDefault()}},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){if(this.cancelBlur){delete this.cancelBlur;return}this._stop();this._refresh();if(this.previous!==this.element.val()){this._trigger("onChange",a)}},mousewheel:function(a,b){if(!b){return}if(!this.spinning&&!this._start(a)){return false}this._spin((b>0?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){if(this.spinning){this._stop(a)}},100);a.preventDefault()},"mousedown .coral-spinner-button":function(b){var a;a=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();function c(){var d=this.element[0]===this.document[0].activeElement;
if(!d){this.element.focus();this.previous=a;this._delay(function(){this.previous=a})}}b.preventDefault();c.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;c.call(this)});if(this._start(b)===false){return}this._repeat(null,$(b.currentTarget).hasClass("coral-spinner-up")?1:-1,b)},"mouseup .coral-spinner-button":"_stop","mouseenter .coral-spinner-button":function(a){if(!$(a.currentTarget).hasClass("coral-state-active")){return}if(this._start(a)===false){return false}this._repeat(null,$(a.currentTarget).hasClass("coral-spinner-up")?1:-1,a)},"mouseleave .coral-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("coral-spinner-input coral-textbox-default").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=a.find(".coral-spinner-button").attr("tabIndex",-1).button().removeClass("coral-corner-all");if(this.buttons.height()>Math.ceil(a.height()*0.5)&&a.height()>0){a.height(a.height())}if(this.options.disabled){this.disable()}},_keydown:function(b){var a=this.options,c=$.coral.keyCode;switch(b.keyCode){case c.UP:this._repeat(null,1,b);return true;case c.DOWN:this._repeat(null,-1,b);return true;case c.PAGE_UP:this._repeat(null,a.page,b);return true;case c.PAGE_DOWN:this._repeat(null,-a.page,b);return true}return false},_uiSpinnerHtml:function(){return"<span class='coral-spinner coral-component'><span class='coral-textbox-border coral-corner-all'></span></span>"},_buttonHtml:function(){return"<a class='coral-spinner-button coral-spinner-up coral-corner-tr'><span class='icon "+this.options.icons.up+"'>&#9650;</span></a><a class='coral-spinner-button coral-spinner-down coral-corner-br'><span class='icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){if(!this.spinning&&this._trigger("onStart",a)===false){return false}if(!this.counter){this.counter=1}this.spinning=true;return true},_repeat:function(b,a,c){b=b||500;
clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,a,c)},b);this._spin(a*this.options.step,c)},_spin:function(b,a){var c=this.value()||0;if(!this.counter){this.counter=1}c=this._adjustValue(c+b*this._increment(this.counter));if(!this.spinning||this._trigger("onSpin",a,{value:c})!==false){this._value(c);this.counter++}},_increment:function(a){var b=this.options.incremental;if(b){return $.isFunction(b)?b(a):Math.floor(a*a*a/50000-a*a/500+17*a/200+1)}return 1},_precision:function(){var a=this._precisionOf(this.options.step);if(this.options.min!==null){a=Math.max(a,this._precisionOf(this.options.min))}return a},_precisionOf:function(b){var c=b.toString(),a=c.indexOf(".");return a===-1?0:c.length-a-1},_adjustValue:function(c){var b,d,a=this.options;b=a.min!==null?a.min:0;d=c-b;d=Math.round(d/a.step)*a.step;c=b+d;c=parseFloat(c.toFixed(this._precision()));if(a.max!==null&&c>a.max){return a.max}if(a.min!==null&&c<a.min){return a.min}return c},_stop:function(a){if(!this.spinning){return}clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("onStop",a)},_setOption:function(a,b){if(a==="value"){if(typeof b!=="undefined"){this.value(b)}else{this.value()}}if(a==="culture"||a==="numberFormat"){var c=this._parse(this.element.val());this.options[a]=b;this.element.val(this._format(c));return}if(a==="max"||a==="min"||a==="step"){if(typeof b==="string"){b=this._parse(b)}}if(a==="icons"){this.buttons.first().find(".coral-icon").removeClass(this.options.icons.up).addClass(b.up);this.buttons.last().find(".coral-icon").removeClass(this.options.icons.down).addClass(b.down)}this._super(a,b);if(a==="disabled"){this.component().toggleClass("coral-state-disabled",!!b);this.element.prop("disabled",!!b);this.buttons.button(b?"disable":"enable")}},_setOptions:spinner_modifier(function(a){this._super(a)}),_parse:function(a){if(typeof a==="string"&&a!==""){a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a
}return a===""||isNaN(a)?null:a},_format:function(a){if(a===""){return""}return window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var a=this.value();if(a===null){return false}return a===this._adjustValue(a)},_value:function(c,a){var b;if(c!==""){b=this._parse(c);if(b!==null){if(!a){b=this._adjustValue(b)}c=this._format(b)}}this.element.val(c);this._refresh()},_destroy:function(){this.element.removeClass("coral-spinner-input").prop("disabled",false).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:spinner_modifier(function(a){this._stepUp(a)}),_stepUp:function(a){if(this._start()){this._spin((a||1)*this.options.step);this._stop()}},stepDown:spinner_modifier(function(a){this._stepDown(a)}),_stepDown:function(a){if(this._start()){this._spin((a||1)*-this.options.step);this._stop()}},pageUp:spinner_modifier(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:spinner_modifier(function(a){this._stepDown((a||1)*this.options.page)}),setValue:function(a){this.value(a)},getValue:function(a){return this.value()},value:function(a){if(!arguments.length){return this._parse(this.element.val())}spinner_modifier(this._value).call(this,a)},component:function(){return this.uiSpinner.parent()}});

/*!
 * jQuery UI Slider 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 */
var slider=$.component("coral.slider",$.coral.mouse,{version:"4.0.3",componentEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this.element.addClass("coral-slider coral-slider-"+this.orientation+" coral-component coral-component-content coral-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var d,a,b=this.options,f=this.element.find(".coral-slider-handle").addClass("coral-state-default coral-corner-all"),e="<span class='coral-slider-handle coral-state-default coral-corner-all' tabindex='0'></span>",c=[];a=(b.values&&b.values.length)||1;if(f.length>a){f.slice(a).remove();f=f.slice(0,a)}for(d=f.length;d<a;d++){c.push(e)}this.handles=f.add($(c.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(g){$(this).data("coral-slider-handle-index",g)})},_createRange:function(){var a=this.options,b="";if(a.range){if(a.range===true){if(!a.values){a.values=[this._valueMin(),this._valueMin()]}else{if(a.values.length&&a.values.length!==2){a.values=[a.values[0],a.values[0]]}else{if($.isArray(a.values)){a.values=a.values.slice(0)}}}}if(!this.range||!this.range.length){this.range=$("<div></div>").appendTo(this.element);b="coral-slider-range coral-component-header coral-corner-all"}else{this.range.removeClass("coral-slider-range-min coral-slider-range-max").css({left:"",bottom:""})
}this.range.addClass(b+((a.range==="min"||a.range==="max")?" coral-slider-range-"+a.range:""))}else{if(this.range){this.range.remove()}this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();if(this.range){this.range.remove()}this.element.removeClass("coral-slider coral-slider-horizontal coral-slider-vertical coral-component coral-component-content coral-corner-all");this._mouseDestroy()},_mouseCapture:function(c){var g,j,b,e,i,k,f,a,h=this,d=this.options;if(d.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();g={x:c.pageX,y:c.pageY};j=this._normValueFromMouse(g);b=this._valueMax()-this._valueMin()+1;this.handles.each(function(l){var m=Math.abs(j-h.values(l));if((b>m)||(b===m&&(l===h._lastChangedValue||h.values(l)===d.min))){b=m;e=$(this);i=l}});k=this._start(c,i);if(k===false){return false}this._mouseSliding=true;this._handleIndex=i;e.addClass("coral-state-active").focus();f=e.offset();a=!$(c.target).parents().addBack().is(".coral-slider-handle");this._clickOffset=a?{left:0,top:0}:{left:c.pageX-f.left-(e.width()/2),top:c.pageY-f.top-(e.height()/2)-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)};if(!this.handles.hasClass("coral-state-hover")){this._slide(c,i,j)}this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(c){var a={x:c.pageX,y:c.pageY},b=this._normValueFromMouse(a);this._slide(c,this._handleIndex,b);return false},_mouseStop:function(a){this.handles.removeClass("coral-state-active");this._mouseSliding=false;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal"
},_normValueFromMouse:function(b){var a,e,d,c,f;if(this.orientation==="horizontal"){a=this.elementSize.width;e=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{a=this.elementSize.height;e=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}d=(e/a);if(d>1){d=1}if(d<0){d=0}if(this.orientation==="vertical"){d=1-d}c=this._valueMax()-this._valueMin();f=this._valueMin()+d*c;return this._trimAlignValue(f)},_start:function(c,b){var a={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){a.value=this.values(b);a.values=this.values()}return this._trigger("start",c,a)},_slide:function(e,d,c){var a,b,f;if(this.options.values&&this.options.values.length){a=this.values(d?0:1);if((this.options.values.length===2&&this.options.range===true)&&((d===0&&c>a)||(d===1&&c<a))){c=a}if(c!==this.values(d)){b=this.values();b[d]=c;f=this._trigger("slide",e,{handle:this.handles[d],value:c,values:b});a=this.values(d?0:1);if(f!==false){this.values(d,c)}}}else{if(c!==this.value()){f=this._trigger("slide",e,{handle:this.handles[d],value:c});if(f!==false){this.value(c)}}}},_stop:function(c,b){var a={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){a.value=this.values(b);a.values=this.values()}this._trigger("stop",c,a)},_change:function(c,b){if(!this._keySliding&&!this._mouseSliding){var a={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){a.value=this.values(b);a.values=this.values()}this._lastChangedValue=b;this._trigger("change",c,a)}},value:function(a){if(arguments.length){this.options.value=this._trimAlignValue(a);this._refreshValue();this._change(null,0);return}return this._value()},values:function(b,e){var d,a,c;if(arguments.length>1){this.options.values[b]=this._trimAlignValue(e);this._refreshValue();this._change(null,b);return}if(arguments.length){if($.isArray(arguments[0])){d=this.options.values;a=arguments[0];for(c=0;
c<d.length;c+=1){d[c]=this._trimAlignValue(a[c]);this._change(null,c)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(b)}else{return this.value()}}}else{return this._values()}},_setOption:function(b,c){var a,d=0;if(b==="range"&&this.options.range===true){if(c==="min"){this.options.value=this._values(0);this.options.values=null}else{if(c==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null}}}if($.isArray(this.options.values)){d=this.options.values.length}if(b==="disabled"){this.element.toggleClass("coral-state-disabled",!!c)}this._super(b,c);switch(b){case"orientation":this._detectOrientation();this.element.removeClass("coral-slider-horizontal coral-slider-vertical").addClass("coral-slider-"+this.orientation);this._refreshValue();this.handles.css(c==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(a=0;a<d;a+=1){this._change(null,a)}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_value:function(){var a=this.options.value;a=this._trimAlignValue(a);return a},_values:function(a){var d,c,b;if(arguments.length){d=this.options.values[a];d=this._trimAlignValue(d);return d}else{if(this.options.values&&this.options.values.length){c=this.options.values.slice();for(b=0;b<c.length;b+=1){c[b]=this._trimAlignValue(c[b])}return c}else{return[]}}},_trimAlignValue:function(d){if(d<=this._valueMin()){return this._valueMin()}if(d>=this._valueMax()){return this._valueMax()}var a=(this.options.step>0)?this.options.step:1,c=(d-this._valueMin())%a,b=d-c;if(Math.abs(c)*2>=a){b+=(c>0)?a:(-a)}return parseFloat(b.toFixed(5))},_calculateNewMax:function(){var a=(this.options.max-this._valueMin())%this.options.step;
this.max=this.options.max-a},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var f,e,i,g,j,d=this.options.range,c=this.options,h=this,b=(!this._animateOff)?c.animate:false,a={};if(this.options.values&&this.options.values.length){this.handles.each(function(k){e=(h.values(k)-h._valueMin())/(h._valueMax()-h._valueMin())*100;a[h.orientation==="horizontal"?"left":"bottom"]=e+"%";$(this).stop(1,1)[b?"animate":"css"](a,c.animate);if(h.options.range===true){if(h.orientation==="horizontal"){if(k===0){h.range.stop(1,1)[b?"animate":"css"]({left:e+"%"},c.animate)}if(k===1){h.range[b?"animate":"css"]({width:(e-f)+"%"},{queue:false,duration:c.animate})}}else{if(k===0){h.range.stop(1,1)[b?"animate":"css"]({bottom:(e)+"%"},c.animate)}if(k===1){h.range[b?"animate":"css"]({height:(e-f)+"%"},{queue:false,duration:c.animate})}}}f=e})}else{i=this.value();g=this._valueMin();j=this._valueMax();e=(j!==g)?(i-g)/(j-g)*100:0;a[this.orientation==="horizontal"?"left":"bottom"]=e+"%";this.handle.stop(1,1)[b?"animate":"css"](a,c.animate);if(d==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[b?"animate":"css"]({width:e+"%"},c.animate)}if(d==="max"&&this.orientation==="horizontal"){this.range[b?"animate":"css"]({width:(100-e)+"%"},{queue:false,duration:c.animate})}if(d==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[b?"animate":"css"]({height:e+"%"},c.animate)}if(d==="max"&&this.orientation==="vertical"){this.range[b?"animate":"css"]({height:(100-e)+"%"},{queue:false,duration:c.animate})}}},_handleEvents:{keydown:function(e){var f,c,b,d,a=$(e.target).data("coral-slider-handle-index");switch(e.keyCode){case $.coral.keyCode.HOME:case $.coral.keyCode.END:case $.coral.keyCode.PAGE_UP:case $.coral.keyCode.PAGE_DOWN:case $.coral.keyCode.UP:case $.coral.keyCode.RIGHT:case $.coral.keyCode.DOWN:case $.coral.keyCode.LEFT:e.preventDefault();if(!this._keySliding){this._keySliding=true;$(e.target).addClass("coral-state-active");
f=this._start(e,a);if(f===false){return}}break}d=this.options.step;if(this.options.values&&this.options.values.length){c=b=this.values(a)}else{c=b=this.value()}switch(e.keyCode){case $.coral.keyCode.HOME:b=this._valueMin();break;case $.coral.keyCode.END:b=this._valueMax();break;case $.coral.keyCode.PAGE_UP:b=this._trimAlignValue(c+((this._valueMax()-this._valueMin())/this.numPages));break;case $.coral.keyCode.PAGE_DOWN:b=this._trimAlignValue(c-((this._valueMax()-this._valueMin())/this.numPages));break;case $.coral.keyCode.UP:case $.coral.keyCode.RIGHT:if(c===this._valueMax()){return}b=this._trimAlignValue(c+d);break;case $.coral.keyCode.DOWN:case $.coral.keyCode.LEFT:if(c===this._valueMin()){return}b=this._trimAlignValue(c-d);break}this._slide(e,a,b)},keyup:function(b){var a=$(b.target).data("coral-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(b,a);this._change(b,a);$(b.target).removeClass("coral-state-active")}}}});

/*!
 * 4.0
 * 
 * JS
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 */
(function(a,b){a.component("coral.treebutton",a.coral.button,{version:a.coral.version,castProperties:["treeOptions"],options:{id:null,name:null,label:null,cls:null,position:{my:"left top",at:"left bottom",collision:"none"},width:null,text:true,disabled:false,multiple:false,treeOptions:{id:null,name:null,data:null,showLine:false,showIcon:false,checkable:true},onCreate:null,onClick:null,onCheck:null,onSelect:null},tree:function(){return this.uiTree},_create:function(){var c=this;this._super();this._initElements()},_initElements:function(){var e=this,d=this.options,f=this.options.treeOptions;this.element.addClass("coral-treebutton-element").uniqueId();this.uiTree=a("<ul>").attr("id",a(this.element).attr("id")+"_tree").addClass("coral-treebutton-panel coral-front").appendTo("body");this.element.on("click",function(h,g){e._showtree()});this._on(this.document,{mousedown:function(g){if(g.isDefaultPrevented()){return}e._hidetree()}});this.uiTree.unbind().bind("mousedown",function(g){g.preventDefault()});var c={checkable:this.options.multiple};f=a.extend({},c,d.treeOptions,{id:a(this.element).attr("id")+"_tree"});this.uiTree.tree(f)},_bindEvents:function(){},_setOption:function(c,e){var d=this;this._super(c,e)},_showtree:function(d){var f=this.uiTree;f.show();var c=f.siblings(".coral-front:visible").map(function(){return +a(this).css("z-index")}).get(),e=Math.max.apply(null,c);if(e>=+f.css("z-index")){f.css("z-index",e+1)}f.position(a.extend({of:this.element},this.options.position))},_hidetree:function(){this.uiTree.hide()},disabledNode:function(f){var d=this.uiTree.tree("getNodesByParam","id",f);for(var e=0,c=d.length;e<c;e++){this.uiTree.tree("setChkDisabled",d[0],true)}},undisabledNode:function(f){var d=this.uiTree.tree("getNodesByParam","id",f);for(var e=0,c=d.length;e<c;e++){this.uiTree.tree("setChkDisabled",d[0],false)}},_destroy:function(){this.uiTree.remove();this.element.removeClass("ctrl-init ctrl-init-treebutton coral-treebutton-element")
}})})(jQuery);

/*!
 * 4.0
 * 
 * JS
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 */
(function(a,b){a.component("coral.splitbutton",a.coral.button,{version:"4.0.2",componentName:"splitbutton",castProperties:["menuOptions","dataCustom"],options:{id:null,name:null,label:null,cls:null,icons:{primary:null,secondary:null},width:null,text:true,disabled:false,menuOptions:{autoDisplay:false,popup:true},data:null,url:null,onCreate:null,onClick:null,onDblClick:null},component:function(){var c=this;return this.uiBox},uiBorder:function(){return this.uiBorder},uiDropdownButton:function(){return this.dropdownButton},menu:function(){return this.uiMenu},_create:function(){var c=this;this._initElements();this._super()},_initElements:function(){var g=this,f=this.options,e=this.options.menuOptions,h=this.options.data,c=this.options.url;this.element.addClass("ctrl-init ctrl-init-splitbutton coral-splitbutton-element");this.dropdownButton=a("<button class='coral-splitbutton-dropdownbutton' type='button'></button>").uniqueId();this.uiBorder=a('<span class="coral-splitbutton-border"></span>');this.uiBox=a('<span class="coral-splitbutton"></span>');this.uiBox.append(this.uiBorder);this.uiMenu=a('<ul class="coral-splitbutton-menu"></ul>');this.uiBox.insertAfter(this.element);this.uiBorder.append(this.element).append(this.dropdownButton);this.uiMenu.appendTo(a(document.body));if(f.width){this.uiBox.css({width:f.width})}if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)}else{this.options.id=this.element.uniqueId()}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name")}else{if(this.options.name){this.element.attr("name",this.options.name)}}this.triggerId=this.dropdownButton.attr("id");this._on(this.element,{buttononclick:function(j,i){g._trigger("onClick",j,i)}});this.dropdownButton.button({label:"",text:false,icons:"icon-arrow-down2",onClick:function(k,j){if(g._getToolbar().toolbar("option","clickToDisplay")==0){return
}if(!g._getToolbar().length||!g._getToolbar().toolbar("option","autoDisplay")){return}var i=g._getToolbar(true);if(i.length){i.toggleClass("coral-toolbar-click-active")}},onMouseEnter:function(k,j){if(!g._getToolbar().length||!g._getToolbar().toolbar("option","autoDisplay")){return}var i=g._getToolbar(true);if(i.hasClass("coral-toolbar-click-active")){if(a(".coral-tieredmenu:visible").length){g._hideMenus()}g.uiMenu.tieredmenu("show")}}});var d={};if(null!=h){d.data=h}if(null!=c){d.url=c}e=a.extend({},d,f.menuOptions,{id:this.element.attr("id")+"_tieredmenu",trigger:this.dropdownButton,of:this.element});this.uiMenu.tieredmenu(e);if(g._getToolbar().length&&g._getToolbar().toolbar("option","autoDisplay")){this.uiMenu.tieredmenu("component").bind("mouseleave",function(){g._hideMenus()})}this._on(this.uiMenu,{tieredmenuonclick:function(j,i){g._trigger("onClick",j,i)}})},_getToolbar:function(d){var f=this,e=this.options,c=a();if(this.element.hasClass("ctrl-toolbar-element")){c=d?this.element.parents(".coral-toolbar:eq(0)"):this.element.parents(".ctrl-init-toolbar:eq(0)")}return c},_hideMenus:function(){a(".coral-tieredmenu").hide()},_setOption:function(c,e){if(c==="id"||c==="name"){return}var d=this;if(c==="disabled"){this.element.toggleClass("coral-state-disabled",e);this.dropdownButton.button("option","disabled",e)}this._super(c,e)},_destroy:function(){this.uiBox.replaceWith(this.element);this.uiMenu.parent().remove();this.element.removeClass("ctrl-init ctrl-init-splitbutton coral-splitbutton-element")}})})(jQuery);

/*!
 * 4.0
 * 
 * JS
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 */
(function(a,b){a(document).unbind(".coral-menubutton").bind("mousedown.coral-menubutton mousewheel.coral-menubutton",function(c){if(a(c.target).closest("span.coral-menubutton,.coral-menubutton-buttons").length){return}a(".coral-menubutton-buttons").hide()});a.component("coral.menubutton",a.coral.button,{version:"4.0.2",castProperties:["menuOptions"],options:{id:null,name:null,label:null,cls:null,icons:{primary:null,secondary:null},width:null,text:true,disabled:false,renderType:"menu",menuOptions:{autoDisplay:false,popup:true},data:null,url:null,method:"get",position:{my:"left top",at:"left bottom"},onCreate:null,onClick:null,onDblClick:null,onLoad:null},showPanel:function(){var g=this,f=this.options;var c=a.extend(f.position,{of:this.element});var d=this.uiButtons.siblings(".coral-front:visible").map(function(){return +a(this).css("z-index")}).get(),e=Math.max.apply(null,d);if(e>=+this.uiButtons.css("z-index")){this.uiButtons.css("z-index",e+1)}this.uiButtons.css({position:"absolute",left:"",top:""}).position(c).show()},hidePanel:function(){this.uiButtons.hide()},_create:function(){this._initElements();this._super()},_getToolbar:function(d){var f=this,e=this.options,c=a();if(this.element.hasClass("ctrl-toolbar-element")){c=d?this.element.parents(".coral-toolbar:eq(0)"):this.element.parents(".ctrl-init-toolbar:eq(0)")}return c},_hideMenus:function(){a(".coral-tieredmenu").hide()},_initElements:function(){var d=this,c=this.options;this.element.addClass("ctrl-init ctrl-init-menubutton coral-menubutton-element");this.uiBorder=a('<span class="coral-menubutton-border"></span>');this.uiBox=a('<span class="coral-menubutton"></span>');this.uiBox.append(this.uiBorder);this.uiBox.insertAfter(this.element);this.uiBorder.append(this.element);if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)
}else{this.options.id=this.element.uniqueId().attr("id")}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name")}else{if(this.options.name){this.element.attr("name",this.options.name)}}this.options.onClick=function(h,g){if(c.renderType=="button"){if(!d.uiButtons.is(":visible")){d.showPanel()}else{d.hidePanel()}}if(!d._getToolbar().length||!d._getToolbar().toolbar("option","autoDisplay")){return}var f=d._getToolbar(true);if(f.length){f.toggleClass("coral-toolbar-click-active")}},this.options.onMouseEnter=function(h,g){if(!d._getToolbar().length||!d._getToolbar().toolbar("option","autoDisplay")){return}if(c.renderType=="button"){return}var f=d._getToolbar(true);if(f.hasClass("coral-toolbar-click-active")){if(a(".coral-tieredmenu:visible").length){d._hideMenus()}d.uiMenu.tieredmenu("show")}};this._on(this.element,{buttononclick:function(g,f){d._trigger("onClick",g,f)}});if(c.renderType=="button"){this.uiButtons=a("<div class='coral-menubutton-buttons coral-front'></div>").appendTo(a(document.body));this._loadData()}else{this.uiMenu=a('<ul class="coral-menubutton-menu"></ul>').appendTo(a(document.body));this._renderMenu()}},_renderMenu:function(){var g=this,f=this.options,e=this.options.menuOptions,h=this.options.data,c=this.options.url;var d={};if(null!=h){d.data=h}if(null!=c){d.url=c}e=a.extend({},d,f.menuOptions,{id:this.element.attr("id")+"_tieredmenu",trigger:this.element,of:this.element});this.uiMenu.tieredmenu(e);if(g._getToolbar().length&&g._getToolbar().toolbar("option","autoDisplay")){this.uiMenu.tieredmenu("component").bind("mouseleave",function(){g._hideMenus()})}this._on(this.uiMenu,{tieredmenuonclick:function(j,i){g._trigger("onClick",j,i)}})},_loadData:function(){var d=this,c=this.options;if(c.url){a.ajax({type:c.method,url:c.url,data:{},dataType:"json",success:function(e){d._initData(e)},error:function(){a.alert("Json Format Error!")}})}else{if(c.data){this._initData(c.data)}}},_initData:function(d){var c=this;if(typeof d==="object"){this._addItems(null,d)
}c._trigger("onLoad",null,{})},_addItems:function(f,j){if(typeof j!=="object"){return}var h=this,e=[],d=j.length;for(var g=0;g<d;g++){var c=j[g];if(!a.isEmptyObject(c)){e.push(h._createButton(c))}}this._appendItems(f,e);this._initItems(e)},_createButton:function(c){return{button:a("<button type='button'></button>").addClass("coral-menubutton-button-item"),options:c}},_appendItems:function(d,c){for(var e in c){c[e].button.appendTo(this.uiButtons)}},_initItems:function(c){var h=this;for(var f in c){var e=c[f].button,g=c[f].options;e.button(g);var d={};d.buttononclick=function(j,i){h._trigger("onClick",j,i)};h._on(e,d)}},add:function(c){},prepend:function(f){if(!f instanceof jQuery){return}var g=this,c=f.length;if(!(f instanceof Array)){f=[f]}for(var e=c-1;e>-1;e--){var d=f[e];d.css({margin:"",left:"",right:""}).removeClass("coral-menubutton-button-item").addClass("coral-menubutton-button-item").prependTo(g.uiButtons)}},append:function(f){if(!f instanceof jQuery){return}var g=this,c=f.length;if(!(f instanceof Array)){f=[f]}for(var e=c-1;e>-1;e--){var d=f[e];d.css({margin:"",left:"",right:""}).removeClass("coral-menubutton-button-item").addClass("coral-menubutton-button-item").prependTo(g.uiButtons)}},pop:function(){var e=this,d=this.options;if("button"!=d.renderType){return a()}var c=this.uiButtons.find(".coral-menubutton-button-item:eq(0)");if(c.length){return c.removeClass("coral-menubutton-button-item")}else{return a()}},component:function(){return this.uiBox},border:function(){return this.uiBorder},buttons:function(){return this.uiButtons},buttonElements:function(){return this.uiButtons.children()},menu:function(){return this.uiMenu},_bindEvents:function(){},_setOption:function(c,e){var d=this;if(c==="id"||c==="name"){return}if(c==="disabled"){this.element.toggleClass("coral-state-disabled",e)}this._super(c,e)},_destroy:function(){var c=this.options;this.uiBox.replaceWith(this.element);if(c.renderType=="buttons"){this.uiButtons.remove()}else{this.uiMenu.parent().remove()
}this.element.children().remove();this.element.removeClass("ctrl-init ctrl-init-menubutton coral-menubutton-element")}})})(jQuery);

(function(b,c){b.component("coral.autocompletetree",b.coral.autocomplete,{requestIndex:0,pending:0,options:{allowPushParent:false,rootNode:false,multiLineLabel:false,radioType:"level",showRootNode:true,multiple:false,triggers:null,excluded:false},_create:function(){this.options.render="tree";this._super()},_filter:function(f,e,d){b(this.menu.element).tree("reload",f);b(this.menu.element).tree("filterNodesByParam",{name:e.term});d(f)},_initData:function(){var e=this;this.menu={};var d=b("<ul>")[0];b(d).uniqueId().addClass("coral-autocomplete-panel coral-front").appendTo(this._appendTo()).tree({showLine:false,showIcon:false,radioType:this.options.radioType,showRootNode:this.options.showRootNode,rootNode:this.options.rootNode,componentCls:"coral-autocomplete-tree",addDiyDom:function(i,h){var k=15;var g=b("#"+h.tId+"_switch"),j=b("#"+h.tId+"_ico");j.before(g);if(h.level>0){var f="<span style='display: inline-block;width:"+(k*h.level)+"px'></span>";g.before(f)}},beforeClick:function(g,f){if(!e.options.allowPushParent&&f.isParent){return false}},onClick:function(h,k,j,i){var g=i,f=e.previous;if(e.element[0]!==e.document[0].activeElement){e.element.focus();e.previous=f;e._delay(function(){e.previous=f;e.selectedItem=g})}if(false!==e._trigger("beforeNodeClick",h,{item:g,value:e.getValue()})){e.selectedItem=g;e.selectedItems.push(g);if(e.options.multiLineLabel==false){e.setValue(g[e.options.valueField],true)}else{e.isMultiLabel(h,k,j)}}e._trigger("onNodeClick",h,{item:g,value:e.getValue()});e.term=e._text();e.close(h)}}).hide();this.menu.element=b(d);if(isNaN(this.options.panelHeight)){b(".coral-autocomplete-panel").css({"max-height":this.options.maxPanelHeight+"px"})}}});var a=b.coral.autocomplete})(jQuery);(function(f,e,a,g){var b="easyInput",d="easyText",c=b+d.charAt(0).toUpperCase()+d.slice(1);f.component(b+"."+d,{options:{currentValue:"",values:[],maxWidth:200,minWidth:80,maxChars:200,storage:"array",ajaxConfig:{url:"/",id:"",UPDATETemplate:"",UPDATEData:{},GETCallback:null}},_name:d,_input:null,_id:null,_valuesIndex:null,_classUnChanged:null,_classEmpty:null,_classOnEdit:null,_classChanged:null,_classEasyText:d.toLowerCase(),_setListeners:function(){this._input.bind({focus:this._focusBehaviour,input:this._autoGrownBehaviour,blur:this._blurBehaviour,storageChange:this._storageChange})
},_getClassName:function(h){return this._name.toLowerCase()+"-"+h},_setClassNames:function(){this._classOnHover=this._getClassName("onHover");this._classUnChanged=this._getClassName("unChanged");this._classOnEdit=this._getClassName("onEdit");this._classChanged=this._getClassName("changed");this._classEmpty=this._getClassName("empty")},_setVars:function(){var h=this.element;this._input=h;h.uniqueId();this._valuesIndex=0;this._id=this._name+"-"+h.attr("id");h.attr("maxLength",this.options.maxChars)},_setRuler:function(){var i="#"+this._name+"-ruler",j=f(i),h=this._input;if(!j.length){String.prototype.visualLength=function(){var k=f(i);k.html(this.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"));return k.width()};j=f('<span id="'+i.substr(1)+'"></span>');j.css({fontSize:h.css("fontSize"),fontFamily:h.css("font-family"),fontWeight:h.css("fontWeight"),position:"absolute",visibility:"hidden",whiteSpace:"nowrap"});f("body").after(j)}},_initializeAjax:function(){var h=this.options.ajaxConfig;if(!f.isFunction(h.GETCallback)){return}if(h.url.charAt(h.url.length-1)!=="/"){h.url+="/"}if(!h.id){h.id=this._id}f.ajax({url:h.url+h.id,succes:h.GETCallback})},_setState:function(){var h=this._input,m=h.val(),i=m.visualLength(),k=this.options.minWidth,l=this.options.maxWidth,j;if(i<k){j=k}else{if(l<i){j=l}else{j=i}}h.width(j);if(h.val().length===0){h.removeClass(this._classChanged);h.addClass(this._classEmpty)}else{h.addClass(this._classChanged)}},_focusBehaviour:function(){var i=f(this).data(c),h=i._input;h.removeClass(i._classChanged+" "+i._classUnChanged+" "+i._classEmpty).addClass(i._classOnEdit)},_autoGrownBehaviour:function(){var l=f(this).data(c),h=l._input,m=h.val(),j=l.options.minWidth,k=l.options.maxWidth,i=m.visualLength();if(i<j){i=j}else{if(i>k){i=k}}h.width(i)},_blurBehaviour:function(){var j=f(this).data(c),h=j._input,k=h.val(),i=j.options.ajaxConfig,l;h.removeClass(j._classOnEdit);if(k.length===0){h.addClass(j._classEmpty)}else{h.addClass(j._classChanged);
j.option("values",k);j._valuesIndex=j.option("values").length-1;if(j.options.storage==="ajax"){i.UPDATEData.value=h.val();f.ajax({url:i.url+i.id,data:j._tmpl(i.UPDATETemplate,i.UPDATEData),type:"UPDATE"})}}j._setState()},_tmpl:function(j,i){var h=typeof(j)!=="string"?(function(){throw {name:"Invalid Parameter",message:"You must insert a string into the function"}}()):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+j.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return i?h(i):h},_setOption:function(i,j){var h=this.options;switch(i){case"values":h.values.push(j);if(h.storage==="localStorage"){localStorage.setItem(this._id,JSON.stringify(h.values))}return;case"currentValue":this.option("values",j);this._input.val(j);break}this._super("_setOption",i,j)},_create:function(){var i,h,j=this.options.storage;this._setClassNames();this._setVars();this._setListeners();h=this._input;h.addClass(this._classEasyText);if(j==="localStorage"){if(localStorage[this._id]){i=JSON.parse(localStorage[this._id]);this.options.values=i;h.val(i[i.length-1]);this._valuesIndex=i.length-1}}else{if(j==="ajax"){this._initializeAjax()}}this._setRuler();this._setState()},_destroy:function(){this._input.attr("class","")},deleteStorage:function(){var i=this.options.ajaxConfig,h=this.options.storage;if(h==="localStorage"){localStorage.removeItem(this._id)}else{if(h==="ajax"){f.ajax({url:i.url+i.id,type:"DELETE"})}}this.options.values=[];this._input.val("");this._setState()},getNextBackValue:function(j){var h=this.option("values"),i=this._valuesIndex;if(j===g){j=true}if(typeof(j)!=="boolean"){throw new Error("Invalid parameter")}i+=j?1:(-1);if(h[i]===g){return -1}this._valuesIndex=i;this._input.val(h[i]);this._setState();return h[i]}})})(jQuery,window,document);

(function(f,d,a,h){var e="loading",g={position:"overlay",text:"",loadingIcon:"coral-icon-loading",tpl:'<span class="loading-wrapper {wrapper}">{text}<span class="{loadingIcon} icon"></span></span>',disableSource:false,disableOthers:[]};function c(j,i){this.element=j;this.options=f.extend({},g,i);this._defaults=g;this._name=e;this._loader=null;this.init()}function b(){if(!f[e]){f.loading=function(i){f("body").loading(i)}}}c.prototype={init:function(){if(f(this.element).is("body")){this.options.position="overlay"}this.show()},show:function(){var k=this,l=k.options.tpl.replace("{wrapper}"," loading-show  loading-"+k.options.position);l=l.replace("{loadingIcon}",k.options.loadingIcon);l=l.replace("{text}",(k.options.text!=="")?k.options.text+" ":"");k._loader=f(l);if(f(k.element).is("input, textarea")&&true===k.options.disableSource){f(k.element).attr("disabled","disabled")}else{if(true===k.options.disableSource){f(k.element).addClass("disabled")}}switch(k.options.position){case"inside":f(k.element).html(k._loader);break;case"overlay":var j=null;if(f(k.element).is("body")){j=f('<div class="loading-overlay" style="position:fixed; left:0; top:0; z-index: 10000; width: 100%; height: '+f(d).height()+'px;" />');f("body").prepend(j)}else{var n=f(k.element).css("position"),o={},i=f(k.element).outerHeight()+"px",m="100%";if("relative"===n||"absolute"===n){o={top:0,left:0}}else{o=f(k.element).position()}j=f('<div class="loading-overlay" style="position:absolute; top: '+o.top+"px; left: "+o.left+"px; z-index: 10000; width: "+m+"; height: "+i+';" />');f(k.element).prepend(j)}j.html(k._loader);k._loader.css({top:(j.outerHeight()/2-k._loader.outerHeight()/2)+"px"});break;default:f(k.element).after(k._loader);break}k.disableOthers()},hide:function(){if("overlay"===this.options.position){f(this.element).find(".loading-overlay").first().remove()}else{f(this._loader).remove();f(this.element).text(f(this.element).attr("data-loading-label"))}f(this.element).removeAttr("disabled").removeClass("disabled");
this.enableOthers()},disableOthers:function(){f.each(this.options.disableOthers,function(k,l){var j=f(l);if(j.is("button, input, textarea")){j.attr("disabled","disabled")}else{j.addClass("disabled")}})},enableOthers:function(){f.each(this.options.disableOthers,function(k,l){var j=f(l);if(j.is("button, input, textarea")){j.removeAttr("disabled")}else{j.removeClass("disabled")}})}};f.fn[e]=function(i){return this.each(function(){if(i&&"hide"!==i||!f.data(this,"plugin_"+e)){f.data(this,"plugin_"+e,new c(this,i))}else{var j=f.data(this,"plugin_"+e);if("hide"===i){j.hide()}else{j.show()}}})};b()})(jQuery,window,document);

window.PINYIN_DATA = {a:"",ai:"",an:"",ang:"",ao:"",ba:"",bai:"",ban:"",bang:"",bao:"",bei:"",ben:"",beng:"",bi:"",bian:"",biao:"",bie:"",bin:"",bing:"",bo:"",bu:"",ca:"",cai:"",can:"",cang:"",cao:"",ce:"",ceng:"",cha:"",chai:"",chan:"",chang:"",chao:"",che:"",chen:"",cheng:"",chi:"",chong:"",chou:"",chu:"",chuai:"",chuan:"",chuang:"",chui:"",chun:"",chuo:"",ci:"",cong:"",cou:"",cu:"",cuan:"",cui:"",cun:"",cuo:"",da:"",dai:"",dan:"",dang:"",dao:"",de:"",deng:"",di:"",dian:"",diao:"",die:"",ding:"",diu:"",dong:"",dou:"",du:"",duan:"",dui:"",dun:"",duo:"",e:"",en:"",er:"",fa:"",fan:"",fang:"",fei:"",fen:"",feng:"",fo:"",fou:"",fu:"",ga:"",gai:"",gan:"",gang:"",gao:"",ge:"",gei:"",gen:"",geng:"",gong:"",gou:"",gu:"",gua:"",guai:"",guan:"",guang:"",gui:"",gun:"",guo:"",ha:"",hai:"",han:"",hang:"",hao:"",he:"",hei:"",hen:"",heng:"",hong:"",hou:"",hu:"",hua:"",huai:"",huan:"",huang:"",hui:"",hun:"",huo:"",ji:"",jia:"",jian:"",jiang:"",jiao:"",jie:"",jin:"",jing:"",jiong:"",jiu:"",ju:"",juan:"",jue:"",jun:"",ka:"",kai:"",kan:"",kang:"",kao:"",ke:"",ken:"",keng:"",kong:"",kou:"",ku:"",kua:"",kuai:"",kuan:"",kuang:"",kui:"",kun:"",kuo:"",la:"",lai:"",lan:"",lang:"",lao:"",le:"",lei:"",leng:"",li:"",lia:"",lian:"",liang:"",liao:"",lie:"",lin:"",ling:"",liu:"",long:"",lou:"",lu:"",lv:"",luan:"",lue:"",lun:"",luo:"",ma:"",mai:"",man:"",mang:"",mao:"",me:"",mei:"",men:"",meng:"",mi:"",mian:"",miao:"",mie:"",min:"",ming:"",miu:"",mo:"",mou:"",mu:"",na:"",nai:"",nan:"",nang:"",nao:"",ne:"",nei:"",nen:"",neng:"",ni:"",nian:"",niang:"",niao:"",nie:"",nin:"",ning:"",niu:"",nong:"",nu:"",nv:"",nuan:"",nue:"",nuo:"",o:"",ou:"",pa:"",pai:"",pan:"",pang:"",pao:"",pei:"",pen:"",peng:"",pi:"",pian:"",piao:"",pie:"",pin:"",ping:"",po:"",pu:"",qi:"",qia:"",qian:"",qiang:"",qiao:"",qie:"",qin:"",qing:"",qiong:"",qiu:"",qu:"",quan:"",que:"",qun:"",ran:"",rang:"",rao:"",re:"",ren:"",reng:"",ri:"",rong:"",rou:"",ru:"",ruan:"",rui:"",run:"",ruo:"",sa:"",sai:"",san:"",sang:"",sao:"",se:"",sen:"",seng:"",sha:"",shai:"",shan:"",shang:"",shao:"",she:"",shen:"",sheng:"",shi:"",shou:"",shu:"",shua:"",shuai:"",shuan:"",shuang:"",shui:"",shun:"",shuo:"",si:"",song:"",sou:"",su:"",suan:"",sui:"",sun:"",suo:"",ta:"",tai:"",tan:"",tang:"",tao:"",te:"",teng:"",ti:"",tian:"",tiao:"",tie:"",ting:"",tong:"",tou:"",tu:"",tuan:"",tui:"",tun:"",tuo:"",wa:"",wai:"",wan:"",wang:"",wei:"",wen:"",weng:"",wo:"",wu:"",xi:"",xia:"",xian:"",xiang:"",xiao:"",xie:"",xin:"",xing:"",xiong:"",xiu:"",xu:"",xuan:"",xue:"",xun:"",ya:"",yan:"",yang:"",yao:"",ye:"",yi:"",yin:"",ying:"",yo:"",yong:"",you:"",yu:"",yuan:"",yue:"",yun:"",za:"",zai:"",zan:"",zang:"",zao:"",ze:"",zei:"",zen:"",zeng:"",zha:"",zhai:"",zhan:"",zhang:"",zhao:"",zhe:"",zhen:"",zheng:"",zhi:"",zhong:"",zhou:"",zhu:"",zhua:"",zhuai:"",zhuan:"",zhuang:"",zhui:"",zhun:"",zhuo:"",zi:"",zong:"",zou:"",zu:"",zuan:"",zui:"",zun:"",zuo:""};

var pinyinEngine=function(){return(this instanceof pinyinEngine)?this.resetCache():new pinyinEngine};pinyinEngine.prototype={search:function(c,h){var b=this._cache,g=this._history,f=[],e=0;c=c.toLowerCase();h=h||function(){};if(g.length&&c.indexOf(g.keyword)===1){b=g.content}for(var d=0,a=b.length;d<a;d++){if(b[d].tags.indexOf(c)!==-1){e++;f.push(b[d]);h(b[d].content)}}this._history={keyword:c,value:f,length:e};return f},setCache:function(c,f){var e,b="\u0001";e=c;for(var d=0,a=c.length;d<a;d++){e.push(pinyinEngine.toPinyin(c[d],false,b))}e=e.join(b);var g={tags:e,content:f};this._cache.push(g)},resetCache:function(){this._cache=[];this._history={}}};pinyinEngine.toPinyin=function(){var f=window.PINYIN_DATA;var b={},h,d,c,a;for(var d in f){h=f[d];c=0;a=h.length;for(;c<a;c++){var g=h.charAt(c);if(!b[g]){b[g]=[]}b[g].push(d)}}f=null;function e(w,v,n){var k=[],o,u=[];for(var t=0,q=w.length;t<q;t++){for(var s=0,p=v.length;s<p;s++){o=k[k.length]=(w[t] instanceof Array)?w[t].concat(v[s]):[].concat(w[t],v[s]);u.push(o.join(""))}}return{array:k,string:u.join(n||"")}}return function(n,t,j){var o,k,s,m,l,r;if(n==null||n.length==0){o=0}else{o=n.length}if(o===0){return t?"":[]}if(o===1){r=b[n];if(t){return r&&r[0]?r[0]:n}return r||[n]}else{var s=[];for(l=0;l<o;l++){r=b[n.charAt(l)];if(r){s[s.length]=t?r[0]:r}else{s[s.length]=t?n.charAt(l):[n.charAt(l)]}}if(t){return j==null?s:s.join(j||"")}k=s[0];m=s.length;var p,q;for(l=1;l<m;l++){p=e(k,s[l],j);k=p.array}return j==null?k:p.string}}}();

(function(a){a(document).tooltip({items:"[data-errors]",content:function(){var b=a(this);if(b.is("[data-errors]")){return b.attr("data-errors")}},show:{effect:"fadeIn",delay:300},tooltipClass:"coral-state-error",hide:{effect:"fadeOut",delay:0},position:{my:"left top",at:"left bottom+5"}})})(jQuery);

