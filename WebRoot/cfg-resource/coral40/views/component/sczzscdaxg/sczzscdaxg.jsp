<%--  Created by IntelliJ IDEA.  User: WILL  Date: 15/8/18  Time: 下午4:56  To change this template use File | Settings | File Templates.--%><%@ page contentType="text/html;charset=UTF-8" language="java" %><%@ page contentType="text/html;charset=UTF-8" language="java" %><%@ page import="com.ces.config.utils.CommonUtil" %><%@ taglib prefix="ces" tagdir="/WEB-INF/tags" %><%    String path = request.getContextPath();    String basePath = request.getScheme() + "://"            + request.getServerName() + ":" + request.getServerPort()            + path + "/";    request.setAttribute("idSuffix", CommonUtil.generateUIId(""));%><div id="maxDiv${idSuffix}" class="fill" style="height:780px;">    <ces:layout id="layoutId${idSuffix}" name="" style="width:800px;height:700px;" fit="true">        <ces:layoutRegion region="north" split="true" style="height:325px;" title="生产方案">            <ces:toolbar onClick="$.ns('namespaceId${idSuffix}').toolbarClick"                         data="['->',{'label': '保存', 'id':'saveMaster','cls':'save_tb', 'disabled': 'false','type': 'button'},{'label': '关闭', 'id':'return','cls':'return_tb', 'disabled': 'false','type': 'button'}]">            </ces:toolbar>            <div style="margin-top: -25px;position: absolute;"><div class='homeSpan' style="height:23px"><div style='margin-left:25px;width: 150px;font-size:16px' id="nva${idSuffix}"> - 种植任务 - 修改 </div></div></div>            <div id="enterFormDiv${idSuffix}" style="margin-left: 20px;height: 265px; ">                <form id="enterForm${idSuffix}" enctype="multipart/form-data" method="post" class="coralui-form">                    <div class="fillwidth colspan3 clearfix">                            <%--<div class="app-inputdiv4">--%>                        <input id="scdaid${idSuffix}" type="hidden" class="coralui-textbox" name="scdaid">                        <div class="app-inputdiv4" style="display: none">                            <label class="app-input-label" style="width:36%;">种植批次号:</label>                            <div class="app-inputdiv6" style="height:32px;display:none">                                <input id="ID${idSuffix}" class="coralui-textbox" name="ID"/>                                <input id="zzpch${idSuffix}" class="coralui-textbox" name="zzpch"                                       data-options="valueField:'ZZPCH',textField:'ZZPCH',required:true">                            </div>                        </div>                        <div class="app-inputdiv4">                            <label class="app-input-label" style="width:36%;">种植方案:</label>                            <input id="zzfa${idSuffix}" class="coralui-combobox" name="zzfa"                                   data-options="valueField:'ZZFABH',textField:'ZZFAMC',required:true">                        </div>                        <div class="app-inputdiv4">                            <label class="app-input-label" style="width:36%;">药材名称:</label>                            <input id="ycmc${idSuffix}" class="coralui-textbox" name="ycmc"                                   data-options="readonly:true">                        </div>                        <input id="ycdm${idSuffix}" name="ycdm" type="hidden" class="coralui-textbox">                        <div class="app-inputdiv4">                            <label class="app-input-label" style="width:36%;">种苗(种子):</label>                            <input id="zmzzmc${idSuffix}" class="coralui-textbox" name="zmzzmc"                                   data-options="readonly:true">                        </div>                        <div class="app-inputdiv4">                            <label class="app-input-label" style="width:36%;">种子来源:</label>                            <input id="zzly${idSuffix}" class="coralui-combobox" name="zzly">                        </div>                        <div class="app-inputdiv4">                            <label class="app-input-label" style="width:36%;">种子重量:</label>                            <ces:input id="zzzl${idSuffix}"  name="zzzl" validType="naturalnumber"></ces:input>                        </div>                        <input id="zmzzbh${idSuffix}" name="zmzzbh" type="hidden" class="coralui-textbox">                        <div class="app-inputdiv4">                            <label class="app-input-label" style="width:36%;">种植基地:</label>                            <input id="jdmc${idSuffix}" class="coralui-combobox" name="jdmc"                                   data-options="required:true,valueField:'JDBH',textField:'JDMC'">                        </div>                        <div class="app-inputdiv4">                            <label class="app-input-label" style="width:36%;">种植地块:</label>                            <input id="dkmc${idSuffix}" class="coralui-combobox" name="dkbh"                                   data-options="required:true,valueField:'DKBH',textField:'DKMC'">                        </div>                        <div class="app-inputdiv4">                            <label class="app-input-label" style="width:36%;">种植负责人:</label>                            <input id="zzfzr${idSuffix}" class="coralui-combobox" name="zzfzr"                                   data-options="required:true,valueField:'GZRYBH',textField:'XM'">                        </div>                        <div class="app-inputdiv4">                            <label class="app-input-label" style="width:36%;">地块面积:</label>                            <input id="dkmj${idSuffix}" name="dkmj" class="coralui-textbox"                                   data-options="required:true,buttons:[{innerRight:[{label:'亩'}]}]"/>                        </div>                        <div class="app-inputdiv4">                            <label class="app-input-label" style="width:36%;">种植时间:</label>                            <input id="zzsj${idSuffix}" class="coralui-datepicker" name="zzsj"                                   data-options="required:true">                        </div>                    </div>                </form>            </div>        </ces:layoutRegion>        <ces:layoutRegion region="center" split="true" style="height:295px;" cls="small-grid">            <%--<div><input type="button" onclick="test133()" value="收起"/></div>--%>            <div id="tabs${idSuffix}" class="coralui-tabs" data-options="heightStyle:'fill'" style="display: none;">                <ul>                    <li onclick="$('#scbzGrid${idSuffix}').grid('refresh')"><a href="#scbz${idSuffix}">播种方案</a></li>                    <li onclick="$('#scggGrid${idSuffix}').grid('refresh')"><a href="#scgg${idSuffix}">灌溉方案</a></li>                    <li onclick="$('#scsfGrid${idSuffix}').grid('refresh')"><a href="#scsf${idSuffix}">施肥方案</a></li>                    <li onclick="$('#scyyGrid${idSuffix}').grid('refresh')"><a href="#scyy${idSuffix}">用药方案</a></li>                    <li onclick="$('#scccGrid${idSuffix}').grid('refresh')"><a href="#sccc${idSuffix}">锄草</a></li>                    <li onclick="$('#sccsGrid${idSuffix}').grid('refresh')"><a href="#sccs${idSuffix}">采收</a></li>                    <li onclick="$('#scqtGrid${idSuffix}').grid('refresh')"><a href="#scqt${idSuffix}">其它</a></li>                        <%--<li><a href="#scjcjl${idSuffix}">检测记录</a></li>--%>                </ul>                <!-- 播种 -->                <div id="scbz${idSuffix}" name="tabBorderDiv" style="height: 450px !important">                    <ces:toolbar id="scbzToolbarId${idSuffix}" onClick="$.ns('namespaceId${idSuffix}').toolbarClick"                                 data="[{'label': '添加', 'id':'addScbz', 'disabled': 'false','type': 'button'} ,{'type': 'html','content':'<span>起始农事项时间:</span>'},{'type': 'textbox','id': 'qsnsxsjlabel','readonly': 'true'}]">                    </ces:toolbar>                    <div id="scbzGridDiv${idSuffix}" style="height: 200px;">                        <ces:grid id="scbzGrid${idSuffix}" height="auto" rownumbers="true" fitStyle="fill"                                  cellEdit="true"                                  onComplete="$.ns('namespaceId${idSuffix}').parseToolbar"                                  shrinkToFit="true">                            <ces:gridCols>                                <ces:gridCol name="ID" hidden="true"></ces:gridCol>                                <ces:gridCol name="CZSJ" hidden="true"></ces:gridCol>                                <ces:gridCol name="QSNSX" hidden="true"></ces:gridCol>                                <ces:gridCol name="NSZYXBH" formatter="text" formatoptions="required: true"                                             width="200">农事作业项编号</ces:gridCol>                                <ces:gridCol name="NSZYXMC" formatter="text" formatoptions="required: true"                                             width="220">农事作业项名称</ces:gridCol>                                <ces:gridCol name="ZPFS" formatter="combobox" formatoptions="required: true"                                             revertCode="true"                                             width="200">栽培方式</ces:gridCol>                                <ces:gridCol name="NSXJGSJ" formatter="text"                                             formatoptions="required: true,validType: 'integer'"                                             width="200">农事项间隔时间</ces:gridCol>                                <ces:gridCol name="CZFDSJ" formatter="text"                                             formatoptions="required: true,validType: 'naturalnumber'"                                             sorttype="naturalnumber" width="180">操作浮动时间</ces:gridCol>                                <ces:gridCol name="OP" fixed="true" width="155"                                             formatter="$.ns('namespaceId${idSuffix}').initGridOp"                                        >操作</ces:gridCol>                            </ces:gridCols>                        </ces:grid>                    </div>                    <ces:toolbar onClick="$.ns('namespaceId${idSuffix}').toolbarClick"                                 data="[{'label': '添加', 'id':'addScbzTrp', 'disabled': 'false','type': 'button'}]">                    </ces:toolbar>                    <div id="scbzTrpGridDiv${idSuffix}" style="height: 183px;">                        <ces:grid id="scbzTrpGrid${idSuffix}" height="auto" rownumbers="true" fitStyle="fill">                            <ces:gridCols>                                <ces:gridCol name="ID" hidden="true"></ces:gridCol>                                <ces:gridCol name="NSZYXBH" formatter="combobox" formatoptions="required: true"                                             revertCode="true"                                             width="80">农事作业项编号</ces:gridCol>                                <ces:gridCol name="TRPLX" formatter="combobox" width="80">投入品类型</ces:gridCol>                                <ces:gridCol name="TRPTYM" formatter="combobox" formatoptions="required: true"                                             width="80">投入品通用名</ces:gridCol>                                <ces:gridCol name="TRPMC" formatter="combobox" formatoptions="required: true"                                             width="80">投入品名称</ces:gridCol>                                <ces:gridCol name="YT" width="80">用途</ces:gridCol>                                <%--<ces:gridCol name="GG" width="80">规格</ces:gridCol>--%>                                <ces:gridCol name="YL" formatter="text"                                             formatoptions="required: true,pattern:'//^([1-9]+(\.[0-9]+[1-9])?)|([0]+(\.([0-9]+)?[1-9]))$//'"                                             width="80">用量（千克/每亩）</ces:gridCol>                                <ces:gridCol name="OP" fixed="true" width="100" formatter="toolbar"                                             formatoptions="onClick:$.ns('namespaceId${idSuffix}').gridClick,data:[{'label': '删除', 'id':'delDetailGridData', 'disabled': 'false','type': 'button'}]">操作</ces:gridCol>                            </ces:gridCols>                        </ces:grid>                    </div>                </div>                <!-- 灌溉 -->                <div id="scgg${idSuffix}" name="tabBorderDiv" style="height: 450px !important">                    <ces:toolbar onClick="$.ns('namespaceId${idSuffix}').toolbarClick"                                 data="[{'label': '添加', 'id':'addScgg', 'disabled': 'false','type': 'button'},{'type': 'html','content':'<span>起始农事项时间:</span>'},{'type': 'textbox','id': 'qsnsxsjlabel','readonly': 'true'}]">                    </ces:toolbar>                    <div id="scggGridDiv${idSuffix}" style="height: 183px;">                        <ces:grid id="scggGrid${idSuffix}" fitStyle="fill" height="auto" rownumbers="true"                                  onComplete="$.ns('namespaceId${idSuffix}').parseToolbar"                                  shrinkToFit="true">                            <ces:gridCols>                                <ces:gridCol name="ID" hidden="true"></ces:gridCol>                                <ces:gridCol name="CZSJ" hidden="true"></ces:gridCol>                                <ces:gridCol name="QSNSX" hidden="true"></ces:gridCol>                                <ces:gridCol name="NSZYXBH" formatter="text" formatoptions="required: true"                                             width="200">农事作业项编号</ces:gridCol>                                <ces:gridCol name="NSZYXMC" formatter="text" formatoptions="required: true"                                             width="220">农事作业项名称</ces:gridCol>                                <ces:gridCol name="GGFS" revertCode="true" sortable="true" width="120"                                             formatter="combobox" formatoptions="required: true">灌溉方式</ces:gridCol>                                <ces:gridCol name="SYLX" revertCode="true" width="120" formatter="combobox"                                             formatoptions="required: true">水源类型</ces:gridCol>                                <ces:gridCol name="SYDJ" revertCode="true" width="100" formatter="combobox"                                             formatoptions="required: true">水源等级</ces:gridCol>                                <ces:gridCol name="NSXJGSJ" formatter="text"                                             formatoptions="required: true,validType: 'integer'"                                             width="125">农事项间隔时间</ces:gridCol>                                <ces:gridCol name="CZFDSJ" formatter="text"                                             formatoptions="required: true,validType: 'naturalnumber'"                                             sorttype="naturalnumber" width="110">操作浮动时间</ces:gridCol>                                <ces:gridCol name="OP" fixed="true" width="155"                                             formatter="$.ns('namespaceId${idSuffix}').initGridOp"                                        >操作</ces:gridCol>                            </ces:gridCols>                        </ces:grid>                    </div>                    <ces:toolbar onClick="$.ns('namespaceId${idSuffix}').toolbarClick"                                 data="[{'label': '添加', 'id':'addScggTrp', 'disabled': 'false','type': 'button'}]">                    </ces:toolbar>                    <div id="scggTrpGridDiv${idSuffix}" style="height: 183px;">                        <ces:grid id="scggTrpGrid${idSuffix}" height="auto" rownumbers="true" fitStyle="fill">                            <ces:gridCols>                                <ces:gridCol name="ID" hidden="true"></ces:gridCol>                                <ces:gridCol name="NSZYXBH" formatter="combobox" formatoptions="required: true"                                             revertCode="true"                                             width="80">农事作业项编号</ces:gridCol>                                <ces:gridCol name="TRPLX" formatter="combobox" width="80">投入品类型</ces:gridCol>                                <ces:gridCol name="TRPTYM" formatter="combobox" formatoptions="required: true"                                             width="80">投入品通用名</ces:gridCol>                                <ces:gridCol name="TRPMC" formatter="combobox" formatoptions="required: true"                                             width="80">投入品名称</ces:gridCol>                                <ces:gridCol name="YT" width="80">用途</ces:gridCol>                                <%--<ces:gridCol name="GG" width="80">规格</ces:gridCol>--%>                                <ces:gridCol name="YL" formatter="text"                                             formatoptions="required: true,pattern:'//^([1-9]+(\.[0-9]+[1-9])?)|([0]+(\.([0-9]+)?[1-9]))$//'"                                             width="80">用量（千克/每亩）</ces:gridCol>                                <ces:gridCol name="OP" fixed="true" width="100" formatter="toolbar"                                             formatoptions="onClick:$.ns('namespaceId${idSuffix}').gridClick,data:[{'label': '删除', 'id':'delDetailGridData', 'disabled': 'false','type': 'button'}]">操作</ces:gridCol>                            </ces:gridCols>                        </ces:grid>                    </div>                </div>                <!-- 施肥 -->                <div id="scsf${idSuffix}" name="tabBorderDiv" style="height: 450px !important">                    <ces:toolbar onClick="$.ns('namespaceId${idSuffix}').toolbarClick"                                 data="[{'label': '添加', 'id':'addScsf', 'disabled': 'false','type': 'button'},{'type': 'html','content':'<span>起始农事项时间:</span>'},{'type': 'textbox','id': 'qsnsxsjlabel','readonly': 'true'}]">                    </ces:toolbar>                    <div id="scsfGridDiv${idSuffix}" style="height: 183px;">                        <ces:grid id="scsfGrid${idSuffix}" fitStyle="fill" height="auto" rownumbers="true"                                  onComplete="$.ns('namespaceId${idSuffix}').parseToolbar"                                  shrinkToFit="true">                            <ces:gridCols>                                <ces:gridCol name="ID" hidden="true"></ces:gridCol>                                <ces:gridCol name="CZSJ" hidden="true"></ces:gridCol>                                <ces:gridCol name="QSNSX" hidden="true"></ces:gridCol>                                <ces:gridCol name="NSZYXBH" formatter="text" formatoptions="required: true"                                             width="200">农事作业项编号</ces:gridCol>                                <ces:gridCol name="NSZYXMC" formatter="text" formatoptions="required: true"                                             width="220">农事作业项名称</ces:gridCol>                                <ces:gridCol name="SFSD" revertCode="true" sortable="true" width="200"                                             formatter="combobox" formatoptions="required: true">施肥时段</ces:gridCol>                                <ces:gridCol name="NSXJGSJ" formatter="text"                                             formatoptions="required: true,validType: 'integer'"                                             width="200">农事项间隔时间</ces:gridCol>                                <ces:gridCol name="CZFDSJ" formatter="text"                                             formatoptions="required: true,validType: 'naturalnumber'"                                             sorttype="naturalnumber" width="180">操作浮动时间</ces:gridCol>                                <ces:gridCol name="OP" fixed="true" width="155"                                             formatter="$.ns('namespaceId${idSuffix}').initGridOp"                                        >操作</ces:gridCol>                            </ces:gridCols>                        </ces:grid>                    </div>                    <ces:toolbar onClick="$.ns('namespaceId${idSuffix}').toolbarClick"                                 data="[{'label': '添加', 'id':'addScsfTrp', 'disabled': 'false','type': 'button'}]">                    </ces:toolbar>                    <div id="scsfTrpGridDiv${idSuffix}" style="height: 183px;">                        <ces:grid id="scsfTrpGrid${idSuffix}" height="auto" rownumbers="true" fitStyle="fill">                            <ces:gridCols>                                <ces:gridCol name="ID" hidden="true"></ces:gridCol>                                <ces:gridCol name="NSZYXBH" formatter="combobox" formatoptions="required: true"                                             revertCode="true"                                             width="80">农事作业项编号</ces:gridCol>                                <ces:gridCol name="TRPLX" formatter="combobox" width="80">投入品类型</ces:gridCol>                                <ces:gridCol name="TRPTYM" formatter="combobox" formatoptions="required: true"                                             width="80">投入品通用名</ces:gridCol>                                <ces:gridCol name="TRPMC" formatter="combobox" formatoptions="required: true"                                             width="80">投入品名称</ces:gridCol>                                <ces:gridCol name="YT" width="80">用途</ces:gridCol>                                <%--<ces:gridCol name="GG" width="80">规格</ces:gridCol>--%>                                <ces:gridCol name="YL" formatter="text"                                             formatoptions="required: true,pattern:'//^([1-9]+(\.[0-9]+[1-9])?)|([0]+(\.([0-9]+)?[1-9]))$//'"                                             width="80">用量（千克/每亩）</ces:gridCol>                                <ces:gridCol name="OP" fixed="true" width="100" formatter="toolbar"                                             formatoptions="onClick:$.ns('namespaceId${idSuffix}').gridClick,data:[{'label': '删除', 'id':'delDetailGridData', 'disabled': 'false','type': 'button'}]">操作</ces:gridCol>                            </ces:gridCols>                        </ces:grid>                    </div>                </div>                <!-- 用药 -->                <div id="scyy${idSuffix}" name="tabBorderDiv" style="height: 450px !important">                    <ces:toolbar onClick="$.ns('namespaceId${idSuffix}').toolbarClick"                                 data="[{'label': '添加', 'id':'addScyy', 'disabled': 'false','type': 'button'},{'type': 'html','content':'<span>起始农事项时间:</span>'},{'type': 'textbox','id': 'qsnsxsjlabel','readonly': 'true'}]">                    </ces:toolbar>                    <div id="scyyGridDiv${idSuffix}" style="height: 183px;">                        <ces:grid id="scyyGrid${idSuffix}" fitStyle="fill" height="auto" rownumbers="true"                                  onComplete="$.ns('namespaceId${idSuffix}').parseToolbar"                                  shrinkToFit="true">                            <ces:gridCols>                                <ces:gridCol name="ID" hidden="true"></ces:gridCol>                                <ces:gridCol name="CZSJ" hidden="true"></ces:gridCol>                                <ces:gridCol name="QSNSX" hidden="true"></ces:gridCol>                                <ces:gridCol name="NSZYXBH" formatter="text" formatoptions="required: true"                                             width="200">农事作业项编号</ces:gridCol>                                <ces:gridCol name="NSZYXMC" formatter="text" formatoptions="required: true"                                             width="220">农事作业项名称</ces:gridCol>                                <ces:gridCol name="YYSD" formatter="combobox" formatoptions="required: true"                                             revertCode="true" width="200">用药时段</ces:gridCol>                                <ces:gridCol name="NSXJGSJ" formatter="text"                                             formatoptions="required: true,validType: 'integer'"                                             width="200">农事项间隔时间</ces:gridCol>                                <ces:gridCol name="CZFDSJ" formatter="text"                                             formatoptions="required: true,validType: 'naturalnumber'"                                             sorttype="naturalnumber" width="180">操作浮动时间</ces:gridCol>                                <ces:gridCol name="OP" fixed="true" width="155"                                             formatter="$.ns('namespaceId${idSuffix}').initGridOp"                                        >操作</ces:gridCol>                            </ces:gridCols>                        </ces:grid>                    </div>                    <ces:toolbar onClick="$.ns('namespaceId${idSuffix}').toolbarClick"                                 data="[{'label': '添加', 'id':'addScyyTrp', 'disabled': 'false','type': 'button'}]">                    </ces:toolbar>                    <div id="scyyTrpGridDiv${idSuffix}" style="height: 183px;">                        <ces:grid id="scyyTrpGrid${idSuffix}" height="auto" rownumbers="true" fitStyle="fill">                            <ces:gridCols>                                <ces:gridCol name="ID" hidden="true"></ces:gridCol>                                <ces:gridCol name="NSZYXBH" formatter="combobox" formatoptions="required: true"                                             revertCode="true"                                             width="80">农事作业项编号</ces:gridCol>                                <ces:gridCol name="TRPLX" formatter="combobox" width="80">投入品类型</ces:gridCol>                                <ces:gridCol name="TRPTYM" formatter="combobox" formatoptions="required: true"                                             width="80">投入品通用名</ces:gridCol>                                <ces:gridCol name="TRPMC" formatter="combobox" formatoptions="required: true"                                             width="80">投入品名称</ces:gridCol>                                <ces:gridCol name="YT" width="80">用途</ces:gridCol>                                <%--<ces:gridCol name="GG" width="80">规格</ces:gridCol>--%>                                <ces:gridCol name="YL" formatter="text"                                             formatoptions="required: true,pattern:'//^([1-9]+(\.[0-9]+[1-9])?)|([0]+(\.([0-9]+)?[1-9]))$//'"                                             width="80">用量（千克/每亩）</ces:gridCol>                                <ces:gridCol name="OP" fixed="true" width="100" formatter="toolbar"                                             formatoptions="onClick:$.ns('namespaceId${idSuffix}').gridClick,data:[{'label': '删除', 'id':'delDetailGridData', 'disabled': 'false','type': 'button'}]">操作</ces:gridCol>                            </ces:gridCols>                        </ces:grid>                    </div>                </div>                <!-- 检测记录 -->                    <%--<div id="scjcjl${idSuffix}" name="tabBorderDiv" style="height: 450px !important">--%>                    <%--<div id="scjcjlGridDiv${idSuffix}" style="height: 400px;">--%>                    <%--<ces:grid id="scjcjlGrid${idSuffix}" fitStyle="fill" height="auto" rownumbers="true">--%>                    <%--<ces:gridCols>--%>                    <%--<ces:gridCol name="ID" hidden="true"></ces:gridCol>--%>                    <%--<ces:gridCol name="JCR" formatter="text" hidden="true"></ces:gridCol>--%>                    <%--<ces:gridCol name="CSLSH" formatter="text" formatoptions="readonly: true"--%>                    <%--width="100">采收流水号</ces:gridCol>--%>                    <%--<ces:gridCol name="JCXM" formatter="text" formatoptions="readonly: true"--%>                    <%--width="100">检测项目</ces:gridCol>--%>                    <%--<ces:gridCol name="JCFF" formatter="combobox" formatoptions=""--%>                    <%--revertCode="true" width="120">检测方法</ces:gridCol>--%>                    <%--<ces:gridCol name="CYFF" width="100" formatter="text"--%>                    <%--formatoptions="">采样方法</ces:gridCol>--%>                    <%--<ces:gridCol name="JCDW" width="100" formatter="text"--%>                    <%--formatoptions="">检测单位</ces:gridCol>--%>                    <%--&lt;%&ndash;<ces:gridCol name="JCDD" width="80" formatter="text"&ndash;%&gt;--%>                    <%--&lt;%&ndash;formatoptions="required: true">检测地点</ces:gridCol>&ndash;%&gt;--%>                    <%--<ces:gridCol name="JCSJ" formatter="datepicker"--%>                    <%--formatoptions=""--%>                    <%--width="80">检测时间</ces:gridCol>--%>                    <%--<ces:gridCol name="JCRBH" formatter="combobox" formatoptions=""--%>                    <%--revertCode="true" width="100">检测人</ces:gridCol>--%>                    <%--<ces:gridCol name="JCJG" width="80" formatter="text"--%>                    <%--formatoptions="">检测结果</ces:gridCol>--%>                    <%--<ces:gridCol name="OP" fixed="true" width="190" formatter="toolbar"--%>                    <%--formatoptions="isOverflow:false,onClick:$.ns('namespaceId${idSuffix}').gridClick,data:[{'label': '上传图片', 'id':'uploadImg', 'disabled': 'false','type': 'button'},{'label': '查看图片', 'id':'showImg', 'disabled': 'false','type': 'button'}]">操作</ces:gridCol>--%>                    <%--</ces:gridCols>--%>                    <%--</ces:grid>--%>                    <%--</div>--%>                    <%--</div>--%>                <!-- 采收 -->                <div id="sccs${idSuffix}" name="tabBorderDiv" style="height: 450px !important">                    <ces:toolbar onClick="$.ns('namespaceId${idSuffix}').toolbarClick"                                 data="[{'label': '添加', 'id':'addSccs', 'disabled': 'false','type': 'button'},{'type': 'html','content':'<span>起始农事项时间:</span>'},{'type': 'textbox','id': 'qsnsxsjlabel','readonly': 'true'}]">                    </ces:toolbar>                    <div id="sccsGridDiv${idSuffix}" style="height: 183px;">                        <ces:grid id="sccsGrid${idSuffix}" fitStyle="fill" height="auto" rownumbers="true"                                  onComplete="$.ns('namespaceId${idSuffix}').parseToolbar"                                  shrinkToFit="true">                            <ces:gridCols>                                <ces:gridCol name="ID" hidden="true"></ces:gridCol>                                <ces:gridCol name="CZSJ" hidden="true"></ces:gridCol>                                <ces:gridCol name="QSNSX" hidden="true"></ces:gridCol>                                <ces:gridCol name="NSZYXBH" formatter="text" formatoptions="required: true"                                             width="200">农事作业项编号</ces:gridCol>                                <ces:gridCol name="NSZYXMC" formatter="text" formatoptions="required: true"                                             width="220">农事作业项名称</ces:gridCol>                                <ces:gridCol name="CSFS" formatter="combobox" formatoptions="required: true"                                             revertCode="true" width="200">采收方式</ces:gridCol>                                <ces:gridCol name="NSXJGSJ" formatter="text"                                             formatoptions="required: true,validType: 'integer'"                                             width="200">农事项间隔时间</ces:gridCol>                                <ces:gridCol name="CZFDSJ" formatter="text"                                             formatoptions="required: true,validType: 'naturalnumber'"                                             sorttype="naturalnumber" width="180">操作浮动时间</ces:gridCol>                                <ces:gridCol name="OP" fixed="true" width="155"                                             formatter="$.ns('namespaceId${idSuffix}').initGridOp"                                        >操作</ces:gridCol>                            </ces:gridCols>                        </ces:grid>                    </div>                    <ces:toolbar onClick="$.ns('namespaceId${idSuffix}').toolbarClick"                                 data="[{'label': '添加', 'id':'addSccsTrp', 'disabled': 'false','type': 'button'}]">                    </ces:toolbar>                    <div id="sccsTrpGridDiv${idSuffix}" style="height: 183px;">                        <ces:grid id="sccsTrpGrid${idSuffix}" height="auto" rownumbers="true" fitStyle="fill">                            <ces:gridCols>                                <ces:gridCol name="ID" hidden="true"></ces:gridCol>                                <ces:gridCol name="NSZYXBH" formatter="combobox" formatoptions="required: true"                                             revertCode="true"                                             width="80">农事作业项编号</ces:gridCol>                                <ces:gridCol name="TRPLX" formatter="combobox" width="80">投入品类型</ces:gridCol>                                <ces:gridCol name="TRPTYM" formatter="combobox" formatoptions="required: true"                                             width="80">投入品通用名</ces:gridCol>                                <ces:gridCol name="TRPMC" formatter="combobox" formatoptions="required: true"                                             width="80">投入品名称</ces:gridCol>                                <ces:gridCol name="YT" width="80">用途</ces:gridCol>                                <%--<ces:gridCol name="GG" width="80">规格</ces:gridCol>--%>                                <ces:gridCol name="YL" formatter="text"                                             formatoptions="required: true,pattern:'//^([1-9]+(\.[0-9]+[1-9])?)|([0]+(\.([0-9]+)?[1-9]))$//'"                                             width="80">用量（千克/每亩）</ces:gridCol>                                <ces:gridCol name="OP" fixed="true" width="100" formatter="toolbar"                                             formatoptions="onClick:$.ns('namespaceId${idSuffix}').gridClick,data:[{'label': '删除', 'id':'delDetailGridData', 'disabled': 'false','type': 'button'}]">操作</ces:gridCol>                            </ces:gridCols>                        </ces:grid>                    </div>                </div>                <!-- 锄草 -->                <div id="sccc${idSuffix}" name="tabBorderDiv" style="height: 450px !important">                    <ces:toolbar onClick="$.ns('namespaceId${idSuffix}').toolbarClick"                                 data="[{'label': '添加', 'id':'addSccc', 'disabled': 'false','type': 'button'},{'type': 'html','content':'<span>起始农事项时间:</span>'},{'type': 'textbox','id': 'qsnsxsjlabel','readonly': 'true'}]">                    </ces:toolbar>                    <div id="scccGridDiv${idSuffix}" style="height: 183px;">                        <ces:grid id="scccGrid${idSuffix}" fitStyle="fill" height="auto" rownumbers="true"                                  onComplete="$.ns('namespaceId${idSuffix}').parseToolbar"                                  shrinkToFit="true">                            <ces:gridCols>                                <ces:gridCol name="ID" hidden="true"></ces:gridCol>                                <ces:gridCol name="CZSJ" hidden="true"></ces:gridCol>                                <ces:gridCol name="QSNSX" hidden="true"></ces:gridCol>                                <ces:gridCol name="NSZYXBH" formatter="text" formatoptions="required: true"                                             width="200">农事作业项编号</ces:gridCol>                                <ces:gridCol name="NSZYXMC" formatter="text" formatoptions="required: true"                                             width="220">农事作业项名称</ces:gridCol>                                <ces:gridCol name="CCFS" formatter="combobox" formatoptions="required: true"                                             revertCode="true" width="200">锄草方式</ces:gridCol>                                <ces:gridCol name="NSXJGSJ" formatter="text"                                             formatoptions="required: true,validType: 'integer'"                                             width="200">农事项间隔时间</ces:gridCol>                                <ces:gridCol name="CZFDSJ" formatter="text"                                             formatoptions="required: true,validType: 'naturalnumber'"                                             sorttype="naturalnumber" width="180">操作浮动时间</ces:gridCol>                                <ces:gridCol name="OP" fixed="true" width="155"                                             formatter="$.ns('namespaceId${idSuffix}').initGridOp"                                        >操作</ces:gridCol>                            </ces:gridCols>                        </ces:grid>                    </div>                    <ces:toolbar onClick="$.ns('namespaceId${idSuffix}').toolbarClick"                                 data="[{'label': '添加', 'id':'addScccTrp', 'disabled': 'false','type': 'button'}]">                    </ces:toolbar>                    <div id="scccTrpGridDiv${idSuffix}" style="height: 183px;">                        <ces:grid id="scccTrpGrid${idSuffix}" height="auto" rownumbers="true" fitStyle="fill">                            <ces:gridCols>                                <ces:gridCol name="ID" hidden="true"></ces:gridCol>                                <ces:gridCol name="NSZYXBH" formatter="combobox" formatoptions="required: true"                                             revertCode="true"                                             width="80">农事作业项编号</ces:gridCol>                                <ces:gridCol name="TRPLX" formatter="combobox" width="80">投入品类型</ces:gridCol>                                <ces:gridCol name="TRPTYM" formatter="combobox" formatoptions="required: true"                                             width="80">投入品通用名</ces:gridCol>                                <ces:gridCol name="TRPMC" formatter="combobox" formatoptions="required: true"                                             width="80">投入品名称</ces:gridCol>                                <ces:gridCol name="YT" width="80">用途</ces:gridCol>                                <%--<ces:gridCol name="GG" width="80">规格</ces:gridCol>--%>                                <ces:gridCol name="YL" formatter="text"                                             formatoptions="required: true,pattern:'//^([1-9]+(\.[0-9]+[1-9])?)|([0]+(\.([0-9]+)?[1-9]))$//'"                                             width="80">用量（千克/每亩）</ces:gridCol>                                <ces:gridCol name="OP" fixed="true" width="100" formatter="toolbar"                                             formatoptions="onClick:$.ns('namespaceId${idSuffix}').gridClick,data:[{'label': '删除', 'id':'delDetailGridData', 'disabled': 'false','type': 'button'}]">操作</ces:gridCol>                            </ces:gridCols>                        </ces:grid>                    </div>                </div>                <!-- 其它 -->                <div id="scqt${idSuffix}" name="tabBorderDiv" style="height: 450px !important">                    <ces:toolbar onClick="$.ns('namespaceId${idSuffix}').toolbarClick"                                 data="[{'label': '添加', 'id':'addScqt', 'disabled': 'false','type': 'button'},{'type': 'html','content':'<span>起始农事项时间:</span>'},{'type': 'textbox','id': 'qsnsxsjlabel','readonly': 'true'}]">                    </ces:toolbar>                    <div id="scqtGridDiv${idSuffix}" style="height: 183px;">                        <ces:grid id="scqtGrid${idSuffix}" fitStyle="fill" height="auto" rownumbers="true"                                  onComplete="$.ns('namespaceId${idSuffix}').parseToolbar"                                  shrinkToFit="true">                            <ces:gridCols>                                <ces:gridCol name="ID" hidden="true"></ces:gridCol>                                <ces:gridCol name="CZSJ" hidden="true"></ces:gridCol>                                <ces:gridCol name="QSNSX" hidden="true"></ces:gridCol>                                <ces:gridCol name="NSZYXBH" formatter="text" formatoptions="required: true"                                             width="244">农事作业项编号</ces:gridCol>                                <ces:gridCol name="NSZYXMC" formatter="text" formatoptions="required: true"                                             width="264">农事作业项名称</ces:gridCol>                                <ces:gridCol name="NSXJGSJ" formatter="text"                                             formatoptions="required: true,validType: 'integer'"                                             width="244">农事项间隔时间</ces:gridCol>                                <ces:gridCol name="CZFDSJ" formatter="text"                                             formatoptions="required: true,validType: 'naturalnumber'"                                             sorttype="naturalnumber" width="244">操作浮动时间</ces:gridCol>                                <ces:gridCol name="OP" fixed="true" width="155"                                             formatter="$.ns('namespaceId${idSuffix}').initGridOp"                                        >操作</ces:gridCol>                            </ces:gridCols>                        </ces:grid>                    </div>                    <ces:toolbar onClick="$.ns('namespaceId${idSuffix}').toolbarClick"                                 data="[{'label': '添加', 'id':'addScqtTrp', 'disabled': 'false','type': 'button'}]">                    </ces:toolbar>                    <div id="scqtTrpGridDiv${idSuffix}" style="height: 183px;">                        <ces:grid id="scqtTrpGrid${idSuffix}" height="auto" rownumbers="true" fitStyle="fill">                            <ces:gridCols>                                <ces:gridCol name="ID" hidden="true"></ces:gridCol>                                <ces:gridCol name="NSZYXBH" formatter="combobox" formatoptions="required: true"                                             revertCode="true"                                             width="80">农事作业项编号</ces:gridCol>                                <ces:gridCol name="TRPLX" formatter="combobox" width="80">投入品类型</ces:gridCol>                                <ces:gridCol name="TRPTYM" formatter="combobox" formatoptions="required: true"                                             width="80">投入品通用名</ces:gridCol>                                <ces:gridCol name="TRPMC" formatter="combobox" formatoptions="required: true"                                             width="80">投入品名称</ces:gridCol>                                <ces:gridCol name="YT" width="80">用途</ces:gridCol>                                <%--<ces:gridCol name="GG" width="80">规格</ces:gridCol>--%>                                <ces:gridCol name="YL" formatter="text"                                             formatoptions="required: true,pattern:'//^([1-9]+(\.[0-9]+[1-9])?)|([0]+(\.([0-9]+)?[1-9]))$//'"                                             width="80">用量（千克/每亩）</ces:gridCol>                                <ces:gridCol name="OP" fixed="true" width="100" formatter="toolbar"                                             formatoptions="onClick:$.ns('namespaceId${idSuffix}').gridClick,data:[{'label': '删除', 'id':'delDetailGridData', 'disabled': 'false','type': 'button'}]">操作</ces:gridCol>                            </ces:gridCols>                        </ces:grid>                    </div>                </div>            </div>        </ces:layoutRegion>    </ces:layout></div><script>    var _uploadId = "";    function test133() {        $("#enterFormDiv${idSuffix}").animate({height: 'toggle', opacity: 'toggle'}, "slow");    }    var gridOptions = [];    $.extend($.ns("namespaceId${idSuffix}"), {        fapzs: null,        qyxxs: null,        dkxxs: null,        zzdyxxs: null,        initGridOp: function (cellvalue, options, rawObject) {            options;            if (rawObject.QSNSX == "1") {                return "<div class=\"coralui-toolbar\" gridId=\"" + options.gid + "\" rowId=\"" + options.rowId + "\" data-options=\"onClick:$.ns('namespaceId${idSuffix}').gridClick,data:[{'label': '设置起始时间', 'id':'setFirst', 'disabled': 'false','type': 'button'}]\"></div>";            } else if (rawObject.QSNSX == "0") {                if (rawObject.CZSJ == "" || rawObject.CZSJ == null) {                    return "<div class=\"coralui-toolbar\" gridId=\"" + options.gid + "\" rowId=\"" + options.rowId + "\" data-options=\"onClick:$.ns('namespaceId${idSuffix}').gridClick,data:[{'label': '删除', 'id':'delGridData', 'disabled': 'false','type': 'button'}]\"></div>";                } else {                    return "<div class=\"coralui-toolbar\" gridId=\"" + options.gid + "\" rowId=\"" + options.rowId + "\" data-options=\"onClick:$.ns('namespaceId${idSuffix}').gridClick,data:[]\"></div>";                }            }        },        parseToolbar: function (e, data) {            $.parser.parse(e.target);        },        initform: function (id) {//初始化表单信息            //种植时间            <%--$("#zzsj${idSuffix}").datepicker("setDate", new Date());--%>            //区域信息            $("#ssqybh${idSuffix}").combobox("option", "onChange", function (e, ui) {                var qybh = ui.value;                for (var i in $.ns("namespaceId${idSuffix}").qyxxs) {                    var qyxx = $.ns("namespaceId${idSuffix}").qyxxs[i];                    if (qyxx.QYBH == qybh) {                        $("#qygly${idSuffix}").textbox("setValue", qyxx.FZR);                        $("#qyglybh${idSuffix}").val(qyxx.FZRBH);                        break;                    }                }                var dks = $.loadJson($.contextPath + "/sczzscda!getDkxxByQybh.json?qybh=" + qybh);                $.ns("namespaceId${idSuffix}").dkxxs = dks;                $("#dk${idSuffix}").combobox("reload", dks);                //清空地块信息和种植单元信息                $("#dk${idSuffix}").combobox("setValue", "");                $("#zzdy${idSuffix}").combobox("setValue", "");                $.ns("namespaceId${idSuffix}").zzdyxxs = null;            });            //地块信息            //onChange事件            $("#dkmc${idSuffix}").combobox("option", "onChange", function (e, data) {                $("#dkmc${idSuffix}").combobox("setValue", data.value);                var dkObj = $.loadJson($.contextPath + "/sczzscda!getFzrJD.json?dkbh=" + data.value)                //$('#jdmc${idSuffix}').combobox('setValue', dkObj.JDBH);                $('#zzfzr${idSuffix}').combobox('setValue', dkObj.DKFZRBH);                $('#dkmj${idSuffix}').textbox('setValue',dkObj.MJ);            });            $("#jdmc${idSuffix}").combobox("option", "onChange", function (e, data) {                $("#jdmc${idSuffix}").combobox("setValue", data.value);                var dkObj = $.loadJson($.contextPath + "/sczzscda!getJddk.json?jdbh=" + data.value);                $('#dkmc${idSuffix}').combobox('setValue', dkObj.DKBH);                $('#zzfzr${idSuffix}').combobox('setValue', dkObj.DKFZRBH);            });            $("#dk${idSuffix}").combobox("option", "onChange", function (e, ui) {                var dkbh = ui.value;                var zzdys = $.loadJson($.contextPath + "/sczzscda!getZzdyBydk.json?dkbh=" + dkbh);                $.ns("namespaceId${idSuffix}").zzdyxxs = zzdys;                $("#zzdy${idSuffix}").combobox("reload", zzdys);                for (var i in $.ns("namespaceId${idSuffix}").dkxxs) {                    var dkxx = $.ns("namespaceId${idSuffix}").dkxxs[i];                    if (dkxx.DKBH == dkbh) {                        $("#dkmj${idSuffix}").textbox("setValue", dkxx.MJ);                        break;                    }                }                //清空种植单元信息                $("#zzdy${idSuffix}").combobox("setValue", "");            });            //种植单元信息            $("#zzdy${idSuffix}").combobox("option", "onChange", function (e, ui) {                $.ns("namespaceId${idSuffix}").zzdyxxs = $.loadJson($.contextPath + "/sczzscda!getZzdyBydk.json?dkbh=" + $("#dk${idSuffix}").combobox("getValue"));                for (var i in $.ns("namespaceId${idSuffix}").zzdyxxs) {                    var zzdyxx = $.ns("namespaceId${idSuffix}").zzdyxxs[i];                    if (zzdyxx.ZZDYBH == ui.value) {                        $("#zzdymj${idSuffix}").textbox("setValue", zzdyxx.ZZDYMJ);                        $("#zzdygly${idSuffix}").textbox("setValue", zzdyxx.GLY);                        $("#zzdyglybh${idSuffix}").val(zzdyxx.GLYBH);                        break;                    }                }            });            var qys = $.loadJson($.contextPath + "/sczzscda!getQybhList.json");            $.ns("namespaceId${idSuffix}").qyxxs = qys;            $("#ssqybh${idSuffix}").combobox("reload", qys);            //生产档案            var scdaBool = $.loadJson($.contextPath + "/sczzscda!canUpdateScda.json?id=" + id);            if (scdaBool.result == "ERROR") {                $("#enterForm${idSuffix}").form("setReadOnly", true);            }            //播种方案栽培方式            var zpfs = $.loadJson($.contextPath + "/trace!getDataDictionary.json?lxbm=ZZZPFS");            $("#scbzGrid${idSuffix}").grid("setColProp", "ZPFS", {"formatoptions": {required: true, "data": zpfs}});            //灌溉方案灌溉方式            var ggfs = $.loadJson($.contextPath + "/trace!getDataDictionary.json?lxbm=GGFS");            $("#scggGrid${idSuffix}").grid("setColProp", "GGFS", {"formatoptions": {required: true, "data": ggfs}});            //灌溉方案水源类型            var sylx = $.loadJson($.contextPath + "/trace!getDataDictionary.json?lxbm=SYLX");            $("#scggGrid${idSuffix}").grid("setColProp", "SYLX", {"formatoptions": {required: true, "data": sylx}});            //灌溉方案水源等级            var sydj = $.loadJson($.contextPath + "/trace!getDataDictionary.json?lxbm=SYDJ");            $("#scggGrid${idSuffix}").grid("setColProp", "SYDJ", {"formatoptions": {required: true, "data": sydj}});            //施肥方案施肥时段            var sfsd = $.loadJson($.contextPath + "/trace!getDataDictionary.json?lxbm=ZZSFSD");            $("#scsfGrid${idSuffix}").grid("setColProp", "SFSD", {"formatoptions": {required: true, "data": sfsd}});            //用药时段            var yysd = $.loadJson($.contextPath + "/trace!getDataDictionary.json?lxbm=ZZYYSD");            $("#scyyGrid${idSuffix}").grid("setColProp", "YYSD", {"formatoptions": {required: true, "data": yysd}});            //检测检测方法            var jcff = $.loadJson($.contextPath + "/trace!getDataDictionary.json?lxbm=ZZJCFF");            $("#scjcjlGrid${idSuffix}").grid("setColProp", "JCFF", {"formatoptions": {"data": jcff}});            //采收方式            var csfs = $.loadJson($.contextPath + "/trace!getDataDictionary.json?lxbm=ZZSCCSFS");            $("#sccsGrid${idSuffix}").grid("setColProp", "CSFS", {"formatoptions": {required: true, "data": csfs}});            //锄草方式            var ccfs = $.loadJson($.contextPath + "/trace!getDataDictionary.json?lxbm=ZZSCCCFS");            $("#scccGrid${idSuffix}").grid("setColProp", "CCFS", {"formatoptions": {required: true, "data": ccfs}});            //负责人            var fzr = $.loadJson($.contextPath + "/sczzscda!getFzr.json");            $("#scjcjlGrid${idSuffix}").grid("setColProp", "JCRBH", {                "formatoptions": {                    "data": fzr, onChange: function (e, data) {                        var $fzrTextbox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "JCR");                        $fzrTextbox.textbox("setValue", data.text);                    }                }            });            //农事项编号            var $nsxbhGrids = $("#scbzGrid${idSuffix},#scggGrid${idSuffix},#scsfGrid${idSuffix},#scyyGrid${idSuffix},#scjcGrid${idSuffix},#sccsGrid${idSuffix},#scccGrid${idSuffix},#scqtGrid${idSuffix}");            $nsxbhGrids.grid("setColProp", "NSZYXBH", {                "formatoptions": {                    onChange: function (e, data) {                        var gridDatas = $("#" + e.data.gridId).grid("getRowData");                        var i = 0;                        var oldNszyxbh = $.ns("namespaceId${idSuffix}").oldNszyxbh;                        $.each(gridDatas, function (e1, data1) {                            if (data1.NSZYXBH == data.value) {                                i++;                            }                        });                        if (i > 1) {                            $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "NSZYXBH").textbox("setValue", oldNszyxbh);                            CFG_message("农事作业项编号重复！", "error");                            return false;                        }                        var $dGrid = $.ns('namespaceId${idSuffix}').getDetailGrid(e.data.gridId);                        $.each($dGrid.grid("getDataIDs"), function (e1, data1) {                            var dNszyxbh = $("#" + e.data.gridId).grid("getCellComponent", data1, "NSZYXBH");                            if (dNszyxbh.combobox("getValue") == oldNszyxbh) {                                dNszyxbh.combobox("setValue", data.value);                            }                        });                        $.ns("namespaceId${idSuffix}").oldNszyxbhObj = "";                        $.ns("namespaceId${idSuffix}").updateDGridBh(e.data.gridId);                    }, onClick: function (e, data) {                        if ($.ns("namespaceId${idSuffix}").oldNszyxbhObj == e.data.rowId) {                            return false;                        }                        $.ns("namespaceId${idSuffix}").oldNszyxbhObj = e.data.rowId;                        $.ns("namespaceId${idSuffix}").oldNszyxbh = $(this).textbox("getValue");                    }                }            });            //投入品类型、通用名、名称            var allTrplx = $.loadJson($.contextPath + "/sczzscda!getDataDictionary.json?lxbm=ZZTRPLX");            var allTrptym = null;// $.loadJson($.contextPath + "/sczzscda!getAllTrptym.json");            var allTrpmc = null;//$.loadJson($.contextPath + "/sczzscda!getAllTrpxx.json");            var $detailGrids = $("#scbzTrpGrid${idSuffix},#scggTrpGrid${idSuffix},#scsfTrpGrid${idSuffix},#scyyTrpGrid${idSuffix},#scjcTrpGrid${idSuffix},#sccsTrpGrid${idSuffix},#scccTrpGrid${idSuffix},#scqtTrpGrid${idSuffix}");            $detailGrids.grid("setColProp", "TRPLX", {                "formatoptions": {                    valueField: 'VALUE',                    textField: 'TEXT',                    required: true,                    enableFilter: true,                    "data": allTrplx, onChange: function (e, data) {                        var $trptymCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPTYM");                        var $trpmcCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPMC");                        var trptym = $.loadJson($.contextPath + "/sczzscda!getTrptymByLx.json?lx=" + data.value);                        $trptymCombobox.combobox("reload", trptym);                        $trptymCombobox.combobox("setValue", "");                        $trpmcCombobox.combobox("setValue", "");                    }                }            });            $detailGrids.grid("setColProp", "TRPTYM", {                "formatoptions": {                    valueField: 'VALUE',                    textField: 'TEXT',                    required: true,                    enableFilter: true,//                    "data": allTrptym,                    onChange: function (e, data) {                        var $trpmcCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPMC");                        var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                        var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + rowData.TRPLX + "&tym=" + rowData.TRPTYM);                        $trpmcCombobox.combobox("reload", trpmc);                        $trpmcCombobox.combobox("setValue", "");                    }                }            });            $detailGrids.grid("setColProp", "TRPMC", {                "formatoptions": {                    valueField: 'VALUE',                    textField: 'TEXT',                    required: true,//                    "data": allTrpmc,                    enableFilter: true,                    onChange: function (e, data) {                        for (var i in allTrpmc) {                            if (allTrpmc[i].TRPBH == data.value) {                                $("#" + e.data.gridId).grid("setRowData", e.data.rowId, {                                    yt: allTrpmc[i].YT,                                    gg: allTrpmc[i].BZGG,                                });                                var $yltextbox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "YL");                                $yltextbox.textbox("setValue", allTrpmc[i].TJYL);                                break;                            }                        }                    }                }            });            //种植方案信息            this.fapzs = $.loadJson($.contextPath + "/sczzscda!getZzfapzxx.json");//            this.fapzs = $.loadJson($.contextPath + "/sczzscda!getFapzCombobox.json");            $("#zzfa${idSuffix}").combobox("reload", this.fapzs.fapzs);            //方案变化的同时，初始化列表的信息            $("#zzfa${idSuffix}").combobox("option", "onChange", function (e, ui) {                var zmzzObj = $.loadJson($.contextPath + "/sczzscda!getZzzm.json?zzfabh=" + ui.value);//                var ycmcObj = $.loadJson($.contextPath + "/sczzscda!getYcmc.json?ycmc="+zmzzObj.YCMC);                $("#zmzzmc${idSuffix}").textbox("setValue", zmzzObj.ZZZMMC);                $("#zmzzbh${idSuffix}").textbox("setValue", zmzzObj.ZZZZBH);                $("#ycmc${idSuffix}").textbox("setValue", zmzzObj.YCMC);                $("#ycdm${idSuffix}").textbox("setValue", zmzzObj.YCDM);                $("#tabs${idSuffix}").show();                //清空所有列表的数据，刷新列表                var $allGrids = $("#scbzGrid${idSuffix},#scbzTrpGrid${idSuffix},#scggGrid${idSuffix},#scggTrpGrid${idSuffix},#scsfGrid${idSuffix},#scsfTrpGrid${idSuffix},#scyyGrid${idSuffix},#scyyTrpGrid${idSuffix},#sccsGrid${idSuffix},#sccsTrpGrid${idSuffix},#scccGrid${idSuffix},#scccTrpGrid${idSuffix},#scqtGrid${idSuffix},#scqtTrpGrid${idSuffix}");                $allGrids.grid("clearGridData");                $allGrids.grid("refresh");                $.ns("namespaceId${idSuffix}").initData(ui.value);            });            /*************************************修改时加载数据 begin*************************************/            var updateData = $.loadJson($.contextPath + "/sczzscda!getScdaxxById.json?rowId=" + id);            var gzryData = $.loadJson($.contextPath + "/sczzscda!getZzfzrxxByZzfzr.json?zzfzr="+updateData.scda.ZZFZR);//根据种植负责人查找工作人员编号            /*****************加载生产档案数据 begin**************************/            $("#scdaid${idSuffix}").textbox("setValue", id);            $("#zzpch${idSuffix}").textbox("setValue", updateData.scda.ZZPCH);            $("#dkmc${idSuffix}").combobox("setValue", updateData.scda.DKBH);            $("#jdmc${idSuffix}").combobox("setValue", updateData.scda.JDBH);            $("#zzfzr${idSuffix}").combobox("setValue", gzryData[0].GZRYBH);            $("#zzfa${idSuffix}").combobox("setValue", updateData.scda.ZZFA);            $("#ycmc${idSuffix}").textbox("setValue", updateData.scda.YCMC);            $("#ycdm${idSuffix}").textbox("setValue", updateData.scda.YCDM);            $("#zmzzmc${idSuffix}").textbox("setValue", updateData.scda.ZMZZMC);            $("#zmzzbh${idSuffix}").textbox("setValue", updateData.scda.ZMZZBH);            $("#zzly${idSuffix}").combobox("setValue", updateData.scda.ZZLY);            $("#zzzl${idSuffix}").textbox("setValue", updateData.scda.ZZZL);            $("#zzsj${idSuffix}").datepicker("setValue", updateData.scda.ZZSJ);            $("#zzjssj${idSuffix}").datepicker("setValue", updateData.scda.ZZJSSJ);            $("#trzb${idSuffix}").textbox("setValue", updateData.scda.TRZB);            $("#dkmj${idSuffix}").textbox("setValue",updateData.scda.DKMJ);            <%--$("#qyglybh${idSuffix}").val( updateData.scda.QYGLYBH);--%>            <%--$("#zzdyglybh${idSuffix}").val( updateData.scda.ZZDYGLYBH);--%>            <%--$("#zzsj${idSuffix}").datepicker("option", "readonly", "true");--%>            $("#zzjssj${idSuffix}").datepicker("option", "readonly", "true");            $("#tabs${idSuffix}").show();            //清空所有列表的数据，刷新列表            var $allGrids = $("#scbzGrid${idSuffix},#scbzTrpGrid${idSuffix},#scggGrid${idSuffix},#scggTrpGrid${idSuffix},#scsfGrid${idSuffix},#scsfTrpGrid${idSuffix},#scyyGrid${idSuffix},#scyyTrpGrid${idSuffix},#sccsTrpGrid${idSuffix},#scccTrpGrid${idSuffix},#scqtTrpGrid${idSuffix}");            $allGrids.grid("clearGridData");            $allGrids.grid("refresh");            /*****************加载生产播种 begin**************************/            $.each(updateData.scbz, function (e, data) {                $("#scbzGrid${idSuffix}").grid("addRowData", data.ID, data);                if (data.QSNSX == 1) {                    $("#scbzGrid${idSuffix}").grid("setRowData", data.ID, null, {background: '#68C561'});                    $("#scbzGrid${idSuffix}").grid("getCellComponent", data.ID, "NSXJGSJ").textbox({readonly: true});                    var gridIds = ["scbzGrid${idSuffix}", "scggGrid${idSuffix}", "scsfGrid${idSuffix}", "scyyGrid${idSuffix}", "scccGrid${idSuffix}", "sccsGrid${idSuffix}", "scqtGrid${idSuffix}"];                    $.each(gridIds, function (e, data) {                        $.ns('namespaceId${idSuffix}').getToolBarQsnsxsjComponent(data).textbox("setValue", updateData.qsnsxsj);                    });                }                if (data.CZSJ != null) {                    $.ns('namespaceId${idSuffix}').serGridReadOnly("#scbzGrid${idSuffix}", data.ID);                }            });            $.each(updateData.scbztrp, function (e, data) {                $("#scbzTrpGrid${idSuffix}").grid("addRowData", data.ID, data);                var nszyxbhCombobox = $("#scbzTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "NSZYXBH");                var trptymCombobox = $("#scbzTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "TRPTYM");                var trpmcCombobox = $("#scbzTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "TRPMC");                var yt = $("#scbzTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "YT");                var trptym = $.loadJson($.contextPath + "/sczzscda!getTrptymByLx.json?lx=" + data.TRPLX);//                var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + data.TRPLX+"&tym="+data.TRPTYM);                nszyxbhCombobox.combobox("reload", [{text: data.NSZYXBH, value: data.NSZYXBH}]);                nszyxbhCombobox.combobox("setValue", data.NSZYXBH);                trptymCombobox.combobox("reload", trptym);                trptymCombobox.combobox("setValue", data.TRPTYM);                trpmcCombobox.combobox("reload", trptym);                trpmcCombobox.combobox("setValue", data.TRPTYM);                yt.textbox("setValue", data.YT);                trptymCombobox.combobox("option", "onChange", function (e, data) {                    var $trpmcCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPMC");                    var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                    var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + rowData.TRPLX + "&tym=" + rowData.TRPTYM);                    $trpmcCombobox.combobox("reload", trpmc);                    $trpmcCombobox.combobox("setValue", "");                });            });            $.ns('namespaceId${idSuffix}').updateDGridBh("scbzGrid${idSuffix}");            /*****************加载生产灌溉 begin**************************/            $.each(updateData.scgg, function (e, data) {                $("#scggGrid${idSuffix}").grid("addRowData", data.ID, data);                if (data.QSNSX == 1) {                    $("#scggGrid${idSuffix}").grid("setRowData", data.ID, null, {background: '#68C561'});                    $("#scggGrid${idSuffix}").grid("getCellComponent", data.ID, "NSXJGSJ").textbox({readonly: true});                    var gridIds = ["scbzGrid${idSuffix}", "scggGrid${idSuffix}", "scsfGrid${idSuffix}", "scyyGrid${idSuffix}", "scccGrid${idSuffix}", "sccsGrid${idSuffix}", "scqtGrid${idSuffix}"];                    $.each(gridIds, function (e, data) {                        $.ns('namespaceId${idSuffix}').getToolBarQsnsxsjComponent(data).textbox("setValue", updateData.qsnsxsj);                    });                }                if (data.CZSJ != null) {                    $.ns('namespaceId${idSuffix}').serGridReadOnly("#scggGrid${idSuffix}", data.ID);                }            });            $.each(updateData.scggtrp, function (e, data) {                $("#scggTrpGrid${idSuffix}").grid("addRowData", data.ID, data);                var nszyxbhCombobox = $("#scggTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "NSZYXBH");                var trptymCombobox = $("#scggTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "TRPTYM");                var trpmcCombobox = $("#scggTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "TRPMC");                <%--var yt = $("#scggTrpGrid${idSuffix}").grid("getCellComponent",  data.ID, "YT");--%>                var trptym = $.loadJson($.contextPath + "/sczzscda!getTrptymByLx.json?lx=" + data.TRPLX);                //var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + data.TRPLX+"&tym="+data.TRPTYM);                nszyxbhCombobox.combobox("reload", [{text: data.NSZYXBH, value: data.NSZYXBH}]);                nszyxbhCombobox.combobox("setValue", data.NSZYXBH);                trptymCombobox.combobox("reload", trptym);                trptymCombobox.combobox("setValue", data.TRPTYM);                trpmcCombobox.combobox("reload", trptym);                trpmcCombobox.combobox("setValue", data.TRPTYM);                trptymCombobox.combobox("option", "onChange", function (e, data) {                    var $trpmcCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPMC");                    var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                    var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + rowData.TRPLX + "&tym=" + rowData.TRPTYM);                    $trpmcCombobox.combobox("reload", trpmc);                    $trpmcCombobox.combobox("setValue", "");                });            });            $.ns('namespaceId${idSuffix}').updateDGridBh("scggGrid${idSuffix}");            /*****************加载生产施肥 begin**************************/            $.each(updateData.scsf, function (e, data) {                $("#scsfGrid${idSuffix}").grid("addRowData", data.ID, data);                if (data.QSNSX == 1) {                    $("#scsfGrid${idSuffix}").grid("setRowData", data.ID, null, {background: '#68C561'});                    $("#scsfGrid${idSuffix}").grid("getCellComponent", data.ID, "NSXJGSJ").textbox({readonly: true});                    var gridIds = ["scbzGrid${idSuffix}", "scggG" +                    "rid${idSuffix}", "scsfGrid${idSuffix}", "scyyGrid${idSuffix}", "scccGrid${idSuffix}", "sccsGrid${idSuffix}", "scqtGrid${idSuffix}"];                    $.each(gridIds, function (e, data) {                        $.ns('namespaceId${idSuffix}').getToolBarQsnsxsjComponent(data).textbox("setValue", updateData.qsnsxsj);                    });                }                if (data.CZSJ != null) {                    $.ns('namespaceId${idSuffix}').serGridReadOnly("#scsfGrid${idSuffix}", data.ID);                }            });            $.each(updateData.scsftrp, function (e, data) {                $("#scsfTrpGrid${idSuffix}").grid("addRowData", data.ID, data);                var nszyxbhCombobox = $("#scsfTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "NSZYXBH");                var trptymCombobox = $("#scsfTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "TRPTYM");                var trpmcCombobox = $("#scsfTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "TRPMC");                <%--var yt = $("#scsfTrpGrid${idSuffix}").grid("getCellComponent",  data.ID, "YT");--%>                var trptym = $.loadJson($.contextPath + "/sczzscda!getTrptymByLx.json?lx=" + data.TRPLX);                var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + data.TRPLX + "&tym=" + data.TRPTYM);                nszyxbhCombobox.combobox("reload", [{text: data.NSZYXBH, value: data.NSZYXBH}]);                nszyxbhCombobox.combobox("setValue", data.NSZYXBH);                trptymCombobox.combobox("reload", trptym);                trptymCombobox.combobox("setValue", data.TRPTYM);                trpmcCombobox.combobox("reload", trpmc);                trpmcCombobox.combobox("setValue", data.TRPMC);                trptymCombobox.combobox("option", "onChange", function (e, data) {                    var $trpmcCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPMC");                    var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                    var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + rowData.TRPLX + "&tym=" + rowData.TRPTYM);                    $trpmcCombobox.combobox("reload", trpmc);                    $trpmcCombobox.combobox("setValue", "");                });                trpmcCombobox.combobox("option", "onChange", function (e, data) {                    var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                    var ytdata = $.loadJson($.contextPath + "/sczzscda!getYtByTrpmc.json?trpmc=" + rowData.TRPMC + "&lx=" + rowData.TRPLX);                    $("#" + e.data.gridId).grid("setRowData", e.data.rowId, {                        YT: ytdata.TEXT                    });                });                <%--$("#scsfTrpGrid${idSuffix}").grid("getCellComponent",  data.ID, "YT").("setValue", data.YT);--%>            });            $.ns('namespaceId${idSuffix}').updateDGridBh("scsfGrid${idSuffix}");            /*****************加载生产用药 begin**************************/            $.each(updateData.scyy, function (e, data) {                $("#scyyGrid${idSuffix}").grid("addRowData", data.ID, data);                if (data.QSNSX == 1) {                    $("#scyyGrid${idSuffix}").grid("setRowData", data.ID, null, {background: '#68C561'});                    $("#scyyGrid${idSuffix}").grid("getCellComponent", data.ID, "NSXJGSJ").textbox({readonly: true});                    var gridIds = ["scbzGrid${idSuffix}", "scggGrid${idSuffix}", "scsfGrid${idSuffix}", "scyyGrid${idSuffix}", "scccGrid${idSuffix}", "sccsGrid${idSuffix}", "scqtGrid${idSuffix}"];                    $.each(gridIds, function (e, data) {                        $.ns('namespaceId${idSuffix}').getToolBarQsnsxsjComponent(data).textbox("setValue", updateData.qsnsxsj);                    });                }                if (data.CZSJ != null) {                    $.ns('namespaceId${idSuffix}').serGridReadOnly("#scyyGrid${idSuffix}", data.ID);                }            });            $.each(updateData.scyytrp, function (e, data) {                $("#scyyTrpGrid${idSuffix}").grid("addRowData", data.ID, data);                var nszyxbhCombobox = $("#scyyTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "NSZYXBH");                var trptymCombobox = $("#scyyTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "TRPTYM");                var trpmcCombobox = $("#scyyTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "TRPMC");                <%--var yt = $("#scyyTrpGrid${idSuffix}").grid("getCellComponent",  data.ID, "YT");--%>                var trptym = $.loadJson($.contextPath + "/sczzscda!getTrptymByLx.json?lx=" + data.TRPLX);                var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + data.TRPLX + "&tym=" + data.TRPTYM);                nszyxbhCombobox.combobox("reload", [{text: data.NSZYXBH, value: data.NSZYXBH}]);                nszyxbhCombobox.combobox("setValue", data.NSZYXBH);                trptymCombobox.combobox("reload", trptym);                trptymCombobox.combobox("setValue", data.TRPTYM);                trpmcCombobox.combobox("reload", trpmc);                trpmcCombobox.combobox("setValue", data.TRPMC);                trptymCombobox.combobox("option", "onChange", function (e, data) {                    var $trpmcCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPMC");                    var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                    var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + rowData.TRPLX + "&tym=" + rowData.TRPTYM);                    $trpmcCombobox.combobox("reload", trpmc);                    $trpmcCombobox.combobox("setValue", "");                });                trpmcCombobox.combobox("option", "onChange", function (e, data) {                    var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                    var ytdata = $.loadJson($.contextPath + "/sczzscda!getYtByTrpmc.json?trpmc=" + rowData.TRPMC + "&lx=" + rowData.TRPLX);                    $("#" + e.data.gridId).grid("setRowData", e.data.rowId, {                        YT: ytdata.TEXT                    });                });            });            $.ns('namespaceId${idSuffix}').updateDGridBh("scyyGrid${idSuffix}");            /*****************加载生产采收 begin**************************/            $.each(updateData.sccs, function (e, data) {                $("#sccsGrid${idSuffix}").grid("addRowData", data.ID, data);                if (data.QSNSX == 1) {                    $("#sccsGrid${idSuffix}").grid("setRowData", data.ID, null, {background: '#68C561'});                    $("#sccsGrid${idSuffix}").grid("getCellComponent", data.ID, "NSXJGSJ").textbox({readonly: true});                    var gridIds = ["scbzGrid${idSuffix}", "scggGrid${idSuffix}", "scsfGrid${idSuffix}", "scyyGrid${idSuffix}", "scccGrid${idSuffix}", "sccsGrid${idSuffix}", "scqtGrid${idSuffix}"];                    $.each(gridIds, function (e, data) {                        $.ns('namespaceId${idSuffix}').getToolBarQsnsxsjComponent(data).textbox("setValue", updateData.qsnsxsj);                    });                }                if (data.CZSJ != null) {                    $.ns('namespaceId${idSuffix}').serGridReadOnly("#sccsGrid${idSuffix}", data.ID);                }            });            $.each(updateData.sccstrp, function (e, data) {                $("#sccsTrpGrid${idSuffix}").grid("addRowData", data.ID, data);                var nszyxbhCombobox = $("#sccsTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "NSZYXBH");                var trptymCombobox = $("#sccsGrid${idSuffix}").grid("getCellComponent", data.ID, "TRPTYM");                var trpmcCombobox = $("#sccsGrid${idSuffix}").grid("getCellComponent", data.ID, "TRPMC");                <%--var yt = $("#sccsGrid${idSuffix}").grid("getCellComponent",  data.ID, "YT");--%>                var trptym = $.loadJson($.contextPath + "/sczzscda!getTrptymByLx.json?lx=" + data.TRPLX);                //var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + data.TRPLX+"&tym="+data.TRPTYM);                nszyxbhCombobox.combobox("reload", [{text: data.NSZYXBH, value: data.NSZYXBH}]);                nszyxbhCombobox.combobox("setValue", data.NSZYXBH);                trptymCombobox.combobox("reload", trptym);                trptymCombobox.combobox("setValue", data.TRPTYM);                trpmcCombobox.combobox("reload", trptym);                trpmcCombobox.combobox("setValue", data.TRPMC);                trptymCombobox.combobox("option", "onChange", function (e, data) {                    var $trpmcCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPMC");                    var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                    var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + rowData.TRPLX + "&tym=" + rowData.TRPTYM);                    $trpmcCombobox.combobox("reload", trpmc);                    $trpmcCombobox.combobox("setValue", "");                });                trpmcCombobox.combobox("option", "onChange", function (e, data) {                    var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                    var ytdata = $.loadJson($.contextPath + "/sczzscda!getYtByTrpmc.json?trpmc=" + rowData.TRPMC + "&lx=" + rowData.TRPLX);                    $("#" + e.data.gridId).grid("setRowData", e.data.rowId, {                        YT: ytdata.TEXT                    });                });            });            $.ns('namespaceId${idSuffix}').updateDGridBh("sccsGrid${idSuffix}");            /*****************加载生产锄草 begin**************************/            $.each(updateData.sccc, function (e, data) {                $("#scccGrid${idSuffix}").grid("addRowData", data.ID, data);                if (data.QSNSX == 1) {                    $("#scccGrid${idSuffix}").grid("setRowData", data.ID, null, {background: '#68C561'});                    $("#scccGrid${idSuffix}").grid("getCellComponent", data.ID, "NSXJGSJ").textbox({readonly: true});                    var gridIds = ["scbzGrid${idSuffix}", "scggGrid${idSuffix}", "scsfGrid${idSuffix}", "scyyGrid${idSuffix}", "scccGrid${idSuffix}", "sccsGrid${idSuffix}", "scqtGrid${idSuffix}"];                    $.each(gridIds, function (e, data) {                        $.ns('namespaceId${idSuffix}').getToolBarQsnsxsjComponent(data).textbox("setValue", updateData.qsnsxsj);                    });                }                if (data.CZSJ != null) {                    $.ns('namespaceId${idSuffix}').serGridReadOnly("#scccGrid${idSuffix}", data.ID);                }            });            $.each(updateData.sccctrp, function (e, data) {                $("#scccTrpGrid${idSuffix}").grid("addRowData", data.ID, data);                var nszyxbhCombobox = $("#scccTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "NSZYXBH");                var trptymCombobox = $("#scccTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "TRPTYM");                var trpmcCombobox = $("#scccTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "TRPMC");                <%--var yt = $("#scccTrpGrid${idSuffix}").grid("getCellComponent",  data.ID, "YT");--%>                var trptym = $.loadJson($.contextPath + "/sczzscda!getTrptymByLx.json?lx=" + data.TRPLX);                var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + data.TRPLX + "&tym=" + data.TRPTYM);                nszyxbhCombobox.combobox("reload", [{text: data.NSZYXBH, value: data.NSZYXBH}]);                nszyxbhCombobox.combobox("setValue", data.NSZYXBH);                trptymCombobox.combobox("reload", trptym);                trptymCombobox.combobox("setValue", data.TRPTYM);                trpmcCombobox.combobox("reload", trpmc);                trpmcCombobox.combobox("setValue", data.TRPMC);                trptymCombobox.combobox("option", "onChange", function (e, data) {                    var $trpmcCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPMC");                    var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                    var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + rowData.TRPLX + "&tym=" + rowData.TRPTYM);                    $trpmcCombobox.combobox("reload", trpmc);                    $trpmcCombobox.combobox("setValue", "");                });                trpmcCombobox.combobox("option", "onChange", function (e, data) {                    var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                    var ytdata = $.loadJson($.contextPath + "/sczzscda!getYtByTrpmc.json?trpmc=" + rowData.TRPMC + "&lx=" + rowData.TRPLX);                    $("#" + e.data.gridId).grid("setRowData", e.data.rowId, {                        YT: ytdata.TEXT                    });                });            });            $.ns('namespaceId${idSuffix}').updateDGridBh("scccGrid${idSuffix}");            /*****************加载生产其它 begin**************************/            $.each(updateData.scqt, function (e, data) {                $("#scqtGrid${idSuffix}").grid("addRowData", data.ID, data);                if (data.QSNSX == 1) {                    $("#scqtGrid${idSuffix}").grid("setRowData", data.ID, null, {background: '#68C561'});                    $("#scqtGrid${idSuffix}").grid("getCellComponent", data.ID, "NSXJGSJ").textbox({readonly: true});                    var gridIds = ["scbzGrid${idSuffix}", "scggGrid${idSuffix}", "scsfGrid${idSuffix}", "scyyGrid${idSuffix}", "scccGrid${idSuffix}", "sccsGrid${idSuffix}", "scqtGrid${idSuffix}"];                    $.each(gridIds, function (e, data) {                        $.ns('namespaceId${idSuffix}').getToolBarQsnsxsjComponent(data).textbox("setValue", updateData.qsnsxsj);                    });                }                if (data.CZSJ != null) {                    $.ns('namespaceId${idSuffix}').serGridReadOnly("#scqtGrid${idSuffix}", data.ID);                }            });            $.each(updateData.scqttrp, function (e, data) {                $("#scqtTrpGrid${idSuffix}").grid("addRowData", data.ID, data);                var nszyxbhCombobox = $("#scqtTrpGrid${idSuffix}").grid("getCellComponent", data.ID, "NSZYXBH");                var trptymCombobox = $("#scqtGrid${idSuffix}").grid("getCellComponent", data.ID, "TRPTYM");                var trpmcCombobox = $("#scqtGrid${idSuffix}").grid("getCellComponent", data.ID, "TRPMC");                <%--var yt = $("#scqtGrid${idSuffix}").grid("getCellComponent",  data.ID, "YT");--%>                var trptym = $.loadJson($.contextPath + "/sczzscda!getTrptymByLx.json?lx=" + data.TRPLX);                var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + data.TRPLX + "&tym=" + data.TRPTYM);                nszyxbhCombobox.combobox("reload", [{text: data.NSZYXBH, value: data.NSZYXBH}]);                nszyxbhCombobox.combobox("setValue", data.NSZYXBH);                trptymCombobox.combobox("reload", trptym);                trptymCombobox.combobox("setValue", data.TRPTYM);                trpmcCombobox.combobox("reload", trpmc);                trpmcCombobox.combobox("setValue", data.TRPMC);                trptymCombobox.combobox("option", "onChange", function (e, data) {                    var $trpmcCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPMC");                    var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                    var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + rowData.TRPLX + "&tym=" + rowData.TRPTYM);                    $trpmcCombobox.combobox("reload", trpmc);                    $trpmcCombobox.combobox("setValue", "");                });                trpmcCombobox.combobox("option", "onChange", function (e, data) {                    var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                    var ytdata = $.loadJson($.contextPath + "/sczzscda!getYtByTrpmc.json?trpmc=" + rowData.TRPMC + "&lx=" + rowData.TRPLX);                    $("#" + e.data.gridId).grid("setRowData", e.data.rowId, {                        YT: ytdata.TEXT                    });                });            });            $.ns('namespaceId${idSuffix}').updateDGridBh("scqtGrid${idSuffix}");            /*****************加载生产其它 begin**************************/            $.each(updateData.scjcjl, function (e, data) {                data.JCXM = "农产检测";                $("#scjcjlGrid${idSuffix}").grid("addRowData", data.ID, data);            });            //更新调入品通用名            <%--$.ns("namespaceId${idSuffix}").updateTrptym("scbzTrpGrid${idSuffix}");--%>            <%--$.ns("namespaceId${idSuffix}").updateTrptym("scggTrpGrid${idSuffix}");--%>            <%--$.ns("namespaceId${idSuffix}").updateTrptym("scsfTrpGrid${idSuffix}");--%>            <%--$.ns("namespaceId${idSuffix}").updateTrptym("scyyTrpGrid${idSuffix}");--%>            <%--&lt;%&ndash;$.ns("namespaceId${idSuffix}").updateTrptym("scjcTrpGrid${idSuffix}");&ndash;%&gt;--%>            <%--$.ns("namespaceId${idSuffix}").updateTrptym("sccsTrpGrid${idSuffix}");--%>            <%--$.ns("namespaceId${idSuffix}").updateTrptym("scccTrpGrid${idSuffix}");--%>            <%--$.ns("namespaceId${idSuffix}").updateTrptym("scqtTrpGrid${idSuffix}");--%>            <%--//更新投入品名称--%>            <%--$.ns("namespaceId${idSuffix}").updateTrpmc("scbzTrpGrid${idSuffix}", allTrpmc);--%>            <%--$.ns("namespaceId${idSuffix}").updateTrpmc("scggTrpGrid${idSuffix}", allTrpmc);--%>            <%--$.ns("namespaceId${idSuffix}").updateTrpmc("scsfTrpGrid${idSuffix}", allTrpmc);--%>            <%--$.ns("namespaceId${idSuffix}").updateTrpmc("scyyTrpGrid${idSuffix}", allTrpmc);--%>            <%--&lt;%&ndash;$.ns("namespaceId${idSuffix}").updateTrpmc("scjcTrpGrid${idSuffix}", allTrpmc);&ndash;%&gt;--%>            <%--$.ns("namespaceId${idSuffix}").updateTrpmc("sccsTrpGrid${idSuffix}", allTrpmc);--%>            <%--$.ns("namespaceId${idSuffix}").updateTrpmc("scccTrpGrid${idSuffix}", allTrpmc);--%>            <%--$.ns("namespaceId${idSuffix}").updateTrpmc("scqtTrpGrid${idSuffix}", allTrpmc);--%>            /**************************************修改时加载数据 end**************************************/        },        initData: function (fabh) {            //初始化所有的列表信息            var allTrpmc = $.loadJson($.contextPath + "/sczzscda!getAllTrpxx.json");            var $trpGrids = $("#scbzTrpGrid${idSuffix},#scggTrpGrid${idSuffix},#scsfTrpGrid${idSuffix},#scyyTrpGrid${idSuffix},#scjcTrpGrid${idSuffix},#sccsTrpGrid${idSuffix},#scccTrpGrid${idSuffix},#scqtTrpGrid${idSuffix}");            //播种            var bzs = $.ns("namespaceId${idSuffix}").fapzs.bz[fabh];            for (var i in  bzs) {                var bz = bzs[i];                var bzID = generateId("tmp");//                var bzID = bz.ID;                $("#scbzGrid${idSuffix}").grid("addRowData", bzID, {                    QSNSX: bz.IS_START,                    NSZYXBH: bz.NSZYXBH,                    NSZYXMC: bz.NSZYXMC,                    ZPFS: bz.ZPFS,                    NSXJGSJ: bz.NSXJGSJ,                    CZFDSJ: bz.CZFDSJ                }, "last");                if (bz.IS_START == 1) {                    $("#scbzGrid${idSuffix}").grid("setRowData", bzID, null, {background: '#68C561'});                }                ;            }            $.ns('namespaceId${idSuffix}').updateDGridBh("scbzGrid${idSuffix}");            var bzTrps = $.ns("namespaceId${idSuffix}").fapzs.bzTrp[fabh];            var allTrptym = $.loadJson($.contextPath + "/sczzscda!getAllTrptym.json");            $("#scbzTrpGrid${idSuffix}").grid("setColProp", "TRPTYM", {                "formatoptions": {                    valueField: 'VALUE',                    textField: 'TEXT',                    required: true,                    enableFilter: true,                    "data": allTrptym,                    onChange: function (e, data) {                        var $trpmcCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPMC");                        var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                        var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + rowData.trplx + "&tym=" + rowData.trptym);                        $trpmcCombobox.combobox("reload", trpmc);                        $trpmcCombobox.combobox("setValue", "");                    }                }            });            $("#scbzTrpGrid${idSuffix}").grid("setColProp", "TRPMC", {                "formatoptions": {                    valueField: 'VALUE',                    textField: 'TEXT',                    required: true,                    enableFilter: true,                    "data": allTrptym                }            });            for (var i in  bzTrps) {                var bzTrp = bzTrps[i];                var lxData = $.loadJson($.contextPath + "/sczzscda!getLxByTym.json?bh=" + bzTrp.TRPTYM);                var bzTrpID = generateId("tmp");//                var bzTrpID = bzTrp.ID;                $("#scbzTrpGrid${idSuffix}").grid("addRowData", bzTrpID, {                    NSZYXBH: bzTrp.NSZYXBH,                    TRPTYM: bzTrp.TRPTYM,                    TRPLX: lxData.LX,                    TRPMC: bzTrp.TRPTYM,                }, "last");            }            //灌溉            var ggs = $.ns("namespaceId${idSuffix}").fapzs.gg[fabh];            for (var i in  ggs) {                var gg = ggs[i];                var ggID = generateId("tmp");//                var ggID = gg.ID;                $("#scggGrid${idSuffix}").grid("addRowData", ggID, {                    QSNSX: gg.IS_START,                    NSZYXBH: gg.NSZYXBH,                    NSZYXMC: gg.NSZYXMC,                    GGFS: gg.GGFS,                    SYLX: gg.SYLX,                    SYDJ: gg.SYDJ,                    NSXJGSJ: gg.NSXJGSJ,                    CZFDSJ: gg.CZFDSJ                }, "last");                if (gg.IS_START == 1) {                    $("#scggGrid${idSuffix}").grid("setRowData", ggID, null, {background: '#68C561'});                }                ;            }            $.ns('namespaceId${idSuffix}').updateDGridBh("scggGrid${idSuffix}");            var ggTym = $.loadJson($.contextPath + "/sczzscda!getGgTym.json");            $("#scggTrpGrid${idSuffix}").grid("setColProp", "TRPTYM", {                "formatoptions": {                    valueField: 'VALUE',                    textField: 'TEXT',                    required: true,                    enableFilter: true,                    "data": ggTym,                    onChange: function (e, data) {                        var $trpmcCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPMC");                        var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                        var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + rowData.TRPLX + "&tym=" + rowData.TRPTYM);                        $trpmcCombobox.combobox("reload", trpmc);                        $trpmcCombobox.combobox("setValue", "");                    }                }            });            $("#scggTrpGrid${idSuffix}").grid("setColProp", "TRPMC", {                "formatoptions": {                    valueField: 'VALUE',                    textField: 'TEXT',                    required: true,                    enableFilter: true,                    "data": ggTym,                    onChange: function (e, data) {                        var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                        var njjdata = $.loadJson($.contextPath + "/sczzscda!getYtByTrpmc.json?trpmc=" + rowData.TRPMC + "&lx=" + rowData.TRPLX);                        $("#" + e.data.gridId).grid("setRowData", e.data.rowId, {                            yt: njjdata.TEXT                        });                    }                }            });            var ggTrps = $.ns("namespaceId${idSuffix}").fapzs.ggTrp[fabh];            for (var i in  ggTrps) {                var ggTrp = ggTrps[i];                var lxData = $.loadJson($.contextPath + "/sczzscda!getNjjLxByTym.json?bh=" + ggTrp.TRPTYM);                var ggTrpID = generateId("tmp");//                var ggTrpID = ggTrp.ID;                $("#scggTrpGrid${idSuffix}").grid("addRowData", ggTrpID, {                    NSZYXBH: ggTrp.NSZYXBH,                    TRPTYM: ggTrp.TRPTYM,                    TRPLX: lxData.LX,                    TRPMC: ggTrp.TRPTYM,                    YT: ggTrp.YT,                }, "last");            }            //施肥            var sfs = $.ns("namespaceId${idSuffix}").fapzs.sf[fabh];            for (var i in  sfs) {                var sf = sfs[i];                var sfID = generateId("tmp");//                var sfID = sf.Id;                $("#scsfGrid${idSuffix}").grid("addRowData", sfID, {                    QSNSX: sf.IS_START,                    NSZYXBH: sf.NSZYXBH,                    NSZYXMC: sf.NSZYXMC,                    SFSD: sf.SFSD,                    NSXJGSJ: sf.NSXJGSJ,                    CZFDSJ: sf.CZFDSJ                }, "last");                if (sf.IS_START == 1) {                    $("#scsfGrid${idSuffix}").grid("setRowData", sfID, null, {background: '#68C561'});                }                ;            }            $.ns('namespaceId${idSuffix}').updateDGridBh("scsfGrid${idSuffix}");            var flTym = $.loadJson($.contextPath + "/sczzscda!getFlTym.json");            $("#scsfTrpGrid${idSuffix}").grid("setColProp", "TRPTYM", {                "formatoptions": {                    valueField: 'VALUE',                    textField: 'TEXT',                    required: true,                    enableFilter: true,                    "data": flTym,                    onChange: function (e, data) {                        var $trpmcCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPMC");                        var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                        var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + rowData.TRPLX + "&tym=" + rowData.TRPTYM);                        $trpmcCombobox.combobox("reload", trpmc);                        $trpmcCombobox.combobox("setValue", "");                    }                }            });            var flTrpmc = $.loadJson($.contextPath + "/sczzscda!getFlTrpmc.json");            $("#scsfTrpGrid${idSuffix}").grid("setColProp", "TRPMC", {                "formatoptions": {                    valueField: 'VALUE',                    textField: 'TEXT',                    required: true,                    enableFilter: true,                    "data": flTrpmc,                    onChange: function (e, data) {                        var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                        var ytdata = $.loadJson($.contextPath + "/sczzscda!getYtByTrpmc.json?trpmc=" + rowData.TRPMC + "&lx=" + rowData.TRPLX);                        $("#" + e.data.gridId).grid("setRowData", e.data.rowId, {                            YT: ytdata.TEXT                        });                    }                }            });            var sfTrps = $.ns("namespaceId${idSuffix}").fapzs.sfTrp[fabh];            for (var i in  sfTrps) {                var sfTrp = sfTrps[i];                var lxData = $.loadJson($.contextPath + "/sczzscda!getFlLxByTym.json?tym=" + sfTrp.TRPTYM);                var sfTrpID = generateId("tmp");//console.log(sfTrpID);                var trpmcData = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?tym=" + sfTrp.TRPTYM + "&lx=" + lxData[0].LX);//                var sfTrpID = sfTrp.ID;                $("#scsfTrpGrid${idSuffix}").grid("addRowData", sfTrpID, {                    NSZYXBH: sfTrp.NSZYXBH,                    TRPTYM: sfTrp.TRPTYM,                    TRPLX: lxData[0].LX,                }, "last");                var trpmc = $("#scsfTrpGrid${idSuffix}").grid("getCellComponent", sfTrpID, "TRPMC");                trpmc.combobox("clear");                trpmc.combobox("reload", trpmcData);            }            //用药            var yys = $.ns("namespaceId${idSuffix}").fapzs.yy[fabh];            for (var i in  yys) {                var yy = yys[i];                var yyID = generateId("tmp");//                var yyID = yy.ID;                $("#scyyGrid${idSuffix}").grid("addRowData", yyID, {                    QSNSX: yy.IS_START,                    NSZYXBH: yy.NSZYXBH,                    NSZYXMC: yy.NSZYXMC,                    YYSD: yy.YYSD,                    NSXJGSJ: yy.NSXJGSJ,                    CZFDSJ: yy.CZFDSJ                }, "last");                if (yy.IS_START == 1) {                    $("#scyyGrid${idSuffix}").grid("setRowData", yyID, null, {background: '#68C561'});                }                ;            }            $.ns('namespaceId${idSuffix}').updateDGridBh("scyyGrid${idSuffix}");            var nyTym = $.loadJson($.contextPath + "/sczzscda!getNyTym.json");            $("#scyyTrpGrid${idSuffix}").grid("setColProp", "TRPTYM", {                "formatoptions": {                    valueField: 'VALUE',                    textField: 'TEXT',                    required: true,                    enableFilter: true,                    "data": nyTym,                    onChange: function (e, data) {                        var $trpmcCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPMC");                        var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                        var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + rowData.TRPLX + "&tym=" + rowData.TRPTYM);                        $trpmcCombobox.combobox("reload", trpmc);                        $trpmcCombobox.combobox("setValue", "");                    }                }            });            var nyTrpmc = $.loadJson($.contextPath + "/sczzscda!getNyTrpmc.json");            $("#scyyTrpGrid${idSuffix}").grid("setColProp", "TRPMC", {                "formatoptions": {                    valueField: 'VALUE',                    textField: 'TEXT',                    required: true,                    enableFilter: true,                    "data": nyTrpmc,                    onChange: function (e, data) {                        var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                        var ytdata = $.loadJson($.contextPath + "/sczzscda!getYtByTrpmc.json?trpmc=" + rowData.TRPMC + "&lx=" + rowData.TRPLX);                        $("#" + e.data.gridId).grid("setRowData", e.data.rowId, {                            YT: ytdata.TEXT                        });                    }                }            });            var yyTrps = $.ns("namespaceId${idSuffix}").fapzs.yyTrp[fabh];            for (var i in yyTrps) {                var yyTrp = yyTrps[i];                var lxData = $.loadJson($.contextPath + "/sczzscda!getNyLxByTym.json?tym=" + yyTrp.TRPTYM);                var trpmcData = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?tym=" + yyTrp.TRPTYM + "&lx=" + lxData[0].LX);                var yyTrpID = generateId("tmp");//                var yyTrpID = yyTrp.ID;                $("#scyyTrpGrid${idSuffix}").grid("addRowData", yyTrpID, {                    NSZYXBH: yyTrp.NSZYXBH,                    TRPTYM: yyTrp.TRPTYM,                    TRPLX: lxData[0].LX,                }, "last");                var trpmc = $("#scyyTrpGrid${idSuffix}").grid("getCellComponent", yyTrpID, "TRPMC");                trpmc.combobox("clear");                trpmc.combobox("reload", trpmcData);            }            //采收            var css = $.ns("namespaceId${idSuffix}").fapzs.cs[fabh];            for (var i in  css) {                var cs = css[i];                var csID = generateId("tmp");//                var csID = cs.ID;                $("#sccsGrid${idSuffix}").grid("addRowData", csID, {                    QSNSX: cs.IS_START,                    NSZYXBH: cs.NSZYXBH,                    NSZYXMC: cs.NSZYXMC,                    CSFS: cs.CSFS,                    NSXJGSJ: cs.NSXJGSJ,                    CZFDSJ: cs.CZFDSJ                }, "last");                if (cs.IS_START == 1) {                    $("#sccsGrid${idSuffix}").grid("setRowData", csID, null, {background: '#68C561'});                }                ;            }            $.ns('namespaceId${idSuffix}').updateDGridBh("sccsGrid${idSuffix}");            var csTym = $.loadJson($.contextPath + "/sczzscda!getGgTym.json");            $("#sccsTrpGrid${idSuffix}").grid("setColProp", "trptym", {                "formatoptions": {                    valueField: 'VALUE',                    textField: 'TEXT',                    required: true,                    enableFilter: true,                    "data": csTym,                    onChange: function (e, data) {                        var $trpmcCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPMC");                        var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                        var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + rowData.TRPLX + "&tym=" + rowData.TRPTYM);                        $trpmcCombobox.combobox("reload", trpmc);                        $trpmcCombobox.combobox("setValue", "");                    }                }            });            $("#sccsTrpGrid${idSuffix}").grid("setColProp", "TRPMC", {                "formatoptions": {                    valueField: 'VALUE',                    textField: 'TEXT',                    required: true,                    enableFilter: true,                    "data": csTym,                    onChange: function (e, data) {                        var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                        var csdata = $.loadJson($.contextPath + "/sczzscda!getYtByTrpmc.json?trpmc=" + rowData.TRPMC + "&lx=" + rowData.TRPLX);                        $("#" + e.data.gridId).grid("setRowData", e.data.rowId, {                            YT: csdata.TEXT                        });                    }                }            });            var csTrps = $.ns("namespaceId${idSuffix}").fapzs.csTrp[fabh];            for (var i in csTrps) {                var csTrp = csTrps[i];                var lxData = $.loadJson($.contextPath + "/sczzscda!getNjjLxByTym.json?bh=" + ggTrp.TRPTYM);                var csTrpID = generateId("tmp");//                var csTrpID = csTrp.ID;                $("#sccsTrpGrid${idSuffix}").grid("addRowData", csTrpID, {                    NSZYXBH: csTrp.NSZYXBH,                    TRPTYM: csTrp.TRPTYM,                    TRPMC: csTrp.TRPTYM,                    TRPLX: lxData.LX,                    YT: csTrp.YT                }, "last");                var trpmc = $("#scyyTrpGrid${idSuffix}").grid("getCellComponent", yyTrpID, "TRPMC");                trpmc.combobox("clear");                trpmc.combobox("reload", trpmcData);            }            //锄草            var ccs = $.ns("namespaceId${idSuffix}").fapzs.cc[fabh];            for (var i in  ccs) {                var cc = ccs[i];                var ccID = generateId("tmp");                $("#scccGrid${idSuffix}").grid("addRowData", ccID, {                    QSNSX: cc.IS_START,                    NSZYXBH: cc.NSZYXBH,                    NSZYXMC: cc.NSZYXMC,                    CCFS: cc.CCFS,                    NSXJGSJ: cc.NSXJGSJ,                    CZFDSJ: cc.CZFDSJ                }, "last");                if (cc.IS_START == 1) {                    $("#scccGrid${idSuffix}").grid("setRowData", ccID, null, {background: '#68C561'});                }                ;            }            $.ns('namespaceId${idSuffix}').updateDGridBh("scccGrid${idSuffix}");            var nyTym = $.loadJson($.contextPath + "/sczzscda!getNyTym.json");            $("#scccTrpGrid${idSuffix}").grid("setColProp", "TRPTYM", {                "formatoptions": {                    valueField: 'VALUE',                    textField: 'TEXT',                    required: true,                    enableFilter: true,                    "data": nyTym,                    onChange: function (e, data) {                        var $trpmcCombobox = $("#" + e.data.gridId).grid("getCellComponent", e.data.rowId, "TRPMC");                        var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                        var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + rowData.TRPLX + "&tym=" + rowData.TRPTYM);                        $trpmcCombobox.combobox("reload", trpmc);                        $trpmcCombobox.combobox("setValue", "");                    }                }            });            var nyTrpmc = $.loadJson($.contextPath + "/sczzscda!getNyTrpmc.json");            $("#scccTrpGrid${idSuffix}").grid("setColProp", "TRPMC", {                "formatoptions": {                    valueField: 'VALUE',                    textField: 'TEXT',                    required: true,                    enableFilter: true,                    "data": nyTrpmc,                    onChange: function (e, data) {                        var rowData = $("#" + e.data.gridId).grid("getRowData", e.data.rowId);                        var ytdata = $.loadJson($.contextPath + "/sczzscda!getYtByTrpmc.json?trpmc=" + rowData.TRPMC + "&lx=" + rowData.TRPLX);                        $("#" + e.data.gridId).grid("setRowData", e.data.rowId, {                            YT: ytdata.TEXT                        });                    }                }            });            var ccTrps = $.ns("namespaceId${idSuffix}").fapzs.ccTrp[fabh];            for (var i in ccTrps) {                var ccTrp = ccTrps[i];                var ccTrpID = generateId("tmp");                var lxData = $.loadJson($.contextPath + "/sczzscda!getNyLxByTym.json?tym=" + ccTrp.TRPTYM);                var trpmcData = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?tym=" + ccTrp.TRPTYM + "&lx=" + lxData[0].LX);                $("#scccTrpGrid${idSuffix}").grid("addRowData", ccTrpID, {                    NSZYXBH: ccTrp.NSZYXBH,                    TRPTYM: ccTrp.TRPTYM,                    TRPLX: lxData[0].LX,                }, "last");                var trpmc = $("#scccTrpGrid${idSuffix}").grid("getCellComponent", ccTrpID, "TRPMC");                trpmc.combobox("clear");                trpmc.combobox("reload", trpmcData);            }            //其它            var qts = $.ns("namespaceId${idSuffix}").fapzs.qt[fabh];            for (var i in  qts) {                var qt = qts[i];                var qtID = generateId("tmp");//                var qtID = qt.ID;                $("#scqtGrid${idSuffix}").grid("addRowData", qtID, {                    QSNSX: qt.IS_START,                    NSZYXBH: qt.NSZYXBH,                    NSZYXMC: qt.NSZYXMC,                    NSXJGSJ: qt.NSXJGSJ,                    CZFDSJ: qt.CZFDSJ                }, "last");                if (qt.IS_START == 1) {                    $("#scqtGrid${idSuffix}").grid("setRowData", qtID, null, {background: '#68C561'});                }                ;            }            $.ns('namespaceId${idSuffix}').updateDGridBh("scqtGrid${idSuffix}");            var qtTrps = $.ns("namespaceId${idSuffix}").fapzs.qtTrp[fabh];            for (var i in qtTrps) {                var qtTrp = qtTrps[i];                var qtTrpID = generateId("tmp");//                var qtTrpID = qtTrpID;                $("#scqtTrpGrid${idSuffix}").grid("addRowData", qtTrpID, {                    NSZYXBH: qtTrp.NSZYXBH,                    TRPTYM: qtTrp.TRPTYM,                }, "last");                var trpmc = $("#scccTrpGrid${idSuffix}").grid("getCellComponent", qtTrpID, "TRPMC");                trpmc.combobox("clear");                trpmc.combobox("reload", trpmcData);            }            //更新调入品通用名            <%--$.ns("namespaceId${idSuffix}").updateTrptym("scbzTrpGrid${idSuffix}");--%>            <%--$.ns("namespaceId${idSuffix}").updateTrptym("scggTrpGrid${idSuffix}");--%>            <%--$.ns("namespaceId${idSuffix}").updateTrptym("scsfTrpGrid${idSuffix}");--%>            <%--$.ns("namespaceId${idSuffix}").updateTrptym("scyyTrpGrid${idSuffix}");--%>            <%--&lt;%&ndash;$.ns("namespaceId${idSuffix}").updateTrptym("scjcTrpGrid${idSuffix}");&ndash;%&gt;--%>            <%--$.ns("namespaceId${idSuffix}").updateTrptym("sccsTrpGrid${idSuffix}");--%>            <%--$.ns("namespaceId${idSuffix}").updateTrptym("scccTrpGrid${idSuffix}");--%>            <%--$.ns("namespaceId${idSuffix}").updateTrptym("scqtTrpGrid${idSuffix}");--%>            <%--//更新投入品名称--%>            <%--$.ns("namespaceId${idSuffix}").updateTrpmc("scbzTrpGrid${idSuffix}", allTrpmc);--%>            <%--$.ns("namespaceId${idSuffix}").updateTrpmc("scggTrpGrid${idSuffix}", allTrpmc);--%>            <%--$.ns("namespaceId${idSuffix}").updateTrpmc("scsfTrpGrid${idSuffix}", allTrpmc);--%>            <%--$.ns("namespaceId${idSuffix}").updateTrpmc("scyyTrpGrid${idSuffix}", allTrpmc);--%>            <%--&lt;%&ndash;$.ns("namespaceId${idSuffix}").updateTrpmc("scjcTrpGrid${idSuffix}", allTrpmc);&ndash;%&gt;--%>            <%--$.ns("namespaceId${idSuffix}").updateTrpmc("sccsTrpGrid${idSuffix}", allTrpmc);--%>            <%--$.ns("namespaceId${idSuffix}").updateTrpmc("scccTrpGrid${idSuffix}", allTrpmc);--%>            <%--$.ns("namespaceId${idSuffix}").updateTrpmc("scqtTrpGrid${idSuffix}", allTrpmc);--%>        },        validGrid: function (gridId, err1, err2) {//主表验证            var $grid = $("#" + gridId);            var gridIds = $grid.grid("getDataIDs");            if ($.isEmptyObject(gridIds)) {                CFG_message(err1, "warning");                return false;            }            if (!$grid.grid("valid")) {                CFG_message(err2, "warning");                return false;            }            return true;        },        updateTrpmc: function (trpGrid, allTrpmc) {            var ids = $("#" + trpGrid).grid("getDataIDs");            for (var i in ids) {                var $trpmcCombobox = $("#" + trpGrid).grid("getCellComponent", ids[i], "TRPMC");                var gridData = $("#" + trpGrid).grid("getRowData", ids[i]);                var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpByTym.json?tym=" + gridData.TRPTYM);                $trpmcCombobox.combobox("reload", trpmc);            }        },        updateTrptym: function (trpGrid) {            var ids = $("#" + trpGrid).grid("getDataIDs");            for (var i in ids) {                initTrpGrid($("#" + trpGrid).grid("getRowData", ids[i]), $("#" + trpGrid));//                var $trpmcCombobox = $("#" + trpGrid).grid("getCellComponent", ids[i], "TRPTYM");//                var gridData = $("#" + trpGrid).grid("getRowData", ids[i]);//                var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrptymByLx.json?lx=" + gridData.TRPLX);//                $trpmcCombobox.combobox("reload", trpmc);            }        },        toolbarClick: function (e, ui) {            if (ui.id == "addScbz") {//播种新增                var nextNszyxbh = $.ns('namespaceId${idSuffix}').getNextNszyxbh("scbzGrid${idSuffix}");                var $grid = $("#scbzGrid${idSuffix}");                var lastsel = generateId("tmp");                $grid.grid("addRowData", lastsel, {                    QSNSX: "0",                    NSZYXBH: nextNszyxbh,                    CZFDSJ: 0                }, "last");                $.ns('namespaceId${idSuffix}').updateDGridBh("scbzGrid${idSuffix}");            } else if (ui.id == "addScbzTrp") {//播种投入品新增                var valid = $.ns('namespaceId${idSuffix}').validGrid("scbzGrid${idSuffix}", "请先添加播种方案信息", "请先将播种方案信息填写完整");                if (!valid) {                    return;                }                var lastsel = generateId("tmp");                $("#scbzTrpGrid${idSuffix}").grid("addRowData", lastsel, {}, "last");            } else if (ui.id == "addScgg") {//灌溉新增                var nextNszyxbh = $.ns('namespaceId${idSuffix}').getNextNszyxbh("scggGrid${idSuffix}");                var $grid = $("#scggGrid${idSuffix}");                var lastsel = generateId("tmp");                $grid.grid("addRowData", lastsel, {                    QSNSX: "0",                    NSZYXBH: nextNszyxbh,                    CZFDSJ: 0                }, "last");                $.ns('namespaceId${idSuffix}').updateDGridBh("scggGrid${idSuffix}");            } else if (ui.id == "addScggTrp") {//灌溉投入品新增                var valid = $.ns('namespaceId${idSuffix}').validGrid("scggGrid${idSuffix}", "请先添加灌溉方案信息", "请先将灌溉方案信息填写完整");                if (!valid) {                    return;                }                var lastsel = generateId("tmp");                $("#scggTrpGrid${idSuffix}").grid("addRowData", lastsel, {}, "last");            } else if (ui.id == "addScsf") {//施肥新增                var nextNszyxbh = $.ns('namespaceId${idSuffix}').getNextNszyxbh("scsfGrid${idSuffix}");                var $grid = $("#scsfGrid${idSuffix}");                var lastsel = generateId("tmp");                $grid.grid("addRowData", lastsel, {                    QSNSX: "0",                    NSZYXBH: nextNszyxbh,                    CZFDSJ: 0                }, "last");                $.ns('namespaceId${idSuffix}').updateDGridBh("scsfGrid${idSuffix}");            } else if (ui.id == "addScsfTrp") {//施肥投入品新增                var valid = $.ns('namespaceId${idSuffix}').validGrid("scsfGrid${idSuffix}", "请先添加施肥方案信息", "请先将施肥方案信息填写完整");                if (!valid) {                    return;                }                var lastsel = generateId("tmp");                $("#scsfTrpGrid${idSuffix}").grid("addRowData", lastsel, {}, "last");            } else if (ui.id == "addScyy") {//用药新增                var nextNszyxbh = $.ns('namespaceId${idSuffix}').getNextNszyxbh("scyyGrid${idSuffix}");                var $grid = $("#scyyGrid${idSuffix}");                var lastsel = generateId("tmp");                $grid.grid("addRowData", lastsel, {                    QSNSX: "0",                    NSZYXBH: nextNszyxbh,                    CZFDSJ: 0                }, "last");                $.ns('namespaceId${idSuffix}').updateDGridBh("scyyGrid${idSuffix}");            } else if (ui.id == "addScyyTrp") {//用药投入品新增                var valid = $.ns('namespaceId${idSuffix}').validGrid("scyyGrid${idSuffix}", "请先添加用药方案信息", "请先将用药方案信息填写完整");                if (!valid) {                    return;                }                var lastsel = generateId("tmp");                $("#scyyTrpGrid${idSuffix}").grid("addRowData", lastsel, {}, "last");            } else if (ui.id == "addScjc") {//检测新增            } else if (ui.id == "addSccs") {//采收新增                var nextNszyxbh = $.ns('namespaceId${idSuffix}').getNextNszyxbh("sccsGrid${idSuffix}");                var $grid = $("#sccsGrid${idSuffix}");                var lastsel = generateId("tmp");                $grid.grid("addRowData", lastsel, {                    QSNSX: "0",                    NSZYXBH: nextNszyxbh,                    CZFDSJ: 0                }, "last");                $.ns('namespaceId${idSuffix}').updateDGridBh("sccsGrid${idSuffix}");            } else if (ui.id == "addSccsTrp") {//采收投入品新增                var valid = $.ns('namespaceId${idSuffix}').validGrid("sccsGrid${idSuffix}", "请先添加采收方案信息", "请先将采收方案信息填写完整");                if (!valid) {                    return;                }                var lastsel = generateId("tmp");                $("#sccsTrpGrid${idSuffix}").grid("addRowData", lastsel, {}, "last");            } else if (ui.id == "addSccc") {//锄草新增                var nextNszyxbh = $.ns('namespaceId${idSuffix}').getNextNszyxbh("scccGrid${idSuffix}");                var $grid = $("#scccGrid${idSuffix}");                var lastsel = generateId("tmp");                $grid.grid("addRowData", lastsel, {                    QSNSX: "0",                    NSZYXBH: nextNszyxbh,                    CZFDSJ: 0                }, "last");                $.ns('namespaceId${idSuffix}').updateDGridBh("scccGrid${idSuffix}");            } else if (ui.id == "addScccTrp") {//锄草投入品新增                var valid = $.ns('namespaceId${idSuffix}').validGrid("scccGrid${idSuffix}", "请先添加锄草方案信息", "请先将锄草方案信息填写完整");                if (!valid) {                    return;                }                var lastsel = generateId("tmp");                $("#scccTrpGrid${idSuffix}").grid("addRowData", lastsel, {}, "last");            } else if (ui.id == "addScqt") {//其它新增                var nextNszyxbh = $.ns('namespaceId${idSuffix}').getNextNszyxbh("scqtGrid${idSuffix}");                var $grid = $("#scqtGrid${idSuffix}");                var lastsel = generateId("tmp");                $grid.grid("addRowData", lastsel, {                    QSNSX: "0",                    NSZYXBH: nextNszyxbh,                    CZFDSJ: 0                }, "last");                $.ns('namespaceId${idSuffix}').updateDGridBh("scqtGrid${idSuffix}");            } else if (ui.id == "addScqtTrp") {//其它投入品新增                var valid = $.ns('namespaceId${idSuffix}').validGrid("scqtGrid${idSuffix}", "请先添加其它方案信息", "请先将其它方案信息填写完整");                if (!valid) {                    return;                }                var lastsel = generateId("tmp");                $("#scqtTrpGrid${idSuffix}").grid("addRowData", lastsel, {}, "last");            } else if (ui.id == "saveMaster") {//保存方法                if (!$.ns('namespaceId${idSuffix}').valid()) {                    return;                }                //获取起始农事项时间                var qsnsxsj = "";                var $grids = $("#scbzGrid${idSuffix},#scggGrid${idSuffix},#scsfGrid${idSuffix},#scyyGrid${idSuffix},#sccsGrid${idSuffix},#scccGrid${idSuffix},#scqtGrid${idSuffix}");                $grids.each(function () {                    var $grid = $(this);                    var value = $.ns('namespaceId${idSuffix}').getToolBarQsnsxsjComponent($grid.grid("option").id).textbox("getValue");                    if (isNotEmpty(value)) {                        qsnsxsj = value;                        return false;                    }                });                var scxx = {                    <%--ssqybh: $("#ssqybh${idSuffix}").combobox("getValue"),--%>                    <%--ssqymc: $("#ssqybh${idSuffix}").combobox("getText"),--%>                    ycmc: $("#ycmc${idSuffix}").textbox("getValue"),                    zmzzbh: $("#zmzzbh${idSuffix}").textbox("getValue"),                    zmzzmc: $("#zmzzmc${idSuffix}").textbox("getValue"),                    dkbh: $("#dkmc${idSuffix}").combobox("getValue"),                    dkmc: $("#dkmc${idSuffix}").combobox("getText"),                    jdbh: $("#jdmc${idSuffix}").combobox("getValue"),                    jdmc: $("#jdmc${idSuffix}").combobox("getText"),                    zzfzrbh: $("#zzfzr${idSuffix}").combobox("getValue"),                    zzfzr: $("#zzfzr${idSuffix}").combobox("getText"),                    zzpch: $("#zzpch${idSuffix}").textbox("getValue"),                    dkmj: $("#dkmj${idSuffix}").textbox("getValue"),                    <%--zzdybh: $("#zzdy${idSuffix}").combobox("getValue"),--%>                    <%--zzdymc: $("#zzdy${idSuffix}").combobox("getText"),--%>                    <%--zzdymj: $("#zzdymj${idSuffix}").textbox("getValue"),--%>                    <%--zzdyglybh: $("#zzdyglybh${idSuffix}").val(),--%>                    <%--zzdygly: $("#zzdygly${idSuffix}").textbox("getValue"),--%>                    <%--qyglybh: $("#qyglybh${idSuffix}").val(),--%>                    <%--qygly: $("#qygly${idSuffix}").textbox("getValue"),--%>                    <%--plbh: $("#plbh${idSuffix}").val(),--%>                    <%--pzbh: $("#pzbh${idSuffix}").val(),--%>                    <%--pl: $("#pl${idSuffix}").textbox("getValue"),--%>                    <%--pz: $("#pz${idSuffix}").textbox("getValue"),--%>                    zzfabh: $("#zzfa${idSuffix}").combobox("getValue"),                    zzfa: $("#zzfa${idSuffix}").combobox("getText"),                    zzsj: $("#zzsj${idSuffix}").datepicker("getDateValue"),                    <%--zzjssj: $("#zzjssj${idSuffix}").datepicker("getDateValue"),--%>                    <%--trzb: $("#trzb${idSuffix}").textbox("getValue"),--%>                    qsnsxsj: qsnsxsj,                    <%--zt:$("#zt${idSuffix}").combobox("getValue")--%>                    ID: $("#scdaid${idSuffix}").textbox("getValue")                };                //播种信息                var bzxx = [];                var scbzIds = $("#scbzGrid${idSuffix}").grid("getDataIDs");                var scbzTrpIds = $("#scbzTrpGrid${idSuffix}").grid("getDataIDs");                for (var i in scbzIds) {                    var scbzRowData = $("#scbzGrid${idSuffix}").grid("getRowData", scbzIds[i]);                    var bzxxTrp = [];                    for (var i in scbzTrpIds) {                        var scbzTrpRowData = $("#scbzTrpGrid${idSuffix}").grid("getRowData", scbzTrpIds[i]);                        if (scbzRowData.NSZYXBH == scbzTrpRowData.NSZYXBH) {                            bzxxTrp.push(scbzTrpRowData);                        }                    }                    bzxx.push({                        bz: scbzRowData,                        bzTrp: bzxxTrp                    });                }                //灌溉信息                var ggxx = [];                var scggIds = $("#scggGrid${idSuffix}").grid("getDataIDs");                var scggTrpIds = $("#scggTrpGrid${idSuffix}").grid("getDataIDs");                for (var i in scggIds) {                    var scggRowData = $("#scggGrid${idSuffix}").grid("getRowData", scggIds[i]);                    var ggxxTrp = [];                    for (var i in scggTrpIds) {                        var scggTrpRowData = $("#scggTrpGrid${idSuffix}").grid("getRowData", scggTrpIds[i]);                        if (scggRowData.NSZYXBH == scggTrpRowData.NSZYXBH) {                            ggxxTrp.push(scggTrpRowData);                        }                    }                    ggxx.push({                        gg: scggRowData,                        ggTrp: ggxxTrp                    });                }                //施肥                var sfxx = [];                var scsfIds = $("#scsfGrid${idSuffix}").grid("getDataIDs");                var scsfTrpIds = $("#scsfTrpGrid${idSuffix}").grid("getDataIDs");                for (var i in scsfIds) {                    var scsfRowData = $("#scsfGrid${idSuffix}").grid("getRowData", scsfIds[i]);                    var sfxxTrp = [];                    for (var i in scsfTrpIds) {                        var scsfTrpRowData = $("#scsfTrpGrid${idSuffix}").grid("getRowData", scsfTrpIds[i]);                        if (scsfRowData.NSZYXBH == scsfTrpRowData.NSZYXBH) {                            sfxxTrp.push(scsfTrpRowData);                        }                    }                    sfxx.push({                        sf: scsfRowData,                        sfTrp: sfxxTrp                    });                }                //用药                var yyxx = [];                var scyyIds = $("#scyyGrid${idSuffix}").grid("getDataIDs");                var scyyTrpIds = $("#scyyTrpGrid${idSuffix}").grid("getDataIDs");                for (var i in scyyIds) {                    var scyyRowData = $("#scyyGrid${idSuffix}").grid("getRowData", scyyIds[i]);                    var yyxxTrp = [];                    for (var i in scyyTrpIds) {                        var scyyTrpRowData = $("#scyyTrpGrid${idSuffix}").grid("getRowData", scyyTrpIds[i]);                        if (scyyRowData.NSZYXBH == scyyTrpRowData.NSZYXBH) {                            yyxxTrp.push(scyyTrpRowData);                        }                    }                    yyxx.push({                        yy: scyyRowData,                        yyTrp: yyxxTrp                    });                }                //采收                var csxx = [];                var sccsIds = $("#sccsGrid${idSuffix}").grid("getDataIDs");                var sccsTrpIds = $("#sccsTrpGrid${idSuffix}").grid("getDataIDs");                for (var i in sccsIds) {                    var sccsRowData = $("#sccsGrid${idSuffix}").grid("getRowData", sccsIds[i]);                    var csxxTrp = [];                    for (var i in sccsTrpIds) {                        var sccsTrpRowData = $("#sccsTrpGrid${idSuffix}").grid("getRowData", sccsTrpIds[i]);                        if (sccsRowData.NSZYXBH == sccsTrpRowData.NSZYXBH) {                            csxxTrp.push(sccsTrpRowData);                        }                    }                    csxx.push({                        cs: sccsRowData,                        csTrp: csxxTrp                    });                }                //锄草                var ccxx = [];                var scccIds = $("#scccGrid${idSuffix}").grid("getDataIDs");                var scccTrpIds = $("#scccTrpGrid${idSuffix}").grid("getDataIDs");                for (var i in scccIds) {                    var scccRowData = $("#scccGrid${idSuffix}").grid("getRowData", scccIds[i]);                    var ccxxTrp = [];                    for (var i in scccTrpIds) {                        var scccTrpRowData = $("#scccTrpGrid${idSuffix}").grid("getRowData", scccTrpIds[i]);                        if (scccRowData.NSZYXBH == scccTrpRowData.NSZYXBH) {                            ccxxTrp.push(scccTrpRowData);                        }                    }                    ccxx.push({                        cc: scccRowData,                        ccTrp: ccxxTrp                    });                }                //其它                var qtxx = [];                var scqtIds = $("#scqtGrid${idSuffix}").grid("getDataIDs");                var scqtTrpIds = $("#scqtTrpGrid${idSuffix}").grid("getDataIDs");                for (var i in scqtIds) {                    var scqtRowData = $("#scqtGrid${idSuffix}").grid("getRowData", scqtIds[i]);                    var qtxxTrp = [];                    for (var i in scqtTrpIds) {                        var scqtTrpRowData = $("#scqtTrpGrid${idSuffix}").grid("getRowData", scqtTrpIds[i]);                        if (scqtRowData.NSZYXBH == scqtTrpRowData.NSZYXBH) {                            qtxxTrp.push(scqtTrpRowData);                        }                    }                    qtxx.push({                        qt: scqtRowData,                        qtTrp: qtxxTrp                    });                }                //检测记录                if (!$("#scjcjlGrid${idSuffix}").grid("valid")) {                    $("#tabs${idSuffix}").tabs("option", "active", 4);                    CFG_message("请检查检测方案信息", "warning");                    return false;                }                var jcjl = $("#scjcjlGrid${idSuffix}").grid("getRowData");                var data = {                    bzxx: bzxx,                    ggxx: ggxx,                    sfxx: sfxx,                    yyxx: yyxx,                    csxx: csxx,                    ccxx: ccxx,                    qtxx: qtxx,                    scxx: scxx,//                    jcjl: jcjl                };                $.ajax({                    url: $.contextPath + "/sczzscda!updateScdaxx.json",                    type: "POST",                    dataType: "json",                    async: false,                    data: {                        scdaxx: JSON.stringify(data)                    },                    success: function () {                        CFG_message("保存成功", "success");                        var configInfo = $("#maxDiv${idSuffix}").data('configInfo');                        CFG_clickCloseButton(configInfo);                    },                    error: function () {                        CFG_message("保存失败", "error");                    }                });            } else if (ui.id == "return") {//关闭                var configInfo = $("#maxDiv${idSuffix}").data('configInfo');                CFG_clickCloseButton(configInfo);            }        },        valid: function () {//保存前验证            if (!$("#enterForm${idSuffix}").form("valid")) {                CFG_message("请检查表单信息", "warning");                return false;            }            if (!$("#scbzGrid${idSuffix}").grid("valid")) {                $("#tabs${idSuffix}").tabs("option", "active", 0);                CFG_message("请检查播种方案信息", "warning");                return false;            }            if (!$("#scbzTrpGrid${idSuffix}").grid("valid")) {                $("#tabs${idSuffix}").tabs("option", "active", 0);                CFG_message("请检查播种方案投入品信息", "warning");                return false;            }            if (!$("#scggGrid${idSuffix}").grid("valid")) {                $("#tabs${idSuffix}").tabs("option", "active", 1);                CFG_message("请检查灌溉方案信息", "warning");                return false;            }            if (!$("#scggTrpGrid${idSuffix}").grid("valid")) {                $("#tabs${idSuffix}").tabs("option", "active", 1);                CFG_message("请检查灌溉方案投入品信息", "warning");                return false;            }            if (!$("#scsfGrid${idSuffix}").grid("valid")) {                $("#tabs${idSuffix}").tabs("option", "active", 2);                CFG_message("请检查施肥方案信息", "warning");                return false;            }            if (!$("#scsfTrpGrid${idSuffix}").grid("valid")) {                $("#tabs${idSuffix}").tabs("option", "active", 2);                CFG_message("请检查施肥方案投入品信息", "warning");                return false;            }            if (!$("#scyyGrid${idSuffix}").grid("valid")) {                $("#tabs${idSuffix}").tabs("option", "active", 3);                CFG_message("请检查用药方案信息", "warning");                return false;            }            if (!$("#scyyTrpGrid${idSuffix}").grid("valid")) {                $("#tabs${idSuffix}").tabs("option", "active", 3);                CFG_message("请检查用药方案投入品信息", "warning");                return false;            }            if (!$("#sccsGrid${idSuffix}").grid("valid")) {                $("#tabs${idSuffix}").tabs("option", "active", 5);                CFG_message("请检查采收方案信息", "warning");                return false;            }            if (!$("#sccsTrpGrid${idSuffix}").grid("valid")) {                $("#tabs${idSuffix}").tabs("option", "active", 5);                CFG_message("请检查采收方案投入品信息", "warning");                return false;            }            if (!$("#scccGrid${idSuffix}").grid("valid")) {                $("#tabs${idSuffix}").tabs("option", "active", 4);                CFG_message("请检查锄草方案信息", "warning");                return false;            }            if (!$("#scccTrpGrid${idSuffix}").grid("valid")) {                $("#tabs${idSuffix}").tabs("option", "active", 4);                CFG_message("请检查锄草方案投入品信息", "warning");                return false;            }            if (!$("#scqtGrid${idSuffix}").grid("valid")) {                $("#tabs${idSuffix}").tabs("option", "active", 6);                CFG_message("请检查其它方案信息", "warning");                return false;            }            if (!$("#scqtTrpGrid${idSuffix}").grid("valid")) {                $("#tabs${idSuffix}").tabs("option", "active", 6);                CFG_message("请检查其它方案投入品信息", "warning");                return false;            }            if (!$("#scjcjlGrid${idSuffix}").grid("valid")) {                $("#tabs${idSuffix}").tabs("option", "active", 7);                CFG_message("请检查检测方案信息", "warning");                return false;            }            //验证是否有起始农事项            var hasQsnsx = false;            <%--var $grids = $("#scbzGrid${idSuffix},#scggGrid${idSuffix},#scsfGrid${idSuffix},#scyyGrid${idSuffix},#sccsGrid${idSuffix},#scccGrid${idSuffix},#scqtGrid${idSuffix}");--%>            <%--$grids.each(function () {--%>            <%--var $grid = $(this);--%>            <%--var gridIds = $grid.grid("getDataIDs");--%>            <%--for (var i in gridIds) {--%>            <%--var gridData = $grid.grid("getRowData", gridIds[i]);--%>            <%--if (gridData.QSNSX == "1") {--%>            <%--hasQsnsx = true;--%>            <%--return false;--%>            <%--}--%>            <%--}--%>            <%--});--%>            //获取起始农事项时间            var qsnsxsj = "";            var $grids = $("#scbzGrid${idSuffix},#scggGrid${idSuffix},#scsfGrid${idSuffix},#scyyGrid${idSuffix},#sccsGrid${idSuffix},#scccGrid${idSuffix},#scqtGrid${idSuffix}");            $grids.each(function () {                var $grid = $(this);                var value = $.ns('namespaceId${idSuffix}').getToolBarQsnsxsjComponent($grid.grid("option").id).textbox("getValue");                if (isNotEmpty(value)) {                    qsnsxsj = value;                    hasQsnsx = true;                    return false;                }            });            if (!hasQsnsx) {                CFG_message("请设置起始农事项", "warning");                return false;            }            return true;        },        updateDGridBh: function (gridId) {//更新子表编号            var $grid = $("#" + gridId);            var $dGrid = $.ns('namespaceId${idSuffix}').getDetailGrid(gridId);            var gridIds = $grid.grid("getDataIDs");            var dGridIds = $dGrid.grid("getDataIDs");            var zxybhs = [];            var copyZxybhsArray = [];            var zxybhsArray = [];            for (var i in gridIds) {                var gridData = $grid.grid("getRowData", gridIds[i]);                if (gridData.CZSJ.toString() == "") {                    zxybhs.push({                        value: gridData.NSZYXBH,                        text: gridData.NSZYXBH                    });                    zxybhsArray.push(gridData.NSZYXBH);                }                copyZxybhsArray.push(gridData.NSZYXBH);            }            $dGrid.grid("setColProp", "NSZYXBH", {"formatoptions": {required: true, "data": zxybhs}});            for (var i in dGridIds) {                var dGridData = $dGrid.grid("getRowData", dGridIds[i]);                if ($.inArray(dGridData.NSZYXBH, zxybhsArray) == -1) {                    if (dGridData.NSZYXBH == "") {                        $dGrid.grid("getCellComponent", dGridIds[i], "NSZYXBH").combobox("reload", zxybhs);                        return;                    }                    if ($.inArray(dGridData.NSZYXBH, copyZxybhsArray) == -1) {                        $dGrid.grid("delRowData", dGridIds[i]);                    } else {                        $.ns('namespaceId${idSuffix}').setdGridReadOnly(gridId, dGridIds[i]);                    }                } else {                    $dGrid.grid("getCellComponent", dGridIds[i], "NSZYXBH").combobox("reload", zxybhs);                }            }        },        getDetailGrid: function (gridId) {//获取子表            return $("#" + gridId).parents("div[name='tabBorderDiv']").find(".ctrl-init-grid:last");        },        getToolBarQsnsxsjComponent: function (gridId) {//获取关联的工具条            return $("#" + gridId).parents("div[name='tabBorderDiv']").find(".ctrl-init-toolbar:first").toolbar("getSubCoral", "qsnsxsjlabel").$el;        },        getNextNszyxbh: function (gridId) {//获取新的农事项编号            var $grid = $("#" + gridId);            var gridIds = $grid.grid("getDataIDs");            if ($.isEmptyObject(gridIds)) {                return 1;            }            var gridData = $grid.grid("getRowData", gridIds[gridIds.length - 1]);            return parseInt(gridData.NSZYXBH) + 1;        },        gridClick: function (e, ui) {            var edatagridId = $(this).attr("gridId");            var edatarowId = $(this).attr("rowId");            if (ui.id == "delGridData") {                $.confirm("确定删除", function (r) {                    if (r) {                        var gridData = $("#" + edatagridId).grid("getRowData", edatarowId);                        if (gridData.QSNSX == "1") {//是起始农事项则删除起始时间                            $.ns('namespaceId${idSuffix}').getToolBarQsnsxsjComponent(edatagridId).textbox("setValue", "");                        }                        deleteDataId = edatarowId;                        $("#" + edatagridId).grid("delRowData", edatarowId);                        $.ns('namespaceId${idSuffix}').updateDGridBh(edatagridId);                    }                });            } else if (ui.id == "delDetailGridData") {                $.confirm("确定删除", function (r) {                    if (r) {                        $("#" + e.data.gridId).grid("delRowData", e.data.rowId);                    }                });            } else if (ui.id == "setFirst") {//设为起始农事项                var valid = $.ns('namespaceId${idSuffix}').validGrid(edatagridId, "请先添加信息", "请先将信息填写完整");                if (!valid) {                    return;                }                $.ns('namespaceId${idSuffix}').showQsnsxsjDialog(edatagridId, edatarowId);            } else if (ui.id == "uploadImg") {                _uploadId = e.data.rowId;                $.ns('namespaceId${idSuffix}').uploadImgClick();            } else if (ui.id == "showImg") {                _uploadId = e.data.rowId;                $.ns('namespaceId${idSuffix}').showImgClick();            }        },        showQsnsxsjDialog: function (gridId, rowId) {            $("#jqUC").remove();            var jqGlobal = $("body");            var jqUC = $("<div id=\"jqUC\"></div>").appendTo(jqGlobal);            jqUC.dialog({                appendTo: jqGlobal,                modal: true,                title: "请设置起始农事项时间",                width: 280,                height: 120,                resizable: false,                position: {                    at: "center top+200"                },                onClose: function () {                    jqUC.remove();                    jqUC.remove();                },                onCreate: function () {                    var jqDiv = $("<div class=\"app-inputdiv-full\" style=\"padding:10px 20px;\"></div>").appendTo(this);                    var jq = $("<input id=\"qsnsxdialogDate${idSuffix}\" name=\"opinion\">").appendTo(jqDiv);                    jq.textbox({width: 200});                },                onOpen: function () {                    $("#qsnsxdialogDate${idSuffix}").datepicker({                        required: true                    });                    var jqPanel = $(this).dialog("buttonPanel").addClass("app-bottom-toolbar"),                            jqDiv = $("<div class=\"dialog-toolbar\">").appendTo(jqPanel);                    jqDiv.toolbar({                        data: ["->", {id: "sure", label: "确定", type: "button"}, {                            id: "cancel",                            label: "取消",                            type: "button"                        }],                        onClick: function (e, ui) {                            if ("sure" === ui.id) {                                if (!$("#qsnsxdialogDate${idSuffix}").datepicker("valid")) {                                    CFG_message("请先填写时间", "warning");                                    return;                                }                                $.ns('namespaceId${idSuffix}').clearFirst();                                $("#" + gridId).grid("setRowData", rowId, {                                    QSNSX: "1"                                });                                //TODO 高亮行                                $("#" + gridId).grid("setRowData", rowId, null, {background: '#68C561'});                                var $grids = $("#scbzGrid${idSuffix},#scggGrid${idSuffix},#scsfGrid${idSuffix},#scyyGrid${idSuffix},#sccsGrid${idSuffix},#scccGrid${idSuffix},#scqtGrid${idSuffix}");                                $.each($grids, function (e, data) {                                    var _this = this;                                    $.each($(this).grid("getDataIDs"), function (e, data) {                                        $(_this).grid("getCellComponent", data, "NSXJGSJ").textbox({readonly: false});                                    });                                });                                var $nsxjgsjTextbox = $("#" + gridId).grid("getCellComponent", rowId, "NSXJGSJ");                                $nsxjgsjTextbox.textbox("setValue", "0");                                $nsxjgsjTextbox.textbox({readonly: true});                                $grids.grid("option", "rowattr", $.ns('namespaceId${idSuffix}').rowAttr);                                //设置toolbar文本框                                $.ns('namespaceId${idSuffix}').getToolBarQsnsxsjComponent(gridId).textbox("setValue", $("#qsnsxdialogDate${idSuffix}").datepicker("getValue"));                                $("#qsnsxdialog${idSuffix}").remove();                            }                            jqUC.remove();                        }                    });                }            });            <%--$("#qsnsxdialog${idSuffix}").remove();--%>            <%--$("body").append("<div id='qsnsxdialog${idSuffix}'><div><label>起始农事项时间:</label><input id='qsnsxdialogDate${idSuffix}'></div><div><input id='dialogConfirm${idSuffix}'><input id='dialogCancel${idSuffix}'></div></div>");--%>            <%--$("#qsnsxdialog${idSuffix}").dialog({--%>            <%--width: 400,--%>            <%--height: 200,--%>            <%--onOpen: function () {--%>            <%--$("#qsnsxdialogDate${idSuffix}").datepicker({--%>            <%--required: true--%>            <%--});--%>            <%--$("#dialogConfirm${idSuffix}").button({--%>            <%--label: "确定",--%>            <%--width: 80,--%>            <%--onClick: function () {--%>            <%--if (!$("#qsnsxdialogDate${idSuffix}").datepicker("valid")) {--%>            <%--CFG_message("请先填写时间", "warning");--%>            <%--return;--%>            <%--}--%>            <%--$.ns('namespaceId${idSuffix}').clearFirst();--%>            <%--$("#" + gridId).grid("setRowData", rowId, {--%>            <%--QSNSX: "1"--%>            <%--});--%>            <%--//TODO 高亮行--%>            <%--$("#" + gridId).grid("setRowData", rowId, null, {background: '#68C561'});--%>            <%--var $grids = $("#scbzGrid${idSuffix},#scggGrid${idSuffix},#scsfGrid${idSuffix},#scyyGrid${idSuffix},#sccsGrid${idSuffix},#scccGrid${idSuffix},#scqtGrid${idSuffix}");--%>            <%--$grids.grid("option", "rowattr", $.ns('namespaceId${idSuffix}').rowAttr);--%>            <%--//设置toolbar文本框--%>            <%--$.ns('namespaceId${idSuffix}').getToolBarQsnsxsjComponent(gridId).textbox("setValue", $("#qsnsxdialogDate${idSuffix}").datepicker("getValue"));--%>            <%--$("#qsnsxdialog${idSuffix}").remove();--%>            <%--}--%>            <%--});--%>            <%--$("#dialogCancel${idSuffix}").button({--%>            <%--label: "取消",--%>            <%--width: 80,--%>            <%--onClick: function () {--%>            <%--$("#qsnsxdialog${idSuffix}").remove();--%>            <%--}--%>            <%--});--%>            <%--},--%>            <%--onClose: function () {--%>            <%--$("#qsnsxdialog${idSuffix}").remove();--%>            <%--}--%>            <%--});--%>            <%--$("#qsnsxdialog${idSuffix}").dialog("open");--%>        },        clearFirst: function () {//清除已有的起始农事项            var $grids = $("#scbzGrid${idSuffix},#scggGrid${idSuffix},#scsfGrid${idSuffix},#scyyGrid${idSuffix},#sccsGrid${idSuffix},#scccGrid${idSuffix},#scqtGrid${idSuffix}");            $grids.each(function () {                $.ns('namespaceId${idSuffix}').getToolBarQsnsxsjComponent($(this).grid("option").id).textbox("setValue", "");                var dataIds = $(this).grid("getDataIDs");                for (var i in dataIds) {                    $(this).grid("setRowData", dataIds[i], {                        QSNSX: "0"                    });                    $(this).grid("setRowData", dataIds[i], null, {background: ""});                }            });        },        rowAttr: function (o) {//表格行属性            if (o.rowData.QSNSX == "1") {                return {"style": "background:#F0EFB5"};            }        },        serGridReadOnly: function (gridId, rowId) {            var $grid = $(gridId);            //公有字段            var $item = $grid.grid("getCellComponent", rowId, "NSZYXBH");            $item.textbox({readonly: true});            $item = $grid.grid("getCellComponent", rowId, "NSZYXMC");            $item.textbox({readonly: true});            $item = $grid.grid("getCellComponent", rowId, "NSXJGSJ");            $item.textbox({readonly: true});            $item = $grid.grid("getCellComponent", rowId, "CZFDSJ");            $item.textbox({readonly: true});            //播种            $item = $grid.grid("getCellComponent", rowId, "ZPFS");            $item.combobox({readonly: true});            //灌溉            $item = $grid.grid("getCellComponent", rowId, "GGFS");            $item.combobox({readonly: true});            $item = $grid.grid("getCellComponent", rowId, "SYLX");            $item.combobox({readonly: true});            $item = $grid.grid("getCellComponent", rowId, "SYDJ");            $item.combobox({readonly: true});            //施肥            $item = $grid.grid("getCellComponent", rowId, "SFSD");            $item.combobox({readonly: true});            //用药            $item = $grid.grid("getCellComponent", rowId, "YYSD");            $item.combobox({readonly: true});            //检测            $item = $grid.grid("getCellComponent", rowId, "JCFF");            $item.combobox({readonly: true});            $item = $grid.grid("getCellComponent", rowId, "JCDW");            $item.combobox({readonly: true});            //采收            $item = $grid.grid("getCellComponent", rowId, "CSFS");            $item.combobox({readonly: true});            //锄草            $item = $grid.grid("getCellComponent", rowId, "CCFS");            $item.combobox({readonly: true});        },        setdGridReadOnly: function (gridId, id) {            var $grid = $.ns('namespaceId${idSuffix}').getDetailGrid(gridId);            var $item = $grid.grid("getCellComponent", id, "NSZYXBH");            $item.combobox({readonly: true});            $item = $grid.grid("getCellComponent", id, "TRPLX");            $item.combobox({readonly: true});            $item = $grid.grid("getCellComponent", id, "TRPTYM");            $item.combobox({readonly: true});            $item = $grid.grid("getCellComponent", id, "TRPMC");            $item.combobox({readonly: true});            $item = $grid.grid("getCellComponent", id, "YL");            $item.textbox({readonly: true});        },        uploadImgClick: function () {            CFG_clickButtonOrTreeNode($('#maxDiv${idSuffix}').data('configInfo'), "jcbgsc", "上传图片", 2, $.ns("namespaceId${idSuffix}"));        },        showImgClick: function () {            CFG_clickButtonOrTreeNode($('#maxDiv${idSuffix}').data('configInfo'), "jcbgck", "图片查看", 2, $.ns("namespaceId${idSuffix}"));        },        getSelectedRowId: function (o) {            o = {                stutas: true,                id: _uploadId,                tableId: "402894815065addb015065b59f960013"            }            return o;        },        getTableId: function (o) {            o = {                stutas: true,                id: _uploadId,                tableId: "402894815065addb015065b59f960013"            }            return o;        },        setTptableIdColumns: function (o) {            o = {                status: true,                P_tableId: "402894815065addb015065b59f960013",                P_columns: "EQ_C_ZBID≡" + _uploadId            };            return o;        }    });    $(function () {        var configInfo = CFG_initConfigInfo({            /** 页面名称 */            'page': 'sczzscdaxg.jsp',            /** 页面中的最大元素 */            'maxEleInPage': $('#maxDiv${idSuffix}'),            /** 获取构件嵌入的区域 */            'getEmbeddedZone': function () {            },            /** 初始化预留区 */            'initReserveZones': function (configInfo) {                <%--CFG_addToolbarButtons(configInfo, $('#toolbarId${idSuffix}'), 'toolBarReserve', 0);--%>            },            /** 获取返回按钮添加的位置 */            'setReturnButton': function (configInfo) {                <%--CFG_setReturnButton(configInfo, $('#toolbarId${idSuffix}'));--%>            },            /** 页面初始化的方法 */            'bodyOnLoad': function (configInfo) {                var id = CFG_getInputParamValue(configInfo, 'paramIn1');                $.ns('namespaceId${idSuffix}').initform(id);                <%--$("#scbzToolbarId${idSuffix}").toolbar("refresh");--%>                //种植地块                var dkObj = $.loadJson($.contextPath + "/sczzscda!getDkxx.json");                $('#dkmc${idSuffix}').combobox('reload', dkObj);                //种植负责人                var zzfzrObj = $.loadJson($.contextPath + "/sczzscda!getZzfzr.json");                $('#zzfzr${idSuffix}').combobox('reload', zzfzrObj);                //种植基地                var jdObj = $.loadJson($.contextPath + "/sczzscda!getJdxx.json");                $('#jdmc${idSuffix}').combobox('reload', jdObj);                <%--$("#enterForm${idSuffix}").form("loadData", formData);--%>                <%--$("#enterForm${idSuffix}").form("disable");--%>                $("#toolbarId${idSuffix}").toolbar("remove", "save");                //样式调整                $("input[id=qsnsxsjlabel]").parent().css("border", "0");                $("input[id=qsnsxsjlabel]").parent().parent().unbind();                $("input[id=qsnsxsjlabel]").parent().parent().css("margin-top", "3px");            }        });        if (configInfo) {            //alert("系统参数：\t" + "关联的系统参数=" + CFG_getSystemParamValue(configInfo, 'systemParam1')            //		+ "\n构件自身参数：\t" + "selfParam1=" + CFG_getSelfParamValue(configInfo, 'selfParam1')            //		+ "\n构件入参：\t" + "inputParamName_1=" + CFG_getInputParamValue(configInfo, 'inputParamName_1'));        }    });    function initTrpGrid(rowData, $grid) {        var $trptymCombobox = $grid.grid("getCellComponent", rowData.ID, "trptym");        var $trpmcCombobox = $grid.grid("getCellComponent", rowData.ID, "trpmc");        var trptym = $.loadJson($.contextPath + "/sczzscda!getTrptymByLx.json?lx=" + rowData.TRPLX);        $trptymCombobox.combobox("reload", trptym);        var trpmc = $.loadJson($.contextPath + "/sczzscda!getTrpxxByTym.json?lx=" + rowData.TRPLX + "&tym=" + rowData.TRPTYM);        $trpmcCombobox.combobox("reload", trpmc);        $trptymCombobox.combobox("setValue", rowData.TRPTYM);        $trpmcCombobox.combobox("setValue", rowData.TRPMC);    }</script>